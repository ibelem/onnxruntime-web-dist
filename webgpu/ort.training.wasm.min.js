/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var ort=(()=>{var pr=Object.defineProperty;var Xa=Object.getOwnPropertyDescriptor;var Ja=Object.getOwnPropertyNames;var Qa=Object.prototype.hasOwnProperty;var N=(n,r)=>()=>(n&&(r=n(n=0)),r);var ot=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),it=(n,r)=>{for(var e in r)pr(n,e,{get:r[e],enumerable:!0})},Za=(n,r,e,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Ja(r))!Qa.call(n,o)&&o!==e&&pr(n,o,{get:()=>r[o],enumerable:!(u=Xa(r,o))||u.enumerable});return n};var qe=n=>Za(pr({},"__esModule",{value:!0}),n);var Ut,Xe,st,kt,Ft=N(()=>{Ut=new Map,Xe=[],st=(n,r,e)=>{if(r&&typeof r.init=="function"&&typeof r.createInferenceSessionHandler=="function"){let u=Ut.get(n);if(u===void 0)Ut.set(n,{backend:r,priority:e});else{if(u.priority>e)return;if(u.priority===e&&u.backend!==r)throw new Error(`cannot register backend "${n}" using priority ${e}`)}if(e>=0){let o=Xe.indexOf(n);o!==-1&&Xe.splice(o,1);for(let d=0;d<Xe.length;d++)if(Ut.get(Xe[d]).priority<=e){Xe.splice(d,0,n);return}Xe.push(n)}return}throw new TypeError("not a valid backend")},kt=async n=>{let r=n.length===0?Xe:n,e=[];for(let u of r){let o=Ut.get(u);if(o){if(o.initialized)return o.backend;if(o.aborted)continue;let d=!!o.initPromise;try{return d||(o.initPromise=o.backend.init()),await o.initPromise,o.initialized=!0,o.backend}catch(f){d||e.push({name:u,err:f}),o.aborted=!0}finally{delete o.initPromise}}}throw new Error(`no available backend found. ERR: ${e.map(u=>`[${u.name}] ${u.err}`).join(", ")}`)}});var vn=N(()=>{Ft()});var _n,Tn=N(()=>{_n="1.17.0"});var Sn,mr,En=N(()=>{Tn();Sn="warning",mr={wasm:{},webgl:{},webgpu:{},versions:{common:_n},set logLevel(n){if(n!==void 0){if(typeof n!="string"||["verbose","info","warning","error","fatal"].indexOf(n)===-1)throw new Error(`Unsupported logging level: ${n}`);Sn=n}},get logLevel(){return Sn}};Object.defineProperty(mr,"logLevel",{enumerable:!0})});var $,An=N(()=>{En();$=mr});var Mn,Rn,In=N(()=>{Mn=(n,r)=>{let e=document.createElement("canvas");e.width=n.dims[3],e.height=n.dims[2];let u=e.getContext("2d");if(u!=null){let o,d;r?.tensorLayout!==void 0&&r.tensorLayout==="NHWC"?(o=n.dims[2],d=n.dims[3]):(o=n.dims[3],d=n.dims[2]);let f=r?.format!==void 0?r.format:"RGB",a=r?.norm,h,m;a===void 0||a.mean===void 0?h=[255,255,255,255]:typeof a.mean=="number"?h=[a.mean,a.mean,a.mean,a.mean]:(h=[a.mean[0],a.mean[1],a.mean[2],0],a.mean[3]!==void 0&&(h[3]=a.mean[3])),a===void 0||a.bias===void 0?m=[0,0,0,0]:typeof a.bias=="number"?m=[a.bias,a.bias,a.bias,a.bias]:(m=[a.bias[0],a.bias[1],a.bias[2],0],a.bias[3]!==void 0&&(m[3]=a.bias[3]));let y=d*o,v=0,_=y,E=y*2,x=-1;f==="RGBA"?(v=0,_=y,E=y*2,x=y*3):f==="RGB"?(v=0,_=y,E=y*2):f==="RBG"&&(v=0,E=y,_=y*2);for(let S=0;S<d;S++)for(let A=0;A<o;A++){let k=(n.data[v++]-m[0])*h[0],G=(n.data[_++]-m[1])*h[1],j=(n.data[E++]-m[2])*h[2],z=x===-1?255:(n.data[x++]-m[3])*h[3];u.fillStyle="rgba("+k+","+G+","+j+","+z+")",u.fillRect(A,S,1,1)}return e.toDataURL()}else throw new Error("Can not access image data")},Rn=(n,r)=>{let e=document.createElement("canvas").getContext("2d"),u;if(e!=null){let o,d,f;r?.tensorLayout!==void 0&&r.tensorLayout==="NHWC"?(o=n.dims[2],d=n.dims[1],f=n.dims[3]):(o=n.dims[3],d=n.dims[2],f=n.dims[1]);let a=r!==void 0&&r.format!==void 0?r.format:"RGB",h=r?.norm,m,y;h===void 0||h.mean===void 0?m=[255,255,255,255]:typeof h.mean=="number"?m=[h.mean,h.mean,h.mean,h.mean]:(m=[h.mean[0],h.mean[1],h.mean[2],255],h.mean[3]!==void 0&&(m[3]=h.mean[3])),h===void 0||h.bias===void 0?y=[0,0,0,0]:typeof h.bias=="number"?y=[h.bias,h.bias,h.bias,h.bias]:(y=[h.bias[0],h.bias[1],h.bias[2],0],h.bias[3]!==void 0&&(y[3]=h.bias[3]));let v=d*o;if(r!==void 0&&(r.format!==void 0&&f===4&&r.format!=="RGBA"||f===3&&r.format!=="RGB"&&r.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let _=4,E=0,x=1,S=2,A=3,k=0,G=v,j=v*2,z=-1;a==="RGBA"?(k=0,G=v,j=v*2,z=v*3):a==="RGB"?(k=0,G=v,j=v*2):a==="RBG"&&(k=0,j=v,G=v*2),u=e.createImageData(o,d);for(let I=0;I<d*o;E+=_,x+=_,S+=_,A+=_,I++)u.data[E]=(n.data[k++]-y[0])*m[0],u.data[x]=(n.data[G++]-y[1])*m[1],u.data[S]=(n.data[j++]-y[2])*m[2],u.data[A]=z===-1?255:(n.data[z++]-y[3])*m[3]}else throw new Error("Can not access image data");return u}});var hr,Cn,Pn,xn,Dn,Un=N(()=>{Bt();hr=(n,r)=>{if(n===void 0)throw new Error("Image buffer must be defined");if(r.height===void 0||r.width===void 0)throw new Error("Image height and width must be defined");if(r.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:e,width:u}=r,o=r.norm??{mean:255,bias:0},d,f;typeof o.mean=="number"?d=[o.mean,o.mean,o.mean,o.mean]:d=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?f=[o.bias,o.bias,o.bias,o.bias]:f=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let a=r.format!==void 0?r.format:"RGBA",h=r.tensorFormat!==void 0&&r.tensorFormat!==void 0?r.tensorFormat:"RGB",m=e*u,y=h==="RGBA"?new Float32Array(m*4):new Float32Array(m*3),v=4,_=0,E=1,x=2,S=3,A=0,k=m,G=m*2,j=-1;a==="RGB"&&(v=3,_=0,E=1,x=2,S=-1),h==="RGBA"?j=m*3:h==="RBG"?(A=0,G=m,k=m*2):h==="BGR"&&(G=0,k=m,A=m*2);for(let I=0;I<m;I++,_+=v,x+=v,E+=v,S+=v)y[A++]=(n[_]+f[0])/d[0],y[k++]=(n[E]+f[1])/d[1],y[G++]=(n[x]+f[2])/d[2],j!==-1&&S!==-1&&(y[j++]=(n[S]+f[3])/d[3]);return h==="RGBA"?new he("float32",y,[1,4,e,u]):new he("float32",y,[1,3,e,u])},Cn=async(n,r)=>{let e=typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement,u=typeof ImageData<"u"&&n instanceof ImageData,o=typeof ImageBitmap<"u"&&n instanceof ImageBitmap,d=typeof n=="string",f,a=r??{};if(e){let h=document.createElement("canvas");h.width=n.width,h.height=n.height;let m=h.getContext("2d");if(m!=null){let y=n.height,v=n.width;if(r!==void 0&&r.resizedHeight!==void 0&&r.resizedWidth!==void 0&&(y=r.resizedHeight,v=r.resizedWidth),r!==void 0){if(a=r,r.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");a.tensorFormat="RGBA",a.height=y,a.width=v}else a.tensorFormat="RGBA",a.height=y,a.width=v;m.drawImage(n,0,0),f=m.getImageData(0,0,v,y).data}else throw new Error("Can not access image data")}else if(u){let h,m;if(r!==void 0&&r.resizedWidth!==void 0&&r.resizedHeight!==void 0?(h=r.resizedHeight,m=r.resizedWidth):(h=n.height,m=n.width),r!==void 0&&(a=r),a.format="RGBA",a.height=h,a.width=m,r!==void 0){let y=document.createElement("canvas");y.width=m,y.height=h;let v=y.getContext("2d");if(v!=null)v.putImageData(n,0,0),f=v.getImageData(0,0,m,h).data;else throw new Error("Can not access image data")}else f=n.data}else if(o){if(r===void 0)throw new Error("Please provide image config with format for Imagebitmap");let h=document.createElement("canvas");h.width=n.width,h.height=n.height;let m=h.getContext("2d");if(m!=null){let y=n.height,v=n.width;return m.drawImage(n,0,0,v,y),f=m.getImageData(0,0,v,y).data,a.height=y,a.width=v,hr(f,a)}else throw new Error("Can not access image data")}else{if(d)return new Promise((h,m)=>{let y=document.createElement("canvas"),v=y.getContext("2d");if(!n||!v)return m();let _=new Image;_.crossOrigin="Anonymous",_.src=n,_.onload=()=>{y.width=_.width,y.height=_.height,v.drawImage(_,0,0,y.width,y.height);let E=v.getImageData(0,0,y.width,y.height);a.height=y.height,a.width=y.width,h(hr(E.data,a))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(f!==void 0)return hr(f,a);throw new Error("Input data provided is not supported - aborted tensor creation")},Pn=(n,r)=>{let{width:e,height:u,download:o,dispose:d}=r,f=[1,u,e,4];return new he({location:"texture",type:"float32",texture:n,dims:f,download:o,dispose:d})},xn=(n,r)=>{let{dataType:e,dims:u,download:o,dispose:d}=r;return new he({location:"gpu-buffer",type:e??"float32",gpuBuffer:n,dims:u,download:o,dispose:d})},Dn=(n,r,e)=>new he({location:"cpu-pinned",type:n,data:r,dims:e??[r.length]})});var vt,Lt,kn,Fn,Bn=N(()=>{vt=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Lt=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),kn=!1,Fn=()=>{if(!kn){kn=!0;let n=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",r=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";n&&(vt.set("int64",BigInt64Array),Lt.set(BigInt64Array,"int64")),r&&(vt.set("uint64",BigUint64Array),Lt.set(BigUint64Array,"uint64"))}}});var Ln,Hn,Nn=N(()=>{Bt();Ln=n=>{let r=1;for(let e=0;e<n.length;e++){let u=n[e];if(typeof u!="number"||!Number.isSafeInteger(u))throw new TypeError(`dims[${e}] must be an integer, got: ${u}`);if(u<0)throw new RangeError(`dims[${e}] must be a non-negative integer, got: ${u}`);r*=u}return r},Hn=(n,r)=>{switch(n.location){case"cpu":return new he(n.type,n.data,r);case"cpu-pinned":return new he({location:"cpu-pinned",data:n.data,type:n.type,dims:r});case"texture":return new he({location:"texture",texture:n.texture,type:n.type,dims:r});case"gpu-buffer":return new he({location:"gpu-buffer",gpuBuffer:n.gpuBuffer,type:n.type,dims:r});default:throw new Error(`tensorReshape: tensor location ${n.location} is not supported`)}}});var he,Bt=N(()=>{In();Un();Bn();Nn();he=class{constructor(r,e,u){Fn();let o,d;if(typeof r=="object"&&"location"in r)switch(this.dataLocation=r.location,o=r.type,d=r.dims,r.location){case"cpu-pinned":{let a=vt.get(o);if(!a)throw new TypeError(`unsupported type "${o}" to create tensor from pinned buffer`);if(!(r.data instanceof a))throw new TypeError(`buffer should be of type ${a.name}`);this.cpuData=r.data;break}case"texture":{if(o!=="float32")throw new TypeError(`unsupported type "${o}" to create tensor from texture`);this.gpuTextureData=r.texture,this.downloader=r.download,this.disposer=r.dispose;break}case"gpu-buffer":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="bool")throw new TypeError(`unsupported type "${o}" to create tensor from gpu buffer`);this.gpuBufferData=r.gpuBuffer,this.downloader=r.download,this.disposer=r.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let a,h;if(typeof r=="string")if(o=r,h=u,r==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");a=e}else{let m=vt.get(r);if(m===void 0)throw new TypeError(`Unsupported tensor type: ${r}.`);if(Array.isArray(e)){if(r==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");r==="uint64"||r==="int64"?a=m.from(e,BigInt):a=m.from(e)}else if(e instanceof m)a=e;else throw new TypeError(`A ${o} tensor's data must be type of ${m}`)}else if(h=e,Array.isArray(r)){if(r.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let m=typeof r[0];if(m==="string")o="string",a=r;else if(m==="boolean")o="bool",a=Uint8Array.from(r);else throw new TypeError(`Invalid element type of data array: ${m}.`)}else{let m=Lt.get(r.constructor);if(m===void 0)throw new TypeError(`Unsupported type for tensor data: ${r.constructor}.`);o=m,a=r}if(h===void 0)h=[a.length];else if(!Array.isArray(h))throw new TypeError("A tensor's dims must be a number array");d=h,this.cpuData=a,this.dataLocation="cpu"}let f=Ln(d);if(this.cpuData&&f!==this.cpuData.length)throw new Error(`Tensor's size(${f}) does not match data length(${this.cpuData.length}).`);this.type=o,this.dims=d,this.size=f}static async fromImage(r,e){return Cn(r,e)}static fromTexture(r,e){return Pn(r,e)}static fromGpuBuffer(r,e){return xn(r,e)}static fromPinnedBuffer(r,e,u){return Dn(r,e,u)}toDataURL(r){return Mn(this,r)}toImageData(r){return Rn(this,r)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(r){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,r&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(r){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return Hn(this,r)}}});var fe,Ht=N(()=>{Bt();fe=he});var Nt,zn=N(()=>{Ft();Ht();Nt=class n{constructor(r){this.handler=r}async run(r,e,u){let o={},d={};if(typeof r!="object"||r===null||r instanceof fe||Array.isArray(r))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let f=!0;if(typeof e=="object"){if(e===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(e instanceof fe)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(e)){if(e.length===0)throw new TypeError("'fetches' cannot be an empty array.");f=!1;for(let m of e){if(typeof m!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(m)===-1)throw new RangeError(`'fetches' contains invalid output name: ${m}.`);o[m]=null}if(typeof u=="object"&&u!==null)d=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else{let m=!1,y=Object.getOwnPropertyNames(e);for(let v of this.outputNames)if(y.indexOf(v)!==-1){let _=e[v];(_===null||_ instanceof fe)&&(m=!0,f=!1,o[v]=_)}if(m){if(typeof u=="object"&&u!==null)d=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else d=e}}else if(typeof e<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let m of this.inputNames)if(typeof r[m]>"u")throw new Error(`input '${m}' is missing in 'feeds'.`);if(f)for(let m of this.outputNames)o[m]=null;let a=await this.handler.run(r,o,d),h={};for(let m in a)if(Object.hasOwnProperty.call(a,m)){let y=a[m];y instanceof fe?h[m]=y:h[m]=new fe(y.type,y.data,y.dims)}return h}async release(){return this.handler.dispose()}static async create(r,e,u,o){let d,f={};if(typeof r=="string"){if(d=r,typeof e=="object"&&e!==null)f=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else if(r instanceof Uint8Array){if(d=r,typeof e=="object"&&e!==null)f=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else if(r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer){let v=r,_=0,E=r.byteLength;if(typeof e=="object"&&e!==null)f=e;else if(typeof e=="number"){if(_=e,!Number.isSafeInteger(_))throw new RangeError("'byteOffset' must be an integer.");if(_<0||_>=v.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${v.byteLength}).`);if(E=r.byteLength-_,typeof u=="number"){if(E=u,!Number.isSafeInteger(E))throw new RangeError("'byteLength' must be an integer.");if(E<=0||_+E>v.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${v.byteLength-_}].`);if(typeof o=="object"&&o!==null)f=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof u<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof e<"u")throw new TypeError("'options' must be an object.");d=new Uint8Array(v,_,E)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let h=(f.executionProviders||[]).map(v=>typeof v=="string"?v:v.name),y=await(await kt(h)).createInferenceSessionHandler(d,f);return new n(y)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var Wn,Gn=N(()=>{zn();Wn=Nt});var jn=N(()=>{});var Ka,zt,Yn=N(()=>{Ft();Ht();Ka="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",zt=class n{constructor(r,e,u){this.handler=r,this.hasOptimizerModel=e,this.hasEvalModel=u}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(r,e){let u=r.evalModel||"",o=r.optimizerModel||"",d=e||{},a=(d.executionProviders||[]).map(m=>typeof m=="string"?m:m.name),h=await kt(a);if(h.createTrainingSessionHandler){let m=await h.createTrainingSessionHandler(r.checkpointState,r.trainModel,u,o,d);return new n(m,!!r.optimizerModel,!!r.evalModel)}else throw new Error(Ka)}typeNarrowingForRunStep(r,e,u,o,d){let f={},a={};if(typeof u!="object"||u===null||u instanceof fe||Array.isArray(u))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let h=!0;if(typeof o=="object"){if(o===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(o instanceof fe)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(o)){if(o.length===0)throw new TypeError("'fetches' cannot be an empty array.");h=!1;for(let m of o){if(typeof m!="string")throw new TypeError("'fetches' must be a string array or an object.");if(e.indexOf(m)===-1)throw new RangeError(`'fetches' contains invalid output name: ${m}.`);f[m]=null}if(typeof d=="object"&&d!==null)a=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else{let m=!1,y=Object.getOwnPropertyNames(o);for(let v of e)if(y.indexOf(v)!==-1){let _=o[v];(_===null||_ instanceof fe)&&(m=!0,h=!1,f[v]=_)}if(m){if(typeof d=="object"&&d!==null)a=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else a=o}}else if(typeof o<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let m of r)if(typeof u[m]>"u")throw new Error(`input '${m}' is missing in 'feeds'.`);if(h)for(let m of e)f[m]=null;return[f,a]}convertHandlerReturnTypeToMapOfTensors(r){let e={};for(let u in r)if(Object.hasOwnProperty.call(r,u)){let o=r[u];o instanceof fe?e[u]=o:e[u]=new fe(o.type,o.data,o.dims)}return e}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(r,e,u){let[o,d]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,r,e,u),f=await this.handler.runTrainStep(r,o,d);return this.convertHandlerReturnTypeToMapOfTensors(f)}async runOptimizerStep(r){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(r||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(r,e,u){if(this.hasEvalModel){let[o,d]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,r,e,u),f=await this.handler.runEvalStep(r,o,d);return this.convertHandlerReturnTypeToMapOfTensors(f)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(r=!0){return this.handler.getParametersSize(r)}async loadParametersBuffer(r,e=!0){let u=await this.getParametersSize(e);if(r.length!==4*u)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(r,e)}async getContiguousParameters(r=!0){return this.handler.getContiguousParameters(r)}async release(){return this.handler.dispose()}}});var $n,Vn=N(()=>{Yn();$n=zt});var gr={};it(gr,{InferenceSession:()=>Wn,Tensor:()=>fe,TrainingSession:()=>$n,env:()=>$,registerBackend:()=>st});var We=N(()=>{vn();An();Gn();Ht();jn();Vn()});var yr={};it(yr,{readFile:()=>eo});var eo,br=N(()=>{eo=void 0});var wr={};it(wr,{join:()=>to});var to,Or=N(()=>{to=void 0});var Qn=ot((Jn,vr)=>{"use strict";var Xn=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(r={}){var e=r,u,o;e.ready=new Promise((i,c)=>{u=i,o=c});var d=Object.assign({},e),f="./this.program",a=typeof window=="object",h=typeof importScripts=="function",m=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",y="",v,_,E;if(m){var x=(br(),qe(yr)),S=(Or(),qe(wr));y=h?S.dirname(y)+"/":__dirname+"/",v=(i,c)=>(i=i.startsWith("file://")?new URL(i):S.normalize(i),x.readFileSync(i,c?void 0:"utf8")),E=i=>(i=v(i,!0),i.buffer||(i=new Uint8Array(i)),i),_=(i,c,p,b=!0)=>{i=i.startsWith("file://")?new URL(i):S.normalize(i),x.readFile(i,b?void 0:"utf8",(R,P)=>{R?p(R):c(b?P.buffer:P)})},!e.thisProgram&&1<process.argv.length&&(f=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),e.inspect=()=>"[Emscripten Module object]"}else(a||h)&&(h?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),n&&(y=n),y.indexOf("blob:")!==0?y=y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):y="",v=i=>{var c=new XMLHttpRequest;return c.open("GET",i,!1),c.send(null),c.responseText},h&&(E=i=>{var c=new XMLHttpRequest;return c.open("GET",i,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}),_=(i,c,p)=>{var b=new XMLHttpRequest;b.open("GET",i,!0),b.responseType="arraybuffer",b.onload=()=>{b.status==200||b.status==0&&b.response?c(b.response):p()},b.onerror=p,b.send(null)});var A=e.print||console.log.bind(console),k=e.printErr||console.error.bind(console);Object.assign(e,d),d=null,e.thisProgram&&(f=e.thisProgram);var G;e.wasmBinary&&(G=e.wasmBinary);var j=e.noExitRuntime||!0;typeof WebAssembly!="object"&&X("no native wasm support detected");var z,I,ge=!1,Oe,te,U,re;function ie(){var i=z.buffer;e.HEAP8=Oe=new Int8Array(i),e.HEAP16=new Int16Array(i),e.HEAP32=U=new Int32Array(i),e.HEAPU8=te=new Uint8Array(i),e.HEAPU16=new Uint16Array(i),e.HEAPU32=re=new Uint32Array(i),e.HEAPF32=new Float32Array(i),e.HEAPF64=new Float64Array(i)}var Ee=[],Ae=[],B=[];function D(){var i=e.preRun.shift();Ee.unshift(i)}var ve=0,ce=null,se=null;function X(i){throw e.onAbort&&e.onAbort(i),i="Aborted("+i+")",k(i),ge=!0,i=new WebAssembly.RuntimeError(i+". Build with -sASSERTIONS for more info."),o(i),i}function pe(i){return i.startsWith("data:application/octet-stream;base64,")}var Re;if(Re="ort-training-wasm-simd.wasm",!pe(Re)){var Ie=Re;Re=e.locateFile?e.locateFile(Ie,y):y+Ie}function He(i){if(i==Re&&G)return new Uint8Array(G);if(E)return E(i);throw"both async and sync fetching of the wasm failed"}function Te(i){if(!G&&(a||h)){if(typeof fetch=="function"&&!i.startsWith("file://"))return fetch(i,{credentials:"same-origin"}).then(c=>{if(!c.ok)throw"failed to load wasm binary file at '"+i+"'";return c.arrayBuffer()}).catch(()=>He(i));if(_)return new Promise((c,p)=>{_(i,b=>c(new Uint8Array(b)),p)})}return Promise.resolve().then(()=>He(i))}function ke(i,c,p){return Te(i).then(b=>WebAssembly.instantiate(b,c)).then(b=>b).then(p,b=>{k("failed to asynchronously prepare wasm: "+b),X(b)})}function Ce(i,c){var p=Re;return G||typeof WebAssembly.instantiateStreaming!="function"||pe(p)||p.startsWith("file://")||m||typeof fetch!="function"?ke(p,i,c):fetch(p,{credentials:"same-origin"}).then(b=>WebAssembly.instantiateStreaming(b,i).then(c,function(R){return k("wasm streaming compile failed: "+R),k("falling back to ArrayBuffer instantiation"),ke(p,i,c)}))}var de,Pe=i=>{for(;0<i.length;)i.shift()(e)};function ae(i){this.Ja=i-24,this.Na=function(c){re[this.Ja+4>>2>>>0]=c},this.Ma=function(c){re[this.Ja+8>>2>>>0]=c},this.Ka=function(c,p){this.La(),this.Na(c),this.Ma(p)},this.La=function(){re[this.Ja+16>>2>>>0]=0}}var ne=0,xe=0,_e=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ne=(i,c,p)=>{c>>>=0;var b=c+p;for(p=c;i[p]&&!(p>=b);)++p;if(16<p-c&&i.buffer&&_e)return _e.decode(i.subarray(c,p));for(b="";c<p;){var R=i[c++];if(R&128){var P=i[c++]&63;if((R&224)==192)b+=String.fromCharCode((R&31)<<6|P);else{var L=i[c++]&63;R=(R&240)==224?(R&15)<<12|P<<6|L:(R&7)<<18|P<<12|L<<6|i[c++]&63,65536>R?b+=String.fromCharCode(R):(R-=65536,b+=String.fromCharCode(55296|R>>10,56320|R&1023))}}else b+=String.fromCharCode(R)}return b},Fe=(i,c)=>(i>>>=0)?Ne(te,i,c):"",Ze=i=>{for(var c=0,p=0;p<i.length;++p){var b=i.charCodeAt(p);127>=b?c++:2047>=b?c+=2:55296<=b&&57343>=b?(c+=4,++p):c+=3}return c},Ke=(i,c,p,b)=>{if(p>>>=0,!(0<b))return 0;var R=p;b=p+b-1;for(var P=0;P<i.length;++P){var L=i.charCodeAt(P);if(55296<=L&&57343>=L){var K=i.charCodeAt(++P);L=65536+((L&1023)<<10)|K&1023}if(127>=L){if(p>=b)break;c[p++>>>0]=L}else{if(2047>=L){if(p+1>=b)break;c[p++>>>0]=192|L>>6}else{if(65535>=L){if(p+2>=b)break;c[p++>>>0]=224|L>>12}else{if(p+3>=b)break;c[p++>>>0]=240|L>>18,c[p++>>>0]=128|L>>12&63}c[p++>>>0]=128|L>>6&63}c[p++>>>0]=128|L&63}}return c[p>>>0]=0,p-R},Se=i=>i%4===0&&(i%100!==0||i%400===0),ft=[0,31,60,91,121,152,182,213,244,274,305,335],Be=[0,31,59,90,120,151,181,212,243,273,304,334],ct=i=>{var c=Ze(i)+1,p=gt(c);return p&&Ke(i,te,p,c),p},dt={},pt=()=>{if(!mt){var i={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:f||"./this.program"},c;for(c in dt)dt[c]===void 0?delete i[c]:i[c]=dt[c];var p=[];for(c in i)p.push(`${c}=${i[c]}`);mt=p}return mt},mt,ze=[null,[],[]],je=[31,29,31,30,31,30,31,31,30,31,30,31],et=[31,28,31,30,31,30,31,31,30,31,30,31];function Rt(i){var c=Array(Ze(i)+1);return Ke(i,c,0,c.length),c}function ht(i,c,p,b){function R(w,W,V){for(w=typeof w=="number"?w.toString():w||"";w.length<W;)w=V[0]+w;return w}function P(w,W){return R(w,W,"0")}function L(w,W){function V(Ot){return 0>Ot?-1:0<Ot?1:0}var De;return(De=V(w.getFullYear()-W.getFullYear()))===0&&(De=V(w.getMonth()-W.getMonth()))===0&&(De=V(w.getDate()-W.getDate())),De}function K(w){switch(w.getDay()){case 0:return new Date(w.getFullYear()-1,11,29);case 1:return w;case 2:return new Date(w.getFullYear(),0,3);case 3:return new Date(w.getFullYear(),0,2);case 4:return new Date(w.getFullYear(),0,1);case 5:return new Date(w.getFullYear()-1,11,31);case 6:return new Date(w.getFullYear()-1,11,30)}}function me(w){var W=w.Ea;for(w=new Date(new Date(w.Fa+1900,0,1).getTime());0<W;){var V=w.getMonth(),De=(Se(w.getFullYear())?je:et)[V];if(W>De-w.getDate())W-=De-w.getDate()+1,w.setDate(1),11>V?w.setMonth(V+1):(w.setMonth(0),w.setFullYear(w.getFullYear()+1));else{w.setDate(w.getDate()+W);break}}return V=new Date(w.getFullYear()+1,0,4),W=K(new Date(w.getFullYear(),0,4)),V=K(V),0>=L(W,w)?0>=L(V,w)?w.getFullYear()+1:w.getFullYear():w.getFullYear()-1}i>>>=0,c>>>=0,p>>>=0,b>>>=0;var ue=U[b+40>>2>>>0];b={Qa:U[b>>2>>>0],Pa:U[b+4>>2>>>0],Ga:U[b+8>>2>>>0],Ia:U[b+12>>2>>>0],Ha:U[b+16>>2>>>0],Fa:U[b+20>>2>>>0],za:U[b+24>>2>>>0],Ea:U[b+28>>2>>>0],Sa:U[b+32>>2>>>0],Oa:U[b+36>>2>>>0],Ra:ue?Fe(ue):""},p=Fe(p),ue={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var le in ue)p=p.replace(new RegExp(le,"g"),ue[le]);var bt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),wt="January February March April May June July August September October November December".split(" ");ue={"%a":w=>bt[w.za].substring(0,3),"%A":w=>bt[w.za],"%b":w=>wt[w.Ha].substring(0,3),"%B":w=>wt[w.Ha],"%C":w=>P((w.Fa+1900)/100|0,2),"%d":w=>P(w.Ia,2),"%e":w=>R(w.Ia,2," "),"%g":w=>me(w).toString().substring(2),"%G":w=>me(w),"%H":w=>P(w.Ga,2),"%I":w=>(w=w.Ga,w==0?w=12:12<w&&(w-=12),P(w,2)),"%j":w=>{for(var W=0,V=0;V<=w.Ha-1;W+=(Se(w.Fa+1900)?je:et)[V++]);return P(w.Ia+W,3)},"%m":w=>P(w.Ha+1,2),"%M":w=>P(w.Pa,2),"%n":()=>`
`,"%p":w=>0<=w.Ga&&12>w.Ga?"AM":"PM","%S":w=>P(w.Qa,2),"%t":()=>"	","%u":w=>w.za||7,"%U":w=>P(Math.floor((w.Ea+7-w.za)/7),2),"%V":w=>{var W=Math.floor((w.Ea+7-(w.za+6)%7)/7);if(2>=(w.za+371-w.Ea-2)%7&&W++,W)W==53&&(V=(w.za+371-w.Ea)%7,V==4||V==3&&Se(w.Fa)||(W=1));else{W=52;var V=(w.za+7-w.Ea-1)%7;(V==4||V==5&&Se(w.Fa%400-1))&&W++}return P(W,2)},"%w":w=>w.za,"%W":w=>P(Math.floor((w.Ea+7-(w.za+6)%7)/7),2),"%y":w=>(w.Fa+1900).toString().substring(2),"%Y":w=>w.Fa+1900,"%z":w=>{w=w.Oa;var W=0<=w;return w=Math.abs(w)/60,(W?"+":"-")+("0000"+(w/60*100+w%60)).slice(-4)},"%Z":w=>w.Ra,"%%":()=>"%"},p=p.replace(/%%/g,"\0\0");for(le in ue)p.includes(le)&&(p=p.replace(new RegExp(le,"g"),ue[le](b)));return p=p.replace(/\0\0/g,"%"),le=Rt(p),le.length>c?0:(Oe.set(le,i>>>0),le.length-1)}var It={a:function(i,c,p){throw i>>>=0,new ae(i).Ka(c>>>0,p>>>0),ne=i,xe++,ne},e:function(){return 0},H:function(){},x:function(){},z:function(){},k:function(){return 0},F:function(){},B:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},l:()=>!0,o:function(i,c,p){i=c+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*c:NaN,p>>>=0,i=new Date(1e3*i),U[p>>2>>>0]=i.getUTCSeconds(),U[p+4>>2>>>0]=i.getUTCMinutes(),U[p+8>>2>>>0]=i.getUTCHours(),U[p+12>>2>>>0]=i.getUTCDate(),U[p+16>>2>>>0]=i.getUTCMonth(),U[p+20>>2>>>0]=i.getUTCFullYear()-1900,U[p+24>>2>>>0]=i.getUTCDay(),U[p+28>>2>>>0]=(i.getTime()-Date.UTC(i.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},p:function(i,c,p){i=c+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*c:NaN,p>>>=0,i=new Date(1e3*i),U[p>>2>>>0]=i.getSeconds(),U[p+4>>2>>>0]=i.getMinutes(),U[p+8>>2>>>0]=i.getHours(),U[p+12>>2>>>0]=i.getDate(),U[p+16>>2>>>0]=i.getMonth(),U[p+20>>2>>>0]=i.getFullYear()-1900,U[p+24>>2>>>0]=i.getDay(),U[p+28>>2>>>0]=(Se(i.getFullYear())?ft:Be)[i.getMonth()]+i.getDate()-1|0,U[p+36>>2>>>0]=-(60*i.getTimezoneOffset()),c=new Date(i.getFullYear(),6,1).getTimezoneOffset();var b=new Date(i.getFullYear(),0,1).getTimezoneOffset();U[p+32>>2>>>0]=(c!=b&&i.getTimezoneOffset()==Math.min(b,c))|0},q:function(i){i>>>=0;var c=new Date(U[i+20>>2>>>0]+1900,U[i+16>>2>>>0],U[i+12>>2>>>0],U[i+8>>2>>>0],U[i+4>>2>>>0],U[i>>2>>>0],0),p=U[i+32>>2>>>0],b=c.getTimezoneOffset(),R=new Date(c.getFullYear(),6,1).getTimezoneOffset(),P=new Date(c.getFullYear(),0,1).getTimezoneOffset(),L=Math.min(P,R);return 0>p?U[i+32>>2>>>0]=+(R!=P&&L==b):0<p!=(L==b)&&(R=Math.max(P,R),c.setTime(c.getTime()+6e4*((0<p?L:R)-b))),U[i+24>>2>>>0]=c.getDay(),U[i+28>>2>>>0]=(Se(c.getFullYear())?ft:Be)[c.getMonth()]+c.getDate()-1|0,U[i>>2>>>0]=c.getSeconds(),U[i+4>>2>>>0]=c.getMinutes(),U[i+8>>2>>>0]=c.getHours(),U[i+12>>2>>>0]=c.getDate(),U[i+16>>2>>>0]=c.getMonth(),U[i+20>>2>>>0]=c.getYear(),i=c.getTime()/1e3,tt((de=i,1<=+Math.abs(de)?0<de?+Math.floor(de/4294967296)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)),i>>>0},m:function(){return-52},n:function(){},t:function(i,c,p){function b(me){return(me=me.toTimeString().match(/\(([A-Za-z ]+)\)$/))?me[1]:"GMT"}p>>>=0;var R=new Date().getFullYear(),P=new Date(R,0,1),L=new Date(R,6,1);R=P.getTimezoneOffset();var K=L.getTimezoneOffset();re[i>>>0>>2>>>0]=60*Math.max(R,K),U[c>>>0>>2>>>0]=+(R!=K),i=b(P),c=b(L),i=ct(i),c=ct(c),K<R?(re[p>>2>>>0]=i,re[p+4>>2>>>0]=c):(re[p>>2>>>0]=c,re[p+4>>2>>>0]=i)},d:()=>{X("")},h:function(){return Date.now()},u:function(){return 4294901760},b:()=>performance.now(),I:function(i,c,p){return c>>>=0,te.copyWithin(i>>>0>>>0,c>>>0,c+(p>>>0)>>>0)},s:function(i){i>>>=0;var c=te.length;if(4294901760<i)return!1;for(var p=1;4>=p;p*=2){var b=c*(1+.2/p);b=Math.min(b,i+100663296);var R=Math;b=Math.max(i,b);e:{R=R.min.call(R,4294901760,b+(65536-b%65536)%65536)-z.buffer.byteLength+65535>>>16;try{z.grow(R),ie();var P=1;break e}catch{}P=void 0}if(P)return!0}return!1},C:function(i,c){i>>>=0,c>>>=0;var p=0;return pt().forEach(function(b,R){var P=c+p;for(R=re[i+4*R>>2>>>0]=P,P=0;P<b.length;++P)Oe[R++>>0>>>0]=b.charCodeAt(P);Oe[R>>0>>>0]=0,p+=b.length+1}),0},D:function(i,c){i>>>=0,c>>>=0;var p=pt();re[i>>2>>>0]=p.length;var b=0;return p.forEach(function(R){b+=R.length+1}),re[c>>2>>>0]=b,0},f:()=>52,j:function(){return 52},r:function(){return 70},i:function(i,c,p,b){c>>>=0,p>>>=0,b>>>=0;for(var R=0,P=0;P<p;P++){var L=re[c>>2>>>0],K=re[c+4>>2>>>0];c+=8;for(var me=0;me<K;me++){var ue=te[L+me>>>0],le=ze[i];ue===0||ue===10?((i===1?A:k)(Ne(le,0)),le.length=0):le.push(ue)}R+=K}return re[b>>2>>>0]=R,0},A:ht,c:function(i,c,p,b){return ht(i>>>0,c>>>0,p>>>0,b>>>0)}};(function(){function i(p){if(p=p.exports,I=p=nt(p),z=I.J,ie(),Ae.unshift(I.K),ve--,e.monitorRunDependencies&&e.monitorRunDependencies(ve),ve==0&&(ce!==null&&(clearInterval(ce),ce=null),se)){var b=se;se=null,b()}return p}var c={a:It};if(ve++,e.monitorRunDependencies&&e.monitorRunDependencies(ve),e.instantiateWasm)try{return e.instantiateWasm(c,i)}catch(p){k("Module.instantiateWasm callback failed with error: "+p),o(p)}return Ce(c,function(p){i(p.instance)}).catch(o),{}})(),e._OrtInit=(i,c)=>(e._OrtInit=I.L)(i,c),e._OrtGetLastError=(i,c)=>(e._OrtGetLastError=I.M)(i,c),e._OrtCreateSessionOptions=(i,c,p,b,R,P,L,K,me,ue)=>(e._OrtCreateSessionOptions=I.N)(i,c,p,b,R,P,L,K,me,ue),e._OrtAppendExecutionProvider=(i,c)=>(e._OrtAppendExecutionProvider=I.O)(i,c),e._OrtAddFreeDimensionOverride=(i,c,p)=>(e._OrtAddFreeDimensionOverride=I.P)(i,c,p),e._OrtAddSessionConfigEntry=(i,c,p)=>(e._OrtAddSessionConfigEntry=I.Q)(i,c,p),e._OrtReleaseSessionOptions=i=>(e._OrtReleaseSessionOptions=I.R)(i),e._OrtCreateSession=(i,c,p)=>(e._OrtCreateSession=I.S)(i,c,p),e._OrtReleaseSession=i=>(e._OrtReleaseSession=I.T)(i),e._OrtGetInputOutputCount=(i,c,p)=>(e._OrtGetInputOutputCount=I.U)(i,c,p),e._OrtGetInputName=(i,c)=>(e._OrtGetInputName=I.V)(i,c),e._OrtGetOutputName=(i,c)=>(e._OrtGetOutputName=I.W)(i,c),e._OrtFree=i=>(e._OrtFree=I.X)(i),e._OrtCreateTensor=(i,c,p,b,R,P)=>(e._OrtCreateTensor=I.Y)(i,c,p,b,R,P),e._OrtGetTensorData=(i,c,p,b,R)=>(e._OrtGetTensorData=I.Z)(i,c,p,b,R),e._OrtReleaseTensor=i=>(e._OrtReleaseTensor=I._)(i),e._OrtCreateRunOptions=(i,c,p,b)=>(e._OrtCreateRunOptions=I.$)(i,c,p,b),e._OrtAddRunConfigEntry=(i,c,p)=>(e._OrtAddRunConfigEntry=I.aa)(i,c,p),e._OrtReleaseRunOptions=i=>(e._OrtReleaseRunOptions=I.ba)(i),e._OrtCreateBinding=i=>(e._OrtCreateBinding=I.ca)(i),e._OrtBindInput=(i,c,p)=>(e._OrtBindInput=I.da)(i,c,p),e._OrtBindOutput=(i,c,p,b)=>(e._OrtBindOutput=I.ea)(i,c,p,b),e._OrtClearBoundOutputs=i=>(e._OrtClearBoundOutputs=I.fa)(i),e._OrtReleaseBinding=i=>(e._OrtReleaseBinding=I.ga)(i),e._OrtRunWithBinding=(i,c,p,b,R)=>(e._OrtRunWithBinding=I.ha)(i,c,p,b,R),e._OrtRun=(i,c,p,b,R,P,L,K)=>(e._OrtRun=I.ia)(i,c,p,b,R,P,L,K),e._OrtEndProfiling=i=>(e._OrtEndProfiling=I.ja)(i),e._OrtTrainingLoadCheckpoint=(i,c)=>(e._OrtTrainingLoadCheckpoint=I.ka)(i,c),e._OrtTrainingReleaseCheckpoint=i=>(e._OrtTrainingReleaseCheckpoint=I.la)(i),e._OrtTrainingCreateSession=(i,c,p,b,R,P,L,K)=>(e._OrtTrainingCreateSession=I.ma)(i,c,p,b,R,P,L,K),e._OrtTrainingLazyResetGrad=i=>(e._OrtTrainingLazyResetGrad=I.na)(i),e._OrtTrainingRunTrainStep=(i,c,p,b,R,P)=>(e._OrtTrainingRunTrainStep=I.oa)(i,c,p,b,R,P),e._OrtTrainingOptimizerStep=(i,c)=>(e._OrtTrainingOptimizerStep=I.pa)(i,c),e._OrtTrainingEvalStep=(i,c,p,b,R,P)=>(e._OrtTrainingEvalStep=I.qa)(i,c,p,b,R,P),e._OrtTrainingGetParametersSize=(i,c,p)=>(e._OrtTrainingGetParametersSize=I.ra)(i,c,p),e._OrtTrainingCopyParametersToBuffer=(i,c,p,b)=>(e._OrtTrainingCopyParametersToBuffer=I.sa)(i,c,p,b),e._OrtTrainingCopyParametersFromBuffer=(i,c,p,b)=>(e._OrtTrainingCopyParametersFromBuffer=I.ta)(i,c,p,b),e._OrtTrainingGetModelInputOutputCount=(i,c,p,b)=>(e._OrtTrainingGetModelInputOutputCount=I.ua)(i,c,p,b),e._OrtTrainingGetModelInputOutputName=(i,c,p,b)=>(e._OrtTrainingGetModelInputOutputName=I.va)(i,c,p,b),e._OrtTrainingReleaseSession=i=>(e._OrtTrainingReleaseSession=I.wa)(i);var gt=e._malloc=i=>(gt=e._malloc=I.xa)(i);e._free=i=>(e._free=I.ya)(i);var tt=i=>(tt=I.Aa)(i),yt=()=>(yt=I.Ba)(),rt=i=>(rt=I.Ca)(i),F=i=>(F=I.Da)(i);function nt(i){i=Object.assign({},i);var c=b=>()=>b()>>>0,p=b=>R=>b(R)>>>0;return i.__errno_location=c(i.__errno_location),i.malloc=p(i.malloc),i.stackSave=c(i.stackSave),i.stackAlloc=p(i.stackAlloc),i}e.stackAlloc=F,e.stackSave=yt,e.stackRestore=rt,e.UTF8ToString=Fe,e.stringToUTF8=(i,c,p)=>Ke(i,te,c,p),e.lengthBytesUTF8=Ze;var Ye;se=function i(){Ye||$e(),Ye||(se=i)};function $e(){function i(){if(!Ye&&(Ye=!0,e.calledRun=!0,!ge)){if(Pe(Ae),u(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;){var c=e.postRun.shift();B.unshift(c)}Pe(B)}}if(!(0<ve)){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)D();Pe(Ee),0<ve||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),i()},1)):i())}}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return $e(),r.ready}})();typeof Jn=="object"&&typeof vr=="object"?vr.exports=Xn:typeof define=="function"&&define.amd&&define([],()=>Xn)});var Zn=ot(()=>{});var Kn=ot(()=>{});var ea={};it(ea,{cpus:()=>ro});var ro,ta=N(()=>{ro=void 0});var aa=ot((na,_r)=>{"use strict";var ra=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(r={}){function e(){return B.buffer!=X.buffer&&Te(),X}function u(){return B.buffer!=X.buffer&&Te(),pe}function o(){return B.buffer!=X.buffer&&Te(),Re}function d(){return B.buffer!=X.buffer&&Te(),Ie}function f(){return B.buffer!=X.buffer&&Te(),He}var a=r,h,m;a.ready=new Promise((t,s)=>{h=t,m=s});var y=Object.assign({},a),v="./this.program",_=(t,s)=>{throw s},E=typeof window=="object",x=typeof importScripts=="function",S=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A=a.ENVIRONMENT_IS_PTHREAD||!1,k="";function G(t){return a.locateFile?a.locateFile(t,k):k+t}var j,z,I;if(S){var ge=(br(),qe(yr)),Oe=(Or(),qe(wr));k=x?Oe.dirname(k)+"/":__dirname+"/",j=(s,l)=>(s=s.startsWith("file://")?new URL(s):Oe.normalize(s),ge.readFileSync(s,l?void 0:"utf8")),I=s=>(s=j(s,!0),s.buffer||(s=new Uint8Array(s)),s),z=(s,l,g,M=!0)=>{s=s.startsWith("file://")?new URL(s):Oe.normalize(s),ge.readFile(s,M?void 0:"utf8",(T,C)=>{T?g(T):l(M?C.buffer:C)})},!a.thisProgram&&1<process.argv.length&&(v=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),_=(s,l)=>{throw process.exitCode=s,l},a.inspect=()=>"[Emscripten Module object]";let t;try{t=Zn()}catch(s){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),s}global.Worker=t.Worker}else(E||x)&&(x?k=self.location.href:typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),typeof n<"u"&&n&&(k=n),k.indexOf("blob:")!==0?k=k.substr(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1):k="",S||(j=t=>{var s=new XMLHttpRequest;return s.open("GET",t,!1),s.send(null),s.responseText},x&&(I=t=>{var s=new XMLHttpRequest;return s.open("GET",t,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),z=(t,s,l)=>{var g=new XMLHttpRequest;g.open("GET",t,!0),g.responseType="arraybuffer",g.onload=()=>{g.status==200||g.status==0&&g.response?s(g.response):l()},g.onerror=l,g.send(null)}));S&&typeof performance>"u"&&(global.performance=Kn().performance);var te=console.log.bind(console),U=console.error.bind(console);S&&(te=(...t)=>ge.writeSync(1,t.join(" ")+`
`),U=(...t)=>ge.writeSync(2,t.join(" ")+`
`));var re=a.print||te,ie=a.printErr||U;Object.assign(a,y),y=null,a.thisProgram&&(v=a.thisProgram),a.quit&&(_=a.quit);var Ee;a.wasmBinary&&(Ee=a.wasmBinary);var Ae=a.noExitRuntime||!0;typeof WebAssembly!="object"&&Se("no native wasm support detected");var B,D,ve,ce=!1,se,X,pe,Re,Ie,He;function Te(){var t=B.buffer;a.HEAP8=X=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAP32=Re=new Int32Array(t),a.HEAPU8=pe=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAPU32=Ie=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=He=new Float64Array(t)}var ke=a.INITIAL_MEMORY||16777216;if(5242880<=ke||Se("INITIAL_MEMORY should be larger than STACK_SIZE, was "+ke+"! (STACK_SIZE=5242880)"),A)B=a.wasmMemory;else if(a.wasmMemory)B=a.wasmMemory;else if(B=new WebAssembly.Memory({initial:ke/65536,maximum:65536,shared:!0}),!(B.buffer instanceof SharedArrayBuffer))throw ie("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),S&&ie("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Te(),ke=B.buffer.byteLength;var Ce,de=[],Pe=[],ae=[],ne=0;function xe(){return Ae||0<ne}var _e=0,Ne=null,Fe=null;function Ze(){_e++,a.monitorRunDependencies&&a.monitorRunDependencies(_e)}function Ke(){if(_e--,a.monitorRunDependencies&&a.monitorRunDependencies(_e),_e==0&&(Ne!==null&&(clearInterval(Ne),Ne=null),Fe)){var t=Fe;Fe=null,t()}}function Se(t){throw a.onAbort&&a.onAbort(t),t="Aborted("+t+")",ie(t),ce=!0,se=1,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),m(t),t}function ft(t){return t.startsWith("data:application/octet-stream;base64,")}var Be;Be="ort-wasm-threaded.wasm",ft(Be)||(Be=G(Be));function ct(t){if(t==Be&&Ee)return new Uint8Array(Ee);if(I)return I(t);throw"both async and sync fetching of the wasm failed"}function dt(t){if(!Ee&&(E||x)){if(typeof fetch=="function"&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then(s=>{if(!s.ok)throw"failed to load wasm binary file at '"+t+"'";return s.arrayBuffer()}).catch(()=>ct(t));if(z)return new Promise((s,l)=>{z(t,g=>s(new Uint8Array(g)),l)})}return Promise.resolve().then(()=>ct(t))}function pt(t,s,l){return dt(t).then(g=>WebAssembly.instantiate(g,s)).then(g=>g).then(l,g=>{ie("failed to asynchronously prepare wasm: "+g),Se(g)})}function mt(t,s){var l=Be;return Ee||typeof WebAssembly.instantiateStreaming!="function"||ft(l)||l.startsWith("file://")||S||typeof fetch!="function"?pt(l,t,s):fetch(l,{credentials:"same-origin"}).then(g=>WebAssembly.instantiateStreaming(g,t).then(s,function(M){return ie("wasm streaming compile failed: "+M),ie("falling back to ArrayBuffer instantiation"),pt(l,t,s)}))}var ze;function je(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}function et(t){t.terminate(),t.onmessage=()=>{}}function Rt(t){(t=F.La[t])||Se(),F.lb(t)}function ht(t){var s=F.fb();if(!s)return 6;F.Oa.push(s),F.La[t.Na]=s,s.Na=t.Na;var l={cmd:"run",start_routine:t.mb,arg:t.eb,pthread_ptr:t.Na};return S&&s.unref(),s.postMessage(l,t.sb),0}var It=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,gt=(t,s,l)=>{s>>>=0;var g=s+l;for(l=s;t[l]&&!(l>=g);)++l;if(16<l-s&&t.buffer&&It)return It.decode(t.buffer instanceof SharedArrayBuffer?t.slice(s,l):t.subarray(s,l));for(g="";s<l;){var M=t[s++];if(M&128){var T=t[s++]&63;if((M&224)==192)g+=String.fromCharCode((M&31)<<6|T);else{var C=t[s++]&63;M=(M&240)==224?(M&15)<<12|T<<6|C:(M&7)<<18|T<<12|C<<6|t[s++]&63,65536>M?g+=String.fromCharCode(M):(M-=65536,g+=String.fromCharCode(55296|M>>10,56320|M&1023))}}else g+=String.fromCharCode(M)}return g},tt=(t,s)=>(t>>>=0)?gt(u(),t,s):"";function yt(t){if(A)return J(1,1,t);se=t,xe()||(F.nb(),a.onExit&&a.onExit(t),ce=!0),_(t,new je(t))}var rt=t=>{if(se=t,A)throw Ye(t),"unwind";yt(t)},F={Ra:[],Oa:[],Za:[],La:{},Va:function(){A?F.hb():F.gb()},gb:function(){de.unshift(()=>{Ze(),F.ib(()=>Ke())})},hb:function(){F.receiveObjectTransfer=F.kb,F.threadInitTLS=F.Ya,F.setExitStatus=F.Xa,Ae=!1},Xa:function(t){se=t},xb:["$terminateWorker"],nb:function(){for(var t of F.Oa)et(t);for(t of F.Ra)et(t);F.Ra=[],F.Oa=[],F.La=[]},lb:function(t){var s=t.Na;delete F.La[s],F.Ra.push(t),F.Oa.splice(F.Oa.indexOf(t),1),t.Na=0,lr(s)},kb:function(){},Ya:function(){F.Za.forEach(t=>t())},jb:t=>new Promise(s=>{t.onmessage=T=>{T=T.data;var C=T.cmd;if(T.targetThread&&T.targetThread!=Pt()){var Q=F.La[T.wb];Q?Q.postMessage(T,T.transferList):ie('Internal error! Worker sent a message "'+C+'" to target pthread '+T.targetThread+", but that thread no longer exists!")}else C==="checkMailbox"?Ct():C==="spawnThread"?ht(T):C==="cleanupThread"?Rt(T.thread):C==="killThread"?(T=T.thread,C=F.La[T],delete F.La[T],et(C),lr(T),F.Oa.splice(F.Oa.indexOf(C),1),C.Na=0):C==="cancelThread"?F.La[T.thread].postMessage({cmd:"cancel"}):C==="loaded"?(t.loaded=!0,s(t)):C==="alert"?alert("Thread "+T.threadId+": "+T.text):T.target==="setimmediate"?t.postMessage(T):C==="callHandler"?a[T.handler](...T.args):C&&ie("worker sent an unknown command "+C)},t.onerror=T=>{throw ie("worker sent an error! "+T.filename+":"+T.lineno+": "+T.message),T},S&&(t.on("message",function(T){t.onmessage({data:T})}),t.on("error",function(T){t.onerror(T)}));var l=[],g=["onExit","onAbort","print","printErr"],M;for(M of g)a.hasOwnProperty(M)&&l.push(M);t.postMessage({cmd:"load",handlers:l,urlOrBlob:a.mainScriptUrlOrBlob||n,wasmMemory:B,wasmModule:ve})}),ib:function(t){t()},cb:function(){var t=G("ort-wasm-threaded.worker.js");t=new Worker(t),F.Ra.push(t)},fb:function(){return F.Ra.length==0&&(F.cb(),F.jb(F.Ra[0])),F.Ra.pop()}};a.PThread=F;var nt=t=>{for(;0<t.length;)t.shift()(a)};a.establishStackSpace=function(){var t=Pt(),s=o()[t+52>>2>>>0];t=o()[t+56>>2>>>0],gn(s,s-t),xt(s)};function Ye(t){if(A)return J(2,0,t);rt(t)}var $e=[];a.invokeEntryPoint=function(t,s){var l=$e[t];l||(t>=$e.length&&($e.length=t+1),$e[t]=l=Ce.get(t)),t=l(s),xe()?F.Xa(t):fr(t)};function i(t){this.Ua=t-24,this.bb=function(s){d()[this.Ua+4>>2>>>0]=s},this.ab=function(s){d()[this.Ua+8>>2>>>0]=s},this.Va=function(s,l){this.$a(),this.bb(s),this.ab(l)},this.$a=function(){d()[this.Ua+16>>2>>>0]=0}}var c=0,p=0;function b(t,s,l,g){return A?J(3,1,t,s,l,g):R(t,s,l,g)}function R(t,s,l,g){if(t>>>=0,s>>>=0,l>>>=0,g>>>=0,typeof SharedArrayBuffer>"u")return ie("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var M=[];return A&&M.length===0?b(t,s,l,g):(t={mb:l,Na:t,eb:g,sb:M},A?(t.ub="spawnThread",postMessage(t,M),0):ht(t))}function P(t,s,l){return A?J(4,1,t,s,l):0}function L(t,s){if(A)return J(5,1,t,s)}var K=t=>{for(var s=0,l=0;l<t.length;++l){var g=t.charCodeAt(l);127>=g?s++:2047>=g?s+=2:55296<=g&&57343>=g?(s+=4,++l):s+=3}return s},me=(t,s,l,g)=>{if(l>>>=0,!(0<g))return 0;var M=l;g=l+g-1;for(var T=0;T<t.length;++T){var C=t.charCodeAt(T);if(55296<=C&&57343>=C){var Q=t.charCodeAt(++T);C=65536+((C&1023)<<10)|Q&1023}if(127>=C){if(l>=g)break;s[l++>>>0]=C}else{if(2047>=C){if(l+1>=g)break;s[l++>>>0]=192|C>>6}else{if(65535>=C){if(l+2>=g)break;s[l++>>>0]=224|C>>12}else{if(l+3>=g)break;s[l++>>>0]=240|C>>18,s[l++>>>0]=128|C>>12&63}s[l++>>>0]=128|C>>6&63}s[l++>>>0]=128|C&63}}return s[l>>>0]=0,l-M},ue=(t,s,l)=>me(t,u(),s,l);function le(t,s){if(A)return J(6,1,t,s)}function bt(t,s,l){if(A)return J(7,1,t,s,l)}function wt(t,s,l){return A?J(8,1,t,s,l):0}function w(t,s){if(A)return J(9,1,t,s)}function W(t,s,l){if(A)return J(10,1,t,s,l)}function V(t,s,l,g){if(A)return J(11,1,t,s,l,g)}function De(t,s,l,g){if(A)return J(12,1,t,s,l,g)}function Ot(t,s,l,g){if(A)return J(13,1,t,s,l,g)}function $r(t){if(A)return J(14,1,t)}function Vr(t,s){if(A)return J(15,1,t,s)}function qr(t,s,l){if(A)return J(16,1,t,s,l)}var za=t=>{if(!ce)try{if(t(),!xe())try{A?fr(se):rt(se)}catch(s){s instanceof je||s=="unwind"||_(1,s)}}catch(s){s instanceof je||s=="unwind"||_(1,s)}};function or(t){t>>>=0,typeof Atomics.tb=="function"&&(Atomics.tb(o(),t>>2,t).value.then(Ct),t+=128,Atomics.store(o(),t>>2,1))}a.__emscripten_thread_mailbox_await=or;function Ct(){var t=Pt();t&&(or(t),za(()=>mn()))}a.checkMailbox=Ct;var at=t=>t%4===0&&(t%100!==0||t%400===0),Xr=[0,31,60,91,121,152,182,213,244,274,305,335],Jr=[0,31,59,90,120,151,181,212,243,273,304,334];function Qr(t,s,l,g,M,T,C,Q){return A?J(17,1,t,s,l,g,M,T,C,Q):-52}function Zr(t,s,l,g,M,T,C){if(A)return J(18,1,t,s,l,g,M,T,C)}var Kr=t=>{var s=K(t)+1,l=cn(s);return l&&ue(t,l,s),l},Wa=t=>{var s=cr();return t=t(),xt(s),t};function J(t,s){var l=arguments.length-2,g=arguments;return Wa(()=>{for(var M=dr(8*l),T=M>>3,C=0;C<l;C++){var Q=g[2+C];f()[T+C>>>0]=Q}return pn(t,l,M,s)})}var ir=[],sr={},en=()=>{if(!ur){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:v||"./this.program"},s;for(s in sr)sr[s]===void 0?delete t[s]:t[s]=sr[s];var l=[];for(s in t)l.push(`${s}=${t[s]}`);ur=l}return ur},ur;function tn(t,s){if(A)return J(19,1,t,s);t>>>=0,s>>>=0;var l=0;return en().forEach(function(g,M){var T=s+l;for(M=d()[t+4*M>>2>>>0]=T,T=0;T<g.length;++T)e()[M++>>0>>>0]=g.charCodeAt(T);e()[M>>0>>>0]=0,l+=g.length+1}),0}function rn(t,s){if(A)return J(20,1,t,s);t>>>=0,s>>>=0;var l=en();d()[t>>2>>>0]=l.length;var g=0;return l.forEach(function(M){g+=M.length+1}),d()[s>>2>>>0]=g,0}function nn(t){return A?J(21,1,t):52}function an(t,s,l,g){return A?J(22,1,t,s,l,g):52}function on(t,s,l,g,M){return A?J(23,1,t,s,l,g,M):70}var Ga=[null,[],[]];function sn(t,s,l,g){if(A)return J(24,1,t,s,l,g);s>>>=0,l>>>=0,g>>>=0;for(var M=0,T=0;T<l;T++){var C=d()[s>>2>>>0],Q=d()[s+4>>2>>>0];s+=8;for(var Ue=0;Ue<Q;Ue++){var oe=u()[C+Ue>>>0],ye=Ga[t];oe===0||oe===10?((t===1?re:ie)(gt(ye,0)),ye.length=0):ye.push(oe)}M+=Q}return d()[g>>2>>>0]=M,0}var un=[31,29,31,30,31,30,31,31,30,31,30,31],ln=[31,28,31,30,31,30,31,31,30,31,30,31];function ja(t){var s=Array(K(t)+1);return me(t,s,0,s.length),s}var Ya=(t,s)=>{e().set(t,s>>>0)};function fn(t,s,l,g){function M(O,Y,Z){for(O=typeof O=="number"?O.toString():O||"";O.length<Y;)O=Z[0]+O;return O}function T(O,Y){return M(O,Y,"0")}function C(O,Y){function Z(On){return 0>On?-1:0<On?1:0}var Ve;return(Ve=Z(O.getFullYear()-Y.getFullYear()))===0&&(Ve=Z(O.getMonth()-Y.getMonth()))===0&&(Ve=Z(O.getDate()-Y.getDate())),Ve}function Q(O){switch(O.getDay()){case 0:return new Date(O.getFullYear()-1,11,29);case 1:return O;case 2:return new Date(O.getFullYear(),0,3);case 3:return new Date(O.getFullYear(),0,2);case 4:return new Date(O.getFullYear(),0,1);case 5:return new Date(O.getFullYear()-1,11,31);case 6:return new Date(O.getFullYear()-1,11,30)}}function Ue(O){var Y=O.Pa;for(O=new Date(new Date(O.Qa+1900,0,1).getTime());0<Y;){var Z=O.getMonth(),Ve=(at(O.getFullYear())?un:ln)[Z];if(Y>Ve-O.getDate())Y-=Ve-O.getDate()+1,O.setDate(1),11>Z?O.setMonth(Z+1):(O.setMonth(0),O.setFullYear(O.getFullYear()+1));else{O.setDate(O.getDate()+Y);break}}return Z=new Date(O.getFullYear()+1,0,4),Y=Q(new Date(O.getFullYear(),0,4)),Z=Q(Z),0>=C(Y,O)?0>=C(Z,O)?O.getFullYear()+1:O.getFullYear():O.getFullYear()-1}t>>>=0,s>>>=0,l>>>=0,g>>>=0;var oe=o()[g+40>>2>>>0];g={qb:o()[g>>2>>>0],pb:o()[g+4>>2>>>0],Sa:o()[g+8>>2>>>0],Wa:o()[g+12>>2>>>0],Ta:o()[g+16>>2>>>0],Qa:o()[g+20>>2>>>0],Ma:o()[g+24>>2>>>0],Pa:o()[g+28>>2>>>0],yb:o()[g+32>>2>>>0],ob:o()[g+36>>2>>>0],rb:oe?tt(oe):""},l=tt(l),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ye in oe)l=l.replace(new RegExp(ye,"g"),oe[ye]);var bn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),wn="January February March April May June July August September October November December".split(" ");oe={"%a":O=>bn[O.Ma].substring(0,3),"%A":O=>bn[O.Ma],"%b":O=>wn[O.Ta].substring(0,3),"%B":O=>wn[O.Ta],"%C":O=>T((O.Qa+1900)/100|0,2),"%d":O=>T(O.Wa,2),"%e":O=>M(O.Wa,2," "),"%g":O=>Ue(O).toString().substring(2),"%G":O=>Ue(O),"%H":O=>T(O.Sa,2),"%I":O=>(O=O.Sa,O==0?O=12:12<O&&(O-=12),T(O,2)),"%j":O=>{for(var Y=0,Z=0;Z<=O.Ta-1;Y+=(at(O.Qa+1900)?un:ln)[Z++]);return T(O.Wa+Y,3)},"%m":O=>T(O.Ta+1,2),"%M":O=>T(O.pb,2),"%n":()=>`
`,"%p":O=>0<=O.Sa&&12>O.Sa?"AM":"PM","%S":O=>T(O.qb,2),"%t":()=>"	","%u":O=>O.Ma||7,"%U":O=>T(Math.floor((O.Pa+7-O.Ma)/7),2),"%V":O=>{var Y=Math.floor((O.Pa+7-(O.Ma+6)%7)/7);if(2>=(O.Ma+371-O.Pa-2)%7&&Y++,Y)Y==53&&(Z=(O.Ma+371-O.Pa)%7,Z==4||Z==3&&at(O.Qa)||(Y=1));else{Y=52;var Z=(O.Ma+7-O.Pa-1)%7;(Z==4||Z==5&&at(O.Qa%400-1))&&Y++}return T(Y,2)},"%w":O=>O.Ma,"%W":O=>T(Math.floor((O.Pa+7-(O.Ma+6)%7)/7),2),"%y":O=>(O.Qa+1900).toString().substring(2),"%Y":O=>O.Qa+1900,"%z":O=>{O=O.ob;var Y=0<=O;return O=Math.abs(O)/60,(Y?"+":"-")+("0000"+(O/60*100+O%60)).slice(-4)},"%Z":O=>O.rb,"%%":()=>"%"},l=l.replace(/%%/g,"\0\0");for(ye in oe)l.includes(ye)&&(l=l.replace(new RegExp(ye,"g"),oe[ye](g)));return l=l.replace(/\0\0/g,"%"),ye=ja(l),ye.length>s?0:(Ya(ye,t),ye.length-1)}F.Va();var $a=[null,yt,Ye,b,P,L,le,bt,wt,w,W,V,De,Ot,$r,Vr,qr,Qr,Zr,tn,rn,nn,an,on,sn],Va={b:function(t,s,l){throw t>>>=0,new i(t).Va(s>>>0,l>>>0),c=t,p++,c},N:function(t){dn(t>>>0,!x,1,!E,131072,!1),F.Ya()},j:function(t){t>>>=0,A?postMessage({cmd:"cleanupThread",thread:t}):Rt(t)},I:R,h:P,T:L,D:le,F:bt,U:wt,R:w,J:W,Q:V,n:De,E:Ot,B:$r,S:Vr,C:qr,q:()=>!0,z:function(t,s){t>>>=0,t==s>>>0?setTimeout(()=>Ct()):A?postMessage({targetThread:t,cmd:"checkMailbox"}):(t=F.La[t])&&t.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:or,p:function(t){S&&F.La[t>>>0].ref()},t:function(t,s,l){t=s+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*s:NaN,l>>>=0,t=new Date(1e3*t),o()[l>>2>>>0]=t.getUTCSeconds(),o()[l+4>>2>>>0]=t.getUTCMinutes(),o()[l+8>>2>>>0]=t.getUTCHours(),o()[l+12>>2>>>0]=t.getUTCDate(),o()[l+16>>2>>>0]=t.getUTCMonth(),o()[l+20>>2>>>0]=t.getUTCFullYear()-1900,o()[l+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,o()[l+28>>2>>>0]=t},u:function(t,s,l){t=s+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*s:NaN,l>>>=0,t=new Date(1e3*t),o()[l>>2>>>0]=t.getSeconds(),o()[l+4>>2>>>0]=t.getMinutes(),o()[l+8>>2>>>0]=t.getHours(),o()[l+12>>2>>>0]=t.getDate(),o()[l+16>>2>>>0]=t.getMonth(),o()[l+20>>2>>>0]=t.getFullYear()-1900,o()[l+24>>2>>>0]=t.getDay(),s=(at(t.getFullYear())?Xr:Jr)[t.getMonth()]+t.getDate()-1|0,o()[l+28>>2>>>0]=s,o()[l+36>>2>>>0]=-(60*t.getTimezoneOffset()),s=new Date(t.getFullYear(),6,1).getTimezoneOffset();var g=new Date(t.getFullYear(),0,1).getTimezoneOffset();t=(s!=g&&t.getTimezoneOffset()==Math.min(g,s))|0,o()[l+32>>2>>>0]=t},v:function(t){t>>>=0;var s=new Date(o()[t+20>>2>>>0]+1900,o()[t+16>>2>>>0],o()[t+12>>2>>>0],o()[t+8>>2>>>0],o()[t+4>>2>>>0],o()[t>>2>>>0],0),l=o()[t+32>>2>>>0],g=s.getTimezoneOffset(),M=new Date(s.getFullYear(),6,1).getTimezoneOffset(),T=new Date(s.getFullYear(),0,1).getTimezoneOffset(),C=Math.min(T,M);return 0>l?o()[t+32>>2>>>0]=+(M!=T&&C==g):0<l!=(C==g)&&(M=Math.max(T,M),s.setTime(s.getTime()+6e4*((0<l?C:M)-g))),o()[t+24>>2>>>0]=s.getDay(),l=(at(s.getFullYear())?Xr:Jr)[s.getMonth()]+s.getDate()-1|0,o()[t+28>>2>>>0]=l,o()[t>>2>>>0]=s.getSeconds(),o()[t+4>>2>>>0]=s.getMinutes(),o()[t+8>>2>>>0]=s.getHours(),o()[t+12>>2>>>0]=s.getDate(),o()[t+16>>2>>>0]=s.getMonth(),o()[t+20>>2>>>0]=s.getYear(),t=s.getTime()/1e3,hn((ze=t,1<=+Math.abs(ze)?0<ze?+Math.floor(ze/4294967296)>>>0:~~+Math.ceil((ze-+(~~ze>>>0))/4294967296)>>>0:0)),t>>>0},r:Qr,s:Zr,y:function(t,s,l){function g(oe){return(oe=oe.toTimeString().match(/\(([A-Za-z ]+)\)$/))?oe[1]:"GMT"}t>>>=0,s>>>=0,l>>>=0;var M=new Date().getFullYear(),T=new Date(M,0,1),C=new Date(M,6,1);M=T.getTimezoneOffset();var Q=C.getTimezoneOffset(),Ue=Math.max(M,Q);d()[t>>2>>>0]=60*Ue,o()[s>>2>>>0]=+(M!=Q),t=g(T),s=g(C),t=Kr(t),s=Kr(s),Q<M?(d()[l>>2>>>0]=t,d()[l+4>>2>>>0]=s):(d()[l>>2>>>0]=s,d()[l+4>>2>>>0]=t)},c:()=>{Se("")},k:function(){},i:function(){return Date.now()},o:()=>{throw ne+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return S?(ta(),qe(ea)).cpus().length:navigator.hardwareConcurrency},K:function(t,s,l,g){for(F.vb=s>>>0,ir.length=l,s=g>>>0>>3,g=0;g<l;g++)ir[g]=f()[s+g>>>0];return $a[t].apply(null,ir)},x:function(t){t>>>=0;var s=u().length;if(t<=s||4294901760<t)return!1;for(var l=1;4>=l;l*=2){var g=s*(1+.2/l);g=Math.min(g,t+100663296);var M=Math;g=Math.max(t,g);e:{M=M.min.call(M,4294901760,g+(65536-g%65536)%65536)-B.buffer.byteLength+65535>>>16;try{B.grow(M),Te();var T=1;break e}catch{}T=void 0}if(T)return!0}return!1},O:tn,P:rn,H:rt,g:nn,m:an,w:on,l:sn,a:B||a.wasmMemory,G:fn,d:function(t,s,l,g){return fn(t>>>0,s>>>0,l>>>0,g>>>0)}};(function(){function t(l,g){return l=l.exports,D=l=qa(l),F.Za.push(D.ya),Ce=D.za,Pe.unshift(D.V),ve=g,Ke(),l}var s={a:Va};if(Ze(),a.instantiateWasm)try{return a.instantiateWasm(s,t)}catch(l){ie("Module.instantiateWasm callback failed with error: "+l),m(l)}return mt(s,function(l){t(l.instance,l.module)}).catch(m),{}})(),a._OrtInit=(t,s)=>(a._OrtInit=D.W)(t,s),a._OrtGetLastError=(t,s)=>(a._OrtGetLastError=D.X)(t,s),a._OrtCreateSessionOptions=(t,s,l,g,M,T,C,Q,Ue,oe)=>(a._OrtCreateSessionOptions=D.Y)(t,s,l,g,M,T,C,Q,Ue,oe),a._OrtAppendExecutionProvider=(t,s)=>(a._OrtAppendExecutionProvider=D.Z)(t,s),a._OrtAddFreeDimensionOverride=(t,s,l)=>(a._OrtAddFreeDimensionOverride=D._)(t,s,l),a._OrtAddSessionConfigEntry=(t,s,l)=>(a._OrtAddSessionConfigEntry=D.$)(t,s,l),a._OrtReleaseSessionOptions=t=>(a._OrtReleaseSessionOptions=D.aa)(t),a._OrtCreateSession=(t,s,l)=>(a._OrtCreateSession=D.ba)(t,s,l),a._OrtReleaseSession=t=>(a._OrtReleaseSession=D.ca)(t),a._OrtGetInputOutputCount=(t,s,l)=>(a._OrtGetInputOutputCount=D.da)(t,s,l),a._OrtGetInputName=(t,s)=>(a._OrtGetInputName=D.ea)(t,s),a._OrtGetOutputName=(t,s)=>(a._OrtGetOutputName=D.fa)(t,s),a._OrtFree=t=>(a._OrtFree=D.ga)(t),a._OrtCreateTensor=(t,s,l,g,M,T)=>(a._OrtCreateTensor=D.ha)(t,s,l,g,M,T),a._OrtGetTensorData=(t,s,l,g,M)=>(a._OrtGetTensorData=D.ia)(t,s,l,g,M),a._OrtReleaseTensor=t=>(a._OrtReleaseTensor=D.ja)(t),a._OrtCreateRunOptions=(t,s,l,g)=>(a._OrtCreateRunOptions=D.ka)(t,s,l,g),a._OrtAddRunConfigEntry=(t,s,l)=>(a._OrtAddRunConfigEntry=D.la)(t,s,l),a._OrtReleaseRunOptions=t=>(a._OrtReleaseRunOptions=D.ma)(t),a._OrtCreateBinding=t=>(a._OrtCreateBinding=D.na)(t),a._OrtBindInput=(t,s,l)=>(a._OrtBindInput=D.oa)(t,s,l),a._OrtBindOutput=(t,s,l,g)=>(a._OrtBindOutput=D.pa)(t,s,l,g),a._OrtClearBoundOutputs=t=>(a._OrtClearBoundOutputs=D.qa)(t),a._OrtReleaseBinding=t=>(a._OrtReleaseBinding=D.ra)(t),a._OrtRunWithBinding=(t,s,l,g,M)=>(a._OrtRunWithBinding=D.sa)(t,s,l,g,M),a._OrtRun=(t,s,l,g,M,T,C,Q)=>(a._OrtRun=D.ta)(t,s,l,g,M,T,C,Q),a._OrtEndProfiling=t=>(a._OrtEndProfiling=D.ua)(t);var Pt=a._pthread_self=()=>(Pt=a._pthread_self=D.va)(),cn=a._malloc=t=>(cn=a._malloc=D.wa)(t);a._free=t=>(a._free=D.xa)(t),a.__emscripten_tls_init=()=>(a.__emscripten_tls_init=D.ya)();var dn=a.__emscripten_thread_init=(t,s,l,g,M,T)=>(dn=a.__emscripten_thread_init=D.Aa)(t,s,l,g,M,T);a.__emscripten_thread_crashed=()=>(a.__emscripten_thread_crashed=D.Ba)();var pn=(t,s,l,g)=>(pn=D.Ca)(t,s,l,g),lr=t=>(lr=D.Da)(t),fr=a.__emscripten_thread_exit=t=>(fr=a.__emscripten_thread_exit=D.Ea)(t),mn=a.__emscripten_check_mailbox=()=>(mn=a.__emscripten_check_mailbox=D.Fa)(),hn=t=>(hn=D.Ga)(t),gn=(t,s)=>(gn=D.Ha)(t,s),cr=()=>(cr=D.Ia)(),xt=t=>(xt=D.Ja)(t),dr=t=>(dr=D.Ka)(t);function qa(t){t=Object.assign({},t);var s=g=>()=>g()>>>0,l=g=>M=>g(M)>>>0;return t.__errno_location=s(t.__errno_location),t.pthread_self=s(t.pthread_self),t.malloc=l(t.malloc),t.stackSave=s(t.stackSave),t.stackAlloc=l(t.stackAlloc),t}a.keepRuntimeAlive=xe,a.wasmMemory=B,a.stackAlloc=dr,a.stackSave=cr,a.stackRestore=xt,a.UTF8ToString=tt,a.stringToUTF8=ue,a.lengthBytesUTF8=K,a.ExitStatus=je,a.PThread=F;var Dt;Fe=function t(){Dt||yn(),Dt||(Fe=t)};function yn(){function t(){if(!Dt&&(Dt=!0,a.calledRun=!0,!ce)&&(A||nt(Pe),h(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),!A)){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;){var s=a.postRun.shift();ae.unshift(s)}nt(ae)}}if(!(0<_e))if(A)h(a),A||nt(Pe),startWorker(a);else{if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)de.unshift(a.preRun.shift());nt(de),0<_e||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),t()},1)):t())}}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();return yn(),r.ready}})();typeof na=="object"&&typeof _r=="object"?_r.exports=ra:typeof define=="function"&&define.amd&&define([],()=>ra)});var oa=ot((di,no)=>{no.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>(0,eval)(fs.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason??e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err("worker.js received unknown command "+e.data.cmd),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed&&Module.__emscripten_thread_crashed(),a}}self.onmessage=handleMessage;\n'});var sa,ao,Tr,Sr,Wt,ia,oo,io,so,ua,H,Je=N(()=>{"use strict";sa=Qn();ao=aa(),Sr=!1,Wt=!1,ia=!1,oo=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},io=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},so=(n,r)=>n?"ort-training-wasm-simd.wasm":r?"ort-wasm-threaded.wasm":"ort-wasm.wasm",ua=async n=>{if(Sr)return Promise.resolve();if(Wt)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(ia)throw new Error("previous call to 'initializeWebAssembly()' failed.");Wt=!0;let r=n.initTimeout,e=n.numThreads,u=n.simd,o=e>1&&oo(),d=u&&io(),f=n.wasmPaths,a=typeof f=="string"?f:void 0,h=so(d,o),m=typeof f=="object"?f[h]:void 0,y=!1,v=[];if(r>0&&v.push(new Promise(_=>{setTimeout(()=>{y=!0,_()},r)})),v.push(new Promise((_,E)=>{let x=o?ao:sa,S={locateFile:(A,k)=>o&&A.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([oa()],{type:"text/javascript"})):A.endsWith(".wasm")?m||(a??k)+h:k+A};if(o)if(typeof Blob>"u")S.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let A=`var ortWasmThreaded=${x.toString()};`;S.mainScriptUrlOrBlob=new Blob([A],{type:"text/javascript"})}x(S).then(A=>{Wt=!1,Sr=!0,Tr=A,_()},A=>{Wt=!1,ia=!0,E(A)})})),await Promise.race(v),y)throw new Error(`WebAssembly backend initializing failed due to timeout: ${r}ms`)},H=()=>{if(Sr&&Tr)return Tr;throw new Error("WebAssembly is not initialized yet.")}});var ee,_t,q,Tt=N(()=>{"use strict";Je();ee=(n,r)=>{let e=H(),u=e.lengthBytesUTF8(n)+1,o=e._malloc(u);return e.stringToUTF8(n,o,u),r.push(o),o},_t=(n,r,e,u)=>{if(typeof n=="object"&&n!==null){if(e.has(n))throw new Error("Circular reference in options");e.add(n)}Object.entries(n).forEach(([o,d])=>{let f=r?r+o:o;if(typeof d=="object")_t(d,f+".",e,u);else if(typeof d=="string"||typeof d=="number")u(f,d.toString());else if(typeof d=="boolean")u(f,d?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof d}`)})},q=n=>{let r=H(),e=r.stackSave();try{let u=r.stackAlloc(8);r._OrtGetLastError(u,u+4);let o=r.HEAP32[u/4],d=r.HEAPU32[u/4+1],f=d?r.UTF8ToString(d):"";throw new Error(`${n} ERROR_CODE: ${o}, ERROR_MESSAGE: ${f}`)}finally{r.stackRestore(e)}}});var ut,Er=N(()=>{"use strict";Je();Tt();ut=n=>{let r=H(),e=0,u=[],o=n||{};try{if(n?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if(typeof n.logSeverityLevel!="number"||!Number.isInteger(n.logSeverityLevel)||n.logSeverityLevel<0||n.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${n.logSeverityLevel}`);if(n?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if(typeof n.logVerbosityLevel!="number"||!Number.isInteger(n.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${n.logVerbosityLevel}`);n?.terminate===void 0&&(o.terminate=!1);let d=0;return n?.tag!==void 0&&(d=ee(n.tag,u)),e=r._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,d),e===0&&q("Can't create run options."),n?.extra!==void 0&&_t(n.extra,"",new WeakSet,(f,a)=>{let h=ee(f,u),m=ee(a,u);r._OrtAddRunConfigEntry(e,h,m)!==0&&q(`Can't set a run config entry: ${f} - ${a}.`)}),[e,u]}catch(d){throw e!==0&&r._OrtReleaseRunOptions(e),u.forEach(f=>r._free(f)),d}}});var uo,lo,fo,co,Gt,Ar=N(()=>{"use strict";Je();Tt();uo=n=>{switch(n){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${n}`)}},lo=n=>{switch(n){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${n}`)}},fo=n=>{n.extra||(n.extra={}),n.extra.session||(n.extra.session={});let r=n.extra.session;r.use_ort_model_bytes_directly||(r.use_ort_model_bytes_directly="1"),n.executionProviders&&n.executionProviders.some(e=>(typeof e=="string"?e:e.name)==="webgpu")&&(n.enableMemPattern=!1)},co=(n,r,e)=>{for(let u of r){let o=typeof u=="string"?u:u.name;switch(o){case"xnnpack":o="XNNPACK";break;case"webnn":if(o="WEBNN",typeof u!="string"){let f=u;if(f?.deviceType){let a=ee("deviceType",e),h=ee(f.deviceType,e);H()._OrtAddSessionConfigEntry(n,a,h)!==0&&q(`Can't set a session config entry: 'deviceType' - ${f.deviceType}.`)}if(f?.numThreads){let a=f.numThreads;(typeof a!="number"||!Number.isInteger(a)||a<0)&&(a=0);let h=ee("numThreads",e),m=ee(a.toString(),e);H()._OrtAddSessionConfigEntry(n,h,m)!==0&&q(`Can't set a session config entry: 'numThreads' - ${f.numThreads}.`)}if(f?.powerPreference){let a=ee("powerPreference",e),h=ee(f.powerPreference,e);H()._OrtAddSessionConfigEntry(n,a,h)!==0&&q(`Can't set a session config entry: 'powerPreference' - ${f.powerPreference}.`)}}break;case"webgpu":if(o="JS",typeof u!="string"){let f=u;if(f?.preferredLayout){if(f.preferredLayout!=="NCHW"&&f.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${f.preferredLayout}`);let a=ee("preferredLayout",e),h=ee(f.preferredLayout,e);H()._OrtAddSessionConfigEntry(n,a,h)!==0&&q(`Can't set a session config entry: 'preferredLayout' - ${f.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${o}`)}let d=ee(o,e);H()._OrtAppendExecutionProvider(n,d)!==0&&q(`Can't append execution provider: ${o}.`)}},Gt=n=>{let r=H(),e=0,u=[],o=n||{};fo(o);try{let d=uo(o.graphOptimizationLevel??"all"),f=lo(o.executionMode??"sequential"),a=typeof o.logId=="string"?ee(o.logId,u):0,h=o.logSeverityLevel??2;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log serverity level is not valid: ${h}`);let m=o.logVerbosityLevel??0;if(!Number.isInteger(m)||m<0||m>4)throw new Error(`log verbosity level is not valid: ${m}`);let y=typeof o.optimizedModelFilePath=="string"?ee(o.optimizedModelFilePath,u):0;if(e=r._OrtCreateSessionOptions(d,!!o.enableCpuMemArena,!!o.enableMemPattern,f,!!o.enableProfiling,0,a,h,m,y),e===0&&q("Can't create session options."),o.executionProviders&&co(e,o.executionProviders,u),o.freeDimensionOverrides)for(let[v,_]of Object.entries(o.freeDimensionOverrides)){if(typeof v!="string")throw new Error(`free dimension override name must be a string: ${v}`);if(typeof _!="number"||!Number.isInteger(_)||_<0)throw new Error(`free dimension override value must be a non-negative integer: ${_}`);let E=ee(v,u);r._OrtAddFreeDimensionOverride(e,E,_)!==0&&q(`Can't set a free dimension override: ${v} - ${_}.`)}return o.extra!==void 0&&_t(o.extra,"",new WeakSet,(v,_)=>{let E=ee(v,u),x=ee(_,u);r._OrtAddSessionConfigEntry(e,E,x)!==0&&q(`Can't set a session config entry: ${v} - ${_}.`)}),[e,u]}catch(d){throw e!==0&&r._OrtReleaseSessionOptions(e),u.forEach(f=>r._free(f)),d}}});var lt,jt,Mr,St,la,Yt,Et,$t=N(()=>{"use strict";lt=n=>{switch(n){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${n}`)}},jt=n=>{switch(n){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${n}`)}},Mr=n=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][n],St=n=>{switch(n){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${n}`)}},la=n=>{switch(n){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${n}`)}},Yt=n=>n==="float32"||n==="int32"||n==="int64"||n==="bool"||n==="float16"||n==="uint32",Et=n=>{switch(n){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${n}`)}}});var fa,po,mo,qt,At,Xt,Mt,Rr,ca,da,Vt,pa,ma,ha,Jt=N(()=>{"use strict";Er();Ar();$t();Je();Tt();fa=!1,po=n=>{let r=H(),e=r.stackSave();try{let u=r.stackAlloc(8);return r._OrtGetInputOutputCount(n,u,u+4)!==0&&q("Can't get session input/output count."),[r.HEAP32[u/4],r.HEAP32[u/4+1]]}finally{r.stackRestore(e)}},mo=(n,r)=>{H()._OrtInit(n,r)!==0&&q("Can't initialize onnxruntime.")},qt=async n=>{mo(n.wasm.numThreads,la(n.logLevel)),fa=!0},At=new Map,Xt=()=>fa,Mt=n=>{let r=H(),e=r._malloc(n.byteLength);if(e===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${n.byteLength}.`);return r.HEAPU8.set(n,e),[e,n.byteLength]},Rr=(n,r)=>{let e=H(),u=0,o=0,d=0,f=[],a=[],h=[];try{[o,f]=Gt(r),u=e._OrtCreateSession(n[0],n[1],o),u===0&&q("Can't create a session.");let[m,y]=po(u),v=[],_=[],E=[];for(let S=0;S<m;S++){let A=e._OrtGetInputName(u,S);A===0&&q("Can't get an input name."),a.push(A),v.push(e.UTF8ToString(A))}for(let S=0;S<y;S++){let A=e._OrtGetOutputName(u,S);A===0&&q("Can't get an output name."),h.push(A);let k=e.UTF8ToString(A);_.push(k)}let x=null;return At.set(u,[u,a,h,x]),[u,v,_]}catch(m){throw a.forEach(y=>e._OrtFree(y)),h.forEach(y=>e._OrtFree(y)),d!==0&&e._OrtReleaseBinding(d),u!==0&&e._OrtReleaseSession(u),m}finally{e._free(n[0]),o!==0&&e._OrtReleaseSessionOptions(o),f.forEach(m=>e._free(m))}},ca=(n,r)=>{let e=Mt(n);return Rr(e,r)},da=n=>{let r=H(),e=At.get(n);if(!e)throw new Error(`cannot release session. invalid session id: ${n}`);let[u,o,d,f]=e;f&&r._OrtReleaseBinding(f.handle),r.jsepUnregisterBuffers?.(n),o.forEach(a=>r._OrtFree(a)),d.forEach(a=>r._OrtFree(a)),r._OrtReleaseSession(u),At.delete(n)},Vt=(n,r,e,u,o)=>{if(!n){r.push(0);return}let d=H(),f=n[0],a=n[1],h=n[3],m,y;if(f==="string"&&h==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(h==="gpu-buffer"){let E=n[2].gpuBuffer,x=Mr(lt(f));y=a.reduce((S,A)=>S*A,1)*x,m=d.jsepRegisterBuffer(u,o,E,y)}else{let E=n[2];if(Array.isArray(E)){y=4*E.length,m=d._malloc(y),e.push(m);let x=m/4;for(let S=0;S<E.length;S++){if(typeof E[S]!="string")throw new TypeError(`tensor data at index ${S} is not a string`);d.HEAPU32[x++]=ee(E[S],e)}}else y=E.byteLength,m=d._malloc(y),e.push(m),d.HEAPU8.set(new Uint8Array(E.buffer,E.byteOffset,y),m)}let v=d.stackSave(),_=d.stackAlloc(4*a.length);try{let E=_/4;a.forEach(S=>d.HEAP32[E++]=S);let x=d._OrtCreateTensor(lt(f),m,y,_,a.length,Et(h));x===0&&q(`Can't create tensor for input/output. session=${u}, index=${o}.`),r.push(x)}finally{d.stackRestore(v)}},pa=async(n,r,e,u,o,d)=>{let f=H(),a=At.get(n);if(!a)throw new Error(`cannot run inference. invalid session id: ${n}`);let[h,m,y,v]=a,_=r.length,E=u.length,x=0,S=[],A=[],k=[],G=[],j=f.stackSave(),z=f.stackAlloc(_*4),I=f.stackAlloc(_*4),ge=f.stackAlloc(E*4),Oe=f.stackAlloc(E*4);try{[x,S]=ut(d);for(let B=0;B<_;B++)Vt(e[B],A,G,n,r[B]);for(let B=0;B<E;B++)Vt(o[B],k,G,n,_+u[B]);let te=z/4,U=I/4,re=ge/4,ie=Oe/4;for(let B=0;B<_;B++)f.HEAPU32[te++]=A[B],f.HEAPU32[U++]=m[r[B]];for(let B=0;B<E;B++)f.HEAPU32[re++]=k[B],f.HEAPU32[ie++]=y[u[B]];let Ee;Ee=await f._OrtRun(h,I,z,_,Oe,E,ge,x),Ee!==0&&q("failed to call OrtRun().");let Ae=[];for(let B=0;B<E;B++){let D=f.HEAPU32[ge/4+B];if(D===k[B]){Ae.push(o[B]);continue}let ve=f.stackSave(),ce=f.stackAlloc(4*4),se=!1,X,pe=0;try{f._OrtGetTensorData(D,ce,ce+4,ce+8,ce+12)!==0&&q(`Can't access output tensor data on index ${B}.`);let Ie=ce/4,He=f.HEAPU32[Ie++];pe=f.HEAPU32[Ie++];let Te=f.HEAPU32[Ie++],ke=f.HEAPU32[Ie++],Ce=[];for(let ae=0;ae<ke;ae++)Ce.push(f.HEAPU32[Te/4+ae]);f._OrtFree(Te);let de=Ce.reduce((ae,ne)=>ae*ne,1);X=jt(He);let Pe=v?.outputPreferredLocations[u[B]];if(X==="string"){if(Pe==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let ae=[],ne=pe/4;for(let xe=0;xe<de;xe++){let _e=f.HEAPU32[ne++],Ne=xe===de-1?void 0:f.HEAPU32[ne]-_e;ae.push(f.UTF8ToString(_e,Ne))}Ae.push([X,Ce,ae,"cpu"])}else if(Pe==="gpu-buffer"&&de>0){let ae=f.jsepGetBuffer(pe),ne=Mr(He);if(ne===void 0||!Yt(X))throw new Error(`Unsupported data type: ${X}`);se=!0,Ae.push([X,Ce,{gpuBuffer:ae,download:f.jsepCreateDownloader(ae,de*ne,X),dispose:()=>{f._OrtReleaseTensor(D)}},"gpu-buffer"])}else{let ae=St(X),ne=new ae(de);new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength).set(f.HEAPU8.subarray(pe,pe+ne.byteLength)),Ae.push([X,Ce,ne,"cpu"])}}finally{f.stackRestore(ve),X==="string"&&pe&&f._free(pe),se||f._OrtReleaseTensor(D)}}return v&&f._OrtClearBoundOutputs(v.handle),Ae}finally{f.stackRestore(j),A.forEach(te=>f._OrtReleaseTensor(te)),k.forEach(te=>f._OrtReleaseTensor(te)),G.forEach(te=>f._free(te)),x!==0&&f._OrtReleaseRunOptions(x),S.forEach(te=>f._free(te))}},ma=n=>{let r=H(),e=At.get(n);if(!e)throw new Error("invalid session id");let u=e[0],o=r._OrtEndProfiling(u);o===0&&q("Can't get an profile file name."),r._OrtFree(o)},ha=n=>{let r=[];for(let e of n){let u=e[2];!Array.isArray(u)&&"buffer"in u&&r.push(u.buffer)}return r}});var ga=ot((Ii,go)=>{go.exports='/*!\n * ONNX Runtime Web v1.17.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var _t=Object.defineProperty;var Vr=Object.getOwnPropertyDescriptor;var Jr=Object.getOwnPropertyNames;var Xr=Object.prototype.hasOwnProperty;var vt=(u,f)=>()=>(u&&(f=u(u=0)),f);var rt=(u,f)=>()=>(f||u((f={exports:{}}).exports,f),f.exports),St=(u,f)=>{for(var n in f)_t(u,n,{get:f[n],enumerable:!0})},Qr=(u,f,n,y)=>{if(f&&typeof f=="object"||typeof f=="function")for(let c of Jr(f))!Xr.call(u,c)&&c!==n&&_t(u,c,{get:()=>f[c],enumerable:!(y=Vr(f,c))||y.enumerable});return u};var nt=u=>Qr(_t({},"__esModule",{value:!0}),u);var Et={};St(Et,{readFile:()=>Zr});var Zr,Tt=vt(()=>{Zr=void 0});var Mt={};St(Mt,{join:()=>Kr});var Kr,At=vt(()=>{Kr=void 0});var dr=rt((cr,Ct)=>{"use strict";var fr=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(f={}){var n=f,y,c;n.ready=new Promise((t,o)=>{y=t,c=o});var w=Object.assign({},n),g="./this.program",i=typeof window=="object",I=typeof importScripts=="function",F=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",x="",W,P,L;if(F){var k=(Tt(),nt(Et)),R=(At(),nt(Mt));x=I?R.dirname(x)+"/":__dirname+"/",W=(t,o)=>(t=t.startsWith("file://")?new URL(t):R.normalize(t),k.readFileSync(t,o?void 0:"utf8")),L=t=>(t=W(t,!0),t.buffer||(t=new Uint8Array(t)),t),P=(t,o,s,d=!0)=>{t=t.startsWith("file://")?new URL(t):R.normalize(t),k.readFile(t,d?void 0:"utf8",(b,E)=>{b?s(b):o(d?E.buffer:E)})},!n.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),n.inspect=()=>"[Emscripten Module object]"}else(i||I)&&(I?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),u&&(x=u),x.indexOf("blob:")!==0?x=x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):x="",W=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},I&&(L=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),P=(t,o,s)=>{var d=new XMLHttpRequest;d.open("GET",t,!0),d.responseType="arraybuffer",d.onload=()=>{d.status==200||d.status==0&&d.response?o(d.response):s()},d.onerror=s,d.send(null)});var _=n.print||console.log.bind(console),B=n.printErr||console.error.bind(console);Object.assign(n,w),w=null,n.thisProgram&&(g=n.thisProgram);var le;n.wasmBinary&&(le=n.wasmBinary);var Be=n.noExitRuntime||!0;typeof WebAssembly!="object"&&z("no native wasm support detected");var pe,S,he=!1,ye,X,M,Q;function te(){var t=pe.buffer;n.HEAP8=ye=new Int8Array(t),n.HEAP16=new Int16Array(t),n.HEAP32=M=new Int32Array(t),n.HEAPU8=X=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=Q=new Uint32Array(t),n.HEAPF32=new Float32Array(t),n.HEAPF64=new Float64Array(t)}var Oe=[],be=[],C=[];function T(){var t=n.preRun.shift();Oe.unshift(t)}var ce=0,oe=null,re=null;function z(t){throw n.onAbort&&n.onAbort(t),t="Aborted("+t+")",B(t),he=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),c(t),t}function se(t){return t.startsWith("data:application/octet-stream;base64,")}var we;if(we="ort-training-wasm-simd.wasm",!se(we)){var _e=we;we=n.locateFile?n.locateFile(_e,x):x+_e}function De(t){if(t==we&&le)return new Uint8Array(le);if(L)return L(t);throw"both async and sync fetching of the wasm failed"}function me(t){if(!le&&(i||I)){if(typeof fetch=="function"&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at \'"+t+"\'";return o.arrayBuffer()}).catch(()=>De(t));if(P)return new Promise((o,s)=>{P(t,d=>o(new Uint8Array(d)),s)})}return Promise.resolve().then(()=>De(t))}function Ae(t,o,s){return me(t).then(d=>WebAssembly.instantiate(d,o)).then(d=>d).then(s,d=>{B("failed to asynchronously prepare wasm: "+d),z(d)})}function ve(t,o){var s=we;return le||typeof WebAssembly.instantiateStreaming!="function"||se(s)||s.startsWith("file://")||F||typeof fetch!="function"?Ae(s,t,o):fetch(s,{credentials:"same-origin"}).then(d=>WebAssembly.instantiateStreaming(d,t).then(o,function(b){return B("wasm streaming compile failed: "+b),B("falling back to ArrayBuffer instantiation"),Ae(s,t,o)}))}var ie,Se=t=>{for(;0<t.length;)t.shift()(n)};function K(t){this.Ja=t-24,this.Na=function(o){Q[this.Ja+4>>2>>>0]=o},this.Ma=function(o){Q[this.Ja+8>>2>>>0]=o},this.Ka=function(o,s){this.La(),this.Na(o),this.Ma(s)},this.La=function(){Q[this.Ja+16>>2>>>0]=0}}var Z=0,Ee=0,de=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ie=(t,o,s)=>{o>>>=0;var d=o+s;for(s=o;t[s]&&!(s>=d);)++s;if(16<s-o&&t.buffer&&de)return de.decode(t.subarray(o,s));for(d="";o<s;){var b=t[o++];if(b&128){var E=t[o++]&63;if((b&224)==192)d+=String.fromCharCode((b&31)<<6|E);else{var D=t[o++]&63;b=(b&240)==224?(b&15)<<12|E<<6|D:(b&7)<<18|E<<12|D<<6|t[o++]&63,65536>b?d+=String.fromCharCode(b):(b-=65536,d+=String.fromCharCode(55296|b>>10,56320|b&1023))}}else d+=String.fromCharCode(b)}return d},Ce=(t,o)=>(t>>>=0)?Ie(X,t,o):"",We=t=>{for(var o=0,s=0;s<t.length;++s){var d=t.charCodeAt(s);127>=d?o++:2047>=d?o+=2:55296<=d&&57343>=d?(o+=4,++s):o+=3}return o},ke=(t,o,s,d)=>{if(s>>>=0,!(0<d))return 0;var b=s;d=s+d-1;for(var E=0;E<t.length;++E){var D=t.charCodeAt(E);if(55296<=D&&57343>=D){var q=t.charCodeAt(++E);D=65536+((D&1023)<<10)|q&1023}if(127>=D){if(s>=d)break;o[s++>>>0]=D}else{if(2047>=D){if(s+1>=d)break;o[s++>>>0]=192|D>>6}else{if(65535>=D){if(s+2>=d)break;o[s++>>>0]=224|D>>12}else{if(s+3>=d)break;o[s++>>>0]=240|D>>18,o[s++>>>0]=128|D>>12&63}o[s++>>>0]=128|D>>6&63}o[s++>>>0]=128|D&63}}return o[s>>>0]=0,s-b},ge=t=>t%4===0&&(t%100!==0||t%400===0),je=[0,31,60,91,121,152,182,213,244,274,305,335],Re=[0,31,59,90,120,151,181,212,243,273,304,334],$e=t=>{var o=We(t)+1,s=Qe(o);return s&&ke(t,X,s,o),s},qe={},Ve=()=>{if(!Je){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"},o;for(o in qe)qe[o]===void 0?delete t[o]:t[o]=qe[o];var s=[];for(o in t)s.push(`${o}=${t[o]}`);Je=s}return Je},Je,Fe=[null,[],[]],xe=[31,29,31,30,31,30,31,31,30,31,30,31],Ne=[31,28,31,30,31,30,31,31,30,31,30,31];function it(t){var o=Array(We(t)+1);return ke(t,o,0,o.length),o}function Xe(t,o,s,d){function b(p,U,H){for(p=typeof p=="number"?p.toString():p||"";p.length<U;)p=H[0]+p;return p}function E(p,U){return b(p,U,"0")}function D(p,U){function H(tt){return 0>tt?-1:0<tt?1:0}var Te;return(Te=H(p.getFullYear()-U.getFullYear()))===0&&(Te=H(p.getMonth()-U.getMonth()))===0&&(Te=H(p.getDate()-U.getDate())),Te}function q(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function ue(p){var U=p.Ea;for(p=new Date(new Date(p.Fa+1900,0,1).getTime());0<U;){var H=p.getMonth(),Te=(ge(p.getFullYear())?xe:Ne)[H];if(U>Te-p.getDate())U-=Te-p.getDate()+1,p.setDate(1),11>H?p.setMonth(H+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+U);break}}return H=new Date(p.getFullYear()+1,0,4),U=q(new Date(p.getFullYear(),0,4)),H=q(H),0>=D(U,p)?0>=D(H,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}t>>>=0,o>>>=0,s>>>=0,d>>>=0;var ne=M[d+40>>2>>>0];d={Qa:M[d>>2>>>0],Pa:M[d+4>>2>>>0],Ga:M[d+8>>2>>>0],Ia:M[d+12>>2>>>0],Ha:M[d+16>>2>>>0],Fa:M[d+20>>2>>>0],za:M[d+24>>2>>>0],Ea:M[d+28>>2>>>0],Sa:M[d+32>>2>>>0],Oa:M[d+36>>2>>>0],Ra:ne?Ce(ne):""},s=Ce(s),ne={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ae in ne)s=s.replace(new RegExp(ae,"g"),ne[ae]);var Ke="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),et="January February March April May June July August September October November December".split(" ");ne={"%a":p=>Ke[p.za].substring(0,3),"%A":p=>Ke[p.za],"%b":p=>et[p.Ha].substring(0,3),"%B":p=>et[p.Ha],"%C":p=>E((p.Fa+1900)/100|0,2),"%d":p=>E(p.Ia,2),"%e":p=>b(p.Ia,2," "),"%g":p=>ue(p).toString().substring(2),"%G":p=>ue(p),"%H":p=>E(p.Ga,2),"%I":p=>(p=p.Ga,p==0?p=12:12<p&&(p-=12),E(p,2)),"%j":p=>{for(var U=0,H=0;H<=p.Ha-1;U+=(ge(p.Fa+1900)?xe:Ne)[H++]);return E(p.Ia+U,3)},"%m":p=>E(p.Ha+1,2),"%M":p=>E(p.Pa,2),"%n":()=>`\n`,"%p":p=>0<=p.Ga&&12>p.Ga?"AM":"PM","%S":p=>E(p.Qa,2),"%t":()=>"	","%u":p=>p.za||7,"%U":p=>E(Math.floor((p.Ea+7-p.za)/7),2),"%V":p=>{var U=Math.floor((p.Ea+7-(p.za+6)%7)/7);if(2>=(p.za+371-p.Ea-2)%7&&U++,U)U==53&&(H=(p.za+371-p.Ea)%7,H==4||H==3&&ge(p.Fa)||(U=1));else{U=52;var H=(p.za+7-p.Ea-1)%7;(H==4||H==5&&ge(p.Fa%400-1))&&U++}return E(U,2)},"%w":p=>p.za,"%W":p=>E(Math.floor((p.Ea+7-(p.za+6)%7)/7),2),"%y":p=>(p.Fa+1900).toString().substring(2),"%Y":p=>p.Fa+1900,"%z":p=>{p=p.Oa;var U=0<=p;return p=Math.abs(p)/60,(U?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.Ra,"%%":()=>"%"},s=s.replace(/%%/g,"\\0\\0");for(ae in ne)s.includes(ae)&&(s=s.replace(new RegExp(ae,"g"),ne[ae](d)));return s=s.replace(/\\0\\0/g,"%"),ae=it(s),ae.length>o?0:(ye.set(ae,t>>>0),ae.length-1)}var st={a:function(t,o,s){throw t>>>=0,new K(t).Ka(o>>>0,s>>>0),Z=t,Ee++,Z},e:function(){return 0},H:function(){},x:function(){},z:function(){},k:function(){return 0},F:function(){},B:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},l:()=>!0,o:function(t,o,s){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,s>>>=0,t=new Date(1e3*t),M[s>>2>>>0]=t.getUTCSeconds(),M[s+4>>2>>>0]=t.getUTCMinutes(),M[s+8>>2>>>0]=t.getUTCHours(),M[s+12>>2>>>0]=t.getUTCDate(),M[s+16>>2>>>0]=t.getUTCMonth(),M[s+20>>2>>>0]=t.getUTCFullYear()-1900,M[s+24>>2>>>0]=t.getUTCDay(),M[s+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},p:function(t,o,s){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,s>>>=0,t=new Date(1e3*t),M[s>>2>>>0]=t.getSeconds(),M[s+4>>2>>>0]=t.getMinutes(),M[s+8>>2>>>0]=t.getHours(),M[s+12>>2>>>0]=t.getDate(),M[s+16>>2>>>0]=t.getMonth(),M[s+20>>2>>>0]=t.getFullYear()-1900,M[s+24>>2>>>0]=t.getDay(),M[s+28>>2>>>0]=(ge(t.getFullYear())?je:Re)[t.getMonth()]+t.getDate()-1|0,M[s+36>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var d=new Date(t.getFullYear(),0,1).getTimezoneOffset();M[s+32>>2>>>0]=(o!=d&&t.getTimezoneOffset()==Math.min(d,o))|0},q:function(t){t>>>=0;var o=new Date(M[t+20>>2>>>0]+1900,M[t+16>>2>>>0],M[t+12>>2>>>0],M[t+8>>2>>>0],M[t+4>>2>>>0],M[t>>2>>>0],0),s=M[t+32>>2>>>0],d=o.getTimezoneOffset(),b=new Date(o.getFullYear(),6,1).getTimezoneOffset(),E=new Date(o.getFullYear(),0,1).getTimezoneOffset(),D=Math.min(E,b);return 0>s?M[t+32>>2>>>0]=+(b!=E&&D==d):0<s!=(D==d)&&(b=Math.max(E,b),o.setTime(o.getTime()+6e4*((0<s?D:b)-d))),M[t+24>>2>>>0]=o.getDay(),M[t+28>>2>>>0]=(ge(o.getFullYear())?je:Re)[o.getMonth()]+o.getDate()-1|0,M[t>>2>>>0]=o.getSeconds(),M[t+4>>2>>>0]=o.getMinutes(),M[t+8>>2>>>0]=o.getHours(),M[t+12>>2>>>0]=o.getDate(),M[t+16>>2>>>0]=o.getMonth(),M[t+20>>2>>>0]=o.getYear(),t=o.getTime()/1e3,He((ie=t,1<=+Math.abs(ie)?0<ie?+Math.floor(ie/4294967296)>>>0:~~+Math.ceil((ie-+(~~ie>>>0))/4294967296)>>>0:0)),t>>>0},m:function(){return-52},n:function(){},t:function(t,o,s){function d(ue){return(ue=ue.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?ue[1]:"GMT"}s>>>=0;var b=new Date().getFullYear(),E=new Date(b,0,1),D=new Date(b,6,1);b=E.getTimezoneOffset();var q=D.getTimezoneOffset();Q[t>>>0>>2>>>0]=60*Math.max(b,q),M[o>>>0>>2>>>0]=+(b!=q),t=d(E),o=d(D),t=$e(t),o=$e(o),q<b?(Q[s>>2>>>0]=t,Q[s+4>>2>>>0]=o):(Q[s>>2>>>0]=o,Q[s+4>>2>>>0]=t)},d:()=>{z("")},h:function(){return Date.now()},u:function(){return 4294901760},b:()=>performance.now(),I:function(t,o,s){return o>>>=0,X.copyWithin(t>>>0>>>0,o>>>0,o+(s>>>0)>>>0)},s:function(t){t>>>=0;var o=X.length;if(4294901760<t)return!1;for(var s=1;4>=s;s*=2){var d=o*(1+.2/s);d=Math.min(d,t+100663296);var b=Math;d=Math.max(t,d);e:{b=b.min.call(b,4294901760,d+(65536-d%65536)%65536)-pe.buffer.byteLength+65535>>>16;try{pe.grow(b),te();var E=1;break e}catch{}E=void 0}if(E)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var s=0;return Ve().forEach(function(d,b){var E=o+s;for(b=Q[t+4*b>>2>>>0]=E,E=0;E<d.length;++E)ye[b++>>0>>>0]=d.charCodeAt(E);ye[b>>0>>>0]=0,s+=d.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var s=Ve();Q[t>>2>>>0]=s.length;var d=0;return s.forEach(function(b){d+=b.length+1}),Q[o>>2>>>0]=d,0},f:()=>52,j:function(){return 52},r:function(){return 70},i:function(t,o,s,d){o>>>=0,s>>>=0,d>>>=0;for(var b=0,E=0;E<s;E++){var D=Q[o>>2>>>0],q=Q[o+4>>2>>>0];o+=8;for(var ue=0;ue<q;ue++){var ne=X[D+ue>>>0],ae=Fe[t];ne===0||ne===10?((t===1?_:B)(Ie(ae,0)),ae.length=0):ae.push(ne)}b+=q}return Q[d>>2>>>0]=b,0},A:Xe,c:function(t,o,s,d){return Xe(t>>>0,o>>>0,s>>>0,d>>>0)}};(function(){function t(s){if(s=s.exports,S=s=Ge(s),pe=S.J,te(),be.unshift(S.K),ce--,n.monitorRunDependencies&&n.monitorRunDependencies(ce),ce==0&&(oe!==null&&(clearInterval(oe),oe=null),re)){var d=re;re=null,d()}return s}var o={a:st};if(ce++,n.monitorRunDependencies&&n.monitorRunDependencies(ce),n.instantiateWasm)try{return n.instantiateWasm(o,t)}catch(s){B("Module.instantiateWasm callback failed with error: "+s),c(s)}return ve(o,function(s){t(s.instance)}).catch(c),{}})(),n._OrtInit=(t,o)=>(n._OrtInit=S.L)(t,o),n._OrtGetLastError=(t,o)=>(n._OrtGetLastError=S.M)(t,o),n._OrtCreateSessionOptions=(t,o,s,d,b,E,D,q,ue,ne)=>(n._OrtCreateSessionOptions=S.N)(t,o,s,d,b,E,D,q,ue,ne),n._OrtAppendExecutionProvider=(t,o)=>(n._OrtAppendExecutionProvider=S.O)(t,o),n._OrtAddFreeDimensionOverride=(t,o,s)=>(n._OrtAddFreeDimensionOverride=S.P)(t,o,s),n._OrtAddSessionConfigEntry=(t,o,s)=>(n._OrtAddSessionConfigEntry=S.Q)(t,o,s),n._OrtReleaseSessionOptions=t=>(n._OrtReleaseSessionOptions=S.R)(t),n._OrtCreateSession=(t,o,s)=>(n._OrtCreateSession=S.S)(t,o,s),n._OrtReleaseSession=t=>(n._OrtReleaseSession=S.T)(t),n._OrtGetInputOutputCount=(t,o,s)=>(n._OrtGetInputOutputCount=S.U)(t,o,s),n._OrtGetInputName=(t,o)=>(n._OrtGetInputName=S.V)(t,o),n._OrtGetOutputName=(t,o)=>(n._OrtGetOutputName=S.W)(t,o),n._OrtFree=t=>(n._OrtFree=S.X)(t),n._OrtCreateTensor=(t,o,s,d,b,E)=>(n._OrtCreateTensor=S.Y)(t,o,s,d,b,E),n._OrtGetTensorData=(t,o,s,d,b)=>(n._OrtGetTensorData=S.Z)(t,o,s,d,b),n._OrtReleaseTensor=t=>(n._OrtReleaseTensor=S._)(t),n._OrtCreateRunOptions=(t,o,s,d)=>(n._OrtCreateRunOptions=S.$)(t,o,s,d),n._OrtAddRunConfigEntry=(t,o,s)=>(n._OrtAddRunConfigEntry=S.aa)(t,o,s),n._OrtReleaseRunOptions=t=>(n._OrtReleaseRunOptions=S.ba)(t),n._OrtCreateBinding=t=>(n._OrtCreateBinding=S.ca)(t),n._OrtBindInput=(t,o,s)=>(n._OrtBindInput=S.da)(t,o,s),n._OrtBindOutput=(t,o,s,d)=>(n._OrtBindOutput=S.ea)(t,o,s,d),n._OrtClearBoundOutputs=t=>(n._OrtClearBoundOutputs=S.fa)(t),n._OrtReleaseBinding=t=>(n._OrtReleaseBinding=S.ga)(t),n._OrtRunWithBinding=(t,o,s,d,b)=>(n._OrtRunWithBinding=S.ha)(t,o,s,d,b),n._OrtRun=(t,o,s,d,b,E,D,q)=>(n._OrtRun=S.ia)(t,o,s,d,b,E,D,q),n._OrtEndProfiling=t=>(n._OrtEndProfiling=S.ja)(t),n._OrtTrainingLoadCheckpoint=(t,o)=>(n._OrtTrainingLoadCheckpoint=S.ka)(t,o),n._OrtTrainingReleaseCheckpoint=t=>(n._OrtTrainingReleaseCheckpoint=S.la)(t),n._OrtTrainingCreateSession=(t,o,s,d,b,E,D,q)=>(n._OrtTrainingCreateSession=S.ma)(t,o,s,d,b,E,D,q),n._OrtTrainingLazyResetGrad=t=>(n._OrtTrainingLazyResetGrad=S.na)(t),n._OrtTrainingRunTrainStep=(t,o,s,d,b,E)=>(n._OrtTrainingRunTrainStep=S.oa)(t,o,s,d,b,E),n._OrtTrainingOptimizerStep=(t,o)=>(n._OrtTrainingOptimizerStep=S.pa)(t,o),n._OrtTrainingEvalStep=(t,o,s,d,b,E)=>(n._OrtTrainingEvalStep=S.qa)(t,o,s,d,b,E),n._OrtTrainingGetParametersSize=(t,o,s)=>(n._OrtTrainingGetParametersSize=S.ra)(t,o,s),n._OrtTrainingCopyParametersToBuffer=(t,o,s,d)=>(n._OrtTrainingCopyParametersToBuffer=S.sa)(t,o,s,d),n._OrtTrainingCopyParametersFromBuffer=(t,o,s,d)=>(n._OrtTrainingCopyParametersFromBuffer=S.ta)(t,o,s,d),n._OrtTrainingGetModelInputOutputCount=(t,o,s,d)=>(n._OrtTrainingGetModelInputOutputCount=S.ua)(t,o,s,d),n._OrtTrainingGetModelInputOutputName=(t,o,s,d)=>(n._OrtTrainingGetModelInputOutputName=S.va)(t,o,s,d),n._OrtTrainingReleaseSession=t=>(n._OrtTrainingReleaseSession=S.wa)(t);var Qe=n._malloc=t=>(Qe=n._malloc=S.xa)(t);n._free=t=>(n._free=S.ya)(t);var He=t=>(He=S.Aa)(t),Ze=()=>(Ze=S.Ba)(),ze=t=>(ze=S.Ca)(t),A=t=>(A=S.Da)(t);function Ge(t){t=Object.assign({},t);var o=d=>()=>d()>>>0,s=d=>b=>d(b)>>>0;return t.__errno_location=o(t.__errno_location),t.malloc=s(t.malloc),t.stackSave=o(t.stackSave),t.stackAlloc=s(t.stackAlloc),t}n.stackAlloc=A,n.stackSave=Ze,n.stackRestore=ze,n.UTF8ToString=Ce,n.stringToUTF8=(t,o,s)=>ke(t,X,o,s),n.lengthBytesUTF8=We;var Pe;re=function t(){Pe||Le(),Pe||(re=t)};function Le(){function t(){if(!Pe&&(Pe=!0,n.calledRun=!0,!he)){if(Se(be),y(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;){var o=n.postRun.shift();C.unshift(o)}Se(C)}}if(!(0<ce)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)T();Se(Oe),0<ce||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),t()},1)):t())}}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();return Le(),f.ready}})();typeof cr=="object"&&typeof Ct=="object"?Ct.exports=fr:typeof define=="function"&&define.amd&&define([],()=>fr)});var pr=rt(()=>{});var mr=rt(()=>{});var gr={};St(gr,{cpus:()=>en});var en,hr=vt(()=>{en=void 0});var br=rt((Or,Rt)=>{"use strict";var yr=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(f={}){function n(){return C.buffer!=z.buffer&&me(),z}function y(){return C.buffer!=z.buffer&&me(),se}function c(){return C.buffer!=z.buffer&&me(),we}function w(){return C.buffer!=z.buffer&&me(),_e}function g(){return C.buffer!=z.buffer&&me(),De}var i=f,I,F;i.ready=new Promise((e,r)=>{I=e,F=r});var x=Object.assign({},i),W="./this.program",P=(e,r)=>{throw r},L=typeof window=="object",k=typeof importScripts=="function",R=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_=i.ENVIRONMENT_IS_PTHREAD||!1,B="";function le(e){return i.locateFile?i.locateFile(e,B):B+e}var Be,pe,S;if(R){var he=(Tt(),nt(Et)),ye=(At(),nt(Mt));B=k?ye.dirname(B)+"/":__dirname+"/",Be=(r,a)=>(r=r.startsWith("file://")?new URL(r):ye.normalize(r),he.readFileSync(r,a?void 0:"utf8")),S=r=>(r=Be(r,!0),r.buffer||(r=new Uint8Array(r)),r),pe=(r,a,l,O=!0)=>{r=r.startsWith("file://")?new URL(r):ye.normalize(r),he.readFile(r,O?void 0:"utf8",(h,v)=>{h?l(h):a(O?v.buffer:v)})},!i.thisProgram&&1<process.argv.length&&(W=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),P=(r,a)=>{throw process.exitCode=r,a},i.inspect=()=>"[Emscripten Module object]";let e;try{e=pr()}catch(r){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),r}global.Worker=e.Worker}else(L||k)&&(k?B=self.location.href:typeof document<"u"&&document.currentScript&&(B=document.currentScript.src),typeof u<"u"&&u&&(B=u),B.indexOf("blob:")!==0?B=B.substr(0,B.replace(/[?#].*/,"").lastIndexOf("/")+1):B="",R||(Be=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},k&&(S=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),pe=(e,r,a)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):a()},l.onerror=a,l.send(null)}));R&&typeof performance>"u"&&(global.performance=mr().performance);var X=console.log.bind(console),M=console.error.bind(console);R&&(X=(...e)=>he.writeSync(1,e.join(" ")+`\n`),M=(...e)=>he.writeSync(2,e.join(" ")+`\n`));var Q=i.print||X,te=i.printErr||M;Object.assign(i,x),x=null,i.thisProgram&&(W=i.thisProgram),i.quit&&(P=i.quit);var Oe;i.wasmBinary&&(Oe=i.wasmBinary);var be=i.noExitRuntime||!0;typeof WebAssembly!="object"&&ge("no native wasm support detected");var C,T,ce,oe=!1,re,z,se,we,_e,De;function me(){var e=C.buffer;i.HEAP8=z=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=we=new Int32Array(e),i.HEAPU8=se=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=_e=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=De=new Float64Array(e)}var Ae=i.INITIAL_MEMORY||16777216;if(5242880<=Ae||ge("INITIAL_MEMORY should be larger than STACK_SIZE, was "+Ae+"! (STACK_SIZE=5242880)"),_)C=i.wasmMemory;else if(i.wasmMemory)C=i.wasmMemory;else if(C=new WebAssembly.Memory({initial:Ae/65536,maximum:65536,shared:!0}),!(C.buffer instanceof SharedArrayBuffer))throw te("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),R&&te("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");me(),Ae=C.buffer.byteLength;var ve,ie=[],Se=[],K=[],Z=0;function Ee(){return be||0<Z}var de=0,Ie=null,Ce=null;function We(){de++,i.monitorRunDependencies&&i.monitorRunDependencies(de)}function ke(){if(de--,i.monitorRunDependencies&&i.monitorRunDependencies(de),de==0&&(Ie!==null&&(clearInterval(Ie),Ie=null),Ce)){var e=Ce;Ce=null,e()}}function ge(e){throw i.onAbort&&i.onAbort(e),e="Aborted("+e+")",te(e),oe=!0,re=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),F(e),e}function je(e){return e.startsWith("data:application/octet-stream;base64,")}var Re;Re="ort-wasm-threaded.wasm",je(Re)||(Re=le(Re));function $e(e){if(e==Re&&Oe)return new Uint8Array(Oe);if(S)return S(e);throw"both async and sync fetching of the wasm failed"}function qe(e){if(!Oe&&(L||k)){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at \'"+e+"\'";return r.arrayBuffer()}).catch(()=>$e(e));if(pe)return new Promise((r,a)=>{pe(e,l=>r(new Uint8Array(l)),a)})}return Promise.resolve().then(()=>$e(e))}function Ve(e,r,a){return qe(e).then(l=>WebAssembly.instantiate(l,r)).then(l=>l).then(a,l=>{te("failed to asynchronously prepare wasm: "+l),ge(l)})}function Je(e,r){var a=Re;return Oe||typeof WebAssembly.instantiateStreaming!="function"||je(a)||a.startsWith("file://")||R||typeof fetch!="function"?Ve(a,e,r):fetch(a,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(O){return te("wasm streaming compile failed: "+O),te("falling back to ArrayBuffer instantiation"),Ve(a,e,r)}))}var Fe;function xe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}function Ne(e){e.terminate(),e.onmessage=()=>{}}function it(e){(e=A.La[e])||ge(),A.lb(e)}function Xe(e){var r=A.fb();if(!r)return 6;A.Oa.push(r),A.La[e.Na]=r,r.Na=e.Na;var a={cmd:"run",start_routine:e.mb,arg:e.eb,pthread_ptr:e.Na};return R&&r.unref(),r.postMessage(a,e.sb),0}var st=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Qe=(e,r,a)=>{r>>>=0;var l=r+a;for(a=r;e[a]&&!(a>=l);)++a;if(16<a-r&&e.buffer&&st)return st.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,a):e.subarray(r,a));for(l="";r<a;){var O=e[r++];if(O&128){var h=e[r++]&63;if((O&224)==192)l+=String.fromCharCode((O&31)<<6|h);else{var v=e[r++]&63;O=(O&240)==224?(O&15)<<12|h<<6|v:(O&7)<<18|h<<12|v<<6|e[r++]&63,65536>O?l+=String.fromCharCode(O):(O-=65536,l+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else l+=String.fromCharCode(O)}return l},He=(e,r)=>(e>>>=0)?Qe(y(),e,r):"";function Ze(e){if(_)return G(1,1,e);re=e,Ee()||(A.nb(),i.onExit&&i.onExit(e),oe=!0),P(e,new xe(e))}var ze=e=>{if(re=e,_)throw Pe(e),"unwind";Ze(e)},A={Ra:[],Oa:[],Za:[],La:{},Va:function(){_?A.hb():A.gb()},gb:function(){ie.unshift(()=>{We(),A.ib(()=>ke())})},hb:function(){A.receiveObjectTransfer=A.kb,A.threadInitTLS=A.Ya,A.setExitStatus=A.Xa,be=!1},Xa:function(e){re=e},xb:["$terminateWorker"],nb:function(){for(var e of A.Oa)Ne(e);for(e of A.Ra)Ne(e);A.Ra=[],A.Oa=[],A.La=[]},lb:function(e){var r=e.Na;delete A.La[r],A.Ra.push(e),A.Oa.splice(A.Oa.indexOf(e),1),e.Na=0,yt(r)},kb:function(){},Ya:function(){A.Za.forEach(e=>e())},jb:e=>new Promise(r=>{e.onmessage=h=>{h=h.data;var v=h.cmd;if(h.targetThread&&h.targetThread!=lt()){var Y=A.La[h.wb];Y?Y.postMessage(h,h.transferList):te(\'Internal error! Worker sent a message "\'+v+\'" to target pthread \'+h.targetThread+", but that thread no longer exists!")}else v==="checkMailbox"?ut():v==="spawnThread"?Xe(h):v==="cleanupThread"?it(h.thread):v==="killThread"?(h=h.thread,v=A.La[h],delete A.La[h],Ne(v),yt(h),A.Oa.splice(A.Oa.indexOf(v),1),v.Na=0):v==="cancelThread"?A.La[h.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,r(e)):v==="alert"?alert("Thread "+h.threadId+": "+h.text):h.target==="setimmediate"?e.postMessage(h):v==="callHandler"?i[h.handler](...h.args):v&&te("worker sent an unknown command "+v)},e.onerror=h=>{throw te("worker sent an error! "+h.filename+":"+h.lineno+": "+h.message),h},R&&(e.on("message",function(h){e.onmessage({data:h})}),e.on("error",function(h){e.onerror(h)}));var a=[],l=["onExit","onAbort","print","printErr"],O;for(O of l)i.hasOwnProperty(O)&&a.push(O);e.postMessage({cmd:"load",handlers:a,urlOrBlob:i.mainScriptUrlOrBlob||u,wasmMemory:C,wasmModule:ce})}),ib:function(e){e()},cb:function(){var e=le("ort-wasm-threaded.worker.js");e=new Worker(e),A.Ra.push(e)},fb:function(){return A.Ra.length==0&&(A.cb(),A.jb(A.Ra[0])),A.Ra.pop()}};i.PThread=A;var Ge=e=>{for(;0<e.length;)e.shift()(i)};i.establishStackSpace=function(){var e=lt(),r=c()[e+52>>2>>>0];e=c()[e+56>>2>>>0],or(r,r-e),ft(r)};function Pe(e){if(_)return G(2,0,e);ze(e)}var Le=[];i.invokeEntryPoint=function(e,r){var a=Le[e];a||(e>=Le.length&&(Le.length=e+1),Le[e]=a=ve.get(e)),e=a(r),Ee()?A.Xa(e):Ot(e)};function t(e){this.Ua=e-24,this.bb=function(r){w()[this.Ua+4>>2>>>0]=r},this.ab=function(r){w()[this.Ua+8>>2>>>0]=r},this.Va=function(r,a){this.$a(),this.bb(r),this.ab(a)},this.$a=function(){w()[this.Ua+16>>2>>>0]=0}}var o=0,s=0;function d(e,r,a,l){return _?G(3,1,e,r,a,l):b(e,r,a,l)}function b(e,r,a,l){if(e>>>=0,r>>>=0,a>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return te("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var O=[];return _&&O.length===0?d(e,r,a,l):(e={mb:a,Na:e,eb:l,sb:O},_?(e.ub="spawnThread",postMessage(e,O),0):Xe(e))}function E(e,r,a){return _?G(4,1,e,r,a):0}function D(e,r){if(_)return G(5,1,e,r)}var q=e=>{for(var r=0,a=0;a<e.length;++a){var l=e.charCodeAt(a);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++a):r+=3}return r},ue=(e,r,a,l)=>{if(a>>>=0,!(0<l))return 0;var O=a;l=a+l-1;for(var h=0;h<e.length;++h){var v=e.charCodeAt(h);if(55296<=v&&57343>=v){var Y=e.charCodeAt(++h);v=65536+((v&1023)<<10)|Y&1023}if(127>=v){if(a>=l)break;r[a++>>>0]=v}else{if(2047>=v){if(a+1>=l)break;r[a++>>>0]=192|v>>6}else{if(65535>=v){if(a+2>=l)break;r[a++>>>0]=224|v>>12}else{if(a+3>=l)break;r[a++>>>0]=240|v>>18,r[a++>>>0]=128|v>>12&63}r[a++>>>0]=128|v>>6&63}r[a++>>>0]=128|v&63}}return r[a>>>0]=0,a-O},ne=(e,r,a)=>ue(e,y(),r,a);function ae(e,r){if(_)return G(6,1,e,r)}function Ke(e,r,a){if(_)return G(7,1,e,r,a)}function et(e,r,a){return _?G(8,1,e,r,a):0}function p(e,r){if(_)return G(9,1,e,r)}function U(e,r,a){if(_)return G(10,1,e,r,a)}function H(e,r,a,l){if(_)return G(11,1,e,r,a,l)}function Te(e,r,a,l){if(_)return G(12,1,e,r,a,l)}function tt(e,r,a,l){if(_)return G(13,1,e,r,a,l)}function Ut(e){if(_)return G(14,1,e)}function Bt(e,r){if(_)return G(15,1,e,r)}function Wt(e,r,a){if(_)return G(16,1,e,r,a)}var Nr=e=>{if(!oe)try{if(e(),!Ee())try{_?Ot(re):ze(re)}catch(r){r instanceof xe||r=="unwind"||P(1,r)}}catch(r){r instanceof xe||r=="unwind"||P(1,r)}};function pt(e){e>>>=0,typeof Atomics.tb=="function"&&(Atomics.tb(c(),e>>2,e).value.then(ut),e+=128,Atomics.store(c(),e>>2,1))}i.__emscripten_thread_mailbox_await=pt;function ut(){var e=lt();e&&(pt(e),Nr(()=>nr()))}i.checkMailbox=ut;var Ye=e=>e%4===0&&(e%100!==0||e%400===0),kt=[0,31,60,91,121,152,182,213,244,274,305,335],Nt=[0,31,59,90,120,151,181,212,243,273,304,334];function Ht(e,r,a,l,O,h,v,Y){return _?G(17,1,e,r,a,l,O,h,v,Y):-52}function zt(e,r,a,l,O,h,v){if(_)return G(18,1,e,r,a,l,O,h,v)}var Gt=e=>{var r=q(e)+1,a=er(r);return a&&ne(e,a,r),a},Hr=e=>{var r=bt();return e=e(),ft(r),e};function G(e,r){var a=arguments.length-2,l=arguments;return Hr(()=>{for(var O=wt(8*a),h=O>>3,v=0;v<a;v++){var Y=l[2+v];g()[h+v>>>0]=Y}return rr(e,a,O,r)})}var mt=[],gt={},Yt=()=>{if(!ht){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:W||"./this.program"},r;for(r in gt)gt[r]===void 0?delete e[r]:e[r]=gt[r];var a=[];for(r in e)a.push(`${r}=${e[r]}`);ht=a}return ht},ht;function jt(e,r){if(_)return G(19,1,e,r);e>>>=0,r>>>=0;var a=0;return Yt().forEach(function(l,O){var h=r+a;for(O=w()[e+4*O>>2>>>0]=h,h=0;h<l.length;++h)n()[O++>>0>>>0]=l.charCodeAt(h);n()[O>>0>>>0]=0,a+=l.length+1}),0}function $t(e,r){if(_)return G(20,1,e,r);e>>>=0,r>>>=0;var a=Yt();w()[e>>2>>>0]=a.length;var l=0;return a.forEach(function(O){l+=O.length+1}),w()[r>>2>>>0]=l,0}function qt(e){return _?G(21,1,e):52}function Vt(e,r,a,l){return _?G(22,1,e,r,a,l):52}function Jt(e,r,a,l,O){return _?G(23,1,e,r,a,l,O):70}var zr=[null,[],[]];function Xt(e,r,a,l){if(_)return G(24,1,e,r,a,l);r>>>=0,a>>>=0,l>>>=0;for(var O=0,h=0;h<a;h++){var v=w()[r>>2>>>0],Y=w()[r+4>>2>>>0];r+=8;for(var Me=0;Me<Y;Me++){var ee=y()[v+Me>>>0],fe=zr[e];ee===0||ee===10?((e===1?Q:te)(Qe(fe,0)),fe.length=0):fe.push(ee)}O+=Y}return w()[l>>2>>>0]=O,0}var Qt=[31,29,31,30,31,30,31,31,30,31,30,31],Zt=[31,28,31,30,31,30,31,31,30,31,30,31];function Gr(e){var r=Array(q(e)+1);return ue(e,r,0,r.length),r}var Yr=(e,r)=>{n().set(e,r>>>0)};function Kt(e,r,a,l){function O(m,N,j){for(m=typeof m=="number"?m.toString():m||"";m.length<N;)m=j[0]+m;return m}function h(m,N){return O(m,N,"0")}function v(m,N){function j(lr){return 0>lr?-1:0<lr?1:0}var Ue;return(Ue=j(m.getFullYear()-N.getFullYear()))===0&&(Ue=j(m.getMonth()-N.getMonth()))===0&&(Ue=j(m.getDate()-N.getDate())),Ue}function Y(m){switch(m.getDay()){case 0:return new Date(m.getFullYear()-1,11,29);case 1:return m;case 2:return new Date(m.getFullYear(),0,3);case 3:return new Date(m.getFullYear(),0,2);case 4:return new Date(m.getFullYear(),0,1);case 5:return new Date(m.getFullYear()-1,11,31);case 6:return new Date(m.getFullYear()-1,11,30)}}function Me(m){var N=m.Pa;for(m=new Date(new Date(m.Qa+1900,0,1).getTime());0<N;){var j=m.getMonth(),Ue=(Ye(m.getFullYear())?Qt:Zt)[j];if(N>Ue-m.getDate())N-=Ue-m.getDate()+1,m.setDate(1),11>j?m.setMonth(j+1):(m.setMonth(0),m.setFullYear(m.getFullYear()+1));else{m.setDate(m.getDate()+N);break}}return j=new Date(m.getFullYear()+1,0,4),N=Y(new Date(m.getFullYear(),0,4)),j=Y(j),0>=v(N,m)?0>=v(j,m)?m.getFullYear()+1:m.getFullYear():m.getFullYear()-1}e>>>=0,r>>>=0,a>>>=0,l>>>=0;var ee=c()[l+40>>2>>>0];l={qb:c()[l>>2>>>0],pb:c()[l+4>>2>>>0],Sa:c()[l+8>>2>>>0],Wa:c()[l+12>>2>>>0],Ta:c()[l+16>>2>>>0],Qa:c()[l+20>>2>>>0],Ma:c()[l+24>>2>>>0],Pa:c()[l+28>>2>>>0],yb:c()[l+32>>2>>>0],ob:c()[l+36>>2>>>0],rb:ee?He(ee):""},a=He(a),ee={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var fe in ee)a=a.replace(new RegExp(fe,"g"),ee[fe]);var sr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ur="January February March April May June July August September October November December".split(" ");ee={"%a":m=>sr[m.Ma].substring(0,3),"%A":m=>sr[m.Ma],"%b":m=>ur[m.Ta].substring(0,3),"%B":m=>ur[m.Ta],"%C":m=>h((m.Qa+1900)/100|0,2),"%d":m=>h(m.Wa,2),"%e":m=>O(m.Wa,2," "),"%g":m=>Me(m).toString().substring(2),"%G":m=>Me(m),"%H":m=>h(m.Sa,2),"%I":m=>(m=m.Sa,m==0?m=12:12<m&&(m-=12),h(m,2)),"%j":m=>{for(var N=0,j=0;j<=m.Ta-1;N+=(Ye(m.Qa+1900)?Qt:Zt)[j++]);return h(m.Wa+N,3)},"%m":m=>h(m.Ta+1,2),"%M":m=>h(m.pb,2),"%n":()=>`\n`,"%p":m=>0<=m.Sa&&12>m.Sa?"AM":"PM","%S":m=>h(m.qb,2),"%t":()=>"	","%u":m=>m.Ma||7,"%U":m=>h(Math.floor((m.Pa+7-m.Ma)/7),2),"%V":m=>{var N=Math.floor((m.Pa+7-(m.Ma+6)%7)/7);if(2>=(m.Ma+371-m.Pa-2)%7&&N++,N)N==53&&(j=(m.Ma+371-m.Pa)%7,j==4||j==3&&Ye(m.Qa)||(N=1));else{N=52;var j=(m.Ma+7-m.Pa-1)%7;(j==4||j==5&&Ye(m.Qa%400-1))&&N++}return h(N,2)},"%w":m=>m.Ma,"%W":m=>h(Math.floor((m.Pa+7-(m.Ma+6)%7)/7),2),"%y":m=>(m.Qa+1900).toString().substring(2),"%Y":m=>m.Qa+1900,"%z":m=>{m=m.ob;var N=0<=m;return m=Math.abs(m)/60,(N?"+":"-")+("0000"+(m/60*100+m%60)).slice(-4)},"%Z":m=>m.rb,"%%":()=>"%"},a=a.replace(/%%/g,"\\0\\0");for(fe in ee)a.includes(fe)&&(a=a.replace(new RegExp(fe,"g"),ee[fe](l)));return a=a.replace(/\\0\\0/g,"%"),fe=Gr(a),fe.length>r?0:(Yr(fe,e),fe.length-1)}A.Va();var jr=[null,Ze,Pe,d,E,D,ae,Ke,et,p,U,H,Te,tt,Ut,Bt,Wt,Ht,zt,jt,$t,qt,Vt,Jt,Xt],$r={b:function(e,r,a){throw e>>>=0,new t(e).Va(r>>>0,a>>>0),o=e,s++,o},N:function(e){tr(e>>>0,!k,1,!L,131072,!1),A.Ya()},j:function(e){e>>>=0,_?postMessage({cmd:"cleanupThread",thread:e}):it(e)},I:b,h:E,T:D,D:ae,F:Ke,U:et,R:p,J:U,Q:H,n:Te,E:tt,B:Ut,S:Bt,C:Wt,q:()=>!0,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(()=>ut()):_?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=A.La[e])&&e.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:pt,p:function(e){R&&A.La[e>>>0].ref()},t:function(e,r,a){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,a>>>=0,e=new Date(1e3*e),c()[a>>2>>>0]=e.getUTCSeconds(),c()[a+4>>2>>>0]=e.getUTCMinutes(),c()[a+8>>2>>>0]=e.getUTCHours(),c()[a+12>>2>>>0]=e.getUTCDate(),c()[a+16>>2>>>0]=e.getUTCMonth(),c()[a+20>>2>>>0]=e.getUTCFullYear()-1900,c()[a+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,c()[a+28>>2>>>0]=e},u:function(e,r,a){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,a>>>=0,e=new Date(1e3*e),c()[a>>2>>>0]=e.getSeconds(),c()[a+4>>2>>>0]=e.getMinutes(),c()[a+8>>2>>>0]=e.getHours(),c()[a+12>>2>>>0]=e.getDate(),c()[a+16>>2>>>0]=e.getMonth(),c()[a+20>>2>>>0]=e.getFullYear()-1900,c()[a+24>>2>>>0]=e.getDay(),r=(Ye(e.getFullYear())?kt:Nt)[e.getMonth()]+e.getDate()-1|0,c()[a+28>>2>>>0]=r,c()[a+36>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,c()[a+32>>2>>>0]=e},v:function(e){e>>>=0;var r=new Date(c()[e+20>>2>>>0]+1900,c()[e+16>>2>>>0],c()[e+12>>2>>>0],c()[e+8>>2>>>0],c()[e+4>>2>>>0],c()[e>>2>>>0],0),a=c()[e+32>>2>>>0],l=r.getTimezoneOffset(),O=new Date(r.getFullYear(),6,1).getTimezoneOffset(),h=new Date(r.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(h,O);return 0>a?c()[e+32>>2>>>0]=+(O!=h&&v==l):0<a!=(v==l)&&(O=Math.max(h,O),r.setTime(r.getTime()+6e4*((0<a?v:O)-l))),c()[e+24>>2>>>0]=r.getDay(),a=(Ye(r.getFullYear())?kt:Nt)[r.getMonth()]+r.getDate()-1|0,c()[e+28>>2>>>0]=a,c()[e>>2>>>0]=r.getSeconds(),c()[e+4>>2>>>0]=r.getMinutes(),c()[e+8>>2>>>0]=r.getHours(),c()[e+12>>2>>>0]=r.getDate(),c()[e+16>>2>>>0]=r.getMonth(),c()[e+20>>2>>>0]=r.getYear(),e=r.getTime()/1e3,ar((Fe=e,1<=+Math.abs(Fe)?0<Fe?+Math.floor(Fe/4294967296)>>>0:~~+Math.ceil((Fe-+(~~Fe>>>0))/4294967296)>>>0:0)),e>>>0},r:Ht,s:zt,y:function(e,r,a){function l(ee){return(ee=ee.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?ee[1]:"GMT"}e>>>=0,r>>>=0,a>>>=0;var O=new Date().getFullYear(),h=new Date(O,0,1),v=new Date(O,6,1);O=h.getTimezoneOffset();var Y=v.getTimezoneOffset(),Me=Math.max(O,Y);w()[e>>2>>>0]=60*Me,c()[r>>2>>>0]=+(O!=Y),e=l(h),r=l(v),e=Gt(e),r=Gt(r),Y<O?(w()[a>>2>>>0]=e,w()[a+4>>2>>>0]=r):(w()[a>>2>>>0]=r,w()[a+4>>2>>>0]=e)},c:()=>{ge("")},k:function(){},i:function(){return Date.now()},o:()=>{throw Z+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return R?(hr(),nt(gr)).cpus().length:navigator.hardwareConcurrency},K:function(e,r,a,l){for(A.vb=r>>>0,mt.length=a,r=l>>>0>>3,l=0;l<a;l++)mt[l]=g()[r+l>>>0];return jr[e].apply(null,mt)},x:function(e){e>>>=0;var r=y().length;if(e<=r||4294901760<e)return!1;for(var a=1;4>=a;a*=2){var l=r*(1+.2/a);l=Math.min(l,e+100663296);var O=Math;l=Math.max(e,l);e:{O=O.min.call(O,4294901760,l+(65536-l%65536)%65536)-C.buffer.byteLength+65535>>>16;try{C.grow(O),me();var h=1;break e}catch{}h=void 0}if(h)return!0}return!1},O:jt,P:$t,H:ze,g:qt,m:Vt,w:Jt,l:Xt,a:C||i.wasmMemory,G:Kt,d:function(e,r,a,l){return Kt(e>>>0,r>>>0,a>>>0,l>>>0)}};(function(){function e(a,l){return a=a.exports,T=a=qr(a),A.Za.push(T.ya),ve=T.za,Se.unshift(T.V),ce=l,ke(),a}var r={a:$r};if(We(),i.instantiateWasm)try{return i.instantiateWasm(r,e)}catch(a){te("Module.instantiateWasm callback failed with error: "+a),F(a)}return Je(r,function(a){e(a.instance,a.module)}).catch(F),{}})(),i._OrtInit=(e,r)=>(i._OrtInit=T.W)(e,r),i._OrtGetLastError=(e,r)=>(i._OrtGetLastError=T.X)(e,r),i._OrtCreateSessionOptions=(e,r,a,l,O,h,v,Y,Me,ee)=>(i._OrtCreateSessionOptions=T.Y)(e,r,a,l,O,h,v,Y,Me,ee),i._OrtAppendExecutionProvider=(e,r)=>(i._OrtAppendExecutionProvider=T.Z)(e,r),i._OrtAddFreeDimensionOverride=(e,r,a)=>(i._OrtAddFreeDimensionOverride=T._)(e,r,a),i._OrtAddSessionConfigEntry=(e,r,a)=>(i._OrtAddSessionConfigEntry=T.$)(e,r,a),i._OrtReleaseSessionOptions=e=>(i._OrtReleaseSessionOptions=T.aa)(e),i._OrtCreateSession=(e,r,a)=>(i._OrtCreateSession=T.ba)(e,r,a),i._OrtReleaseSession=e=>(i._OrtReleaseSession=T.ca)(e),i._OrtGetInputOutputCount=(e,r,a)=>(i._OrtGetInputOutputCount=T.da)(e,r,a),i._OrtGetInputName=(e,r)=>(i._OrtGetInputName=T.ea)(e,r),i._OrtGetOutputName=(e,r)=>(i._OrtGetOutputName=T.fa)(e,r),i._OrtFree=e=>(i._OrtFree=T.ga)(e),i._OrtCreateTensor=(e,r,a,l,O,h)=>(i._OrtCreateTensor=T.ha)(e,r,a,l,O,h),i._OrtGetTensorData=(e,r,a,l,O)=>(i._OrtGetTensorData=T.ia)(e,r,a,l,O),i._OrtReleaseTensor=e=>(i._OrtReleaseTensor=T.ja)(e),i._OrtCreateRunOptions=(e,r,a,l)=>(i._OrtCreateRunOptions=T.ka)(e,r,a,l),i._OrtAddRunConfigEntry=(e,r,a)=>(i._OrtAddRunConfigEntry=T.la)(e,r,a),i._OrtReleaseRunOptions=e=>(i._OrtReleaseRunOptions=T.ma)(e),i._OrtCreateBinding=e=>(i._OrtCreateBinding=T.na)(e),i._OrtBindInput=(e,r,a)=>(i._OrtBindInput=T.oa)(e,r,a),i._OrtBindOutput=(e,r,a,l)=>(i._OrtBindOutput=T.pa)(e,r,a,l),i._OrtClearBoundOutputs=e=>(i._OrtClearBoundOutputs=T.qa)(e),i._OrtReleaseBinding=e=>(i._OrtReleaseBinding=T.ra)(e),i._OrtRunWithBinding=(e,r,a,l,O)=>(i._OrtRunWithBinding=T.sa)(e,r,a,l,O),i._OrtRun=(e,r,a,l,O,h,v,Y)=>(i._OrtRun=T.ta)(e,r,a,l,O,h,v,Y),i._OrtEndProfiling=e=>(i._OrtEndProfiling=T.ua)(e);var lt=i._pthread_self=()=>(lt=i._pthread_self=T.va)(),er=i._malloc=e=>(er=i._malloc=T.wa)(e);i._free=e=>(i._free=T.xa)(e),i.__emscripten_tls_init=()=>(i.__emscripten_tls_init=T.ya)();var tr=i.__emscripten_thread_init=(e,r,a,l,O,h)=>(tr=i.__emscripten_thread_init=T.Aa)(e,r,a,l,O,h);i.__emscripten_thread_crashed=()=>(i.__emscripten_thread_crashed=T.Ba)();var rr=(e,r,a,l)=>(rr=T.Ca)(e,r,a,l),yt=e=>(yt=T.Da)(e),Ot=i.__emscripten_thread_exit=e=>(Ot=i.__emscripten_thread_exit=T.Ea)(e),nr=i.__emscripten_check_mailbox=()=>(nr=i.__emscripten_check_mailbox=T.Fa)(),ar=e=>(ar=T.Ga)(e),or=(e,r)=>(or=T.Ha)(e,r),bt=()=>(bt=T.Ia)(),ft=e=>(ft=T.Ja)(e),wt=e=>(wt=T.Ka)(e);function qr(e){e=Object.assign({},e);var r=l=>()=>l()>>>0,a=l=>O=>l(O)>>>0;return e.__errno_location=r(e.__errno_location),e.pthread_self=r(e.pthread_self),e.malloc=a(e.malloc),e.stackSave=r(e.stackSave),e.stackAlloc=a(e.stackAlloc),e}i.keepRuntimeAlive=Ee,i.wasmMemory=C,i.stackAlloc=wt,i.stackSave=bt,i.stackRestore=ft,i.UTF8ToString=He,i.stringToUTF8=ne,i.lengthBytesUTF8=q,i.ExitStatus=xe,i.PThread=A;var ct;Ce=function e(){ct||ir(),ct||(Ce=e)};function ir(){function e(){if(!ct&&(ct=!0,i.calledRun=!0,!oe)&&(_||Ge(Se),I(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),!_)){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;){var r=i.postRun.shift();K.unshift(r)}Ge(K)}}if(!(0<de))if(_)I(i),_||Ge(Se),startWorker(i);else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)ie.unshift(i.preRun.shift());Ge(ie),0<de||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),e()},1)):e())}}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return ir(),f.ready}})();typeof Or=="object"&&typeof Rt=="object"?Rt.exports=yr:typeof define=="function"&&define.amd&&define([],()=>yr)});var wr=rt((On,tn)=>{tn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>(0,eval)(fs.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason??e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err("worker.js received unknown command "+e.data.cmd),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed&&Module.__emscripten_thread_crashed(),a}}self.onmessage=handleMessage;\\n\'});var vr;vr=dr();var rn=br(),Dt,It=!1,dt=!1,_r=!1,nn=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},on=(u,f)=>u?"ort-training-wasm-simd.wasm":f?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Sr=async u=>{if(It)return Promise.resolve();if(dt)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(_r)throw new Error("previous call to \'initializeWebAssembly()\' failed.");dt=!0;let f=u.initTimeout,n=u.numThreads,y=u.simd,c=n>1&&nn(),w=y&&an(),g=u.wasmPaths,i=typeof g=="string"?g:void 0,I=on(w,c),F=typeof g=="object"?g[I]:void 0,x=!1,W=[];if(f>0&&W.push(new Promise(P=>{setTimeout(()=>{x=!0,P()},f)})),W.push(new Promise((P,L)=>{let k=c?rn:vr,R={locateFile:(_,B)=>c&&_.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([wr()],{type:"text/javascript"})):_.endsWith(".wasm")?F||(i??B)+I:B+_};if(c)if(typeof Blob>"u")R.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let _=`var ortWasmThreaded=${k.toString()};`;R.mainScriptUrlOrBlob=new Blob([_],{type:"text/javascript"})}k(R).then(_=>{dt=!1,It=!0,Dt=_,P()},_=>{dt=!1,_r=!0,L(_)})})),await Promise.race(W),x)throw new Error(`WebAssembly backend initializing failed due to timeout: ${f}ms`)},V=()=>{if(It&&Dt)return Dt;throw new Error("WebAssembly is not initialized yet.")};var J=(u,f)=>{let n=V(),y=n.lengthBytesUTF8(u)+1,c=n._malloc(y);return n.stringToUTF8(u,c,y),f.push(c),c},at=(u,f,n,y)=>{if(typeof u=="object"&&u!==null){if(n.has(u))throw new Error("Circular reference in options");n.add(u)}Object.entries(u).forEach(([c,w])=>{let g=f?f+c:c;if(typeof w=="object")at(w,g+".",n,y);else if(typeof w=="string"||typeof w=="number")y(g,w.toString());else if(typeof w=="boolean")y(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},$=u=>{let f=V(),n=f.stackSave();try{let y=f.stackAlloc(8);f._OrtGetLastError(y,y+4);let c=f.HEAP32[y/4],w=f.HEAPU32[y/4+1],g=w?f.UTF8ToString(w):"";throw new Error(`${u} ERROR_CODE: ${c}, ERROR_MESSAGE: ${g}`)}finally{f.stackRestore(n)}};var Er=u=>{let f=V(),n=0,y=[],c=u||{};try{if(u?.logSeverityLevel===void 0)c.logSeverityLevel=2;else if(typeof u.logSeverityLevel!="number"||!Number.isInteger(u.logSeverityLevel)||u.logSeverityLevel<0||u.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${u.logSeverityLevel}`);if(u?.logVerbosityLevel===void 0)c.logVerbosityLevel=0;else if(typeof u.logVerbosityLevel!="number"||!Number.isInteger(u.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${u.logVerbosityLevel}`);u?.terminate===void 0&&(c.terminate=!1);let w=0;return u?.tag!==void 0&&(w=J(u.tag,y)),n=f._OrtCreateRunOptions(c.logSeverityLevel,c.logVerbosityLevel,!!c.terminate,w),n===0&&$("Can\'t create run options."),u?.extra!==void 0&&at(u.extra,"",new WeakSet,(g,i)=>{let I=J(g,y),F=J(i,y);f._OrtAddRunConfigEntry(n,I,F)!==0&&$(`Can\'t set a run config entry: ${g} - ${i}.`)}),[n,y]}catch(w){throw n!==0&&f._OrtReleaseRunOptions(n),y.forEach(g=>f._free(g)),w}};var sn=u=>{switch(u){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${u}`)}},un=u=>{switch(u){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${u}`)}},ln=u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});let f=u.extra.session;f.use_ort_model_bytes_directly||(f.use_ort_model_bytes_directly="1"),u.executionProviders&&u.executionProviders.some(n=>(typeof n=="string"?n:n.name)==="webgpu")&&(u.enableMemPattern=!1)},fn=(u,f,n)=>{for(let y of f){let c=typeof y=="string"?y:y.name;switch(c){case"xnnpack":c="XNNPACK";break;case"webnn":if(c="WEBNN",typeof y!="string"){let g=y;if(g?.deviceType){let i=J("deviceType",n),I=J(g.deviceType,n);V()._OrtAddSessionConfigEntry(u,i,I)!==0&&$(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let i=g.numThreads;(typeof i!="number"||!Number.isInteger(i)||i<0)&&(i=0);let I=J("numThreads",n),F=J(i.toString(),n);V()._OrtAddSessionConfigEntry(u,I,F)!==0&&$(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let i=J("powerPreference",n),I=J(g.powerPreference,n);V()._OrtAddSessionConfigEntry(u,i,I)!==0&&$(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(c="JS",typeof y!="string"){let g=y;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let i=J("preferredLayout",n),I=J(g.preferredLayout,n);V()._OrtAddSessionConfigEntry(u,i,I)!==0&&$(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${c}`)}let w=J(c,n);V()._OrtAppendExecutionProvider(u,w)!==0&&$(`Can\'t append execution provider: ${c}.`)}},Tr=u=>{let f=V(),n=0,y=[],c=u||{};ln(c);try{let w=sn(c.graphOptimizationLevel??"all"),g=un(c.executionMode??"sequential"),i=typeof c.logId=="string"?J(c.logId,y):0,I=c.logSeverityLevel??2;if(!Number.isInteger(I)||I<0||I>4)throw new Error(`log serverity level is not valid: ${I}`);let F=c.logVerbosityLevel??0;if(!Number.isInteger(F)||F<0||F>4)throw new Error(`log verbosity level is not valid: ${F}`);let x=typeof c.optimizedModelFilePath=="string"?J(c.optimizedModelFilePath,y):0;if(n=f._OrtCreateSessionOptions(w,!!c.enableCpuMemArena,!!c.enableMemPattern,g,!!c.enableProfiling,0,i,I,F,x),n===0&&$("Can\'t create session options."),c.executionProviders&&fn(n,c.executionProviders,y),c.freeDimensionOverrides)for(let[W,P]of Object.entries(c.freeDimensionOverrides)){if(typeof W!="string")throw new Error(`free dimension override name must be a string: ${W}`);if(typeof P!="number"||!Number.isInteger(P)||P<0)throw new Error(`free dimension override value must be a non-negative integer: ${P}`);let L=J(W,y);f._OrtAddFreeDimensionOverride(n,L,P)!==0&&$(`Can\'t set a free dimension override: ${W} - ${P}.`)}return c.extra!==void 0&&at(c.extra,"",new WeakSet,(W,P)=>{let L=J(W,y),k=J(P,y);f._OrtAddSessionConfigEntry(n,L,k)!==0&&$(`Can\'t set a session config entry: ${W} - ${P}.`)}),[n,y]}catch(w){throw n!==0&&f._OrtReleaseSessionOptions(n),y.forEach(g=>f._free(g)),w}};var Ft=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},Mr=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},xt=u=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][u],Ar=u=>{switch(u){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}},Cr=u=>{switch(u){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${u}`)}},Rr=u=>u==="float32"||u==="int32"||u==="int64"||u==="bool"||u==="float16"||u==="uint32",Dr=u=>{switch(u){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${u}`)}};var Fr=!1,cn=u=>{let f=V(),n=f.stackSave();try{let y=f.stackAlloc(8);return f._OrtGetInputOutputCount(u,y,y+4)!==0&&$("Can\'t get session input/output count."),[f.HEAP32[y/4],f.HEAP32[y/4+1]]}finally{f.stackRestore(n)}},dn=(u,f)=>{V()._OrtInit(u,f)!==0&&$("Can\'t initialize onnxruntime.")},xr=async u=>{dn(u.wasm.numThreads,Cr(u.logLevel)),Fr=!0},ot=new Map,Pr=()=>Fr,Pt=u=>{let f=V(),n=f._malloc(u.byteLength);if(n===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${u.byteLength}.`);return f.HEAPU8.set(u,n),[n,u.byteLength]},Lt=(u,f)=>{let n=V(),y=0,c=0,w=0,g=[],i=[],I=[];try{[c,g]=Tr(f),y=n._OrtCreateSession(u[0],u[1],c),y===0&&$("Can\'t create a session.");let[F,x]=cn(y),W=[],P=[],L=[];for(let R=0;R<F;R++){let _=n._OrtGetInputName(y,R);_===0&&$("Can\'t get an input name."),i.push(_),W.push(n.UTF8ToString(_))}for(let R=0;R<x;R++){let _=n._OrtGetOutputName(y,R);_===0&&$("Can\'t get an output name."),I.push(_);let B=n.UTF8ToString(_);P.push(B)}let k=null;return ot.set(y,[y,i,I,k]),[y,W,P]}catch(F){throw i.forEach(x=>n._OrtFree(x)),I.forEach(x=>n._OrtFree(x)),w!==0&&n._OrtReleaseBinding(w),y!==0&&n._OrtReleaseSession(y),F}finally{n._free(u[0]),c!==0&&n._OrtReleaseSessionOptions(c),g.forEach(F=>n._free(F))}},Lr=(u,f)=>{let n=Pt(u);return Lt(n,f)},Ur=u=>{let f=V(),n=ot.get(u);if(!n)throw new Error(`cannot release session. invalid session id: ${u}`);let[y,c,w,g]=n;g&&f._OrtReleaseBinding(g.handle),f.jsepUnregisterBuffers?.(u),c.forEach(i=>f._OrtFree(i)),w.forEach(i=>f._OrtFree(i)),f._OrtReleaseSession(y),ot.delete(u)},Ir=(u,f,n,y,c)=>{if(!u){f.push(0);return}let w=V(),g=u[0],i=u[1],I=u[3],F,x;if(g==="string"&&I==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(I==="gpu-buffer"){let L=u[2].gpuBuffer,k=xt(Ft(g));x=i.reduce((R,_)=>R*_,1)*k,F=w.jsepRegisterBuffer(y,c,L,x)}else{let L=u[2];if(Array.isArray(L)){x=4*L.length,F=w._malloc(x),n.push(F);let k=F/4;for(let R=0;R<L.length;R++){if(typeof L[R]!="string")throw new TypeError(`tensor data at index ${R} is not a string`);w.HEAPU32[k++]=J(L[R],n)}}else x=L.byteLength,F=w._malloc(x),n.push(F),w.HEAPU8.set(new Uint8Array(L.buffer,L.byteOffset,x),F)}let W=w.stackSave(),P=w.stackAlloc(4*i.length);try{let L=P/4;i.forEach(R=>w.HEAP32[L++]=R);let k=w._OrtCreateTensor(Ft(g),F,x,P,i.length,Dr(I));k===0&&$(`Can\'t create tensor for input/output. session=${y}, index=${c}.`),f.push(k)}finally{w.stackRestore(W)}},Br=async(u,f,n,y,c,w)=>{let g=V(),i=ot.get(u);if(!i)throw new Error(`cannot run inference. invalid session id: ${u}`);let[I,F,x,W]=i,P=f.length,L=y.length,k=0,R=[],_=[],B=[],le=[],Be=g.stackSave(),pe=g.stackAlloc(P*4),S=g.stackAlloc(P*4),he=g.stackAlloc(L*4),ye=g.stackAlloc(L*4);try{[k,R]=Er(w);for(let C=0;C<P;C++)Ir(n[C],_,le,u,f[C]);for(let C=0;C<L;C++)Ir(c[C],B,le,u,P+y[C]);let X=pe/4,M=S/4,Q=he/4,te=ye/4;for(let C=0;C<P;C++)g.HEAPU32[X++]=_[C],g.HEAPU32[M++]=F[f[C]];for(let C=0;C<L;C++)g.HEAPU32[Q++]=B[C],g.HEAPU32[te++]=x[y[C]];let Oe;Oe=await g._OrtRun(I,S,pe,P,ye,L,he,k),Oe!==0&&$("failed to call OrtRun().");let be=[];for(let C=0;C<L;C++){let T=g.HEAPU32[he/4+C];if(T===B[C]){be.push(c[C]);continue}let ce=g.stackSave(),oe=g.stackAlloc(4*4),re=!1,z,se=0;try{g._OrtGetTensorData(T,oe,oe+4,oe+8,oe+12)!==0&&$(`Can\'t access output tensor data on index ${C}.`);let _e=oe/4,De=g.HEAPU32[_e++];se=g.HEAPU32[_e++];let me=g.HEAPU32[_e++],Ae=g.HEAPU32[_e++],ve=[];for(let K=0;K<Ae;K++)ve.push(g.HEAPU32[me/4+K]);g._OrtFree(me);let ie=ve.reduce((K,Z)=>K*Z,1);z=Mr(De);let Se=W?.outputPreferredLocations[y[C]];if(z==="string"){if(Se==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let K=[],Z=se/4;for(let Ee=0;Ee<ie;Ee++){let de=g.HEAPU32[Z++],Ie=Ee===ie-1?void 0:g.HEAPU32[Z]-de;K.push(g.UTF8ToString(de,Ie))}be.push([z,ve,K,"cpu"])}else if(Se==="gpu-buffer"&&ie>0){let K=g.jsepGetBuffer(se),Z=xt(De);if(Z===void 0||!Rr(z))throw new Error(`Unsupported data type: ${z}`);re=!0,be.push([z,ve,{gpuBuffer:K,download:g.jsepCreateDownloader(K,ie*Z,z),dispose:()=>{g._OrtReleaseTensor(T)}},"gpu-buffer"])}else{let K=Ar(z),Z=new K(ie);new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength).set(g.HEAPU8.subarray(se,se+Z.byteLength)),be.push([z,ve,Z,"cpu"])}}finally{g.stackRestore(ce),z==="string"&&se&&g._free(se),re||g._OrtReleaseTensor(T)}}return W&&g._OrtClearBoundOutputs(W.handle),be}finally{g.stackRestore(Be),_.forEach(X=>g._OrtReleaseTensor(X)),B.forEach(X=>g._OrtReleaseTensor(X)),le.forEach(X=>g._free(X)),k!==0&&g._OrtReleaseRunOptions(k),R.forEach(X=>g._free(X))}},Wr=u=>{let f=V(),n=ot.get(u);if(!n)throw new Error("invalid session id");let y=n[0],c=f._OrtEndProfiling(y);c===0&&$("Can\'t get an profile file name."),f._OrtFree(c)},kr=u=>{let f=[];for(let n of u){let y=n[2];!Array.isArray(y)&&"buffer"in y&&f.push(y.buffer)}return f};self.onmessage=u=>{switch(u.data.type){case"init-wasm":try{Sr(u.data.in).then(()=>postMessage({type:"init-wasm"}),f=>postMessage({type:"init-wasm",err:f}))}catch(f){postMessage({type:"init-wasm",err:f})}break;case"init-ort":try{xr(u.data.in).then(()=>postMessage({type:"init-ort"}),f=>postMessage({type:"init-ort",err:f}))}catch(f){postMessage({type:"init-ort",err:f})}break;case"create_allocate":try{let{model:f}=u.data.in,n=Pt(f);postMessage({type:"create_allocate",out:n})}catch(f){postMessage({type:"create_allocate",err:f})}break;case"create_finalize":try{let{modeldata:f,options:n}=u.data.in,y=Lt(f,n);postMessage({type:"create_finalize",out:y})}catch(f){postMessage({type:"create_finalize",err:f})}break;case"create":try{let{model:f,options:n}=u.data.in,y=Lr(f,n);postMessage({type:"create",out:y})}catch(f){postMessage({type:"create",err:f})}break;case"release":try{Ur(u.data.in),postMessage({type:"release"})}catch(f){postMessage({type:"release",err:f})}break;case"run":try{let{sessionId:f,inputIndices:n,inputs:y,outputIndices:c,options:w}=u.data.in;Br(f,n,y,c,new Array(c.length).fill(null),w).then(g=>{g.some(i=>i[3]!=="cpu")?postMessage({type:"run",err:"Proxy does not support non-cpu tensor location."}):postMessage({type:"run",out:g},kr(g))},g=>{postMessage({type:"run",err:g})})}catch(f){postMessage({type:"run",err:f})}break;case"end-profiling":try{let f=u.data.in;Wr(f),postMessage({type:"end-profiling"})}catch(f){postMessage({type:"end-profiling",err:f})}break;case"is-ort-env-initialized":try{let f=Pr();postMessage({type:"is-ort-env-initialized",out:f})}catch(f){postMessage({type:"is-ort-env-initialized",err:f})}break;default:}};})();\n'});var Le,be,Zt,Lr,Hr,Ir,Cr,Pr,xr,Dr,Ur,kr,Fr,Br,Ge,yo,Qt,ya,ba,wa,Oa,Nr,va,_a,Ta,Sa,zr=N(()=>{"use strict";We();Jt();Je();Le=()=>!!$.wasm.proxy&&typeof document<"u",Zt=!1,Lr=!1,Hr=!1,Pr=[],xr=[],Dr=[],Ur=[],kr=[],Fr=[],Br=[],Ge=()=>{if(Zt||!Lr||Hr||!be)throw new Error("worker not ready")},yo=n=>{switch(n.data.type){case"init-wasm":Zt=!1,n.data.err?(Hr=!0,Ir[1](n.data.err)):(Lr=!0,Ir[0]());break;case"init-ort":n.data.err?Cr[1](n.data.err):Cr[0]();break;case"create_allocate":n.data.err?Pr.shift()[1](n.data.err):Pr.shift()[0](n.data.out);break;case"create_finalize":n.data.err?xr.shift()[1](n.data.err):xr.shift()[0](n.data.out);break;case"create":n.data.err?Dr.shift()[1](n.data.err):Dr.shift()[0](n.data.out);break;case"release":n.data.err?Ur.shift()[1](n.data.err):Ur.shift()[0]();break;case"run":n.data.err?kr.shift()[1](n.data.err):kr.shift()[0](n.data.out);break;case"end-profiling":n.data.err?Fr.shift()[1](n.data.err):Fr.shift()[0]();break;case"is-ort-env-initialized":n.data.err?Br.shift()[1](n.data.err):Br.shift()[0](n.data.out);break;default:}},Qt=typeof document<"u"?document?.currentScript?.src:void 0,ya=async()=>{if(Le()){if(Lr)return;if(Zt)throw new Error("multiple calls to 'initWasm()' detected.");if(Hr)throw new Error("previous call to 'initWasm()' failed.");return Zt=!0,$.wasm.wasmPaths===void 0&&Qt&&Qt.indexOf("blob:")!==0&&($.wasm.wasmPaths=Qt.substr(0,+Qt.lastIndexOf("/")+1)),new Promise((n,r)=>{be?.terminate();let e=URL.createObjectURL(new Blob([ga()],{type:"text/javascript"}));be=new Worker(e,{name:"ort-wasm-proxy-worker"}),be.onerror=o=>r(o),be.onmessage=yo,URL.revokeObjectURL(e),Ir=[n,r];let u={type:"init-wasm",in:$.wasm};be.postMessage(u)})}else return ua($.wasm)},ba=async n=>{if(Le())return Ge(),new Promise((r,e)=>{Cr=[r,e];let u={type:"init-ort",in:n};be.postMessage(u)});await qt(n)},wa=async n=>Le()?(Ge(),new Promise((r,e)=>{Pr.push([r,e]);let u={type:"create_allocate",in:{model:n}};be.postMessage(u,[n.buffer])})):Mt(n),Oa=async(n,r)=>Le()?(Ge(),new Promise((e,u)=>{xr.push([e,u]);let o={type:"create_finalize",in:{modeldata:n,options:r}};be.postMessage(o)})):Rr(n,r),Nr=async(n,r)=>{if(Le()){if(r?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Ge(),new Promise((e,u)=>{Dr.push([e,u]);let o={type:"create",in:{model:n,options:r}};be.postMessage(o,[n.buffer])})}else return ca(n,r)},va=async n=>{if(Le())return Ge(),new Promise((r,e)=>{Ur.push([r,e]);let u={type:"release",in:n};be.postMessage(u)});da(n)},_a=async(n,r,e,u,o,d)=>{if(Le()){if(e.some(f=>f[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(o.some(f=>f))throw new Error("pre-allocated output tensor is not supported for proxy.");return Ge(),new Promise((f,a)=>{kr.push([f,a]);let h=e,m={type:"run",in:{sessionId:n,inputIndices:r,inputs:h,outputIndices:u,options:d}};be.postMessage(m,ha(h))})}else return pa(n,r,e,u,o,d)},Ta=async n=>{if(Le())return Ge(),new Promise((r,e)=>{Fr.push([r,e]);let u={type:"end-profiling",in:n};be.postMessage(u)});ma(n)},Sa=async()=>Le()?(Ge(),new Promise((n,r)=>{Br.push([n,r]);let e={type:"is-ort-env-initialized"};be.postMessage(e)})):Xt()});var Kt,Qe,tr,er,Wr=N(()=>{"use strict";We();zr();$t();Qe=(n,r)=>{switch(n.location){case"cpu":return[n.type,n.dims,n.data,"cpu"];case"gpu-buffer":return[n.type,n.dims,{gpuBuffer:n.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${n.location} for ${r()}`)}},tr=n=>{switch(n[3]){case"cpu":return new fe(n[0],n[2],n[1]);case"gpu-buffer":{let r=n[0];if(!Yt(r))throw new Error(`not supported data type: ${r} for deserializing GPU tensor`);let{gpuBuffer:e,download:u,dispose:o}=n[2];return fe.fromGpuBuffer(e,{dataType:r,dims:n[1],download:u,dispose:o})}default:throw new Error(`invalid data location: ${n[3]}`)}},er=class{async createSessionAllocate(r){let e=await fetch(r);if(e.status!==200)throw new Error(`failed to load model: ${r}`);let u=await e.arrayBuffer();return wa(new Uint8Array(u))}async loadModel(r,e){if(await Sa()||(Kt||(Kt=ba($)),await Kt,Kt=void 0),typeof r=="string")if(typeof process<"u"&&process.versions&&process.versions.node){let u=await(void 0)(r);[this.sessionId,this.inputNames,this.outputNames]=await Nr(u,e)}else{let u=await this.createSessionAllocate(r);[this.sessionId,this.inputNames,this.outputNames]=await Oa(u,e)}else[this.sessionId,this.inputNames,this.outputNames]=await Nr(r,e)}async dispose(){return va(this.sessionId)}async run(r,e,u){let o=[],d=[];Object.entries(r).forEach(_=>{let E=_[0],x=_[1],S=this.inputNames.indexOf(E);if(S===-1)throw new Error(`invalid input '${E}'`);o.push(x),d.push(S)});let f=[],a=[];Object.entries(e).forEach(_=>{let E=_[0],x=_[1],S=this.outputNames.indexOf(E);if(S===-1)throw new Error(`invalid output '${E}'`);f.push(x),a.push(S)});let h=o.map((_,E)=>Qe(_,()=>`input "${this.inputNames[d[E]]}"`)),m=f.map((_,E)=>_?Qe(_,()=>`output "${this.outputNames[a[E]]}"`):null),y=await _a(this.sessionId,d,h,a,m,u),v={};for(let _=0;_<y.length;_++)v[this.outputNames[a[_]]]=f[_]??tr(y[_]);return v}startProfiling(){}endProfiling(){Ta(this.sessionId)}}});var bo,rr,Ea=N(()=>{"use strict";We();zr();Wr();bo=()=>{if((typeof $.wasm.initTimeout!="number"||$.wasm.initTimeout<0)&&($.wasm.initTimeout=0),typeof $.wasm.simd!="boolean"&&($.wasm.simd=!0),typeof $.wasm.proxy!="boolean"&&($.wasm.proxy=!1),typeof $.wasm.numThreads!="number"||!Number.isInteger($.wasm.numThreads)||$.wasm.numThreads<=0){let n=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;$.wasm.numThreads=Math.min(4,Math.ceil((n||1)/2))}},rr=class{async init(){bo(),await ya()}async createInferenceSessionHandler(r,e){let u=new er;return await u.loadModel(r,e),Promise.resolve(u)}}});var Me,we,Ma,wo,Aa,Gr,Ra,nr,Ia,Ca,Pa,xa,Da,jr,Ua,ka,Fa,Ba=N(()=>{"use strict";Er();Ar();$t();Jt();Je();Tt();Me="Built without training API's enabled. Use the onnxruntime-web/training import for training functionality, and make sure that all the correct artifacts are built & moved to the correct folder if using a custom build. Check https://onnxruntime.ai/docs/build/web.html for more information.",we=(n,r,e=!0)=>{e&&n!==0?q(r):!e&&n===0&&q(r)},Ma=n=>{let r=H(),[e,u]=n,o=0;try{if(r._OrtTrainingLoadCheckpoint)o=r._OrtTrainingLoadCheckpoint(e,u);else throw new Error(Me);return we(o,"Error occurred when trying to create a CheckpointState",!1),o}catch(d){throw r._OrtTrainingReleaseCheckpoint&&o!==0&&r._OrtTrainingReleaseCheckpoint(o),d}finally{r._OrtFree(n[0])}},wo=(n,r)=>{let e=H(),u=e.stackSave();try{let o=e.stackAlloc(8);if(e._OrtTrainingGetModelInputOutputCount){let d=e._OrtTrainingGetModelInputOutputCount(n,o,o+4,r);return we(d,"Can't get session input/output count."),[e.HEAP32[o/4],e.HEAP32[o/4+1]]}else throw new Error(Me)}finally{e.stackRestore(u)}},Aa=(n,r,e,u)=>{let o=[],d=H();for(let f=0;f<r;f++)if(d._OrtTrainingGetModelInputOutputName){let a=d._OrtTrainingGetModelInputOutputName(n,f,e,u);we(a,`Can't get input or output name -- is input: ${e}, index ${f}`,!1),o.push(d.UTF8ToString(a)),d._free(a)}else throw new Error(Me);return o},Gr=(n,r)=>{let e=[],u=[],[o,d]=wo(n,r);return e=Aa(n,o,!0,r),u=Aa(n,d,!1,r),[e,u]},Ra=(n,r,e,u,o)=>{let d=H(),f=0,a=0,h=[];try{if([a,h]=Gt(o),d._OrtTrainingCreateSession)f=d._OrtTrainingCreateSession(a,n,r[0],r[1],e[0],e[1],u[0],u[1]);else throw new Error(Me);return we(f,"Error occurred when trying to create a TrainingSession",!1),f}catch(m){throw d._OrtTrainingReleaseSession&&f!==0&&d._OrtTrainingReleaseSession(f),m}finally{d._free(r[0]),d._free(e[0]),d._free(u[0]),a!==0&&d._OrtReleaseSessionOptions(a),h.forEach(m=>d._free(m))}},nr=(n,r,e,u,o,d)=>{let f=r.length;for(let y=0;y<f;y++)Vt(e[y],u,o,n,d+r[y]);let a=H(),h=a.stackAlloc(f*4),m=h/4;for(let y=0;y<f;y++)a.HEAPU32[m++]=u[y];return h},Ia=(n,r,e,u)=>{let o=H(),d=[];for(let f=0;f<r;f++){let a=o.HEAPU32[n/4+f];if(a===e[f]){d.push(u[f]);continue}let h=o.stackSave(),m=o.stackAlloc(4*4),y,v=0;try{let _=o._OrtGetTensorData(a,m,m+4,m+8,m+12);we(_,`Can't access output tensor data on index ${f}.`);let E=m/4,x=o.HEAPU32[E++];v=o.HEAPU32[E++];let S=o.HEAPU32[E++],A=o.HEAPU32[E++],k=[];for(let j=0;j<A;j++)k.push(o.HEAPU32[S/4+j]);o._OrtFree(S);let G=k.reduce((j,z)=>j*z,1);if(y=jt(x),y==="string"){let j=[],z=v/4;for(let I=0;I<G;I++){let ge=o.HEAPU32[z++],Oe=I===G-1?void 0:o.HEAPU32[z]-ge;j.push(o.UTF8ToString(ge,Oe))}d.push([y,k,j,"cpu"])}else{let j=St(y),z=new j(G);new Uint8Array(z.buffer,z.byteOffset,z.byteLength).set(o.HEAPU8.subarray(v,v+z.byteLength)),d.push([y,k,z,"cpu"])}}finally{o.stackRestore(h),y==="string"&&v&&o._free(v),o._OrtReleaseTensor(a)}}return d},Ca=async n=>{let r=H();if(r._OrtTrainingLazyResetGrad){let e=r._OrtTrainingLazyResetGrad(n);we(e,"Can't call lazyResetGrad.")}else throw new Error(Me)},Pa=async(n,r,e,u,o,d)=>{let f=H(),a=r.length,h=u.length,m=0,y=[],v=[],_=[],E=[],x=f.stackSave();try{[m,y]=ut(d);let S=nr(n,r,e,v,E,0),A=nr(n,u,o,_,E,a);if(f._OrtTrainingRunTrainStep){let k=f._OrtTrainingRunTrainStep(n,S,a,A,h,m);we(k,"failed to call OrtTrainingRunTrainStep in the WebAssembly layer")}else throw new Error(Me);return Ia(A,h,_,o)}finally{f.stackRestore(x),v.forEach(S=>f._OrtReleaseTensor(S)),_.forEach(S=>f._OrtReleaseTensor(S)),E.forEach(S=>f._free(S)),m!==0&&f._OrtReleaseRunOptions(m),y.forEach(S=>f._free(S))}},xa=async(n,r)=>{let e=H(),u=0,o=[];try{if([u,o]=ut(r),e._OrtTrainingOptimizerStep){let d=e._OrtTrainingOptimizerStep(n,u);we(d,"Failed to call OrtTrainingOptimizerStep in the WebAssembly layer")}else throw new Error(Me)}finally{u!==0&&e._OrtReleaseRunOptions(u),o.forEach(d=>e._free(d))}},Da=async(n,r,e,u,o,d)=>{let f=H(),a=r.length,h=u.length,m=0,y=[],v=[],_=[],E=[],x=f.stackSave();try{[m,y]=ut(d);let S=nr(n,r,e,v,E,0),A=nr(n,u,o,_,E,a);if(f._OrtTrainingEvalStep){let k=f._OrtTrainingEvalStep(n,S,a,A,h,m);we(k,"failed to call OrtTrainingEvalStep in the WebAssembly layer")}else throw new Error(Me);return Ia(A,h,_,o)}finally{f.stackRestore(x),v.forEach(S=>f._OrtReleaseTensor(S)),_.forEach(S=>f._OrtReleaseTensor(S)),E.forEach(S=>f._free(S)),m!==0&&f._OrtReleaseRunOptions(m),y.forEach(S=>f._free(S))}},jr=(n,r)=>{let e=H(),u=e.stackSave();try{let o=e.stackAlloc(4);if(e._OrtTrainingGetParametersSize){let d=e._OrtTrainingGetParametersSize(n,o,r);return we(d,"Can't get parameters size"),e.HEAP32[o/4]}else throw new Error(Me)}finally{e.stackRestore(u)}},Ua=async(n,r)=>{let e=H(),u=e.stackSave(),o="float32",d="cpu",f=jr(n,r),a=0,h=4*f,m=e._malloc(h),y=[f],v=e.stackAlloc(4),_=v/4;e.HEAP32[_]=f;try{if(a=e._OrtCreateTensor(lt(o),m,h,v,y.length,Et(d)),we(a,`Can't create tensor for getContiguousParameters. session=${n}.`,!1),e._OrtTrainingCopyParametersToBuffer){let A=e._OrtTrainingCopyParametersToBuffer(n,a,f,r);we(A,"Can't get contiguous parameters.")}else throw new Error(Me);let E=St(o),x=new E(f),S=[];if(new Uint8Array(x.buffer,x.byteOffset,x.byteLength).set(e.HEAPU8.subarray(m,m+h)),S.push([o,y,x,d]),S.length!==1)throw new Error(`something unexpected happened in the getContiguousParameters function. Expected output length of
     one, got ${S.length}`);return S[0]}finally{a!==0&&e._OrtReleaseTensor(a),e._free(m),e._free(v),e.stackRestore(u)}},ka=async(n,r,e)=>{let u=H(),o=u.stackSave(),d="float32",f="cpu",a=r.length,h=a/4,m=u._malloc(a);u.HEAPU8.set(r,m);let y=u.stackAlloc(4);u.HEAP32[y/4]=h;let v=1,_=0;try{if(_=u._OrtCreateTensor(lt(d),m,a,y,v,Et(f)),we(_,`Can't create tensor for input/output. session=${n}`,!1),u._OrtTrainingCopyParametersFromBuffer){let E=u._OrtTrainingCopyParametersFromBuffer(n,_,h,e);we(E,"Can't copy buffer to parameters.")}else throw new Error(Me)}finally{_!==0&&u._OrtReleaseTensor(_),u.stackRestore(o),u._free(m),u._free(y)}},Fa=(n,r)=>{let e=H();e._OrtTrainingReleaseSession&&e._OrtTrainingReleaseSession(r),e._OrtTrainingReleaseCheckpoint&&e._OrtTrainingReleaseCheckpoint(n)}});var ar,La=N(()=>{"use strict";We();Wr();Jt();Ba();ar=class{constructor(){this.evalInputNames=[];this.evalOutputNames=[]}async uriOrBufferToHeap(r){let e;if(typeof r=="string"){let o=await(await fetch(r)).arrayBuffer();e=new Uint8Array(o)}else e=r;return Mt(e)}async createTrainingSession(r,e,u,o,d){Xt()||await qt($);let f=await this.uriOrBufferToHeap(r),a=await this.uriOrBufferToHeap(e),h=[0,0],m=[0,0];u!==""&&(h=await this.uriOrBufferToHeap(u)),o!==""&&(m=await this.uriOrBufferToHeap(o)),this.checkpointId=Ma(f),this.sessionId=Ra(this.checkpointId,a,h,m,d),[this.inputNames,this.outputNames]=Gr(this.sessionId,!1),u!==""&&([this.evalInputNames,this.evalOutputNames]=Gr(this.sessionId,!0))}convertMapIntoValuesArrayAndIndicesArray(r,e,u){let o=[],d=[];Object.entries(r).forEach(a=>{let h=a[0],m=a[1],y=e.indexOf(h);if(y===-1)throw new Error(`invalid input '${h}`);o.push(m),d.push(y)});let f=o.map(u);return[o,d,f]}convertTensorMetadataToReturnType(r,e,u){let o={};for(let d=0;d<r.length;d++)o[this.outputNames[u[d]]]=e[d]??tr(r[d]);return o}async lazyResetGrad(){await Ca(this.sessionId)}async runTrainStep(r,e,u){let[,o,d]=this.convertMapIntoValuesArrayAndIndicesArray(r,this.inputNames,(y,v)=>Qe(y,()=>`input "${this.inputNames[o[v]]}"`)),[f,a,h]=this.convertMapIntoValuesArrayAndIndicesArray(e,this.outputNames,(y,v)=>y?Qe(y,()=>`output "${this.outputNames[a[v]]}"`):null),m=await Pa(this.sessionId,o,d,a,h,u);return this.convertTensorMetadataToReturnType(m,f,a)}async runOptimizerStep(r){await xa(this.sessionId,r)}async runEvalStep(r,e,u){let[,o,d]=this.convertMapIntoValuesArrayAndIndicesArray(r,this.evalInputNames,(y,v)=>Qe(y,()=>`input "${this.evalInputNames[o[v]]}"`)),[f,a,h]=this.convertMapIntoValuesArrayAndIndicesArray(e,this.evalOutputNames,(y,v)=>y?Qe(y,()=>`output "${this.evalOutputNames[a[v]]}"`):null),m=await Da(this.sessionId,o,d,a,h,u);return this.convertTensorMetadataToReturnType(m,f,a)}async getParametersSize(r){return jr(this.sessionId,r)}async loadParametersBuffer(r,e){await ka(this.sessionId,r,e)}async getContiguousParameters(r){let e=await Ua(this.sessionId,r);return tr(e)}async dispose(){return Fa(this.checkpointId,this.sessionId)}}});var Ha={};it(Ha,{wasmBackend:()=>Oo});var Yr,Oo,Na=N(()=>{"use strict";Ea();La();Yr=class extends rr{async createTrainingSessionHandler(r,e,u,o,d){let f=new ar;return await f.createTrainingSession(r,e,u,o,d),Promise.resolve(f)}},Oo=new Yr});var _o={};it(_o,{InferenceSession:()=>Wn,Tensor:()=>fe,TrainingSession:()=>$n,default:()=>vo,env:()=>$,registerBackend:()=>st});We();We();We();var qn="1.17.0";var vo=gr;{let n=(Na(),qe(Ha)).wasmBackend;st("cpu",n,10),st("wasm",n,10)}Object.defineProperty($.versions,"web",{value:qn,enumerable:!0});return qe(_o);})();
//# sourceMappingURL=ort.training.wasm.min.js.map

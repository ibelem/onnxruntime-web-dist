/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var Vt=Object.create;var He=Object.defineProperty;var qt=Object.getOwnPropertyDescriptor;var Xt=Object.getOwnPropertyNames;var Jt=Object.getPrototypeOf,Zt=Object.prototype.hasOwnProperty;var Z=(n,i)=>()=>(n&&(i=n(n=0)),i);var Kt=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports),$r=(n,i)=>{for(var a in i)He(n,a,{get:i[a],enumerable:!0})},$e=(n,i,a,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let c of Xt(i))!Zt.call(n,c)&&c!==a&&He(n,c,{get:()=>i[c],enumerable:!(l=qt(i,c))||l.enumerable});return n},ue=(n,i,a)=>($e(n,i,"default"),a&&$e(a,i,"default")),Hr=(n,i,a)=>(a=n!=null?Vt(Jt(n)):{},$e(i||!n||!n.__esModule?He(a,"default",{value:n,enumerable:!0}):a,n)),jr=n=>$e(He({},"__esModule",{value:!0}),n);var Vr=Kt((Yr,or)=>{"use strict";var Gr=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(i={}){var a=i,l,c;a.ready=new Promise((e,r)=>{l=e,c=r});var p=Object.assign({},a),f="./this.program",v=typeof window=="object",E=typeof importScripts=="function",T=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="",_,h,S;if(T){var B=require("fs"),U=require("path");A=E?U.dirname(A)+"/":__dirname+"/",_=(e,r)=>(e=ye(e)?new URL(e):U.normalize(e),B.readFileSync(e,r?void 0:"utf8")),S=e=>(e=_(e,!0),e.buffer||(e=new Uint8Array(e)),e),h=(e,r,t,o=!0)=>{e=ye(e)?new URL(e):U.normalize(e),B.readFile(e,o?void 0:"utf8",(s,d)=>{s?t(s):r(o?d.buffer:d)})},!a.thisProgram&&1<process.argv.length&&(f=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(v||E)&&(E?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),n&&(A=n),A.indexOf("blob:")!==0?A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):A="",_=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},E&&(S=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),h=(e,r,t)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{o.status==200||o.status==0&&o.response?r(o.response):t()},o.onerror=t,o.send(null)});var N=console.log.bind(console),x=console.error.bind(console);Object.assign(a,p),p=null,typeof WebAssembly!="object"&&De("no native wasm support detected");var D,ce=!1,q,M,te,me,m,I,Ue,be,Ee,ne;function P(){var e=D.buffer;a.HEAP8=q=new Int8Array(e),a.HEAP16=te=new Int16Array(e),a.HEAPU8=M=new Uint8Array(e),a.HEAPU16=me=new Uint16Array(e),a.HEAP32=m=new Int32Array(e),a.HEAPU32=I=new Uint32Array(e),a.HEAPF32=Ue=new Float32Array(e),a.HEAPF64=ne=new Float64Array(e),a.HEAP64=be=new BigInt64Array(e),a.HEAPU64=Ee=new BigUint64Array(e)}var oe=[],ve=[],K=[],Q=0,$=null,H=null;function De(e){throw e="Aborted("+e+")",x(e),ce=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),c(e),e}var ge=e=>e.startsWith("data:application/octet-stream;base64,"),ye=e=>e.startsWith("file://"),le;if(le="ort-wasm.wasm",!ge(le)){var Le=le;le=a.locateFile?a.locateFile(Le,A):A+Le}function de(e){if(S)return S(e);throw"both async and sync fetching of the wasm failed"}function he(e){if(v||E){if(typeof fetch=="function"&&!ye(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+e+"'";return r.arrayBuffer()}).catch(()=>de(e));if(h)return new Promise((r,t)=>{h(e,o=>r(new Uint8Array(o)),t)})}return Promise.resolve().then(()=>de(e))}function Ae(e,r,t){return he(e).then(o=>WebAssembly.instantiate(o,r)).then(o=>o).then(t,o=>{x(`failed to asynchronously prepare wasm: ${o}`),De(o)})}function j(e,r){var t=le;return typeof WebAssembly.instantiateStreaming!="function"||ge(t)||ye(t)||T||typeof fetch!="function"?Ae(t,e,r):fetch(t,{credentials:"same-origin"}).then(o=>WebAssembly.instantiateStreaming(o,e).then(r,function(s){return x(`wasm streaming compile failed: ${s}`),x("falling back to ArrayBuffer instantiation"),Ae(t,e,r)}))}var z={1358152:(e,r,t,o)=>{if(typeof a>"u"||!a.cb)return 1;if(e=Pe(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=a.cb.get(e),!e)return 2;if(r>>>=0,t>>>=0,r+t>e.byteLength)return 3;try{return M.set(e.subarray(r,r+t),o>>>0>>>0),0}catch{return 4}}};function Te(e){this.Ua=e-24,this.fb=function(r){I[this.Ua+4>>>2>>>0]=r},this.eb=function(r){I[this.Ua+8>>>2>>>0]=r},this.Ya=function(r,t){this.Za(),this.fb(r),this.eb(t)},this.Za=function(){I[this.Ua+16>>>2>>>0]=0}}var _e=0,Xe=0,gr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,yr=(e,r,t)=>{r>>>=0;var o=r+t;for(t=r;e[t]&&!(t>=o);)++t;if(16<t-r&&e.buffer&&gr)return gr.decode(e.subarray(r,t));for(o="";r<t;){var s=e[r++];if(s&128){var d=e[r++]&63;if((s&224)==192)o+=String.fromCharCode((s&31)<<6|d);else{var g=e[r++]&63;s=(s&240)==224?(s&15)<<12|d<<6|g:(s&7)<<18|d<<12|g<<6|e[r++]&63,65536>s?o+=String.fromCharCode(s):(s-=65536,o+=String.fromCharCode(55296|s>>10,56320|s&1023))}}else o+=String.fromCharCode(s)}return o},Pe=(e,r)=>(e>>>=0)?yr(M,e,r):"",We=e=>{for(var r=0,t=0;t<e.length;++t){var o=e.charCodeAt(t);127>=o?r++:2047>=o?r+=2:55296<=o&&57343>=o?(r+=4,++t):r+=3}return r},Fe=(e,r,t,o)=>{if(t>>>=0,!(0<o))return 0;var s=t;o=t+o-1;for(var d=0;d<e.length;++d){var g=e.charCodeAt(d);if(55296<=g&&57343>=g){var y=e.charCodeAt(++d);g=65536+((g&1023)<<10)|y&1023}if(127>=g){if(t>=o)break;r[t++>>>0]=g}else{if(2047>=g){if(t+1>=o)break;r[t++>>>0]=192|g>>6}else{if(65535>=g){if(t+2>=o)break;r[t++>>>0]=224|g>>12}else{if(t+3>=o)break;r[t++>>>0]=240|g>>18,r[t++>>>0]=128|g>>12&63}r[t++>>>0]=128|g>>6&63}r[t++>>>0]=128|g&63}}return r[t>>>0]=0,t-s},hr=e=>{if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e},wr,J=e=>{for(var r="";M[e>>>0];)r+=wr[M[e++>>>0]];return r},Je={},Ze={},It={},pe;function xt(e,r,t={}){var o=r.name;if(!e)throw new pe(`type "${o}" must have a positive integer typeid pointer`);if(Ze.hasOwnProperty(e)){if(t.gb)return;throw new pe(`Cannot register type '${o}' twice`)}Ze[e]=r,delete It[e],Je.hasOwnProperty(e)&&(r=Je[e],delete Je[e],r.forEach(s=>s()))}function ae(e,r,t={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");xt(e,r,t)}var vr=(e,r,t)=>{switch(r){case 1:return t?o=>q[o>>>0>>>0]:o=>M[o>>>0>>>0];case 2:return t?o=>te[o>>>1>>>0]:o=>me[o>>>1>>>0];case 4:return t?o=>m[o>>>2>>>0]:o=>I[o>>>2>>>0];case 8:return t?o=>be[o>>>3]:o=>Ee[o>>>3];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}};function Sr(){this.Ra=[void 0],this.ab=[]}var X=new Sr;function Ke(e){e>>>=0,e>=X.Ua&&--X.get(e).bb===0&&X.Za(e)}var Y=e=>{if(!e)throw new pe("Cannot use deleted val. handle = "+e);return X.get(e).value},ee=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return X.Ya({bb:1,value:e})}};function Or(e){return this.fromWireType(m[e>>>2>>>0])}var Bt=(e,r)=>{switch(r){case 4:return function(t){return this.fromWireType(Ue[t>>>2>>>0])};case 8:return function(t){return this.fromWireType(ne[t>>>3>>>0])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}};function Ut(e){return this.fromWireType(I[e>>>2>>>0])}var br=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Dt=(e,r)=>{for(var t=e>>1,o=t+r/2;!(t>=o)&&me[t>>>0];)++t;if(t<<=1,32<t-e&&br)return br.decode(M.subarray(e>>>0,t>>>0));for(t="",o=0;!(o>=r/2);++o){var s=te[e+2*o>>>1>>>0];if(s==0)break;t+=String.fromCharCode(s)}return t},Lt=(e,r,t)=>{if(t??=2147483647,2>t)return 0;t-=2;var o=r;t=t<2*e.length?t/2:e.length;for(var s=0;s<t;++s)te[r>>>1>>>0]=e.charCodeAt(s),r+=2;return te[r>>>1>>>0]=0,r-o},Wt=e=>2*e.length,Ft=(e,r)=>{for(var t=0,o="";!(t>=r/4);){var s=m[e+4*t>>>2>>>0];if(s==0)break;++t,65536<=s?(s-=65536,o+=String.fromCharCode(55296|s>>10,56320|s&1023)):o+=String.fromCharCode(s)}return o},Mt=(e,r,t)=>{if(r>>>=0,t??=2147483647,4>t)return 0;var o=r;t=o+t-4;for(var s=0;s<e.length;++s){var d=e.charCodeAt(s);if(55296<=d&&57343>=d){var g=e.charCodeAt(++s);d=65536+((d&1023)<<10)|g&1023}if(m[r>>>2>>>0]=d,r+=4,r+4>t)break}return m[r>>>2>>>0]=0,r-o},kt=e=>{for(var r=0,t=0;t<e.length;++t){var o=e.charCodeAt(t);55296<=o&&57343>=o&&++t,r+=4}return r},Qe=(e,r)=>{var t=Ze[e];if(t===void 0)throw e=Wr(e),t=J(e),se(e),new pe(r+" has unknown type "+t);return t},Er=(e,r,t)=>{var o=[];return e=e.toWireType(o,t),o.length&&(I[r>>>2>>>0]=ee(o)),e},Me=[],Rt={},er=e=>{var r=Rt[e];return r===void 0?J(e):r},Ar=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Nt=e=>{var r=Me.length;return Me.push(e),r},$t=(e,r)=>{for(var t=Array(e),o=0;o<e;++o)t[o]=Qe(I[r+4*o>>>2>>>0],"parameter "+o);return t},Tr=(e,r)=>Object.defineProperty(r,"name",{value:e});function Ht(e){var r=Function;if(!(r instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof r} which is not a function`);var t=Tr(r.name||"unknownFunctionName",function(){});return t.prototype=r.prototype,t=new t,e=r.apply(t,e),e instanceof Object?e:t}var Se=e=>e%4===0&&(e%100!==0||e%400===0),_r=[0,31,60,91,121,152,182,213,244,274,305,335],Pr=[0,31,59,90,120,151,181,212,243,273,304,334],Cr=e=>{var r=We(e)+1,t=Re(r);return t&&Fe(e,M,t,r),t},rr=[],tr={},Ir=()=>{if(!nr){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:f||"./this.program"},r;for(r in tr)tr[r]===void 0?delete e[r]:e[r]=tr[r];var t=[];for(r in e)t.push(`${r}=${e[r]}`);nr=t}return nr},nr,jt=[null,[],[]],xr=[31,29,31,30,31,30,31,31,30,31,30,31],Br=[31,28,31,30,31,30,31,31,30,31,30,31];function zt(e){var r=Array(We(e)+1);return Fe(e,r,0,r.length),r}function Ur(e,r,t,o){function s(u,C,W){for(u=typeof u=="number"?u.toString():u||"";u.length<C;)u=W[0]+u;return u}function d(u,C){return s(u,C,"0")}function g(u,C){function W(Nr){return 0>Nr?-1:0<Nr?1:0}var we;return(we=W(u.getFullYear()-C.getFullYear()))===0&&(we=W(u.getMonth()-C.getMonth()))===0&&(we=W(u.getDate()-C.getDate())),we}function y(u){switch(u.getDay()){case 0:return new Date(u.getFullYear()-1,11,29);case 1:return u;case 2:return new Date(u.getFullYear(),0,3);case 3:return new Date(u.getFullYear(),0,2);case 4:return new Date(u.getFullYear(),0,1);case 5:return new Date(u.getFullYear()-1,11,31);case 6:return new Date(u.getFullYear()-1,11,30)}}function b(u){var C=u.Sa;for(u=new Date(new Date(u.Ta+1900,0,1).getTime());0<C;){var W=u.getMonth(),we=(Se(u.getFullYear())?xr:Br)[W];if(C>we-u.getDate())C-=we-u.getDate()+1,u.setDate(1),11>W?u.setMonth(W+1):(u.setMonth(0),u.setFullYear(u.getFullYear()+1));else{u.setDate(u.getDate()+C);break}}return W=new Date(u.getFullYear()+1,0,4),C=y(new Date(u.getFullYear(),0,4)),W=y(W),0>=g(C,u)?0>=g(W,u)?u.getFullYear()+1:u.getFullYear():u.getFullYear()-1}e>>>=0,r>>>=0,t>>>=0,o>>>=0;var w=I[o+40>>>2>>>0];o={kb:m[o>>>2>>>0],jb:m[o+4>>>2>>>0],Wa:m[o+8>>>2>>>0],$a:m[o+12>>>2>>>0],Xa:m[o+16>>>2>>>0],Ta:m[o+20>>>2>>>0],Na:m[o+24>>>2>>>0],Sa:m[o+28>>>2>>>0],mb:m[o+32>>>2>>>0],ib:m[o+36>>>2>>>0],lb:w?Pe(w):""},t=Pe(t),w={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var L in w)t=t.replace(new RegExp(L,"g"),w[L]);var V="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ie="January February March April May June July August September October November December".split(" ");w={"%a":u=>V[u.Na].substring(0,3),"%A":u=>V[u.Na],"%b":u=>ie[u.Xa].substring(0,3),"%B":u=>ie[u.Xa],"%C":u=>d((u.Ta+1900)/100|0,2),"%d":u=>d(u.$a,2),"%e":u=>s(u.$a,2," "),"%g":u=>b(u).toString().substring(2),"%G":u=>b(u),"%H":u=>d(u.Wa,2),"%I":u=>(u=u.Wa,u==0?u=12:12<u&&(u-=12),d(u,2)),"%j":u=>{for(var C=0,W=0;W<=u.Xa-1;C+=(Se(u.Ta+1900)?xr:Br)[W++]);return d(u.$a+C,3)},"%m":u=>d(u.Xa+1,2),"%M":u=>d(u.jb,2),"%n":()=>`
`,"%p":u=>0<=u.Wa&&12>u.Wa?"AM":"PM","%S":u=>d(u.kb,2),"%t":()=>"	","%u":u=>u.Na||7,"%U":u=>d(Math.floor((u.Sa+7-u.Na)/7),2),"%V":u=>{var C=Math.floor((u.Sa+7-(u.Na+6)%7)/7);if(2>=(u.Na+371-u.Sa-2)%7&&C++,C)C==53&&(W=(u.Na+371-u.Sa)%7,W==4||W==3&&Se(u.Ta)||(C=1));else{C=52;var W=(u.Na+7-u.Sa-1)%7;(W==4||W==5&&Se(u.Ta%400-1))&&C++}return d(C,2)},"%w":u=>u.Na,"%W":u=>d(Math.floor((u.Sa+7-(u.Na+6)%7)/7),2),"%y":u=>(u.Ta+1900).toString().substring(2),"%Y":u=>u.Ta+1900,"%z":u=>{u=u.ib;var C=0<=u;return u=Math.abs(u)/60,(C?"+":"-")+("0000"+(u/60*100+u%60)).slice(-4)},"%Z":u=>u.lb,"%%":()=>"%"},t=t.replace(/%%/g,"\0\0");for(L in w)t.includes(L)&&(t=t.replace(new RegExp(L,"g"),w[L](o)));return t=t.replace(/\0\0/g,"%"),L=zt(t),L.length>r?0:(q.set(L,e>>>0),L.length-1)}for(var Dr=Array(256),ke=0;256>ke;++ke)Dr[ke]=String.fromCharCode(ke);wr=Dr,pe=a.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},a.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(Sr.prototype,{get(e){return this.Ra[e]},has(e){return this.Ra[e]!==void 0},Ya(e){var r=this.ab.pop()||this.Ra.length;return this.Ra[r]=e,r},Za(e){this.Ra[e]=void 0,this.ab.push(e)}}),X.Ra.push({value:void 0},{value:null},{value:!0},{value:!1}),X.Ua=X.Ra.length,a.count_emval_handles=()=>{for(var e=0,r=X.Ua;r<X.Ra.length;++r)X.Ra[r]!==void 0&&++e;return e};var Gt={a:function(e,r,t){throw e>>>=0,new Te(e).Ya(r>>>0,t>>>0),_e=e,Xe++,_e},t:function(){return 0},$:function(){},M:function(){},O:function(){},G:function(){return 0},Z:function(){},U:function(){},Y:function(){},B:function(){},N:function(){},K:function(){},_:function(){},L:function(){},E:function(e,r,t,o,s){r>>>=0,r=J(r);var d=r.indexOf("u")!=-1;d&&(s=(1n<<64n)-1n),ae(e>>>0,{name:r,fromWireType:g=>g,toWireType:function(g,y){if(typeof y!="bigint"&&typeof y!="number")throw new TypeError(`Cannot convert "${hr(y)}" to ${this.name}`);if(y<o||y>s)throw new TypeError(`Passing a number "${hr(y)}" from JS side to C/C++ side to an argument of type "${r}", which is outside the valid range [${o}, ${s}]!`);return y},argPackAdvance:8,readValueFromPointer:vr(r,t>>>0,!d),Va:null})},da:function(e,r,t,o){r=J(r>>>0),ae(e>>>0,{name:r,fromWireType:function(s){return!!s},toWireType:function(s,d){return d?t:o},argPackAdvance:8,readValueFromPointer:function(s){return this.fromWireType(M[s>>>0])},Va:null})},ca:function(e,r){r=J(r>>>0),ae(e>>>0,{name:r,fromWireType:t=>{var o=Y(t);return Ke(t),o},toWireType:(t,o)=>ee(o),argPackAdvance:8,readValueFromPointer:Or,Va:null})},D:function(e,r,t){r=J(r>>>0),ae(e>>>0,{name:r,fromWireType:o=>o,toWireType:(o,s)=>s,argPackAdvance:8,readValueFromPointer:Bt(r,t>>>0),Va:null})},q:function(e,r,t,o,s){if(e>>>=0,t>>>=0,r=J(r>>>0),s===-1&&(s=4294967295),s=y=>y,o===0){var d=32-8*t;s=y=>y<<d>>>d}var g=r.includes("unsigned")?function(y,b){return b>>>0}:function(y,b){return b};ae(e,{name:r,fromWireType:s,toWireType:g,argPackAdvance:8,readValueFromPointer:vr(r,t,o!==0),Va:null})},l:function(e,r,t){function o(d){return new s(q.buffer,I[d+4>>>2>>>0],I[d>>>2>>>0])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][r];t=J(t>>>0),ae(e>>>0,{name:t,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{gb:!0})},F:function(e,r){r=J(r>>>0);var t=r==="std::string";ae(e>>>0,{name:r,fromWireType:function(o){var s=I[o>>>2>>>0],d=o+4;if(t)for(var g=d,y=0;y<=s;++y){var b=d+y;if(y==s||M[b>>>0]==0){if(g=Pe(g,b-g),w===void 0)var w=g;else w+=String.fromCharCode(0),w+=g;g=b+1}}else{for(w=Array(s),y=0;y<s;++y)w[y]=String.fromCharCode(M[d+y>>>0]);w=w.join("")}return se(o),w},toWireType:function(o,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var d=typeof s=="string";if(!(d||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array))throw new pe("Cannot pass non-string to std::string");var g=t&&d?We(s):s.length,y=Re(4+g+1),b=y+4;if(I[y>>>2>>>0]=g,t&&d)Fe(s,M,b,g+1);else if(d)for(d=0;d<g;++d){var w=s.charCodeAt(d);if(255<w)throw se(b),new pe("String has UTF-16 code units that do not fit in 8 bits");M[b+d>>>0]=w}else for(d=0;d<g;++d)M[b+d>>>0]=s[d];return o!==null&&o.push(se,y),y},argPackAdvance:8,readValueFromPointer:Ut,Va(o){se(o)}})},v:function(e,r,t){if(r>>>=0,t>>>=0,t=J(t),r===2)var o=Dt,s=Lt,d=Wt,g=()=>me,y=1;else r===4&&(o=Ft,s=Mt,d=kt,g=()=>I,y=2);ae(e>>>0,{name:t,fromWireType:b=>{for(var w=I[b>>>2>>>0],L=g(),V,ie=b+4,u=0;u<=w;++u){var C=b+4+u*r;(u==w||L[C>>>y]==0)&&(ie=o(ie,C-ie),V===void 0?V=ie:(V+=String.fromCharCode(0),V+=ie),ie=C+r)}return se(b),V},toWireType:(b,w)=>{if(typeof w!="string")throw new pe(`Cannot pass non-string to C++ string type ${t}`);var L=d(w),V=Re(4+L+r);return I[V>>>2]=L>>y,s(w,V+4,L+r),b!==null&&b.push(se,V),V},argPackAdvance:8,readValueFromPointer:Or,Va(b){se(b)}})},ea:function(e,r){r=J(r>>>0),ae(e>>>0,{hb:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},aa:()=>1,o:function(e,r,t){return r>>>=0,t>>>=0,e=Y(e>>>0),r=Qe(r,"emval::as"),Er(r,t,e)},x:function(e,r,t,o){return t>>>=0,o>>>=0,e=Me[e>>>0],r=Y(r>>>0),e(null,r,t,o)},j:function(e,r,t,o,s){return t>>>=0,o>>>=0,s>>>=0,e=Me[e>>>0],r=Y(r>>>0),t=er(t),e(r,r[t],o,s)},b:Ke,w:function(e,r){return r>>>=0,e=Y(e>>>0),r=Y(r),e==r},s:function(e){return e>>>=0,e===0?ee(Ar()):(e=er(e),ee(Ar()[e]))},i:function(e,r,t){r=$t(e,r>>>0);var o=r.shift();e--;var s=`return function (obj, func, destructorsRef, args) {
`,d=0,g=[];t===0&&g.push("obj");for(var y=["retType"],b=[o],w=0;w<e;++w)g.push("arg"+w),y.push("argType"+w),b.push(r[w]),s+=`  var arg${w} = argType${w}.readValueFromPointer(args${d?"+"+d:""});
`,d+=r[w].argPackAdvance;for(s+=`  var rv = ${t===1?"new func":"func.call"}(${g.join(", ")});
`,w=0;w<e;++w)r[w].deleteObject&&(s+=`  argType${w}.deleteObject(arg${w});
`);return o.hb||(y.push("emval_returnValue"),b.push(Er),s+=`  return emval_returnValue(retType, destructorsRef, rv);
`),y.push(s+`};
`),e=Ht(y).apply(null,b),t=`methodCaller<(${r.map(L=>L.name).join(", ")}) => ${o.name}>`,Nt(Tr(t,e))},p:function(e,r){return r>>>=0,e=Y(e>>>0),r=Y(r),ee(e[r])},c:function(e){e>>>=0,4<e&&(X.get(e).bb+=1)},r:function(){return ee([])},k:function(e){e=Y(e>>>0);for(var r=Array(e.length),t=0;t<e.length;t++)r[t]=e[t];return ee(r)},d:function(e){return ee(er(e>>>0))},h:function(){return ee({})},g:function(e){e>>>=0;for(var r=Y(e);r.length;){var t=r.pop();r.pop()(t)}Ke(e)},f:function(e,r,t){r>>>=0,t>>>=0,e=Y(e>>>0),r=Y(r),t=Y(t),e[r]=t},e:function(e,r){return r>>>=0,e=Qe(e>>>0,"_emval_take_value"),e=e.readValueFromPointer(r),ee(e)},R:function(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),m[r>>>2>>>0]=e.getUTCSeconds(),m[r+4>>>2>>>0]=e.getUTCMinutes(),m[r+8>>>2>>>0]=e.getUTCHours(),m[r+12>>>2>>>0]=e.getUTCDate(),m[r+16>>>2>>>0]=e.getUTCMonth(),m[r+20>>>2>>>0]=e.getUTCFullYear()-1900,m[r+24>>>2>>>0]=e.getUTCDay(),m[r+28>>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},S:function(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),m[r>>>2>>>0]=e.getSeconds(),m[r+4>>>2>>>0]=e.getMinutes(),m[r+8>>>2>>>0]=e.getHours(),m[r+12>>>2>>>0]=e.getDate(),m[r+16>>>2>>>0]=e.getMonth(),m[r+20>>>2>>>0]=e.getFullYear()-1900,m[r+24>>>2>>>0]=e.getDay(),m[r+28>>>2>>>0]=(Se(e.getFullYear())?_r:Pr)[e.getMonth()]+e.getDate()-1|0,m[r+36>>>2>>>0]=-(60*e.getTimezoneOffset());var t=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=new Date(e.getFullYear(),0,1).getTimezoneOffset();m[r+32>>>2>>>0]=(t!=o&&e.getTimezoneOffset()==Math.min(o,t))|0},T:function(e){e>>>=0;var r=new Date(m[e+20>>>2>>>0]+1900,m[e+16>>>2>>>0],m[e+12>>>2>>>0],m[e+8>>>2>>>0],m[e+4>>>2>>>0],m[e>>>2>>>0],0),t=m[e+32>>>2>>>0],o=r.getTimezoneOffset(),s=new Date(r.getFullYear(),6,1).getTimezoneOffset(),d=new Date(r.getFullYear(),0,1).getTimezoneOffset(),g=Math.min(d,s);return 0>t?m[e+32>>>2>>>0]=+(s!=d&&g==o):0<t!=(g==o)&&(s=Math.max(d,s),r.setTime(r.getTime()+6e4*((0<t?g:s)-o))),m[e+24>>>2>>>0]=r.getDay(),m[e+28>>>2>>>0]=(Se(r.getFullYear())?_r:Pr)[r.getMonth()]+r.getDate()-1|0,m[e>>>2>>>0]=r.getSeconds(),m[e+4>>>2>>>0]=r.getMinutes(),m[e+8>>>2>>>0]=r.getHours(),m[e+12>>>2>>>0]=r.getDate(),m[e+16>>>2>>>0]=r.getMonth(),m[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),isNaN(e)?(m[Lr()>>>2>>>0]=61,e=-1):e/=1e3,BigInt(e)},P:function(){return-52},Q:function(){},I:function(e,r,t){function o(b){return(b=b.toTimeString().match(/\(([A-Za-z ]+)\)$/))?b[1]:"GMT"}t>>>=0;var s=new Date().getFullYear(),d=new Date(s,0,1),g=new Date(s,6,1);s=d.getTimezoneOffset();var y=g.getTimezoneOffset();I[e>>>0>>>2>>>0]=60*Math.max(s,y),m[r>>>0>>>2>>>0]=+(s!=y),e=o(d),r=o(g),e=Cr(e),r=Cr(r),y<s?(I[t>>>2>>>0]=e,I[t+4>>>2>>>0]=r):(I[t>>>2>>>0]=r,I[t+4>>>2>>>0]=e)},y:()=>{De("")},fa:function(e,r,t){e>>>=0,r>>>=0,t>>>=0,rr.length=0;for(var o;o=M[r++>>>0];){var s=o!=105;s&=o!=112,t+=s&&t%8?4:0,rr.push(o==112?I[t>>>2>>>0]:o==106?be[t>>>3]:o==105?m[t>>>2>>>0]:ne[t>>>3>>>0]),t+=s?8:4}return z[e].apply(null,rr)},C:()=>Date.now(),J:function(){return 4294901760},n:()=>performance.now(),H:function(e){e>>>=0;var r=M.length;if(4294901760<e)return!1;for(var t=1;4>=t;t*=2){var o=r*(1+.2/t);o=Math.min(o,e+100663296);var s=Math;o=Math.max(e,o);e:{s=(s.min.call(s,4294901760,o+(65536-o%65536)%65536)-D.buffer.byteLength+65535)/65536;try{D.grow(s),P();var d=1;break e}catch{}d=void 0}if(d)return!0}return!1},W:function(e,r){e>>>=0,r>>>=0;var t=0;return Ir().forEach((o,s)=>{var d=r+t;for(s=I[e+4*s>>>2>>>0]=d,d=0;d<o.length;++d)q[s++>>>0>>>0]=o.charCodeAt(d);q[s>>>0>>>0]=0,t+=o.length+1}),0},X:function(e,r){e>>>=0,r>>>=0;var t=Ir();I[e>>>2>>>0]=t.length;var o=0;return t.forEach(s=>o+=s.length+1),I[r>>>2>>>0]=o,0},u:()=>52,A:function(){return 52},V:function(){return 70},z:function(e,r,t,o){r>>>=0,t>>>=0,o>>>=0;for(var s=0,d=0;d<t;d++){var g=I[r>>>2>>>0],y=I[r+4>>>2>>>0];r+=8;for(var b=0;b<y;b++){var w=M[g+b>>>0],L=jt[e];w===0||w===10?((e===1?N:x)(yr(L,0)),L.length=0):L.push(w)}s+=y}return I[o>>>2>>>0]=s,0},ba:Ur,m:function(e,r,t,o){return Ur(e>>>0,r>>>0,t>>>0,o>>>0)}},O=function(){function e(t){return O=t.exports,O=Yt(),D=O.ga,P(),ve.unshift(O.ha),Q--,Q==0&&($!==null&&(clearInterval($),$=null),H&&(t=H,H=null,t())),O}var r={a:Gt};if(Q++,a.instantiateWasm)try{return a.instantiateWasm(r,e)}catch(t){x(`Module.instantiateWasm callback failed with error: ${t}`),c(t)}return j(r,function(t){e(t.instance)}).catch(c),{}}();a._OrtInit=(e,r)=>(a._OrtInit=O.ia)(e,r),a._OrtGetLastError=(e,r)=>(a._OrtGetLastError=O.ja)(e,r),a._OrtCreateSessionOptions=(e,r,t,o,s,d,g,y,b,w)=>(a._OrtCreateSessionOptions=O.ka)(e,r,t,o,s,d,g,y,b,w),a._OrtAppendExecutionProvider=(e,r)=>(a._OrtAppendExecutionProvider=O.la)(e,r),a._OrtAddFreeDimensionOverride=(e,r,t)=>(a._OrtAddFreeDimensionOverride=O.ma)(e,r,t),a._OrtAddSessionConfigEntry=(e,r,t)=>(a._OrtAddSessionConfigEntry=O.na)(e,r,t),a._OrtReleaseSessionOptions=e=>(a._OrtReleaseSessionOptions=O.oa)(e),a._OrtCreateSession=(e,r,t)=>(a._OrtCreateSession=O.pa)(e,r,t),a._OrtReleaseSession=e=>(a._OrtReleaseSession=O.qa)(e),a._OrtGetInputOutputCount=(e,r,t)=>(a._OrtGetInputOutputCount=O.ra)(e,r,t),a._OrtGetInputName=(e,r)=>(a._OrtGetInputName=O.sa)(e,r),a._OrtGetOutputName=(e,r)=>(a._OrtGetOutputName=O.ta)(e,r),a._OrtFree=e=>(a._OrtFree=O.ua)(e),a._OrtCreateTensor=(e,r,t,o,s,d)=>(a._OrtCreateTensor=O.va)(e,r,t,o,s,d),a._OrtGetTensorData=(e,r,t,o,s)=>(a._OrtGetTensorData=O.wa)(e,r,t,o,s),a._OrtReleaseTensor=e=>(a._OrtReleaseTensor=O.xa)(e),a._OrtCreateRunOptions=(e,r,t,o)=>(a._OrtCreateRunOptions=O.ya)(e,r,t,o),a._OrtAddRunConfigEntry=(e,r,t)=>(a._OrtAddRunConfigEntry=O.za)(e,r,t),a._OrtReleaseRunOptions=e=>(a._OrtReleaseRunOptions=O.Aa)(e),a._OrtCreateBinding=e=>(a._OrtCreateBinding=O.Ba)(e),a._OrtBindInput=(e,r,t)=>(a._OrtBindInput=O.Ca)(e,r,t),a._OrtBindOutput=(e,r,t,o)=>(a._OrtBindOutput=O.Da)(e,r,t,o),a._OrtClearBoundOutputs=e=>(a._OrtClearBoundOutputs=O.Ea)(e),a._OrtReleaseBinding=e=>(a._OrtReleaseBinding=O.Fa)(e),a._OrtRunWithBinding=(e,r,t,o,s)=>(a._OrtRunWithBinding=O.Ga)(e,r,t,o,s),a._OrtRun=(e,r,t,o,s,d,g,y)=>(a._OrtRun=O.Ha)(e,r,t,o,s,d,g,y),a._OrtEndProfiling=e=>(a._OrtEndProfiling=O.Ia)(e);var Lr=()=>(Lr=O.Ja)(),Re=a._malloc=e=>(Re=a._malloc=O.Ka)(e),se=a._free=e=>(se=a._free=O.La)(e),Wr=e=>(Wr=O.Ma)(e),Fr=()=>(Fr=O.Oa)(),Mr=e=>(Mr=O.Pa)(e),kr=e=>(kr=O.Qa)(e);function Yt(){var e=O;e=Object.assign({},e);var r=o=>()=>o()>>>0,t=o=>s=>o(s)>>>0;return e.Ja=r(e.Ja),e.Ka=t(e.Ka),e.Ma=t(e.Ma),e.Oa=r(e.Oa),e.Qa=t(e.Qa),e}a.stackAlloc=kr,a.stackSave=Fr,a.stackRestore=Mr,a.UTF8ToString=Pe,a.stringToUTF8=(e,r,t)=>Fe(e,M,r,t),a.lengthBytesUTF8=We;var Ne;H=function e(){Ne||Rr(),Ne||(H=e)};function Rr(){if(!(0<Q)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var e=a.preRun.shift();oe.unshift(e)}for(;0<oe.length;)oe.shift()(a);if(!(0<Q||Ne||(Ne=!0,a.calledRun=!0,ce))){for(;0<ve.length;)ve.shift()(a);for(l(a);0<K.length;)K.shift()(a)}}}return Rr(),i.ready}})();typeof Yr=="object"&&typeof or=="object"?or.exports=Gr:typeof define=="function"&&define.amd&&define([],()=>Gr)});var ir,Qt,ar,sr,je,qr,en,rn,tn,Xr,k,Oe=Z(()=>{"use strict";ir=Vr();Qt=ir,sr=!1,je=!1,qr=!1,en=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},rn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},tn=(n,i)=>n?i?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":i?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Xr=async n=>{if(sr)return Promise.resolve();if(je)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(qr)throw new Error("previous call to 'initializeWebAssembly()' failed.");je=!0;let i=n.initTimeout,a=n.numThreads,l=n.simd,c=a>1&&en(),p=l&&rn(),f=n.wasmPaths,v=typeof f=="string"?f:void 0,E=tn(p,c),T=typeof f=="object"?f[E]:void 0,A=!1,_=[];if(i>0&&_.push(new Promise(h=>{setTimeout(()=>{A=!0,h()},i)})),_.push(new Promise((h,S)=>{(c?Qt:ir)({locateFile:(N,x)=>N.endsWith(".wasm")?T||(v??x)+E:x+N}).then(N=>{je=!1,sr=!0,ar=N,h()},N=>{je=!1,qr=!0,S(N)})})),await Promise.race(_),A)throw new Error(`WebAssembly backend initializing failed due to timeout: ${i}ms`)},k=()=>{if(sr&&ar)return ar;throw new Error("WebAssembly is not initialized yet.")}});var R,Ce,F,ze=Z(()=>{"use strict";Oe();R=(n,i)=>{let a=k(),l=a.lengthBytesUTF8(n)+1,c=a._malloc(l);return a.stringToUTF8(n,c,l),i.push(c),c},Ce=(n,i,a,l)=>{if(typeof n=="object"&&n!==null){if(a.has(n))throw new Error("Circular reference in options");a.add(n)}Object.entries(n).forEach(([c,p])=>{let f=i?i+c:c;if(typeof p=="object")Ce(p,f+".",a,l);else if(typeof p=="string"||typeof p=="number")l(f,p.toString());else if(typeof p=="boolean")l(f,p?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof p}`)})},F=n=>{let i=k(),a=i.stackSave();try{let l=i.stackAlloc(8);i._OrtGetLastError(l,l+4);let c=i.HEAP32[l/4],p=i.HEAPU32[l/4+1],f=p?i.UTF8ToString(p):"";throw new Error(`${n} ERROR_CODE: ${c}, ERROR_MESSAGE: ${f}`)}finally{i.stackRestore(a)}}});var Jr,Zr=Z(()=>{"use strict";Oe();ze();Jr=n=>{let i=k(),a=0,l=[],c=n||{};try{if(n?.logSeverityLevel===void 0)c.logSeverityLevel=2;else if(typeof n.logSeverityLevel!="number"||!Number.isInteger(n.logSeverityLevel)||n.logSeverityLevel<0||n.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${n.logSeverityLevel}`);if(n?.logVerbosityLevel===void 0)c.logVerbosityLevel=0;else if(typeof n.logVerbosityLevel!="number"||!Number.isInteger(n.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${n.logVerbosityLevel}`);n?.terminate===void 0&&(c.terminate=!1);let p=0;return n?.tag!==void 0&&(p=R(n.tag,l)),a=i._OrtCreateRunOptions(c.logSeverityLevel,c.logVerbosityLevel,!!c.terminate,p),a===0&&F("Can't create run options."),n?.extra!==void 0&&Ce(n.extra,"",new WeakSet,(f,v)=>{let E=R(f,l),T=R(v,l);i._OrtAddRunConfigEntry(a,E,T)!==0&&F(`Can't set a run config entry: ${f} - ${v}.`)}),[a,l]}catch(p){throw a!==0&&i._OrtReleaseRunOptions(a),l.forEach(f=>i._free(f)),p}}});var nn,on,an,sn,Kr,Qr=Z(()=>{"use strict";Oe();ze();nn=n=>{switch(n){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${n}`)}},on=n=>{switch(n){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${n}`)}},an=n=>{n.extra||(n.extra={}),n.extra.session||(n.extra.session={});let i=n.extra.session;i.use_ort_model_bytes_directly||(i.use_ort_model_bytes_directly="1"),n.executionProviders&&n.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(n.enableMemPattern=!1)},sn=(n,i,a)=>{for(let l of i){let c=typeof l=="string"?l:l.name;switch(c){case"webnn":if(c="WEBNN",typeof l!="string"){let f=l;if(f?.deviceType){let v=R("deviceType",a),E=R(f.deviceType,a);k()._OrtAddSessionConfigEntry(n,v,E)!==0&&F(`Can't set a session config entry: 'deviceType' - ${f.deviceType}.`)}if(f?.numThreads){let v=f.numThreads;(typeof v!="number"||!Number.isInteger(v)||v<0)&&(v=0);let E=R("numThreads",a),T=R(v.toString(),a);k()._OrtAddSessionConfigEntry(n,E,T)!==0&&F(`Can't set a session config entry: 'numThreads' - ${f.numThreads}.`)}if(f?.powerPreference){let v=R("powerPreference",a),E=R(f.powerPreference,a);k()._OrtAddSessionConfigEntry(n,v,E)!==0&&F(`Can't set a session config entry: 'powerPreference' - ${f.powerPreference}.`)}}break;case"webgpu":if(c="JS",typeof l!="string"){let f=l;if(f?.preferredLayout){if(f.preferredLayout!=="NCHW"&&f.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${f.preferredLayout}`);let v=R("preferredLayout",a),E=R(f.preferredLayout,a);k()._OrtAddSessionConfigEntry(n,v,E)!==0&&F(`Can't set a session config entry: 'preferredLayout' - ${f.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${c}`)}let p=R(c,a);k()._OrtAppendExecutionProvider(n,p)!==0&&F(`Can't append execution provider: ${c}.`)}},Kr=n=>{let i=k(),a=0,l=[],c=n||{};an(c);try{let p=nn(c.graphOptimizationLevel??"all"),f=on(c.executionMode??"sequential"),v=typeof c.logId=="string"?R(c.logId,l):0,E=c.logSeverityLevel??2;if(!Number.isInteger(E)||E<0||E>4)throw new Error(`log serverity level is not valid: ${E}`);let T=c.logVerbosityLevel??0;if(!Number.isInteger(T)||T<0||T>4)throw new Error(`log verbosity level is not valid: ${T}`);let A=typeof c.optimizedModelFilePath=="string"?R(c.optimizedModelFilePath,l):0;if(a=i._OrtCreateSessionOptions(p,!!c.enableCpuMemArena,!!c.enableMemPattern,f,!!c.enableProfiling,0,v,E,T,A),a===0&&F("Can't create session options."),c.executionProviders&&sn(a,c.executionProviders,l),c.freeDimensionOverrides)for(let[_,h]of Object.entries(c.freeDimensionOverrides)){if(typeof _!="string")throw new Error(`free dimension override name must be a string: ${_}`);if(typeof h!="number"||!Number.isInteger(h)||h<0)throw new Error(`free dimension override value must be a non-negative integer: ${h}`);let S=R(_,l);i._OrtAddFreeDimensionOverride(a,S,h)!==0&&F(`Can't set a free dimension override: ${_} - ${h}.`)}return c.extra!==void 0&&Ce(c.extra,"",new WeakSet,(_,h)=>{let S=R(_,l),B=R(h,l);i._OrtAddSessionConfigEntry(a,S,B)!==0&&F(`Can't set a session config entry: ${_} - ${h}.`)}),[a,l]}catch(p){throw a!==0&&i._OrtReleaseSessionOptions(a),l.forEach(f=>i._free(f)),p}}});var ur,et,fr,rt,tt,Ge,nt,cr=Z(()=>{"use strict";ur=n=>{switch(n){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${n}`)}},et=n=>{switch(n){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${n}`)}},fr=n=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][n],rt=n=>{switch(n){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${n}`)}},tt=n=>{switch(n){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${n}`)}},Ge=n=>n==="float32"||n==="int32"||n==="int64"||n==="bool"||n==="float16"||n==="uint32",nt=n=>{switch(n){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${n}`)}}});var ot,at,Ie,lr=Z(()=>{"use strict";ot=Hr(require("fs")),at=require("node:fs/promises"),Ie=async n=>{if(typeof n=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(0,at.readFile)(n))}catch(i){if(i.code==="ERR_FS_FILE_TOO_LARGE"){let a=ot.createReadStream(n),l=[];for await(let c of a)l.push(c);return new Uint8Array(Buffer.concat(l))}throw i}else{let i=await fetch(n);if(!i.ok)throw new Error(`failed to load external data file: ${n}`);let a=i.headers.get("Content-Length"),l=a?parseInt(a,10):0;if(l<1073741824)return new Uint8Array(await i.arrayBuffer());{if(!i.body)throw new Error(`failed to load external data file: ${n}, no response body.`);let c=i.body.getReader(),p=Math.ceil(l/65536),f=new WebAssembly.Memory({initial:p,maximum:p}).buffer,v=0;for(;;){let{done:E,value:T}=await c.read();if(E)break;let A=T.byteLength;new Uint8Array(f,v,A).set(T),v+=A}return new Uint8Array(f,0,l)}}else return n instanceof Blob?new Uint8Array(await n.arrayBuffer()):n instanceof Uint8Array?n:new Uint8Array(n)}});var un,it,ut,xe,fn,dr,ft,ct,st,lt,dt,pt=Z(()=>{"use strict";Zr();Qr();cr();Oe();ze();lr();un=(n,i)=>{k()._OrtInit(n,i)!==0&&F("Can't initialize onnxruntime.")},it=async n=>{un(n.wasm.numThreads,tt(n.logLevel))},ut=async(n,i)=>{},xe=new Map,fn=n=>{let i=k(),a=i.stackSave();try{let l=i.stackAlloc(8);return i._OrtGetInputOutputCount(n,l,l+4)!==0&&F("Can't get session input/output count."),[i.HEAP32[l/4],i.HEAP32[l/4+1]]}finally{i.stackRestore(a)}},dr=n=>{let i=k(),a=i._malloc(n.byteLength);if(a===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${n.byteLength}.`);return i.HEAPU8.set(n,a),[a,n.byteLength]},ft=async(n,i)=>{let a,l,c=k();Array.isArray(n)?[a,l]=n:n.buffer===c.HEAPU8.buffer?[a,l]=[n.byteOffset,n.byteLength]:[a,l]=dr(n);let p=0,f=0,v=0,E=[],T=[],A=[];try{if([f,E]=Kr(i),i?.externalData&&c.mountExternalData){let x=[];for(let D of i.externalData){let ce=typeof D=="string"?D:D.path;x.push(Ie(typeof D=="string"?D:D.data).then(q=>{c.mountExternalData(ce,q)}))}await Promise.all(x)}p=c._OrtCreateSession(a,l,f),p===0&&F("Can't create a session.");let[_,h]=fn(p),S=[],B=[],U=[];for(let x=0;x<_;x++){let D=c._OrtGetInputName(p,x);D===0&&F("Can't get an input name."),T.push(D),S.push(c.UTF8ToString(D))}for(let x=0;x<h;x++){let D=c._OrtGetOutputName(p,x);D===0&&F("Can't get an output name."),A.push(D);let ce=c.UTF8ToString(D);B.push(ce)}let N=null;return xe.set(p,[p,T,A,N]),[p,S,B]}catch(_){throw T.forEach(h=>c._OrtFree(h)),A.forEach(h=>c._OrtFree(h)),v!==0&&c._OrtReleaseBinding(v),p!==0&&c._OrtReleaseSession(p),_}finally{c._free(a),f!==0&&c._OrtReleaseSessionOptions(f),E.forEach(_=>c._free(_)),c.unmountExternalData?.()}},ct=n=>{let i=k(),a=xe.get(n);if(!a)throw new Error(`cannot release session. invalid session id: ${n}`);let[l,c,p,f]=a;f&&i._OrtReleaseBinding(f.handle),i.jsepUnregisterBuffers?.(n),c.forEach(v=>i._OrtFree(v)),p.forEach(v=>i._OrtFree(v)),i._OrtReleaseSession(l),xe.delete(n)},st=(n,i,a,l,c)=>{if(!n){i.push(0);return}let p=k(),f=n[0],v=n[1],E=n[3],T,A;if(f==="string"&&E==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(E==="gpu-buffer"){let S=n[2].gpuBuffer,B=fr(ur(f));A=v.reduce((U,N)=>U*N,1)*B,T=p.jsepRegisterBuffer(l,c,S,A)}else{let S=n[2];if(Array.isArray(S)){A=4*S.length,T=p._malloc(A),a.push(T);let B=T/4;for(let U=0;U<S.length;U++){if(typeof S[U]!="string")throw new TypeError(`tensor data at index ${U} is not a string`);p.HEAPU32[B++]=R(S[U],a)}}else A=S.byteLength,T=p._malloc(A),a.push(T),p.HEAPU8.set(new Uint8Array(S.buffer,S.byteOffset,A),T)}let _=p.stackSave(),h=p.stackAlloc(4*v.length);try{let S=h/4;v.forEach(U=>p.HEAP32[S++]=U);let B=p._OrtCreateTensor(ur(f),T,A,h,v.length,nt(E));B===0&&F(`Can't create tensor for input/output. session=${l}, index=${c}.`),i.push(B)}finally{p.stackRestore(_)}},lt=async(n,i,a,l,c,p)=>{let f=k(),v=xe.get(n);if(!v)throw new Error(`cannot run inference. invalid session id: ${n}`);let[E,T,A,_]=v,h=i.length,S=l.length,B=0,U=[],N=[],x=[],D=[],ce=f.stackSave(),q=f.stackAlloc(h*4),M=f.stackAlloc(h*4),te=f.stackAlloc(S*4),me=f.stackAlloc(S*4);try{[B,U]=Jr(p);for(let P=0;P<h;P++)st(a[P],N,D,n,i[P]);for(let P=0;P<S;P++)st(c[P],x,D,n,h+l[P]);let m=q/4,I=M/4,Ue=te/4,be=me/4;for(let P=0;P<h;P++)f.HEAPU32[m++]=N[P],f.HEAPU32[I++]=T[i[P]];for(let P=0;P<S;P++)f.HEAPU32[Ue++]=x[P],f.HEAPU32[be++]=A[l[P]];let Ee;Ee=await f._OrtRun(E,M,q,h,me,S,te,B),Ee!==0&&F("failed to call OrtRun().");let ne=[];for(let P=0;P<S;P++){let oe=f.HEAPU32[te/4+P];if(oe===x[P]){ne.push(c[P]);continue}let ve=f.stackSave(),K=f.stackAlloc(4*4),Q=!1,$,H=0;try{f._OrtGetTensorData(oe,K,K+4,K+8,K+12)!==0&&F(`Can't access output tensor data on index ${P}.`);let ge=K/4,ye=f.HEAPU32[ge++];H=f.HEAPU32[ge++];let le=f.HEAPU32[ge++],Le=f.HEAPU32[ge++],de=[];for(let j=0;j<Le;j++)de.push(f.HEAPU32[le/4+j]);f._OrtFree(le);let he=de.reduce((j,z)=>j*z,1);$=et(ye);let Ae=_?.outputPreferredLocations[l[P]];if($==="string"){if(Ae==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let j=[],z=H/4;for(let Te=0;Te<he;Te++){let _e=f.HEAPU32[z++],Xe=Te===he-1?void 0:f.HEAPU32[z]-_e;j.push(f.UTF8ToString(_e,Xe))}ne.push([$,de,j,"cpu"])}else if(Ae==="gpu-buffer"&&he>0){let j=f.jsepGetBuffer(H),z=fr(ye);if(z===void 0||!Ge($))throw new Error(`Unsupported data type: ${$}`);Q=!0,ne.push([$,de,{gpuBuffer:j,download:f.jsepCreateDownloader(j,he*z,$),dispose:()=>{f._OrtReleaseTensor(oe)}},"gpu-buffer"])}else{let j=rt($),z=new j(he);new Uint8Array(z.buffer,z.byteOffset,z.byteLength).set(f.HEAPU8.subarray(H,H+z.byteLength)),ne.push([$,de,z,"cpu"])}}finally{f.stackRestore(ve),$==="string"&&H&&f._free(H),Q||f._OrtReleaseTensor(oe)}}return _&&f._OrtClearBoundOutputs(_.handle),ne}finally{f.stackRestore(ce),N.forEach(m=>f._OrtReleaseTensor(m)),x.forEach(m=>f._OrtReleaseTensor(m)),D.forEach(m=>f._free(m)),B!==0&&f._OrtReleaseRunOptions(B),U.forEach(m=>f._free(m))}},dt=n=>{let i=k(),a=xe.get(n);if(!a)throw new Error("invalid session id");let l=a[0],c=i._OrtEndProfiling(l);c===0&&F("Can't get an profile file name."),i._OrtFree(c)}});var Ye,pr,mt,gt,Nn,yt,ht,wt,vt,St,Ot,bt,mr=Z(()=>{"use strict";Ye=require("onnxruntime-common");pt();Oe();pr=!1,mt=!1,gt=!1,Nn=typeof document<"u"?document?.currentScript?.src:void 0,yt=async()=>{if(!mt){if(pr)throw new Error("multiple calls to 'initWasm()' detected.");if(gt)throw new Error("previous call to 'initWasm()' failed.");pr=!0;try{await Xr(Ye.env.wasm),await it(Ye.env),mt=!0}catch(n){throw gt=!0,n}finally{pr=!1}}},ht=async n=>{await ut(Ye.env,n)},wt=async n=>dr(n),vt=async(n,i)=>ft(n,i),St=async n=>{ct(n)},Ot=async(n,i,a,l,c,p)=>lt(n,i,a,l,c,p),bt=async n=>{dt(n)}});var fe,Et,ln,Ve,At=Z(()=>{"use strict";fe=require("onnxruntime-common");mr();cr();lr();Et=(n,i)=>{switch(n.location){case"cpu":return[n.type,n.dims,n.data,"cpu"];case"gpu-buffer":return[n.type,n.dims,{gpuBuffer:n.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${n.location} for ${i()}`)}},ln=n=>{switch(n[3]){case"cpu":return new fe.Tensor(n[0],n[2],n[1]);case"gpu-buffer":{let i=n[0];if(!Ge(i))throw new Error(`not supported data type: ${i} for deserializing GPU tensor`);let{gpuBuffer:a,download:l,dispose:c}=n[2];return fe.Tensor.fromGpuBuffer(a,{dataType:i,dims:n[1],download:l,dispose:c})}default:throw new Error(`invalid data location: ${n[3]}`)}},Ve=class{async fetchModelAndCopyToWasmMemory(i){return wt(await Ie(i))}async loadModel(i,a){(0,fe.TRACE_FUNC_BEGIN)();let l;typeof i=="string"?typeof process<"u"&&process.versions&&process.versions.node?l=await Ie(i):l=await this.fetchModelAndCopyToWasmMemory(i):l=i,[this.sessionId,this.inputNames,this.outputNames]=await vt(l,a),(0,fe.TRACE_FUNC_END)()}async dispose(){return St(this.sessionId)}async run(i,a,l){(0,fe.TRACE_FUNC_BEGIN)();let c=[],p=[];Object.entries(i).forEach(h=>{let S=h[0],B=h[1],U=this.inputNames.indexOf(S);if(U===-1)throw new Error(`invalid input '${S}'`);c.push(B),p.push(U)});let f=[],v=[];Object.entries(a).forEach(h=>{let S=h[0],B=h[1],U=this.outputNames.indexOf(S);if(U===-1)throw new Error(`invalid output '${S}'`);f.push(B),v.push(U)});let E=c.map((h,S)=>Et(h,()=>`input "${this.inputNames[p[S]]}"`)),T=f.map((h,S)=>h?Et(h,()=>`output "${this.outputNames[v[S]]}"`):null),A=await Ot(this.sessionId,p,E,v,T,l),_={};for(let h=0;h<A.length;h++)_[this.outputNames[v[h]]]=f[h]??ln(A[h]);return(0,fe.TRACE_FUNC_END)(),_}startProfiling(){}endProfiling(){bt(this.sessionId)}}});var Tt,G,dn,qe,_t=Z(()=>{"use strict";Tt=require("node:os"),G=require("onnxruntime-common");mr();At();dn=()=>{if((typeof G.env.wasm.initTimeout!="number"||G.env.wasm.initTimeout<0)&&(G.env.wasm.initTimeout=0),typeof G.env.wasm.simd!="boolean"&&(G.env.wasm.simd=!0),typeof G.env.wasm.proxy!="boolean"&&(G.env.wasm.proxy=!1),typeof G.env.wasm.trace!="boolean"&&(G.env.wasm.trace=!1),typeof G.env.wasm.numThreads!="number"||!Number.isInteger(G.env.wasm.numThreads)||G.env.wasm.numThreads<=0){let n=typeof navigator>"u"?(0,Tt.cpus)().length:navigator.hardwareConcurrency;G.env.wasm.numThreads=Math.min(4,Math.ceil((n||1)/2))}},qe=class{async init(i){dn(),await yt(),await ht(i)}async createInferenceSessionHandler(i,a){let l=new Ve;return await l.loadModel(i,a),Promise.resolve(l)}}});var Pt={};$r(Pt,{wasmBackend:()=>pn});var pn,Ct=Z(()=>{"use strict";_t();pn=new qe});var re={};$r(re,{default:()=>gn});module.exports=jr(re);ue(re,require("onnxruntime-common"),module.exports);var mn=Hr(require("onnxruntime-common")),Be=require("onnxruntime-common");var zr="1.17.0";var gn=mn;{let n=(Ct(),jr(Pt)).wasmBackend;(0,Be.registerBackend)("cpu",n,10),(0,Be.registerBackend)("wasm",n,10)}Object.defineProperty(Be.env.versions,"web",{value:zr,enumerable:!0});0&&(module.exports={...require("onnxruntime-common")});
//# sourceMappingURL=ort.node.min.js.map

/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
var He=Object.defineProperty;var kr=Object.getOwnPropertyDescriptor;var Fr=Object.getOwnPropertyNames;var Wr=Object.prototype.hasOwnProperty;var P=(r,n)=>()=>(r&&(n=r(r=0)),n);var zr=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports),$e=(r,n)=>{for(var e in n)He(r,e,{get:n[e],enumerable:!0})},Nr=(r,n,e,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of Fr(n))!Wr.call(r,s)&&s!==e&&He(r,s,{get:()=>n[s],enumerable:!(a=kr(n,s))||a.enumerable});return r};var je=r=>Nr(He({},"__esModule",{value:!0}),r);var Ie,ue,de,Ot,Ge=P(()=>{Ie=new Map,ue=[],de=(r,n,e)=>{if(n&&typeof n.init=="function"&&typeof n.createInferenceSessionHandler=="function"){let a=Ie.get(r);if(a===void 0)Ie.set(r,{backend:n,priority:e});else{if(a.priority>e)return;if(a.priority===e&&a.backend!==n)throw new Error(`cannot register backend "${r}" using priority ${e}`)}if(e>=0){let s=ue.indexOf(r);s!==-1&&ue.splice(s,1);for(let m=0;m<ue.length;m++)if(Ie.get(ue[m]).priority<=e){ue.splice(m,0,r);return}ue.push(r)}return}throw new TypeError("not a valid backend")},Ot=async r=>{let n=r.length===0?ue:r,e=[];for(let a of n){let s=Ie.get(a);if(s){if(s.initialized)return s.backend;if(s.aborted)continue;let m=!!s.initPromise;try{return m||(s.initPromise=s.backend.init()),await s.initPromise,s.initialized=!0,s.backend}catch(u){m||e.push({name:a,err:u}),s.aborted=!0}finally{delete s.initPromise}}}throw new Error(`no available backend found. ERR: ${e.map(a=>`[${a.name}] ${a.err}`).join(", ")}`)}});var Tt=P(()=>{Ge()});var At,vt=P(()=>{At="1.17.0"});var xt,Ye,It=P(()=>{vt();xt="warning",Ye={wasm:{},webgl:{},webgpu:{},versions:{common:At},set logLevel(r){if(r!==void 0){if(typeof r!="string"||["verbose","info","warning","error","fatal"].indexOf(r)===-1)throw new Error(`Unsupported logging level: ${r}`);xt=r}},get logLevel(){return xt}};Object.defineProperty(Ye,"logLevel",{enumerable:!0})});var U,Pt=P(()=>{It();U=Ye});var _t,Bt,Dt=P(()=>{_t=(r,n)=>{let e=document.createElement("canvas");e.width=r.dims[3],e.height=r.dims[2];let a=e.getContext("2d");if(a!=null){let s,m;n?.tensorLayout!==void 0&&n.tensorLayout==="NHWC"?(s=r.dims[2],m=r.dims[3]):(s=r.dims[3],m=r.dims[2]);let u=n?.format!==void 0?n.format:"RGB",d=n?.norm,p,l;d===void 0||d.mean===void 0?p=[255,255,255,255]:typeof d.mean=="number"?p=[d.mean,d.mean,d.mean,d.mean]:(p=[d.mean[0],d.mean[1],d.mean[2],0],d.mean[3]!==void 0&&(p[3]=d.mean[3])),d===void 0||d.bias===void 0?l=[0,0,0,0]:typeof d.bias=="number"?l=[d.bias,d.bias,d.bias,d.bias]:(l=[d.bias[0],d.bias[1],d.bias[2],0],d.bias[3]!==void 0&&(l[3]=d.bias[3]));let h=m*s,g=0,y=h,b=h*2,A=-1;u==="RGBA"?(g=0,y=h,b=h*2,A=h*3):u==="RGB"?(g=0,y=h,b=h*2):u==="RBG"&&(g=0,b=h,y=h*2);for(let O=0;O<m;O++)for(let v=0;v<s;v++){let _=(r.data[g++]-l[0])*p[0],D=(r.data[y++]-l[1])*p[1],V=(r.data[b++]-l[2])*p[2],j=A===-1?255:(r.data[A++]-l[3])*p[3];a.fillStyle="rgba("+_+","+D+","+V+","+j+")",a.fillRect(v,O,1,1)}return e.toDataURL()}else throw new Error("Can not access image data")},Bt=(r,n)=>{let e=document.createElement("canvas").getContext("2d"),a;if(e!=null){let s,m,u;n?.tensorLayout!==void 0&&n.tensorLayout==="NHWC"?(s=r.dims[2],m=r.dims[1],u=r.dims[3]):(s=r.dims[3],m=r.dims[2],u=r.dims[1]);let d=n!==void 0&&n.format!==void 0?n.format:"RGB",p=n?.norm,l,h;p===void 0||p.mean===void 0?l=[255,255,255,255]:typeof p.mean=="number"?l=[p.mean,p.mean,p.mean,p.mean]:(l=[p.mean[0],p.mean[1],p.mean[2],255],p.mean[3]!==void 0&&(l[3]=p.mean[3])),p===void 0||p.bias===void 0?h=[0,0,0,0]:typeof p.bias=="number"?h=[p.bias,p.bias,p.bias,p.bias]:(h=[p.bias[0],p.bias[1],p.bias[2],0],p.bias[3]!==void 0&&(h[3]=p.bias[3]));let g=m*s;if(n!==void 0&&(n.format!==void 0&&u===4&&n.format!=="RGBA"||u===3&&n.format!=="RGB"&&n.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let y=4,b=0,A=1,O=2,v=3,_=0,D=g,V=g*2,j=-1;d==="RGBA"?(_=0,D=g,V=g*2,j=g*3):d==="RGB"?(_=0,D=g,V=g*2):d==="RBG"&&(_=0,V=g,D=g*2),a=e.createImageData(s,m);for(let T=0;T<m*s;b+=y,A+=y,O+=y,v+=y,T++)a.data[b]=(r.data[_++]-h[0])*l[0],a.data[A]=(r.data[D++]-h[1])*l[1],a.data[O]=(r.data[V++]-h[2])*l[2],a.data[v]=j===-1?255:(r.data[j++]-h[3])*l[3]}else throw new Error("Can not access image data");return a}});var Ve,Ct,Mt,Rt,Lt,Ut=P(()=>{Pe();Ve=(r,n)=>{if(r===void 0)throw new Error("Image buffer must be defined");if(n.height===void 0||n.width===void 0)throw new Error("Image height and width must be defined");if(n.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:e,width:a}=n,s=n.norm??{mean:255,bias:0},m,u;typeof s.mean=="number"?m=[s.mean,s.mean,s.mean,s.mean]:m=[s.mean[0],s.mean[1],s.mean[2],s.mean[3]??255],typeof s.bias=="number"?u=[s.bias,s.bias,s.bias,s.bias]:u=[s.bias[0],s.bias[1],s.bias[2],s.bias[3]??0];let d=n.format!==void 0?n.format:"RGBA",p=n.tensorFormat!==void 0&&n.tensorFormat!==void 0?n.tensorFormat:"RGB",l=e*a,h=p==="RGBA"?new Float32Array(l*4):new Float32Array(l*3),g=4,y=0,b=1,A=2,O=3,v=0,_=l,D=l*2,V=-1;d==="RGB"&&(g=3,y=0,b=1,A=2,O=-1),p==="RGBA"?V=l*3:p==="RBG"?(v=0,D=l,_=l*2):p==="BGR"&&(D=0,_=l,v=l*2);for(let T=0;T<l;T++,y+=g,A+=g,b+=g,O+=g)h[v++]=(r[y]+u[0])/m[0],h[_++]=(r[b]+u[1])/m[1],h[D++]=(r[A]+u[2])/m[2],V!==-1&&O!==-1&&(h[V++]=(r[O]+u[3])/m[3]);return p==="RGBA"?new $("float32",h,[1,4,e,a]):new $("float32",h,[1,3,e,a])},Ct=async(r,n)=>{let e=typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement,a=typeof ImageData<"u"&&r instanceof ImageData,s=typeof ImageBitmap<"u"&&r instanceof ImageBitmap,m=typeof r=="string",u,d=n??{};if(e){let p=document.createElement("canvas");p.width=r.width,p.height=r.height;let l=p.getContext("2d");if(l!=null){let h=r.height,g=r.width;if(n!==void 0&&n.resizedHeight!==void 0&&n.resizedWidth!==void 0&&(h=n.resizedHeight,g=n.resizedWidth),n!==void 0){if(d=n,n.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");d.tensorFormat="RGBA",d.height=h,d.width=g}else d.tensorFormat="RGBA",d.height=h,d.width=g;l.drawImage(r,0,0),u=l.getImageData(0,0,g,h).data}else throw new Error("Can not access image data")}else if(a){let p,l;if(n!==void 0&&n.resizedWidth!==void 0&&n.resizedHeight!==void 0?(p=n.resizedHeight,l=n.resizedWidth):(p=r.height,l=r.width),n!==void 0&&(d=n),d.format="RGBA",d.height=p,d.width=l,n!==void 0){let h=document.createElement("canvas");h.width=l,h.height=p;let g=h.getContext("2d");if(g!=null)g.putImageData(r,0,0),u=g.getImageData(0,0,l,p).data;else throw new Error("Can not access image data")}else u=r.data}else if(s){if(n===void 0)throw new Error("Please provide image config with format for Imagebitmap");let p=document.createElement("canvas");p.width=r.width,p.height=r.height;let l=p.getContext("2d");if(l!=null){let h=r.height,g=r.width;return l.drawImage(r,0,0,g,h),u=l.getImageData(0,0,g,h).data,d.height=h,d.width=g,Ve(u,d)}else throw new Error("Can not access image data")}else{if(m)return new Promise((p,l)=>{let h=document.createElement("canvas"),g=h.getContext("2d");if(!r||!g)return l();let y=new Image;y.crossOrigin="Anonymous",y.src=r,y.onload=()=>{h.width=y.width,h.height=y.height,g.drawImage(y,0,0,h.width,h.height);let b=g.getImageData(0,0,h.width,h.height);d.height=h.height,d.width=h.width,p(Ve(b.data,d))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(u!==void 0)return Ve(u,d);throw new Error("Input data provided is not supported - aborted tensor creation")},Mt=(r,n)=>{let{width:e,height:a,download:s,dispose:m}=n,u=[1,a,e,4];return new $({location:"texture",type:"float32",texture:r,dims:u,download:s,dispose:m})},Rt=(r,n)=>{let{dataType:e,dims:a,download:s,dispose:m}=n;return new $({location:"gpu-buffer",type:e??"float32",gpuBuffer:r,dims:a,download:s,dispose:m})},Lt=(r,n,e)=>new $({location:"cpu-pinned",type:r,data:n,dims:e??[n.length]})});var be,_e,kt,Ft,Wt=P(()=>{be=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),_e=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),kt=!1,Ft=()=>{if(!kt){kt=!0;let r=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",n=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";r&&(be.set("int64",BigInt64Array),_e.set(BigInt64Array,"int64")),n&&(be.set("uint64",BigUint64Array),_e.set(BigUint64Array,"uint64"))}}});var zt,Nt,Ht=P(()=>{Pe();zt=r=>{let n=1;for(let e=0;e<r.length;e++){let a=r[e];if(typeof a!="number"||!Number.isSafeInteger(a))throw new TypeError(`dims[${e}] must be an integer, got: ${a}`);if(a<0)throw new RangeError(`dims[${e}] must be a non-negative integer, got: ${a}`);n*=a}return n},Nt=(r,n)=>{switch(r.location){case"cpu":return new $(r.type,r.data,n);case"cpu-pinned":return new $({location:"cpu-pinned",data:r.data,type:r.type,dims:n});case"texture":return new $({location:"texture",texture:r.texture,type:r.type,dims:n});case"gpu-buffer":return new $({location:"gpu-buffer",gpuBuffer:r.gpuBuffer,type:r.type,dims:n});default:throw new Error(`tensorReshape: tensor location ${r.location} is not supported`)}}});var $,Pe=P(()=>{Dt();Ut();Wt();Ht();$=class{constructor(n,e,a){Ft();let s,m;if(typeof n=="object"&&"location"in n)switch(this.dataLocation=n.location,s=n.type,m=n.dims,n.location){case"cpu-pinned":{let d=be.get(s);if(!d)throw new TypeError(`unsupported type "${s}" to create tensor from pinned buffer`);if(!(n.data instanceof d))throw new TypeError(`buffer should be of type ${d.name}`);this.cpuData=n.data;break}case"texture":{if(s!=="float32")throw new TypeError(`unsupported type "${s}" to create tensor from texture`);this.gpuTextureData=n.texture,this.downloader=n.download,this.disposer=n.dispose;break}case"gpu-buffer":{if(s!=="float32"&&s!=="float16"&&s!=="int32"&&s!=="int64"&&s!=="uint32"&&s!=="bool")throw new TypeError(`unsupported type "${s}" to create tensor from gpu buffer`);this.gpuBufferData=n.gpuBuffer,this.downloader=n.download,this.disposer=n.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let d,p;if(typeof n=="string")if(s=n,p=a,n==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");d=e}else{let l=be.get(n);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${n}.`);if(Array.isArray(e)){if(n==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");n==="uint64"||n==="int64"?d=l.from(e,BigInt):d=l.from(e)}else if(e instanceof l)d=e;else throw new TypeError(`A ${s} tensor's data must be type of ${l}`)}else if(p=e,Array.isArray(n)){if(n.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof n[0];if(l==="string")s="string",d=n;else if(l==="boolean")s="bool",d=Uint8Array.from(n);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=_e.get(n.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${n.constructor}.`);s=l,d=n}if(p===void 0)p=[d.length];else if(!Array.isArray(p))throw new TypeError("A tensor's dims must be a number array");m=p,this.cpuData=d,this.dataLocation="cpu"}let u=zt(m);if(this.cpuData&&u!==this.cpuData.length)throw new Error(`Tensor's size(${u}) does not match data length(${this.cpuData.length}).`);this.type=s,this.dims=m,this.size=u}static async fromImage(n,e){return Ct(n,e)}static fromTexture(n,e){return Mt(n,e)}static fromGpuBuffer(n,e){return Rt(n,e)}static fromPinnedBuffer(n,e,a){return Lt(n,e,a)}toDataURL(n){return _t(this,n)}toImageData(n){return Bt(this,n)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(n){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,n&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(n){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return Nt(this,n)}}});var ee,qe=P(()=>{Pe();ee=$});var Be,$t=P(()=>{Ge();qe();Be=class r{constructor(n){this.handler=n}async run(n,e,a){let s={},m={};if(typeof n!="object"||n===null||n instanceof ee||Array.isArray(n))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof e=="object"){if(e===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(e instanceof ee)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(e)){if(e.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let l of e){if(typeof l!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(l)===-1)throw new RangeError(`'fetches' contains invalid output name: ${l}.`);s[l]=null}if(typeof a=="object"&&a!==null)m=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let l=!1,h=Object.getOwnPropertyNames(e);for(let g of this.outputNames)if(h.indexOf(g)!==-1){let y=e[g];(y===null||y instanceof ee)&&(l=!0,u=!1,s[g]=y)}if(l){if(typeof a=="object"&&a!==null)m=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else m=e}}else if(typeof e<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let l of this.inputNames)if(typeof n[l]>"u")throw new Error(`input '${l}' is missing in 'feeds'.`);if(u)for(let l of this.outputNames)s[l]=null;let d=await this.handler.run(n,s,m),p={};for(let l in d)if(Object.hasOwnProperty.call(d,l)){let h=d[l];h instanceof ee?p[l]=h:p[l]=new ee(h.type,h.data,h.dims)}return p}async release(){return this.handler.dispose()}static async create(n,e,a,s){let m,u={};if(typeof n=="string"){if(m=n,typeof e=="object"&&e!==null)u=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else if(n instanceof Uint8Array){if(m=n,typeof e=="object"&&e!==null)u=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer){let g=n,y=0,b=n.byteLength;if(typeof e=="object"&&e!==null)u=e;else if(typeof e=="number"){if(y=e,!Number.isSafeInteger(y))throw new RangeError("'byteOffset' must be an integer.");if(y<0||y>=g.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${g.byteLength}).`);if(b=n.byteLength-y,typeof a=="number"){if(b=a,!Number.isSafeInteger(b))throw new RangeError("'byteLength' must be an integer.");if(b<=0||y+b>g.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${g.byteLength-y}].`);if(typeof s=="object"&&s!==null)u=s;else if(typeof s<"u")throw new TypeError("'options' must be an object.")}else if(typeof a<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof e<"u")throw new TypeError("'options' must be an object.");m=new Uint8Array(g,y,b)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let p=(u.executionProviders||[]).map(g=>typeof g=="string"?g:g.name),h=await(await Ot(p)).createInferenceSessionHandler(m,u);return new r(h)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var Bn,jt=P(()=>{$t();Bn=Be});var Gt=P(()=>{});var De,Yt=P(()=>{De=class{constructor(n){this.handler=n}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}static async create(n,e){throw new Error("Method not implemented")}async loadParametersBuffer(n,e){throw new Error("Method not implemented.")}async getContiguousParameters(n){throw new Error("Method not implemented.")}async runTrainStep(n,e,a){throw new Error("Method not implemented.")}async release(){return this.handler.dispose()}}});var Rn,Vt=P(()=>{Yt();Rn=De});var pe=P(()=>{Tt();Pt();jt();qe();Gt();Vt()});var Xt={};$e(Xt,{readFile:()=>Hr});var Hr,Jt=P(()=>{Hr=void 0});var Kt={};$e(Kt,{join:()=>$r});var $r,Zt=P(()=>{$r=void 0});var tr=zr((er,Xe)=>{"use strict";var Qt=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(n={}){var e=n,a,s;e.ready=new Promise((t,o)=>{a=t,s=o});var m=Object.assign({},e),u="./this.program",d=typeof window=="object",p=typeof importScripts=="function",l=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",h="",g,y,b;if(l){var A=(Jt(),je(Xt)),O=(Zt(),je(Kt));h=p?O.dirname(h)+"/":__dirname+"/",g=(t,o)=>(t=t.startsWith("file://")?new URL(t):O.normalize(t),A.readFileSync(t,o?void 0:"utf8")),b=t=>(t=g(t,!0),t.buffer||(t=new Uint8Array(t)),t),y=(t,o,i,c=!0)=>{t=t.startsWith("file://")?new URL(t):O.normalize(t),A.readFile(t,c?void 0:"utf8",(w,S)=>{w?i(w):o(c?S.buffer:S)})},!e.thisProgram&&1<process.argv.length&&(u=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),e.inspect=()=>"[Emscripten Module object]"}else(d||p)&&(p?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),r&&(h=r),h.indexOf("blob:")!==0?h=h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):h="",g=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},p&&(b=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),y=(t,o,i)=>{var c=new XMLHttpRequest;c.open("GET",t,!0),c.responseType="arraybuffer",c.onload=()=>{c.status==200||c.status==0&&c.response?o(c.response):i()},c.onerror=i,c.send(null)});var v=e.print||console.log.bind(console),_=e.printErr||console.error.bind(console);Object.assign(e,m),m=null,e.thisProgram&&(u=e.thisProgram);var D;e.wasmBinary&&(D=e.wasmBinary);var V=e.noExitRuntime||!0;typeof WebAssembly!="object"&&W("no native wasm support detected");var j,T,fe=!1,re,k,E,F;function Oe(){var t=j.buffer;e.HEAP8=re=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=k=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=F=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var he=[],te=[],I=[];function ne(){var t=e.preRun.shift();he.unshift(t)}var Z=0,K=null,Q=null;function W(t){throw e.onAbort&&e.onAbort(t),t="Aborted("+t+")",_(t),fe=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function q(t){return t.startsWith("data:application/octet-stream;base64,")}var oe;if(oe="ort-wasm.wasm",!q(oe)){var se=oe;oe=e.locateFile?e.locateFile(se,h):h+se}function ye(t){if(t==oe&&D)return new Uint8Array(D);if(b)return b(t);throw"both async and sync fetching of the wasm failed"}function Te(t){if(!D&&(d||p)){if(typeof fetch=="function"&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at '"+t+"'";return o.arrayBuffer()}).catch(()=>ye(t));if(y)return new Promise((o,i)=>{y(t,c=>o(new Uint8Array(c)),i)})}return Promise.resolve().then(()=>ye(t))}function Ae(t,o,i){return Te(t).then(c=>WebAssembly.instantiate(c,o)).then(c=>c).then(i,c=>{_("failed to asynchronously prepare wasm: "+c),W(c)})}function ie(t,o){var i=oe;return D||typeof WebAssembly.instantiateStreaming!="function"||q(i)||i.startsWith("file://")||l||typeof fetch!="function"?Ae(i,t,o):fetch(i,{credentials:"same-origin"}).then(c=>WebAssembly.instantiateStreaming(c,t).then(o,function(w){return _("wasm streaming compile failed: "+w),_("falling back to ArrayBuffer instantiation"),Ae(i,t,o)}))}var X,le=t=>{for(;0<t.length;)t.shift()(e)};function N(t){this.va=t-24,this.Ea=function(o){F[this.va+4>>2>>>0]=o},this.za=function(o){F[this.va+8>>2>>>0]=o},this.xa=function(o,i){this.ya(),this.Ea(o),this.za(i)},this.ya=function(){F[this.va+16>>2>>>0]=0}}var z=0,ge=0,we=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ve=(t,o,i)=>{o>>>=0;var c=o+i;for(i=o;t[i]&&!(i>=c);)++i;if(16<i-o&&t.buffer&&we)return we.decode(t.subarray(o,i));for(c="";o<i;){var w=t[o++];if(w&128){var S=t[o++]&63;if((w&224)==192)c+=String.fromCharCode((w&31)<<6|S);else{var x=t[o++]&63;w=(w&240)==224?(w&15)<<12|S<<6|x:(w&7)<<18|S<<12|x<<6|t[o++]&63,65536>w?c+=String.fromCharCode(w):(w-=65536,c+=String.fromCharCode(55296|w>>10,56320|w&1023))}}else c+=String.fromCharCode(w)}return c},ke=(t,o)=>(t>>>=0)?ve(k,t,o):"",Fe=t=>{for(var o=0,i=0;i<t.length;++i){var c=t.charCodeAt(i);127>=c?o++:2047>=c?o+=2:55296<=c&&57343>=c?(o+=4,++i):o+=3}return o},We=(t,o,i,c)=>{if(i>>>=0,!(0<c))return 0;var w=i;c=i+c-1;for(var S=0;S<t.length;++S){var x=t.charCodeAt(S);if(55296<=x&&57343>=x){var H=t.charCodeAt(++S);x=65536+((x&1023)<<10)|H&1023}if(127>=x){if(i>=c)break;o[i++>>>0]=x}else{if(2047>=x){if(i+1>=c)break;o[i++>>>0]=192|x>>6}else{if(65535>=x){if(i+2>=c)break;o[i++>>>0]=224|x>>12}else{if(i+3>=c)break;o[i++>>>0]=240|x>>18,o[i++>>>0]=128|x>>12&63}o[i++>>>0]=128|x>>6&63}o[i++>>>0]=128|x&63}}return o[i>>>0]=0,i-w},ce=t=>t%4===0&&(t%100!==0||t%400===0),it=[0,31,60,91,121,152,182,213,244,274,305,335],at=[0,31,59,90,120,151,181,212,243,273,304,334],ut=t=>{var o=Fe(t)+1,i=pt(o);return i&&We(t,k,i,o),i},ze={},ft=()=>{if(!Ne){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"},o;for(o in ze)ze[o]===void 0?delete t[o]:t[o]=ze[o];var i=[];for(o in t)i.push(`${o}=${t[o]}`);Ne=i}return Ne},Ne,Mr=[null,[],[]],lt=[31,29,31,30,31,30,31,31,30,31,30,31],ct=[31,28,31,30,31,30,31,31,30,31,30,31];function Rr(t){var o=Array(Fe(t)+1);return We(t,o,0,o.length),o}function dt(t,o,i,c){function w(f,B,C){for(f=typeof f=="number"?f.toString():f||"";f.length<B;)f=C[0]+f;return f}function S(f,B){return w(f,B,"0")}function x(f,B){function C(St){return 0>St?-1:0<St?1:0}var ae;return(ae=C(f.getFullYear()-B.getFullYear()))===0&&(ae=C(f.getMonth()-B.getMonth()))===0&&(ae=C(f.getDate()-B.getDate())),ae}function H(f){switch(f.getDay()){case 0:return new Date(f.getFullYear()-1,11,29);case 1:return f;case 2:return new Date(f.getFullYear(),0,3);case 3:return new Date(f.getFullYear(),0,2);case 4:return new Date(f.getFullYear(),0,1);case 5:return new Date(f.getFullYear()-1,11,31);case 6:return new Date(f.getFullYear()-1,11,30)}}function J(f){var B=f.ra;for(f=new Date(new Date(f.sa+1900,0,1).getTime());0<B;){var C=f.getMonth(),ae=(ce(f.getFullYear())?lt:ct)[C];if(B>ae-f.getDate())B-=ae-f.getDate()+1,f.setDate(1),11>C?f.setMonth(C+1):(f.setMonth(0),f.setFullYear(f.getFullYear()+1));else{f.setDate(f.getDate()+B);break}}return C=new Date(f.getFullYear()+1,0,4),B=H(new Date(f.getFullYear(),0,4)),C=H(C),0>=x(B,f)?0>=x(C,f)?f.getFullYear()+1:f.getFullYear():f.getFullYear()-1}t>>>=0,o>>>=0,i>>>=0,c>>>=0;var G=E[c+40>>2>>>0];c={Ca:E[c>>2>>>0],Ba:E[c+4>>2>>>0],ta:E[c+8>>2>>>0],wa:E[c+12>>2>>>0],ua:E[c+16>>2>>>0],sa:E[c+20>>2>>>0],ma:E[c+24>>2>>>0],ra:E[c+28>>2>>>0],Fa:E[c+32>>2>>>0],Aa:E[c+36>>2>>>0],Da:G?ke(G):""},i=ke(i),G={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Y in G)i=i.replace(new RegExp(Y,"g"),G[Y]);var bt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Et="January February March April May June July August September October November December".split(" ");G={"%a":f=>bt[f.ma].substring(0,3),"%A":f=>bt[f.ma],"%b":f=>Et[f.ua].substring(0,3),"%B":f=>Et[f.ua],"%C":f=>S((f.sa+1900)/100|0,2),"%d":f=>S(f.wa,2),"%e":f=>w(f.wa,2," "),"%g":f=>J(f).toString().substring(2),"%G":f=>J(f),"%H":f=>S(f.ta,2),"%I":f=>(f=f.ta,f==0?f=12:12<f&&(f-=12),S(f,2)),"%j":f=>{for(var B=0,C=0;C<=f.ua-1;B+=(ce(f.sa+1900)?lt:ct)[C++]);return S(f.wa+B,3)},"%m":f=>S(f.ua+1,2),"%M":f=>S(f.Ba,2),"%n":()=>`
`,"%p":f=>0<=f.ta&&12>f.ta?"AM":"PM","%S":f=>S(f.Ca,2),"%t":()=>"	","%u":f=>f.ma||7,"%U":f=>S(Math.floor((f.ra+7-f.ma)/7),2),"%V":f=>{var B=Math.floor((f.ra+7-(f.ma+6)%7)/7);if(2>=(f.ma+371-f.ra-2)%7&&B++,B)B==53&&(C=(f.ma+371-f.ra)%7,C==4||C==3&&ce(f.sa)||(B=1));else{B=52;var C=(f.ma+7-f.ra-1)%7;(C==4||C==5&&ce(f.sa%400-1))&&B++}return S(B,2)},"%w":f=>f.ma,"%W":f=>S(Math.floor((f.ra+7-(f.ma+6)%7)/7),2),"%y":f=>(f.sa+1900).toString().substring(2),"%Y":f=>f.sa+1900,"%z":f=>{f=f.Aa;var B=0<=f;return f=Math.abs(f)/60,(B?"+":"-")+("0000"+(f/60*100+f%60)).slice(-4)},"%Z":f=>f.Da,"%%":()=>"%"},i=i.replace(/%%/g,"\0\0");for(Y in G)i.includes(Y)&&(i=i.replace(new RegExp(Y,"g"),G[Y](c)));return i=i.replace(/\0\0/g,"%"),Y=Rr(i),Y.length>o?0:(re.set(Y,t>>>0),Y.length-1)}var Lr={a:function(t,o,i){throw t>>>=0,new N(t).xa(o>>>0,i>>>0),z=t,ge++,z},e:function(){return 0},H:function(){},x:function(){},z:function(){},k:function(){return 0},F:function(){},B:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},l:()=>!0,o:function(t,o,i){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,i>>>=0,t=new Date(1e3*t),E[i>>2>>>0]=t.getUTCSeconds(),E[i+4>>2>>>0]=t.getUTCMinutes(),E[i+8>>2>>>0]=t.getUTCHours(),E[i+12>>2>>>0]=t.getUTCDate(),E[i+16>>2>>>0]=t.getUTCMonth(),E[i+20>>2>>>0]=t.getUTCFullYear()-1900,E[i+24>>2>>>0]=t.getUTCDay(),E[i+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},p:function(t,o,i){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,i>>>=0,t=new Date(1e3*t),E[i>>2>>>0]=t.getSeconds(),E[i+4>>2>>>0]=t.getMinutes(),E[i+8>>2>>>0]=t.getHours(),E[i+12>>2>>>0]=t.getDate(),E[i+16>>2>>>0]=t.getMonth(),E[i+20>>2>>>0]=t.getFullYear()-1900,E[i+24>>2>>>0]=t.getDay(),E[i+28>>2>>>0]=(ce(t.getFullYear())?it:at)[t.getMonth()]+t.getDate()-1|0,E[i+36>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var c=new Date(t.getFullYear(),0,1).getTimezoneOffset();E[i+32>>2>>>0]=(o!=c&&t.getTimezoneOffset()==Math.min(c,o))|0},q:function(t){t>>>=0;var o=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),i=E[t+32>>2>>>0],c=o.getTimezoneOffset(),w=new Date(o.getFullYear(),6,1).getTimezoneOffset(),S=new Date(o.getFullYear(),0,1).getTimezoneOffset(),x=Math.min(S,w);return 0>i?E[t+32>>2>>>0]=+(w!=S&&x==c):0<i!=(x==c)&&(w=Math.max(S,w),o.setTime(o.getTime()+6e4*((0<i?x:w)-c))),E[t+24>>2>>>0]=o.getDay(),E[t+28>>2>>>0]=(ce(o.getFullYear())?it:at)[o.getMonth()]+o.getDate()-1|0,E[t>>2>>>0]=o.getSeconds(),E[t+4>>2>>>0]=o.getMinutes(),E[t+8>>2>>>0]=o.getHours(),E[t+12>>2>>>0]=o.getDate(),E[t+16>>2>>>0]=o.getMonth(),E[t+20>>2>>>0]=o.getYear(),t=o.getTime()/1e3,mt((X=t,1<=+Math.abs(X)?0<X?+Math.floor(X/4294967296)>>>0:~~+Math.ceil((X-+(~~X>>>0))/4294967296)>>>0:0)),t>>>0},m:function(){return-52},n:function(){},t:function(t,o,i){function c(J){return(J=J.toTimeString().match(/\(([A-Za-z ]+)\)$/))?J[1]:"GMT"}i>>>=0;var w=new Date().getFullYear(),S=new Date(w,0,1),x=new Date(w,6,1);w=S.getTimezoneOffset();var H=x.getTimezoneOffset();F[t>>>0>>2>>>0]=60*Math.max(w,H),E[o>>>0>>2>>>0]=+(w!=H),t=c(S),o=c(x),t=ut(t),o=ut(o),H<w?(F[i>>2>>>0]=t,F[i+4>>2>>>0]=o):(F[i>>2>>>0]=o,F[i+4>>2>>>0]=t)},d:()=>{W("")},h:function(){return Date.now()},u:function(){return 4294901760},b:()=>performance.now(),I:function(t,o,i){return o>>>=0,k.copyWithin(t>>>0>>>0,o>>>0,o+(i>>>0)>>>0)},s:function(t){t>>>=0;var o=k.length;if(4294901760<t)return!1;for(var i=1;4>=i;i*=2){var c=o*(1+.2/i);c=Math.min(c,t+100663296);var w=Math;c=Math.max(t,c);e:{w=w.min.call(w,4294901760,c+(65536-c%65536)%65536)-j.buffer.byteLength+65535>>>16;try{j.grow(w),Oe();var S=1;break e}catch{}S=void 0}if(S)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var i=0;return ft().forEach(function(c,w){var S=o+i;for(w=F[t+4*w>>2>>>0]=S,S=0;S<c.length;++S)re[w++>>0>>>0]=c.charCodeAt(S);re[w>>0>>>0]=0,i+=c.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var i=ft();F[t>>2>>>0]=i.length;var c=0;return i.forEach(function(w){c+=w.length+1}),F[o>>2>>>0]=c,0},f:()=>52,j:function(){return 52},r:function(){return 70},i:function(t,o,i,c){o>>>=0,i>>>=0,c>>>=0;for(var w=0,S=0;S<i;S++){var x=F[o>>2>>>0],H=F[o+4>>2>>>0];o+=8;for(var J=0;J<H;J++){var G=k[x+J>>>0],Y=Mr[t];G===0||G===10?((t===1?v:_)(ve(Y,0)),Y.length=0):Y.push(G)}w+=H}return F[c>>2>>>0]=w,0},A:dt,c:function(t,o,i,c){return dt(t>>>0,o>>>0,i>>>0,c>>>0)}};(function(){function t(i){if(i=i.exports,T=i=Ur(i),j=T.J,Oe(),te.unshift(T.K),Z--,e.monitorRunDependencies&&e.monitorRunDependencies(Z),Z==0&&(K!==null&&(clearInterval(K),K=null),Q)){var c=Q;Q=null,c()}return i}var o={a:Lr};if(Z++,e.monitorRunDependencies&&e.monitorRunDependencies(Z),e.instantiateWasm)try{return e.instantiateWasm(o,t)}catch(i){_("Module.instantiateWasm callback failed with error: "+i),s(i)}return ie(o,function(i){t(i.instance)}).catch(s),{}})(),e._OrtInit=(t,o)=>(e._OrtInit=T.L)(t,o),e._OrtGetLastError=(t,o)=>(e._OrtGetLastError=T.M)(t,o),e._OrtCreateSessionOptions=(t,o,i,c,w,S,x,H,J,G)=>(e._OrtCreateSessionOptions=T.N)(t,o,i,c,w,S,x,H,J,G),e._OrtAppendExecutionProvider=(t,o)=>(e._OrtAppendExecutionProvider=T.O)(t,o),e._OrtAddFreeDimensionOverride=(t,o,i)=>(e._OrtAddFreeDimensionOverride=T.P)(t,o,i),e._OrtAddSessionConfigEntry=(t,o,i)=>(e._OrtAddSessionConfigEntry=T.Q)(t,o,i),e._OrtReleaseSessionOptions=t=>(e._OrtReleaseSessionOptions=T.R)(t),e._OrtCreateSession=(t,o,i)=>(e._OrtCreateSession=T.S)(t,o,i),e._OrtReleaseSession=t=>(e._OrtReleaseSession=T.T)(t),e._OrtGetInputOutputCount=(t,o,i)=>(e._OrtGetInputOutputCount=T.U)(t,o,i),e._OrtGetInputName=(t,o)=>(e._OrtGetInputName=T.V)(t,o),e._OrtGetOutputName=(t,o)=>(e._OrtGetOutputName=T.W)(t,o),e._OrtFree=t=>(e._OrtFree=T.X)(t),e._OrtCreateTensor=(t,o,i,c,w,S)=>(e._OrtCreateTensor=T.Y)(t,o,i,c,w,S),e._OrtGetTensorData=(t,o,i,c,w)=>(e._OrtGetTensorData=T.Z)(t,o,i,c,w),e._OrtReleaseTensor=t=>(e._OrtReleaseTensor=T._)(t),e._OrtCreateRunOptions=(t,o,i,c)=>(e._OrtCreateRunOptions=T.$)(t,o,i,c),e._OrtAddRunConfigEntry=(t,o,i)=>(e._OrtAddRunConfigEntry=T.aa)(t,o,i),e._OrtReleaseRunOptions=t=>(e._OrtReleaseRunOptions=T.ba)(t),e._OrtCreateBinding=t=>(e._OrtCreateBinding=T.ca)(t),e._OrtBindInput=(t,o,i)=>(e._OrtBindInput=T.da)(t,o,i),e._OrtBindOutput=(t,o,i,c)=>(e._OrtBindOutput=T.ea)(t,o,i,c),e._OrtClearBoundOutputs=t=>(e._OrtClearBoundOutputs=T.fa)(t),e._OrtReleaseBinding=t=>(e._OrtReleaseBinding=T.ga)(t),e._OrtRunWithBinding=(t,o,i,c,w)=>(e._OrtRunWithBinding=T.ha)(t,o,i,c,w),e._OrtRun=(t,o,i,c,w,S,x,H)=>(e._OrtRun=T.ia)(t,o,i,c,w,S,x,H),e._OrtEndProfiling=t=>(e._OrtEndProfiling=T.ja)(t);var pt=e._malloc=t=>(pt=e._malloc=T.ka)(t);e._free=t=>(e._free=T.la)(t);var mt=t=>(mt=T.na)(t),ht=()=>(ht=T.oa)(),yt=t=>(yt=T.pa)(t),gt=t=>(gt=T.qa)(t);function Ur(t){t=Object.assign({},t);var o=c=>()=>c()>>>0,i=c=>w=>c(w)>>>0;return t.__errno_location=o(t.__errno_location),t.malloc=i(t.malloc),t.stackSave=o(t.stackSave),t.stackAlloc=i(t.stackAlloc),t}e.stackAlloc=gt,e.stackSave=ht,e.stackRestore=yt,e.UTF8ToString=ke,e.stringToUTF8=(t,o,i)=>We(t,k,o,i),e.lengthBytesUTF8=Fe;var xe;Q=function t(){xe||wt(),xe||(Q=t)};function wt(){function t(){if(!xe&&(xe=!0,e.calledRun=!0,!fe)){if(le(te),a(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;){var o=e.postRun.shift();I.unshift(o)}le(I)}}if(!(0<Z)){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)ne();le(he),0<Z||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),t()},1)):t())}}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return wt(),n.ready}})();typeof er=="object"&&typeof Xe=="object"?Xe.exports=Qt:typeof define=="function"&&define.amd&&define([],()=>Qt)});var nr,jr,Je,Ke,Ce,rr,Gr,Yr,Vr,or,R,me=P(()=>{"use strict";nr=tr(),jr=nr,Ke=!1,Ce=!1,rr=!1,Gr=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},Yr=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},Vr=(r,n)=>n?r?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":r?"ort-wasm-simd.wasm":"ort-wasm.wasm",or=async r=>{if(Ke)return Promise.resolve();if(Ce)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(rr)throw new Error("previous call to 'initializeWebAssembly()' failed.");Ce=!0;let n=r.initTimeout,e=r.numThreads,a=r.simd,s=e>1&&Gr(),m=a&&Yr(),u=r.wasmPaths,d=typeof u=="string"?u:void 0,p=Vr(m,s),l=typeof u=="object"?u[p]:void 0,h=!1,g=[];if(n>0&&g.push(new Promise(y=>{setTimeout(()=>{h=!0,y()},n)})),g.push(new Promise((y,b)=>{(s?jr:nr)({locateFile:(v,_)=>v.endsWith(".wasm")?l||(d??_)+p:_+v}).then(v=>{Ce=!1,Ke=!0,Je=v,y()},v=>{Ce=!1,rr=!0,b(v)})})),await Promise.race(g),h)throw new Error(`WebAssembly backend initializing failed due to timeout: ${n}ms`)},R=()=>{if(Ke&&Je)return Je;throw new Error("WebAssembly is not initialized yet.")}});var L,Ee,M,Me=P(()=>{"use strict";me();L=(r,n)=>{let e=R(),a=e.lengthBytesUTF8(r)+1,s=e._malloc(a);return e.stringToUTF8(r,s,a),n.push(s),s},Ee=(r,n,e,a)=>{if(typeof r=="object"&&r!==null){if(e.has(r))throw new Error("Circular reference in options");e.add(r)}Object.entries(r).forEach(([s,m])=>{let u=n?n+s:s;if(typeof m=="object")Ee(m,u+".",e,a);else if(typeof m=="string"||typeof m=="number")a(u,m.toString());else if(typeof m=="boolean")a(u,m?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof m}`)})},M=r=>{let n=R(),e=n.stackSave();try{let a=n.stackAlloc(8);n._OrtGetLastError(a,a+4);let s=n.HEAP32[a/4],m=n.HEAPU32[a/4+1],u=m?n.UTF8ToString(m):"";throw new Error(`${r} ERROR_CODE: ${s}, ERROR_MESSAGE: ${u}`)}finally{n.stackRestore(e)}}});var sr,ir=P(()=>{"use strict";me();Me();sr=r=>{let n=R(),e=0,a=[],s=r||{};try{if(r?.logSeverityLevel===void 0)s.logSeverityLevel=2;else if(typeof r.logSeverityLevel!="number"||!Number.isInteger(r.logSeverityLevel)||r.logSeverityLevel<0||r.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${r.logSeverityLevel}`);if(r?.logVerbosityLevel===void 0)s.logVerbosityLevel=0;else if(typeof r.logVerbosityLevel!="number"||!Number.isInteger(r.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${r.logVerbosityLevel}`);r?.terminate===void 0&&(s.terminate=!1);let m=0;return r?.tag!==void 0&&(m=L(r.tag,a)),e=n._OrtCreateRunOptions(s.logSeverityLevel,s.logVerbosityLevel,!!s.terminate,m),e===0&&M("Can't create run options."),r?.extra!==void 0&&Ee(r.extra,"",new WeakSet,(u,d)=>{let p=L(u,a),l=L(d,a);n._OrtAddRunConfigEntry(e,p,l)!==0&&M(`Can't set a run config entry: ${u} - ${d}.`)}),[e,a]}catch(m){throw e!==0&&n._OrtReleaseRunOptions(e),a.forEach(u=>n._free(u)),m}}});var qr,Xr,Jr,Kr,ar,ur=P(()=>{"use strict";me();Me();qr=r=>{switch(r){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${r}`)}},Xr=r=>{switch(r){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${r}`)}},Jr=r=>{r.extra||(r.extra={}),r.extra.session||(r.extra.session={});let n=r.extra.session;n.use_ort_model_bytes_directly||(n.use_ort_model_bytes_directly="1"),r.executionProviders&&r.executionProviders.some(e=>(typeof e=="string"?e:e.name)==="webgpu")&&(r.enableMemPattern=!1)},Kr=(r,n,e)=>{for(let a of n){let s=typeof a=="string"?a:a.name;switch(s){case"xnnpack":s="XNNPACK";break;case"webnn":if(s="WEBNN",typeof a!="string"){let u=a;if(u?.deviceType){let d=L("deviceType",e),p=L(u.deviceType,e);R()._OrtAddSessionConfigEntry(r,d,p)!==0&&M(`Can't set a session config entry: 'deviceType' - ${u.deviceType}.`)}if(u?.powerPreference){let d=L("powerPreference",e),p=L(u.powerPreference,e);R()._OrtAddSessionConfigEntry(r,d,p)!==0&&M(`Can't set a session config entry: 'powerPreference' - ${u.powerPreference}.`)}}break;case"webgpu":if(s="JS",typeof a!="string"){let u=a;if(u?.preferredLayout){if(u.preferredLayout!=="NCHW"&&u.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${u.preferredLayout}`);let d=L("preferredLayout",e),p=L(u.preferredLayout,e);R()._OrtAddSessionConfigEntry(r,d,p)!==0&&M(`Can't set a session config entry: 'preferredLayout' - ${u.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${s}`)}let m=L(s,e);R()._OrtAppendExecutionProvider(r,m)!==0&&M(`Can't append execution provider: ${s}.`)}},ar=r=>{let n=R(),e=0,a=[],s=r||{};Jr(s);try{let m=qr(s.graphOptimizationLevel??"all"),u=Xr(s.executionMode??"sequential"),d=typeof s.logId=="string"?L(s.logId,a):0,p=s.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);let l=s.logVerbosityLevel??0;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log verbosity level is not valid: ${l}`);let h=typeof s.optimizedModelFilePath=="string"?L(s.optimizedModelFilePath,a):0;if(e=n._OrtCreateSessionOptions(m,!!s.enableCpuMemArena,!!s.enableMemPattern,u,!!s.enableProfiling,0,d,p,l,h),e===0&&M("Can't create session options."),s.executionProviders&&Kr(e,s.executionProviders,a),s.freeDimensionOverrides)for(let[g,y]of Object.entries(s.freeDimensionOverrides)){if(typeof g!="string")throw new Error(`free dimension override name must be a string: ${g}`);if(typeof y!="number"||!Number.isInteger(y)||y<0)throw new Error(`free dimension override value must be a non-negative integer: ${y}`);let b=L(g,a);n._OrtAddFreeDimensionOverride(e,b,y)!==0&&M(`Can't set a free dimension override: ${g} - ${y}.`)}return s.extra!==void 0&&Ee(s.extra,"",new WeakSet,(g,y)=>{let b=L(g,a),A=L(y,a);n._OrtAddSessionConfigEntry(e,b,A)!==0&&M(`Can't set a session config entry: ${g} - ${y}.`)}),[e,a]}catch(m){throw e!==0&&n._OrtReleaseSessionOptions(e),a.forEach(u=>n._free(u)),m}}});var Ze,fr,Qe,lr,cr,Re,dr,et=P(()=>{"use strict";Ze=r=>{switch(r){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${r}`)}},fr=r=>{switch(r){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${r}`)}},Qe=r=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][r],lr=r=>{switch(r){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${r}`)}},cr=r=>{switch(r){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${r}`)}},Re=r=>r==="float32"||r==="int32"||r==="int64"||r==="bool"||r==="float16"||r==="uint32",dr=r=>{switch(r){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${r}`)}}});var Zr,Qr,mr,Se,tt,rt,hr,yr,pr,gr,wr,br=P(()=>{"use strict";ir();ur();et();me();Me();Zr=r=>{let n=R(),e=n.stackSave();try{let a=n.stackAlloc(8);return n._OrtGetInputOutputCount(r,a,a+4)!==0&&M("Can't get session input/output count."),[n.HEAP32[a/4],n.HEAP32[a/4+1]]}finally{n.stackRestore(e)}},Qr=(r,n)=>{R()._OrtInit(r,n)!==0&&M("Can't initialize onnxruntime.")},mr=async r=>{Qr(r.wasm.numThreads,cr(r.logLevel))},Se=new Map,tt=r=>{let n=R(),e=n._malloc(r.byteLength);if(e===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${r.byteLength}.`);return n.HEAPU8.set(r,e),[e,r.byteLength]},rt=(r,n)=>{let e=R(),a=0,s=0,m=0,u=[],d=[],p=[];try{[s,u]=ar(n),a=e._OrtCreateSession(r[0],r[1],s),a===0&&M("Can't create a session.");let[l,h]=Zr(a),g=[],y=[],b=[];for(let O=0;O<l;O++){let v=e._OrtGetInputName(a,O);v===0&&M("Can't get an input name."),d.push(v),g.push(e.UTF8ToString(v))}for(let O=0;O<h;O++){let v=e._OrtGetOutputName(a,O);v===0&&M("Can't get an output name."),p.push(v);let _=e.UTF8ToString(v);y.push(_)}let A=null;return Se.set(a,[a,d,p,A]),[a,g,y]}catch(l){throw d.forEach(h=>e._OrtFree(h)),p.forEach(h=>e._OrtFree(h)),m!==0&&e._OrtReleaseBinding(m),a!==0&&e._OrtReleaseSession(a),l}finally{e._free(r[0]),s!==0&&e._OrtReleaseSessionOptions(s),u.forEach(l=>e._free(l))}},hr=(r,n)=>{let e=tt(r);return rt(e,n)},yr=r=>{let n=R(),e=Se.get(r);if(!e)throw new Error(`cannot release session. invalid session id: ${r}`);let[a,s,m,u]=e;u&&n._OrtReleaseBinding(u.handle),n.jsepUnregisterBuffers?.(r),s.forEach(d=>n._OrtFree(d)),m.forEach(d=>n._OrtFree(d)),n._OrtReleaseSession(a),Se.delete(r)},pr=(r,n,e,a,s)=>{if(!r){n.push(0);return}let m=R(),u=r[0],d=r[1],p=r[3],l,h;if(u==="string"&&p==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(p==="gpu-buffer"){let b=r[2].gpuBuffer,A=Qe(Ze(u));h=d.reduce((O,v)=>O*v,1)*A,l=m.jsepRegisterBuffer(a,s,b,h)}else{let b=r[2];if(Array.isArray(b)){h=4*b.length,l=m._malloc(h),e.push(l);let A=l/4;for(let O=0;O<b.length;O++){if(typeof b[O]!="string")throw new TypeError(`tensor data at index ${O} is not a string`);m.HEAPU32[A++]=L(b[O],e)}}else h=b.byteLength,l=m._malloc(h),e.push(l),m.HEAPU8.set(new Uint8Array(b.buffer,b.byteOffset,h),l)}let g=m.stackSave(),y=m.stackAlloc(4*d.length);try{let b=y/4;d.forEach(O=>m.HEAP32[b++]=O);let A=m._OrtCreateTensor(Ze(u),l,h,y,d.length,dr(p));A===0&&M(`Can't create tensor for input/output. session=${a}, index=${s}.`),n.push(A)}finally{m.stackRestore(g)}},gr=async(r,n,e,a,s,m)=>{let u=R(),d=Se.get(r);if(!d)throw new Error(`cannot run inference. invalid session id: ${r}`);let[p,l,h,g]=d,y=n.length,b=a.length,A=0,O=[],v=[],_=[],D=[],V=u.stackSave(),j=u.stackAlloc(y*4),T=u.stackAlloc(y*4),fe=u.stackAlloc(b*4),re=u.stackAlloc(b*4);try{[A,O]=sr(m);for(let I=0;I<y;I++)pr(e[I],v,D,r,n[I]);for(let I=0;I<b;I++)pr(s[I],_,D,r,y+a[I]);let k=j/4,E=T/4,F=fe/4,Oe=re/4;for(let I=0;I<y;I++)u.HEAPU32[k++]=v[I],u.HEAPU32[E++]=l[n[I]];for(let I=0;I<b;I++)u.HEAPU32[F++]=_[I],u.HEAPU32[Oe++]=h[a[I]];let he;he=await u._OrtRun(p,T,j,y,re,b,fe,A),he!==0&&M("failed to call OrtRun().");let te=[];for(let I=0;I<b;I++){let ne=u.HEAPU32[fe/4+I];if(ne===_[I]){te.push(s[I]);continue}let Z=u.stackSave(),K=u.stackAlloc(4*4),Q=!1,W,q=0;try{u._OrtGetTensorData(ne,K,K+4,K+8,K+12)!==0&&M(`Can't access output tensor data on index ${I}.`);let se=K/4,ye=u.HEAPU32[se++];q=u.HEAPU32[se++];let Te=u.HEAPU32[se++],Ae=u.HEAPU32[se++],ie=[];for(let N=0;N<Ae;N++)ie.push(u.HEAPU32[Te/4+N]);u._OrtFree(Te);let X=ie.reduce((N,z)=>N*z,1);W=fr(ye);let le=g?.outputPreferredLocations[a[I]];if(W==="string"){if(le==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let N=[],z=q/4;for(let ge=0;ge<X;ge++){let we=u.HEAPU32[z++],ve=ge===X-1?void 0:u.HEAPU32[z]-we;N.push(u.UTF8ToString(we,ve))}te.push([W,ie,N,"cpu"])}else if(le==="gpu-buffer"&&X>0){let N=u.jsepGetBuffer(q),z=Qe(ye);if(z===void 0||!Re(W))throw new Error(`Unsupported data type: ${W}`);Q=!0,te.push([W,ie,{gpuBuffer:N,download:u.jsepCreateDownloader(N,X*z,W),dispose:()=>{u._OrtReleaseTensor(ne)}},"gpu-buffer"])}else{let N=lr(W),z=new N(X);new Uint8Array(z.buffer,z.byteOffset,z.byteLength).set(u.HEAPU8.subarray(q,q+z.byteLength)),te.push([W,ie,z,"cpu"])}}finally{u.stackRestore(Z),W==="string"&&q&&u._free(q),Q||u._OrtReleaseTensor(ne)}}return g&&u._OrtClearBoundOutputs(g.handle),te}finally{u.stackRestore(V),v.forEach(k=>u._OrtReleaseTensor(k)),_.forEach(k=>u._OrtReleaseTensor(k)),D.forEach(k=>u._free(k)),A!==0&&u._OrtReleaseRunOptions(A),O.forEach(k=>u._free(k))}},wr=r=>{let n=R(),e=Se.get(r);if(!e)throw new Error("invalid session id");let a=e[0],s=n._OrtEndProfiling(a);s===0&&M("Can't get an profile file name."),n._OrtFree(s)}});var lo,Er,Sr,Or,Tr,nt,Ar,vr,xr,ot=P(()=>{"use strict";pe();br();me();lo=typeof document<"u"?document?.currentScript?.src:void 0,Er=async()=>or(U.wasm),Sr=async r=>{await mr(r)},Or=async r=>tt(r),Tr=async(r,n)=>rt(r,n),nt=async(r,n)=>hr(r,n),Ar=async r=>{yr(r)},vr=async(r,n,e,a,s,m)=>gr(r,n,e,a,s,m),xr=async r=>{wr(r)}});var Ir,Le,Pr,tn,Ue,_r=P(()=>{"use strict";pe();ot();et();Pr=(r,n)=>{switch(r.location){case"cpu":return[r.type,r.dims,r.data,"cpu"];case"gpu-buffer":return[r.type,r.dims,{gpuBuffer:r.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${r.location} for ${n()}`)}},tn=r=>{switch(r[3]){case"cpu":return new ee(r[0],r[2],r[1]);case"gpu-buffer":{let n=r[0];if(!Re(n))throw new Error(`not supported data type: ${n} for deserializing GPU tensor`);let{gpuBuffer:e,download:a,dispose:s}=r[2];return ee.fromGpuBuffer(e,{dataType:n,dims:r[1],download:a,dispose:s})}default:throw new Error(`invalid data location: ${r[3]}`)}},Ue=class{async createSessionAllocate(n){let e=await fetch(n);if(e.status!==200)throw new Error(`failed to load model: ${n}`);let a=await e.arrayBuffer();return Or(new Uint8Array(a))}async loadModel(n,e){if(Ir||(Le||(Le=Sr(U)),await Le,Le=void 0,Ir=!0),typeof n=="string")if(typeof process<"u"&&process.versions&&process.versions.node){let a=await(void 0)(n);[this.sessionId,this.inputNames,this.outputNames]=await nt(a,e)}else{let a=await this.createSessionAllocate(n);[this.sessionId,this.inputNames,this.outputNames]=await Tr(a,e)}else[this.sessionId,this.inputNames,this.outputNames]=await nt(n,e)}async dispose(){return Ar(this.sessionId)}async run(n,e,a){let s=[],m=[];Object.entries(n).forEach(y=>{let b=y[0],A=y[1],O=this.inputNames.indexOf(b);if(O===-1)throw new Error(`invalid input '${b}'`);s.push(A),m.push(O)});let u=[],d=[];Object.entries(e).forEach(y=>{let b=y[0],A=y[1],O=this.outputNames.indexOf(b);if(O===-1)throw new Error(`invalid output '${b}'`);u.push(A),d.push(O)});let p=s.map((y,b)=>Pr(y,()=>`input "${this.inputNames[m[b]]}"`)),l=u.map((y,b)=>y?Pr(y,()=>`output "${this.outputNames[d[b]]}"`):null),h=await vr(this.sessionId,m,p,d,l,a),g={};for(let y=0;y<h.length;y++)g[this.outputNames[d[y]]]=u[y]??tn(h[y]);return g}startProfiling(){}endProfiling(){xr(this.sessionId)}}});var Dr={};$e(Dr,{initializeFlags:()=>Br,wasmBackend:()=>rn});var Br,st,rn,Cr=P(()=>{"use strict";pe();ot();_r();Br=()=>{if((typeof U.wasm.initTimeout!="number"||U.wasm.initTimeout<0)&&(U.wasm.initTimeout=0),typeof U.wasm.simd!="boolean"&&(U.wasm.simd=!0),typeof U.wasm.proxy!="boolean"&&(U.wasm.proxy=!1),typeof U.wasm.numThreads!="number"||!Number.isInteger(U.wasm.numThreads)||U.wasm.numThreads<=0){let r=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;U.wasm.numThreads=Math.min(4,Math.ceil((r||1)/2))}},st=class{async init(){Br(),await Er()}async createInferenceSessionHandler(n,e){let a=new Ue;return await a.loadModel(n,e),Promise.resolve(a)}},rn=new st});pe();pe();var qt="1.17.0";{let r=(Cr(),je(Dr)).wasmBackend;de("cpu",r,10),de("wasm",r,10),de("xnnpack",r,9),de("webnn",r,9)}Object.defineProperty(U.versions,"web",{value:qt,enumerable:!0});export{Bn as InferenceSession,ee as Tensor,Rn as TrainingSession,U as env,de as registerBackend};
//# sourceMappingURL=ort.wasm-core.min.min.js.map

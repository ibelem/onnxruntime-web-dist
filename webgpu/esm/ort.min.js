/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
var vd=Object.create;var fo=Object.defineProperty;var wd=Object.getOwnPropertyDescriptor;var _d=Object.getOwnPropertyNames;var Od=Object.getPrototypeOf,Id=Object.prototype.hasOwnProperty;var $=(a,t)=>()=>(a&&(t=a(a=0)),t);var ye=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports),Hr=(a,t)=>{for(var o in t)fo(a,o,{get:t[o],enumerable:!0})},Ka=(a,t,o,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of _d(t))!Id.call(a,r)&&r!==o&&fo(a,r,{get:()=>t[r],enumerable:!(e=wd(t,r))||e.enumerable});return a};var jr=(a,t,o)=>(o=a!=null?vd(Od(a)):{},Ka(t||!a||!a.__esModule?fo(o,"default",{value:a,enumerable:!0}):o,a)),mr=a=>Ka(fo({},"__esModule",{value:!0}),a);var co,br,gr,po,ho=$(()=>{co=new Map,br=[],gr=(a,t,o)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let e=co.get(a);if(e===void 0)co.set(a,{backend:t,priority:o});else{if(e.priority>o)return;if(e.priority===o&&e.backend!==t)throw new Error(`cannot register backend "${a}" using priority ${o}`)}if(o>=0){let r=br.indexOf(a);r!==-1&&br.splice(r,1);for(let n=0;n<br.length;n++)if(co.get(br[n]).priority<=o){br.splice(n,0,a);return}br.push(a)}return}throw new TypeError("not a valid backend")},po=async a=>{let t=a.length===0?br:a,o=[];for(let e of t){let r=co.get(e);if(r){if(r.initialized)return r.backend;if(r.aborted)continue;let n=!!r.initPromise;try{return n||(r.initPromise=r.backend.init(e)),await r.initPromise,r.initialized=!0,r.backend}catch(s){n||o.push({name:e,err:s}),r.aborted=!0}finally{delete r.initPromise}}}throw new Error(`no available backend found. ERR: ${o.map(e=>`[${e.name}] ${e.err}`).join(", ")}`)}});var Ja=$(()=>{ho()});var Za,Qa=$(()=>{Za="1.18.0"});var es,yr,vi=$(()=>{Qa();es="warning",yr={wasm:{},webgl:{},webgpu:{},versions:{common:Za},set logLevel(a){if(a!==void 0){if(typeof a!="string"||["verbose","info","warning","error","fatal"].indexOf(a)===-1)throw new Error(`Unsupported logging level: ${a}`);es=a}},get logLevel(){return es}};Object.defineProperty(yr,"logLevel",{enumerable:!0})});var ee,ts=$(()=>{vi();ee=yr});var rs,ns,os=$(()=>{rs=(a,t)=>{let o=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);o.width=a.dims[3],o.height=a.dims[2];let e=o.getContext("2d");if(e!=null){let r,n;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(r=a.dims[2],n=a.dims[3]):(r=a.dims[3],n=a.dims[2]);let s=t?.format!==void 0?t.format:"RGB",i=t?.norm,u,l;i===void 0||i.mean===void 0?u=[255,255,255,255]:typeof i.mean=="number"?u=[i.mean,i.mean,i.mean,i.mean]:(u=[i.mean[0],i.mean[1],i.mean[2],0],i.mean[3]!==void 0&&(u[3]=i.mean[3])),i===void 0||i.bias===void 0?l=[0,0,0,0]:typeof i.bias=="number"?l=[i.bias,i.bias,i.bias,i.bias]:(l=[i.bias[0],i.bias[1],i.bias[2],0],i.bias[3]!==void 0&&(l[3]=i.bias[3]));let f=n*r,h=0,m=f,v=f*2,I=-1;s==="RGBA"?(h=0,m=f,v=f*2,I=f*3):s==="RGB"?(h=0,m=f,v=f*2):s==="RBG"&&(h=0,v=f,m=f*2);for(let _=0;_<n;_++)for(let A=0;A<r;A++){let L=(a.data[h++]-l[0])*u[0],F=(a.data[m++]-l[1])*u[1],M=(a.data[v++]-l[2])*u[2],J=I===-1?255:(a.data[I++]-l[3])*u[3];e.fillStyle="rgba("+L+","+F+","+M+","+J+")",e.fillRect(A,_,1,1)}if("toDataURL"in o)return o.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},ns=(a,t)=>{let o=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),e;if(o!=null){let r,n,s;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(r=a.dims[2],n=a.dims[1],s=a.dims[3]):(r=a.dims[3],n=a.dims[2],s=a.dims[1]);let i=t!==void 0&&t.format!==void 0?t.format:"RGB",u=t?.norm,l,f;u===void 0||u.mean===void 0?l=[255,255,255,255]:typeof u.mean=="number"?l=[u.mean,u.mean,u.mean,u.mean]:(l=[u.mean[0],u.mean[1],u.mean[2],255],u.mean[3]!==void 0&&(l[3]=u.mean[3])),u===void 0||u.bias===void 0?f=[0,0,0,0]:typeof u.bias=="number"?f=[u.bias,u.bias,u.bias,u.bias]:(f=[u.bias[0],u.bias[1],u.bias[2],0],u.bias[3]!==void 0&&(f[3]=u.bias[3]));let h=n*r;if(t!==void 0&&(t.format!==void 0&&s===4&&t.format!=="RGBA"||s===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let m=4,v=0,I=1,_=2,A=3,L=0,F=h,M=h*2,J=-1;i==="RGBA"?(L=0,F=h,M=h*2,J=h*3):i==="RGB"?(L=0,F=h,M=h*2):i==="RBG"&&(L=0,M=h,F=h*2),e=o.createImageData(r,n);for(let z=0;z<n*r;v+=m,I+=m,_+=m,A+=m,z++)e.data[v]=(a.data[L++]-f[0])*l[0],e.data[I]=(a.data[F++]-f[1])*l[1],e.data[_]=(a.data[M++]-f[2])*l[2],e.data[A]=J===-1?255:(a.data[J++]-f[3])*l[3]}else throw new Error("Can not access image data");return e}});var wi,is,as,ss,us,ls=$(()=>{mo();wi=(a,t)=>{if(a===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:o,width:e}=t,r=t.norm??{mean:255,bias:0},n,s;typeof r.mean=="number"?n=[r.mean,r.mean,r.mean,r.mean]:n=[r.mean[0],r.mean[1],r.mean[2],r.mean[3]??255],typeof r.bias=="number"?s=[r.bias,r.bias,r.bias,r.bias]:s=[r.bias[0],r.bias[1],r.bias[2],r.bias[3]??0];let i=t.format!==void 0?t.format:"RGBA",u=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",l=o*e,f=u==="RGBA"?new Float32Array(l*4):new Float32Array(l*3),h=4,m=0,v=1,I=2,_=3,A=0,L=l,F=l*2,M=-1;i==="RGB"&&(h=3,m=0,v=1,I=2,_=-1),u==="RGBA"?M=l*3:u==="RBG"?(A=0,F=l,L=l*2):u==="BGR"&&(F=0,L=l,A=l*2);for(let z=0;z<l;z++,m+=h,I+=h,v+=h,_+=h)f[A++]=(a[m]+s[0])/n[0],f[L++]=(a[v]+s[1])/n[1],f[F++]=(a[I]+s[2])/n[2],M!==-1&&_!==-1&&(f[M++]=(a[_]+s[3])/n[3]);return u==="RGBA"?new Ze("float32",f,[1,4,o,e]):new Ze("float32",f,[1,3,o,e])},is=async(a,t)=>{let o=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,e=typeof ImageData<"u"&&a instanceof ImageData,r=typeof ImageBitmap<"u"&&a instanceof ImageBitmap,n=typeof a=="string",s,i=t??{},u=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},l=f=>f instanceof HTMLCanvasElement||f instanceof OffscreenCanvas?f.getContext("2d"):null;if(o){let f=u();f.width=a.width,f.height=a.height;let h=l(f);if(h!=null){let m=a.height,v=a.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(m=t.resizedHeight,v=t.resizedWidth),t!==void 0){if(i=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");i.tensorFormat="RGBA",i.height=m,i.width=v}else i.tensorFormat="RGBA",i.height=m,i.width=v;h.drawImage(a,0,0),s=h.getImageData(0,0,v,m).data}else throw new Error("Can not access image data")}else if(e){let f,h;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(f=t.resizedHeight,h=t.resizedWidth):(f=a.height,h=a.width),t!==void 0&&(i=t),i.format="RGBA",i.height=f,i.width=h,t!==void 0){let m=u();m.width=h,m.height=f;let v=l(m);if(v!=null)v.putImageData(a,0,0),s=v.getImageData(0,0,h,f).data;else throw new Error("Can not access image data")}else s=a.data}else if(r){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let f=u();f.width=a.width,f.height=a.height;let h=l(f);if(h!=null){let m=a.height,v=a.width;return h.drawImage(a,0,0,v,m),s=h.getImageData(0,0,v,m).data,i.height=m,i.width=v,wi(s,i)}else throw new Error("Can not access image data")}else{if(n)return new Promise((f,h)=>{let m=u(),v=l(m);if(!a||!v)return h();let I=new Image;I.crossOrigin="Anonymous",I.src=a,I.onload=()=>{m.width=I.width,m.height=I.height,v.drawImage(I,0,0,m.width,m.height);let _=v.getImageData(0,0,m.width,m.height);i.height=m.height,i.width=m.width,f(wi(_.data,i))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(s!==void 0)return wi(s,i);throw new Error("Input data provided is not supported - aborted tensor creation")},as=(a,t)=>{let{width:o,height:e,download:r,dispose:n}=t,s=[1,e,o,4];return new Ze({location:"texture",type:"float32",texture:a,dims:s,download:r,dispose:n})},ss=(a,t)=>{let{dataType:o,dims:e,download:r,dispose:n}=t;return new Ze({location:"gpu-buffer",type:o??"float32",gpuBuffer:a,dims:e,download:r,dispose:n})},us=(a,t,o)=>new Ze({location:"cpu-pinned",type:a,data:t,dims:o??[t.length]})});var Dn,bo,fs,cs,ps=$(()=>{Dn=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),bo=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),fs=!1,cs=()=>{if(!fs){fs=!0;let a=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",t=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";a&&(Dn.set("int64",BigInt64Array),bo.set(BigInt64Array,"int64")),t&&(Dn.set("uint64",BigUint64Array),bo.set(BigUint64Array,"uint64"))}}});var ds,hs,ms=$(()=>{mo();ds=a=>{let t=1;for(let o=0;o<a.length;o++){let e=a[o];if(typeof e!="number"||!Number.isSafeInteger(e))throw new TypeError(`dims[${o}] must be an integer, got: ${e}`);if(e<0)throw new RangeError(`dims[${o}] must be a non-negative integer, got: ${e}`);t*=e}return t},hs=(a,t)=>{switch(a.location){case"cpu":return new Ze(a.type,a.data,t);case"cpu-pinned":return new Ze({location:"cpu-pinned",data:a.data,type:a.type,dims:t});case"texture":return new Ze({location:"texture",texture:a.texture,type:a.type,dims:t});case"gpu-buffer":return new Ze({location:"gpu-buffer",gpuBuffer:a.gpuBuffer,type:a.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${a.location} is not supported`)}}});var Ze,mo=$(()=>{os();ls();ps();ms();Ze=class{constructor(t,o,e){cs();let r,n;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,r=t.type,n=t.dims,t.location){case"cpu-pinned":{let i=Dn.get(r);if(!i)throw new TypeError(`unsupported type "${r}" to create tensor from pinned buffer`);if(!(t.data instanceof i))throw new TypeError(`buffer should be of type ${i.name}`);this.cpuData=t.data;break}case"texture":{if(r!=="float32")throw new TypeError(`unsupported type "${r}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(r!=="float32"&&r!=="float16"&&r!=="int32"&&r!=="int64"&&r!=="uint32"&&r!=="bool")throw new TypeError(`unsupported type "${r}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let i,u;if(typeof t=="string")if(r=t,u=e,t==="string"){if(!Array.isArray(o))throw new TypeError("A string tensor's data must be a string array.");i=o}else{let l=Dn.get(t);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(o)){if(t==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?i=l.from(o,BigInt):i=l.from(o)}else if(o instanceof l)i=o;else throw new TypeError(`A ${r} tensor's data must be type of ${l}`)}else if(u=o,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof t[0];if(l==="string")r="string",i=t;else if(l==="boolean")r="bool",i=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=bo.get(t.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);r=l,i=t}if(u===void 0)u=[i.length];else if(!Array.isArray(u))throw new TypeError("A tensor's dims must be a number array");n=u,this.cpuData=i,this.dataLocation="cpu"}let s=ds(n);if(this.cpuData&&s!==this.cpuData.length)throw new Error(`Tensor's size(${s}) does not match data length(${this.cpuData.length}).`);this.type=r,this.dims=n,this.size=s}static async fromImage(t,o){return is(t,o)}static fromTexture(t,o){return as(t,o)}static fromGpuBuffer(t,o){return ss(t,o)}static fromPinnedBuffer(t,o,e){return us(t,o,e)}toDataURL(t){return rs(this,t)}toImageData(t){return ns(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let o=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=o,t&&this.disposer&&(this.disposer(),this.disposer=void 0),o}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return hs(this,t)}}});var Ue,go=$(()=>{mo();Ue=Ze});var bs,gs,Tr,xr,_i=$(()=>{vi();bs=(a,t)=>{yr.wasm.trace&&console.timeStamp(`${a}::ORT::${t}`)},gs=(a,t)=>{let o=new Error().stack?.split(/\r\n|\r|\n/g)||[],e=!1;for(let r=0;r<o.length;r++){if(e&&!o[r].includes("TRACE_FUNC")){let n=`FUNC_${a}::${o[r].trim().split(" ")[1]}`;t&&(n+=`::${t}`),bs("CPU",n);return}o[r].includes("TRACE_FUNC")&&(e=!0)}},Tr=a=>{yr.wasm.trace&&gs("BEGIN",a)},xr=a=>{yr.wasm.trace&&gs("END",a)}});var yo,ys=$(()=>{ho();go();_i();yo=class a{constructor(t){this.handler=t}async run(t,o,e){Tr();let r={},n={};if(typeof t!="object"||t===null||t instanceof Ue||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let s=!0;if(typeof o=="object"){if(o===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(o instanceof Ue)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(o)){if(o.length===0)throw new TypeError("'fetches' cannot be an empty array.");s=!1;for(let l of o){if(typeof l!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(l)===-1)throw new RangeError(`'fetches' contains invalid output name: ${l}.`);r[l]=null}if(typeof e=="object"&&e!==null)n=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else{let l=!1,f=Object.getOwnPropertyNames(o);for(let h of this.outputNames)if(f.indexOf(h)!==-1){let m=o[h];(m===null||m instanceof Ue)&&(l=!0,s=!1,r[h]=m)}if(l){if(typeof e=="object"&&e!==null)n=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else n=o}}else if(typeof o<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let l of this.inputNames)if(typeof t[l]>"u")throw new Error(`input '${l}' is missing in 'feeds'.`);if(s)for(let l of this.outputNames)r[l]=null;let i=await this.handler.run(t,r,n),u={};for(let l in i)if(Object.hasOwnProperty.call(i,l)){let f=i[l];f instanceof Ue?u[l]=f:u[l]=new Ue(f.type,f.data,f.dims)}return xr(),u}async release(){return this.handler.dispose()}static async create(t,o,e,r){Tr();let n,s={};if(typeof t=="string"){if(n=t,typeof o=="object"&&o!==null)s=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(n=t,typeof o=="object"&&o!==null)s=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let h=t,m=0,v=t.byteLength;if(typeof o=="object"&&o!==null)s=o;else if(typeof o=="number"){if(m=o,!Number.isSafeInteger(m))throw new RangeError("'byteOffset' must be an integer.");if(m<0||m>=h.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${h.byteLength}).`);if(v=t.byteLength-m,typeof e=="number"){if(v=e,!Number.isSafeInteger(v))throw new RangeError("'byteLength' must be an integer.");if(v<=0||m+v>h.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${h.byteLength-m}].`);if(typeof r=="object"&&r!==null)s=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(typeof e<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof o<"u")throw new TypeError("'options' must be an object.");n=new Uint8Array(h,m,v)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let u=(s.executionProviders||[]).map(h=>typeof h=="string"?h:h.name),f=await(await po(u)).createInferenceSessionHandler(n,s);return xr(),new a(f)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var Sd,Ts=$(()=>{ys();Sd=yo});var xs=$(()=>{});var Ad,To,vs=$(()=>{ho();go();Ad="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",To=class a{constructor(t,o,e){this.handler=t,this.hasOptimizerModel=o,this.hasEvalModel=e}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(t,o){let e=t.evalModel||"",r=t.optimizerModel||"",n=o||{},i=(n.executionProviders||[]).map(l=>typeof l=="string"?l:l.name),u=await po(i);if(u.createTrainingSessionHandler){let l=await u.createTrainingSessionHandler(t.checkpointState,t.trainModel,e,r,n);return new a(l,!!t.optimizerModel,!!t.evalModel)}else throw new Error(Ad)}typeNarrowingForRunStep(t,o,e,r,n){let s={},i={};if(typeof e!="object"||e===null||e instanceof Ue||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof Ue)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let l of r){if(typeof l!="string")throw new TypeError("'fetches' must be a string array or an object.");if(o.indexOf(l)===-1)throw new RangeError(`'fetches' contains invalid output name: ${l}.`);s[l]=null}if(typeof n=="object"&&n!==null)i=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let l=!1,f=Object.getOwnPropertyNames(r);for(let h of o)if(f.indexOf(h)!==-1){let m=r[h];(m===null||m instanceof Ue)&&(l=!0,u=!1,s[h]=m)}if(l){if(typeof n=="object"&&n!==null)i=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else i=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let l of t)if(typeof e[l]>"u")throw new Error(`input '${l}' is missing in 'feeds'.`);if(u)for(let l of o)s[l]=null;return[s,i]}convertHandlerReturnTypeToMapOfTensors(t){let o={};for(let e in t)if(Object.hasOwnProperty.call(t,e)){let r=t[e];r instanceof Ue?o[e]=r:o[e]=new Ue(r.type,r.data,r.dims)}return o}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(t,o,e){let[r,n]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,t,o,e),s=await this.handler.runTrainStep(t,r,n);return this.convertHandlerReturnTypeToMapOfTensors(s)}async runOptimizerStep(t){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(t||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(t,o,e){if(this.hasEvalModel){let[r,n]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,t,o,e),s=await this.handler.runEvalStep(t,r,n);return this.convertHandlerReturnTypeToMapOfTensors(s)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(t=!0){return this.handler.getParametersSize(t)}async loadParametersBuffer(t,o=!0){let e=await this.getParametersSize(o);if(t.length!==4*e)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(t,o)}async getContiguousParameters(t=!0){return this.handler.getContiguousParameters(t)}async release(){return this.handler.dispose()}}});var Pd,ws=$(()=>{vs();Pd=To});var Oi={};Hr(Oi,{InferenceSession:()=>Sd,TRACE:()=>bs,TRACE_FUNC_BEGIN:()=>Tr,TRACE_FUNC_END:()=>xr,Tensor:()=>Ue,TrainingSession:()=>Pd,env:()=>ee,registerBackend:()=>gr});var Dt=$(()=>{Ja();ts();Ts();go();_i();xs();ws()});function or(a,t,o,e){if(t===void 0)return Dd(a);if(o===void 0)xo(a,t,1);else if(typeof o=="number"&&e===void 0)xo(a,t,o);else if(typeof o=="string"&&e===void 0)xo(a,o,1,t);else if(typeof o=="string"&&typeof e=="number")xo(a,o,e,t);else throw new TypeError("input is valid")}function Dd(a){return{verbose:or.verbose.bind(null,a),info:or.info.bind(null,a),warning:or.warning.bind(null,a),error:or.error.bind(null,a),fatal:or.fatal.bind(null,a)}}function xo(a,t,o,e){let r=Ln[e||""]||Ln[""];Os[a]<Os[r.minimalSeverity]||(r.logDateTime&&(t=`${new Date().toISOString()}|${t}`),r.logSourceLocation,Ed[r.provider].log(a,t,e))}var Ii,Si,Os,Ed,Is,Ln,he,wo,_o,Oo,vo,ht=$(()=>{"use strict";Ii=class{log(t,o,e){}},Si=class{log(t,o,e){console.log(`${this.color(t)} ${e?"\x1B[35m"+e+"\x1B[0m ":""}${o}`)}color(t){switch(t){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${t}`)}}},Os={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Ed={none:new Ii,console:new Si},Is={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},Ln={"":Is};(u=>{function a(l,f){u("verbose",l,f)}u.verbose=a;function t(l,f){u("info",l,f)}u.info=t;function o(l,f){u("warning",l,f)}u.warning=o;function e(l,f){u("error",l,f)}u.error=e;function r(l,f){u("fatal",l,f)}u.fatal=r;function n(l){Ln={},s("",l||{})}u.reset=n;function s(l,f){if(l==="*")n(f);else{let h=Ln[l]||Is;Ln[l]={provider:f.provider||h.provider,minimalSeverity:f.minimalSeverity||h.minimalSeverity,logDateTime:f.logDateTime===void 0?h.logDateTime:f.logDateTime,logSourceLocation:f.logSourceLocation===void 0?h.logSourceLocation:f.logSourceLocation}}}u.set=s;function i(l){let f={};l.logLevel&&(f.minimalSeverity=l.logLevel),s("",f)}u.setWithEnv=i})(or||={});he=or,wo=class{constructor(t,o,e,r,n,s){this.category=t;this.name=o;this.startTime=e;this.endCallback=r;this.timer=n;this.ctx=s}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},_o=class{constructor(t,o,e,r){this.category=t;this.name=o;this.startTime=e;this.endTime=r}},Oo=class{constructor(t,o,e){this._started=!1;this._flushPointer=0;this._started=!1,this._maxNumberEvents=t===void 0?1e4:t,this._flushBatchSize=o===void 0?10:o,this._flushIntervalInMilliseconds=e===void 0?5e3:e}static create(t){return t===void 0?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=vo(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,o,e,r){let n=this._started?this.begin(t,o,r):void 0,s=!1,i=e();if(i&&typeof i.then=="function")return s=!0,new Promise((u,l)=>{i.then(async f=>{n&&await n.end(),u(f)},async f=>{n&&await n.end(),l(f)})});if(!s&&n){let u=n.end();if(u&&typeof u.then=="function")return new Promise((l,f)=>{u.then(()=>{l(i)},h=>{f(h)})})}return i}begin(t,o,e){if(!this._started)throw new Error("profiler is not started yet");if(e===void 0){let r=vo();return this.flush(r),new wo(t,o,r,n=>this.endSync(n))}else{let r=e.beginTimer();return new wo(t,o,0,async n=>this.end(n),r,e)}}async end(t){let o=await t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new _o(t.category,t.name,t.startTime,o)),this.flush(o))}endSync(t){let o=vo();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new _o(t.category,t.name,t.startTime,o)),this.flush(o))}logOneEvent(t){he.verbose(`Profiler.${t.category}`,`${(t.endTime-t.startTime).toFixed(2)}ms on event '${t.name}' at ${t.endTime.toFixed(2)}`)}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(let o=this._flushPointer;this._flushPointer<o+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=vo()}}get started(){return this._started}},vo=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function Ss(a,t,o){for(let e of o){let r=e[0],n=e[1],s=e[2],i=e[3],u=e[4];if(a.opType===r){for(let l of t)if((l.domain===n||l.domain==="ai.onnx"&&n==="")&&Ld(l.version,s))return{opImpl:i,opInit:u}}}throw new TypeError(`cannot resolve operator '${a.opType}' with opsets: ${t.map(e=>`${e.domain||"ai.onnx"} v${e.version}`).join(", ")}`)}function Ld(a,t){if(t.endsWith("+")){let o=Number.parseInt(t.substring(0,t.length-1),10);return!isNaN(o)&&o<=a}else if(t.split("-").length===2){let o=t.split("-"),e=Number.parseInt(o[0],10),r=Number.parseInt(o[1],10);return!isNaN(e)&&!isNaN(r)&&e<=a&&a<=r}else return Number.parseInt(t,10)===a}var As=$(()=>{"use strict"});var Ps=ye(Ai=>{"use strict";Ai.__esModule=!0;var $d=function(){function a(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=a.EMPTY,t&&a.isGuid(t)&&(this.value=t)}return a.isGuid=function(t){var o=t.toString();return t&&(t instanceof a||a.validator.test(o))},a.create=function(){return new a([a.gen(2),a.gen(1),a.gen(1),a.gen(1),a.gen(3)].join("-"))},a.createEmpty=function(){return new a("emptyguid")},a.parse=function(t){return new a(t)},a.raw=function(){return[a.gen(2),a.gen(1),a.gen(1),a.gen(1),a.gen(3)].join("-")},a.gen=function(t){for(var o="",e=0;e<t;e++)o+=((1+Math.random())*65536|0).toString(16).substring(1);return o},a.prototype.equals=function(t){return a.isGuid(t)&&this.value===t.toString()},a.prototype.isEmpty=function(){return this.value===a.EMPTY},a.prototype.toString=function(){return this.value},a.prototype.toJSON=function(){return{value:this.value}},a.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),a.EMPTY="00000000-0000-0000-0000-000000000000",a}();Ai.Guid=$d});function Te(a,t,o){this.low=a|0,this.high=t|0,this.unsigned=!!o}function Xe(a){return(a&&a.__isLong__)===!0}function Es(a){var t=Math.clz32(a&-a);return a?31-t:t}function vr(a,t){var o,e,r;return t?(a>>>=0,(r=0<=a&&a<256)&&(e=Ls[a],e)?e:(o=pe(a,0,!0),r&&(Ls[a]=o),o)):(a|=0,(r=-128<=a&&a<128)&&(e=Ds[a],e)?e:(o=pe(a,a<0?-1:0,!1),r&&(Ds[a]=o),o))}function bt(a,t){if(isNaN(a))return t?Kt:Lt;if(t){if(a<0)return Kt;if(a>=ks)return Rs}else{if(a<=-Cs)return nt;if(a+1>=Cs)return Ns}return a<0?bt(-a,t).neg():pe(a%Yr|0,a/Yr|0,t)}function pe(a,t,o){return new Te(a,t,o)}function Ei(a,t,o){if(a.length===0)throw Error("empty string");if(typeof t=="number"?(o=t,t=!1):t=!!t,a==="NaN"||a==="Infinity"||a==="+Infinity"||a==="-Infinity")return t?Kt:Lt;if(o=o||10,o<2||36<o)throw RangeError("radix");var e;if((e=a.indexOf("-"))>0)throw Error("interior hyphen");if(e===0)return Ei(a.substring(1),t,o).neg();for(var r=bt(Io(o,8)),n=Lt,s=0;s<a.length;s+=8){var i=Math.min(8,a.length-s),u=parseInt(a.substring(s,s+i),o);if(i<8){var l=bt(Io(o,i));n=n.mul(l).add(bt(u))}else n=n.mul(r),n=n.add(bt(u))}return n.unsigned=t,n}function $t(a,t){return typeof a=="number"?bt(a,t):typeof a=="string"?Ei(a,t):pe(a.low,a.high,typeof t=="boolean"?t:a.unsigned)}var mt,Ds,Ls,Io,$s,Cd,Yr,ks,Cs,Fs,Lt,Kt,qr,Bs,Pi,Ns,Rs,nt,B,Jt,Di=$(()=>{mt=null;try{mt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}Te.prototype.__isLong__;Object.defineProperty(Te.prototype,"__isLong__",{value:!0});Te.isLong=Xe;Ds={},Ls={};Te.fromInt=vr;Te.fromNumber=bt;Te.fromBits=pe;Io=Math.pow;Te.fromString=Ei;Te.fromValue=$t;$s=65536,Cd=1<<24,Yr=$s*$s,ks=Yr*Yr,Cs=ks/2,Fs=vr(Cd),Lt=vr(0);Te.ZERO=Lt;Kt=vr(0,!0);Te.UZERO=Kt;qr=vr(1);Te.ONE=qr;Bs=vr(1,!0);Te.UONE=Bs;Pi=vr(-1);Te.NEG_ONE=Pi;Ns=pe(-1,2147483647,!1);Te.MAX_VALUE=Ns;Rs=pe(-1,-1,!0);Te.MAX_UNSIGNED_VALUE=Rs;nt=pe(0,-2147483648,!1);Te.MIN_VALUE=nt;B=Te.prototype;B.toInt=function(){return this.unsigned?this.low>>>0:this.low};B.toNumber=function(){return this.unsigned?(this.high>>>0)*Yr+(this.low>>>0):this.high*Yr+(this.low>>>0)};B.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nt)){var o=bt(t),e=this.div(o),r=e.mul(o).sub(this);return e.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var n=bt(Io(t,6),this.unsigned),s=this,i="";;){var u=s.div(n),l=s.sub(u.mul(n)).toInt()>>>0,f=l.toString(t);if(s=u,s.isZero())return f+i;for(;f.length<6;)f="0"+f;i=""+f+i}};B.getHighBits=function(){return this.high};B.getHighBitsUnsigned=function(){return this.high>>>0};B.getLowBits=function(){return this.low};B.getLowBitsUnsigned=function(){return this.low>>>0};B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nt)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,o=31;o>0&&!(t&1<<o);o--);return this.high!=0?o+33:o+1};B.isZero=function(){return this.high===0&&this.low===0};B.eqz=B.isZero;B.isNegative=function(){return!this.unsigned&&this.high<0};B.isPositive=function(){return this.unsigned||this.high>=0};B.isOdd=function(){return(this.low&1)===1};B.isEven=function(){return(this.low&1)===0};B.equals=function(t){return Xe(t)||(t=$t(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};B.eq=B.equals;B.notEquals=function(t){return!this.eq(t)};B.neq=B.notEquals;B.ne=B.notEquals;B.lessThan=function(t){return this.comp(t)<0};B.lt=B.lessThan;B.lessThanOrEqual=function(t){return this.comp(t)<=0};B.lte=B.lessThanOrEqual;B.le=B.lessThanOrEqual;B.greaterThan=function(t){return this.comp(t)>0};B.gt=B.greaterThan;B.greaterThanOrEqual=function(t){return this.comp(t)>=0};B.gte=B.greaterThanOrEqual;B.ge=B.greaterThanOrEqual;B.compare=function(t){if(Xe(t)||(t=$t(t)),this.eq(t))return 0;var o=this.isNegative(),e=t.isNegative();return o&&!e?-1:!o&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};B.comp=B.compare;B.negate=function(){return!this.unsigned&&this.eq(nt)?nt:this.not().add(qr)};B.neg=B.negate;B.add=function(t){Xe(t)||(t=$t(t));var o=this.high>>>16,e=this.high&65535,r=this.low>>>16,n=this.low&65535,s=t.high>>>16,i=t.high&65535,u=t.low>>>16,l=t.low&65535,f=0,h=0,m=0,v=0;return v+=n+l,m+=v>>>16,v&=65535,m+=r+u,h+=m>>>16,m&=65535,h+=e+i,f+=h>>>16,h&=65535,f+=o+s,f&=65535,pe(m<<16|v,f<<16|h,this.unsigned)};B.subtract=function(t){return Xe(t)||(t=$t(t)),this.add(t.neg())};B.sub=B.subtract;B.multiply=function(t){if(this.isZero())return this;if(Xe(t)||(t=$t(t)),mt){var o=mt.mul(this.low,this.high,t.low,t.high);return pe(o,mt.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?Kt:Lt;if(this.eq(nt))return t.isOdd()?nt:Lt;if(t.eq(nt))return this.isOdd()?nt:Lt;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Fs)&&t.lt(Fs))return bt(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,r=this.high&65535,n=this.low>>>16,s=this.low&65535,i=t.high>>>16,u=t.high&65535,l=t.low>>>16,f=t.low&65535,h=0,m=0,v=0,I=0;return I+=s*f,v+=I>>>16,I&=65535,v+=n*f,m+=v>>>16,v&=65535,v+=s*l,m+=v>>>16,v&=65535,m+=r*f,h+=m>>>16,m&=65535,m+=n*l,h+=m>>>16,m&=65535,m+=s*u,h+=m>>>16,m&=65535,h+=e*f+r*l+n*u+s*i,h&=65535,pe(v<<16|I,h<<16|m,this.unsigned)};B.mul=B.multiply;B.divide=function(t){if(Xe(t)||(t=$t(t)),t.isZero())throw Error("division by zero");if(mt){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var o=(this.unsigned?mt.div_u:mt.div_s)(this.low,this.high,t.low,t.high);return pe(o,mt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Kt:Lt;var e,r,n;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Kt;if(t.gt(this.shru(1)))return Bs;n=Kt}else{if(this.eq(nt)){if(t.eq(qr)||t.eq(Pi))return nt;if(t.eq(nt))return qr;var s=this.shr(1);return e=s.div(t).shl(1),e.eq(Lt)?t.isNegative()?qr:Pi:(r=this.sub(t.mul(e)),n=e.add(r.div(t)),n)}else if(t.eq(nt))return this.unsigned?Kt:Lt;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();n=Lt}for(r=this;r.gte(t);){e=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var i=Math.ceil(Math.log(e)/Math.LN2),u=i<=48?1:Io(2,i-48),l=bt(e),f=l.mul(t);f.isNegative()||f.gt(r);)e-=u,l=bt(e,this.unsigned),f=l.mul(t);l.isZero()&&(l=qr),n=n.add(l),r=r.sub(f)}return n};B.div=B.divide;B.modulo=function(t){if(Xe(t)||(t=$t(t)),mt){var o=(this.unsigned?mt.rem_u:mt.rem_s)(this.low,this.high,t.low,t.high);return pe(o,mt.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};B.mod=B.modulo;B.rem=B.modulo;B.not=function(){return pe(~this.low,~this.high,this.unsigned)};B.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};B.clz=B.countLeadingZeros;B.countTrailingZeros=function(){return this.low?Es(this.low):Es(this.high)+32};B.ctz=B.countTrailingZeros;B.and=function(t){return Xe(t)||(t=$t(t)),pe(this.low&t.low,this.high&t.high,this.unsigned)};B.or=function(t){return Xe(t)||(t=$t(t)),pe(this.low|t.low,this.high|t.high,this.unsigned)};B.xor=function(t){return Xe(t)||(t=$t(t)),pe(this.low^t.low,this.high^t.high,this.unsigned)};B.shiftLeft=function(t){return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?pe(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):pe(0,this.low<<t-32,this.unsigned)};B.shl=B.shiftLeft;B.shiftRight=function(t){return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?pe(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):pe(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};B.shr=B.shiftRight;B.shiftRightUnsigned=function(t){return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?pe(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?pe(this.high,0,this.unsigned):pe(this.high>>>t-32,0,this.unsigned)};B.shru=B.shiftRightUnsigned;B.shr_u=B.shiftRightUnsigned;B.rotateLeft=function(t){var o;return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?pe(this.high,this.low,this.unsigned):t<32?(o=32-t,pe(this.low<<t|this.high>>>o,this.high<<t|this.low>>>o,this.unsigned)):(t-=32,o=32-t,pe(this.high<<t|this.low>>>o,this.low<<t|this.high>>>o,this.unsigned))};B.rotl=B.rotateLeft;B.rotateRight=function(t){var o;return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?pe(this.high,this.low,this.unsigned):t<32?(o=32-t,pe(this.high<<o|this.low>>>t,this.low<<o|this.high>>>t,this.unsigned)):(t-=32,o=32-t,pe(this.low<<o|this.high>>>t,this.high<<o|this.low>>>t,this.unsigned))};B.rotr=B.rotateRight;B.toSigned=function(){return this.unsigned?pe(this.low,this.high,!1):this};B.toUnsigned=function(){return this.unsigned?this:pe(this.low,this.high,!0)};B.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};B.toBytesLE=function(){var t=this.high,o=this.low;return[o&255,o>>>8&255,o>>>16&255,o>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};B.toBytesBE=function(){var t=this.high,o=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,o>>>24,o>>>16&255,o>>>8&255,o&255]};Te.fromBytes=function(t,o,e){return e?Te.fromBytesLE(t,o):Te.fromBytesBE(t,o)};Te.fromBytesLE=function(t,o){return new Te(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,o)};Te.fromBytesBE=function(t,o){return new Te(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],o)};Jt=Te});var O,So=$(()=>{O={};O.Offset;O.Table;O.SIZEOF_SHORT=2;O.SIZEOF_INT=4;O.FILE_IDENTIFIER_LENGTH=4;O.SIZE_PREFIX_LENGTH=4;O.Encoding={UTF8_BYTES:1,UTF16_STRING:2};O.int32=new Int32Array(2);O.float32=new Float32Array(O.int32.buffer);O.float64=new Float64Array(O.int32.buffer);O.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;O.Long=function(a,t){this.low=a|0,this.high=t|0};O.Long.create=function(a,t){return a==0&&t==0?O.Long.ZERO:new O.Long(a,t)};O.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296};O.Long.prototype.equals=function(a){return this.low==a.low&&this.high==a.high};O.Long.ZERO=new O.Long(0,0);O.Builder=function(a){if(a)var t=a;else var t=1024;this.bb=O.ByteBuffer.allocate(t),this.space=t,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1};O.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1};O.Builder.prototype.forceDefaults=function(a){this.force_defaults=a};O.Builder.prototype.dataBuffer=function(){return this.bb};O.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())};O.Builder.prototype.prep=function(a,t){a>this.minalign&&(this.minalign=a);for(var o=~(this.bb.capacity()-this.space+t)+1&a-1;this.space<o+a+t;){var e=this.bb.capacity();this.bb=O.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(o)};O.Builder.prototype.pad=function(a){for(var t=0;t<a;t++)this.bb.writeInt8(--this.space,0)};O.Builder.prototype.writeInt8=function(a){this.bb.writeInt8(this.space-=1,a)};O.Builder.prototype.writeInt16=function(a){this.bb.writeInt16(this.space-=2,a)};O.Builder.prototype.writeInt32=function(a){this.bb.writeInt32(this.space-=4,a)};O.Builder.prototype.writeInt64=function(a){this.bb.writeInt64(this.space-=8,a)};O.Builder.prototype.writeFloat32=function(a){this.bb.writeFloat32(this.space-=4,a)};O.Builder.prototype.writeFloat64=function(a){this.bb.writeFloat64(this.space-=8,a)};O.Builder.prototype.addInt8=function(a){this.prep(1,0),this.writeInt8(a)};O.Builder.prototype.addInt16=function(a){this.prep(2,0),this.writeInt16(a)};O.Builder.prototype.addInt32=function(a){this.prep(4,0),this.writeInt32(a)};O.Builder.prototype.addInt64=function(a){this.prep(8,0),this.writeInt64(a)};O.Builder.prototype.addFloat32=function(a){this.prep(4,0),this.writeFloat32(a)};O.Builder.prototype.addFloat64=function(a){this.prep(8,0),this.writeFloat64(a)};O.Builder.prototype.addFieldInt8=function(a,t,o){(this.force_defaults||t!=o)&&(this.addInt8(t),this.slot(a))};O.Builder.prototype.addFieldInt16=function(a,t,o){(this.force_defaults||t!=o)&&(this.addInt16(t),this.slot(a))};O.Builder.prototype.addFieldInt32=function(a,t,o){(this.force_defaults||t!=o)&&(this.addInt32(t),this.slot(a))};O.Builder.prototype.addFieldInt64=function(a,t,o){(this.force_defaults||!t.equals(o))&&(this.addInt64(t),this.slot(a))};O.Builder.prototype.addFieldFloat32=function(a,t,o){(this.force_defaults||t!=o)&&(this.addFloat32(t),this.slot(a))};O.Builder.prototype.addFieldFloat64=function(a,t,o){(this.force_defaults||t!=o)&&(this.addFloat64(t),this.slot(a))};O.Builder.prototype.addFieldOffset=function(a,t,o){(this.force_defaults||t!=o)&&(this.addOffset(t),this.slot(a))};O.Builder.prototype.addFieldStruct=function(a,t,o){t!=o&&(this.nested(t),this.slot(a))};O.Builder.prototype.nested=function(a){if(a!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")};O.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")};O.Builder.prototype.slot=function(a){this.vtable[a]=this.offset()};O.Builder.prototype.offset=function(){return this.bb.capacity()-this.space};O.Builder.growByteBuffer=function(a){var t=a.capacity();if(t&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var o=t<<1,e=O.ByteBuffer.allocate(o);return e.setPosition(o-t),e.bytes().set(a.bytes(),o-t),e};O.Builder.prototype.addOffset=function(a){this.prep(O.SIZEOF_INT,0),this.writeInt32(this.offset()-a+O.SIZEOF_INT)};O.Builder.prototype.startObject=function(a){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=a;for(var t=0;t<a;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()};O.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var a=this.offset(),t=this.vtable_in_use-1;t>=0&&this.vtable[t]==0;t--);for(var o=t+1;t>=0;t--)this.addInt16(this.vtable[t]!=0?a-this.vtable[t]:0);var e=2;this.addInt16(a-this.object_start);var r=(o+e)*O.SIZEOF_SHORT;this.addInt16(r);var n=0,s=this.space;e:for(t=0;t<this.vtables.length;t++){var i=this.bb.capacity()-this.vtables[t];if(r==this.bb.readInt16(i)){for(var u=O.SIZEOF_SHORT;u<r;u+=O.SIZEOF_SHORT)if(this.bb.readInt16(s+u)!=this.bb.readInt16(i+u))continue e;n=this.vtables[t];break}}return n?(this.space=this.bb.capacity()-a,this.bb.writeInt32(this.space,n-a)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-a,this.offset()-a)),this.isNested=!1,a};O.Builder.prototype.finish=function(a,t,o){var e=o?O.SIZE_PREFIX_LENGTH:0;if(t){var r=t;if(this.prep(this.minalign,O.SIZEOF_INT+O.FILE_IDENTIFIER_LENGTH+e),r.length!=O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+O.FILE_IDENTIFIER_LENGTH);for(var n=O.FILE_IDENTIFIER_LENGTH-1;n>=0;n--)this.writeInt8(r.charCodeAt(n))}this.prep(this.minalign,O.SIZEOF_INT+e),this.addOffset(a),e&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)};O.Builder.prototype.finishSizePrefixed=function(a,t){this.finish(a,t,!0)};O.Builder.prototype.requiredField=function(a,t){var o=this.bb.capacity()-a,e=o-this.bb.readInt32(o),r=this.bb.readInt16(e+t)!=0;if(!r)throw new Error("FlatBuffers: field "+t+" must be set")};O.Builder.prototype.startVector=function(a,t,o){this.notNested(),this.vector_num_elems=t,this.prep(O.SIZEOF_INT,a*t),this.prep(o,a*t)};O.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()};O.Builder.prototype.createString=function(a){if(a instanceof Uint8Array)var t=a;else for(var t=[],o=0;o<a.length;){var e,r=a.charCodeAt(o++);if(r<55296||r>=56320)e=r;else{var n=a.charCodeAt(o++);e=(r<<10)+n+(65536-56623104-56320)}e<128?t.push(e):(e<2048?t.push(e>>6&31|192):(e<65536?t.push(e>>12&15|224):t.push(e>>18&7|240,e>>12&63|128),t.push(e>>6&63|128)),t.push(e&63|128))}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(var o=0,s=this.space,i=this.bb.bytes();o<t.length;o++)i[s++]=t[o];return this.endVector()};O.Builder.prototype.createLong=function(a,t){return O.Long.create(a,t)};O.ByteBuffer=function(a){this.bytes_=a,this.position_=0};O.ByteBuffer.allocate=function(a){return new O.ByteBuffer(new Uint8Array(a))};O.ByteBuffer.prototype.clear=function(){this.position_=0};O.ByteBuffer.prototype.bytes=function(){return this.bytes_};O.ByteBuffer.prototype.position=function(){return this.position_};O.ByteBuffer.prototype.setPosition=function(a){this.position_=a};O.ByteBuffer.prototype.capacity=function(){return this.bytes_.length};O.ByteBuffer.prototype.readInt8=function(a){return this.readUint8(a)<<24>>24};O.ByteBuffer.prototype.readUint8=function(a){return this.bytes_[a]};O.ByteBuffer.prototype.readInt16=function(a){return this.readUint16(a)<<16>>16};O.ByteBuffer.prototype.readUint16=function(a){return this.bytes_[a]|this.bytes_[a+1]<<8};O.ByteBuffer.prototype.readInt32=function(a){return this.bytes_[a]|this.bytes_[a+1]<<8|this.bytes_[a+2]<<16|this.bytes_[a+3]<<24};O.ByteBuffer.prototype.readUint32=function(a){return this.readInt32(a)>>>0};O.ByteBuffer.prototype.readInt64=function(a){return new O.Long(this.readInt32(a),this.readInt32(a+4))};O.ByteBuffer.prototype.readUint64=function(a){return new O.Long(this.readUint32(a),this.readUint32(a+4))};O.ByteBuffer.prototype.readFloat32=function(a){return O.int32[0]=this.readInt32(a),O.float32[0]};O.ByteBuffer.prototype.readFloat64=function(a){return O.int32[O.isLittleEndian?0:1]=this.readInt32(a),O.int32[O.isLittleEndian?1:0]=this.readInt32(a+4),O.float64[0]};O.ByteBuffer.prototype.writeInt8=function(a,t){this.bytes_[a]=t};O.ByteBuffer.prototype.writeUint8=function(a,t){this.bytes_[a]=t};O.ByteBuffer.prototype.writeInt16=function(a,t){this.bytes_[a]=t,this.bytes_[a+1]=t>>8};O.ByteBuffer.prototype.writeUint16=function(a,t){this.bytes_[a]=t,this.bytes_[a+1]=t>>8};O.ByteBuffer.prototype.writeInt32=function(a,t){this.bytes_[a]=t,this.bytes_[a+1]=t>>8,this.bytes_[a+2]=t>>16,this.bytes_[a+3]=t>>24};O.ByteBuffer.prototype.writeUint32=function(a,t){this.bytes_[a]=t,this.bytes_[a+1]=t>>8,this.bytes_[a+2]=t>>16,this.bytes_[a+3]=t>>24};O.ByteBuffer.prototype.writeInt64=function(a,t){this.writeInt32(a,t.low),this.writeInt32(a+4,t.high)};O.ByteBuffer.prototype.writeUint64=function(a,t){this.writeUint32(a,t.low),this.writeUint32(a+4,t.high)};O.ByteBuffer.prototype.writeFloat32=function(a,t){O.float32[0]=t,this.writeInt32(a,O.int32[0])};O.ByteBuffer.prototype.writeFloat64=function(a,t){O.float64[0]=t,this.writeInt32(a,O.int32[O.isLittleEndian?0:1]),this.writeInt32(a+4,O.int32[O.isLittleEndian?1:0])};O.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+O.SIZEOF_INT+O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var a="",t=0;t<O.FILE_IDENTIFIER_LENGTH;t++)a+=String.fromCharCode(this.readInt8(this.position_+O.SIZEOF_INT+t));return a};O.ByteBuffer.prototype.__offset=function(a,t){var o=a-this.readInt32(a);return t<this.readInt16(o)?this.readInt16(o+t):0};O.ByteBuffer.prototype.__union=function(a,t){return a.bb_pos=t+this.readInt32(t),a.bb=this,a};O.ByteBuffer.prototype.__string=function(a,t){a+=this.readInt32(a);var o=this.readInt32(a),e="",r=0;if(a+=O.SIZEOF_INT,t===O.Encoding.UTF8_BYTES)return this.bytes_.subarray(a,a+o);for(;r<o;){var n,s=this.readUint8(a+r++);if(s<192)n=s;else{var i=this.readUint8(a+r++);if(s<224)n=(s&31)<<6|i&63;else{var u=this.readUint8(a+r++);if(s<240)n=(s&15)<<12|(i&63)<<6|u&63;else{var l=this.readUint8(a+r++);n=(s&7)<<18|(i&63)<<12|(u&63)<<6|l&63}}}n<65536?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1024-1)+56320))}return e};O.ByteBuffer.prototype.__indirect=function(a){return a+this.readInt32(a)};O.ByteBuffer.prototype.__vector=function(a){return a+this.readInt32(a)+O.SIZEOF_INT};O.ByteBuffer.prototype.__vector_len=function(a){return this.readInt32(a+this.readInt32(a))};O.ByteBuffer.prototype.__has_identifier=function(a){if(a.length!=O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+O.FILE_IDENTIFIER_LENGTH);for(var t=0;t<O.FILE_IDENTIFIER_LENGTH;t++)if(a.charCodeAt(t)!=this.readInt8(this.position_+O.SIZEOF_INT+t))return!1;return!0};O.ByteBuffer.prototype.createLong=function(a,t){return O.Long.create(a,t)}});var q,$n=$(()=>{"use strict";So();(t=>{let a;(e=>{let o;(n=>{let r;(M=>(M[M.UNDEFINED=0]="UNDEFINED",M[M.FLOAT=1]="FLOAT",M[M.INT=2]="INT",M[M.STRING=3]="STRING",M[M.TENSOR=4]="TENSOR",M[M.GRAPH=5]="GRAPH",M[M.FLOATS=6]="FLOATS",M[M.INTS=7]="INTS",M[M.STRINGS=8]="STRINGS",M[M.TENSORS=9]="TENSORS",M[M.GRAPHS=10]="GRAPHS",M[M.SPARSE_TENSOR=11]="SPARSE_TENSOR",M[M.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(r=n.AttributeType||={})})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{let r;(l=>(l[l.UNKNOWN=0]="UNKNOWN",l[l.VALUE=1]="VALUE",l[l.PARAM=2]="PARAM"))(r=n.DimensionValueType||={})})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{let r;(j=>(j[j.UNDEFINED=0]="UNDEFINED",j[j.FLOAT=1]="FLOAT",j[j.UINT8=2]="UINT8",j[j.INT8=3]="INT8",j[j.UINT16=4]="UINT16",j[j.INT16=5]="INT16",j[j.INT32=6]="INT32",j[j.INT64=7]="INT64",j[j.STRING=8]="STRING",j[j.BOOL=9]="BOOL",j[j.FLOAT16=10]="FLOAT16",j[j.DOUBLE=11]="DOUBLE",j[j.UINT32=12]="UINT32",j[j.UINT64=13]="UINT64",j[j.COMPLEX64=14]="COMPLEX64",j[j.COMPLEX128=15]="COMPLEX128",j[j.BFLOAT16=16]="BFLOAT16",j[j.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",j[j.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",j[j.FLOAT8E5M2=19]="FLOAT8E5M2",j[j.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(r=n.TensorDataType||={})})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{let r;(u=>(u[u.Primitive=0]="Primitive",u[u.Fused=1]="Fused"))(r=n.NodeType||={})})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{let r;(f=>(f[f.NONE=0]="NONE",f[f.tensor_type=1]="tensor_type",f[f.sequence_type=2]="sequence_type",f[f.map_type=3]="map_type"))(r=n.TypeInfoValue||={})})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsShape(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsShape(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}dim(i,u){let l=this.bb.__offset(this.bb_pos,4);return l?(u||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}dimLength(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__vector_len(this.bb_pos+i):0}static startShape(i){i.startObject(1)}static addDim(i,u){i.addFieldOffset(0,u,0)}static createDimVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startDimVector(i,u){i.startVector(4,u,4)}static endShape(i){return i.endObject()}static createShape(i,u){return r.startShape(i),r.addDim(i,u),r.endShape(i)}}n.Shape=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsDimension(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsDimension(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}value(i){let u=this.bb.__offset(this.bb_pos,4);return u?(i||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}denotation(i){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,i):null}static startDimension(i){i.startObject(2)}static addValue(i,u){i.addFieldOffset(0,u,0)}static addDenotation(i,u){i.addFieldOffset(1,u,0)}static endDimension(i){return i.endObject()}static createDimension(i,u,l){return r.startDimension(i),r.addValue(i,u),r.addDenotation(i,l),r.endDimension(i)}}n.Dimension=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsDimensionValue(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsDimensionValue(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}dimType(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt8(this.bb_pos+i):0}dimValue(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}dimParam(i){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__string(this.bb_pos+u,i):null}static startDimensionValue(i){i.startObject(3)}static addDimType(i,u){i.addFieldInt8(0,u,0)}static addDimValue(i,u){i.addFieldInt64(1,u,i.createLong(0,0))}static addDimParam(i,u){i.addFieldOffset(2,u,0)}static endDimensionValue(i){return i.endObject()}static createDimensionValue(i,u,l,f){return r.startDimensionValue(i),r.addDimType(i,u),r.addDimValue(i,l),r.addDimParam(i,f),r.endDimensionValue(i)}}n.DimensionValue=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsTensorTypeAndShape(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsTensorTypeAndShape(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}elemType(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt32(this.bb_pos+i):0}shape(i){let u=this.bb.__offset(this.bb_pos,6);return u?(i||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startTensorTypeAndShape(i){i.startObject(2)}static addElemType(i,u){i.addFieldInt32(0,u,0)}static addShape(i,u){i.addFieldOffset(1,u,0)}static endTensorTypeAndShape(i){return i.endObject()}static createTensorTypeAndShape(i,u,l){return r.startTensorTypeAndShape(i),r.addElemType(i,u),r.addShape(i,l),r.endTensorTypeAndShape(i)}}n.TensorTypeAndShape=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsMapType(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsMapType(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}keyType(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt32(this.bb_pos+i):0}valueType(i){let u=this.bb.__offset(this.bb_pos,6);return u?(i||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startMapType(i){i.startObject(2)}static addKeyType(i,u){i.addFieldInt32(0,u,0)}static addValueType(i,u){i.addFieldOffset(1,u,0)}static endMapType(i){return i.endObject()}static createMapType(i,u,l){return r.startMapType(i),r.addKeyType(i,u),r.addValueType(i,l),r.endMapType(i)}}n.MapType=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsSequenceType(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsSequenceType(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}elemType(i){let u=this.bb.__offset(this.bb_pos,4);return u?(i||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startSequenceType(i){i.startObject(1)}static addElemType(i,u){i.addFieldOffset(0,u,0)}static endSequenceType(i){return i.endObject()}static createSequenceType(i,u){return r.startSequenceType(i),r.addElemType(i,u),r.endSequenceType(i)}}n.SequenceType=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(i,u,l,f){return i.prep(4,12),i.writeInt32(f),i.writeInt32(l),i.writeInt32(u),i.offset()}}n.EdgeEnd=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsNodeEdge(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsNodeEdge(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}nodeIndex(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readUint32(this.bb_pos+i):0}inputEdges(i,u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+l)+i*12,this.bb):null}inputEdgesLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}outputEdges(i,u){let l=this.bb.__offset(this.bb_pos,8);return l?(u||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+l)+i*12,this.bb):null}outputEdgesLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}static startNodeEdge(i){i.startObject(3)}static addNodeIndex(i,u){i.addFieldInt32(0,u,0)}static addInputEdges(i,u){i.addFieldOffset(1,u,0)}static startInputEdgesVector(i,u){i.startVector(12,u,4)}static addOutputEdges(i,u){i.addFieldOffset(2,u,0)}static startOutputEdgesVector(i,u){i.startVector(12,u,4)}static endNodeEdge(i){return i.endObject()}static createNodeEdge(i,u,l,f){return r.startNodeEdge(i),r.addNodeIndex(i,u),r.addInputEdges(i,l),r.addOutputEdges(i,f),r.endNodeEdge(i)}}n.NodeEdge=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsNode(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsNode(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}name(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}docString(i){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,i):null}domain(i){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__string(this.bb_pos+u,i):null}sinceVersion(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt32(this.bb_pos+i):0}index(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.readUint32(this.bb_pos+i):0}opType(i){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__string(this.bb_pos+u,i):null}type(){let i=this.bb.__offset(this.bb_pos,16);return i?this.bb.readInt32(this.bb_pos+i):0}executionProviderType(i){let u=this.bb.__offset(this.bb_pos,18);return u?this.bb.__string(this.bb_pos+u,i):null}inputs(i,u){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}inputsLength(){let i=this.bb.__offset(this.bb_pos,20);return i?this.bb.__vector_len(this.bb_pos+i):0}outputs(i,u){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}outputsLength(){let i=this.bb.__offset(this.bb_pos,22);return i?this.bb.__vector_len(this.bb_pos+i):0}attributes(i,u){let l=this.bb.__offset(this.bb_pos,24);return l?(u||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}attributesLength(){let i=this.bb.__offset(this.bb_pos,24);return i?this.bb.__vector_len(this.bb_pos+i):0}inputArgCounts(i){let u=this.bb.__offset(this.bb_pos,26);return u?this.bb.readInt32(this.bb.__vector(this.bb_pos+u)+i*4):0}inputArgCountsLength(){let i=this.bb.__offset(this.bb_pos,26);return i?this.bb.__vector_len(this.bb_pos+i):0}inputArgCountsArray(){let i=this.bb.__offset(this.bb_pos,26);return i?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}implicitInputs(i,u){let l=this.bb.__offset(this.bb_pos,28);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}implicitInputsLength(){let i=this.bb.__offset(this.bb_pos,28);return i?this.bb.__vector_len(this.bb_pos+i):0}static startNode(i){i.startObject(13)}static addName(i,u){i.addFieldOffset(0,u,0)}static addDocString(i,u){i.addFieldOffset(1,u,0)}static addDomain(i,u){i.addFieldOffset(2,u,0)}static addSinceVersion(i,u){i.addFieldInt32(3,u,0)}static addIndex(i,u){i.addFieldInt32(4,u,0)}static addOpType(i,u){i.addFieldOffset(5,u,0)}static addType(i,u){i.addFieldInt32(6,u,0)}static addExecutionProviderType(i,u){i.addFieldOffset(7,u,0)}static addInputs(i,u){i.addFieldOffset(8,u,0)}static createInputsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startInputsVector(i,u){i.startVector(4,u,4)}static addOutputs(i,u){i.addFieldOffset(9,u,0)}static createOutputsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startOutputsVector(i,u){i.startVector(4,u,4)}static addAttributes(i,u){i.addFieldOffset(10,u,0)}static createAttributesVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startAttributesVector(i,u){i.startVector(4,u,4)}static addInputArgCounts(i,u){i.addFieldOffset(11,u,0)}static createInputArgCountsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addInt32(u[l]);return i.endVector()}static startInputArgCountsVector(i,u){i.startVector(4,u,4)}static addImplicitInputs(i,u){i.addFieldOffset(12,u,0)}static createImplicitInputsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startImplicitInputsVector(i,u){i.startVector(4,u,4)}static endNode(i){return i.endObject()}static createNode(i,u,l,f,h,m,v,I,_,A,L,F,M,J){return r.startNode(i),r.addName(i,u),r.addDocString(i,l),r.addDomain(i,f),r.addSinceVersion(i,h),r.addIndex(i,m),r.addOpType(i,v),r.addType(i,I),r.addExecutionProviderType(i,_),r.addInputs(i,A),r.addOutputs(i,L),r.addAttributes(i,F),r.addInputArgCounts(i,M),r.addImplicitInputs(i,J),r.endNode(i)}}n.Node=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsValueInfo(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsValueInfo(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}name(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}docString(i){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,i):null}type(i){let u=this.bb.__offset(this.bb_pos,8);return u?(i||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startValueInfo(i){i.startObject(3)}static addName(i,u){i.addFieldOffset(0,u,0)}static addDocString(i,u){i.addFieldOffset(1,u,0)}static addType(i,u){i.addFieldOffset(2,u,0)}static endValueInfo(i){return i.endObject()}static createValueInfo(i,u,l,f){return r.startValueInfo(i),r.addName(i,u),r.addDocString(i,l),r.addType(i,f),r.endValueInfo(i)}}n.ValueInfo=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsTypeInfo(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsTypeInfo(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}denotation(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}valueType(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readUint8(this.bb_pos+i):0}value(i){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__union(i,this.bb_pos+u):null}static startTypeInfo(i){i.startObject(3)}static addDenotation(i,u){i.addFieldOffset(0,u,0)}static addValueType(i,u){i.addFieldInt8(1,u,0)}static addValue(i,u){i.addFieldOffset(2,u,0)}static endTypeInfo(i){return i.endObject()}static createTypeInfo(i,u,l,f){return r.startTypeInfo(i),r.addDenotation(i,u),r.addValueType(i,l),r.addValue(i,f),r.endTypeInfo(i)}}n.TypeInfo=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsOperatorSetId(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsOperatorSetId(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}domain(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}version(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}static startOperatorSetId(i){i.startObject(2)}static addDomain(i,u){i.addFieldOffset(0,u,0)}static addVersion(i,u){i.addFieldInt64(1,u,i.createLong(0,0))}static endOperatorSetId(i){return i.endObject()}static createOperatorSetId(i,u,l){return r.startOperatorSetId(i),r.addDomain(i,u),r.addVersion(i,l),r.endOperatorSetId(i)}}n.OperatorSetId=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsTensor(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsTensor(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}name(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}docString(i){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,i):null}dims(i){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.readInt64(this.bb.__vector(this.bb_pos+u)+i*8):this.bb.createLong(0,0)}dimsLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}dataType(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt32(this.bb_pos+i):0}rawData(i){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.readUint8(this.bb.__vector(this.bb_pos+u)+i):0}rawDataLength(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.__vector_len(this.bb_pos+i):0}rawDataArray(){let i=this.bb.__offset(this.bb_pos,12);return i?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}stringData(i,u){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}stringDataLength(){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__vector_len(this.bb_pos+i):0}static startTensor(i){i.startObject(6)}static addName(i,u){i.addFieldOffset(0,u,0)}static addDocString(i,u){i.addFieldOffset(1,u,0)}static addDims(i,u){i.addFieldOffset(2,u,0)}static createDimsVector(i,u){i.startVector(8,u.length,8);for(let l=u.length-1;l>=0;l--)i.addInt64(u[l]);return i.endVector()}static startDimsVector(i,u){i.startVector(8,u,8)}static addDataType(i,u){i.addFieldInt32(3,u,0)}static addRawData(i,u){i.addFieldOffset(4,u,0)}static createRawDataVector(i,u){i.startVector(1,u.length,1);for(let l=u.length-1;l>=0;l--)i.addInt8(u[l]);return i.endVector()}static startRawDataVector(i,u){i.startVector(1,u,1)}static addStringData(i,u){i.addFieldOffset(5,u,0)}static createStringDataVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startStringDataVector(i,u){i.startVector(4,u,4)}static endTensor(i){return i.endObject()}static createTensor(i,u,l,f,h,m,v){return r.startTensor(i),r.addName(i,u),r.addDocString(i,l),r.addDims(i,f),r.addDataType(i,h),r.addRawData(i,m),r.addStringData(i,v),r.endTensor(i)}}n.Tensor=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsSparseTensor(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsSparseTensor(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}values(i){let u=this.bb.__offset(this.bb_pos,4);return u?(i||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}indices(i){let u=this.bb.__offset(this.bb_pos,6);return u?(i||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}dims(i){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.readInt64(this.bb.__vector(this.bb_pos+u)+i*8):this.bb.createLong(0,0)}dimsLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}static startSparseTensor(i){i.startObject(3)}static addValues(i,u){i.addFieldOffset(0,u,0)}static addIndices(i,u){i.addFieldOffset(1,u,0)}static addDims(i,u){i.addFieldOffset(2,u,0)}static createDimsVector(i,u){i.startVector(8,u.length,8);for(let l=u.length-1;l>=0;l--)i.addInt64(u[l]);return i.endVector()}static startDimsVector(i,u){i.startVector(8,u,8)}static endSparseTensor(i){return i.endObject()}static createSparseTensor(i,u,l,f){return r.startSparseTensor(i),r.addValues(i,u),r.addIndices(i,l),r.addDims(i,f),r.endSparseTensor(i)}}n.SparseTensor=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsAttribute(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsAttribute(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}name(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}docString(i){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,i):null}type(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.readInt32(this.bb_pos+i):0}f(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readFloat32(this.bb_pos+i):0}i(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}s(i){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__string(this.bb_pos+u,i):null}t(i){let u=this.bb.__offset(this.bb_pos,16);return u?(i||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}g(i){let u=this.bb.__offset(this.bb_pos,18);return u?(i||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}floats(i){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.readFloat32(this.bb.__vector(this.bb_pos+u)+i*4):0}floatsLength(){let i=this.bb.__offset(this.bb_pos,20);return i?this.bb.__vector_len(this.bb_pos+i):0}floatsArray(){let i=this.bb.__offset(this.bb_pos,20);return i?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}ints(i){let u=this.bb.__offset(this.bb_pos,22);return u?this.bb.readInt64(this.bb.__vector(this.bb_pos+u)+i*8):this.bb.createLong(0,0)}intsLength(){let i=this.bb.__offset(this.bb_pos,22);return i?this.bb.__vector_len(this.bb_pos+i):0}strings(i,u){let l=this.bb.__offset(this.bb_pos,24);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}stringsLength(){let i=this.bb.__offset(this.bb_pos,24);return i?this.bb.__vector_len(this.bb_pos+i):0}tensors(i,u){let l=this.bb.__offset(this.bb_pos,26);return l?(u||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}tensorsLength(){let i=this.bb.__offset(this.bb_pos,26);return i?this.bb.__vector_len(this.bb_pos+i):0}graphs(i,u){let l=this.bb.__offset(this.bb_pos,28);return l?(u||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}graphsLength(){let i=this.bb.__offset(this.bb_pos,28);return i?this.bb.__vector_len(this.bb_pos+i):0}static startAttribute(i){i.startObject(13)}static addName(i,u){i.addFieldOffset(0,u,0)}static addDocString(i,u){i.addFieldOffset(1,u,0)}static addType(i,u){i.addFieldInt32(2,u,0)}static addF(i,u){i.addFieldFloat32(3,u,0)}static addI(i,u){i.addFieldInt64(4,u,i.createLong(0,0))}static addS(i,u){i.addFieldOffset(5,u,0)}static addT(i,u){i.addFieldOffset(6,u,0)}static addG(i,u){i.addFieldOffset(7,u,0)}static addFloats(i,u){i.addFieldOffset(8,u,0)}static createFloatsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addFloat32(u[l]);return i.endVector()}static startFloatsVector(i,u){i.startVector(4,u,4)}static addInts(i,u){i.addFieldOffset(9,u,0)}static createIntsVector(i,u){i.startVector(8,u.length,8);for(let l=u.length-1;l>=0;l--)i.addInt64(u[l]);return i.endVector()}static startIntsVector(i,u){i.startVector(8,u,8)}static addStrings(i,u){i.addFieldOffset(10,u,0)}static createStringsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startStringsVector(i,u){i.startVector(4,u,4)}static addTensors(i,u){i.addFieldOffset(11,u,0)}static createTensorsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startTensorsVector(i,u){i.startVector(4,u,4)}static addGraphs(i,u){i.addFieldOffset(12,u,0)}static createGraphsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startGraphsVector(i,u){i.startVector(4,u,4)}static endAttribute(i){return i.endObject()}static createAttribute(i,u,l,f,h,m,v,I,_,A,L,F,M,J){return r.startAttribute(i),r.addName(i,u),r.addDocString(i,l),r.addType(i,f),r.addF(i,h),r.addI(i,m),r.addS(i,v),r.addT(i,I),r.addG(i,_),r.addFloats(i,A),r.addInts(i,L),r.addStrings(i,F),r.addTensors(i,M),r.addGraphs(i,J),r.endAttribute(i)}}n.Attribute=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsGraph(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsGraph(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}initializers(i,u){let l=this.bb.__offset(this.bb_pos,4);return l?(u||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}initializersLength(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__vector_len(this.bb_pos+i):0}nodeArgs(i,u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}nodeArgsLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}nodes(i,u){let l=this.bb.__offset(this.bb_pos,8);return l?(u||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}nodesLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}maxNodeIndex(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readUint32(this.bb_pos+i):0}nodeEdges(i,u){let l=this.bb.__offset(this.bb_pos,12);return l?(u||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}nodeEdgesLength(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.__vector_len(this.bb_pos+i):0}inputs(i,u){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}inputsLength(){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__vector_len(this.bb_pos+i):0}outputs(i,u){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}outputsLength(){let i=this.bb.__offset(this.bb_pos,16);return i?this.bb.__vector_len(this.bb_pos+i):0}sparseInitializers(i,u){let l=this.bb.__offset(this.bb_pos,18);return l?(u||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}sparseInitializersLength(){let i=this.bb.__offset(this.bb_pos,18);return i?this.bb.__vector_len(this.bb_pos+i):0}static startGraph(i){i.startObject(8)}static addInitializers(i,u){i.addFieldOffset(0,u,0)}static createInitializersVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startInitializersVector(i,u){i.startVector(4,u,4)}static addNodeArgs(i,u){i.addFieldOffset(1,u,0)}static createNodeArgsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startNodeArgsVector(i,u){i.startVector(4,u,4)}static addNodes(i,u){i.addFieldOffset(2,u,0)}static createNodesVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startNodesVector(i,u){i.startVector(4,u,4)}static addMaxNodeIndex(i,u){i.addFieldInt32(3,u,0)}static addNodeEdges(i,u){i.addFieldOffset(4,u,0)}static createNodeEdgesVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startNodeEdgesVector(i,u){i.startVector(4,u,4)}static addInputs(i,u){i.addFieldOffset(5,u,0)}static createInputsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startInputsVector(i,u){i.startVector(4,u,4)}static addOutputs(i,u){i.addFieldOffset(6,u,0)}static createOutputsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startOutputsVector(i,u){i.startVector(4,u,4)}static addSparseInitializers(i,u){i.addFieldOffset(7,u,0)}static createSparseInitializersVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startSparseInitializersVector(i,u){i.startVector(4,u,4)}static endGraph(i){return i.endObject()}static createGraph(i,u,l,f,h,m,v,I,_){return r.startGraph(i),r.addInitializers(i,u),r.addNodeArgs(i,l),r.addNodes(i,f),r.addMaxNodeIndex(i,h),r.addNodeEdges(i,m),r.addInputs(i,v),r.addOutputs(i,I),r.addSparseInitializers(i,_),r.endGraph(i)}}n.Graph=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsModel(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsModel(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}irVersion(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}opsetImport(i,u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}opsetImportLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}producerName(i){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__string(this.bb_pos+u,i):null}producerVersion(i){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.__string(this.bb_pos+u,i):null}domain(i){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.__string(this.bb_pos+u,i):null}modelVersion(){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}docString(i){let u=this.bb.__offset(this.bb_pos,16);return u?this.bb.__string(this.bb_pos+u,i):null}graph(i){let u=this.bb.__offset(this.bb_pos,18);return u?(i||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}graphDocString(i){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.__string(this.bb_pos+u,i):null}static startModel(i){i.startObject(9)}static addIrVersion(i,u){i.addFieldInt64(0,u,i.createLong(0,0))}static addOpsetImport(i,u){i.addFieldOffset(1,u,0)}static createOpsetImportVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startOpsetImportVector(i,u){i.startVector(4,u,4)}static addProducerName(i,u){i.addFieldOffset(2,u,0)}static addProducerVersion(i,u){i.addFieldOffset(3,u,0)}static addDomain(i,u){i.addFieldOffset(4,u,0)}static addModelVersion(i,u){i.addFieldInt64(5,u,i.createLong(0,0))}static addDocString(i,u){i.addFieldOffset(6,u,0)}static addGraph(i,u){i.addFieldOffset(7,u,0)}static addGraphDocString(i,u){i.addFieldOffset(8,u,0)}static endModel(i){return i.endObject()}static createModel(i,u,l,f,h,m,v,I,_,A){return r.startModel(i),r.addIrVersion(i,u),r.addOpsetImport(i,l),r.addProducerName(i,f),r.addProducerVersion(i,h),r.addDomain(i,m),r.addModelVersion(i,v),r.addDocString(i,I),r.addGraph(i,_),r.addGraphDocString(i,A),r.endModel(i)}}n.Model=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsKernelCreateInfos(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsKernelCreateInfos(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}nodeIndices(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readUint32(this.bb.__vector(this.bb_pos+u)+i*4):0}nodeIndicesLength(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__vector_len(this.bb_pos+i):0}nodeIndicesArray(){let i=this.bb.__offset(this.bb_pos,4);return i?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}kernelDefHashes(i){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readUint64(this.bb.__vector(this.bb_pos+u)+i*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}static startKernelCreateInfos(i){i.startObject(2)}static addNodeIndices(i,u){i.addFieldOffset(0,u,0)}static createNodeIndicesVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addInt32(u[l]);return i.endVector()}static startNodeIndicesVector(i,u){i.startVector(4,u,4)}static addKernelDefHashes(i,u){i.addFieldOffset(1,u,0)}static createKernelDefHashesVector(i,u){i.startVector(8,u.length,8);for(let l=u.length-1;l>=0;l--)i.addInt64(u[l]);return i.endVector()}static startKernelDefHashesVector(i,u){i.startVector(8,u,8)}static endKernelCreateInfos(i){return i.endObject()}static createKernelCreateInfos(i,u,l){return r.startKernelCreateInfos(i),r.addNodeIndices(i,u),r.addKernelDefHashes(i,l),r.endKernelCreateInfos(i)}}n.KernelCreateInfos=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsSubGraphSessionState(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsSubGraphSessionState(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}graphId(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}sessionState(i){let u=this.bb.__offset(this.bb_pos,6);return u?(i||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startSubGraphSessionState(i){i.startObject(2)}static addGraphId(i,u){i.addFieldOffset(0,u,0)}static addSessionState(i,u){i.addFieldOffset(1,u,0)}static endSubGraphSessionState(i){let u=i.endObject();return i.requiredField(u,4),u}static createSubGraphSessionState(i,u,l){return r.startSubGraphSessionState(i),r.addGraphId(i,u),r.addSessionState(i,l),r.endSubGraphSessionState(i)}}n.SubGraphSessionState=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsSessionState(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsSessionState(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}kernels(i){let u=this.bb.__offset(this.bb_pos,4);return u?(i||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}subGraphSessionStates(i,u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}subGraphSessionStatesLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}static startSessionState(i){i.startObject(2)}static addKernels(i,u){i.addFieldOffset(0,u,0)}static addSubGraphSessionStates(i,u){i.addFieldOffset(1,u,0)}static createSubGraphSessionStatesVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startSubGraphSessionStatesVector(i,u){i.startVector(4,u,4)}static endSessionState(i){return i.endObject()}static createSessionState(i,u,l){return r.startSessionState(i),r.addKernels(i,u),r.addSubGraphSessionStates(i,l),r.endSessionState(i)}}n.SessionState=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={});(t=>{let a;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsInferenceSession(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsInferenceSession(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static bufferHasIdentifier(i){return i.__has_identifier("ORTM")}ortVersion(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}model(i){let u=this.bb.__offset(this.bb_pos,6);return u?(i||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}sessionState(i){let u=this.bb.__offset(this.bb_pos,8);return u?(i||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startInferenceSession(i){i.startObject(3)}static addOrtVersion(i,u){i.addFieldOffset(0,u,0)}static addModel(i,u){i.addFieldOffset(1,u,0)}static addSessionState(i,u){i.addFieldOffset(2,u,0)}static endInferenceSession(i){return i.endObject()}static finishInferenceSessionBuffer(i,u){i.finish(u,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(i,u){i.finish(u,"ORTM",!0)}static createInferenceSession(i,u,l,f){return r.startInferenceSession(i),r.addOrtVersion(i,u),r.addModel(i,l),r.addSessionState(i,f),r.endInferenceSession(i)}}n.InferenceSession=r})(o=e.fbs||={})})(a=t.experimental||={})})(q||={})});var Gs=ye((gy,Ms)=>{"use strict";Ms.exports=Fd;function Fd(a,t){for(var o=new Array(arguments.length-1),e=0,r=2,n=!0;r<arguments.length;)o[e++]=arguments[r++];return new Promise(function(i,u){o[e]=function(f){if(n)if(n=!1,f)u(f);else{for(var h=new Array(arguments.length-1),m=0;m<h.length;)h[m++]=arguments[m];i.apply(null,h)}};try{a.apply(t||null,o)}catch(l){n&&(n=!1,u(l))}})}});var zs=ye(Ws=>{"use strict";var Ao=Ws;Ao.length=function(t){var o=t.length;if(!o)return 0;for(var e=0;--o%4>1&&t.charAt(o)==="=";)++e;return Math.ceil(t.length*3)/4-e};var Xr=new Array(64),Vs=new Array(123);for(Ct=0;Ct<64;)Vs[Xr[Ct]=Ct<26?Ct+65:Ct<52?Ct+71:Ct<62?Ct-4:Ct-59|43]=Ct++;var Ct;Ao.encode=function(t,o,e){for(var r=null,n=[],s=0,i=0,u;o<e;){var l=t[o++];switch(i){case 0:n[s++]=Xr[l>>2],u=(l&3)<<4,i=1;break;case 1:n[s++]=Xr[u|l>>4],u=(l&15)<<2,i=2;break;case 2:n[s++]=Xr[u|l>>6],n[s++]=Xr[l&63],i=0;break}s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,n)),s=0)}return i&&(n[s++]=Xr[u],n[s++]=61,i===1&&(n[s++]=61)),r?(s&&r.push(String.fromCharCode.apply(String,n.slice(0,s))),r.join("")):String.fromCharCode.apply(String,n.slice(0,s))};var Us="invalid encoding";Ao.decode=function(t,o,e){for(var r=e,n=0,s,i=0;i<t.length;){var u=t.charCodeAt(i++);if(u===61&&n>1)break;if((u=Vs[u])===void 0)throw Error(Us);switch(n){case 0:s=u,n=1;break;case 1:o[e++]=s<<2|(u&48)>>4,s=u,n=2;break;case 2:o[e++]=(s&15)<<4|(u&60)>>2,s=u,n=3;break;case 3:o[e++]=(s&3)<<6|u,n=0;break}}if(n===1)throw Error(Us);return e-r};Ao.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var js=ye((Ty,Hs)=>{"use strict";Hs.exports=Po;function Po(){this._listeners={}}Po.prototype.on=function(t,o,e){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:o,ctx:e||this}),this};Po.prototype.off=function(t,o){if(t===void 0)this._listeners={};else if(o===void 0)this._listeners[t]=[];else for(var e=this._listeners[t],r=0;r<e.length;)e[r].fn===o?e.splice(r,1):++r;return this};Po.prototype.emit=function(t){var o=this._listeners[t];if(o){for(var e=[],r=1;r<arguments.length;)e.push(arguments[r++]);for(r=0;r<o.length;)o[r].fn.apply(o[r++].ctx,e)}return this}});var Qs=ye((xy,Zs)=>{"use strict";Zs.exports=qs(qs);function qs(a){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),o=new Uint8Array(t.buffer),e=o[3]===128;function r(u,l,f){t[0]=u,l[f]=o[0],l[f+1]=o[1],l[f+2]=o[2],l[f+3]=o[3]}function n(u,l,f){t[0]=u,l[f]=o[3],l[f+1]=o[2],l[f+2]=o[1],l[f+3]=o[0]}a.writeFloatLE=e?r:n,a.writeFloatBE=e?n:r;function s(u,l){return o[0]=u[l],o[1]=u[l+1],o[2]=u[l+2],o[3]=u[l+3],t[0]}function i(u,l){return o[3]=u[l],o[2]=u[l+1],o[1]=u[l+2],o[0]=u[l+3],t[0]}a.readFloatLE=e?s:i,a.readFloatBE=e?i:s}():function(){function t(e,r,n,s){var i=r<0?1:0;if(i&&(r=-r),r===0)e(1/r>0?0:2147483648,n,s);else if(isNaN(r))e(2143289344,n,s);else if(r>34028234663852886e22)e((i<<31|2139095040)>>>0,n,s);else if(r<11754943508222875e-54)e((i<<31|Math.round(r/1401298464324817e-60))>>>0,n,s);else{var u=Math.floor(Math.log(r)/Math.LN2),l=Math.round(r*Math.pow(2,-u)*8388608)&8388607;e((i<<31|u+127<<23|l)>>>0,n,s)}}a.writeFloatLE=t.bind(null,Ys),a.writeFloatBE=t.bind(null,Xs);function o(e,r,n){var s=e(r,n),i=(s>>31)*2+1,u=s>>>23&255,l=s&8388607;return u===255?l?NaN:i*(1/0):u===0?i*1401298464324817e-60*l:i*Math.pow(2,u-150)*(l+8388608)}a.readFloatLE=o.bind(null,Ks),a.readFloatBE=o.bind(null,Js)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),o=new Uint8Array(t.buffer),e=o[7]===128;function r(u,l,f){t[0]=u,l[f]=o[0],l[f+1]=o[1],l[f+2]=o[2],l[f+3]=o[3],l[f+4]=o[4],l[f+5]=o[5],l[f+6]=o[6],l[f+7]=o[7]}function n(u,l,f){t[0]=u,l[f]=o[7],l[f+1]=o[6],l[f+2]=o[5],l[f+3]=o[4],l[f+4]=o[3],l[f+5]=o[2],l[f+6]=o[1],l[f+7]=o[0]}a.writeDoubleLE=e?r:n,a.writeDoubleBE=e?n:r;function s(u,l){return o[0]=u[l],o[1]=u[l+1],o[2]=u[l+2],o[3]=u[l+3],o[4]=u[l+4],o[5]=u[l+5],o[6]=u[l+6],o[7]=u[l+7],t[0]}function i(u,l){return o[7]=u[l],o[6]=u[l+1],o[5]=u[l+2],o[4]=u[l+3],o[3]=u[l+4],o[2]=u[l+5],o[1]=u[l+6],o[0]=u[l+7],t[0]}a.readDoubleLE=e?s:i,a.readDoubleBE=e?i:s}():function(){function t(e,r,n,s,i,u){var l=s<0?1:0;if(l&&(s=-s),s===0)e(0,i,u+r),e(1/s>0?0:2147483648,i,u+n);else if(isNaN(s))e(0,i,u+r),e(2146959360,i,u+n);else if(s>17976931348623157e292)e(0,i,u+r),e((l<<31|2146435072)>>>0,i,u+n);else{var f;if(s<22250738585072014e-324)f=s/5e-324,e(f>>>0,i,u+r),e((l<<31|f/4294967296)>>>0,i,u+n);else{var h=Math.floor(Math.log(s)/Math.LN2);h===1024&&(h=1023),f=s*Math.pow(2,-h),e(f*4503599627370496>>>0,i,u+r),e((l<<31|h+1023<<20|f*1048576&1048575)>>>0,i,u+n)}}}a.writeDoubleLE=t.bind(null,Ys,0,4),a.writeDoubleBE=t.bind(null,Xs,4,0);function o(e,r,n,s,i){var u=e(s,i+r),l=e(s,i+n),f=(l>>31)*2+1,h=l>>>20&2047,m=4294967296*(l&1048575)+u;return h===2047?m?NaN:f*(1/0):h===0?f*5e-324*m:f*Math.pow(2,h-1075)*(m+4503599627370496)}a.readDoubleLE=o.bind(null,Ks,0,4),a.readDoubleBE=o.bind(null,Js,4,0)}(),a}function Ys(a,t,o){t[o]=a&255,t[o+1]=a>>>8&255,t[o+2]=a>>>16&255,t[o+3]=a>>>24}function Xs(a,t,o){t[o]=a>>>24,t[o+1]=a>>>16&255,t[o+2]=a>>>8&255,t[o+3]=a&255}function Ks(a,t){return(a[t]|a[t+1]<<8|a[t+2]<<16|a[t+3]<<24)>>>0}function Js(a,t){return(a[t]<<24|a[t+1]<<16|a[t+2]<<8|a[t+3])>>>0}});var eu=ye((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}});var ru=ye(tu=>{"use strict";var Li=tu;Li.length=function(t){for(var o=0,e=0,r=0;r<t.length;++r)e=t.charCodeAt(r),e<128?o+=1:e<2048?o+=2:(e&64512)===55296&&(t.charCodeAt(r+1)&64512)===56320?(++r,o+=4):o+=3;return o};Li.read=function(t,o,e){var r=e-o;if(r<1)return"";for(var n=null,s=[],i=0,u;o<e;)u=t[o++],u<128?s[i++]=u:u>191&&u<224?s[i++]=(u&31)<<6|t[o++]&63:u>239&&u<365?(u=((u&7)<<18|(t[o++]&63)<<12|(t[o++]&63)<<6|t[o++]&63)-65536,s[i++]=55296+(u>>10),s[i++]=56320+(u&1023)):s[i++]=(u&15)<<12|(t[o++]&63)<<6|t[o++]&63,i>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),i=0);return n?(i&&n.push(String.fromCharCode.apply(String,s.slice(0,i))),n.join("")):String.fromCharCode.apply(String,s.slice(0,i))};Li.write=function(t,o,e){for(var r=e,n,s,i=0;i<t.length;++i)n=t.charCodeAt(i),n<128?o[e++]=n:n<2048?(o[e++]=n>>6|192,o[e++]=n&63|128):(n&64512)===55296&&((s=t.charCodeAt(i+1))&64512)===56320?(n=65536+((n&1023)<<10)+(s&1023),++i,o[e++]=n>>18|240,o[e++]=n>>12&63|128,o[e++]=n>>6&63|128,o[e++]=n&63|128):(o[e++]=n>>12|224,o[e++]=n>>6&63|128,o[e++]=n&63|128);return e-r}});var ou=ye((wy,nu)=>{"use strict";nu.exports=kd;function kd(a,t,o){var e=o||8192,r=e>>>1,n=null,s=e;return function(u){if(u<1||u>r)return a(u);s+u>e&&(n=a(e),s=0);var l=t.call(n,s,s+=u);return s&7&&(s=(s|7)+1),l}}});var au=ye((_y,iu)=>{"use strict";iu.exports=Ve;var Cn=ar();function Ve(a,t){this.lo=a>>>0,this.hi=t>>>0}var wr=Ve.zero=new Ve(0,0);wr.toNumber=function(){return 0};wr.zzEncode=wr.zzDecode=function(){return this};wr.length=function(){return 1};var Bd=Ve.zeroHash="\0\0\0\0\0\0\0\0";Ve.fromNumber=function(t){if(t===0)return wr;var o=t<0;o&&(t=-t);var e=t>>>0,r=(t-e)/4294967296>>>0;return o&&(r=~r>>>0,e=~e>>>0,++e>4294967295&&(e=0,++r>4294967295&&(r=0))),new Ve(e,r)};Ve.from=function(t){if(typeof t=="number")return Ve.fromNumber(t);if(Cn.isString(t))if(Cn.Long)t=Cn.Long.fromString(t);else return Ve.fromNumber(parseInt(t,10));return t.low||t.high?new Ve(t.low>>>0,t.high>>>0):wr};Ve.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var o=~this.lo+1>>>0,e=~this.hi>>>0;return o||(e=e+1>>>0),-(o+e*4294967296)}return this.lo+this.hi*4294967296};Ve.prototype.toLong=function(t){return Cn.Long?new Cn.Long(this.lo|0,this.hi|0,!!t):{low:this.lo|0,high:this.hi|0,unsigned:!!t}};var ir=String.prototype.charCodeAt;Ve.fromHash=function(t){return t===Bd?wr:new Ve((ir.call(t,0)|ir.call(t,1)<<8|ir.call(t,2)<<16|ir.call(t,3)<<24)>>>0,(ir.call(t,4)|ir.call(t,5)<<8|ir.call(t,6)<<16|ir.call(t,7)<<24)>>>0)};Ve.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Ve.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};Ve.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};Ve.prototype.length=function(){var t=this.lo,o=(this.lo>>>28|this.hi<<4)>>>0,e=this.hi>>>24;return e===0?o===0?t<16384?t<128?1:2:t<2097152?3:4:o<16384?o<128?5:6:o<2097152?7:8:e<128?9:10}});var ar=ye($i=>{"use strict";var Y=$i;Y.asPromise=Gs();Y.base64=zs();Y.EventEmitter=js();Y.float=Qs();Y.inquire=eu();Y.utf8=ru();Y.pool=ou();Y.LongBits=au();Y.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);Y.global=Y.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||$i;Y.emptyArray=Object.freeze?Object.freeze([]):[];Y.emptyObject=Object.freeze?Object.freeze({}):{};Y.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};Y.isString=function(t){return typeof t=="string"||t instanceof String};Y.isObject=function(t){return t&&typeof t=="object"};Y.isset=Y.isSet=function(t,o){var e=t[o];return e!=null&&t.hasOwnProperty(o)?typeof e!="object"||(Array.isArray(e)?e.length:Object.keys(e).length)>0:!1};Y.Buffer=function(){try{var a=Y.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch{return null}}();Y._Buffer_from=null;Y._Buffer_allocUnsafe=null;Y.newBuffer=function(t){return typeof t=="number"?Y.Buffer?Y._Buffer_allocUnsafe(t):new Y.Array(t):Y.Buffer?Y._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};Y.Array=typeof Uint8Array<"u"?Uint8Array:Array;Y.Long=Y.global.dcodeIO&&Y.global.dcodeIO.Long||Y.global.Long||Y.inquire("long");Y.key2Re=/^true|false|0|1$/;Y.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Y.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Y.longToHash=function(t){return t?Y.LongBits.from(t).toHash():Y.LongBits.zeroHash};Y.longFromHash=function(t,o){var e=Y.LongBits.fromHash(t);return Y.Long?Y.Long.fromBits(e.lo,e.hi,o):e.toNumber(!!o)};function su(a,t,o){for(var e=Object.keys(t),r=0;r<e.length;++r)(a[e[r]]===void 0||!o)&&(a[e[r]]=t[e[r]]);return a}Y.merge=su;Y.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function uu(a){function t(o,e){if(!(this instanceof t))return new t(o,e);Object.defineProperty(this,"message",{get:function(){return o}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),e&&su(this,e)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return a},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}Y.newError=uu;Y.ProtocolError=uu("ProtocolError");Y.oneOfGetter=function(t){for(var o={},e=0;e<t.length;++e)o[t[e]]=1;return function(){for(var r=Object.keys(this),n=r.length-1;n>-1;--n)if(o[r[n]]===1&&this[r[n]]!==void 0&&this[r[n]]!==null)return r[n]}};Y.oneOfSetter=function(t){return function(o){for(var e=0;e<t.length;++e)t[e]!==o&&delete this[t[e]]}};Y.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Y._configure=function(){var a=Y.Buffer;if(!a){Y._Buffer_from=Y._Buffer_allocUnsafe=null;return}Y._Buffer_from=a.from!==Uint8Array.from&&a.from||function(o,e){return new a(o,e)},Y._Buffer_allocUnsafe=a.allocUnsafe||function(o){return new a(o)}}});var Mi=ye((Iy,pu)=>{"use strict";pu.exports=fe;var gt=ar(),Ci,Eo=gt.LongBits,lu=gt.base64,fu=gt.utf8;function Fn(a,t,o){this.fn=a,this.len=t,this.next=void 0,this.val=o}function ki(){}function Nd(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function fe(){this.len=0,this.head=new Fn(ki,0,0),this.tail=this.head,this.states=null}var cu=function(){return gt.Buffer?function(){return(fe.create=function(){return new Ci})()}:function(){return new fe}};fe.create=cu();fe.alloc=function(t){return new gt.Array(t)};gt.Array!==Array&&(fe.alloc=gt.pool(fe.alloc,gt.Array.prototype.subarray));fe.prototype._push=function(t,o,e){return this.tail=this.tail.next=new Fn(t,o,e),this.len+=o,this};function Bi(a,t,o){t[o]=a&255}function Rd(a,t,o){for(;a>127;)t[o++]=a&127|128,a>>>=7;t[o]=a}function Ni(a,t){this.len=a,this.next=void 0,this.val=t}Ni.prototype=Object.create(Fn.prototype);Ni.prototype.fn=Rd;fe.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new Ni((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};fe.prototype.int32=function(t){return t<0?this._push(Ri,10,Eo.fromNumber(t)):this.uint32(t)};fe.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function Ri(a,t,o){for(;a.hi;)t[o++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)t[o++]=a.lo&127|128,a.lo=a.lo>>>7;t[o++]=a.lo}fe.prototype.uint64=function(t){var o=Eo.from(t);return this._push(Ri,o.length(),o)};fe.prototype.int64=fe.prototype.uint64;fe.prototype.sint64=function(t){var o=Eo.from(t).zzEncode();return this._push(Ri,o.length(),o)};fe.prototype.bool=function(t){return this._push(Bi,1,t?1:0)};function Fi(a,t,o){t[o]=a&255,t[o+1]=a>>>8&255,t[o+2]=a>>>16&255,t[o+3]=a>>>24}fe.prototype.fixed32=function(t){return this._push(Fi,4,t>>>0)};fe.prototype.sfixed32=fe.prototype.fixed32;fe.prototype.fixed64=function(t){var o=Eo.from(t);return this._push(Fi,4,o.lo)._push(Fi,4,o.hi)};fe.prototype.sfixed64=fe.prototype.fixed64;fe.prototype.float=function(t){return this._push(gt.float.writeFloatLE,4,t)};fe.prototype.double=function(t){return this._push(gt.float.writeDoubleLE,8,t)};var Md=gt.Array.prototype.set?function(t,o,e){o.set(t,e)}:function(t,o,e){for(var r=0;r<t.length;++r)o[e+r]=t[r]};fe.prototype.bytes=function(t){var o=t.length>>>0;if(!o)return this._push(Bi,1,0);if(gt.isString(t)){var e=fe.alloc(o=lu.length(t));lu.decode(t,e,0),t=e}return this.uint32(o)._push(Md,o,t)};fe.prototype.string=function(t){var o=fu.length(t);return o?this.uint32(o)._push(fu.write,o,t):this._push(Bi,1,0)};fe.prototype.fork=function(){return this.states=new Nd(this),this.head=this.tail=new Fn(ki,0,0),this.len=0,this};fe.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Fn(ki,0,0),this.len=0),this};fe.prototype.ldelim=function(){var t=this.head,o=this.tail,e=this.len;return this.reset().uint32(e),e&&(this.tail.next=t.next,this.tail=o,this.len+=e),this};fe.prototype.finish=function(){for(var t=this.head.next,o=this.constructor.alloc(this.len),e=0;t;)t.fn(t.val,o,e),e+=t.len,t=t.next;return o};fe._configure=function(a){Ci=a,fe.create=cu(),Ci._configure()}});var mu=ye((Sy,hu)=>{"use strict";hu.exports=Gt;var du=Mi();(Gt.prototype=Object.create(du.prototype)).constructor=Gt;var sr=ar();function Gt(){du.call(this)}Gt._configure=function(){Gt.alloc=sr._Buffer_allocUnsafe,Gt.writeBytesBuffer=sr.Buffer&&sr.Buffer.prototype instanceof Uint8Array&&sr.Buffer.prototype.set.name==="set"?function(t,o,e){o.set(t,e)}:function(t,o,e){if(t.copy)t.copy(o,e,0,t.length);else for(var r=0;r<t.length;)o[e++]=t[r++]}};Gt.prototype.bytes=function(t){sr.isString(t)&&(t=sr._Buffer_from(t,"base64"));var o=t.length>>>0;return this.uint32(o),o&&this._push(Gt.writeBytesBuffer,o,t),this};function Gd(a,t,o){a.length<40?sr.utf8.write(a,t,o):t.utf8Write?t.utf8Write(a,o):t.write(a,o)}Gt.prototype.string=function(t){var o=sr.Buffer.byteLength(t);return this.uint32(o),o&&this._push(Gd,o,t),this};Gt._configure()});var Vi=ye((Ay,xu)=>{"use strict";xu.exports=De;var Ut=ar(),Ui,yu=Ut.LongBits,Ud=Ut.utf8;function Ft(a,t){return RangeError("index out of range: "+a.pos+" + "+(t||1)+" > "+a.len)}function De(a){this.buf=a,this.pos=0,this.len=a.length}var bu=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new De(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new De(t);throw Error("illegal buffer")},Tu=function(){return Ut.Buffer?function(o){return(De.create=function(r){return Ut.Buffer.isBuffer(r)?new Ui(r):bu(r)})(o)}:bu};De.create=Tu();De.prototype._slice=Ut.Array.prototype.subarray||Ut.Array.prototype.slice;De.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Ft(this,10);return t}}();De.prototype.int32=function(){return this.uint32()|0};De.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function Gi(){var a=new yu(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(a.lo=(a.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(this.buf[this.pos]&127)<<28)>>>0,a.hi=(a.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return a;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Ft(this);if(a.lo=(a.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,a}if(this.len-this.pos>4){for(;t<5;++t)if(a.hi=(a.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return a}else for(;t<5;++t){if(this.pos>=this.len)throw Ft(this);if(a.hi=(a.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}De.prototype.bool=function(){return this.uint32()!==0};function Do(a,t){return(a[t-4]|a[t-3]<<8|a[t-2]<<16|a[t-1]<<24)>>>0}De.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ft(this,4);return Do(this.buf,this.pos+=4)};De.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ft(this,4);return Do(this.buf,this.pos+=4)|0};function gu(){if(this.pos+8>this.len)throw Ft(this,8);return new yu(Do(this.buf,this.pos+=4),Do(this.buf,this.pos+=4))}De.prototype.float=function(){if(this.pos+4>this.len)throw Ft(this,4);var t=Ut.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};De.prototype.double=function(){if(this.pos+8>this.len)throw Ft(this,4);var t=Ut.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};De.prototype.bytes=function(){var t=this.uint32(),o=this.pos,e=this.pos+t;if(e>this.len)throw Ft(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(o,e):o===e?new this.buf.constructor(0):this._slice.call(this.buf,o,e)};De.prototype.string=function(){var t=this.bytes();return Ud.read(t,0,t.length)};De.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Ft(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Ft(this);while(this.buf[this.pos++]&128);return this};De.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(a=this.uint32()&7)!==4;)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this};De._configure=function(a){Ui=a,De.create=Tu(),Ui._configure();var t=Ut.Long?"toLong":"toNumber";Ut.merge(De.prototype,{int64:function(){return Gi.call(this)[t](!1)},uint64:function(){return Gi.call(this)[t](!0)},sint64:function(){return Gi.call(this).zzDecode()[t](!1)},fixed64:function(){return gu.call(this)[t](!0)},sfixed64:function(){return gu.call(this)[t](!1)}})}});var Ou=ye((Py,_u)=>{"use strict";_u.exports=_r;var wu=Vi();(_r.prototype=Object.create(wu.prototype)).constructor=_r;var vu=ar();function _r(a){wu.call(this,a)}_r._configure=function(){vu.Buffer&&(_r.prototype._slice=vu.Buffer.prototype.slice)};_r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};_r._configure()});var Su=ye((Ey,Iu)=>{"use strict";Iu.exports=kn;var Wi=ar();(kn.prototype=Object.create(Wi.EventEmitter.prototype)).constructor=kn;function kn(a,t,o){if(typeof a!="function")throw TypeError("rpcImpl must be a function");Wi.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=!!t,this.responseDelimited=!!o}kn.prototype.rpcCall=function a(t,o,e,r,n){if(!r)throw TypeError("request must be specified");var s=this;if(!n)return Wi.asPromise(a,s,t,o,e,r);if(!s.rpcImpl){setTimeout(function(){n(Error("already ended"))},0);return}try{return s.rpcImpl(t,o[s.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(u,l){if(u)return s.emit("error",u,t),n(u);if(l===null){s.end(!0);return}if(!(l instanceof e))try{l=e[s.responseDelimited?"decodeDelimited":"decode"](l)}catch(f){return s.emit("error",f,t),n(f)}return s.emit("data",l,t),n(null,l)})}catch(i){s.emit("error",i,t),setTimeout(function(){n(i)},0);return}};kn.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Pu=ye(Au=>{"use strict";var Vd=Au;Vd.Service=Su()});var Du=ye((Ly,Eu)=>{"use strict";Eu.exports={}});var Cu=ye($u=>{"use strict";var ot=$u;ot.build="minimal";ot.Writer=Mi();ot.BufferWriter=mu();ot.Reader=Vi();ot.BufferReader=Ou();ot.util=ar();ot.rpc=Pu();ot.roots=Du();ot.configure=Lu;function Lu(){ot.util._configure(),ot.Writer._configure(ot.BufferWriter),ot.Reader._configure(ot.BufferReader)}Lu()});var ku=ye((Cy,Fu)=>{"use strict";Fu.exports=Cu()});var Kr=ye((Fy,Bu)=>{"use strict";var xe=ku(),G=xe.Reader,Le=xe.Writer,x=xe.util,g=xe.roots.default||(xe.roots.default={});g.onnx=function(){var a={};return a.Version=function(){var t={},o=Object.create(t);return o[t[0]="_START_VERSION"]=0,o[t[1]="IR_VERSION_2017_10_10"]=1,o[t[2]="IR_VERSION_2017_10_30"]=2,o[t[3]="IR_VERSION_2017_11_3"]=3,o[t[4]="IR_VERSION_2019_1_22"]=4,o[t[5]="IR_VERSION_2019_3_18"]=5,o[t[6]="IR_VERSION_2019_9_19"]=6,o[t[7]="IR_VERSION_2020_5_8"]=7,o[t[8]="IR_VERSION_2021_7_30"]=8,o[t[9]="IR_VERSION"]=9,o}(),a.AttributeProto=function(){function t(o){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.name="",t.prototype.refAttrName="",t.prototype.docString="",t.prototype.type=0,t.prototype.f=0,t.prototype.i=x.Long?x.Long.fromBits(0,0,!1):0,t.prototype.s=x.newBuffer([]),t.prototype.t=null,t.prototype.g=null,t.prototype.sparseTensor=null,t.prototype.tp=null,t.prototype.floats=x.emptyArray,t.prototype.ints=x.emptyArray,t.prototype.strings=x.emptyArray,t.prototype.tensors=x.emptyArray,t.prototype.graphs=x.emptyArray,t.prototype.sparseTensors=x.emptyArray,t.prototype.typeProtos=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Le.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(10).string(e.name),e.f!=null&&Object.hasOwnProperty.call(e,"f")&&r.uint32(21).float(e.f),e.i!=null&&Object.hasOwnProperty.call(e,"i")&&r.uint32(24).int64(e.i),e.s!=null&&Object.hasOwnProperty.call(e,"s")&&r.uint32(34).bytes(e.s),e.t!=null&&Object.hasOwnProperty.call(e,"t")&&g.onnx.TensorProto.encode(e.t,r.uint32(42).fork()).ldelim(),e.g!=null&&Object.hasOwnProperty.call(e,"g")&&g.onnx.GraphProto.encode(e.g,r.uint32(50).fork()).ldelim(),e.floats!=null&&e.floats.length){r.uint32(58).fork();for(var n=0;n<e.floats.length;++n)r.float(e.floats[n]);r.ldelim()}if(e.ints!=null&&e.ints.length){r.uint32(66).fork();for(var n=0;n<e.ints.length;++n)r.int64(e.ints[n]);r.ldelim()}if(e.strings!=null&&e.strings.length)for(var n=0;n<e.strings.length;++n)r.uint32(74).bytes(e.strings[n]);if(e.tensors!=null&&e.tensors.length)for(var n=0;n<e.tensors.length;++n)g.onnx.TensorProto.encode(e.tensors[n],r.uint32(82).fork()).ldelim();if(e.graphs!=null&&e.graphs.length)for(var n=0;n<e.graphs.length;++n)g.onnx.GraphProto.encode(e.graphs[n],r.uint32(90).fork()).ldelim();if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(106).string(e.docString),e.tp!=null&&Object.hasOwnProperty.call(e,"tp")&&g.onnx.TypeProto.encode(e.tp,r.uint32(114).fork()).ldelim(),e.typeProtos!=null&&e.typeProtos.length)for(var n=0;n<e.typeProtos.length;++n)g.onnx.TypeProto.encode(e.typeProtos[n],r.uint32(122).fork()).ldelim();if(e.type!=null&&Object.hasOwnProperty.call(e,"type")&&r.uint32(160).int32(e.type),e.refAttrName!=null&&Object.hasOwnProperty.call(e,"refAttrName")&&r.uint32(170).string(e.refAttrName),e.sparseTensor!=null&&Object.hasOwnProperty.call(e,"sparseTensor")&&g.onnx.SparseTensorProto.encode(e.sparseTensor,r.uint32(178).fork()).ldelim(),e.sparseTensors!=null&&e.sparseTensors.length)for(var n=0;n<e.sparseTensors.length;++n)g.onnx.SparseTensorProto.encode(e.sparseTensors[n],r.uint32(186).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.AttributeProto;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{s.name=e.string();break}case 21:{s.refAttrName=e.string();break}case 13:{s.docString=e.string();break}case 20:{s.type=e.int32();break}case 2:{s.f=e.float();break}case 3:{s.i=e.int64();break}case 4:{s.s=e.bytes();break}case 5:{s.t=g.onnx.TensorProto.decode(e,e.uint32());break}case 6:{s.g=g.onnx.GraphProto.decode(e,e.uint32());break}case 22:{s.sparseTensor=g.onnx.SparseTensorProto.decode(e,e.uint32());break}case 14:{s.tp=g.onnx.TypeProto.decode(e,e.uint32());break}case 7:{if(s.floats&&s.floats.length||(s.floats=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.floats.push(e.float());else s.floats.push(e.float());break}case 8:{if(s.ints&&s.ints.length||(s.ints=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.ints.push(e.int64());else s.ints.push(e.int64());break}case 9:{s.strings&&s.strings.length||(s.strings=[]),s.strings.push(e.bytes());break}case 10:{s.tensors&&s.tensors.length||(s.tensors=[]),s.tensors.push(g.onnx.TensorProto.decode(e,e.uint32()));break}case 11:{s.graphs&&s.graphs.length||(s.graphs=[]),s.graphs.push(g.onnx.GraphProto.decode(e,e.uint32()));break}case 23:{s.sparseTensors&&s.sparseTensors.length||(s.sparseTensors=[]),s.sparseTensors.push(g.onnx.SparseTensorProto.decode(e,e.uint32()));break}case 15:{s.typeProtos&&s.typeProtos.length||(s.typeProtos=[]),s.typeProtos.push(g.onnx.TypeProto.decode(e,e.uint32()));break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!x.isString(e.name))return"name: string expected";if(e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&!x.isString(e.refAttrName))return"refAttrName: string expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString))return"docString: string expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(e.f!=null&&e.hasOwnProperty("f")&&typeof e.f!="number")return"f: number expected";if(e.i!=null&&e.hasOwnProperty("i")&&!x.isInteger(e.i)&&!(e.i&&x.isInteger(e.i.low)&&x.isInteger(e.i.high)))return"i: integer|Long expected";if(e.s!=null&&e.hasOwnProperty("s")&&!(e.s&&typeof e.s.length=="number"||x.isString(e.s)))return"s: buffer expected";if(e.t!=null&&e.hasOwnProperty("t")){var r=g.onnx.TensorProto.verify(e.t);if(r)return"t."+r}if(e.g!=null&&e.hasOwnProperty("g")){var r=g.onnx.GraphProto.verify(e.g);if(r)return"g."+r}if(e.sparseTensor!=null&&e.hasOwnProperty("sparseTensor")){var r=g.onnx.SparseTensorProto.verify(e.sparseTensor);if(r)return"sparseTensor."+r}if(e.tp!=null&&e.hasOwnProperty("tp")){var r=g.onnx.TypeProto.verify(e.tp);if(r)return"tp."+r}if(e.floats!=null&&e.hasOwnProperty("floats")){if(!Array.isArray(e.floats))return"floats: array expected";for(var n=0;n<e.floats.length;++n)if(typeof e.floats[n]!="number")return"floats: number[] expected"}if(e.ints!=null&&e.hasOwnProperty("ints")){if(!Array.isArray(e.ints))return"ints: array expected";for(var n=0;n<e.ints.length;++n)if(!x.isInteger(e.ints[n])&&!(e.ints[n]&&x.isInteger(e.ints[n].low)&&x.isInteger(e.ints[n].high)))return"ints: integer|Long[] expected"}if(e.strings!=null&&e.hasOwnProperty("strings")){if(!Array.isArray(e.strings))return"strings: array expected";for(var n=0;n<e.strings.length;++n)if(!(e.strings[n]&&typeof e.strings[n].length=="number"||x.isString(e.strings[n])))return"strings: buffer[] expected"}if(e.tensors!=null&&e.hasOwnProperty("tensors")){if(!Array.isArray(e.tensors))return"tensors: array expected";for(var n=0;n<e.tensors.length;++n){var r=g.onnx.TensorProto.verify(e.tensors[n]);if(r)return"tensors."+r}}if(e.graphs!=null&&e.hasOwnProperty("graphs")){if(!Array.isArray(e.graphs))return"graphs: array expected";for(var n=0;n<e.graphs.length;++n){var r=g.onnx.GraphProto.verify(e.graphs[n]);if(r)return"graphs."+r}}if(e.sparseTensors!=null&&e.hasOwnProperty("sparseTensors")){if(!Array.isArray(e.sparseTensors))return"sparseTensors: array expected";for(var n=0;n<e.sparseTensors.length;++n){var r=g.onnx.SparseTensorProto.verify(e.sparseTensors[n]);if(r)return"sparseTensors."+r}}if(e.typeProtos!=null&&e.hasOwnProperty("typeProtos")){if(!Array.isArray(e.typeProtos))return"typeProtos: array expected";for(var n=0;n<e.typeProtos.length;++n){var r=g.onnx.TypeProto.verify(e.typeProtos[n]);if(r)return"typeProtos."+r}}return null},t.fromObject=function(e){if(e instanceof g.onnx.AttributeProto)return e;var r=new g.onnx.AttributeProto;switch(e.name!=null&&(r.name=String(e.name)),e.refAttrName!=null&&(r.refAttrName=String(e.refAttrName)),e.docString!=null&&(r.docString=String(e.docString)),e.type){default:if(typeof e.type=="number"){r.type=e.type;break}break;case"UNDEFINED":case 0:r.type=0;break;case"FLOAT":case 1:r.type=1;break;case"INT":case 2:r.type=2;break;case"STRING":case 3:r.type=3;break;case"TENSOR":case 4:r.type=4;break;case"GRAPH":case 5:r.type=5;break;case"SPARSE_TENSOR":case 11:r.type=11;break;case"TYPE_PROTO":case 13:r.type=13;break;case"FLOATS":case 6:r.type=6;break;case"INTS":case 7:r.type=7;break;case"STRINGS":case 8:r.type=8;break;case"TENSORS":case 9:r.type=9;break;case"GRAPHS":case 10:r.type=10;break;case"SPARSE_TENSORS":case 12:r.type=12;break;case"TYPE_PROTOS":case 14:r.type=14;break}if(e.f!=null&&(r.f=Number(e.f)),e.i!=null&&(x.Long?(r.i=x.Long.fromValue(e.i)).unsigned=!1:typeof e.i=="string"?r.i=parseInt(e.i,10):typeof e.i=="number"?r.i=e.i:typeof e.i=="object"&&(r.i=new x.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber())),e.s!=null&&(typeof e.s=="string"?x.base64.decode(e.s,r.s=x.newBuffer(x.base64.length(e.s)),0):e.s.length>=0&&(r.s=e.s)),e.t!=null){if(typeof e.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");r.t=g.onnx.TensorProto.fromObject(e.t)}if(e.g!=null){if(typeof e.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");r.g=g.onnx.GraphProto.fromObject(e.g)}if(e.sparseTensor!=null){if(typeof e.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");r.sparseTensor=g.onnx.SparseTensorProto.fromObject(e.sparseTensor)}if(e.tp!=null){if(typeof e.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");r.tp=g.onnx.TypeProto.fromObject(e.tp)}if(e.floats){if(!Array.isArray(e.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");r.floats=[];for(var n=0;n<e.floats.length;++n)r.floats[n]=Number(e.floats[n])}if(e.ints){if(!Array.isArray(e.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");r.ints=[];for(var n=0;n<e.ints.length;++n)x.Long?(r.ints[n]=x.Long.fromValue(e.ints[n])).unsigned=!1:typeof e.ints[n]=="string"?r.ints[n]=parseInt(e.ints[n],10):typeof e.ints[n]=="number"?r.ints[n]=e.ints[n]:typeof e.ints[n]=="object"&&(r.ints[n]=new x.LongBits(e.ints[n].low>>>0,e.ints[n].high>>>0).toNumber())}if(e.strings){if(!Array.isArray(e.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");r.strings=[];for(var n=0;n<e.strings.length;++n)typeof e.strings[n]=="string"?x.base64.decode(e.strings[n],r.strings[n]=x.newBuffer(x.base64.length(e.strings[n])),0):e.strings[n].length>=0&&(r.strings[n]=e.strings[n])}if(e.tensors){if(!Array.isArray(e.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");r.tensors=[];for(var n=0;n<e.tensors.length;++n){if(typeof e.tensors[n]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");r.tensors[n]=g.onnx.TensorProto.fromObject(e.tensors[n])}}if(e.graphs){if(!Array.isArray(e.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");r.graphs=[];for(var n=0;n<e.graphs.length;++n){if(typeof e.graphs[n]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");r.graphs[n]=g.onnx.GraphProto.fromObject(e.graphs[n])}}if(e.sparseTensors){if(!Array.isArray(e.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");r.sparseTensors=[];for(var n=0;n<e.sparseTensors.length;++n){if(typeof e.sparseTensors[n]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");r.sparseTensors[n]=g.onnx.SparseTensorProto.fromObject(e.sparseTensors[n])}}if(e.typeProtos){if(!Array.isArray(e.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");r.typeProtos=[];for(var n=0;n<e.typeProtos.length;++n){if(typeof e.typeProtos[n]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");r.typeProtos[n]=g.onnx.TypeProto.fromObject(e.typeProtos[n])}}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.floats=[],n.ints=[],n.strings=[],n.tensors=[],n.graphs=[],n.typeProtos=[],n.sparseTensors=[]),r.defaults){if(n.name="",n.f=0,x.Long){var s=new x.Long(0,0,!1);n.i=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else n.i=r.longs===String?"0":0;r.bytes===String?n.s="":(n.s=[],r.bytes!==Array&&(n.s=x.newBuffer(n.s))),n.t=null,n.g=null,n.docString="",n.tp=null,n.type=r.enums===String?"UNDEFINED":0,n.refAttrName="",n.sparseTensor=null}if(e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.f!=null&&e.hasOwnProperty("f")&&(n.f=r.json&&!isFinite(e.f)?String(e.f):e.f),e.i!=null&&e.hasOwnProperty("i")&&(typeof e.i=="number"?n.i=r.longs===String?String(e.i):e.i:n.i=r.longs===String?x.Long.prototype.toString.call(e.i):r.longs===Number?new x.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber():e.i),e.s!=null&&e.hasOwnProperty("s")&&(n.s=r.bytes===String?x.base64.encode(e.s,0,e.s.length):r.bytes===Array?Array.prototype.slice.call(e.s):e.s),e.t!=null&&e.hasOwnProperty("t")&&(n.t=g.onnx.TensorProto.toObject(e.t,r)),e.g!=null&&e.hasOwnProperty("g")&&(n.g=g.onnx.GraphProto.toObject(e.g,r)),e.floats&&e.floats.length){n.floats=[];for(var i=0;i<e.floats.length;++i)n.floats[i]=r.json&&!isFinite(e.floats[i])?String(e.floats[i]):e.floats[i]}if(e.ints&&e.ints.length){n.ints=[];for(var i=0;i<e.ints.length;++i)typeof e.ints[i]=="number"?n.ints[i]=r.longs===String?String(e.ints[i]):e.ints[i]:n.ints[i]=r.longs===String?x.Long.prototype.toString.call(e.ints[i]):r.longs===Number?new x.LongBits(e.ints[i].low>>>0,e.ints[i].high>>>0).toNumber():e.ints[i]}if(e.strings&&e.strings.length){n.strings=[];for(var i=0;i<e.strings.length;++i)n.strings[i]=r.bytes===String?x.base64.encode(e.strings[i],0,e.strings[i].length):r.bytes===Array?Array.prototype.slice.call(e.strings[i]):e.strings[i]}if(e.tensors&&e.tensors.length){n.tensors=[];for(var i=0;i<e.tensors.length;++i)n.tensors[i]=g.onnx.TensorProto.toObject(e.tensors[i],r)}if(e.graphs&&e.graphs.length){n.graphs=[];for(var i=0;i<e.graphs.length;++i)n.graphs[i]=g.onnx.GraphProto.toObject(e.graphs[i],r)}if(e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.tp!=null&&e.hasOwnProperty("tp")&&(n.tp=g.onnx.TypeProto.toObject(e.tp,r)),e.typeProtos&&e.typeProtos.length){n.typeProtos=[];for(var i=0;i<e.typeProtos.length;++i)n.typeProtos[i]=g.onnx.TypeProto.toObject(e.typeProtos[i],r)}if(e.type!=null&&e.hasOwnProperty("type")&&(n.type=r.enums===String?g.onnx.AttributeProto.AttributeType[e.type]===void 0?e.type:g.onnx.AttributeProto.AttributeType[e.type]:e.type),e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&(n.refAttrName=e.refAttrName),e.sparseTensor!=null&&e.hasOwnProperty("sparseTensor")&&(n.sparseTensor=g.onnx.SparseTensorProto.toObject(e.sparseTensor,r)),e.sparseTensors&&e.sparseTensors.length){n.sparseTensors=[];for(var i=0;i<e.sparseTensors.length;++i)n.sparseTensors[i]=g.onnx.SparseTensorProto.toObject(e.sparseTensors[i],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.AttributeProto"},t.AttributeType=function(){var o={},e=Object.create(o);return e[o[0]="UNDEFINED"]=0,e[o[1]="FLOAT"]=1,e[o[2]="INT"]=2,e[o[3]="STRING"]=3,e[o[4]="TENSOR"]=4,e[o[5]="GRAPH"]=5,e[o[11]="SPARSE_TENSOR"]=11,e[o[13]="TYPE_PROTO"]=13,e[o[6]="FLOATS"]=6,e[o[7]="INTS"]=7,e[o[8]="STRINGS"]=8,e[o[9]="TENSORS"]=9,e[o[10]="GRAPHS"]=10,e[o[12]="SPARSE_TENSORS"]=12,e[o[14]="TYPE_PROTOS"]=14,e}(),t}(),a.ValueInfoProto=function(){function t(o){if(o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.name="",t.prototype.type=null,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(e,r){return r||(r=Le.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(10).string(e.name),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&g.onnx.TypeProto.encode(e.type,r.uint32(18).fork()).ldelim(),e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(26).string(e.docString),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.ValueInfoProto;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{s.name=e.string();break}case 2:{s.type=g.onnx.TypeProto.decode(e,e.uint32());break}case 3:{s.docString=e.string();break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!x.isString(e.name))return"name: string expected";if(e.type!=null&&e.hasOwnProperty("type")){var r=g.onnx.TypeProto.verify(e.type);if(r)return"type."+r}return e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString)?"docString: string expected":null},t.fromObject=function(e){if(e instanceof g.onnx.ValueInfoProto)return e;var r=new g.onnx.ValueInfoProto;if(e.name!=null&&(r.name=String(e.name)),e.type!=null){if(typeof e.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");r.type=g.onnx.TypeProto.fromObject(e.type)}return e.docString!=null&&(r.docString=String(e.docString)),r},t.toObject=function(e,r){r||(r={});var n={};return r.defaults&&(n.name="",n.type=null,n.docString=""),e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.type!=null&&e.hasOwnProperty("type")&&(n.type=g.onnx.TypeProto.toObject(e.type,r)),e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.ValueInfoProto"},t}(),a.NodeProto=function(){function t(o){if(this.input=[],this.output=[],this.attribute=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.input=x.emptyArray,t.prototype.output=x.emptyArray,t.prototype.name="",t.prototype.opType="",t.prototype.domain="",t.prototype.attribute=x.emptyArray,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Le.create()),e.input!=null&&e.input.length)for(var n=0;n<e.input.length;++n)r.uint32(10).string(e.input[n]);if(e.output!=null&&e.output.length)for(var n=0;n<e.output.length;++n)r.uint32(18).string(e.output[n]);if(e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(26).string(e.name),e.opType!=null&&Object.hasOwnProperty.call(e,"opType")&&r.uint32(34).string(e.opType),e.attribute!=null&&e.attribute.length)for(var n=0;n<e.attribute.length;++n)g.onnx.AttributeProto.encode(e.attribute[n],r.uint32(42).fork()).ldelim();return e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(50).string(e.docString),e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&r.uint32(58).string(e.domain),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.NodeProto;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{s.input&&s.input.length||(s.input=[]),s.input.push(e.string());break}case 2:{s.output&&s.output.length||(s.output=[]),s.output.push(e.string());break}case 3:{s.name=e.string();break}case 4:{s.opType=e.string();break}case 7:{s.domain=e.string();break}case 5:{s.attribute&&s.attribute.length||(s.attribute=[]),s.attribute.push(g.onnx.AttributeProto.decode(e,e.uint32()));break}case 6:{s.docString=e.string();break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var r=0;r<e.input.length;++r)if(!x.isString(e.input[r]))return"input: string[] expected"}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(var r=0;r<e.output.length;++r)if(!x.isString(e.output[r]))return"output: string[] expected"}if(e.name!=null&&e.hasOwnProperty("name")&&!x.isString(e.name))return"name: string expected";if(e.opType!=null&&e.hasOwnProperty("opType")&&!x.isString(e.opType))return"opType: string expected";if(e.domain!=null&&e.hasOwnProperty("domain")&&!x.isString(e.domain))return"domain: string expected";if(e.attribute!=null&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(var r=0;r<e.attribute.length;++r){var n=g.onnx.AttributeProto.verify(e.attribute[r]);if(n)return"attribute."+n}}return e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString)?"docString: string expected":null},t.fromObject=function(e){if(e instanceof g.onnx.NodeProto)return e;var r=new g.onnx.NodeProto;if(e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.NodeProto.input: array expected");r.input=[];for(var n=0;n<e.input.length;++n)r.input[n]=String(e.input[n])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.NodeProto.output: array expected");r.output=[];for(var n=0;n<e.output.length;++n)r.output[n]=String(e.output[n])}if(e.name!=null&&(r.name=String(e.name)),e.opType!=null&&(r.opType=String(e.opType)),e.domain!=null&&(r.domain=String(e.domain)),e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");r.attribute=[];for(var n=0;n<e.attribute.length;++n){if(typeof e.attribute[n]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");r.attribute[n]=g.onnx.AttributeProto.fromObject(e.attribute[n])}}return e.docString!=null&&(r.docString=String(e.docString)),r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.input=[],n.output=[],n.attribute=[]),r.defaults&&(n.name="",n.opType="",n.docString="",n.domain=""),e.input&&e.input.length){n.input=[];for(var s=0;s<e.input.length;++s)n.input[s]=e.input[s]}if(e.output&&e.output.length){n.output=[];for(var s=0;s<e.output.length;++s)n.output[s]=e.output[s]}if(e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.opType!=null&&e.hasOwnProperty("opType")&&(n.opType=e.opType),e.attribute&&e.attribute.length){n.attribute=[];for(var s=0;s<e.attribute.length;++s)n.attribute[s]=g.onnx.AttributeProto.toObject(e.attribute[s],r)}return e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.domain!=null&&e.hasOwnProperty("domain")&&(n.domain=e.domain),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.NodeProto"},t}(),a.TrainingInfoProto=function(){function t(o){if(this.initializationBinding=[],this.updateBinding=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.initialization=null,t.prototype.algorithm=null,t.prototype.initializationBinding=x.emptyArray,t.prototype.updateBinding=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Le.create()),e.initialization!=null&&Object.hasOwnProperty.call(e,"initialization")&&g.onnx.GraphProto.encode(e.initialization,r.uint32(10).fork()).ldelim(),e.algorithm!=null&&Object.hasOwnProperty.call(e,"algorithm")&&g.onnx.GraphProto.encode(e.algorithm,r.uint32(18).fork()).ldelim(),e.initializationBinding!=null&&e.initializationBinding.length)for(var n=0;n<e.initializationBinding.length;++n)g.onnx.StringStringEntryProto.encode(e.initializationBinding[n],r.uint32(26).fork()).ldelim();if(e.updateBinding!=null&&e.updateBinding.length)for(var n=0;n<e.updateBinding.length;++n)g.onnx.StringStringEntryProto.encode(e.updateBinding[n],r.uint32(34).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.TrainingInfoProto;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{s.initialization=g.onnx.GraphProto.decode(e,e.uint32());break}case 2:{s.algorithm=g.onnx.GraphProto.decode(e,e.uint32());break}case 3:{s.initializationBinding&&s.initializationBinding.length||(s.initializationBinding=[]),s.initializationBinding.push(g.onnx.StringStringEntryProto.decode(e,e.uint32()));break}case 4:{s.updateBinding&&s.updateBinding.length||(s.updateBinding=[]),s.updateBinding.push(g.onnx.StringStringEntryProto.decode(e,e.uint32()));break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.initialization!=null&&e.hasOwnProperty("initialization")){var r=g.onnx.GraphProto.verify(e.initialization);if(r)return"initialization."+r}if(e.algorithm!=null&&e.hasOwnProperty("algorithm")){var r=g.onnx.GraphProto.verify(e.algorithm);if(r)return"algorithm."+r}if(e.initializationBinding!=null&&e.hasOwnProperty("initializationBinding")){if(!Array.isArray(e.initializationBinding))return"initializationBinding: array expected";for(var n=0;n<e.initializationBinding.length;++n){var r=g.onnx.StringStringEntryProto.verify(e.initializationBinding[n]);if(r)return"initializationBinding."+r}}if(e.updateBinding!=null&&e.hasOwnProperty("updateBinding")){if(!Array.isArray(e.updateBinding))return"updateBinding: array expected";for(var n=0;n<e.updateBinding.length;++n){var r=g.onnx.StringStringEntryProto.verify(e.updateBinding[n]);if(r)return"updateBinding."+r}}return null},t.fromObject=function(e){if(e instanceof g.onnx.TrainingInfoProto)return e;var r=new g.onnx.TrainingInfoProto;if(e.initialization!=null){if(typeof e.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");r.initialization=g.onnx.GraphProto.fromObject(e.initialization)}if(e.algorithm!=null){if(typeof e.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");r.algorithm=g.onnx.GraphProto.fromObject(e.algorithm)}if(e.initializationBinding){if(!Array.isArray(e.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");r.initializationBinding=[];for(var n=0;n<e.initializationBinding.length;++n){if(typeof e.initializationBinding[n]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");r.initializationBinding[n]=g.onnx.StringStringEntryProto.fromObject(e.initializationBinding[n])}}if(e.updateBinding){if(!Array.isArray(e.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");r.updateBinding=[];for(var n=0;n<e.updateBinding.length;++n){if(typeof e.updateBinding[n]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");r.updateBinding[n]=g.onnx.StringStringEntryProto.fromObject(e.updateBinding[n])}}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.initializationBinding=[],n.updateBinding=[]),r.defaults&&(n.initialization=null,n.algorithm=null),e.initialization!=null&&e.hasOwnProperty("initialization")&&(n.initialization=g.onnx.GraphProto.toObject(e.initialization,r)),e.algorithm!=null&&e.hasOwnProperty("algorithm")&&(n.algorithm=g.onnx.GraphProto.toObject(e.algorithm,r)),e.initializationBinding&&e.initializationBinding.length){n.initializationBinding=[];for(var s=0;s<e.initializationBinding.length;++s)n.initializationBinding[s]=g.onnx.StringStringEntryProto.toObject(e.initializationBinding[s],r)}if(e.updateBinding&&e.updateBinding.length){n.updateBinding=[];for(var s=0;s<e.updateBinding.length;++s)n.updateBinding[s]=g.onnx.StringStringEntryProto.toObject(e.updateBinding[s],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TrainingInfoProto"},t}(),a.ModelProto=function(){function t(o){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.irVersion=x.Long?x.Long.fromBits(0,0,!1):0,t.prototype.opsetImport=x.emptyArray,t.prototype.producerName="",t.prototype.producerVersion="",t.prototype.domain="",t.prototype.modelVersion=x.Long?x.Long.fromBits(0,0,!1):0,t.prototype.docString="",t.prototype.graph=null,t.prototype.metadataProps=x.emptyArray,t.prototype.trainingInfo=x.emptyArray,t.prototype.functions=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Le.create()),e.irVersion!=null&&Object.hasOwnProperty.call(e,"irVersion")&&r.uint32(8).int64(e.irVersion),e.producerName!=null&&Object.hasOwnProperty.call(e,"producerName")&&r.uint32(18).string(e.producerName),e.producerVersion!=null&&Object.hasOwnProperty.call(e,"producerVersion")&&r.uint32(26).string(e.producerVersion),e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&r.uint32(34).string(e.domain),e.modelVersion!=null&&Object.hasOwnProperty.call(e,"modelVersion")&&r.uint32(40).int64(e.modelVersion),e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(50).string(e.docString),e.graph!=null&&Object.hasOwnProperty.call(e,"graph")&&g.onnx.GraphProto.encode(e.graph,r.uint32(58).fork()).ldelim(),e.opsetImport!=null&&e.opsetImport.length)for(var n=0;n<e.opsetImport.length;++n)g.onnx.OperatorSetIdProto.encode(e.opsetImport[n],r.uint32(66).fork()).ldelim();if(e.metadataProps!=null&&e.metadataProps.length)for(var n=0;n<e.metadataProps.length;++n)g.onnx.StringStringEntryProto.encode(e.metadataProps[n],r.uint32(114).fork()).ldelim();if(e.trainingInfo!=null&&e.trainingInfo.length)for(var n=0;n<e.trainingInfo.length;++n)g.onnx.TrainingInfoProto.encode(e.trainingInfo[n],r.uint32(162).fork()).ldelim();if(e.functions!=null&&e.functions.length)for(var n=0;n<e.functions.length;++n)g.onnx.FunctionProto.encode(e.functions[n],r.uint32(202).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.ModelProto;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{s.irVersion=e.int64();break}case 8:{s.opsetImport&&s.opsetImport.length||(s.opsetImport=[]),s.opsetImport.push(g.onnx.OperatorSetIdProto.decode(e,e.uint32()));break}case 2:{s.producerName=e.string();break}case 3:{s.producerVersion=e.string();break}case 4:{s.domain=e.string();break}case 5:{s.modelVersion=e.int64();break}case 6:{s.docString=e.string();break}case 7:{s.graph=g.onnx.GraphProto.decode(e,e.uint32());break}case 14:{s.metadataProps&&s.metadataProps.length||(s.metadataProps=[]),s.metadataProps.push(g.onnx.StringStringEntryProto.decode(e,e.uint32()));break}case 20:{s.trainingInfo&&s.trainingInfo.length||(s.trainingInfo=[]),s.trainingInfo.push(g.onnx.TrainingInfoProto.decode(e,e.uint32()));break}case 25:{s.functions&&s.functions.length||(s.functions=[]),s.functions.push(g.onnx.FunctionProto.decode(e,e.uint32()));break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.irVersion!=null&&e.hasOwnProperty("irVersion")&&!x.isInteger(e.irVersion)&&!(e.irVersion&&x.isInteger(e.irVersion.low)&&x.isInteger(e.irVersion.high)))return"irVersion: integer|Long expected";if(e.opsetImport!=null&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var r=0;r<e.opsetImport.length;++r){var n=g.onnx.OperatorSetIdProto.verify(e.opsetImport[r]);if(n)return"opsetImport."+n}}if(e.producerName!=null&&e.hasOwnProperty("producerName")&&!x.isString(e.producerName))return"producerName: string expected";if(e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&!x.isString(e.producerVersion))return"producerVersion: string expected";if(e.domain!=null&&e.hasOwnProperty("domain")&&!x.isString(e.domain))return"domain: string expected";if(e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&!x.isInteger(e.modelVersion)&&!(e.modelVersion&&x.isInteger(e.modelVersion.low)&&x.isInteger(e.modelVersion.high)))return"modelVersion: integer|Long expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString))return"docString: string expected";if(e.graph!=null&&e.hasOwnProperty("graph")){var n=g.onnx.GraphProto.verify(e.graph);if(n)return"graph."+n}if(e.metadataProps!=null&&e.hasOwnProperty("metadataProps")){if(!Array.isArray(e.metadataProps))return"metadataProps: array expected";for(var r=0;r<e.metadataProps.length;++r){var n=g.onnx.StringStringEntryProto.verify(e.metadataProps[r]);if(n)return"metadataProps."+n}}if(e.trainingInfo!=null&&e.hasOwnProperty("trainingInfo")){if(!Array.isArray(e.trainingInfo))return"trainingInfo: array expected";for(var r=0;r<e.trainingInfo.length;++r){var n=g.onnx.TrainingInfoProto.verify(e.trainingInfo[r]);if(n)return"trainingInfo."+n}}if(e.functions!=null&&e.hasOwnProperty("functions")){if(!Array.isArray(e.functions))return"functions: array expected";for(var r=0;r<e.functions.length;++r){var n=g.onnx.FunctionProto.verify(e.functions[r]);if(n)return"functions."+n}}return null},t.fromObject=function(e){if(e instanceof g.onnx.ModelProto)return e;var r=new g.onnx.ModelProto;if(e.irVersion!=null&&(x.Long?(r.irVersion=x.Long.fromValue(e.irVersion)).unsigned=!1:typeof e.irVersion=="string"?r.irVersion=parseInt(e.irVersion,10):typeof e.irVersion=="number"?r.irVersion=e.irVersion:typeof e.irVersion=="object"&&(r.irVersion=new x.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber())),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");r.opsetImport=[];for(var n=0;n<e.opsetImport.length;++n){if(typeof e.opsetImport[n]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");r.opsetImport[n]=g.onnx.OperatorSetIdProto.fromObject(e.opsetImport[n])}}if(e.producerName!=null&&(r.producerName=String(e.producerName)),e.producerVersion!=null&&(r.producerVersion=String(e.producerVersion)),e.domain!=null&&(r.domain=String(e.domain)),e.modelVersion!=null&&(x.Long?(r.modelVersion=x.Long.fromValue(e.modelVersion)).unsigned=!1:typeof e.modelVersion=="string"?r.modelVersion=parseInt(e.modelVersion,10):typeof e.modelVersion=="number"?r.modelVersion=e.modelVersion:typeof e.modelVersion=="object"&&(r.modelVersion=new x.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber())),e.docString!=null&&(r.docString=String(e.docString)),e.graph!=null){if(typeof e.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");r.graph=g.onnx.GraphProto.fromObject(e.graph)}if(e.metadataProps){if(!Array.isArray(e.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");r.metadataProps=[];for(var n=0;n<e.metadataProps.length;++n){if(typeof e.metadataProps[n]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");r.metadataProps[n]=g.onnx.StringStringEntryProto.fromObject(e.metadataProps[n])}}if(e.trainingInfo){if(!Array.isArray(e.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");r.trainingInfo=[];for(var n=0;n<e.trainingInfo.length;++n){if(typeof e.trainingInfo[n]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");r.trainingInfo[n]=g.onnx.TrainingInfoProto.fromObject(e.trainingInfo[n])}}if(e.functions){if(!Array.isArray(e.functions))throw TypeError(".onnx.ModelProto.functions: array expected");r.functions=[];for(var n=0;n<e.functions.length;++n){if(typeof e.functions[n]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");r.functions[n]=g.onnx.FunctionProto.fromObject(e.functions[n])}}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.opsetImport=[],n.metadataProps=[],n.trainingInfo=[],n.functions=[]),r.defaults){if(x.Long){var s=new x.Long(0,0,!1);n.irVersion=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else n.irVersion=r.longs===String?"0":0;if(n.producerName="",n.producerVersion="",n.domain="",x.Long){var s=new x.Long(0,0,!1);n.modelVersion=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else n.modelVersion=r.longs===String?"0":0;n.docString="",n.graph=null}if(e.irVersion!=null&&e.hasOwnProperty("irVersion")&&(typeof e.irVersion=="number"?n.irVersion=r.longs===String?String(e.irVersion):e.irVersion:n.irVersion=r.longs===String?x.Long.prototype.toString.call(e.irVersion):r.longs===Number?new x.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber():e.irVersion),e.producerName!=null&&e.hasOwnProperty("producerName")&&(n.producerName=e.producerName),e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&(n.producerVersion=e.producerVersion),e.domain!=null&&e.hasOwnProperty("domain")&&(n.domain=e.domain),e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&(typeof e.modelVersion=="number"?n.modelVersion=r.longs===String?String(e.modelVersion):e.modelVersion:n.modelVersion=r.longs===String?x.Long.prototype.toString.call(e.modelVersion):r.longs===Number?new x.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber():e.modelVersion),e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.graph!=null&&e.hasOwnProperty("graph")&&(n.graph=g.onnx.GraphProto.toObject(e.graph,r)),e.opsetImport&&e.opsetImport.length){n.opsetImport=[];for(var i=0;i<e.opsetImport.length;++i)n.opsetImport[i]=g.onnx.OperatorSetIdProto.toObject(e.opsetImport[i],r)}if(e.metadataProps&&e.metadataProps.length){n.metadataProps=[];for(var i=0;i<e.metadataProps.length;++i)n.metadataProps[i]=g.onnx.StringStringEntryProto.toObject(e.metadataProps[i],r)}if(e.trainingInfo&&e.trainingInfo.length){n.trainingInfo=[];for(var i=0;i<e.trainingInfo.length;++i)n.trainingInfo[i]=g.onnx.TrainingInfoProto.toObject(e.trainingInfo[i],r)}if(e.functions&&e.functions.length){n.functions=[];for(var i=0;i<e.functions.length;++i)n.functions[i]=g.onnx.FunctionProto.toObject(e.functions[i],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.ModelProto"},t}(),a.StringStringEntryProto=function(){function t(o){if(o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.key="",t.prototype.value="",t.create=function(e){return new t(e)},t.encode=function(e,r){return r||(r=Le.create()),e.key!=null&&Object.hasOwnProperty.call(e,"key")&&r.uint32(10).string(e.key),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&r.uint32(18).string(e.value),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.StringStringEntryProto;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{s.key=e.string();break}case 2:{s.value=e.string();break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":e.key!=null&&e.hasOwnProperty("key")&&!x.isString(e.key)?"key: string expected":e.value!=null&&e.hasOwnProperty("value")&&!x.isString(e.value)?"value: string expected":null},t.fromObject=function(e){if(e instanceof g.onnx.StringStringEntryProto)return e;var r=new g.onnx.StringStringEntryProto;return e.key!=null&&(r.key=String(e.key)),e.value!=null&&(r.value=String(e.value)),r},t.toObject=function(e,r){r||(r={});var n={};return r.defaults&&(n.key="",n.value=""),e.key!=null&&e.hasOwnProperty("key")&&(n.key=e.key),e.value!=null&&e.hasOwnProperty("value")&&(n.value=e.value),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.StringStringEntryProto"},t}(),a.TensorAnnotation=function(){function t(o){if(this.quantParameterTensorNames=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.tensorName="",t.prototype.quantParameterTensorNames=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Le.create()),e.tensorName!=null&&Object.hasOwnProperty.call(e,"tensorName")&&r.uint32(10).string(e.tensorName),e.quantParameterTensorNames!=null&&e.quantParameterTensorNames.length)for(var n=0;n<e.quantParameterTensorNames.length;++n)g.onnx.StringStringEntryProto.encode(e.quantParameterTensorNames[n],r.uint32(18).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.TensorAnnotation;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{s.tensorName=e.string();break}case 2:{s.quantParameterTensorNames&&s.quantParameterTensorNames.length||(s.quantParameterTensorNames=[]),s.quantParameterTensorNames.push(g.onnx.StringStringEntryProto.decode(e,e.uint32()));break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.tensorName!=null&&e.hasOwnProperty("tensorName")&&!x.isString(e.tensorName))return"tensorName: string expected";if(e.quantParameterTensorNames!=null&&e.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(e.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var r=0;r<e.quantParameterTensorNames.length;++r){var n=g.onnx.StringStringEntryProto.verify(e.quantParameterTensorNames[r]);if(n)return"quantParameterTensorNames."+n}}return null},t.fromObject=function(e){if(e instanceof g.onnx.TensorAnnotation)return e;var r=new g.onnx.TensorAnnotation;if(e.tensorName!=null&&(r.tensorName=String(e.tensorName)),e.quantParameterTensorNames){if(!Array.isArray(e.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");r.quantParameterTensorNames=[];for(var n=0;n<e.quantParameterTensorNames.length;++n){if(typeof e.quantParameterTensorNames[n]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");r.quantParameterTensorNames[n]=g.onnx.StringStringEntryProto.fromObject(e.quantParameterTensorNames[n])}}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.quantParameterTensorNames=[]),r.defaults&&(n.tensorName=""),e.tensorName!=null&&e.hasOwnProperty("tensorName")&&(n.tensorName=e.tensorName),e.quantParameterTensorNames&&e.quantParameterTensorNames.length){n.quantParameterTensorNames=[];for(var s=0;s<e.quantParameterTensorNames.length;++s)n.quantParameterTensorNames[s]=g.onnx.StringStringEntryProto.toObject(e.quantParameterTensorNames[s],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TensorAnnotation"},t}(),a.GraphProto=function(){function t(o){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.node=x.emptyArray,t.prototype.name="",t.prototype.initializer=x.emptyArray,t.prototype.sparseInitializer=x.emptyArray,t.prototype.docString="",t.prototype.input=x.emptyArray,t.prototype.output=x.emptyArray,t.prototype.valueInfo=x.emptyArray,t.prototype.quantizationAnnotation=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Le.create()),e.node!=null&&e.node.length)for(var n=0;n<e.node.length;++n)g.onnx.NodeProto.encode(e.node[n],r.uint32(10).fork()).ldelim();if(e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(18).string(e.name),e.initializer!=null&&e.initializer.length)for(var n=0;n<e.initializer.length;++n)g.onnx.TensorProto.encode(e.initializer[n],r.uint32(42).fork()).ldelim();if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(82).string(e.docString),e.input!=null&&e.input.length)for(var n=0;n<e.input.length;++n)g.onnx.ValueInfoProto.encode(e.input[n],r.uint32(90).fork()).ldelim();if(e.output!=null&&e.output.length)for(var n=0;n<e.output.length;++n)g.onnx.ValueInfoProto.encode(e.output[n],r.uint32(98).fork()).ldelim();if(e.valueInfo!=null&&e.valueInfo.length)for(var n=0;n<e.valueInfo.length;++n)g.onnx.ValueInfoProto.encode(e.valueInfo[n],r.uint32(106).fork()).ldelim();if(e.quantizationAnnotation!=null&&e.quantizationAnnotation.length)for(var n=0;n<e.quantizationAnnotation.length;++n)g.onnx.TensorAnnotation.encode(e.quantizationAnnotation[n],r.uint32(114).fork()).ldelim();if(e.sparseInitializer!=null&&e.sparseInitializer.length)for(var n=0;n<e.sparseInitializer.length;++n)g.onnx.SparseTensorProto.encode(e.sparseInitializer[n],r.uint32(122).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.GraphProto;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{s.node&&s.node.length||(s.node=[]),s.node.push(g.onnx.NodeProto.decode(e,e.uint32()));break}case 2:{s.name=e.string();break}case 5:{s.initializer&&s.initializer.length||(s.initializer=[]),s.initializer.push(g.onnx.TensorProto.decode(e,e.uint32()));break}case 15:{s.sparseInitializer&&s.sparseInitializer.length||(s.sparseInitializer=[]),s.sparseInitializer.push(g.onnx.SparseTensorProto.decode(e,e.uint32()));break}case 10:{s.docString=e.string();break}case 11:{s.input&&s.input.length||(s.input=[]),s.input.push(g.onnx.ValueInfoProto.decode(e,e.uint32()));break}case 12:{s.output&&s.output.length||(s.output=[]),s.output.push(g.onnx.ValueInfoProto.decode(e,e.uint32()));break}case 13:{s.valueInfo&&s.valueInfo.length||(s.valueInfo=[]),s.valueInfo.push(g.onnx.ValueInfoProto.decode(e,e.uint32()));break}case 14:{s.quantizationAnnotation&&s.quantizationAnnotation.length||(s.quantizationAnnotation=[]),s.quantizationAnnotation.push(g.onnx.TensorAnnotation.decode(e,e.uint32()));break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.node!=null&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var r=0;r<e.node.length;++r){var n=g.onnx.NodeProto.verify(e.node[r]);if(n)return"node."+n}}if(e.name!=null&&e.hasOwnProperty("name")&&!x.isString(e.name))return"name: string expected";if(e.initializer!=null&&e.hasOwnProperty("initializer")){if(!Array.isArray(e.initializer))return"initializer: array expected";for(var r=0;r<e.initializer.length;++r){var n=g.onnx.TensorProto.verify(e.initializer[r]);if(n)return"initializer."+n}}if(e.sparseInitializer!=null&&e.hasOwnProperty("sparseInitializer")){if(!Array.isArray(e.sparseInitializer))return"sparseInitializer: array expected";for(var r=0;r<e.sparseInitializer.length;++r){var n=g.onnx.SparseTensorProto.verify(e.sparseInitializer[r]);if(n)return"sparseInitializer."+n}}if(e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString))return"docString: string expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var r=0;r<e.input.length;++r){var n=g.onnx.ValueInfoProto.verify(e.input[r]);if(n)return"input."+n}}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(var r=0;r<e.output.length;++r){var n=g.onnx.ValueInfoProto.verify(e.output[r]);if(n)return"output."+n}}if(e.valueInfo!=null&&e.hasOwnProperty("valueInfo")){if(!Array.isArray(e.valueInfo))return"valueInfo: array expected";for(var r=0;r<e.valueInfo.length;++r){var n=g.onnx.ValueInfoProto.verify(e.valueInfo[r]);if(n)return"valueInfo."+n}}if(e.quantizationAnnotation!=null&&e.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(e.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var r=0;r<e.quantizationAnnotation.length;++r){var n=g.onnx.TensorAnnotation.verify(e.quantizationAnnotation[r]);if(n)return"quantizationAnnotation."+n}}return null},t.fromObject=function(e){if(e instanceof g.onnx.GraphProto)return e;var r=new g.onnx.GraphProto;if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.GraphProto.node: array expected");r.node=[];for(var n=0;n<e.node.length;++n){if(typeof e.node[n]!="object")throw TypeError(".onnx.GraphProto.node: object expected");r.node[n]=g.onnx.NodeProto.fromObject(e.node[n])}}if(e.name!=null&&(r.name=String(e.name)),e.initializer){if(!Array.isArray(e.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");r.initializer=[];for(var n=0;n<e.initializer.length;++n){if(typeof e.initializer[n]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");r.initializer[n]=g.onnx.TensorProto.fromObject(e.initializer[n])}}if(e.sparseInitializer){if(!Array.isArray(e.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");r.sparseInitializer=[];for(var n=0;n<e.sparseInitializer.length;++n){if(typeof e.sparseInitializer[n]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");r.sparseInitializer[n]=g.onnx.SparseTensorProto.fromObject(e.sparseInitializer[n])}}if(e.docString!=null&&(r.docString=String(e.docString)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.GraphProto.input: array expected");r.input=[];for(var n=0;n<e.input.length;++n){if(typeof e.input[n]!="object")throw TypeError(".onnx.GraphProto.input: object expected");r.input[n]=g.onnx.ValueInfoProto.fromObject(e.input[n])}}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.GraphProto.output: array expected");r.output=[];for(var n=0;n<e.output.length;++n){if(typeof e.output[n]!="object")throw TypeError(".onnx.GraphProto.output: object expected");r.output[n]=g.onnx.ValueInfoProto.fromObject(e.output[n])}}if(e.valueInfo){if(!Array.isArray(e.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");r.valueInfo=[];for(var n=0;n<e.valueInfo.length;++n){if(typeof e.valueInfo[n]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");r.valueInfo[n]=g.onnx.ValueInfoProto.fromObject(e.valueInfo[n])}}if(e.quantizationAnnotation){if(!Array.isArray(e.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");r.quantizationAnnotation=[];for(var n=0;n<e.quantizationAnnotation.length;++n){if(typeof e.quantizationAnnotation[n]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");r.quantizationAnnotation[n]=g.onnx.TensorAnnotation.fromObject(e.quantizationAnnotation[n])}}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.node=[],n.initializer=[],n.input=[],n.output=[],n.valueInfo=[],n.quantizationAnnotation=[],n.sparseInitializer=[]),r.defaults&&(n.name="",n.docString=""),e.node&&e.node.length){n.node=[];for(var s=0;s<e.node.length;++s)n.node[s]=g.onnx.NodeProto.toObject(e.node[s],r)}if(e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.initializer&&e.initializer.length){n.initializer=[];for(var s=0;s<e.initializer.length;++s)n.initializer[s]=g.onnx.TensorProto.toObject(e.initializer[s],r)}if(e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.input&&e.input.length){n.input=[];for(var s=0;s<e.input.length;++s)n.input[s]=g.onnx.ValueInfoProto.toObject(e.input[s],r)}if(e.output&&e.output.length){n.output=[];for(var s=0;s<e.output.length;++s)n.output[s]=g.onnx.ValueInfoProto.toObject(e.output[s],r)}if(e.valueInfo&&e.valueInfo.length){n.valueInfo=[];for(var s=0;s<e.valueInfo.length;++s)n.valueInfo[s]=g.onnx.ValueInfoProto.toObject(e.valueInfo[s],r)}if(e.quantizationAnnotation&&e.quantizationAnnotation.length){n.quantizationAnnotation=[];for(var s=0;s<e.quantizationAnnotation.length;++s)n.quantizationAnnotation[s]=g.onnx.TensorAnnotation.toObject(e.quantizationAnnotation[s],r)}if(e.sparseInitializer&&e.sparseInitializer.length){n.sparseInitializer=[];for(var s=0;s<e.sparseInitializer.length;++s)n.sparseInitializer[s]=g.onnx.SparseTensorProto.toObject(e.sparseInitializer[s],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.GraphProto"},t}(),a.TensorProto=function(){function t(o){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.dims=x.emptyArray,t.prototype.dataType=0,t.prototype.segment=null,t.prototype.floatData=x.emptyArray,t.prototype.int32Data=x.emptyArray,t.prototype.stringData=x.emptyArray,t.prototype.int64Data=x.emptyArray,t.prototype.name="",t.prototype.docString="",t.prototype.rawData=x.newBuffer([]),t.prototype.externalData=x.emptyArray,t.prototype.dataLocation=0,t.prototype.doubleData=x.emptyArray,t.prototype.uint64Data=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Le.create()),e.dims!=null&&e.dims.length){r.uint32(10).fork();for(var n=0;n<e.dims.length;++n)r.int64(e.dims[n]);r.ldelim()}if(e.dataType!=null&&Object.hasOwnProperty.call(e,"dataType")&&r.uint32(16).int32(e.dataType),e.segment!=null&&Object.hasOwnProperty.call(e,"segment")&&g.onnx.TensorProto.Segment.encode(e.segment,r.uint32(26).fork()).ldelim(),e.floatData!=null&&e.floatData.length){r.uint32(34).fork();for(var n=0;n<e.floatData.length;++n)r.float(e.floatData[n]);r.ldelim()}if(e.int32Data!=null&&e.int32Data.length){r.uint32(42).fork();for(var n=0;n<e.int32Data.length;++n)r.int32(e.int32Data[n]);r.ldelim()}if(e.stringData!=null&&e.stringData.length)for(var n=0;n<e.stringData.length;++n)r.uint32(50).bytes(e.stringData[n]);if(e.int64Data!=null&&e.int64Data.length){r.uint32(58).fork();for(var n=0;n<e.int64Data.length;++n)r.int64(e.int64Data[n]);r.ldelim()}if(e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(66).string(e.name),e.rawData!=null&&Object.hasOwnProperty.call(e,"rawData")&&r.uint32(74).bytes(e.rawData),e.doubleData!=null&&e.doubleData.length){r.uint32(82).fork();for(var n=0;n<e.doubleData.length;++n)r.double(e.doubleData[n]);r.ldelim()}if(e.uint64Data!=null&&e.uint64Data.length){r.uint32(90).fork();for(var n=0;n<e.uint64Data.length;++n)r.uint64(e.uint64Data[n]);r.ldelim()}if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(98).string(e.docString),e.externalData!=null&&e.externalData.length)for(var n=0;n<e.externalData.length;++n)g.onnx.StringStringEntryProto.encode(e.externalData[n],r.uint32(106).fork()).ldelim();return e.dataLocation!=null&&Object.hasOwnProperty.call(e,"dataLocation")&&r.uint32(112).int32(e.dataLocation),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.TensorProto;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{if(s.dims&&s.dims.length||(s.dims=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.dims.push(e.int64());else s.dims.push(e.int64());break}case 2:{s.dataType=e.int32();break}case 3:{s.segment=g.onnx.TensorProto.Segment.decode(e,e.uint32());break}case 4:{if(s.floatData&&s.floatData.length||(s.floatData=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.floatData.push(e.float());else s.floatData.push(e.float());break}case 5:{if(s.int32Data&&s.int32Data.length||(s.int32Data=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.int32Data.push(e.int32());else s.int32Data.push(e.int32());break}case 6:{s.stringData&&s.stringData.length||(s.stringData=[]),s.stringData.push(e.bytes());break}case 7:{if(s.int64Data&&s.int64Data.length||(s.int64Data=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.int64Data.push(e.int64());else s.int64Data.push(e.int64());break}case 8:{s.name=e.string();break}case 12:{s.docString=e.string();break}case 9:{s.rawData=e.bytes();break}case 13:{s.externalData&&s.externalData.length||(s.externalData=[]),s.externalData.push(g.onnx.StringStringEntryProto.decode(e,e.uint32()));break}case 14:{s.dataLocation=e.int32();break}case 10:{if(s.doubleData&&s.doubleData.length||(s.doubleData=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.doubleData.push(e.double());else s.doubleData.push(e.double());break}case 11:{if(s.uint64Data&&s.uint64Data.length||(s.uint64Data=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.uint64Data.push(e.uint64());else s.uint64Data.push(e.uint64());break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.dims!=null&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var r=0;r<e.dims.length;++r)if(!x.isInteger(e.dims[r])&&!(e.dims[r]&&x.isInteger(e.dims[r].low)&&x.isInteger(e.dims[r].high)))return"dims: integer|Long[] expected"}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&!x.isInteger(e.dataType))return"dataType: integer expected";if(e.segment!=null&&e.hasOwnProperty("segment")){var n=g.onnx.TensorProto.Segment.verify(e.segment);if(n)return"segment."+n}if(e.floatData!=null&&e.hasOwnProperty("floatData")){if(!Array.isArray(e.floatData))return"floatData: array expected";for(var r=0;r<e.floatData.length;++r)if(typeof e.floatData[r]!="number")return"floatData: number[] expected"}if(e.int32Data!=null&&e.hasOwnProperty("int32Data")){if(!Array.isArray(e.int32Data))return"int32Data: array expected";for(var r=0;r<e.int32Data.length;++r)if(!x.isInteger(e.int32Data[r]))return"int32Data: integer[] expected"}if(e.stringData!=null&&e.hasOwnProperty("stringData")){if(!Array.isArray(e.stringData))return"stringData: array expected";for(var r=0;r<e.stringData.length;++r)if(!(e.stringData[r]&&typeof e.stringData[r].length=="number"||x.isString(e.stringData[r])))return"stringData: buffer[] expected"}if(e.int64Data!=null&&e.hasOwnProperty("int64Data")){if(!Array.isArray(e.int64Data))return"int64Data: array expected";for(var r=0;r<e.int64Data.length;++r)if(!x.isInteger(e.int64Data[r])&&!(e.int64Data[r]&&x.isInteger(e.int64Data[r].low)&&x.isInteger(e.int64Data[r].high)))return"int64Data: integer|Long[] expected"}if(e.name!=null&&e.hasOwnProperty("name")&&!x.isString(e.name))return"name: string expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString))return"docString: string expected";if(e.rawData!=null&&e.hasOwnProperty("rawData")&&!(e.rawData&&typeof e.rawData.length=="number"||x.isString(e.rawData)))return"rawData: buffer expected";if(e.externalData!=null&&e.hasOwnProperty("externalData")){if(!Array.isArray(e.externalData))return"externalData: array expected";for(var r=0;r<e.externalData.length;++r){var n=g.onnx.StringStringEntryProto.verify(e.externalData[r]);if(n)return"externalData."+n}}if(e.dataLocation!=null&&e.hasOwnProperty("dataLocation"))switch(e.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(e.doubleData!=null&&e.hasOwnProperty("doubleData")){if(!Array.isArray(e.doubleData))return"doubleData: array expected";for(var r=0;r<e.doubleData.length;++r)if(typeof e.doubleData[r]!="number")return"doubleData: number[] expected"}if(e.uint64Data!=null&&e.hasOwnProperty("uint64Data")){if(!Array.isArray(e.uint64Data))return"uint64Data: array expected";for(var r=0;r<e.uint64Data.length;++r)if(!x.isInteger(e.uint64Data[r])&&!(e.uint64Data[r]&&x.isInteger(e.uint64Data[r].low)&&x.isInteger(e.uint64Data[r].high)))return"uint64Data: integer|Long[] expected"}return null},t.fromObject=function(e){if(e instanceof g.onnx.TensorProto)return e;var r=new g.onnx.TensorProto;if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.TensorProto.dims: array expected");r.dims=[];for(var n=0;n<e.dims.length;++n)x.Long?(r.dims[n]=x.Long.fromValue(e.dims[n])).unsigned=!1:typeof e.dims[n]=="string"?r.dims[n]=parseInt(e.dims[n],10):typeof e.dims[n]=="number"?r.dims[n]=e.dims[n]:typeof e.dims[n]=="object"&&(r.dims[n]=new x.LongBits(e.dims[n].low>>>0,e.dims[n].high>>>0).toNumber())}if(e.dataType!=null&&(r.dataType=e.dataType|0),e.segment!=null){if(typeof e.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");r.segment=g.onnx.TensorProto.Segment.fromObject(e.segment)}if(e.floatData){if(!Array.isArray(e.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");r.floatData=[];for(var n=0;n<e.floatData.length;++n)r.floatData[n]=Number(e.floatData[n])}if(e.int32Data){if(!Array.isArray(e.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");r.int32Data=[];for(var n=0;n<e.int32Data.length;++n)r.int32Data[n]=e.int32Data[n]|0}if(e.stringData){if(!Array.isArray(e.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");r.stringData=[];for(var n=0;n<e.stringData.length;++n)typeof e.stringData[n]=="string"?x.base64.decode(e.stringData[n],r.stringData[n]=x.newBuffer(x.base64.length(e.stringData[n])),0):e.stringData[n].length>=0&&(r.stringData[n]=e.stringData[n])}if(e.int64Data){if(!Array.isArray(e.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");r.int64Data=[];for(var n=0;n<e.int64Data.length;++n)x.Long?(r.int64Data[n]=x.Long.fromValue(e.int64Data[n])).unsigned=!1:typeof e.int64Data[n]=="string"?r.int64Data[n]=parseInt(e.int64Data[n],10):typeof e.int64Data[n]=="number"?r.int64Data[n]=e.int64Data[n]:typeof e.int64Data[n]=="object"&&(r.int64Data[n]=new x.LongBits(e.int64Data[n].low>>>0,e.int64Data[n].high>>>0).toNumber())}if(e.name!=null&&(r.name=String(e.name)),e.docString!=null&&(r.docString=String(e.docString)),e.rawData!=null&&(typeof e.rawData=="string"?x.base64.decode(e.rawData,r.rawData=x.newBuffer(x.base64.length(e.rawData)),0):e.rawData.length>=0&&(r.rawData=e.rawData)),e.externalData){if(!Array.isArray(e.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");r.externalData=[];for(var n=0;n<e.externalData.length;++n){if(typeof e.externalData[n]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");r.externalData[n]=g.onnx.StringStringEntryProto.fromObject(e.externalData[n])}}switch(e.dataLocation){default:if(typeof e.dataLocation=="number"){r.dataLocation=e.dataLocation;break}break;case"DEFAULT":case 0:r.dataLocation=0;break;case"EXTERNAL":case 1:r.dataLocation=1;break}if(e.doubleData){if(!Array.isArray(e.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");r.doubleData=[];for(var n=0;n<e.doubleData.length;++n)r.doubleData[n]=Number(e.doubleData[n])}if(e.uint64Data){if(!Array.isArray(e.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");r.uint64Data=[];for(var n=0;n<e.uint64Data.length;++n)x.Long?(r.uint64Data[n]=x.Long.fromValue(e.uint64Data[n])).unsigned=!0:typeof e.uint64Data[n]=="string"?r.uint64Data[n]=parseInt(e.uint64Data[n],10):typeof e.uint64Data[n]=="number"?r.uint64Data[n]=e.uint64Data[n]:typeof e.uint64Data[n]=="object"&&(r.uint64Data[n]=new x.LongBits(e.uint64Data[n].low>>>0,e.uint64Data[n].high>>>0).toNumber(!0))}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.dims=[],n.floatData=[],n.int32Data=[],n.stringData=[],n.int64Data=[],n.doubleData=[],n.uint64Data=[],n.externalData=[]),r.defaults&&(n.dataType=0,n.segment=null,n.name="",r.bytes===String?n.rawData="":(n.rawData=[],r.bytes!==Array&&(n.rawData=x.newBuffer(n.rawData))),n.docString="",n.dataLocation=r.enums===String?"DEFAULT":0),e.dims&&e.dims.length){n.dims=[];for(var s=0;s<e.dims.length;++s)typeof e.dims[s]=="number"?n.dims[s]=r.longs===String?String(e.dims[s]):e.dims[s]:n.dims[s]=r.longs===String?x.Long.prototype.toString.call(e.dims[s]):r.longs===Number?new x.LongBits(e.dims[s].low>>>0,e.dims[s].high>>>0).toNumber():e.dims[s]}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&(n.dataType=e.dataType),e.segment!=null&&e.hasOwnProperty("segment")&&(n.segment=g.onnx.TensorProto.Segment.toObject(e.segment,r)),e.floatData&&e.floatData.length){n.floatData=[];for(var s=0;s<e.floatData.length;++s)n.floatData[s]=r.json&&!isFinite(e.floatData[s])?String(e.floatData[s]):e.floatData[s]}if(e.int32Data&&e.int32Data.length){n.int32Data=[];for(var s=0;s<e.int32Data.length;++s)n.int32Data[s]=e.int32Data[s]}if(e.stringData&&e.stringData.length){n.stringData=[];for(var s=0;s<e.stringData.length;++s)n.stringData[s]=r.bytes===String?x.base64.encode(e.stringData[s],0,e.stringData[s].length):r.bytes===Array?Array.prototype.slice.call(e.stringData[s]):e.stringData[s]}if(e.int64Data&&e.int64Data.length){n.int64Data=[];for(var s=0;s<e.int64Data.length;++s)typeof e.int64Data[s]=="number"?n.int64Data[s]=r.longs===String?String(e.int64Data[s]):e.int64Data[s]:n.int64Data[s]=r.longs===String?x.Long.prototype.toString.call(e.int64Data[s]):r.longs===Number?new x.LongBits(e.int64Data[s].low>>>0,e.int64Data[s].high>>>0).toNumber():e.int64Data[s]}if(e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.rawData!=null&&e.hasOwnProperty("rawData")&&(n.rawData=r.bytes===String?x.base64.encode(e.rawData,0,e.rawData.length):r.bytes===Array?Array.prototype.slice.call(e.rawData):e.rawData),e.doubleData&&e.doubleData.length){n.doubleData=[];for(var s=0;s<e.doubleData.length;++s)n.doubleData[s]=r.json&&!isFinite(e.doubleData[s])?String(e.doubleData[s]):e.doubleData[s]}if(e.uint64Data&&e.uint64Data.length){n.uint64Data=[];for(var s=0;s<e.uint64Data.length;++s)typeof e.uint64Data[s]=="number"?n.uint64Data[s]=r.longs===String?String(e.uint64Data[s]):e.uint64Data[s]:n.uint64Data[s]=r.longs===String?x.Long.prototype.toString.call(e.uint64Data[s]):r.longs===Number?new x.LongBits(e.uint64Data[s].low>>>0,e.uint64Data[s].high>>>0).toNumber(!0):e.uint64Data[s]}if(e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.externalData&&e.externalData.length){n.externalData=[];for(var s=0;s<e.externalData.length;++s)n.externalData[s]=g.onnx.StringStringEntryProto.toObject(e.externalData[s],r)}return e.dataLocation!=null&&e.hasOwnProperty("dataLocation")&&(n.dataLocation=r.enums===String?g.onnx.TensorProto.DataLocation[e.dataLocation]===void 0?e.dataLocation:g.onnx.TensorProto.DataLocation[e.dataLocation]:e.dataLocation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TensorProto"},t.DataType=function(){var o={},e=Object.create(o);return e[o[0]="UNDEFINED"]=0,e[o[1]="FLOAT"]=1,e[o[2]="UINT8"]=2,e[o[3]="INT8"]=3,e[o[4]="UINT16"]=4,e[o[5]="INT16"]=5,e[o[6]="INT32"]=6,e[o[7]="INT64"]=7,e[o[8]="STRING"]=8,e[o[9]="BOOL"]=9,e[o[10]="FLOAT16"]=10,e[o[11]="DOUBLE"]=11,e[o[12]="UINT32"]=12,e[o[13]="UINT64"]=13,e[o[14]="COMPLEX64"]=14,e[o[15]="COMPLEX128"]=15,e[o[16]="BFLOAT16"]=16,e[o[17]="FLOAT8E4M3FN"]=17,e[o[18]="FLOAT8E4M3FNUZ"]=18,e[o[19]="FLOAT8E5M2"]=19,e[o[20]="FLOAT8E5M2FNUZ"]=20,e}(),t.Segment=function(){function o(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return o.prototype.begin=x.Long?x.Long.fromBits(0,0,!1):0,o.prototype.end=x.Long?x.Long.fromBits(0,0,!1):0,o.create=function(r){return new o(r)},o.encode=function(r,n){return n||(n=Le.create()),r.begin!=null&&Object.hasOwnProperty.call(r,"begin")&&n.uint32(8).int64(r.begin),r.end!=null&&Object.hasOwnProperty.call(r,"end")&&n.uint32(16).int64(r.end),n},o.encodeDelimited=function(r,n){return this.encode(r,n).ldelim()},o.decode=function(r,n){r instanceof G||(r=G.create(r));for(var s=n===void 0?r.len:r.pos+n,i=new g.onnx.TensorProto.Segment;r.pos<s;){var u=r.uint32();switch(u>>>3){case 1:{i.begin=r.int64();break}case 2:{i.end=r.int64();break}default:r.skipType(u&7);break}}return i},o.decodeDelimited=function(r){return r instanceof G||(r=new G(r)),this.decode(r,r.uint32())},o.verify=function(r){return typeof r!="object"||r===null?"object expected":r.begin!=null&&r.hasOwnProperty("begin")&&!x.isInteger(r.begin)&&!(r.begin&&x.isInteger(r.begin.low)&&x.isInteger(r.begin.high))?"begin: integer|Long expected":r.end!=null&&r.hasOwnProperty("end")&&!x.isInteger(r.end)&&!(r.end&&x.isInteger(r.end.low)&&x.isInteger(r.end.high))?"end: integer|Long expected":null},o.fromObject=function(r){if(r instanceof g.onnx.TensorProto.Segment)return r;var n=new g.onnx.TensorProto.Segment;return r.begin!=null&&(x.Long?(n.begin=x.Long.fromValue(r.begin)).unsigned=!1:typeof r.begin=="string"?n.begin=parseInt(r.begin,10):typeof r.begin=="number"?n.begin=r.begin:typeof r.begin=="object"&&(n.begin=new x.LongBits(r.begin.low>>>0,r.begin.high>>>0).toNumber())),r.end!=null&&(x.Long?(n.end=x.Long.fromValue(r.end)).unsigned=!1:typeof r.end=="string"?n.end=parseInt(r.end,10):typeof r.end=="number"?n.end=r.end:typeof r.end=="object"&&(n.end=new x.LongBits(r.end.low>>>0,r.end.high>>>0).toNumber())),n},o.toObject=function(r,n){n||(n={});var s={};if(n.defaults){if(x.Long){var i=new x.Long(0,0,!1);s.begin=n.longs===String?i.toString():n.longs===Number?i.toNumber():i}else s.begin=n.longs===String?"0":0;if(x.Long){var i=new x.Long(0,0,!1);s.end=n.longs===String?i.toString():n.longs===Number?i.toNumber():i}else s.end=n.longs===String?"0":0}return r.begin!=null&&r.hasOwnProperty("begin")&&(typeof r.begin=="number"?s.begin=n.longs===String?String(r.begin):r.begin:s.begin=n.longs===String?x.Long.prototype.toString.call(r.begin):n.longs===Number?new x.LongBits(r.begin.low>>>0,r.begin.high>>>0).toNumber():r.begin),r.end!=null&&r.hasOwnProperty("end")&&(typeof r.end=="number"?s.end=n.longs===String?String(r.end):r.end:s.end=n.longs===String?x.Long.prototype.toString.call(r.end):n.longs===Number?new x.LongBits(r.end.low>>>0,r.end.high>>>0).toNumber():r.end),s},o.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},o.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TensorProto.Segment"},o}(),t.DataLocation=function(){var o={},e=Object.create(o);return e[o[0]="DEFAULT"]=0,e[o[1]="EXTERNAL"]=1,e}(),t}(),a.SparseTensorProto=function(){function t(o){if(this.dims=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.values=null,t.prototype.indices=null,t.prototype.dims=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Le.create()),e.values!=null&&Object.hasOwnProperty.call(e,"values")&&g.onnx.TensorProto.encode(e.values,r.uint32(10).fork()).ldelim(),e.indices!=null&&Object.hasOwnProperty.call(e,"indices")&&g.onnx.TensorProto.encode(e.indices,r.uint32(18).fork()).ldelim(),e.dims!=null&&e.dims.length){r.uint32(26).fork();for(var n=0;n<e.dims.length;++n)r.int64(e.dims[n]);r.ldelim()}return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.SparseTensorProto;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{s.values=g.onnx.TensorProto.decode(e,e.uint32());break}case 2:{s.indices=g.onnx.TensorProto.decode(e,e.uint32());break}case 3:{if(s.dims&&s.dims.length||(s.dims=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.dims.push(e.int64());else s.dims.push(e.int64());break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.values!=null&&e.hasOwnProperty("values")){var r=g.onnx.TensorProto.verify(e.values);if(r)return"values."+r}if(e.indices!=null&&e.hasOwnProperty("indices")){var r=g.onnx.TensorProto.verify(e.indices);if(r)return"indices."+r}if(e.dims!=null&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var n=0;n<e.dims.length;++n)if(!x.isInteger(e.dims[n])&&!(e.dims[n]&&x.isInteger(e.dims[n].low)&&x.isInteger(e.dims[n].high)))return"dims: integer|Long[] expected"}return null},t.fromObject=function(e){if(e instanceof g.onnx.SparseTensorProto)return e;var r=new g.onnx.SparseTensorProto;if(e.values!=null){if(typeof e.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");r.values=g.onnx.TensorProto.fromObject(e.values)}if(e.indices!=null){if(typeof e.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");r.indices=g.onnx.TensorProto.fromObject(e.indices)}if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");r.dims=[];for(var n=0;n<e.dims.length;++n)x.Long?(r.dims[n]=x.Long.fromValue(e.dims[n])).unsigned=!1:typeof e.dims[n]=="string"?r.dims[n]=parseInt(e.dims[n],10):typeof e.dims[n]=="number"?r.dims[n]=e.dims[n]:typeof e.dims[n]=="object"&&(r.dims[n]=new x.LongBits(e.dims[n].low>>>0,e.dims[n].high>>>0).toNumber())}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.dims=[]),r.defaults&&(n.values=null,n.indices=null),e.values!=null&&e.hasOwnProperty("values")&&(n.values=g.onnx.TensorProto.toObject(e.values,r)),e.indices!=null&&e.hasOwnProperty("indices")&&(n.indices=g.onnx.TensorProto.toObject(e.indices,r)),e.dims&&e.dims.length){n.dims=[];for(var s=0;s<e.dims.length;++s)typeof e.dims[s]=="number"?n.dims[s]=r.longs===String?String(e.dims[s]):e.dims[s]:n.dims[s]=r.longs===String?x.Long.prototype.toString.call(e.dims[s]):r.longs===Number?new x.LongBits(e.dims[s].low>>>0,e.dims[s].high>>>0).toNumber():e.dims[s]}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.SparseTensorProto"},t}(),a.TensorShapeProto=function(){function t(o){if(this.dim=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.dim=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Le.create()),e.dim!=null&&e.dim.length)for(var n=0;n<e.dim.length;++n)g.onnx.TensorShapeProto.Dimension.encode(e.dim[n],r.uint32(10).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.TensorShapeProto;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{s.dim&&s.dim.length||(s.dim=[]),s.dim.push(g.onnx.TensorShapeProto.Dimension.decode(e,e.uint32()));break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.dim!=null&&e.hasOwnProperty("dim")){if(!Array.isArray(e.dim))return"dim: array expected";for(var r=0;r<e.dim.length;++r){var n=g.onnx.TensorShapeProto.Dimension.verify(e.dim[r]);if(n)return"dim."+n}}return null},t.fromObject=function(e){if(e instanceof g.onnx.TensorShapeProto)return e;var r=new g.onnx.TensorShapeProto;if(e.dim){if(!Array.isArray(e.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");r.dim=[];for(var n=0;n<e.dim.length;++n){if(typeof e.dim[n]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");r.dim[n]=g.onnx.TensorShapeProto.Dimension.fromObject(e.dim[n])}}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.dim=[]),e.dim&&e.dim.length){n.dim=[];for(var s=0;s<e.dim.length;++s)n.dim[s]=g.onnx.TensorShapeProto.Dimension.toObject(e.dim[s],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TensorShapeProto"},t.Dimension=function(){function o(r){if(r)for(var n=Object.keys(r),s=0;s<n.length;++s)r[n[s]]!=null&&(this[n[s]]=r[n[s]])}o.prototype.dimValue=null,o.prototype.dimParam=null,o.prototype.denotation="";var e;return Object.defineProperty(o.prototype,"value",{get:x.oneOfGetter(e=["dimValue","dimParam"]),set:x.oneOfSetter(e)}),o.create=function(n){return new o(n)},o.encode=function(n,s){return s||(s=Le.create()),n.dimValue!=null&&Object.hasOwnProperty.call(n,"dimValue")&&s.uint32(8).int64(n.dimValue),n.dimParam!=null&&Object.hasOwnProperty.call(n,"dimParam")&&s.uint32(18).string(n.dimParam),n.denotation!=null&&Object.hasOwnProperty.call(n,"denotation")&&s.uint32(26).string(n.denotation),s},o.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},o.decode=function(n,s){n instanceof G||(n=G.create(n));for(var i=s===void 0?n.len:n.pos+s,u=new g.onnx.TensorShapeProto.Dimension;n.pos<i;){var l=n.uint32();switch(l>>>3){case 1:{u.dimValue=n.int64();break}case 2:{u.dimParam=n.string();break}case 3:{u.denotation=n.string();break}default:n.skipType(l&7);break}}return u},o.decodeDelimited=function(n){return n instanceof G||(n=new G(n)),this.decode(n,n.uint32())},o.verify=function(n){if(typeof n!="object"||n===null)return"object expected";var s={};if(n.dimValue!=null&&n.hasOwnProperty("dimValue")&&(s.value=1,!x.isInteger(n.dimValue)&&!(n.dimValue&&x.isInteger(n.dimValue.low)&&x.isInteger(n.dimValue.high))))return"dimValue: integer|Long expected";if(n.dimParam!=null&&n.hasOwnProperty("dimParam")){if(s.value===1)return"value: multiple values";if(s.value=1,!x.isString(n.dimParam))return"dimParam: string expected"}return n.denotation!=null&&n.hasOwnProperty("denotation")&&!x.isString(n.denotation)?"denotation: string expected":null},o.fromObject=function(n){if(n instanceof g.onnx.TensorShapeProto.Dimension)return n;var s=new g.onnx.TensorShapeProto.Dimension;return n.dimValue!=null&&(x.Long?(s.dimValue=x.Long.fromValue(n.dimValue)).unsigned=!1:typeof n.dimValue=="string"?s.dimValue=parseInt(n.dimValue,10):typeof n.dimValue=="number"?s.dimValue=n.dimValue:typeof n.dimValue=="object"&&(s.dimValue=new x.LongBits(n.dimValue.low>>>0,n.dimValue.high>>>0).toNumber())),n.dimParam!=null&&(s.dimParam=String(n.dimParam)),n.denotation!=null&&(s.denotation=String(n.denotation)),s},o.toObject=function(n,s){s||(s={});var i={};return s.defaults&&(i.denotation=""),n.dimValue!=null&&n.hasOwnProperty("dimValue")&&(typeof n.dimValue=="number"?i.dimValue=s.longs===String?String(n.dimValue):n.dimValue:i.dimValue=s.longs===String?x.Long.prototype.toString.call(n.dimValue):s.longs===Number?new x.LongBits(n.dimValue.low>>>0,n.dimValue.high>>>0).toNumber():n.dimValue,s.oneofs&&(i.value="dimValue")),n.dimParam!=null&&n.hasOwnProperty("dimParam")&&(i.dimParam=n.dimParam,s.oneofs&&(i.value="dimParam")),n.denotation!=null&&n.hasOwnProperty("denotation")&&(i.denotation=n.denotation),i},o.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},o.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/onnx.TensorShapeProto.Dimension"},o}(),t}(),a.TypeProto=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}t.prototype.tensorType=null,t.prototype.sequenceType=null,t.prototype.mapType=null,t.prototype.optionalType=null,t.prototype.sparseTensorType=null,t.prototype.denotation="";var o;return Object.defineProperty(t.prototype,"value",{get:x.oneOfGetter(o=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:x.oneOfSetter(o)}),t.create=function(r){return new t(r)},t.encode=function(r,n){return n||(n=Le.create()),r.tensorType!=null&&Object.hasOwnProperty.call(r,"tensorType")&&g.onnx.TypeProto.Tensor.encode(r.tensorType,n.uint32(10).fork()).ldelim(),r.sequenceType!=null&&Object.hasOwnProperty.call(r,"sequenceType")&&g.onnx.TypeProto.Sequence.encode(r.sequenceType,n.uint32(34).fork()).ldelim(),r.mapType!=null&&Object.hasOwnProperty.call(r,"mapType")&&g.onnx.TypeProto.Map.encode(r.mapType,n.uint32(42).fork()).ldelim(),r.denotation!=null&&Object.hasOwnProperty.call(r,"denotation")&&n.uint32(50).string(r.denotation),r.sparseTensorType!=null&&Object.hasOwnProperty.call(r,"sparseTensorType")&&g.onnx.TypeProto.SparseTensor.encode(r.sparseTensorType,n.uint32(66).fork()).ldelim(),r.optionalType!=null&&Object.hasOwnProperty.call(r,"optionalType")&&g.onnx.TypeProto.Optional.encode(r.optionalType,n.uint32(74).fork()).ldelim(),n},t.encodeDelimited=function(r,n){return this.encode(r,n).ldelim()},t.decode=function(r,n){r instanceof G||(r=G.create(r));for(var s=n===void 0?r.len:r.pos+n,i=new g.onnx.TypeProto;r.pos<s;){var u=r.uint32();switch(u>>>3){case 1:{i.tensorType=g.onnx.TypeProto.Tensor.decode(r,r.uint32());break}case 4:{i.sequenceType=g.onnx.TypeProto.Sequence.decode(r,r.uint32());break}case 5:{i.mapType=g.onnx.TypeProto.Map.decode(r,r.uint32());break}case 9:{i.optionalType=g.onnx.TypeProto.Optional.decode(r,r.uint32());break}case 8:{i.sparseTensorType=g.onnx.TypeProto.SparseTensor.decode(r,r.uint32());break}case 6:{i.denotation=r.string();break}default:r.skipType(u&7);break}}return i},t.decodeDelimited=function(r){return r instanceof G||(r=new G(r)),this.decode(r,r.uint32())},t.verify=function(r){if(typeof r!="object"||r===null)return"object expected";var n={};if(r.tensorType!=null&&r.hasOwnProperty("tensorType")){n.value=1;{var s=g.onnx.TypeProto.Tensor.verify(r.tensorType);if(s)return"tensorType."+s}}if(r.sequenceType!=null&&r.hasOwnProperty("sequenceType")){if(n.value===1)return"value: multiple values";n.value=1;{var s=g.onnx.TypeProto.Sequence.verify(r.sequenceType);if(s)return"sequenceType."+s}}if(r.mapType!=null&&r.hasOwnProperty("mapType")){if(n.value===1)return"value: multiple values";n.value=1;{var s=g.onnx.TypeProto.Map.verify(r.mapType);if(s)return"mapType."+s}}if(r.optionalType!=null&&r.hasOwnProperty("optionalType")){if(n.value===1)return"value: multiple values";n.value=1;{var s=g.onnx.TypeProto.Optional.verify(r.optionalType);if(s)return"optionalType."+s}}if(r.sparseTensorType!=null&&r.hasOwnProperty("sparseTensorType")){if(n.value===1)return"value: multiple values";n.value=1;{var s=g.onnx.TypeProto.SparseTensor.verify(r.sparseTensorType);if(s)return"sparseTensorType."+s}}return r.denotation!=null&&r.hasOwnProperty("denotation")&&!x.isString(r.denotation)?"denotation: string expected":null},t.fromObject=function(r){if(r instanceof g.onnx.TypeProto)return r;var n=new g.onnx.TypeProto;if(r.tensorType!=null){if(typeof r.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");n.tensorType=g.onnx.TypeProto.Tensor.fromObject(r.tensorType)}if(r.sequenceType!=null){if(typeof r.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");n.sequenceType=g.onnx.TypeProto.Sequence.fromObject(r.sequenceType)}if(r.mapType!=null){if(typeof r.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");n.mapType=g.onnx.TypeProto.Map.fromObject(r.mapType)}if(r.optionalType!=null){if(typeof r.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");n.optionalType=g.onnx.TypeProto.Optional.fromObject(r.optionalType)}if(r.sparseTensorType!=null){if(typeof r.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");n.sparseTensorType=g.onnx.TypeProto.SparseTensor.fromObject(r.sparseTensorType)}return r.denotation!=null&&(n.denotation=String(r.denotation)),n},t.toObject=function(r,n){n||(n={});var s={};return n.defaults&&(s.denotation=""),r.tensorType!=null&&r.hasOwnProperty("tensorType")&&(s.tensorType=g.onnx.TypeProto.Tensor.toObject(r.tensorType,n),n.oneofs&&(s.value="tensorType")),r.sequenceType!=null&&r.hasOwnProperty("sequenceType")&&(s.sequenceType=g.onnx.TypeProto.Sequence.toObject(r.sequenceType,n),n.oneofs&&(s.value="sequenceType")),r.mapType!=null&&r.hasOwnProperty("mapType")&&(s.mapType=g.onnx.TypeProto.Map.toObject(r.mapType,n),n.oneofs&&(s.value="mapType")),r.denotation!=null&&r.hasOwnProperty("denotation")&&(s.denotation=r.denotation),r.sparseTensorType!=null&&r.hasOwnProperty("sparseTensorType")&&(s.sparseTensorType=g.onnx.TypeProto.SparseTensor.toObject(r.sparseTensorType,n),n.oneofs&&(s.value="sparseTensorType")),r.optionalType!=null&&r.hasOwnProperty("optionalType")&&(s.optionalType=g.onnx.TypeProto.Optional.toObject(r.optionalType,n),n.oneofs&&(s.value="optionalType")),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TypeProto"},t.Tensor=function(){function e(r){if(r)for(var n=Object.keys(r),s=0;s<n.length;++s)r[n[s]]!=null&&(this[n[s]]=r[n[s]])}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=Le.create()),n.elemType!=null&&Object.hasOwnProperty.call(n,"elemType")&&s.uint32(8).int32(n.elemType),n.shape!=null&&Object.hasOwnProperty.call(n,"shape")&&g.onnx.TensorShapeProto.encode(n.shape,s.uint32(18).fork()).ldelim(),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof G||(n=G.create(n));for(var i=s===void 0?n.len:n.pos+s,u=new g.onnx.TypeProto.Tensor;n.pos<i;){var l=n.uint32();switch(l>>>3){case 1:{u.elemType=n.int32();break}case 2:{u.shape=g.onnx.TensorShapeProto.decode(n,n.uint32());break}default:n.skipType(l&7);break}}return u},e.decodeDelimited=function(n){return n instanceof G||(n=new G(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.elemType!=null&&n.hasOwnProperty("elemType")&&!x.isInteger(n.elemType))return"elemType: integer expected";if(n.shape!=null&&n.hasOwnProperty("shape")){var s=g.onnx.TensorShapeProto.verify(n.shape);if(s)return"shape."+s}return null},e.fromObject=function(n){if(n instanceof g.onnx.TypeProto.Tensor)return n;var s=new g.onnx.TypeProto.Tensor;if(n.elemType!=null&&(s.elemType=n.elemType|0),n.shape!=null){if(typeof n.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");s.shape=g.onnx.TensorShapeProto.fromObject(n.shape)}return s},e.toObject=function(n,s){s||(s={});var i={};return s.defaults&&(i.elemType=0,i.shape=null),n.elemType!=null&&n.hasOwnProperty("elemType")&&(i.elemType=n.elemType),n.shape!=null&&n.hasOwnProperty("shape")&&(i.shape=g.onnx.TensorShapeProto.toObject(n.shape,s)),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/onnx.TypeProto.Tensor"},e}(),t.Sequence=function(){function e(r){if(r)for(var n=Object.keys(r),s=0;s<n.length;++s)r[n[s]]!=null&&(this[n[s]]=r[n[s]])}return e.prototype.elemType=null,e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=Le.create()),n.elemType!=null&&Object.hasOwnProperty.call(n,"elemType")&&g.onnx.TypeProto.encode(n.elemType,s.uint32(10).fork()).ldelim(),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof G||(n=G.create(n));for(var i=s===void 0?n.len:n.pos+s,u=new g.onnx.TypeProto.Sequence;n.pos<i;){var l=n.uint32();switch(l>>>3){case 1:{u.elemType=g.onnx.TypeProto.decode(n,n.uint32());break}default:n.skipType(l&7);break}}return u},e.decodeDelimited=function(n){return n instanceof G||(n=new G(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.elemType!=null&&n.hasOwnProperty("elemType")){var s=g.onnx.TypeProto.verify(n.elemType);if(s)return"elemType."+s}return null},e.fromObject=function(n){if(n instanceof g.onnx.TypeProto.Sequence)return n;var s=new g.onnx.TypeProto.Sequence;if(n.elemType!=null){if(typeof n.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");s.elemType=g.onnx.TypeProto.fromObject(n.elemType)}return s},e.toObject=function(n,s){s||(s={});var i={};return s.defaults&&(i.elemType=null),n.elemType!=null&&n.hasOwnProperty("elemType")&&(i.elemType=g.onnx.TypeProto.toObject(n.elemType,s)),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/onnx.TypeProto.Sequence"},e}(),t.Map=function(){function e(r){if(r)for(var n=Object.keys(r),s=0;s<n.length;++s)r[n[s]]!=null&&(this[n[s]]=r[n[s]])}return e.prototype.keyType=0,e.prototype.valueType=null,e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=Le.create()),n.keyType!=null&&Object.hasOwnProperty.call(n,"keyType")&&s.uint32(8).int32(n.keyType),n.valueType!=null&&Object.hasOwnProperty.call(n,"valueType")&&g.onnx.TypeProto.encode(n.valueType,s.uint32(18).fork()).ldelim(),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof G||(n=G.create(n));for(var i=s===void 0?n.len:n.pos+s,u=new g.onnx.TypeProto.Map;n.pos<i;){var l=n.uint32();switch(l>>>3){case 1:{u.keyType=n.int32();break}case 2:{u.valueType=g.onnx.TypeProto.decode(n,n.uint32());break}default:n.skipType(l&7);break}}return u},e.decodeDelimited=function(n){return n instanceof G||(n=new G(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.keyType!=null&&n.hasOwnProperty("keyType")&&!x.isInteger(n.keyType))return"keyType: integer expected";if(n.valueType!=null&&n.hasOwnProperty("valueType")){var s=g.onnx.TypeProto.verify(n.valueType);if(s)return"valueType."+s}return null},e.fromObject=function(n){if(n instanceof g.onnx.TypeProto.Map)return n;var s=new g.onnx.TypeProto.Map;if(n.keyType!=null&&(s.keyType=n.keyType|0),n.valueType!=null){if(typeof n.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");s.valueType=g.onnx.TypeProto.fromObject(n.valueType)}return s},e.toObject=function(n,s){s||(s={});var i={};return s.defaults&&(i.keyType=0,i.valueType=null),n.keyType!=null&&n.hasOwnProperty("keyType")&&(i.keyType=n.keyType),n.valueType!=null&&n.hasOwnProperty("valueType")&&(i.valueType=g.onnx.TypeProto.toObject(n.valueType,s)),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/onnx.TypeProto.Map"},e}(),t.Optional=function(){function e(r){if(r)for(var n=Object.keys(r),s=0;s<n.length;++s)r[n[s]]!=null&&(this[n[s]]=r[n[s]])}return e.prototype.elemType=null,e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=Le.create()),n.elemType!=null&&Object.hasOwnProperty.call(n,"elemType")&&g.onnx.TypeProto.encode(n.elemType,s.uint32(10).fork()).ldelim(),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof G||(n=G.create(n));for(var i=s===void 0?n.len:n.pos+s,u=new g.onnx.TypeProto.Optional;n.pos<i;){var l=n.uint32();switch(l>>>3){case 1:{u.elemType=g.onnx.TypeProto.decode(n,n.uint32());break}default:n.skipType(l&7);break}}return u},e.decodeDelimited=function(n){return n instanceof G||(n=new G(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.elemType!=null&&n.hasOwnProperty("elemType")){var s=g.onnx.TypeProto.verify(n.elemType);if(s)return"elemType."+s}return null},e.fromObject=function(n){if(n instanceof g.onnx.TypeProto.Optional)return n;var s=new g.onnx.TypeProto.Optional;if(n.elemType!=null){if(typeof n.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");s.elemType=g.onnx.TypeProto.fromObject(n.elemType)}return s},e.toObject=function(n,s){s||(s={});var i={};return s.defaults&&(i.elemType=null),n.elemType!=null&&n.hasOwnProperty("elemType")&&(i.elemType=g.onnx.TypeProto.toObject(n.elemType,s)),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/onnx.TypeProto.Optional"},e}(),t.SparseTensor=function(){function e(r){if(r)for(var n=Object.keys(r),s=0;s<n.length;++s)r[n[s]]!=null&&(this[n[s]]=r[n[s]])}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=Le.create()),n.elemType!=null&&Object.hasOwnProperty.call(n,"elemType")&&s.uint32(8).int32(n.elemType),n.shape!=null&&Object.hasOwnProperty.call(n,"shape")&&g.onnx.TensorShapeProto.encode(n.shape,s.uint32(18).fork()).ldelim(),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof G||(n=G.create(n));for(var i=s===void 0?n.len:n.pos+s,u=new g.onnx.TypeProto.SparseTensor;n.pos<i;){var l=n.uint32();switch(l>>>3){case 1:{u.elemType=n.int32();break}case 2:{u.shape=g.onnx.TensorShapeProto.decode(n,n.uint32());break}default:n.skipType(l&7);break}}return u},e.decodeDelimited=function(n){return n instanceof G||(n=new G(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.elemType!=null&&n.hasOwnProperty("elemType")&&!x.isInteger(n.elemType))return"elemType: integer expected";if(n.shape!=null&&n.hasOwnProperty("shape")){var s=g.onnx.TensorShapeProto.verify(n.shape);if(s)return"shape."+s}return null},e.fromObject=function(n){if(n instanceof g.onnx.TypeProto.SparseTensor)return n;var s=new g.onnx.TypeProto.SparseTensor;if(n.elemType!=null&&(s.elemType=n.elemType|0),n.shape!=null){if(typeof n.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");s.shape=g.onnx.TensorShapeProto.fromObject(n.shape)}return s},e.toObject=function(n,s){s||(s={});var i={};return s.defaults&&(i.elemType=0,i.shape=null),n.elemType!=null&&n.hasOwnProperty("elemType")&&(i.elemType=n.elemType),n.shape!=null&&n.hasOwnProperty("shape")&&(i.shape=g.onnx.TensorShapeProto.toObject(n.shape,s)),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/onnx.TypeProto.SparseTensor"},e}(),t}(),a.OperatorSetIdProto=function(){function t(o){if(o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.domain="",t.prototype.version=x.Long?x.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(e,r){return r||(r=Le.create()),e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&r.uint32(10).string(e.domain),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&r.uint32(16).int64(e.version),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.OperatorSetIdProto;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{s.domain=e.string();break}case 2:{s.version=e.int64();break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":e.domain!=null&&e.hasOwnProperty("domain")&&!x.isString(e.domain)?"domain: string expected":e.version!=null&&e.hasOwnProperty("version")&&!x.isInteger(e.version)&&!(e.version&&x.isInteger(e.version.low)&&x.isInteger(e.version.high))?"version: integer|Long expected":null},t.fromObject=function(e){if(e instanceof g.onnx.OperatorSetIdProto)return e;var r=new g.onnx.OperatorSetIdProto;return e.domain!=null&&(r.domain=String(e.domain)),e.version!=null&&(x.Long?(r.version=x.Long.fromValue(e.version)).unsigned=!1:typeof e.version=="string"?r.version=parseInt(e.version,10):typeof e.version=="number"?r.version=e.version:typeof e.version=="object"&&(r.version=new x.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber())),r},t.toObject=function(e,r){r||(r={});var n={};if(r.defaults)if(n.domain="",x.Long){var s=new x.Long(0,0,!1);n.version=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else n.version=r.longs===String?"0":0;return e.domain!=null&&e.hasOwnProperty("domain")&&(n.domain=e.domain),e.version!=null&&e.hasOwnProperty("version")&&(typeof e.version=="number"?n.version=r.longs===String?String(e.version):e.version:n.version=r.longs===String?x.Long.prototype.toString.call(e.version):r.longs===Number?new x.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber():e.version),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.OperatorSetIdProto"},t}(),a.OperatorStatus=function(){var t={},o=Object.create(t);return o[t[0]="EXPERIMENTAL"]=0,o[t[1]="STABLE"]=1,o}(),a.FunctionProto=function(){function t(o){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.name="",t.prototype.input=x.emptyArray,t.prototype.output=x.emptyArray,t.prototype.attribute=x.emptyArray,t.prototype.attributeProto=x.emptyArray,t.prototype.node=x.emptyArray,t.prototype.docString="",t.prototype.opsetImport=x.emptyArray,t.prototype.domain="",t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Le.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(10).string(e.name),e.input!=null&&e.input.length)for(var n=0;n<e.input.length;++n)r.uint32(34).string(e.input[n]);if(e.output!=null&&e.output.length)for(var n=0;n<e.output.length;++n)r.uint32(42).string(e.output[n]);if(e.attribute!=null&&e.attribute.length)for(var n=0;n<e.attribute.length;++n)r.uint32(50).string(e.attribute[n]);if(e.node!=null&&e.node.length)for(var n=0;n<e.node.length;++n)g.onnx.NodeProto.encode(e.node[n],r.uint32(58).fork()).ldelim();if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(66).string(e.docString),e.opsetImport!=null&&e.opsetImport.length)for(var n=0;n<e.opsetImport.length;++n)g.onnx.OperatorSetIdProto.encode(e.opsetImport[n],r.uint32(74).fork()).ldelim();if(e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&r.uint32(82).string(e.domain),e.attributeProto!=null&&e.attributeProto.length)for(var n=0;n<e.attributeProto.length;++n)g.onnx.AttributeProto.encode(e.attributeProto[n],r.uint32(90).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.FunctionProto;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:{s.name=e.string();break}case 4:{s.input&&s.input.length||(s.input=[]),s.input.push(e.string());break}case 5:{s.output&&s.output.length||(s.output=[]),s.output.push(e.string());break}case 6:{s.attribute&&s.attribute.length||(s.attribute=[]),s.attribute.push(e.string());break}case 11:{s.attributeProto&&s.attributeProto.length||(s.attributeProto=[]),s.attributeProto.push(g.onnx.AttributeProto.decode(e,e.uint32()));break}case 7:{s.node&&s.node.length||(s.node=[]),s.node.push(g.onnx.NodeProto.decode(e,e.uint32()));break}case 8:{s.docString=e.string();break}case 9:{s.opsetImport&&s.opsetImport.length||(s.opsetImport=[]),s.opsetImport.push(g.onnx.OperatorSetIdProto.decode(e,e.uint32()));break}case 10:{s.domain=e.string();break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!x.isString(e.name))return"name: string expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var r=0;r<e.input.length;++r)if(!x.isString(e.input[r]))return"input: string[] expected"}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(var r=0;r<e.output.length;++r)if(!x.isString(e.output[r]))return"output: string[] expected"}if(e.attribute!=null&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(var r=0;r<e.attribute.length;++r)if(!x.isString(e.attribute[r]))return"attribute: string[] expected"}if(e.attributeProto!=null&&e.hasOwnProperty("attributeProto")){if(!Array.isArray(e.attributeProto))return"attributeProto: array expected";for(var r=0;r<e.attributeProto.length;++r){var n=g.onnx.AttributeProto.verify(e.attributeProto[r]);if(n)return"attributeProto."+n}}if(e.node!=null&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var r=0;r<e.node.length;++r){var n=g.onnx.NodeProto.verify(e.node[r]);if(n)return"node."+n}}if(e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString))return"docString: string expected";if(e.opsetImport!=null&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var r=0;r<e.opsetImport.length;++r){var n=g.onnx.OperatorSetIdProto.verify(e.opsetImport[r]);if(n)return"opsetImport."+n}}return e.domain!=null&&e.hasOwnProperty("domain")&&!x.isString(e.domain)?"domain: string expected":null},t.fromObject=function(e){if(e instanceof g.onnx.FunctionProto)return e;var r=new g.onnx.FunctionProto;if(e.name!=null&&(r.name=String(e.name)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.FunctionProto.input: array expected");r.input=[];for(var n=0;n<e.input.length;++n)r.input[n]=String(e.input[n])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.FunctionProto.output: array expected");r.output=[];for(var n=0;n<e.output.length;++n)r.output[n]=String(e.output[n])}if(e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");r.attribute=[];for(var n=0;n<e.attribute.length;++n)r.attribute[n]=String(e.attribute[n])}if(e.attributeProto){if(!Array.isArray(e.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");r.attributeProto=[];for(var n=0;n<e.attributeProto.length;++n){if(typeof e.attributeProto[n]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");r.attributeProto[n]=g.onnx.AttributeProto.fromObject(e.attributeProto[n])}}if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.FunctionProto.node: array expected");r.node=[];for(var n=0;n<e.node.length;++n){if(typeof e.node[n]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");r.node[n]=g.onnx.NodeProto.fromObject(e.node[n])}}if(e.docString!=null&&(r.docString=String(e.docString)),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");r.opsetImport=[];for(var n=0;n<e.opsetImport.length;++n){if(typeof e.opsetImport[n]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");r.opsetImport[n]=g.onnx.OperatorSetIdProto.fromObject(e.opsetImport[n])}}return e.domain!=null&&(r.domain=String(e.domain)),r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.input=[],n.output=[],n.attribute=[],n.node=[],n.opsetImport=[],n.attributeProto=[]),r.defaults&&(n.name="",n.docString="",n.domain=""),e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.input&&e.input.length){n.input=[];for(var s=0;s<e.input.length;++s)n.input[s]=e.input[s]}if(e.output&&e.output.length){n.output=[];for(var s=0;s<e.output.length;++s)n.output[s]=e.output[s]}if(e.attribute&&e.attribute.length){n.attribute=[];for(var s=0;s<e.attribute.length;++s)n.attribute[s]=e.attribute[s]}if(e.node&&e.node.length){n.node=[];for(var s=0;s<e.node.length;++s)n.node[s]=g.onnx.NodeProto.toObject(e.node[s],r)}if(e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.opsetImport&&e.opsetImport.length){n.opsetImport=[];for(var s=0;s<e.opsetImport.length;++s)n.opsetImport[s]=g.onnx.OperatorSetIdProto.toObject(e.opsetImport[s],r)}if(e.domain!=null&&e.hasOwnProperty("domain")&&(n.domain=e.domain),e.attributeProto&&e.attributeProto.length){n.attributeProto=[];for(var s=0;s<e.attributeProto.length;++s)n.attributeProto[s]=g.onnx.AttributeProto.toObject(e.attributeProto[s],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.FunctionProto"},t}(),a}();Bu.exports=g});function Jr(a,t){if(!a)throw new Error(typeof t=="string"?t:t())}function Nn(a){return new TextDecoder().decode(a)}var ve,Or,zi,Qe,Lo,ze,it,W,Bn,Ir,Sr,Ar,de=$(()=>{"use strict";So();Di();ve=jr(Kr());Pr();Or=class{static arraysEqual(t,o){if(t.length!==o.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==o[e])return!1;return!0}},zi=class{static preprocessInputShapes(t,o){let e=t.length===1?[1,t[0]]:t,r=o.length===1?[o[0],1]:o;return[e,r]}static postprocessOutputShape(t,o,e){o===1&&t.splice(t.length-2,1),e===1&&t.pop()}static calcMatMulShape(t,o){return t[1]!==o[0]?void 0:[t[0],o[1]]}},Qe=class a{static calcShape(t,o,e=!1){let r=t.length,n=o.length;if(r===0)return o;if(n===0)return t;let s=Math.max(t.length,o.length),i=new Array(s);if(e){if(r<2||n<2)return;let u=zi.calcMatMulShape([t[r-2],t[r-1]],[o[n-2],o[n-1]]);if(u===void 0)return;[i[s-2],i[s-1]]=u}for(let u=e?3:1;u<=s;u++){let l=r-u<0?1:t[r-u],f=n-u<0?1:o[n-u];if(l!==f&&l>1&&f>1)return;i[s-u]=Math.max(l,f)}return i}static index(t,o){let e=new Array(o.length);return a.fillIndex(t,o,e),e}static fillIndex(t,o,e){let r=t.length-o.length;for(let n=0;n<o.length;n++)e[n]=t[r+n]%o[n]}static calc(t,o,e,r,n){let s=a.calcShape(t.dims,o.dims);if(s){if(r&&!W.areEqual(s,t.dims))return;let i=W.size(s),u=r?t:new ke(s,n||t.type);if(s.length===0)u.set([],e(t.get([]),o.get([])));else{let l=new Array(s.length),f=new Array(t.dims.length),h=new Array(o.dims.length),m=0,v=0,I=!1,_=!1;t.dims.length===0&&(m=t.get([]),I=!0),o.dims.length===0&&(v=o.get([]),_=!0);let A;for(let L=0;L<i;L++){A=L;for(let F=s.length-1;F>=0;F--)l[F]=A%s[F],A=Math.floor(A/s[F]);I||(a.fillIndex(l,t.dims,f),m=t.get(f)),_||(a.fillIndex(l,o.dims,h),v=o.get(h)),u.set(l,e(m,v))}}return u}}static isValidBroadcast(t,o){let e=t.length,r=o.length;if(e>r)return!1;for(let n=1;n<=e;n++)if(t[e-n]!==1&&t[e-n]!==o[r-n])return!1;return!0}static getBroadcastDims(t,o){let e=t.length,r=[];for(let n=0;n<e;n++){let s=e-1-n,i=t[s]||1;(o[o.length-1-n]||1)>1&&i===1&&r.unshift(s)}return r}},Lo=class{static getShapeOfGemmResult(t,o,e,r,n){if(t.length!==2||e.length!==2)throw new Error("shape need to be of size 2");let s,i,u;o?(s=t[1],i=t[0]):(s=t[0],i=t[1]);let l=-1;if(r?(u=e[0],l=1):(u=e[1],l=0),e[l]!==i)throw new Error("dimension mismatch");if(s<=0||u<=0||i<=0)throw new Error("invalid shape specified");if(n&&!Qe.isValidBroadcast(n,[s,u]))throw new Error("gemm: invalid bias shape for broadcast");return[s,u,i]}},ze=class a{static tensorDataTypeFromProto(t){switch(t){case ve.onnx.TensorProto.DataType.INT8:return"int8";case ve.onnx.TensorProto.DataType.UINT8:return"uint8";case ve.onnx.TensorProto.DataType.BOOL:return"bool";case ve.onnx.TensorProto.DataType.INT16:return"int16";case ve.onnx.TensorProto.DataType.UINT16:return"uint16";case ve.onnx.TensorProto.DataType.INT32:return"int32";case ve.onnx.TensorProto.DataType.UINT32:return"uint32";case ve.onnx.TensorProto.DataType.FLOAT:return"float32";case ve.onnx.TensorProto.DataType.DOUBLE:return"float64";case ve.onnx.TensorProto.DataType.STRING:return"string";case ve.onnx.TensorProto.DataType.INT64:return"int32";case ve.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ve.onnx.TensorProto.DataType[t]}`)}}static tensorDataTypeStringToEnum(t){switch(t){case"int8":return ve.onnx.TensorProto.DataType.INT8;case"uint8":return ve.onnx.TensorProto.DataType.UINT8;case"bool":return ve.onnx.TensorProto.DataType.BOOL;case"int16":return ve.onnx.TensorProto.DataType.INT16;case"uint16":return ve.onnx.TensorProto.DataType.UINT16;case"int32":return ve.onnx.TensorProto.DataType.INT32;case"uint32":return ve.onnx.TensorProto.DataType.UINT32;case"float32":return ve.onnx.TensorProto.DataType.FLOAT;case"float64":return ve.onnx.TensorProto.DataType.DOUBLE;case"string":return ve.onnx.TensorProto.DataType.STRING;case"int64":return ve.onnx.TensorProto.DataType.INT64;case"uint64":return ve.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${t}`)}}static tensorDimsFromProto(t){return t.map(o=>Jt.isLong(o)?o.toNumber():o)}static tensorValueTypeFromProto(t){return{tensorType:a.tensorDataTypeFromProto(t.elemType),shape:{dims:a.tensorDimsFromProto(t.shape.dim.map(o=>o.dimValue))}}}static tensorDimsFromORTFormat(t){let o=[];for(let e=0;e<t.dimsLength();e++)o.push(it.longToNumber(t.dims(e)));return o}static tensorAttributesFromORTFormat(t){let o=[];for(let e=0;e<t.attributesLength();e++)o.push(t.attributes(e));return o}},it=class{static longToNumber(t,o){return Jt.isLong(t)?t.toNumber():t instanceof O.Long?Jt.fromValue({low:t.low,high:t.high,unsigned:o??!1}).toNumber():t}static isLong(t){return Jt.isLong(t)||t instanceof O.Long}},W=class a{static size(t){return a.getSizeFromDimensionRange(t,0,t.length)}static sizeFromDimension(t,o){if(o<0||o>t.length)throw new Error(`invalid dimension of ${o} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return a.getSizeFromDimensionRange(t,o,t.length)}static sizeToDimension(t,o){if(o<0||o>t.length)throw new Error(`invalid dimension of ${o} for sizeToDimension as Tensor has ${t.length} dimensions.`);return a.getSizeFromDimensionRange(t,0,o)}static getSizeFromDimensionRange(t,o,e){let r=1;for(let n=o;n<e;n++){if(t[n]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");r*=t[n]}return r}static computeStrides(t){let o=t.length;if(o===0)return[];if(o===1)return[1];let e=new Array(o);e[o-1]=1,e[o-2]=t[o-1];for(let r=o-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}static transpose(t){return t.slice().reverse()}static indicesToOffset(t,o,e){e===void 0&&(e=t.length);let r=0;for(let n=0;n<e;++n)r+=o[n]*t[n];return r}static offsetToIndices(t,o){let e=o.length;if(e===0)return[];if(e===1)return[t*o[0]];let r=new Array(o.length);for(let n=0;n<r.length-1;++n)r[n]=Math.floor(t/o[n]),t-=r[n]*o[n];return r[r.length-1]=t,r}static normalizeAxis(t,o){if(t<-o&&t>=o)throw new Error("unsupported axis for this operation.");return t<0?t+o:t}static normalizeAxes(t,o){return t.map(e=>this.normalizeAxis(e,o))}static incrementIndex(t,o,e){if(o.length===0||t.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(e===void 0)e=o.length;else if(e<=0||e>o.length)throw new Error("Incorrect axis to increment on");for(let r=e-1;r>=0&&(t[r]++,!(t[r]<o[r]));--r)t[r]=0}static calculateReshapedDims(t,o){if(o.length===0){if(t.length===0||a.size(t)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let e=o.length,r=new Array(e),n=-1,s=1;for(let u=0;u<e;u++){if(o[u]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(o[u]===-1){if(n!==-1)throw new Error("at most one dimension in shape hints can be -1");n=u}else{if(o[u]===0){if(u>=t.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");r[u]=t[u]}else r[u]=o[u];s*=r[u]}}let i=a.size(t);if(n!==-1){if(i%s!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${t}] Output shape: [${o}]`);r[n]=i/s}else if(s!==i)throw new Error("reshapedDims and originalDims don't have matching sizes");return r}static sortBasedOnPerm(t,o){return o?o.map(e=>t[e]):t.slice().reverse()}static padShape(t,o){let e=t.length;return t.map((r,n)=>r+o[n]+o[n+e])}static areEqual(t,o){return t.length!==o.length?!1:t.every((e,r)=>e===o[r])}static validateDimsAndCalcSize(t){if(t.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let o=1;for(let e of t){if(!Number.isInteger(e))throw new TypeError(`Invalid shape: ${e} is not an integer`);if(e<0||e>2147483647)throw new TypeError(`Invalid shape: length ${e} is not allowed`);o*=e}return o}static flattenShape(t,o){o<0&&(o+=t.length);let e=t.reduce((s,i)=>s*i,1),r=t.slice(o).reduce((s,i)=>s*i,1);return[e/r,r]}static squeezeShape(t,o){let e=new Array;o=a.normalizeAxes(o,t.length);for(let r=0;r<t.length;r++){let n=o.indexOf(r)>=0;if(n&&t[r]!==1)throw new Error("squeeze an axis of size different than 1");(o.length===0&&t[r]>1||o.length>0&&!n)&&e.push(t[r])}return e}static unsqueezeShape(t,o){let e=new Array(t.length+o.length);e.fill(0);for(let n=0;n<o.length;n++){let s=a.normalizeAxis(o[n],e.length);if(s>=e.length)throw new Error("'axes' has an out of range axis");if(e[s]!==0)throw new Error("'axes' has a duplicate axis");e[s]=1}let r=0;for(let n=0;n<e.length;n++)e[n]===0&&(e[n]=t[r++]);if(r!==t.length)throw new Error("the unsqueezed dimension could not be established");return e}},Bn=class a{static splitShape(t,o,e,r){if(e.length===0){if(!r)throw new Error("need to know number of outputs when the 'split' attribute is not specified");a.determineSplit(t[o],r,e)}let n=[],s=[0];for(let i=0;i<e.length;++i){i!==0&&s.push(s[i-1]+e[i-1]);let u=t.slice();u[o]=e[i],n.push(u)}return[n,s]}static determineSplit(t,o,e){if(t%o!==0)throw new Error("cannot split tensor to equal sized parts");for(let r=0;r<o;++r)e.push(t/o)}},Ir=class a{static adjustPoolAttributes(t,o,e,r,n,s){if(!t&&e.length!==o.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let i=0;i<o.length-2;i++)i>=e.length?e.push(o[i+2]):e[i]=o[i+2];for(let i=0;i<e.length;i++)if(i<r.length){if(r[i]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(let i=0;i<e.length;i++)if(i<n.length){if(n[i]<0)throw new Error("dilations should be greater than or equal to 1")}else n.push(1);for(let i=0;i<e.length*2;i++)if(i<s.length){if(s[i]<0)throw new Error("pad should be greater than or equal to 1")}else s.push(0);for(let i=0;i<e.length;i++){if(e[i]<=0)throw new Error("kernel shapes need to be greater than 0");if(s[i]>=e[i]||s[i+e.length]>=e[i])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,o,e,r,n,s){if(s){if(n.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(o.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let i=0;i<t.length-2;i++)a.adjustPadAndReturnShape(t[i+2],o[i],e[i],r[i],n,i,i+t.length-2,s)}}static computePoolOutputShape(t,o,e,r,n,s,i){if(o.length<=0)throw new Error("input shape must be of size greater than 0");let u=[o[0],o[1]];return a.computeShapeHelper(t,o,u,e,r,n,s,i),u}static computeConvOutputShape(t,o,e,r,n,s,i){if(t.length<=0||o.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let u=[t[0],o[0]];return a.computeShapeHelper(!1,t,u,e,r,n,s,i),u}static computeShapeHelper(t,o,e,r,n,s,i,u){if(t)for(let l=0;l<o.length-2;l++)e.push(1);else for(let l=0;l<o.length-2;l++)e.push(a.adjustPadAndReturnShape(o[l+2],r[l],n[l],s[l],i,l,l+o.length-2,u))}static adjustPadAndReturnShape(t,o,e,r,n,s,i,u){let l=e*(r-1)+1;if(u&&u!=="NOTSET")switch(u){case"VALID":return n[s]=0,n[i]=0,Math.floor((t-l)/o+1);case"SAME_LOWER":case"SAME_UPPER":if(e!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let h=((t+o-1)/o-1)*o+r-t;return n[s]=Math.floor(u==="SAME_LOWER"?(h+1)/2:h/2),n[i]=h-n[s],Math.floor((t+h-r)/o+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+n[s]+n[i]-l)/o+1)}},Sr=-34028234663852886e22,Ar=34028234663852886e22});function Wd(a){switch(a){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${a}`)}}function Nu(a){switch(a){case ie.onnx.TensorProto.DataType.UINT8:case ie.onnx.TensorProto.DataType.INT8:case ie.onnx.TensorProto.DataType.BOOL:return 1;case ie.onnx.TensorProto.DataType.UINT16:case ie.onnx.TensorProto.DataType.INT16:return 2;case ie.onnx.TensorProto.DataType.FLOAT:case ie.onnx.TensorProto.DataType.INT32:case ie.onnx.TensorProto.DataType.UINT32:return 4;case ie.onnx.TensorProto.DataType.INT64:case ie.onnx.TensorProto.DataType.DOUBLE:case ie.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${ie.onnx.TensorProto.DataType[a]}`)}}function zd(a,t){return new(Gu(t))(a)}function Gu(a){switch(a){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function ji(a,t){if(t===ie.onnx.TensorProto.DataType.INT64||t===Hi.TensorDataType.INT64){if(a.greaterThanOrEqual(2147483648)||a.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(t===ie.onnx.TensorProto.DataType.UINT32||t===Hi.TensorDataType.UINT32||t===ie.onnx.TensorProto.DataType.UINT64||t===Hi.TensorDataType.UINT64){if(a.greaterThanOrEqual(4294967296)||a.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${ie.onnx.TensorProto.DataType[t]}`);return a.toNumber()}function Ru(a,t,o){switch(t){case ie.onnx.TensorProto.DataType.BOOL:case ie.onnx.TensorProto.DataType.UINT8:return a.getUint8(o);case ie.onnx.TensorProto.DataType.INT8:return a.getInt8(o);case ie.onnx.TensorProto.DataType.UINT16:return a.getUint16(o,!0);case ie.onnx.TensorProto.DataType.INT16:return a.getInt16(o,!0);case ie.onnx.TensorProto.DataType.FLOAT:return a.getFloat32(o,!0);case ie.onnx.TensorProto.DataType.INT32:return a.getInt32(o,!0);case ie.onnx.TensorProto.DataType.UINT32:return a.getUint32(o,!0);case ie.onnx.TensorProto.DataType.INT64:return ji(Jt.fromBits(a.getUint32(o,!0),a.getUint32(o+4,!0),!1),t);case ie.onnx.TensorProto.DataType.DOUBLE:return a.getFloat64(o,!0);case ie.onnx.TensorProto.DataType.UINT64:return ji(Jt.fromBits(a.getUint32(o,!0),a.getUint32(o+4,!0),!0),t);default:throw new Error(`cannot read from DataView for type ${ie.onnx.TensorProto.DataType[t]}`)}}var Mu,ie,Hi,ke,Pr=$(()=>{"use strict";Mu=jr(Ps());Di();$n();ie=jr(Kr());de();Hi=q.experimental.fbs,ke=class a{constructor(t,o,e,r,n,s=Mu.Guid.create()){this.dims=t;this.type=o;this.dataProvider=e;this.asyncDataProvider=r;this.cache=n;this.dataId=s;this.size=W.validateDimsAndCalcSize(t);let i=this.size,u=e===void 0&&r===void 0&&n===void 0;if(n!==void 0&&n.length!==i)throw new RangeError("Input dims doesn't match data length.");if(o==="string"){if(n!==void 0&&(!Array.isArray(n)||!n.every(l=>typeof l=="string")))throw new TypeError("cache should be a string array");u&&(this.cache=new Array(i))}else{if(n!==void 0){let l=Gu(o);if(!(n instanceof l))throw new TypeError(`cache should be type ${l.name}`)}if(u){let l=new ArrayBuffer(i*Wd(o));this.cache=zd(l,o)}}}get data(){if(this.cache===void 0){let t=this.dataProvider(this.dataId);if(t.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(t){return this.data[W.indicesToOffset(t,this.strides)]}set(t,o){this.data[W.indicesToOffset(t,this.strides)]=o}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=W.computeStrides(this.dims)),this._strides}static fromProto(t){if(!t)throw new Error("cannot construct Value from an empty tensor");let o=ze.tensorDataTypeFromProto(t.dataType),e=ze.tensorDimsFromProto(t.dims),r=new a(e,o);if(o==="string")t.stringData.forEach((n,s)=>{r.data[s]=Nn(n)});else if(t.rawData&&typeof t.rawData.byteLength=="number"&&t.rawData.byteLength>0){let n=r.data,s=new DataView(t.rawData.buffer,t.rawData.byteOffset,t.rawData.byteLength),i=Nu(t.dataType),u=t.rawData.byteLength/i;if(t.rawData.byteLength%i!==0)throw new Error("invalid buffer length");if(n.length!==u)throw new Error("buffer length mismatch");for(let l=0;l<u;l++){let f=Ru(s,t.dataType,l*i);n[l]=f}}else{let n;switch(t.dataType){case ie.onnx.TensorProto.DataType.FLOAT:n=t.floatData;break;case ie.onnx.TensorProto.DataType.INT32:case ie.onnx.TensorProto.DataType.INT16:case ie.onnx.TensorProto.DataType.UINT16:case ie.onnx.TensorProto.DataType.INT8:case ie.onnx.TensorProto.DataType.UINT8:case ie.onnx.TensorProto.DataType.BOOL:n=t.int32Data;break;case ie.onnx.TensorProto.DataType.INT64:n=t.int64Data;break;case ie.onnx.TensorProto.DataType.DOUBLE:n=t.doubleData;break;case ie.onnx.TensorProto.DataType.UINT32:case ie.onnx.TensorProto.DataType.UINT64:n=t.uint64Data;break;default:throw new Error("unspecific error")}if(n==null)throw new Error("failed to populate data from a tensorproto value");let s=r.data;if(s.length!==n.length)throw new Error("array length mismatch");for(let i=0;i<n.length;i++){let u=n[i];Jt.isLong(u)?s[i]=ji(u,t.dataType):s[i]=u}}return r}static fromData(t,o,e){return new a(o,e,void 0,void 0,t)}static fromOrtTensor(t){if(!t)throw new Error("cannot construct Value from an empty tensor");let o=ze.tensorDimsFromORTFormat(t),e=ze.tensorDataTypeFromProto(t.dataType()),r=new a(o,e);if(e==="string")for(let n=0;n<t.stringDataLength();n++)r.data[n]=t.stringData(n);else if(t.rawDataArray()&&typeof t.rawDataLength()=="number"&&t.rawDataLength()>0){let n=r.data,s=new DataView(t.rawDataArray().buffer,t.rawDataArray().byteOffset,t.rawDataLength()),i=Nu(t.dataType()),u=t.rawDataLength()/i;if(t.rawDataLength()%i!==0)throw new Error("invalid buffer length");if(n.length!==u)throw new Error("buffer length mismatch");for(let l=0;l<u;l++){let f=Ru(s,t.dataType(),l*i);n[l]=f}}return r}}});function K(a){return a===1?Hd:jd}function Uu(a){let t=K(a);return`${t.version}
      precision highp float;
      ${t.attribute} vec3 position;
      ${t.attribute} vec2 textureCoord;

      ${t.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function Vu(a){let t=K(a);return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFrag} vec2 TexCoords;
    ${t.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function Wu(a,t){let o=K(a);return`
  void main() {
    int indices[${t}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${o.output} = result;
  }
  `}var Hd,jd,Oe=$(()=>{"use strict";Hd={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},jd={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}});var ue=$(()=>{"use strict"});async function qi(a,t=e=>0,o){return new Promise((e,r)=>{let n=0,s=()=>{if(a()){e();return}n++;let i=t(n);if(o!=null&&n>=o){r();return}setTimeout(s,i)};s()})}function $o(a){return Jr(typeof a<"u"&&a.length!==0,()=>"empty string found for sampler name"),"get"+a.charAt(0).toUpperCase()+a.slice(1)}function zu(a){return Jr(typeof a<"u"&&a.length!==0,()=>"empty string found for sampler name"),"get"+a.charAt(0).toUpperCase()+a.slice(1)+"AtOutCoords"}function Zr(a,t){let o=JSON.parse(JSON.stringify(a));return o=t,o}function Qr(a,t){return t.map(o=>a[o]).join(", ")}function et(a){if(a<=1)return"int";if(a===2)return"ivec2";if(a===3)return"ivec3";if(a===4)return"ivec4";if(a===5)return"ivec5";if(a===6)return"ivec6";throw Error(`GPU for rank ${a} is not yet supported`)}function kt(a=6){return["x","y","z","w","u","v"].slice(0,a)}var Vt=$(()=>{"use strict";de()});function qd(a,t){return kt(t).map(o=>`${a}.${o}`)}function en(a,t){return t===1?[a]:qd(a,t)}function Wt(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var Er=$(()=>{"use strict";Vt()});function Xd(a,t,o){if(a===0)return"false";if(a===1)return`rc > ${t[0]}`;let e="";for(let r=a-2;r<a;r++)e+=`${o[r]} >= ${t[r-a+2]}`,r<a-1&&(e+="||");return e}function Kd(a,t){let o=a.length;if(o===0)return"getA(), 0, 0, 0";if(o===1)return`getA(rc),
            rc + 1 >= ${a[0]} ? 0. : getA(rc + 1),
            0, 0`;let e="r, c",r="r, cp1",n="rp1, c",s="rp1, cp1",i="";if(o>2)for(let u=0;u<o-2;++u)i=i+`${t[u]},`;return`getA(${i}${e}),
          rEdge ? 0. : getA(${i}${n}),
          cEdge ? 0. : getA(${i}${r}),
          rEdge || cEdge ? 0. : getA(${i}${s})`}function Jd(a,t,o,e){return a===0||a===1?"":`
    int r = ${t[a-2]};
    int c = ${t[a-1]};
    int rp1 = ${t[a-2]} + 1;
    int cp1 = ${t[a-1]} + 1;
    bool rEdge = rp1 >= ${e};
    bool cEdge = cp1 >= ${o};
    `}var Hu,Yd,ju,qu=$(()=>{"use strict";Oe();ue();Vt();Er();Hu={name:"pack",inputNames:["A"],inputTypes:[1]},Yd=(a,t)=>{let o=K(a.session.backend.glContext.version),e=t.dims,r=e.length,n=t.dims.length,s=et(n),i=en("rc",n),u=Jd(n,i,e[e.length-2],e[e.length-1]),l;r===0?l=[1,1]:r===1?l=[e[0],1]:l=[e[n-1],e[n-2]];let f=Xd(n,l,i),h=Kd(e,i),m=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${f}) {
            ${o.output} = vec4(0);
          } else {
            ${u}

            ${o.output} = vec4(${h});
          }
        }
      `;return{...Hu,hasMain:!0,output:{dims:t.dims,type:t.type,textureType:2},shaderSource:m}},ju=(a,t)=>({...Hu,get:()=>Yd(a,t)})});function Yi(a){if(a.length===0)return[1,1,1];let t=1;for(let o=0;o<a.length-2;++o)t*=a[o];return[t,a.length>1?a[a.length-2]:1,a[a.length-1]]}function Xu(a,t){let o=!1;return a.length===0||t.length===0?o=!0:a.length<2||t.length<2?o=a[a.length-1]===t[t.length-1]:o=a[a.length-1]===t[t.length-1]&&a[a.length-2]===t[t.length-2],o}function eh(a){let t=W.computeStrides(a),o=["b","r","c"],e="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t.map((n,s)=>{let i=`int ${o[s]} = ${e} / ${n}`,u=s===t.length-1?`int ${o[s+1]} = ${e} - ${o[s]} * ${n}`:`index -= ${o[s]} * ${n}`;return`${i}; ${u};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function th(a){let t=W.computeStrides(a);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${t[0]} + coords.z * ${t[1]} + coords.y;
  }
`}var Zd,Qd,Yu,Ku=$(()=>{"use strict";de();Oe();ue();Er();Zd=a=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${a}`}),Qd=(a,t,o,e)=>{let r=t.dims,n=e,s="";for(let l=0;l<4;l++){let f="";switch(l){case 0:f="outputCoords = rc;";break;case 1:f="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:f="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:f="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}s+=`
        ${f}
        ${l>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${l}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${l>0?"}":""}
      `}let i=K(a.session.backend.glContext.version),u=`
      ${eh(r)}
      ${th(n)}
      ${Wt()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${n[2]};
        int cols = ${n[1]};

        ${s}
        ${i.output} = result;
      }
    `;return{...o,output:{dims:n,type:t.type,textureType:2},shaderSource:u,hasMain:!0}},Yu=(a,t,o)=>{let e=Zd(o);return{...e,get:()=>Qd(a,t,e,o)}}});var Xi,Ju=$(()=>{"use strict";Oe();ue();Xi=(a,t)=>{let o=t.shape,e=K(a.session.backend.glContext.version),r=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${e.texture2D}(X,TexCoords).r;
      ${e.output} = encodeAsUint8(value);
    }`,n={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:o,type:t.tensor.type,textureType:3},shaderSource:r,hasMain:!0};return a.executeProgram(n,[t.tensor])}});function nh(a,t){if(a===1)return"rc";let o="";for(let e=0;e<a;e++)o+=t[e],e<a-1&&(o+=",");return o}var Zu,rh,Qu,el=$(()=>{"use strict";Oe();ue();Vt();Er();Zu={name:"unpack",inputNames:["A"],inputTypes:[2]},rh=(a,t)=>{let o=t.dims.length,e=en("rc",o),r=e.slice(-2),n=et(o),s=Wt(),u=t.dims.length===0?"":nh(o,e),l=o<=1?"rc":`vec2(${r.join(",")})`,f=K(a.session.backend.glContext.version),h=`
    ${s}
    void main() {
      ${n} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${u});

       ${f.output} = vec4(getChannel(packedInput, ${l}), 0, 0, 0);
     }
   `;return{...Zu,hasMain:!0,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:h}},Qu=(a,t)=>({...Zu,get:()=>rh(a,t)})});var Co,Rn,Fo,Mn=$(()=>{"use strict";ht();Co=class{constructor(t,o=1){if(o===1)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=o;else if(o===4)this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=o;else throw new Error(`Invalid number of channels: ${o}`)}encode(t,o){let e,r;return t.constructor!==Float32Array&&(he.warning("Encoder","data was not of type Float32; creating new Float32Array"),r=new Float32Array(t)),o*this.channelSize>t.length?(he.warning("Encoder","Source data too small. Allocating larger array"),r=t,e=this.allocate(o*this.channelSize),r.forEach((n,s)=>e[s]=n)):(r=t,e=r),e}allocate(t){return new Float32Array(t*4)}decode(t,o){return this.channelSize===1?t.filter((r,n)=>n%4===0).subarray(0,o):t.subarray(0,o)}},Rn=class{constructor(t,o=1,e){if(o!==1&&o!==4)throw new Error(`Invalid number of channels: ${o}`);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=o,this.textureType=e||t.FLOAT}encode(t,o){let e=t;return this.channelSize===1&&(he.verbose("Encoder","Exploding into a larger array"),e=this.allocate(o),t.forEach((r,n)=>e[n*4]=r)),e}allocate(t){return new Float32Array(t*4)}decode(t,o){return this.channelSize===1?t.filter((r,n)=>n%4===0).subarray(0,o):t.subarray(0,o)}},Fo=class{constructor(t,o=1){this.channelSize=4;if(o===1)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=o;else if(o===4)this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=o;else throw new Error(`Invalid number of channels: ${o}`)}encode(t,o){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,o){if(t instanceof Uint8Array)return t.subarray(0,o);throw new Error(`Invalid array type: ${t.constructor}`)}}});var Gn,tl,Ki,rl=$(()=>{"use strict";de();ue();Gn=(a,t,o)=>{let e=o===0||o===1?1:4,r=o===2,n=o===1||o===2,s=o===4?t.length-1:void 0,i=o===4?t.map((u,l)=>l===t.length-1?u*4:u):void 0;return Ki(a,t,e,i,{isPacked:r,reverseWH:n,breakAxis:s})},tl=(a,t,o)=>{let e=Gn(a,t,o);return[e.width,e.height]},Ki=(a,t,o=1,e,r)=>{let n=!!(r&&r.isPacked),[s,i]=a.computeTextureWH(n&&e||t,r),u=t.length,l=t.slice(0);if(u===0&&(l=[1]),o===1)e=t;else if(n){if(o!==4)throw new Error("a packed texture must be 4-channel");e=t,u>0&&(l[u-1]=Math.ceil(l[u-1]/2)),u>1&&(l[u-2]=Math.ceil(l[u-2]/2))}else if(!e)throw new Error("Unpacked shape is needed when using channels > 1");return{width:s,height:i,channels:o,isPacked:n,shape:l,strides:W.computeStrides(l),unpackedShape:e,reversedWH:r&&r.reverseWH}}});var ih,ko,ol=$(()=>{"use strict";ht();Pr();de();qu();Ku();Ju();el();Mn();rl();ue();ih=(a,t)=>{let o=t.map(r=>`${r.unpackedShape.join(",")};${r.width}x${r.height}`).join("_"),e=a.name;return a.cacheHint&&(e+="["+a.cacheHint+"]"),e+=":"+o,e},ko=class{constructor(t){this.session=t;this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,o){return tl(this.session.layoutStrategy,t,o)}executeProgram(t,o){if(o.length<t.inputNames.length)throw new Error(`Input size mustn't be less than ${t.inputNames.length}.`);if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");let e=[];for(let l=0;l<t.inputNames.length;++l)e[l]=this.getOrCreateTextureData(o[l],t.inputTypes[l]);let r=ih(t,e),n=this.session.programManager.getArtifact(r),s=n?n.programInfo:typeof t.get=="function"?t.get():t,i=Gn(this.session.layoutStrategy,s.output.dims,s.output.textureType),u=this.createTextureData(i,s.output.type);return n||(n=this.session.programManager.build(s,e,u),this.session.programManager.setArtifact(r,n)),this.runProgram(n,e,u),u}run(t,o){return this.executeProgram(t,o).tensor}runProgram(t,o,e){for(let r=0;r<o.length;++r)if(!!o[r].isPacked!=(t.programInfo.inputTypes[r]===2))throw new Error(`input[${r}] property packed inconsistent`);if(!!e.isPacked!=(t.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(t,o,e)}getOrCreateTextureData(t,o){let e=this.getTextureData(t.dataId,o===2);if(!e&&(e=this.getTextureData(t.dataId,o!==2),e))return o===2?this.pack(e):this.unpack(e);if(!e){let r=Gn(this.session.layoutStrategy,t.dims,o);if(o===4){let i=t.dims;if(i.length===4){let u=[i[0],Math.ceil(i[1]*i[2]*i[3]/4)],l=Gn(this.session.layoutStrategy,u,o),f=t.numberData;if(i[1]*i[2]*i[3]%4!==0){let h=i[0],m=i[1]*i[2]*i[3],v=Math.ceil(m*1/4)*4,I=h*v;f=new Float32Array(I);for(let _=0;_<h;++_){let A=_*m,L=_*v+_%1*m;f.set(t.numberData.subarray(A,A+m),L)}}return this.createTextureData(l,t.type,f,t,1)}}if(o===2){let n=Ki(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),s=this.createTextureData(n,t.type,t.numberData,t,1);e=this.pack(s)}else e=this.createTextureData(r,t.type,t.numberData,t,1)}return e}createTextureDataFromLayoutBindTensor(t,o,e,r){return this.createTextureData(t,o,e,r,1)}createTextureData(t,o,e,r,n){he.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(t)}]`);let s=this.session.textureManager.createTextureFromLayout(o,t,e,n);return this.createTextureDataFromTexture(t,o,s,r)}reshapeUnpacked(t,o){let e=this.getOrCreateTextureData(t,0),r={channels:e.channels,height:e.height,width:e.width,shape:o.length!==0?o:[1],strides:W.computeStrides(o),unpackedShape:o};return this.createTextureDataFromTexture(r,t.type,e.texture).tensor}reshapePacked(t,o){let e=this.getOrCreateTextureData(t,2);if(Xu(t.dims,o)){let l={channels:e.channels,height:e.height,width:e.width,shape:o.length!==0?o:[1],strides:W.computeStrides(o),unpackedShape:o,isPacked:!0};return this.createTextureDataFromTexture(l,t.type,e.texture).tensor}let r=Yi(t.dims),n=Yi(o),s=this.reshapePacked(t,r),i=this.run(Yu(this,s,n),[s]);return this.reshapePacked(i,o)}cast(t,o){let e=this.getOrCreateTextureData(t,0);return this.createTextureDataFromTexture(e,o,e.texture).tensor}createTextureDataFromTexture(t,o,e,r,n){let s={...t,tensor:r||new ke(t.unpackedShape,o,i=>this.readTexture(s),async i=>this.readTextureAsync(s),void 0,n),texture:e};return this.setTextureData(s.tensor.dataId,s,t.isPacked),s}getTextureData(t,o=!1){return this.session.isInitializer(t)?this.session.getTextureData(t,o):o?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,o,e=!1){this.session.isInitializer(t)?this.session.setTextureData(t,o,e):(e?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,o)}isTextureLayoutCached(t,o=!1){return!!this.getTextureData(t.dataId,o)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(Xi(this,t))}async readTextureAsync(t){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(Xi(this,t))}pack(t){return this.executeProgram(ju(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram(Qu(this,t.tensor),[t.tensor])}}});var Ji,ne,We=$(()=>{"use strict";Ji=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},ne=a=>new Ji(a)});var il,al,sl,ah,sh,ul=$(()=>{"use strict";We();Oe();ue();il={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},al=(a,t,o)=>(sh(t),[a.run({...il,cacheHint:o.cacheKey,get:()=>ah(a,t,o)},t)]),sl=a=>{let t=a.attributes.getFloat("epsilon",1e-5),o=a.attributes.getFloat("momentum",.9),e=a.attributes.getInt("spatial",1);return ne({epsilon:t,momentum:o,spatial:e})},ah=(a,t,o)=>{let e=K(a.session.backend.glContext.version),r=t[0].dims.length,[n,s]=a.calculateTextureWidthAndHeight(t[1].dims,0),i=`
  float process(int[${r}] indices) {
    vec2 position = offsetToCoords(indices[1], ${n}, ${s});
    float scale = getColorAsFloat(${e.texture2D}(Scale, position));
    float mean = getColorAsFloat(${e.texture2D}(Mean, position));
    float variance = getColorAsFloat(${e.texture2D}(Variance, position));
    float b = getColorAsFloat(${e.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${o.epsilon})) ) + b;
  }`;return{...il,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:i}},sh=a=>{if(!a||a.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let t=a[0],o=a[1],e=a[2],r=a[3],n=a[4];if(t.dims.length<3||o.dims.length!==1||e.dims.length!==1||r.dims.length!==1||n.dims.length!==1)throw new Error("invalid input shape.");if(o.dims[0]!==t.dims[1]||e.dims[0]!==t.dims[1]||r.dims[0]!==t.dims[1]||n.dims[0]!==t.dims[1])throw new Error("invalid input shape.");if(t.type!=="float32"&&t.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||e.type!=="float32"&&e.type!=="float64"||r.type!=="float32"&&r.type!=="float64"||n.type!=="float32"&&n.type!=="float64")throw new Error("invalid input tensor types.")}});var Bo,yt,U,Un,No,Zt=$(()=>{"use strict";Bo=class{constructor(t,o,e,r){this.glContext=t;this.programInfo=o;this.inputTextureLayouts=e;this.outputTextureLayout=r}},yt=class{constructor(t){this.context=t}},U=class{constructor(t,o){this.routineBody=t;this.dependencies=o}},Un=class{constructor(t,o,e){this.name=t;e?this.dependencies=e:this.dependencies=[],o&&(this.routineBody=o)}addDependency(t){t&&this.dependencies.push(t)}},No=class{static returnOrderedNodes(t){if(!t||t.length===0)return[];if(t.length===1)return t;let o=new Set,e=new Set,r=new Array;return this.createOrderedNodes(t,o,e,r),r}static createOrderedNodes(t,o,e,r){for(let n=0;n<t.length;++n)this.dfsTraverse(t[n],o,e,r)}static dfsTraverse(t,o,e,r){if(!t||e.has(t.name))return;if(o.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");o.add(t.name);let n=t.dependencies;if(n&&n.length>0)for(let s=0;s<n.length;++s)this.dfsTraverse(n[s],o,e,r);r.push(t),e.add(t.name),o.delete(t.name)}}});function lh(){let a="add_";return{body:`
  float ${a}(float a, float b) {
    return a + b;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:a,type:0}}function fh(){let a="div_";return{body:`
  float ${a}(float a, float b) {
    return a / b;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:a,type:0}}function ch(){let a="mul_";return{body:`
  float ${a}(float a, float b) {
    return a * b;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:a,type:0}}function ph(){let a="sub_";return{body:`
  float ${a}(float a, float b) {
    return a - b;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:a,type:0}}function dh(){let a="equal_";return{body:`
  float ${a}(float a, float b) {
    return float(a == b);
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:a,type:0}}function hh(){let a="greater_";return{body:`
  float ${a}(float a, float b) {
    return float(a > b);
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:a,type:0}}function mh(){let a="less_";return{body:`
  float ${a}(float a, float b) {
    return float(a < b);
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:a,type:0}}function bh(){let a="and_";return{body:`
  float ${a}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:a,type:0}}function gh(){let a="or_";return{body:`
  float ${a}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:a,type:0}}function yh(){let a="xor_";return{body:`
  float ${a}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:a,type:0}}function Th(){return vh("pow")}function xh(){let a="prelu_";return{body:`
  float ${a}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:a,type:0}}function vh(a){let t=`${a}_`;return{body:`
  float ${t}(float a, float b) {
    return ${a}(a, b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return ${a}(v1, v2);
  }
  `,name:t,type:0}}var Tt,wh,ll,fl,cl,pl,dl,hl,ml,bl,gl,yl,Tl,xl,vl=$(()=>{"use strict";de();Zt();Oe();ue();Tt=(a,t,o,e=t[0].type,r)=>{let n=a.session.pack?2:0;return{name:o.name,inputNames:["A","B"],inputTypes:[n,n],cacheHint:r,get:()=>wh(a,t,o,e)}},wh=(a,t,o,e=t[0].type)=>{let r=a.session.pack?2:0,n=!W.areEqual(t[0].dims,t[1].dims),s=t[0].dims,i=a.session.pack;if(n){let f=Qe.calcShape(t[0].dims,t[1].dims,!1);if(!f)throw new Error("Can't perform binary op on the given tensors");s=f;let h=s.length,m=t[0].dims.length!==0?t[0].dims.length:1,v=t[1].dims.length!==0?t[1].dims.length:1,I=t[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",_=t[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",A=K(a.session.backend.glContext.version),L=i?`
      ${o.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${o.name}(a, b);
        ${A.output} = result;
      }`:`
      ${o.body}
      float process(int indices[${h}]) {
        int aindices[${m}];
        int bindices[${v}];
        ${I}
        ${_}
        return ${o.name}(_A(aindices), _B(bindices));
      }`;return{name:o.name,inputNames:["A","B"],inputTypes:[r,r],output:{dims:s,type:e,textureType:r},shaderSource:L,hasMain:i}}let u=K(a.session.backend.glContext.version),l=`
    ${o.body}
    void main() {
      vec4 v1 = ${u.texture2D}(A, TexCoords);
      vec4 v2 = ${u.texture2D}(B, TexCoords);
      vec4 result = ${o.name}(v1, v2);
      ${u.output} = result;
    }
    `;return{name:o.name,inputNames:["A","B"],inputTypes:[r,r],output:{dims:t[0].dims,type:e,textureType:r},shaderSource:l,hasMain:!0}},ll=(a,t)=>[a.run(Tt(a,t,lh()),t)],fl=(a,t)=>[a.run(Tt(a,t,bh(),"bool"),t)],cl=(a,t)=>[a.run(Tt(a,t,fh()),t)],pl=(a,t)=>[a.run(Tt(a,t,dh(),"bool"),t)],dl=(a,t)=>[a.run(Tt(a,t,hh(),"bool"),t)],hl=(a,t)=>[a.run(Tt(a,t,mh(),"bool"),t)],ml=(a,t)=>[a.run(Tt(a,t,ch()),t)],bl=(a,t)=>[a.run(Tt(a,t,gh(),"bool"),t)],gl=(a,t)=>[a.run(Tt(a,t,Th()),t)],yl=(a,t)=>[a.run(Tt(a,t,xh()),t)],Tl=(a,t)=>[a.run(Tt(a,t,ph()),t)],xl=(a,t)=>[a.run(Tt(a,t,yh(),"bool"),t)]});var wl,_l,Oh,Ol=$(()=>{"use strict";de();wl=(a,t,o)=>(Oh(t),[a.cast(t[0],o)]),_l=a=>ze.tensorDataTypeFromProto(a.attributes.getInt("to")),Oh=a=>{if(!a||a.length!==1)throw new Error("Cast requires 1 input.");if(a[0].type==="string")throw new Error("Invalid input type.")}});var Ih,Sh,Il,Ro,Sl=$(()=>{"use strict";Oe();ue();Vt();Er();Ih=(a,t)=>({name:"Concat (packed)",inputNames:Array.from({length:a},(o,e)=>`X${e}`),inputTypes:Array(a).fill(2),cacheHint:t}),Sh=(a,t,o,e)=>{let r=o[0].dims.slice();if(e>=r.length||e<-1*r.length)throw new Error("axis specified for concat doesn't match input dimensionality");e<0&&(e=r.length+e);let n=r.slice(0);for(let z=1;z<o.length;z++){let me=o[z].dims.slice();for(let Ie=0;Ie<r.length;Ie++)if(Ie===e)n[e]+=me[Ie];else if(r[Ie]!==me[Ie])throw new Error("non concat dimensions must match")}let s=n.length,i=en("coords",s),u=et(s),l=Wt(),f=o.map(z=>z.dims),h=kt(s),m=new Array(f.length-1);m[0]=f[0][e];for(let z=1;z<m.length;z++)m[z]=m[z-1]+f[z][e];let v=h[e],I=h.slice(-2),_=h.join(),A=`if (${v} < ${m[0]}) {
        return getChannel(
            getX0(${_}), vec2(${I.join()}));
        }`;for(let z=1;z<m.length;z++){let me=m[z-1];A+=`
            if (${v} < ${m[z]}  && ${v} >= ${m[z-1]}) {
              return getChannel(
                getX${z}(${Ro(h,v,me)}),
                vec2(${Ro(I,v,me)}));
            }`}let L=m.length,F=m[m.length-1];A+=`
            return getChannel(
              getX${L}(${Ro(h,v,F)}),
              vec2(${Ro(I,v,F)}));`;let M=K(a.session.backend.glContext.version),J=`
          ${l}
          float getValue(${h.map(z=>"int "+z)}) {
            ${A}
          }

          void main() {
            ${u} coords = getOutputCoords();
            int lastDim = coords.${h[s-1]};
            coords.${h[s-1]} = coords.${h[s-2]};
            coords.${h[s-2]} = lastDim;

            vec4 result = vec4(getValue(${i}), 0., 0., 0.);

            ${i[s-1]} = ${i[s-1]} + 1;
            if (${i[s-1]} < ${n[s-1]}) {
              result.g = getValue(${i});
            }

            ${i[s-2]} = ${i[s-2]} + 1;
            if (${i[s-2]} < ${n[s-2]}) {
              result.a = getValue(${i});
            }

            ${i[s-1]} = ${i[s-1]} - 1;
            if (${i[s-2]} < ${n[s-2]} &&
                ${i[s-1]} < ${n[s-1]}) {
              result.b = getValue(${i});
            }
            ${M.output} = result;
          }
        `;return{...t,output:{dims:n,type:o[0].type,textureType:2},shaderSource:J,hasMain:!0}},Il=(a,t,o)=>{let e=Ih(t.length,o.cacheKey);return{...e,get:()=>Sh(a,e,t,o.axis)}},Ro=(a,t,o)=>{let e=a.indexOf(t);return a.map((n,s)=>s===e?`${n} - ${o}`:n).join()}});var Al,Ah,Ph,Eh,Pl,Dh,Lh,$h,El,Ch,Dl=$(()=>{"use strict";We();ue();Sl();Al=(a,t,o)=>(Ch(t),a.session.pack&&t[0].dims.length>1?[a.run(Il(a,t,o),t)]:[a.run(Eh(a,t,o),t)]),Ah=(a,t)=>({name:"Concat",inputNames:Array.from({length:a},(o,e)=>`X${e}`),inputTypes:Array(a).fill(0),cacheHint:t}),Ph=(a,t,o,e)=>{let r=o[0].dims.slice();if(e>=r.length||e<-1*r.length)throw new Error("axis specified for concat doesn't match input dimensionality");e<0&&(e=r.length+e);let n=r.slice(0);for(let v=1;v<o.length;v++){let I=o[v].dims.slice();for(let _=0;_<r.length;_++)if(_===e)n[e]+=I[_];else if(r[_]!==I[_])throw new Error("non concat dimensions must match")}let s=n.length,i=new Array(o.length),u=0;for(let v=0;v<i.length;++v)u+=o[v].dims[e],i[v]=u;let l="";o.length<5?l=Pl(i):l=Dh(i);let f=Lh(o.length,s),h=$h(i),m=`
        ${f}
        ${h}
        ${l}
        float process(int indices[${s}]) {
          int textureIndex = getTextureWhereDataResides (indices[${e}]);

          if(textureIndex != 0) {
            indices[${e}] = indices[${e}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{...t,output:{dims:n,type:o[0].type,textureType:0},shaderSource:m}},Eh=(a,t,o)=>{let e=Ah(t.length,o.cacheKey);return{...e,get:()=>Ph(a,e,t,o.axis)}},Pl=a=>`int getTextureWhereDataResides(int index) {
      ${a.map((o,e)=>`if(index<${o}) {return ${e};}
`).join("")}
    }`,Dh=a=>Pl(a),Lh=(a,t)=>{let o=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${t}]) {`];for(let e=0;e<a;++e)e===0?o.push(`	if (textureIndex == ${e}) { return _X${e}(indices); }`):e===a-1?o.push(`	else { return _X${e}(indices); }`):o.push(`	else if (textureIndex == ${e}) { return _X${e}(indices); }`);return o.push("	}"),o.join(`
`)},$h=a=>{let t=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let o=0;o<a.length;++o)o===0?t.push(`	if (index == ${o}) { return ${a[o]}; }`):o===a.length-1?t.push(`	else { return ${a[o]}; }`):t.push(`	else if (index == ${o}) { return ${a[o]}; }`);return t.push("	}"),t.join(`
`)},El=a=>ne({axis:a.attributes.getInt("axis")}),Ch=a=>{if(!a||a.length<1)throw new Error("too few inputs");let t=a[0].type,o=a[0].dims.length;if(t==="string")throw new Error("string tensor is not supported yet");for(let e of a){if(e.type!==t)throw new Error("input tensors should be one type");if(e.dims.length!==o)throw new Error("input tensors should have the same shape")}}});function Fh(){return xt("abs")}function kh(){return xt("acos")}function Bh(){return xt("asin")}function Nh(){return xt("atan")}function Rh(){return xt("ceil")}function Mh(){return xt("cos")}function Gh(a){let t="elu";return{body:`
  const float alpha = float(${a});

  float ${t}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));
  }
  `,name:t,type:0}}function Uh(){return xt("exp")}function Vh(){return xt("floor")}function Zi(a,t){let o="clip";return{body:`
  const float min = float(${a});
  const float max = float(${t});

  float ${o}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${o}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:o,type:0}}function Wh(){let a="indentity";return{body:`
  float ${a}_(float a) {
    return a;
  }
  vec4 ${a}_(vec4 v) {
    return v;
  }
  `,name:a,type:0}}function zh(a){let t="leakyRelu";return{body:`
  const float alpha = float(${a});

  float ${t}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));
  }
  `,name:t,type:0}}function Hh(){return xt("log")}function jh(){let a="neg";return{body:`
  float ${a}_(float a) {
    return -a;
  }
  vec4 ${a}_(vec4 v) {
    return -v;
  }
  `,name:a,type:0}}function qh(){let a="not";return{body:`
  float ${a}_(float a) {
    return float( ! bool(a) );
  }
  bool ${a}_(bool a) {
    return !a;
  }
  vec4 ${a}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${a}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:a,type:0}}function Yh(){return xt("sin")}function Qi(){let a="relu";return{body:`
  float ${a}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${a}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:a,type:0}}function ea(){let a="sigmoid";return{body:`
  float ${a}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${a}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:a,type:0}}function Xh(){return xt("sqrt")}function Kh(){return xt("tan")}function Jh(){let a="tanh";return{body:`
  float ${a}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${a}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:a,type:0}}function xt(a){return{body:`
  float ${a}_(float a) {
    return ${a}(a);
  }
  vec4 ${a}_(vec4 v) {
    return ${a}(v);
  }
  `,name:a,type:0}}var Zh,$e,Ll,$l,Cl,Fl,ta,kl,Bl,Qh,Nl,Rl,Ml,Gl,Ul,Vl,ra,Wl,zl,Hl,jl,ql,Yl,Xl,Kl,Jl,Zl,Ql,na=$(()=>{"use strict";We();de();Zt();Oe();ue();Zh=(a,t,o,e)=>{let r=a.session.pack?2:0,n=K(a.session.backend.glContext.version);return{...t,output:{dims:o.dims,type:o.type,textureType:r},shaderSource:`
     ${e.body}
     void main() {
       vec4 v = ${n.texture2D}(A, TexCoords);
       v = ${e.name}_(v);
       ${n.output} = v;
     }
     `,hasMain:!0}},$e=(a,t,o,e)=>{let r=a.session.pack?2:0,n={name:o.name,inputTypes:[r],inputNames:["A"],cacheHint:e};return{...n,get:()=>Zh(a,n,t,o)}},Ll=(a,t)=>[a.run($e(a,t[0],Fh()),t)],$l=(a,t)=>[a.run($e(a,t[0],kh()),t)],Cl=(a,t)=>[a.run($e(a,t[0],Bh()),t)],Fl=(a,t)=>[a.run($e(a,t[0],Nh()),t)],ta=(a,t,o)=>[a.run($e(a,t[0],Zi(o.min,o.max),o.cacheKey),t)],kl=a=>ne({min:a.attributes.getFloat("min",Sr),max:a.attributes.getFloat("max",Ar)}),Bl=(a,t)=>{let o=Qh(a,t);return ta(a,[t[0]],o)},Qh=(a,t)=>{if(t.length>=3&&(!a.session.isInitializer(t[1].dataId)||!a.session.isInitializer(t[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let o=t.length>=3?t[1].numberData[0]:Sr,e=t.length>=3?t[2].numberData[0]:Ar;return ne({min:o,max:e})},Nl=(a,t)=>[a.run($e(a,t[0],Rh()),t)],Rl=(a,t)=>[a.run($e(a,t[0],Mh()),t)],Ml=(a,t,o)=>[a.run($e(a,t[0],Gh(o.alpha),o.cacheKey),t)],Gl=a=>ne({alpha:a.attributes.getFloat("alpha",1)}),Ul=(a,t)=>[a.run($e(a,t[0],Uh()),t)],Vl=(a,t)=>[a.run($e(a,t[0],Vh()),t)],ra=(a,t)=>[a.run($e(a,t[0],Wh()),t)],Wl=(a,t,o)=>[a.run($e(a,t[0],zh(o.alpha),o.cacheKey),t)],zl=a=>ne({alpha:a.attributes.getFloat("alpha",.01)}),Hl=(a,t)=>[a.run($e(a,t[0],Hh()),t)],jl=(a,t)=>[a.run($e(a,t[0],jh()),t)],ql=(a,t)=>[a.run($e(a,t[0],qh()),t)],Yl=(a,t)=>[a.run($e(a,t[0],Qi()),t)],Xl=(a,t)=>[a.run($e(a,t[0],ea()),t)],Kl=(a,t)=>[a.run($e(a,t[0],Yh()),t)],Jl=(a,t)=>[a.run($e(a,t[0],Xh()),t)],Zl=(a,t)=>[a.run($e(a,t[0],Kh()),t)],Ql=(a,t)=>[a.run($e(a,t[0],Jh()),t)]});function zt(a){let t;switch(a.activation){case"Relu":t=Qi();break;case"Sigmoid":t=ea();break;case"Clip":t=Zi(a.clipMin,a.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let o=t.name,e=t.body,r=`value = ${o}_(value);`;return{activationFunction:e,applyActivation:r}}var tn,Dr=$(()=>{"use strict";de();na();tn=a=>{let t=a.getString("activation","");if(t==="Clip"){let[o,e]=a.getFloats("activation_params",[Sr,Ar]);return{activation:t,clipMax:e,clipMin:o,activationCacheKey:`${t}:${o},${e}`}}return{activation:t,activationCacheKey:t}}});var tm,rm,ef,tf=$(()=>{"use strict";ht();Oe();ue();Mo();Dr();tm=(a,t)=>({name:"GroupedConv",inputNames:a?["X","W","Bias"]:["X","W"],inputTypes:a?[0,0,0]:[0,0],cacheHint:t}),rm=(a,t,o,e)=>{let n=t.length>2?"value += getBias(output_channel);":"",s=t[0].dims.slice(),i=t[1].dims.slice(),u=i[0]/e.group;he.verbose("GroupedConv",`autpPad:${e.autoPad}, dilations:${e.dilations}, group:${e.group}, kernelShape:${e.kernelShape}, pads:${e.pads}, strides:${e.strides}`);let l=rn(s,i,e.dilations,e.pads,e.strides),f=K(a.session.backend.glContext.version),{activationFunction:h,applyActivation:m}=zt(e),v=`
  const ivec2 strides = ivec2(${e.strides[0]}, ${e.strides[1]});
  const ivec2 pads = ivec2(${e.pads[0]}, ${e.pads[1]});
  ${h}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${u};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${i[1]}; wInChannel++) {
      int input_channel = group_id * ${i[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${i[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${e.dilations[0]};

        if (xHeight < 0 || xHeight >= ${s[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${i[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${e.dilations[1]};
          if (xWidth < 0 || xWidth >= ${s[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${n}
    ${m}
    ${f.output} = vec4(value, .0, .0, .0);
  }
`;return{...o,output:{dims:l,type:t[0].type,textureType:0},shaderSource:v,hasMain:!0}},ef=(a,t,o)=>{let e=tm(t.length>2,o.cacheKey);return{...e,get:()=>rm(a,t,e,o)}}});var nm,om,rf,nf=$(()=>{"use strict";Oe();ue();Er();nm=a=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:a}),om=(a,t,o,e,r,n)=>{let s=o.dims,i=e.dims,u=2,l=3,f=r.length,h=[i[1]*i[2]*i[3],r[2]*r[3]],m=i[2]*i[3],v=Wt(),I=K(a.session.backend.glContext.version),_="";for(let L=0;L<=1;L++)for(let F=0;F<=1;F++)_+=`
            blockIndex = rc.x + ${F};
            pos = rc.y + ${L};

            if(blockIndex < ${h[1]} && pos < ${h[0]}) {
              offsetY = int(blockIndex / (${r[f-1]})) * ${n.strides[0]} -
                ${n.pads[0]};
              d0 = offsetY + ${n.dilations[0]} * (imod(pos, ${m}) / ${i[2]});

              if(d0 < ${s[u]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${r[f-1]}) * ${n.strides[1]} -
                  ${n.pads[1]};
                d1 = offsetX + ${n.dilations[1]} * imod(imod(pos, ${m}), ${i[2]});

                if(d1 < ${s[l]} && d1 >= 0) {

                  ch = int(float(pos)/ ${m}.);
                    innerDims = vec2(d0, d1);
                    result[${L*2+F}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let A=`
      ${v}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${_}
          ${I.output} = result;
      }
            `;return{...t,output:{dims:h,type:o.type,textureType:2},shaderSource:A,hasMain:!0}},rf=(a,t,o,e,r)=>{let n=nm(r.cacheKey);return{...n,get:()=>om(a,n,t,o,e,r)}}});function am(a,t,o){let e=t[0].dims,r=t[1].dims,n=Qe.calcShape(e,r,!0);if(!n)throw new Error("Can't use matmul on the given tensors");let s=et(n.length),i=kt(),{activationFunction:u,applyActivation:l}=zt(o),f=t.length>2,h=f?"value += getBiasForMatmul();":"",m=f?`${ia(s,i,t[2].dims,n,!1)}`:"",v=n.length,I=e.length,_=r.length,A=e[e.length-1],L=`
    ${u}
    ${m}
    float process(int indices[${v}]) {
        int a[${I}];
        int b[${_}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${A}; ++k) {
            a[${I-1}] = k;
            b[${_-2}] = k;
            value += _A(a) * _B(b);
        }
        ${h}
        ${l}
        return value;
    }`;return{...a,output:{dims:n,type:t[0].type,textureType:0},shaderSource:L}}function oa(a,t){let o=im(a.length>2,t.activationCacheKey);return{...o,get:()=>am(o,a,t)}}function ia(a,t,o,e,r){let n="",s=o.length,i=e.length,u=i-s;i<2&&s>0?n="coords":n=o.map((_,A)=>`coords.${t[A+u]}`).join(", ");let f=Qe.getBroadcastDims(o,e).map(_=>`coords.${t[_+u]} = 0;`).join(`
`),m=W.size(o)===1,v="vec4(outputValue.xx, outputValue.yy)";return m&&(v="vec4(outputValue.x)"),r?`
vec4 getBiasForMatmul() {
  ${a} coords = getOutputCoords();
  ${f}
  vec4 outputValue = getBias(${n});
  return ${v};
}`:`
float getBiasForMatmul() {
  ${a} coords = getOutputCoords();
  ${f}
  return getBias(coords.x);
}`}var of,af,im,sm,Go=$(()=>{"use strict";de();ue();Vt();Dr();aa();of=(a,t,o)=>(sm(t),a.session.pack?[a.run(Uo(a,t,o),t)]:[a.run(oa(t,o),t)]),af=a=>tn(a.attributes),im=(a,t)=>({name:"MatMul",inputNames:a?["A","B","Bias"]:["A","B"],inputTypes:a?[0,0,0]:[0,0],cacheHint:t});sm=a=>{if(!a||a.length!==2)throw new Error("MatMul requires 2 inputs.");if(a[0].dims[a[0].dims.length-1]!==a[1].dims[a[1].dims.length-2])throw new Error("shared dimension does not match.");if(a[0].type!=="float32"&&a[0].type!=="float64"||a[1].type!=="float32"&&a[1].type!=="float64")throw new Error("inputs should be float type");if(a[0].type!==a[1].type)throw new Error("inputs types should match")}});function fm(a,t,o,e){let r=[],n=[],s=o[0].dims,i=o[1].dims,u=s.length,l=i.length,f=e.length,h=f-u,m=f-l;r=s.map((M,J)=>`coords.${t[J+h]}`),r[u-1]="i*2",r.join(", "),n=i.map((M,J)=>`coords.${t[J+m]}`),n[l-2]="i*2",n.join(", ");let v=Qe.getBroadcastDims(s,e),I=Qe.getBroadcastDims(i,e),_=v.map(M=>`coords.${t[M+h]} = 0;`).join(`
`),A=I.map(M=>`coords.${t[M+m]} = 0;`).join(`
`),L=`int lastDim = coords.${t[f-1]};
  coords.${t[f-1]} = coords.${t[f-2]};
  coords.${t[f-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${a} coords = getOutputCoords();
  ${L}
  ${_}
  vec4 outputValue = getA(${r});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${a} coords = getOutputCoords();
  ${L}
  ${A}
  vec4 outputValue = getB(${n});
  return outputValue;
}`}function cm(a,t){let o="";for(let e=0;e<t-2;e++)o+=`rc.${a[e]}, `;return o+=`rc.${a[t-2]}, i*2`,o}function pm(a,t){let o="";for(let e=0;e<t-2;e++)o+=`rc.${a[e]}, `;return o+=`i*2, rc.${a[t-1]}`,o}var um,lm,Uo,aa=$(()=>{"use strict";de();Oe();ue();Vt();Dr();Go();um=(a,t)=>({name:"MatMul (packed)",inputNames:a?["A","B","Bias"]:["A","B"],inputTypes:a?[2,2,2]:[2,2],cacheHint:t}),lm=(a,t,o,e)=>{let r=o.length>2,n=r?"value += getBiasForMatmul();":"",s=o[0].dims,i=o[1].dims,u=Qe.calcShape(s,i,!0),l=!W.areEqual(o[0].dims,o[1].dims);if(!u)throw new Error("Can't use matmul on the given tensors");let f=s[s.length-1],h=Math.ceil(f/2),m=s.length,v=i.length,I=K(a.session.backend.glContext.version),_=et(u.length),A=u.length,L=kt(),{activationFunction:F,applyActivation:M}=zt(e),J=r?`${ia(_,L,o[2].dims,u,!0)}`:"",z=l?`${fm(_,L,o,u)}`:"",me=l?"getAAtOutCoordsMatmul(i)":`getA(${cm(L,m)})`,Ie=l?"getBAtOutCoordsMatmul(i)":`getB(${pm(L,v)})`,V=l?"":`${_} rc =
          getOutputCoords(); int lastDim = rc.${L[A-1]}; rc.${L[A-1]} =
          rc.${L[A-2]}; rc.${L[A-2]} = lastDim;
      `,oe=`
            ${z}
            ${J}
            ${F}
            void main() {
              ${V}

              vec4 value = vec4(0);
              for (int i = 0; i < ${h}; i++) {
                vec4 a = ${me};
                vec4 b = ${Ie};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${n}
              ${M}
              ${I.output} = value;
            }`;return{...t,output:{dims:u,type:o[0].type,textureType:2},shaderSource:oe,hasMain:!0}},Uo=(a,t,o)=>{let e=um(t.length>2,o.activationCacheKey);return{...e,get:()=>lm(a,e,t,o)}}});var sf,uf=$(()=>{"use strict";Mo();nf();aa();sf=(a,t,o)=>{let e=t[0].dims,r=t[1].dims,n=rn(e,r,o.dilations,o.pads,o.strides),s=a.run(rf(a,t[0],t[1],n,o),[t[0]]),i=a.reshapePacked(t[1],[r[0],r[1]*r[2]*r[3]]),u=t.length===3?[i,s,t[2]]:[i,s],l=a.run(Uo(a,u,o),u);return a.reshapePacked(l,n)}});var dm,hm,lf,sa,ua=$(()=>{"use strict";ue();dm=a=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:a}),hm=(a,t,o,e,r,n)=>{let s=o.dims,i=e.dims,u=r.length,l=sa(s,i,r,4),f=`
        const int XC = ${s[1]};
        const int XH = ${s[2]};
        const int XW = ${s[3]};
        const int KH = ${n.kernelShape[0]};
        const int KW = ${n.kernelShape[1]};
        const int dilationH = ${n.dilations[0]};
        const int dilationW = ${n.dilations[1]};
        const int strideH = ${n.strides[0]};
        const int strideW = ${n.strides[1]};
        const int padH = ${n.pads[0]};
        const int padW = ${n.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${u}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${s.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{...t,output:{dims:l,type:o.type,textureType:4},shaderSource:f}},lf=(a,t,o,e,r)=>{let n=dm(r.cacheKey);return{...n,get:()=>hm(a,n,t,o,e,r)}},sa=(a,t,o,e=4)=>[o[0],o[2],o[3],Math.ceil(a[1]*t[2]*t[3]/e)]});var mm,bm,ff,cf=$(()=>{"use strict";de();Oe();ue();Dr();ua();mm=(a,t)=>({name:"ConvDotProduct",inputNames:a?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:a?[0,4,0]:[0,4],cacheKey:t.activationCacheKey}),bm=(a,t,o,e,r)=>{let n=o[0].dims,s=o[1].dims,i=[s[0],Math.ceil(n[1]*s[2]*s[3]/4)],u=sa(n,s,e),[l,f]=a.calculateTextureWidthAndHeight(i,4),h=W.computeStrides(u),[m,v]=a.calculateTextureWidthAndHeight(u,4),I=e.length,_=o.length<3?"0.0":"_B(b)",A=Math.ceil(n[1]*s[2]*s[3]/4),{activationFunction:L,applyActivation:F}=zt(r),M=K(a.session.backend.glContext.version),J=`
${L}
float process(int indices[${I}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${h[0]} + im2col[1] * ${h[1]} + im2col[2] * ${h[2]};
  int kernelOffset = indices[1] * ${i[1]};
  float value = ${_};
  for (int i = 0; i < ${A}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${m}, ${v});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${l}, ${f});
    value += dot(${M.texture2D}(Im2Col, im2colCoords), ${M.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${F}
  return value;
}`;return{...t,output:{dims:e,type:o[0].type,textureType:0},shaderSource:J}},ff=(a,t,o,e)=>{let r=mm(t.length>2,e);return{...r,get:()=>bm(a,r,t,o,e)}}});var rn,la,gm,ym,Tm,xm,fa,vm,Mo=$(()=>{"use strict";We();de();tf();uf();cf();Dr();ua();Go();rn=(a,t,o,e,r)=>{let n=a[0],s=a.slice(2),i=s.length,u=t[0],f=t.slice(2).map((I,_)=>I+(I-1)*(o[_]-1)),m=s.map((I,_)=>I+e[_]+e[_+i]).map((I,_)=>Math.floor((I-f[_]+r[_])/r[_]));return[n,u].concat(...m)},la=(a,t,o)=>(vm(t,o),gm(a,t,o)),gm=(a,t,o)=>{let e=xm(o,t),r=a.session.pack,n=e.kernelShape[0]===1&&e.kernelShape[1]===1;return e.group>1?[a.run(ef(a,t,e),t)]:n&&r?[ym(a,t,e)]:r&&t[0].dims.length===4&&t[0].dims[0]===1&&!n?[sf(a,t,e)]:[Tm(a,t,e)]},ym=(a,t,o)=>{let e=t[0].dims,r=t[1].dims,n=rn(e,r,o.dilations,o.pads,o.strides),s=a.reshapeUnpacked(t[0],[e[1],e[2]*e[3]]),i=a.reshapeUnpacked(t[1],[r[0],r[1]]),u=t.length>2?[i,s,t[2]]:[i,s],l=a.run(oa(u,o),u);return a.reshapeUnpacked(l,n)},Tm=(a,t,o)=>{let e=t[0].dims,r=t[1].dims,n=rn(e,r,o.dilations,o.pads,o.strides),s=a.run(lf(a,t[0],t[1],n,o),[t[0]]),i=t.length===3?[s,t[1],t[2]]:[s,t[1]];return a.run(ff(a,t,n,o),i)},xm=(a,t)=>{let o=a.kernelShape.slice();if(a.kernelShape.length===0)for(let n=2;n<t[1].dims.length;++n)o.push(t[1].dims[n]);let e=a.pads.slice();Ir.adjustPadsBasedOnAutoPad(t[0].dims,a.strides,a.dilations,o,e,a.autoPad);let r=Object.assign({},a);return Object.assign(r,{kernelShape:o,pads:e,cacheKey:a.cacheKey}),r},fa=a=>{let t=a.attributes,o=tn(t),e=t.getString("auto_pad","NOTSET"),r=t.getInts("dilations",[1,1]),n=t.getInt("group",1),s=t.getInts("kernel_shape",[]),i=t.getInts("pads",[0,0,0,0]),u=t.getInts("strides",[1,1]);return ne({autoPad:e,dilations:r,group:n,kernelShape:s,pads:i,strides:u,...o})},vm=(a,t)=>{if(!a||a.length!==2&&a.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(a[0].dims.length!==4||a[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let o=a[0].dims[1],e=a[1].dims[1]*t.group;if(o!==e)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(a.length===3&&(a[2].dims.length!==1||a[1].dims[0]!==a[2].dims[0]))throw new Error("invalid bias");let r=a[0].dims.length-2;if(t.dilations.length!==r)throw new Error(`dilations should be ${r}D`);if(t.strides.length!==r)throw new Error(`strides should be ${r}D`);if(t.pads.length!==r*2)throw new Error(`pads should be ${r*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==a[1].dims.length-2)throw new Error("invalid kernel shape");if(a[0].type!=="float32"||a[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(a.length===3&&a[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}});var wm,_m,Om,pf,Im,Sm,Am,Pm,Em,Dm,df,Lm,hf=$(()=>{"use strict";We();Oe();ue();Dr();wm=(a,t,o,e,r,n)=>(a-1)*t+o+(e-1)*r+1-n,_m=(a,t,o,e,r)=>{let n=Math.floor(a/2);t==="SAME_UPPER"?(o[e]=n,o[r]=a-n):t==="SAME_LOWER"&&(o[e]=a-n,o[r]=n)},Om=(a,t,o,e,r,n,s,i)=>{let u=a.length-2,l=i.length===0;for(let f=0;f<u;++f){let h=l?a[f+2]*n[f]:i[f],m=wm(a[f+2],n[f],r[f],t[f],o[f],h);_m(m,e,r,f,f+u),l&&i.push(n[f]*(a[f+2]-1)+s[f]+(t[f]-1)*o[f]+1-r[f]-r[f+u])}},pf=(a,t,o)=>(Lm(t,o),Im(a,t,o)),Im=(a,t,o)=>{let e=Dm(o,t);return[Em(a,t,e)]},Sm=(a,t)=>({name:"ConvTranspose",inputNames:a?["X","W","B"]:["X","W"],inputTypes:a?[0,0,0]:[0,0],cacheHint:t}),Am=(a,t,o,e)=>{let n=t.length>2?"getB(output_channel)":"0.0",s=t[0].dims,i=t[1].dims,u=i[1],l=i[0]/e.group,f=[t[0].dims[0],t[1].dims[1]*e.group,...e.outputShape],h=K(a.session.backend.glContext.version),{activationFunction:m,applyActivation:v}=zt(e),I=`
  const ivec2 strides = ivec2(${e.strides[0]}, ${e.strides[1]});
  const ivec2 pads = ivec2(${e.pads[0]}, ${e.pads[1]});
  ${m}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${u};
    int wOutChannel = output_channel - group_id * ${u};

    float value = ${n};
    for (int inChannelOffset = 0; inChannelOffset < ${l}; inChannelOffset++) {
      int input_channel = group_id * ${l} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${i[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${i[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${e.dilations[0]}, wHOff * ${e.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${s[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${s[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${v}
    ${h.output} = vec4(value, .0, .0, .0);
  }
`;return{...o,output:{dims:f,type:t[0].type,textureType:0},shaderSource:I,hasMain:!0}},Pm=(a,t,o)=>{let e=Sm(t.length>2,o.cacheKey);return{...e,get:()=>Am(a,t,e,o)}},Em=(a,t,o)=>a.run(Pm(a,t,o),t),Dm=(a,t)=>{let o=a.kernelShape.slice();if(a.kernelShape.length===0)for(let i=2;i<t[1].dims.length;++i)o.push(t[1].dims[i]);let e=a.pads.slice(),r=a.outputShape.slice(),n=t[0].dims;Om(n,o,a.dilations,a.autoPad,e,a.strides,a.outputPadding,r);let s=Object.assign({},a);return Object.assign(s,{kernelShape:o,pads:e,outputShape:r,cacheKey:a.cacheKey}),s},df=a=>{let t=a.attributes,o=tn(t),e=t.getString("auto_pad","NOTSET"),r=t.getInts("dilations",[1,1]),n=t.getInt("group",1),s=t.getInts("kernel_shape",[]),i=t.getInts("output_padding",[0,0]),u=t.getInts("output_shape",[]),l=t.getInts("pads",[0,0,0,0]),f=t.getInts("strides",[1,1]);return ne({autoPad:e,dilations:r,group:n,kernelShape:s,outputPadding:i,outputShape:u,pads:l,strides:f,...o})},Lm=(a,t)=>{if(!a||a.length!==2&&a.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(a[0].dims.length!==4||a[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let o=a[0].dims[1],e=a[1].dims[0];if(o!==e)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let r=a[1].dims[1]*t.group;if(a.length===3&&(a[2].dims.length!==1||a[2].dims[0]!==r))throw new Error("invalid bias");let n=a[0].dims.length-2;if(t.dilations.length!==n)throw new Error(`dilations should be ${n}D`);if(t.strides.length!==n)throw new Error(`strides should be ${n}D`);if(t.pads.length!==n*2)throw new Error(`pads should be ${n*2}D`);if(t.outputPadding.length!==n)throw new Error(`output_padding should be ${n}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==a[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==a[0].dims.length-2)throw new Error("invalid output shape");if(a[0].type!=="float32"||a[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(a.length===3&&a[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}});var mf,Lr,bf,$m,gf,Cm,Fm,km,Vo=$(()=>{"use strict";We();de();ue();mf={name:"Transpose",inputNames:["A"],inputTypes:[0]},Lr=(a,t,o)=>(km(t),[a.run({...mf,cacheHint:o.cacheKey,get:()=>$m(a,t[0],o.perm)},t)]),bf=a=>ne({perm:a.attributes.getInts("perm",[])}),$m=(a,t,o)=>{let e=t.dims;o=gf(e,o);let r=Cm(e,o),n=e.length,s=`
      ${Fm("perm",o,n)}
      float process(int indices[${n}]) {
        int a[${n}];
        perm(a, indices);
        return _A(a);
      }`;return{...mf,output:{dims:r,type:t.type,textureType:0},shaderSource:s}},gf=(a,t)=>(t&&t.length!==a.length&&(t=[...a.keys()].reverse()),t),Cm=(a,t)=>(t=gf(a,t),W.sortBasedOnPerm(a,t)),Fm=(a,t,o)=>{let e=[];e.push(`void ${a}(out int a[${o}], int src[${o}]) {`);for(let r=0;r<o;++r)e.push(`	a[${t[r]}]=src[${r}];`);return e.push("	}"),e.join(`
`)},km=a=>{if(!a||a.length!==1)throw new Error("Transpose requires 1 input.");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("input should be float tensor")}});var yf,Tf,Bm,xf=$(()=>{"use strict";Vo();yf=(a,t,o)=>{Bm(t);let e=o.blocksize,r=e*e,n=o.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],s=o.mode==="DCR"?[t[0].dims[0],e,e,t[0].dims[1]/r,t[0].dims[2],t[0].dims[3]]:[t[0].dims[0],t[0].dims[1]/r,e,e,t[0].dims[2],t[0].dims[3]],i=a.reshapeUnpacked(t[0],s),u={perm:n,cacheKey:`${n}`},[l]=Lr(a,[i],u),f=[t[0].dims[0],t[0].dims[1]/r,t[0].dims[2]*e,t[0].dims[3]*e];return[a.reshapeUnpacked(l,f)]},Tf=a=>{let t=a.attributes.getInt("blocksize");if(t<1)throw new Error(`blocksize must be >= 1, but got : ${t} for DepthToSpace`);let o=a.attributes.getString("mode","DCR");if(o!=="DCR"&&o!=="CRD")throw new Error(`unrecognized mode: ${o} for DepthToSpace`);return{mode:o,blocksize:t}},Bm=a=>{if(a.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${a.length}`);if(a[0].type==="string"||a[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}});var vf,wf,Nm,_f=$(()=>{"use strict";de();vf=(a,t,o)=>{Nm(t,o);let e=W.flattenShape(t[0].dims,o);return[a.reshapeUnpacked(t[0],e)]},wf=a=>a.attributes.getInt("axis",1),Nm=(a,t)=>{if(!a||a.length!==1)throw new Error("Flatten requires 1 input.");let o=a[0].dims.length;if(o===0)throw new Error("scalar tensor is not supported.");if(t<-o||t>o)throw new Error("Invalid axis");if(a[0].type==="string")throw new Error("string tensor is not supported.")}});var ur,Vn=$(()=>{"use strict";ur=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]});var Of,If,Rm,Mm,Gm,Um,Sf=$(()=>{"use strict";We();Vn();de();ue();Of=(a,t,o)=>(Um(t,o.axis),[a.run(Gm(a,t,o),t)]),If=a=>ne({axis:a.attributes.getInt("axis",0)}),Rm={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Mm=(a,t,o,e)=>{let r=o[0].dims.slice(),n=o[1].dims.slice(),s=new Array(r.length+n.length-1);e=W.normalizeAxis(e,r.length);let i=[];for(let m=0;m<s.length;m++)m<e?(s[m]=r[m],i.push(`inputIdx[${m}] = outputIdx[${m}];`)):m<e+n.length?(s[m]=n[m-e],i.push(`indexDataIdx[${m-e}] = outputIdx[${m}];`)):(s[m]=r[m-n.length+1],i.push(`inputIdx[${m-n.length+1}] = outputIdx[${m}];`));let u=s.length||1,l=r.length,f=n.length||1,h=`
      float process(int outputIdx[${u}]) {
        int inputIdx[${l}];
        int indexDataIdx[${f}];
        indexDataIdx[0] = 0;
        ${i.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${e}] = idx < 0 ? idx + ${r[e]} : idx;
        return _A(inputIdx);
      }`;return{...t,output:{dims:s,type:o[0].type,textureType:0},shaderSource:h}},Gm=(a,t,o)=>{let e={...Rm,cacheHint:o.cacheKey};return{...e,get:()=>Mm(a,e,t,o.axis)}},Um=(a,t)=>{if(!a||a.length!==2)throw new Error("Gather requires 2 inputs.");let o=a[0].dims.length;if(o<1)throw new Error("Invalid input shape.");if(t<-o||t>o-1)throw new Error("Invalid axis.");if(ur.indexOf(a[0].type)===-1)throw new Error("Invaid input type.");if(a[1].type!=="int32"&&a[1].type!=="int16")throw new Error("Invaid input type.")}});var ca,Af,Pf,Ef,Vm,Wm,zm,Df=$(()=>{"use strict";We();de();ue();ca=(a,t,o)=>(zm(t,o),[a.run(Vm(t,o),t)]),Af=(a,t)=>{let o=a.attributes.getInt("transA",0)!==0,e=a.attributes.getInt("transB",0)!==0,r=a.attributes.getFloat("alpha",1),n=a.attributes.getFloat("beta",1);return ne({transA:o,transB:e,alpha:r,beta:n,isOptionalC:t})},Pf=a=>Af(a,!1),Ef=a=>Af(a,!0),Vm=(a,t)=>{let o={name:"Gemm",inputNames:a.length===3?["A","B","C"]:["A","B"],inputTypes:a.length===3?[0,0,0]:[0,0],key:t.cacheKey};return{...o,get:()=>Wm(o,a,t)}},Wm=(a,t,o)=>{let e=t[0].dims.slice(),r=t[1].dims.slice(),[n,s]=Lo.getShapeOfGemmResult(e,o.transA,r,o.transB,t.length===3?t[2].dims:void 0),i=[n,s];if(!i)throw new Error("Can't use gemm on the given tensors");let u=e[e.length-1],l="";o.transA&&(u=e[0]),o.transA&&o.transB?l="value += _A_T(a) * _B_T(b);":o.transA&&!o.transB?l="value += _A_T(a) * _B(b);":!o.transA&&o.transB?l="value += _A(a) * _B_T(b);":!o.transA&&!o.transB&&(l="value += _A(a) * _B(b);");let f=i.length,h=t.length===3?`int c[${t[2].dims.length}];`:"",m=t.length===3?"bcastIndices_C(indices, c);":"",v=t.length===3?"value += beta * _C(c);":"",I=`
      float process(int indices[${f}]) {
          int a[${f}];
          int b[${f}];
          ${h}

          copyVec(indices, a);
          copyVec(indices, b);
          ${m}

          float value = 0.0;
          for (int k=0; k<${u}; ++k) {
              a[${f-1}] = k;
              b[${f-2}] = k;
              ${l}
          }

          value = value * alpha;
          ${v}
          return value;
      }`;return{...a,output:{dims:i,type:t[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:o.alpha},{name:"beta",type:"float",data:o.beta}],shaderSource:I}},zm=(a,t)=>{if(!a)throw new Error("Input is missing");if(t.isOptionalC&&(a.length<2||a.length>3))throw new Error("Invaid input shape.");if(!t.isOptionalC&&a.length!==3)throw new Error("Gemm requires 3 inputs");if(a.length===3&&a[2].dims.length!==1&&a[2].dims.length!==2)throw new Error("Invalid input shape of C");if(a[0].type!=="float32"&&a[0].type!=="float64"||a[1].type!=="float32"&&a[1].type!=="float64"||a.length===3&&a[2].type!=="float32"&&a[2].type!=="float64")throw new Error("Invalid input type.");if(a[0].type!==a[1].type||a.length===3&&a[0].type!==a[2].type)throw new Error("Input types are mismatched")}});var Lf,$f,Hm,jm,qm,Ym,Xm,Cf=$(()=>{"use strict";We();ue();Lf=(a,t,o)=>(Xm(t),[a.run(qm(a,t,o),t)]),$f=a=>{let t=a.attributes.getFloat("scale"),o=a.attributes.getFloats("bias");return ne({scale:t,bias:o})},Hm={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},jm=(a,t,o,e)=>{let r=o[0].dims.slice(),n=r.length,i=`
      ${Ym(e.bias.length)}
      float process(int indices[${n}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{...t,output:{dims:r,type:o[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:e.bias.length,data:e.bias},{name:"scale",type:"float",data:e.scale}],shaderSource:i}},qm=(a,t,o)=>{let e={...Hm,cacheHint:o.cacheKey};return{...e,get:()=>jm(a,e,t,o)}},Ym=a=>{let t=[`float getBias(float bias[${a}], int channel) {`];for(let o=0;o<a;++o)o===0?t.push(`	if (channel == ${o}) { return bias[${o}]; }`):o===a-1?t.push(`	else { return bias[${o}]; }`):t.push(`	else if (channel == ${o}) { return bias[${o}]; }`);return t.push("	}"),t.join(`
`)},Xm=a=>{if(!a||a.length!==1)throw new Error("ImageScaler requires 1 input.");if(a[0].dims.length!==4)throw new Error("Invalid input shape.");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type.")}});var kf,Bf,Ff,Km,Jm,Zm,Qm,eb,tb,Nf=$(()=>{"use strict";Oe();ue();kf=(a,t,o)=>{tb(t);let e=a.run(Jm(t[0]),t);return[a.run(eb(a,t[0],o,e.dims),[t[0],e,t[1],t[2]])]},Bf=a=>a.attributes.getFloat("epsilon",1e-5),Ff={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},Km=(a,t)=>{let o=t.dims.slice(),e=o[1],r=o[2]*o[3],n=[o[0],e],s=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${o[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${o[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${r});
        temp = 0.0;
        for(int a2=0; a2<${o[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${o[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${r});

        return v;
      }`;return{...a,output:{dims:n,type:t.type,textureType:4},shaderSource:s}},Jm=a=>({...Ff,get:()=>Km(Ff,a)}),Zm={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},Qm=(a,t,o,e,r)=>{let n=K(a.session.backend.glContext.version),[s,i]=a.calculateTextureWidthAndHeight(r,4),[u,l]=[s/4,i],f=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${u}, ${l});
        return ${n.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{...t,output:{dims:o.dims,type:o.type,textureType:0},variables:[{name:"epsilon",type:"float",data:e}],shaderSource:f}},eb=(a,t,o,e)=>{let r={...Zm,cacheHint:`${o}`};return{...r,get:()=>Qm(a,r,t,o,e)}},tb=a=>{if(!a||a.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let t=a[0],o=a[1],e=a[2];if(t.dims.length<3||o.dims.length!==1||e.dims.length!==1)throw new Error("Invalid input shape.");if(o.dims[0]!==t.dims[1]||e.dims[0]!==t.dims[1])throw new Error("Input shapes are mismatched.");if(t.type!=="float32"&&t.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||e.type!=="float32"&&e.type!=="float64")throw new Error("Invalid input type.");if(a[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function rb(a,t){let o=a[0].dims[1],e=a[0].dims.length,r=-Math.floor((t.size-1)/2),n=Math.ceil((t.size-1)/2),s=`float(${t.alpha}) / float(${t.size})`,i=`float(${t.bias})`,u=`float(${t.beta})`,l=`
    float process(int indices[${e}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${r}; i <= ${n}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${o}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${i} + ${s} * square_sum, ${u});
    }`;return{...Gf,cacheHint:t.cacheKey,output:{dims:a[0].dims,type:a[0].type,textureType:0},shaderSource:l}}function nb(a,t){return{...Gf,cacheHint:t.cacheKey,get:()=>rb(a,t)}}var Rf,Mf,Gf,ob,Uf=$(()=>{"use strict";We();ue();Rf=(a,t,o)=>(ob(t),[a.run(nb(t,o),t)]),Mf=a=>{let t=a.attributes.getFloat("alpha",1e-4),o=a.attributes.getFloat("beta",.75),e=a.attributes.getFloat("bias",1),r=a.attributes.getInt("size");return ne({alpha:t,beta:o,bias:e,size:r})},Gf={name:"LRN",inputNames:["X"],inputTypes:[0]};ob=a=>{if(!a||a.length!==1)throw new Error("LRN requires 1 input.");if(a[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(a[0].type!=="float32")throw new Error("input should be float type")}});var ib,pa,Vf,Wf,zf,ab,sb,ub,lb,fb,cb,pb,db,Hf=$(()=>{"use strict";We();de();Oe();ue();ib={name:"Pad",inputNames:["A"],inputTypes:[0]},pa=(a,t,o)=>(ub(t),[a.run({...ib,cacheHint:o.cacheKey,get:()=>sb(a,t[0],o)},t)]),Vf=a=>{let t=a.attributes.getString("mode","constant"),o=a.attributes.getFloat("value",0),e=a.attributes.getInts("pads");return ne({mode:t,value:o,pads:e})},Wf=(a,t,o)=>{lb(t);let e=ab(a,t,o);return pa(a,[t[0]],e)},zf=a=>a.attributes.getString("mode","constant"),ab=(a,t,o)=>{if(!a.session.isInitializer(t[1].dataId)||t.length>=3&&!a.session.isInitializer(t[2].dataId))throw new Error("dynamic pad attributes are not allowed");let e=Array.from(t[1].integerData),r=t.length>=3?t[2].floatData[0]:0;return ne({mode:o,pads:e,value:r})},sb=(a,t,o)=>{let e=W.padShape(t.dims.slice(),o.pads),r=e.length,s=`
      ${fb(a,t,o)}
      float process(int[${r}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:e,type:t.type,textureType:0},shaderSource:s}},ub=a=>{if(!a||a.length!==1)throw new Error("Pad requires 1 input");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type.")},lb=a=>{if(!a||a.length!==2&&a.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(a[1].type!=="int32")throw new Error("Invalid input type.");if(a.length>=3&&a[2].type==="string")throw new Error("Invalid input type.")},fb=(a,t,o)=>{let e=K(a.session.backend.glContext.version),[r,n]=a.calculateTextureWidthAndHeight(t.dims,0),s=W.computeStrides(t.dims);switch(o.mode){case"constant":return cb(e,t.dims,s,r,n,o.pads,o.value);case"reflect":return pb(e,t.dims,s,r,n,o.pads);case"edge":return db(e,t.dims,s,r,n,o.pads);default:throw new Error("Invalid mode")}},cb=(a,t,o,e,r,n,s)=>{let i=t.length,u="";for(let l=i-1;l>=0;--l)u+=`
        k = m[${l}] - ${n[l]};
        if (k < 0)  return constant;
        if (k >= ${t[l]}) return constant;
        offset += k * ${o[l]};
        `;return`
      float padA(int m[${i}]) {
        const float constant = float(${s});
        int offset = 0;
        int k = 0;
        ${u}
        vec2 coords = offsetToCoords(offset, ${e}, ${r});
        float value = getColorAsFloat(${a.texture2D}(A, coords));
        return value;
      }
      `},pb=(a,t,o,e,r,n)=>{let s=t.length,i="";for(let u=s-1;u>=0;--u)i+=`
        k = m[${u}] - ${n[u]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(t[u]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${t[u]}) { k = _2n_1 - k; }
        }
        offset += k * ${o[u]};
        `;return`
      float padA(int m[${s}]) {
        int offset = 0;
        int k = 0;
        ${i}
        vec2 coords = offsetToCoords(offset, ${e}, ${r});
        float value = getColorAsFloat(${a.texture2D}(A, coords));
        return value;
      }
      `},db=(a,t,o,e,r,n)=>{let s=t.length,i="";for(let u=s-1;u>=0;--u)i+=`
        k = m[${u}] - ${n[u]};
        if (k < 0)  k = 0;
        if (k >= ${t[u]}) k = ${t[u]-1};
        offset += k * ${o[u]};
      `;return`
      float padA(int m[${s}]) {
        int offset = 0;
        int k = 0;
        ${i}
        vec2 coords = offsetToCoords(offset, ${e}, ${r});
        float value = getColorAsFloat(${a.texture2D}(A, coords));
        return value;
      }
      `}});var qf,Yf,Xf,Kf,Jf,Zf,Qf,ec,tc,hb,jf,rc,zo,nc,Wo,mb,oc=$(()=>{"use strict";We();de();ue();qf=(a,t,o)=>{zo(t);let e={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:o.cacheKey};return[a.run({...e,get:()=>Xf(t,e,!1,o)},t)]},Yf=a=>{let t=a.attributes.getString("auto_pad","NOTSET"),o=a.attributes.getInt("ceil_mode",0),e=a.attributes.getInt("count_include_pad",0)!==0,r=a.attributes.getInts("kernel_shape"),n=a.attributes.getInts("strides",[]),s=a.attributes.getInts("pads",[]);if(o!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return ne({autoPad:t,ceilMode:o,countIncludePad:e,kernelShape:r,strides:n,pads:s})},Xf=(a,t,o,e)=>{let[r,n]=tc(a,e,o),s=W.size(r.kernelShape),i="value += _X(x);",u="";r.countIncludePad?u+=`value /= float(${s});`:u+=`value /= float(${s} - pad);`;let f=`
        ${nc(a[0].dims,r,i,u,"0.0")}
      `;return{...t,output:{dims:n,type:a[0].type,textureType:0},shaderSource:f}},Kf=(a,t,o)=>{zo(t);let e={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${o.countIncludePad}`};return[a.run({...e,get:()=>Xf(t,e,!0,o)},t)]},Jf=a=>{let t=a.attributes.getInt("count_include_pad",0)!==0;return ne({autoPad:"",ceilMode:0,countIncludePad:t,kernelShape:[],strides:[],pads:[]})},Zf=(a,t,o)=>{zo(t);let e={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:o.cacheKey};return[a.run({...e,get:()=>ec(t,e,!1,o)},t)]},Qf=a=>{let t=a.attributes.getString("auto_pad","NOTSET"),o=a.attributes.getInt("ceil_mode",0),e=a.attributes.getInts("kernel_shape"),r=a.attributes.getInts("strides",[]),n=a.attributes.getInts("pads",[]),s=a.attributes.getInt("storage_order",0),i=a.attributes.getInts("dilations",[]);if(s!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(o!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return ne({autoPad:t,ceilMode:o,countIncludePad:!1,kernelShape:e,strides:r,pads:n,storageOrder:s,dilations:i})},ec=(a,t,o,e)=>{let[r,n]=tc(a,e,o),s=`
      value = max(_X(x), value);
    `,i="",l=`
      ${nc(a[0].dims,r,s,i,"-1e5")}
    `;return{...t,output:{dims:n,type:a[0].type,textureType:0},shaderSource:l}},tc=(a,t,o)=>{let e=a[0].dims.slice(),r=Object.hasOwnProperty.call(t,"dilations"),n=t.kernelShape.slice(),s=t.strides.slice(),i=r?t.dilations.slice():[],u=t.pads.slice();Ir.adjustPoolAttributes(o,e,n,s,i,u);let l=Ir.computePoolOutputShape(o,e,s,i,n,u,t.autoPad),f=Object.assign({},t);return r?Object.assign(f,{kernelShape:n,strides:s,pads:u,dilations:i,cacheKey:t.cacheKey}):Object.assign(f,{kernelShape:n,strides:s,pads:u,cacheKey:t.cacheKey}),[f,l]},hb={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},jf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},rc=(a,t)=>(zo(t),[a.run({...jf,get:()=>ec(t,jf,!0,hb)},t)]),zo=a=>{if(!a||a.length!==1)throw new Error("Pool ops requires 1 input.");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type.")},nc=(a,t,o,e,r)=>{let n=a.length;if(t.kernelShape.length<=2){let s=t.kernelShape[t.kernelShape.length-1],i=t.strides[t.strides.length-1],u=t.pads[t.pads.length/2-1],l=t.pads[t.pads.length-1],f=a[n-1],h="",m="",v="";if(u+l!==0?h=`
          for (int i = 0; i < ${s}; i++) {
            x[${n} - 1] = indices[${n} - 1] * ${i} - ${u} + i;
            if (x[${n} - 1] < 0 || x[${n} - 1] >= ${f}) {
              pad++;
              continue;
            }
            ${o}
          }`:h=`
          for (int i = 0; i < ${s}; i++) {
            x[${n} - 1] = indices[${n} - 1] * ${i} - ${u} + i;
            ${o}
          }`,t.kernelShape.length===2){let _=t.kernelShape[t.kernelShape.length-2],A=t.strides[t.strides.length-2],L=t.pads[t.pads.length/2-2],F=t.pads[t.pads.length-2],M=a[n-2];L+F!==0?m=`
            for (int j = 0; j < ${_}; j++) {
              x[${n} - 2] = indices[${n} - 2] * ${A} - ${L} + j;
              if (x[${n} - 2] < 0 || x[${n} - 2] >= ${M}) {
                pad+= ${s};
                continue;
              }
          `:m=`
            for (int j = 0; j < ${_}; j++) {
              x[${n} - 2] = indices[${n} - 2] * ${A} - ${L} + j;
            `,v=`
          }
        `}return`
        float process(int indices[${n}]) {
          int x[${n}];
          copyVec(indices, x);

          float value = ${r};
          int pad = 0;
          ${m}
          ${h}
          ${v}
          ${e}
          return value;
        }
      `}else{let s=W.size(t.kernelShape),i=W.computeStrides(t.kernelShape),u=i.length,l=t.pads.length,f=mb(u),h=Wo(a,"inputDims"),m=Wo(t.pads,"pads"),v=Wo(i,"kernelStrides"),I=Wo(t.strides,"strides"),_=t.pads.reduce((F,M)=>F+M),A="";return _?A=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${o}
          }`:A=`
          }
          ${o}
        `,`
        ${f}
        float process(int indices[${n}]) {
          int x[${n}];
          copyVec(indices, x);
          int offset[${u}];
          int pads[${l}];
          int inputDims[${n}];
          int kernelStrides[${u}];
          int strides[${u}];
          ${m}
          ${h}
          ${I}
          ${v}

          float value = ${r};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${s}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${n} - ${u}; j < ${n}; j++) {
              x[j] = indices[j] * strides[j - ${n} + ${u}]
                + offset[j - ${n} + ${u}] - pads[j - 2];
              ${A}
          }
          ${e}

          return value;
        }
      `}},Wo=(a,t)=>{let o="";for(let e=0;e<a.length;e++)o+=`
      ${t}[${e}] = ${a[e]};
    `;return o},mb=a=>`
  void offsetToIndices(int offset, int[${a}] strides, out int[${a}] indices) {
    if (${a} == 0) {
      return;
    }
    for (int i = 0; i < ${a} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${a} - 1] = offset;
  }`});var $r,lr,bb,gb,ic,ac,sc,uc,lc,fc,cc,pc=$(()=>{"use strict";We();Vn();de();ue();$r=(a,t,o,e,r)=>{gb(t);let n={name:e,inputNames:["A"],inputTypes:[0]};return[a.run({...n,cacheHint:o.cacheKey,get:()=>bb(a,t,o,e,r,n)},t)]},lr=a=>{let t=a.attributes.getInts("axes",[]),o=a.attributes.getInt("keepdims",1)===1;return ne({axes:t,keepDims:o})},bb=(a,t,o,e,r,n)=>{let s=[],i=t[0].dims.length||1,u=[],l=W.normalizeAxes(o.axes,t[0].dims.length),f=r(t,l),h=f[1];for(let I=0;I<t[0].dims.length;I++)l.indexOf(I)>=0||l.length===0?(o.keepDims&&s.push(1),h=`
          for(int j${I} = 0; j${I} < ${t[0].dims[I]}; j${I}++) {
            inputIdx[${I}] = j${I};
            ${h}
          }`):(u.push(`inputIdx[${I}] = outputIdx[${s.length}];`),s.push(t[0].dims[I]));let v=`
      float process(int outputIdx[${s.length||1}]) {
        float value;                 // final result
        int inputIdx[${i}];      // addressing input data
        ${u.join(`
`)}
        ${f[0]}       // init ops for reduce max/min
        ${h}
        ${f[2]}       // final computation for reduce mean
        return value;
      }`;return{...n,output:{dims:s,type:t[0].type,textureType:0},shaderSource:v}},gb=a=>{if(!a||a.length!==1)throw new Error("Reduce op requires 1 input.");if(ur.indexOf(a[0].type)===-1)throw new Error("Invalid input type.")},ic=(a,t,o)=>$r(a,t,o,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),ac=(a,t,o)=>$r(a,t,o,"ReduceMean",(r,n)=>{let s=1;for(let i=0;i<r[0].dims.length;i++)(n.indexOf(i)>=0||n.length===0)&&(s*=r[0].dims[i]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${s}.;`]}),sc=(a,t,o)=>$r(a,t,o,"ReduceMax",(r,n)=>{let s=[];for(let i=0;i<r[0].dims.length;i++)(n.indexOf(i)>=0||n.length===0)&&s.push(`inputIdx[${i}] = 0;`);return[`${s.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),uc=(a,t,o)=>$r(a,t,o,"ReduceMin",(r,n)=>{let s=[];for(let i=0;i<r[0].dims.length;i++)(n.indexOf(i)>=0||n.length===0)&&s.push(`inputIdx[${i}] = 0;`);return[`${s.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),lc=(a,t,o)=>$r(a,t,o,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),fc=(a,t,o)=>$r(a,t,o,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),cc=(a,t,o)=>$r(a,t,o,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])});var dc,hc=$(()=>{"use strict";de();dc=(a,t)=>{let o=W.calculateReshapedDims(t[0].dims,t[1].integerData);return a.session.pack?[a.reshapePacked(t[0],o)]:[a.reshapeUnpacked(t[0],o)]}});var mc,da,bc,gc,Wn,yb,ha,Ho,ma=$(()=>{"use strict";We();Oe();ue();mc={name:"Upsample",inputNames:["X"],inputTypes:[0]},da=(a,t,o)=>(ha(t,o),[a.run({...mc,cacheHint:o.cacheKey,get:()=>yb(a,t,o)},t)]),bc=a=>Wn(a,7),gc=a=>Wn(a,9),Wn=(a,t)=>{let o=t>=10,e=a.attributes.getString("mode","nearest");if(e!=="nearest"&&e!=="linear"&&(t<11||e!=="cubic"))throw new Error(`unrecognized mode: ${e}`);let r=[];t<9&&(r=a.attributes.getFloats("scales"),Ho(r,e,o));let n=a.attributes.getFloat("extrapolation_value",0),s=t>10?a.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(s)===-1)throw new Error(`coordinate_transform_mode '${s}' is not supported`);let i=s==="tf_crop_and_resize",u=i,l=e==="nearest"&&t>=11?a.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(l)===-1)throw new Error(`nearest_mode '${l}' is not supported`);let f=a.attributes.getFloat("cubic_coeff_a",-.75),h=a.attributes.getInt("exclude_outside",0)!==0;if(h&&e!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let m=t<11?!0:e==="nearest"&&s==="asymmetric"&&l==="floor",v=0,I=0,_=0;return t>10?a.inputs.length>2?(v=1,I=2,_=3):(I=1,_=2):t===9&&(I=1),ne({opset:t,isResize:o,mode:e,scales:r,extrapolationValue:n,coordinateTransformMode:s,useExtrapolation:u,needRoiInput:i,nearestMode:l,cubicCoefficientA:f,excludeOutside:h,useNearest2xOptimization:m,roiInputIdx:v,scalesInputIdx:I,sizesInputIdx:_})},yb=(a,t,o)=>{let e=K(a.session.backend.glContext.version),[r,n]=a.calculateTextureWidthAndHeight(t[0].dims,0),s=t[0].dims.map((_,A)=>Math.floor(_*o.scales[A])),[i,u]=a.calculateTextureWidthAndHeight(s,0),l=s.length,f=new Array(l),h=new Array(l),m=`
      int output_pitches[${l}];
      int input_pitches[${l}];
      `;for(let _=l-1;_>=0;_--)f[_]=_===l-1?1:f[_+1]*s[_+1],h[_]=_===l-1?1:h[_+1]*t[0].dims[_+1],m+=`
        output_pitches[${_}] = ${f[_]};
        input_pitches[${_}] = ${h[_]};
        `;let v=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${r}, ${n});
        float value = getColorAsFloat(${e.texture2D}(X, coords));
        return value;
      }
      `,I=o.mode==="nearest"?`
    ${v}
    float process(int indices[${l}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${i}, ${u});

      ${m}

      int d, m;
      for (int dim = 0; dim < ${l}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:l===4?`
    ${v}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${i}, ${u});

      ${m}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${t[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${v}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${i}, ${u});

      ${m}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${t[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...mc,output:{dims:s,type:t[0].type,textureType:0},shaderSource:I,variables:[{name:"scales",type:"int",arrayLength:o.scales.length,data:o.scales.map(_=>Math.ceil(_))}]}},ha=(a,t)=>{if(!a||t.opset<9&&a.length!==1||t.opset>=9&&t.opset<11&&a.length!==2||t.opset>=11&&a.length<2)throw new Error("invalid inputs.");if(t.scales.length>0&&a[0].dims.length!==t.scales.length)throw new Error("Invalid input shape.");if(a[0].type==="string")throw new Error("Invalid input tensor types.")},Ho=(a,t,o)=>{if(o){for(let e of a)if(e<=0)throw new Error("Scale value should be greater than 0.")}else for(let e of a)if(e<1)throw new Error("Scale value should be greater than or equal to 1.");if((t==="linear"||t==="cubic")&&a.length!==2&&(a.length!==4||a[0]!==1||a[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${o?"Resize":"Upsample"} opeartor.`)}});var ba,ga,yc,Tc,Tb,xb,vb,wb,xc=$(()=>{"use strict";Oe();ue();Vt();Er();ma();ba={name:"Resize",inputNames:["A"],inputTypes:[2]},ga=(a,t,o)=>(ha(t,o),[a.run({...ba,cacheHint:o.cacheKey,get:()=>Tb(a,t,o)},t)]),yc=a=>Wn(a,10),Tc=a=>Wn(a,11),Tb=(a,t,o)=>{let e=K(a.session.backend.glContext.version),[r,n]=xb(t,o);if(r.every(M=>M===1)&&o.coordinateTransformMode!=="tf_crop_and_resize")return{...ba,output:{dims:n,type:t[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${e.texture2D}(X, TexCoords);
                    ${e.output} = v;
                }`};let i=n.length;if(i<2)throw new Error(`output dimension should be at least 2, but got ${i}`);let u=n[i-2],l=n[i-1],f=t[0].dims;if(i!==f.length)throw new Error(`output dimension should match input ${f.length}, but got ${i}`);let h=f[i-2],m=f[i-1],v=r[i-2],I=r[i-1],_="";if(o.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${o.mode}'`);switch(o.coordinateTransformMode){case"asymmetric":_=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":_=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":_=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${l}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${u}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${l}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${u}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":_=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${l}.0 - 1.0, ${u}.0 - 1.0, ${l}.0 - 1.0,
                            ${u}.0 - 1.0);
                        vec4 original = vec4(${m}.0 - 1.0, ${h}.0 - 1.0, ${m}.0 - 1.0,
                            ${h}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${o.coordinateTransformMode}'`)}let A=et(i),L=Wt(),F=`
            const vec2 inputWH = vec2(${h}.0, ${m}.0);
            const vec4 scaleWHWH = vec4(float(${v}), float(${I}), float(${v}), float(${I}));
            ${L}
            ${_}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${A} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${u-1};
                bool hasNextCol = rc.z < ${l-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${e.output} = vec4(newValue);
            }
        `;return{...ba,output:{dims:n,type:t[0].type,textureType:2},hasMain:!0,shaderSource:F}},xb=(a,t)=>{let e=a[0].dims,r=t.scales,n;if(r.length===0){let i=a[t.scalesInputIdx];if(i&&i.size!==0){if(a[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");r=vb(i,t.mode,t.isResize)}else{let u=a[t.sizesInputIdx];if(!u||u.size===0)throw new Error("Either scales or sizes MUST be provided as input.");n=Array.from(u.integerData),r=wb(n,e,t.mode,t.isResize)}}else if(a[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let s=n||e.map((i,u)=>Math.floor(i*r[u]));return[r,s]},vb=(a,t,o)=>{let e=Array.from(a.floatData);return Ho(e,t,o),e},wb=(a,t,o,e)=>{let r=t.length,n=new Array(r);for(let s=0,i=r;s<i;s++)if(t[s]===0){if(a[s]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");n[s]=1}else n[s]=a[s]/t[s];return Ho(n,o,e),n}});var vc,_b,wc=$(()=>{"use strict";Pr();vc=(a,t)=>(_b(t),[new ke([t[0].dims.length],"int32",void 0,void 0,new Int32Array(t[0].dims))]),_b=a=>{if(!a||a.length!==1)throw new Error("Shape requires 1 input.")}});var ya,_c,Oc,Ic,Ob,Sc,Ib,Sb,Ac=$(()=>{"use strict";We();Vn();de();ue();ya={name:"Slice",inputNames:["A"],inputTypes:[0]},_c=(a,t,o)=>(Ob(t),[a.run({...ya,cacheHint:o.cacheKey,get:()=>Ic(a,t[0],o)},t)]),Oc=a=>{let t=a.attributes.getInts("starts"),o=a.attributes.getInts("ends"),e=a.attributes.getInts("axes",[]);return ne({starts:t,ends:o,axes:e})},Ic=(a,t,o)=>{let e=o.axes.length===0?t.dims.slice(0).map((h,m)=>m):o.axes,r=W.normalizeAxes(e,t.dims.length),n=o.starts.map((h,m)=>h>t.dims[r[m]]-1?t.dims[r[m]]:W.normalizeAxis(h,t.dims[r[m]])),s=o.ends.map((h,m)=>h>t.dims[r[m]]-1?t.dims[r[m]]:W.normalizeAxis(h,t.dims[r[m]])),i=t.dims.slice(),u=[];for(let h=0;h<r.length;h++)i[r[h]]=s[h]-n[h],n[h]>0&&u.push(`outputIdx[${r[h]}] += ${n[h]};`);let f=`
      float process(int outputIdx[${i.length}]) {
        ${u.join(`
      `)}
        return _A(outputIdx);
      }`;return{...ya,output:{dims:i,type:t.type,textureType:0},shaderSource:f}},Ob=a=>{if(!a||a.length!==1)throw new Error("Slice requires 1 input.");if(ur.indexOf(a[0].type)===-1)throw new Error("Invalid input type.")},Sc=(a,t)=>{Sb(t);let o=Ib(a,t);return[a.run({...ya,cacheHint:o.cacheKey,get:()=>Ic(a,t[0],o)},[t[0]])]},Ib=(a,t)=>{if(!a.session.isInitializer(t[1].dataId)||!a.session.isInitializer(t[2].dataId)||t.length>=4&&!a.session.isInitializer(t[3].dataId)||t.length>=5&&!a.session.isInitializer(t[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(t.length>=5&&t[4].integerData.some(s=>s!==1))throw new Error("currently non-1 steps is not supported for Slice");let o=Array.from(t[1].integerData),e=Array.from(t[2].integerData),r=t.length>=4?Array.from(t[3].integerData):[],n=`${r};${o};${e}`;return{starts:o,ends:e,axes:r,cacheKey:n}},Sb=a=>{if(!a||a.length<3||a.length>5)throw new Error("Invalid input number.");if(a[1].type!=="int32"||a[1].dims.length!==1)throw new Error("Invalid input type.");if(a[2].type!=="int32"||a[2].dims.length!==1)throw new Error("Invalid input type.");if(a.length>=4&&(a[3].type!=="int32"||a[3].dims.length!==1))throw new Error("Invalid input type.");if(a.length>=5&&(a[4].type!=="int32"||a[4].dims.length!==1))throw new Error("Invalid input type.")}});var Pc,Ec,Dc,Lc,$c,Cc,Fc,kc,Ab,Pb,Eb,Bc,Nc=$(()=>{"use strict";We();de();Oe();ue();Vo();Pc={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Ec={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Dc={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Lc=(a,t,o)=>{Bc(t);let e=t[0].dims.slice(),r=W.normalizeAxis(o.axis,e.length),n=W.sizeToDimension(e,r),s=W.sizeFromDimension(e,r);return kc(a,t,o,n,s)},$c=a=>ne({axis:a.attributes.getInt("axis",1)}),Cc=a=>ne({axis:a.attributes.getInt("axis",-1)}),Fc=(a,t,o)=>{Bc(t);let e=t[0].dims.slice(),r=W.normalizeAxis(o.axis,e.length),n=e.length,s=r!==n-1,i=[],u=[],l=[],f;s&&(u=Array.from({length:n}).map((I,_)=>_),u[r]=n-1,u[n-1]=r,u.map(I=>i.push(e[I])),f=ne({perm:u}),l=Lr(a,t,f));let h=s?W.sizeToDimension(i,n-1):W.sizeToDimension(e,n-1),m=s?W.sizeFromDimension(i,n-1):W.sizeFromDimension(e,n-1),v=kc(a,s?l:t,o,h,m);return s?Lr(a,v,f):v},kc=(a,t,o,e,r)=>{let n=Ab(a,t[0],e,r,[e]),s=a.run({...Pc,cacheHint:o.cacheKey,get:()=>n},t),i=Pb(a,t[0],e,r,n.output.dims,[e]),u=a.run({...Ec,cacheHint:o.cacheKey,get:()=>i},[t[0],s]),l=Eb(a,t[0],e,r,n.output.dims,i.output.dims);return[a.run({...Dc,cacheHint:o.cacheKey,get:()=>l},[t[0],s,u])]},Ab=(a,t,o,e,r)=>{let[n,s]=a.calculateTextureWidthAndHeight(t.dims,0),i=r.length;if(o<1||e<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(r.length!==1)throw new Error("Dimensionality of the output should be 1");if(r[0]!==o)throw new Error("Shape of the output should be equal to logical row count");let u=K(a.session.backend.glContext.version),l=`
      float process(int[${i}] indices) {
        int logical_row_start_offset = indices[0] * ${e};

        float max = getColorAsFloat(${u.texture2D}(A, offsetToCoords(logical_row_start_offset, ${n},
        ${s} )));
        for(int i=1; i<${e}; ++i)
        {
          float current = getColorAsFloat(${u.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${n}, ${s})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{...Pc,output:{dims:r,type:t.type,textureType:0},shaderSource:l}},Pb=(a,t,o,e,r,n)=>{let[s,i]=a.calculateTextureWidthAndHeight(t.dims,0),u=n.length;if(o<1||e<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(n.length!==1)throw new Error("Dimensionality of the output should be 1");if(n[0]!==o)throw new Error("Shape of the output should be equal to logical row count");if(r.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(r[0]!==o)throw new Error("Shape of the intermediate results should be equal to logical row count");let l=K(a.session.backend.glContext.version),f=`
      float process(int[${u}] indices) {
        int logical_row_start_offset = indices[0] * ${e};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${e}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${s}, ${i}))) - max);
        }

        return norm_factor;
      }`;return{...Ec,output:{dims:n,type:t.type,textureType:0},shaderSource:f}},Eb=(a,t,o,e,r,n)=>{let[s,i]=a.calculateTextureWidthAndHeight(t.dims,0),u=t.dims.length;if(o<1||e<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(r.length!==1||n.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(r[0]!==o||n[0]!==o)throw new Error("Shape of the intermediate results should be equal to logical row count");let l=`
      float process(int[${u}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${s}, ${i});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${e};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...Dc,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:l}},Bc=a=>{if(!a||a.length!==1)throw new Error("Softmax requires 1 input.");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type")}});var Rc,Mc,Gc,Db,Lb,$b,Uc=$(()=>{"use strict";We();de();ue();Rc={name:"Split",inputNames:["A"],inputTypes:[0]},Mc=(a,t,o)=>{$b(t);let e=W.normalizeAxis(o.axis,t[0].dims.length),r=Db(a,t,e,o),n=[];for(let s=0;s<r;++s)n.push(a.run({...Rc,cacheHint:`${o.cacheKey};${s}`,get:()=>Lb(a,t[0],o,e,s)},t));return n},Gc=a=>{let t=a.attributes.getInt("axis",0),o=a.attributes.getInts("split",[]),e=a.outputs.length;return ne({axis:t,split:o,numOutputs:e})},Db=(a,t,o,e)=>{let[,r]=Bn.splitShape(t[0].dims,o,e.split,e.numOutputs);return r.length},Lb=(a,t,o,e,r)=>{let[n,s]=Bn.splitShape(t.dims,e,o.split,o.numOutputs),i=s[r],u=n[r],f=`
      float process(int indices[${u.length}]) {
        indices[${e}] += ${i};
        return _A(indices);
      }
    `;return{...Rc,cacheHint:`${o.cacheKey}:${r}`,output:{dims:u,type:t.type,textureType:0},shaderSource:f}},$b=a=>{if(!a||a.length!==1)throw new Error("Split requires one input.");if(a[0].type!=="int8"&&a[0].type!=="uint8"&&a[0].type!=="int16"&&a[0].type!=="uint16"&&a[0].type!=="int32"&&a[0].type!=="uint32"&&a[0].type!=="float32"&&a[0].type!=="float64"&&a[0].type!=="bool")throw new Error("Invalid input type.")}});var Ta,Vc,Wc,Cb,Fb,zc=$(()=>{"use strict";de();Ta=(a,t,o)=>{Cb(t);let e=W.squeezeShape(t[0].dims,o);return[a.reshapeUnpacked(t[0],e)]},Vc=(a,t)=>(Fb(t),Ta(a,[t[0]],Array.from(t[1].integerData))),Wc=a=>a.attributes.getInts("axes"),Cb=a=>{if(!a||a.length!==1)throw new Error("Squeeze requires 1 input.");if(a[0].type==="string")throw new Error("invalid input tensor types.")},Fb=a=>{if(!a||a.length!==2)throw new Error("Squeeze requires 2 inputs.");if(a[1].type!=="int32")throw new Error("Invalid input type.")}});var Hc,kb,Bb,jc=$(()=>{"use strict";Oe();ue();Hc=(a,t)=>{Bb(t);let o={name:"Sum",inputNames:t.map((r,n)=>`X${n}`),inputTypes:new Array(t.length).fill(0)};return[a.run({...o,get:()=>kb(a,t,o)},t)]},kb=(a,t,o)=>{let e=K(a.session.backend.glContext.version),r=t[0].dims.slice(),s=`
      void main() {
        vec4 result = ${t.map((i,u)=>`${e.texture2D}(X${u},TexCoords)`).join(" + ")};
        ${e.output} = result;
      }
    `;return{...o,output:{dims:r,type:t[0].type,textureType:0},hasMain:!0,shaderSource:s}},Bb=a=>{if(!a||a.length===0)throw new Error("Sum requires inputs.");let t=a[0].dims.length;for(let o=1;o<a.length;o++){if(t!==a[o].dims.length)throw new Error("Input shapes are mismatched.");for(let e=0;e<t;e++)if(a[0].dims[e]!==a[o].dims[e])throw new Error("Input shapes are not matched.")}if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type.");for(let o=1;o<a.length;o++)if(a[0].type!==a[o].type)throw new Error("Input types are not matched.")}});var qc,Nb,Rb,Yc=$(()=>{"use strict";Vn();ue();qc=(a,t)=>{Rb(t);let o={name:"Tile",inputNames:["A"],inputTypes:[0]};return[a.run({...o,get:()=>Nb(a,t,o)},t)]},Nb=(a,t,o)=>{let e=t[0].dims.slice(),r=new Array(e.length),n=[];for(let u=0;u<e.length;u++)r[u]=e[u]*t[1].numberData[u],n.push(`inputIdx[${u}] = int(mod(float(outputIdx[${u}]), ${e[u]}.));`);let s=r.length,i=`
      float process(int outputIdx[${s}]) {
        int inputIdx[${s}];
        ${n.join(`
`)}
        return _A(inputIdx);
      }
    `;return{...o,output:{dims:r,type:t[0].type,textureType:0},shaderSource:i}},Rb=a=>{if(!a||a.length!==2)throw new Error("Tile requires 2 input.");if(a[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(a[1].dims[0]!==a[0].dims.length)throw new Error("Invalid input shape.");if(ur.indexOf(a[0].type)===-1)throw new Error("Invalid input type.");if(a[1].type!=="int32"&&a[1].type!=="int16")throw new Error("Invalid repeat type.")}});var xa,Xc,Kc,Mb,Gb,Jc=$(()=>{"use strict";de();xa=(a,t,o)=>{Mb(t);let e=W.unsqueezeShape(t[0].dims,o);return[a.reshapeUnpacked(t[0],e)]},Xc=(a,t)=>(Gb(t),xa(a,[t[0]],Array.from(t[1].integerData))),Kc=a=>a.attributes.getInts("axes"),Mb=a=>{if(!a||a.length!==1)throw new Error("Unsqueeze requires 1 input.");if(a[0].type==="string")throw new Error("invalid input tensor types.")},Gb=a=>{if(!a||a.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(a[1].type!=="int32")throw new Error("Invalid input type.")}});var Zc,Qc=$(()=>{"use strict";ul();vl();Ol();Dl();Mo();hf();xf();_f();Sf();Df();Cf();Nf();Uf();Go();Hf();oc();pc();hc();xc();wc();Ac();Nc();Uc();zc();jc();Yc();Vo();na();Jc();ma();Zc=[["Abs","","6+",Ll],["Acos","","7+",$l],["Add","","7+",ll],["And","","7+",fl],["Asin","","7+",Cl],["Atan","","7+",Fl],["AveragePool","","7+",qf,Yf],["BatchNormalization","","7+",al,sl],["Cast","","6+",wl,_l],["Ceil","","6+",Nl],["Clip","","6-10",ta,kl],["Clip","","11+",Bl],["Concat","","4+",Al,El],["Conv","","1+",la,fa],["ConvTranspose","","1+",pf,df],["Cos","","7+",Rl],["Div","","7+",cl],["Dropout","","7+",ra],["DepthToSpace","","1+",yf,Tf],["Equal","","7+",pl],["Elu","","6+",Ml,Gl],["Exp","","6+",Ul],["Flatten","","1+",vf,wf],["Floor","","6+",Vl],["FusedConv","com.microsoft","1+",la,fa],["Gather","","1+",Of,If],["Gemm","","7-10",ca,Pf],["Gemm","","11+",ca,Ef],["GlobalAveragePool","","1+",Kf,Jf],["GlobalMaxPool","","1+",rc],["Greater","","7+",dl],["Identity","","1+",ra],["ImageScaler","","1+",Lf,$f],["InstanceNormalization","","6+",kf,Bf],["LeakyRelu","","6+",Wl,zl],["Less","","7+",hl],["LRN","","1+",Rf,Mf],["Log","","6+",Hl],["MatMul","","1+",of,af],["MaxPool","","1+",Zf,Qf],["Mul","","7+",ml],["Neg","","6+",jl],["Not","","1+",ql],["Or","","7+",bl],["Pad","","2-10",pa,Vf],["Pad","","11+",Wf,zf],["Pow","","7+",gl],["PRelu","","7+",yl],["ReduceLogSum","","1+",fc,lr],["ReduceMax","","1+",sc,lr],["ReduceMean","","1+",ac,lr],["ReduceMin","","1+",uc,lr],["ReduceProd","","1+",lc,lr],["ReduceSum","","1-12",ic,lr],["ReduceSumSquare","","1+",cc,lr],["Relu","","6+",Yl],["Reshape","","5+",dc],["Resize","","10",ga,yc],["Resize","","11+",ga,Tc],["Shape","","1+",vc],["Sigmoid","","6+",Xl],["Sin","","7+",Kl],["Slice","","10+",Sc],["Slice","","1-9",_c,Oc],["Softmax","","1-12",Lc,$c],["Softmax","","13+",Fc,Cc],["Split","","2-12",Mc,Gc],["Sqrt","","6+",Jl],["Squeeze","","1-12",Ta,Wc],["Squeeze","","13+",Vc],["Sub","","7+",Tl],["Sum","","6+",Hc],["Tan","","7+",Zl],["Tanh","","6+",Ql],["Tile","","6+",qc],["Transpose","","1+",Lr,bf],["Upsample","","7-8",da,bc],["Upsample","","9",da,gc],["Unsqueeze","","1-12",xa,Kc],["Unsqueeze","","13+",Xc],["Xor","","7+",xl]]});function tp(a){let t={},o;for(;(o=ep.exec(a))!==null;){let e=o[3].split(",").map(r=>{let n=r.trim().split(" ");return n&&n.length===2?{type:n[0],name:n[1]}:null}).filter(r=>r!==null);t[o[2]]={params:e,body:o[4]}}for(let e in t){let r=Ub.replace("__FUNC__",e),n=new RegExp(r,"gm");for(;(o=n.exec(a))!==null;){let s=o[1],i=o[2],u=o[3].split(","),l=s?`${s} ${i};`:"",f=t[e].body,h="";t[e].params.forEach((v,I)=>{v&&(h+=`${v.type} ${v.name} = ${u[I]};
`)}),f=`${h}
 ${f}`,f=f.replace("return",`${i} = `);let m=`
      ${l}
      {
        ${f}
      }
      `;a=a.replace(o[0],m)}}return a=a.replace(ep,""),a}var ep,Ub,rp=$(()=>{"use strict";ep=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Ub="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function nn(a,t){let o=[],e=[],r=t!=null&&Array.isArray(t)&&t.length===0,n=t==null||r?null:Vb(t,a).sort(),s=0;for(let i=0;i<a.length;++i){if(n!=null){if(n[s]===i&&a[i]!==1)throw new Error(`Can't squeeze axis ${i} since its dim '${a[i]}' is not 1`);(n[s]==null||n[s]>i)&&a[i]===1&&(o.push(a[i]),e.push(i)),n[s]<=i&&s++}a[i]!==1&&(o.push(a[i]),e.push(i))}return{newShape:o,keptDims:e}}function Vb(a,t){let o=t.length;return a=a==null?t.map((e,r)=>r):[].concat(a),Jr(a.every(e=>e>=-o&&e<o),()=>`All values in axis param must be in range [-${o}, ${o}) but got axis ${a}`),Jr(a.every(Wb),()=>`All values in axis param must be integers but got axis ${a}`),a.map(e=>e<0?o+e:e)}function Wb(a){return a%1===0}function zb(a){if(a.length===0)return 1;let t=a[0];for(let o=1;o<a.length;o++)t*=a[o];return t}function np(a){let t=Math.ceil(Math.sqrt(a));return[t,Math.ceil(a/t)]}var jo,va=$(()=>{"use strict";ht();de();jo=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,o){let e=this.computeTexture(t,o);return o&&o.isPacked&&(e[0]/=2,e[1]/=2),o&&o.reverseWH?[e[1],e[0]]:e}computeTexture(t,o){let e=o&&o.isPacked;if(t.length===0)return e?[2,2]:[1,1];let r=this.maxTextureSize;if(o&&o.breakAxis!==void 0){let i=o.breakAxis>=t.length?1:t.slice(o.breakAxis).reduce((l,f)=>l*f),u=o.breakAxis<=0?1:t.slice(0,o.breakAxis).reduce((l,f)=>l*f);if(i>r||u>r)he.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${o.breakAxis}`);else return[i,u]}let n=t.slice(0);e&&(r=r*2,n=n.map((i,u)=>u>=n.length-2?n[u]%2===0?n[u]:n[u]+1:n[u]),n.length===1&&(n=[2,n[0]])),n.length!==2&&(n=nn(n).newShape);let s=zb(n);return n.length<=1&&s<=r?[1,s]:n.length===2&&n[0]<=r&&n[1]<=r?n:n.length===3&&n[0]*n[1]<=r&&n[2]<=r?[n[0]*n[1],n[2]]:n.length===3&&n[0]<=r&&n[1]*n[2]<=r?[n[0],n[1]*n[2]]:n.length===4&&n[0]*n[1]*n[2]<=r&&n[3]<=r?[n[0]*n[1]*n[2],n[3]]:n.length===4&&n[0]<=r&&n[1]*n[2]*n[3]<=r?[n[0],n[1]*n[2]*n[3]]:e?np(s/4).map(i=>i*2):np(s)}}});var qo,op=$(()=>{"use strict";de();Zt();Oe();va();Vt();qo=class extends yt{constructor(o){super(o)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let o="offsetToCoords";return{offsetToCoords:new U(`
      vec2 ${o}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let o="coordsToOffset";return{coordsToOffset:new U(`
      int ${o}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let o=this.context.outputTextureLayout;return o.isPacked?this.getPackedOutputSamplingSnippet(o):this.getUnpackedOutputSamplingSnippet(o)}getPackedOutputSamplingSnippet(o){let e=o.unpackedShape,r=[o.width,o.height],n={},s="getOutputCoords";switch(e.length){case 0:n[s]=this.getOutputScalarCoords();break;case 1:n[s]=this.getOutputPacked1DCoords(e,r);break;case 2:n[s]=this.getOutputPacked2DCoords(e,r);break;case 3:n[s]=this.getOutputPacked3DCoords(e,r);break;default:n[s]=this.getOutputPackedNDCoords(e,r)}let u=`
      void setOutput(vec4 val) {
        ${K(this.context.glContext.version).output} = val;
      }
    `,l="floatTextureSetRGBA";return n[l]=new U(u),n}getUnpackedOutputSamplingSnippet(o){let e=o.unpackedShape,r=[o.width,o.height],n={},s="getOutputCoords";switch(e.length){case 0:n[s]=this.getOutputScalarCoords();break;case 1:n[s]=this.getOutputUnpacked1DCoords(e,r);break;case 2:n[s]=this.getOutputUnpacked2DCoords(e,r);break;case 3:n[s]=this.getOutputUnpacked3DCoords(e,r);break;case 4:n[s]=this.getOutputUnpacked4DCoords(e,r);break;case 5:n[s]=this.getOutputUnpacked5DCoords(e,r);break;case 6:n[s]=this.getOutputUnpacked6DCoords(e,r);break;default:throw new Error(`Unsupported output dimensionality: ${e.length}`)}let u=`
        void setOutput(float val) {
          ${K(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,l="floatTextureSetR";return n[l]=new U(u),n}getOutputScalarCoords(){return new U(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(o,e){let r=e,n="";return r[0]===1?(n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${r[1]}.0);
          }
        `,new U(n)):r[1]===1?(n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${r[0]}.0);
          }
        `,new U(n)):(n=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${r[0]}, ${r[1]}));
          return 2 * (resTexRC.y * ${r[0]} + resTexRC.x);
        }
      `,new U(n))}getOutputPacked2DCoords(o,e){let r="";if(Or.arraysEqual(o,e))return r=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${e[0]}, ${e[1]}));
        }
      `,new U(r);let n=e,s=Math.ceil(o[1]/2);return r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));

          int index = resTexRC.y * ${n[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${s}) * 2;
          int c = 2 * (index / ${s});

          return ivec2(r, c);
        }
      `,new U(r)}getOutputPacked3DCoords(o,e){let r=[e[0],e[1]],n=Math.ceil(o[2]/2),s=n*Math.ceil(o[1]/2),i=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${r[0]}, ${r[1]}));
          int index = resTexRC.y * ${r[0]} + resTexRC.x;

          int b = index / ${s};
          index -= b * ${s};

          // reverse r and c order for packed texture
          int r = imod(index, ${n}) * 2;
          int c = 2 * (index / ${n});

          return ivec3(b, r, c);
        }
      `;return new U(i)}getOutputPackedNDCoords(o,e){let r=[e[0],e[1]],n=Math.ceil(o[o.length-1]/2),s=n*Math.ceil(o[o.length-2]/2),i=s,u="",l="b, r, c";for(let h=2;h<o.length-1;h++)i*=o[o.length-h-1],u=`
      int b${h} = index / ${i};
      index -= b${h} * ${i};
    `+u,l=`b${h}, `+l;let f=`
      ivec${o.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.y * ${r[0]} + resTexRC.x;

        ${u}

        int b = index / ${s};
        index -= b * ${s};

        // reverse r and c order for packed texture
        int r = imod(index, ${n}) * 2;
        int c = 2 * (index / ${n});

        return ivec${o.length}(${l});
      }
    `;return new U(f)}getOutputUnpacked1DCoords(o,e){let r=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          return resTexRC.y * ${e[0]} + resTexRC.x;
        }
      `;return new U(r)}getOutputUnpacked2DCoords(o,e){let r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          int r = index / ${o[1]};
          int c = index - r * ${o[1]};
          return ivec2(r, c);
        }
      `;return new U(r)}getOutputUnpacked3DCoords(o,e){let r="",n=o.length,s=null;n<2&&(s=[]),s=new Array(n-1),s[n-2]=o[n-1];for(let l=n-3;l>=0;--l)s[l]=s[l+1]*o[l+1];let i=["r","c","d"],u=s.map((l,f)=>{let h=`int ${i[f]} = index / ${l}`,m=f===s.length-1?`int ${i[f+1]} = index - ${i[f]} * ${l}`:`index -= ${i[f]} * ${l}`;return`${h}; ${m};`}).join("");return r=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec3(r, c, d);
        }
      `,new U(r)}getOutputUnpacked4DCoords(o,e){let r="",n=o.length,s=null;n<2&&(s=[]),s=new Array(n-1),s[n-2]=o[n-1];for(let l=n-3;l>=0;--l)s[l]=s[l+1]*o[l+1];let i=["r","c","d","d2"],u=s.map((l,f)=>{let h=`int ${i[f]} = index / ${l}`,m=f===s.length-1?`int ${i[f+1]} = index - ${i[f]} * ${l}`:`index -= ${i[f]} * ${l}`;return`${h}; ${m};`}).join("");return r=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec4(r, c, d, d2);
        }
      `,new U(r)}getOutputUnpacked5DCoords(o,e){let r="",n=o.length,s=null;n<2&&(s=[]),s=new Array(n-1),s[n-2]=o[n-1];for(let l=n-3;l>=0;--l)s[l]=s[l+1]*o[l+1];let i=["r","c","d","d2","d3"],u=s.map((l,f)=>{let h=`int ${i[f]} = index / ${l}`,m=f===s.length-1?`int ${i[f+1]} = index - ${i[f]} * ${l}`:`index -= ${i[f]} * ${l}`;return`${h}; ${m};`}).join("");return r=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec5(r, c, d, d2, d3);
        }
      `,new U(r)}getOutputUnpacked6DCoords(o,e){let r="",n=o.length,s=null;n<2&&(s=[]),s=new Array(n-1),s[n-2]=o[n-1];for(let l=n-3;l>=0;--l)s[l]=s[l+1]*o[l+1];let i=["r","c","d","d2","d3","d4"],u=s.map((l,f)=>{let h=`int ${i[f]} = index / ${l}`,m=f===s.length-1?`int ${i[f+1]} = index - ${i[f]} * ${l}`:`index -= ${i[f]} * ${l}`;return`${h}; ${m};`}).join("");return r=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${e[0]}, ${e[1]}));
         int index = resTexRC.y * ${e[0]} + resTexRC.x;
         ${u}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new U(r)}getCommonUtilFuncs(){let o={},e="uvFromFlat";o[e]=new U(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),e="packedUVfrom1D",o[e]=new U(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom2D",o[e]=new U(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom3D",o[e]=new U(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="sampleTexture";let r=K(this.context.glContext.version);return o[e]=new U(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${r.texture2D}(textureSampler, uv).r;
        }`),o}getInputsSamplingSnippets(){let o={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((r,n)=>{let s=this.context.inputTextureLayouts[n],i=$o(r);s.isPacked?o[i]=this.getPackedSamplerFromInput(i,r,s):o[i]=this.getUnpackedSamplerFromInput(i,r,s);let u=zu(r);s.unpackedShape.length<=e.unpackedShape.length&&(s.isPacked?o[u]=this.getPackedSamplerAtOutputCoords(u,s,e,r):o[u]=this.getUnpackedSamplerAtOutputCoords(u,s,e,r))}),o}getPackedSamplerAtOutputCoords(o,e,r,n){let s=e.unpackedShape,i=r.unpackedShape,l=$o(n),f=s.length,h=i.length,m=Qe.getBroadcastDims(s,i),v=et(h),I=h-f,_,A=kt();f===0?_="":h<2&&m.length>=1?_="coords = 0;":_=m.map(oe=>`coords.${A[oe+I]} = 0;`).join(`
`);let L="";h<2&&f>0?L="coords":L=s.map((oe,_t)=>`coords.${A[_t+I]}`).join(", ");let F="return outputValue;",J=W.size(s)===1,me=W.size(i)===1;if(f===1&&!J&&!me)F=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(J&&!me)h===1?F=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:F=`
          return vec4(outputValue.x);
        `;else if(m.length){let oe=f-2,_t=f-1;m.indexOf(oe)>-1&&m.indexOf(_t)>-1?F="return vec4(outputValue.x);":m.indexOf(oe)>-1?F="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":m.indexOf(_t)>-1&&(F="return vec4(outputValue.xx, outputValue.zz);")}let Ie=`
        int lastDim = coords.${A[h-1]};
        coords.${A[h-1]} = coords.${A[h-2]};
        coords.${A[h-2]} = lastDim;
      `,V=`
      vec4 ${o}() {
        ${v} coords = getOutputCoords();
        ${Ie}
        ${_}
        vec4 outputValue = ${l}(${L});
        ${F}
      }
    `;return new U(V,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(o,e,r,n){let s=[r.width,r.height],i=[e.width,e.height],u=e.unpackedShape.length,l=r.unpackedShape.length,f=e.unpackedShape,h=r.unpackedShape,m=$o(n);if(u===l&&Or.arraysEqual(i,s)){let J=`
          float ${o}() {
            return sampleTexture(${n}, TexCoords);
          }
        `;return new U(J,["coordinates.sampleTexture"])}let v=et(l),I=Qe.getBroadcastDims(f,h),_=l-u,A,L=kt();u===0?A="":l<2&&I.length>=1?A="coords = 0;":A=I.map(J=>`coords.${L[J+_]} = 0;`).join(`
`);let F="";l<2&&u>0?F="coords":F=e.unpackedShape.map((J,z)=>`coords.${L[z+_]}`).join(", ");let M=`
        float ${o}() {
          ${v} coords = getOutputCoords();
          ${A}
          return ${m}(${F});
        }
      `;return new U(M,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(o,e,r){switch(r.unpackedShape.length){case 0:return this.getPackedSamplerScalar(o,e);case 1:return this.getPackedSampler1D(o,e,r);case 2:return this.getPackedSampler2D(o,e,r);case 3:return this.getPackedSampler3D(o,e,r);default:return this.getPackedSamplerND(o,e,r)}}getUnpackedSamplerFromInput(o,e,r){let n=r.unpackedShape;switch(n.length){case 0:return this.getUnpackedSamplerScalar(o,e,r);case 1:return this.getUnpackedSampler1D(o,e,r);case 2:return this.getUnpackedSampler2D(o,e,r);case 3:return this.getUnpackedSampler3D(o,e,r);case 4:return this.getUnpackedSampler4D(o,e,r);case 5:return this.getUnpackedSampler5D(o,e,r);case 6:return this.getUnpackedSampler6D(o,e,r);default:throw new Error(`Unsupported dimension ${n.length}-D`)}}getPackedSamplerScalar(o,e){let r=K(this.context.glContext.version),n=`
          vec4 ${o}() {
            return ${r.texture2D}(${e}, halfCR);
          }
        `;return new U(n)}getPackedSampler1D(o,e,r){let n=[r.width,r.height],s=[n[1],n[0]],i=K(this.context.glContext.version),l=`vec4 ${o}(int index) {
      vec2 uv = packedUVfrom1D(
      ${s[0]}, ${s[1]}, index);
      return ${i.texture2D}(${e}, uv);
    }`;return new U(l,["coordinates.packedUVfrom1D"])}getPackedSampler2D(o,e,r){let n=r.unpackedShape,s=[r.width,r.height],i=K(this.context.glContext.version),u=s[0],l=s[1];if(s!=null&&Or.arraysEqual(n,s)){let I=`vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${u}.0);
        return ${i.texture2D}(${e}, uv);
      }`;return new U(I)}let f=s,h=Math.ceil(n[1]/2),v=`vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${f[1]}, ${f[0]}, ${h}, row, col);
      return ${i.texture2D}(${e}, uv);
    }`;return new U(v,["coordinates.packedUVfrom2D"])}getPackedSampler3D(o,e,r){let n=r.unpackedShape,s=[r.width,r.height],i=[s[0],s[1]],u=K(this.context.glContext.version);if(n[0]===1){let _=n.slice(1),A=[1,2],L=Zr(n,_),F=["b","row","col"],M=JSON.parse(JSON.stringify(r));M.unpackedShape=L;let J=this.getPackedSamplerFromInput(o,e,M),me=`${J.routineBody}
      vec4 ${o}(int b, int row, int col) {
        return ${o}(${Qr(F,A)});
      } `;return new U(me,J.dependencies)}let l=i[0],f=i[1],h=Math.ceil(n[2]/2),m=h*Math.ceil(n[1]/2),I=`vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${f}, ${l}, ${m}, ${h}, b, row, col);
      return ${u.texture2D}(${e}, uv);}`;return new U(I,["coordinates.packedUVfrom3D"])}getPackedSamplerND(o,e,r){let n=r.unpackedShape,s=n.length,i=[r.width,r.height],u=K(this.context.glContext.version),l=[i[0],i[1]],f=l[1],h=l[0],m=Math.ceil(n[s-1]/2),v=m*Math.ceil(n[s-2]/2),I="int b, int row, int col",_=`b * ${v} + (row / 2) * ${m} + (col / 2)`;for(let F=2;F<s-1;F++)I=`int b${F}, `+I,v*=n[s-F-1],_=`b${F} * ${v} + `+_;let L=`vec4 ${o}(${I}) {
      int index = ${_};
      int texR = index / ${h};
      int texC = index - texR * ${h};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}, ${f});
      return ${u.texture2D}(${e}, uv);
    }`;return new U(L)}getUnpackedSamplerScalar(o,e,r){let[n,s]=[r.width,r.height];if(n===1&&s===1){let u=`
          float ${o}() {
            return sampleTexture(${e}, halfCR);
          }
        `;return new U(u,["coordinates.sampleTexture"])}let i=`
        float ${o}() {
          int offset_${e} = coordsToOffset(TexCoords, ${n}, ${s});
          vec2 uv = uvFromFlat(${n}, ${s}, offset_${e});
          return sampleTexture(${e}, uv);
        }
      `;return new U(i,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(o,e,r){let n=r.width,s=r.height;if(s===1&&n===1){let u=`
        float ${o}(int index) {
          return sampleTexture(${e}, halfCR);
        }
      `;return new U(u,["coordinates.sampleTexture"])}if(s===1){let u=`
          float ${o}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${n}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new U(u,["coordinates.sampleTexture"])}if(n===1){let u=`
          float ${o}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${s}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new U(u,["coordinates.sampleTexture"])}let i=`
        float ${o}(int index) {
          vec2 uv = uvFromFlat(${n}, ${s}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new U(i,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(o,e,r){let n=r.unpackedShape,s=[r.height,r.width];if(s!=null&&Or.arraysEqual(n,s)){let v=s[1],I=s[0],_=`
          float ${o}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${v}.0, ${I}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new U(_,["coordinates.sampleTexture"])}let{newShape:i,keptDims:u}=nn(n),l=i;if(l.length<n.length){let v=Zr(n,l),I=JSON.parse(JSON.stringify(r));I.unpackedShape=v;let _=["col","row"],A=`
          ${this.getUnpackedSamplerFromInput(o,e,I).routineBody}
          float ${o}(int row, int col) {
            return ${o}(${Qr(_,u)});
          }
        `;return new U(A,["coordinates.sampleTexture"])}let f=s[1],h=s[0];if(h===1){let v=`
          float ${o}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${f}, ${h});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${f}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new U(v,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(f===1){let v=`
          float ${o}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${f}, ${h});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${h}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new U(v,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let m=`
        float ${o}(int row, int col) {
          int index = col * ${n[1]} + row;
          vec2 uv = uvFromFlat(${f}, ${h}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new U(m,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(o,e,r){let n=r.unpackedShape,s=n[1]*n[2],i=n[2],{newShape:u,keptDims:l}=nn(n),f=u;if(f.length<n.length){let I=Zr(n,f),_=["batch","col","row"],A=JSON.parse(JSON.stringify(r));A.unpackedShape=I;let L=this.getUnpackedSamplerFromInput(o,e,A),F=l.reverse(),M=`
          ${L.routineBody}
          float ${o}(int batch, int row, int col) {
            return ${o}(${Qr(_,F)});
          }
        `;return new U(M,L.dependencies)}let h=r.width,m=r.height,v=`
          float ${o}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${s} + col * ${i} + row;
            vec2 uv = uvFromFlat(${h}, ${m}, index);
            return sampleTexture(${e}, uv);
          }
      `;return new U(v,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(o,e,r){let n=r.unpackedShape,s=n[3],i=n[2]*s,u=n[1]*i,l=r.width,f=r.height,h=`
        float ${o}(int row, int col, int depth, int depth2) {
          int index = row * ${u} + col * ${i} +
              depth2 * ${s} + depth;
          vec2 uv = uvFromFlat(${l}, ${f}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new U(h,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(o,e,r){let n=r.unpackedShape,s=n[4],i=n[3]*s,u=n[2]*i,l=n[1]*u,{newShape:f,keptDims:h}=nn(n);if(f.length<n.length){let _=Zr(n,f),A=["row","col","depth","depth2","depth3"],L=JSON.parse(JSON.stringify(r));L.unpackedShape=_;let F=`
          ${this.getUnpackedSamplerFromInput(o,e,L).routineBody}
          float ${o}(int row, int col, int depth, int depth2, int depth3) {
            return ${o}(${Qr(A,h)});
          }
        `;return new U(F,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let m=r.width,v=r.height,I=`
        float ${o}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${l} + col * ${u} + depth * ${i} +
          depth3 * ${s} + depth2;
          vec2 uv = uvFromFlat(${m}, ${v}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new U(I,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(o,e,r){let n=r.unpackedShape,s=n[5],i=n[4]*s,u=n[3]*i,l=n[2]*u,f=n[1]*l,{newShape:h,keptDims:m}=nn(n);if(h.length<n.length){let A=Zr(n,h),L=["row","col","depth","depth2","depth3","depth4"],F=JSON.parse(JSON.stringify(r));F.unpackedShape=A;let M=`
            ${this.getUnpackedSamplerFromInput(o,e,F).routineBody}
            float ${o}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${o}(${Qr(L,m)});
            }
          `;return new U(M,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let v=r.width,I=r.height,_=`
          float ${o}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${f} + col * ${l} + depth * ${u} +
            depth2 * ${i} + depth3 * ${s} + depth4;
            vec2 uv = uvFromFlat(${v}, ${I}, index);
            return sampleTexture(${e}, uv);
          }
        `;return new U(_,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let o=this.context.outputTextureLayout,e=o.shape.length,r=o.strides,n=o.width,s=o.height,i=[];for(let l=0;l<e-1;++l)i.push(`
        c[${l}] = offset / ${r[l]};`),i.push(`
        offset -= c[${l}] * ${r[l]};`);i.push(`
        c[${e-1}] = offset;`);let u=`
      void toVec(vec2 texCoords, out int c[${e}]) {
        int offset = coordsToOffset(texCoords, ${n}, ${s});
        ${i.join("")}
      }
      void toVec(int offset, out int c[${e}]) {
        ${i.join("")}
      }
    `;return{toVec:new U(u,["coordinates.coordsToOffset"])}}valueFrom(){let o={};return this.context.programInfo.inputNames.forEach((e,r)=>{let n=this.context.inputTextureLayouts[r],i=(n.unpackedShape.length>0?n.unpackedShape:n.shape).length,u=`_${e}`;o[u]=new U(this.getValueFromSingle(e,i,n.width,n.height,!1),[`shapeUtils.indicesToOffset${u}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),u=u+"_T",o[u]=new U(this.getValueFromSingle(e,i,n.width,n.height,!0),[`shapeUtils.indicesToOffset${u}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),o}getValueFromSingle(o,e,r,n,s){let i=`_${o}`;s&&(i=i+"_T");let u=K(this.context.glContext.version);return`
        float ${i}(int m[${e}]) {
          int offset = indicesToOffset${i}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          float value = getColorAsFloat(${u.texture2D}(${o}, coords));
          return value;
        }
        `}getPackedValueFrom(o,e,r,n,s){let i=`_${o}_Pack`;s&&(i=i+"_T");let u=K(this.context.glContext.version);return`
        vec4 ${i}(int m[${e}]) {
          int offset = indicesToOffset_${o}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          return ${u.texture2D}(${o}, coords);
        }
        `}}});var Yo,ip=$(()=>{"use strict";Zt();Yo=class a extends yt{constructor(t){super(t)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new U(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new U(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let t=a.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new U(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${t}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let t=a.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new U(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${t}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let t=new ArrayBuffer(4),o=new Uint32Array(t),e=new Uint8Array(t);if(o[0]=3735928559,e[0]===239)return!0;if(e[0]===222)return!1;throw new Error("unknown endianness")}}});var Xo,ap=$(()=>{"use strict";Zt();Oe();Xo=class extends yt{constructor(t){super(t)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let t=K(this.context.glContext.version);return{setFragColor:new U(`
        void setFragColor(float value) {
            ${t.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new U(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}});var Ko,sp=$(()=>{"use strict";Zt();Ko=class a extends yt{constructor(t){super(t)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let t=this.context.outputTextureLayout.shape.length,o={};return this.context.programInfo.inputNames.forEach((e,r)=>{let n=this.context.inputTextureLayouts[r].unpackedShape;if(n.length<=t){let s=n.length,i=t-s,u=`bcastIndices_${e}`,l="";for(let h=0;h<s;++h)l+=`
          realIndices[${h}] = int( mod(float(bcastedIndices[${i+h}]), ${n[h]}.0) );
          `;let f=`
        void ${u} (int bcastedIndices[${t}], out int realIndices[${s}]) {
          ${l}
        }
        `;o[u]=new U(f)}}),o}bcastMatmulIndex(){let t=this.context.outputTextureLayout.shape.length,o={};return this.context.programInfo.inputNames.forEach((e,r)=>{let n=this.context.inputTextureLayouts[r].shape;if(!(n.length<2||n.length>t)){let s=n.length,i=t-s,u=`bcastMatmulIndices_${e}`,l="";for(let h=0;h<s-2;++h)l+=`
          realIndices[${h}] = int( mod(float(bcastedIndices[${i+h}]), ${n[h]}.0) );
          `;let f=`
        void ${u}(int bcastedIndices[${t}], out int realIndices[${s}]) {
          ${l}
          realIndices[${s-1}] = bcastedIndices[${t-1}];
          realIndices[${s-2}] = bcastedIndices[${t-2}];
        }
        `;o[u]=new U(f)}}),o}indicesToOffset(){let t={};return this.context.programInfo.inputNames.forEach((o,e)=>{let r=this.context.inputTextureLayouts[e].shape,n=this.context.inputTextureLayouts[e].strides,s=r.length,i=`indicesToOffset_${o}`;t[i]=new U(a.indexToOffsetSingle(i,s,n)),i=`indicesToOffset_${o}_T`,t[i]=new U(a.indexToOffsetSingle(i,s,n.slice().reverse()))}),t}static indexToOffsetSingle(t,o,e){let r="";for(let n=o-1;n>=0;--n)r+=`
        offset += indices[${n}] * ${e[n]};
        `;return`
      int ${t}(int indices[${o}]) {
        int offset = 0;
        ${r}
        return offset;
      }
      `}offsetToIndices(){let t={};return this.context.programInfo.inputNames.forEach((o,e)=>{let r=this.context.inputTextureLayouts[e].shape,n=this.context.inputTextureLayouts[e].strides,s=r.length,i=`offsetToIndices_${o}`;t[i]=new U(a.offsetToIndicesSingle(i,s,n)),i=`offsetToIndices_${o}_T`,t[i]=new U(a.offsetToIndicesSingle(i,s,n.slice().reverse()))}),t}static offsetToIndicesSingle(t,o,e){let r=[];for(let n=0;n<o-1;++n)r.push(`
      indices[${n}] = offset / ${e[n]};`),r.push(`
        offset -= indices[${n}] * ${e[n]};`);return r.push(`
      indices[${o-1}] = offset;`),`
      void ${t}(int offset, out int indices[${o}]) {
        ${r.join("")}
      }
      `}incrementIndices(){let t={};return this.context.programInfo.inputNames.forEach((o,e)=>{let r=this.context.inputTextureLayouts[e].shape,n=r.length,s=`incrementIndices_${o}`,i="";for(let l=0;l<n;++l)i+=`
        shape[${l}] = ${r[l]};`;let u=`
        void ${s}(int axis, out int indices[${n}]) {
          int shape[${n}];
          ${i};
          for(int i = ${n} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;t[s]=new U(u)}),t}}});var Jo,up=$(()=>{"use strict";Zt();Jo=class extends yt{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let o=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},r={};for(let n in e){let s=`${n}Vec`,i="";for(let l=0;l<o;++l)i+=`
          dest[${l}] ${e[n]} src[${l}];
          `;let u=`
        void ${s}(int src[${o}], out int dest[${o}]) {
          ${i}
        }
        `;r[s]=new U(u)}return r}copyVec(){let o=this.context.outputTextureLayout.shape.length,e="";for(let n=0;n<o;++n)e+=`
        dest[${n}] = src[${n}];
        `;let r=`
      void copyVec(int src[${o}], out int dest[${o}]) {
        ${e}
      }
      `;return{copyVec:new U(r)}}setVecItem(){let o=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index =${o} + index;
        if (index == 0)
            m[0] = value;
        `;for(let n=1;n<o-1;++n)e+=`
        else if (index == ${n})
            m[${n}] = value;
            `;e+=`
        else
            m[${o-1}] = value;
        `;let r=`
      void setVecItem(out int m[${o}], int index, int value) {
        ${e}
      }
        `;return{setVecItem:new U(r)}}getVecItem(){let o=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index = ${o} + index;
        if (index == 0)
            return m[0];
      `;for(let n=1;n<o-1;++n)e+=`
        else if (index == ${n})
            return m[${n}];
      `;e+=`
        else
            return m[${o-1}];
        `;let r=`
      int getVecItem(int m[${o}], int index) {
        ${e}
      }
    `;return{getVecItem:new U(r)}}}});var wa,lp=$(()=>{"use strict";op();ip();ap();sp();up();wa={encoding:Yo,fragcolor:Xo,vec:Jo,shapeUtils:Ko,coordinates:qo}});var Zo,fp=$(()=>{"use strict";Zt();rp();lp();Oe();Zo=class{constructor(t,o,e,r){this.libs={};this.glslLibRoutineDependencyGraph={};this.context=new Bo(t,o,e,r),Object.keys(wa).forEach(s=>{let i=new wa[s](this.context);this.libs[s]=i});let n=this.glslLibRoutineDependencyGraph;for(let s in this.libs){let u=this.libs[s].getFunctions();for(let l in u){let f=s+"."+l,h;n[f]?(h=n[f],h.routineBody=u[l].routineBody):(h=new Un(f,u[l].routineBody),n[f]=h);let m=u[l].dependencies;if(m)for(let v=0;v<m.length;++v)if(n[m[v]])h.addDependency(n[m[v]]);else{let I=new Un(m[v]);n[m[v]]=I,h.addDependency(I)}}}}preprocess(){let t=this.context.programInfo,o=t.shaderSource;return this.context.programInfo.hasMain||(o=`${o}
      ${Wu(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),o=tp(o),`${Vu(this.context.glContext.version)}
    ${this.getUniforms(t.inputNames,t.variables)}
    ${this.getImports(o)}
    ${o}`}getImports(t){let o=this.selectGlslLibRoutinesToBeIncluded(t);if(o.length===0)return"";let e="";for(let r=0;r<o.length;++r)if(o[r].routineBody)e+=o[r].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${o[r].name}`);return e}selectGlslLibRoutinesToBeIncluded(t){let o=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(e=>{let r=e.split(".")[1];t.indexOf(r)!==-1&&o.push(this.glslLibRoutineDependencyGraph[e])}),No.returnOrderedNodes(o)}getUniforms(t,o){let e=[];if(t)for(let r of t)e.push(`uniform sampler2D ${r};`);if(o)for(let r of o)e.push(`uniform ${r.type} ${r.name}${r.arrayLength?`[${r.arrayLength}]`:""};`);return e.join(`
`)}}});var Qo,cp=$(()=>{"use strict";Dt();ht();fp();Oe();Qo=class{constructor(t,o,e){this.profiler=t;this.glContext=o;this.textureLayoutStrategy=e;this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,o){this.repo.set(t,o)}run(t,o,e){this.profiler.event("op",`ProgramManager.run ${t.programInfo.name??"unknown kernel"}`,()=>{let r=this.glContext.gl,n=t.program;r.useProgram(n);try{this.bindOutput(e),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,t.programInfo.variables??[],o)}catch(s){throw he.error("ProgramManager",t.programInfo.shaderSource),s}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(t=>this.glContext.deleteProgram(t.program))}build(t,o,e){return this.profiler.event("backend","ProgramManager.build",()=>{let r=new Zo(this.glContext,t,o,e),n=r.preprocess(),s=this.compile(n);return{programInfo:t,program:s,uniformLocations:this.getUniformLocations(s,r.context.programInfo.inputNames,r.context.programInfo.variables),attribLocations:this.getAttribLocations(s)}})}compile(t){if(!this.vertexShader){he.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let r=Uu(this.glContext.version);this.vertexShader=this.glContext.compileShader(r,this.glContext.gl.VERTEX_SHADER)}ee.debug&&he.verbose("ProrgramManager",`FragShader:
${t}
`);let o=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),e=this.glContext.createProgram(this.vertexShader,o);return this.glContext.deleteShader(o),e}bindOutput(t){let o=t.width,e=t.height;he.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${o}/${e}, shape=${t.shape}, type=${t.tensor.type}`),this.glContext.attachFramebuffer(t.texture,o,e)}bindAttributes(t){let o=t.position,e=t.textureCoord;this.glContext.setVertexAttributes(o,e),this.attributesBound=!0}bindUniforms(t,o,e){let r=this.glContext.gl,n=0;for(let{name:s,type:i,location:u,arrayLength:l}of t){let f=o.find(h=>h.name===s)?.data;if(i!=="sampler2D"&&!f)throw new Error(`variable '${s}' does not have data defined in program info`);switch(i){case"sampler2D":this.bindTexture(e[n],u,n),n++;break;case"float":l?r.uniform1fv(u,f):r.uniform1f(u,f);break;case"int":l?r.uniform1iv(u,f):r.uniform1i(u,f);break;default:throw new Error(`Uniform not implemented: ${i}`)}}}bindTexture(t,o,e){this.glContext.bindTextureToUniform(t.texture,e,o)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,o,e){let r=[];if(o)for(let n of o)r.push({name:n,type:"sampler2D",location:this.getUniformLocation(t,n)});if(e)for(let n of e)r.push({...n,location:this.getUniformLocation(t,n.name)});return r}getUniformLocation(t,o){let r=this.glContext.gl.getUniformLocation(t,o);if(r===null)throw new Error(`Uniform ${o} not found.`);return r}getAttribLocation(t,o){return this.glContext.gl.getAttribLocation(t,o)}}});var ei,pp=$(()=>{"use strict";ht();Mn();ei=class{constructor(t,o,e,r){this.glContext=t;this.layoutStrategy=o;this.profiler=e;this.config=r;this.pendingRead=new Map;r.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,o,e,r){let n=this.toEncoderType(t),s=this.glContext.getEncoder(n,o.channels||1,r);if(o.isPacked&&r===1)throw new Error("not implemented");let i=o.width,u=o.height,l,f;if(this.config.reuseTextures){l=`${i}x${u}_${s.format}_${s.internalFormat}_${s.textureType}`,f=this.inUseTextures.get(l),f||(f=[],this.inUseTextures.set(l,f));let m=this.idleTextures.get(l);if(m&&m.length>0){let v=m.pop();return f.push(v),r===1&&this.glContext.updateTexture(v,i,u,s,this.toTextureData(t,e)),v}}he.verbose("TextureManager",`Creating new texture of size ${o.width}x${o.height}`);let h=this.glContext.allocateTexture(i,u,s,this.toTextureData(t,e));return this.config.reuseTextures&&(f.push(h),this.textureLookup.set(h,l)),h}readTexture(t,o,e){return e||(e=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let r=t.shape.reduce((s,i)=>s*i)*e,n=this.glContext.readTexture(t.texture,t.width,t.height,r,this.toEncoderType(o),e);return this.toTensorData(o,n)})}async readTextureAsync(t,o,e){let r=t.tensor.dataId;if(e||(e=1),this.pendingRead.has(r)){let n=this.pendingRead.get(r);return new Promise(s=>n?.push(s))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(r,[]);let n=t.shape.reduce((l,f)=>l*f)*e;await this.glContext.createAndWaitForFence();let s=this.glContext.readTexture(t.texture,t.width,t.height,n,this.toEncoderType(o),e),i=this.toTensorData(o,s),u=this.pendingRead.get(r);return this.pendingRead.delete(r),u?.forEach(l=>l(i)),i})}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let o=t.shape.reduce((r,n)=>r*n),e=this.glContext.readTexture(t.texture,t.width,t.height,o*4,"byte",4);return new Float32Array(e.buffer,e.byteOffset,o)})}releaseTexture(t,o){let e;if(this.config.reuseTextures&&(e=this.textureLookup.get(t.texture),e)){o&&this.textureLookup.delete(e);let r=this.inUseTextures.get(e);if(r){let n=r.indexOf(t.texture);if(n!==-1){r.splice(n,1);let s=this.idleTextures.get(e);s||(s=[],this.idleTextures.set(e,s)),s.push(t.texture)}}}(!e||o)&&(he.verbose("TextureManager",`Deleting texture of size ${t.width}x${t.height}`),this.glContext.deleteTexture(t.texture))}toTensorData(t,o){switch(t){case"int16":return o instanceof Int16Array?o:Int16Array.from(o);case"int32":return o instanceof Int32Array?o:Int32Array.from(o);case"int8":return o instanceof Int8Array?o:Int8Array.from(o);case"uint16":return o instanceof Uint16Array?o:Uint16Array.from(o);case"uint32":return o instanceof Uint32Array?o:Uint32Array.from(o);case"uint8":case"bool":return o instanceof Uint8Array?o:Uint8Array.from(o);case"float32":return o instanceof Float32Array?o:Float32Array.from(o);case"float64":return o instanceof Float64Array?o:Float64Array.from(o);default:throw new Error(`TensorData type ${t} is not supported`)}}toTextureData(t,o){if(o)return o instanceof Float32Array?o:new Float32Array(o)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}});var ti,dp=$(()=>{"use strict";ht();As();ol();Qc();cp();va();pp();ti=class{constructor(t,o){this.backend=t;this.context=o;this.layoutStrategy=new jo(t.glContext.maxTextureSize),this.programManager=new Qo(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new ei(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:t.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new ko(this)}onGraphInitialized(t){let o=t.getValues().filter(e=>e.from===-1&&e.tensor).map(e=>e.tensor.dataId);this.initializers=new Set(o)}isInitializer(t){return this.initializers?this.initializers.has(t):!1}addInitializer(t){this.initializers.add(t)}getTextureData(t,o){return o?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,o,e=!1){he.verbose("WebGLSessionHandler","Storing Texture data in cache"),e?this.packedTextureDataCache.set(t,o):this.unpackedTextureDataCache.set(t,o)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.unpackedTextureDataCache=new Map}resolve(t,o,e){let r=Ss(t,o,Zc);return{impl:r.opImpl,context:r.opInit?r.opInit(t,e):t}}}});function Hb(a){let t=0;for(;t<a.length&&a[t]();++t);return t-1}var zn,hp=$(()=>{"use strict";Dt();Mn();Mn();Vt();zn=class{constructor(t,o){this.frameBufferBound=!1;this.itemsToPoll=[];this.gl=t,this.version=o,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,o,e,r){let n=this.gl,s=n.createTexture();n.bindTexture(n.TEXTURE_2D,s),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);let i=r?e.encode(r,t*o):null;return n.texImage2D(n.TEXTURE_2D,0,e.internalFormat,t,o,0,e.format,e.textureType,i),this.checkError(),s}updateTexture(t,o,e,r,n){let s=this.gl;s.bindTexture(s.TEXTURE_2D,t);let i=r.encode(n,o*e);s.texSubImage2D(s.TEXTURE_2D,0,0,0,o,e,r.format,r.textureType,i),this.checkError()}attachFramebuffer(t,o,e){let r=this.gl;r.bindTexture(r.TEXTURE_2D,t),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.checkError(),r.viewport(0,0,o,e),r.scissor(0,0,o,e)}readTexture(t,o,e,r,n,s){let i=this.gl;s||(s=1),this.frameBufferBound||this.attachFramebuffer(t,o,e);let u=this.getEncoder(n,s),l=u.allocate(o*e);return i.bindTexture(i.TEXTURE_2D,t),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0),i.readPixels(0,0,o,e,i.RGBA,u.textureType,l),this.checkError(),u.decode(l,r)}isFramebufferReady(){return!0}getActiveTexture(){let t=this.gl;return`TEXTURE${t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,o){let e=this.gl;e.vertexAttribPointer(t,3,e.FLOAT,!1,20,0),e.enableVertexAttribArray(t),o!==-1&&(e.vertexAttribPointer(o,2,e.FLOAT,!1,20,12),e.enableVertexAttribArray(o)),this.checkError()}createProgram(t,o){let e=this.gl,r=e.createProgram();return e.attachShader(r,t),e.attachShader(r,o),e.linkProgram(r),r}compileShader(t,o){let e=this.gl,r=e.createShader(o);if(!r)throw new Error(`createShader() returned null with type ${o}`);if(e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${e.getShaderInfoLog(r)}
Shader source:
${t}`);return r}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,o,e){let r=this.gl;r.activeTexture(r.TEXTURE0+o),this.checkError(),r.bindTexture(r.TEXTURE_2D,t),this.checkError(),r.uniform1i(e,o),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(ee.debug){let t=this.gl,o=t.getError(),e="";switch(o){case t.NO_ERROR:return;case t.INVALID_ENUM:e="INVALID_ENUM";break;case t.INVALID_VALUE:e="INVALID_VALUE";break;case t.INVALID_OPERATION:e="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:e="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:e="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:e="CONTEXT_LOST_WEBGL";break;default:e=`Unknown WebGL Error: ${o.toString(16)}`}throw new Error(e)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,o,e=0){if(this.version===2)return new Co(this.gl,o);switch(t){case"float":return e===1||this.isRenderFloat32Supported?new Rn(this.gl,o):new Rn(this.gl,o,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Fo(this.gl,o);default:throw new Error(`Invalid dataType: ${t}`)}}clearActiveTextures(){let t=this.gl;for(let o=0;o<this.maxTextureImageUnits;++o)t.activeTexture(t.TEXTURE0+o),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let t=this.gl,o=t.createBuffer();if(!o)throw new Error("createBuffer() returned null");let e=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),this.checkError(),o}createFramebuffer(){let t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t}queryVitalParameters(){let t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let t=this.gl,o=t.createTexture();t.bindTexture(t.TEXTURE_2D,o);let e=this.version===2?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,e,1,1,0,t.RGBA,t.FLOAT,null);let r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0);let n=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(o),t.deleteFramebuffer(r),n}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let t=this.gl,o,e,r,n,s;try{o=t.createTexture(),e=t.createFramebuffer(),t.bindTexture(t.TEXTURE_2D,o);let i=this.version===2?t.RGBA32F:t.RGBA;return t.texImage2D(t.TEXTURE_2D,0,i,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),t.enable(t.BLEND),r=t.createShader(t.VERTEX_SHADER),!r||(t.shaderSource(r,"void main(){}"),t.compileShader(r),n=t.createShader(t.FRAGMENT_SHADER),!n)||(t.shaderSource(n,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),t.compileShader(n),s=t.createProgram(),!s)?!1:(t.attachShader(s,r),t.attachShader(s,n),t.linkProgram(s),t.useProgram(s),t.drawArrays(t.POINTS,0,1),t.getError()===t.NO_ERROR)}finally{t.disable(t.BLEND),s&&t.deleteProgram(s),r&&t.deleteShader(r),n&&t.deleteShader(n),e&&(t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(e)),o&&(t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(o))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,o=this.disjointTimerQueryWebgl2Extension,e=t.createQuery();return t.beginQuery(o.TIME_ELAPSED_EXT,e),e}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,o=this.disjointTimerQueryWebgl2Extension;t.endQuery(o.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(t){let o=!1,e=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let r=this.gl,n=this.disjointTimerQueryWebgl2Extension;o=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE),e=r.getParameter(n.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return o&&!e}getTimerResult(t){let o=0;if(this.version===2){let e=this.gl;o=e.getQueryParameter(t,e.QUERY_RESULT),e.deleteQuery(t)}else throw new Error("WebGL1 profiling currently not supported");return o/1e6}async waitForQueryAndGetTime(t){return await qi(()=>this.isTimerResultAvailable(t)),this.getTimerResult(t)}async createAndWaitForFence(){let t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let o,e=t,r=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),r===null?o=()=>!0:o=()=>{let n=e.clientWaitSync(r,0,0);return n===e.ALREADY_SIGNALED||n===e.CONDITION_SATISFIED},{query:r,isFencePassed:o}}async pollFence(t){return new Promise(o=>{this.addItemToPoll(()=>t.isFencePassed(),()=>o())})}pollItems(){let t=Hb(this.itemsToPoll.map(o=>o.isDoneFn));for(let o=0;o<=t;++o){let{resolveFn:e}=this.itemsToPoll[o];e()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}async addItemToPoll(t,o){this.itemsToPoll.push({isDoneFn:t,resolveFn:o}),!(this.itemsToPoll.length>1)&&await qi(()=>(this.pollItems(),this.itemsToPoll.length===0))}}});function _a(a){let t;if((!a||a==="webgl2")&&"webgl2"in on?t=on.webgl2:(!a||a==="webgl")&&"webgl"in on&&(t=on.webgl),!t)try{let e=qb();t=mp(e,a)}catch{let r=jb();t=mp(r,a)}a=a||t.version===1?"webgl":"webgl2";let o=t.gl;return on[a]=t,o.isContextLost()?(delete on[a],_a(a)):(o.disable(o.DEPTH_TEST),o.disable(o.STENCIL_TEST),o.disable(o.BLEND),o.disable(o.DITHER),o.disable(o.POLYGON_OFFSET_FILL),o.disable(o.SAMPLE_COVERAGE),o.enable(o.SCISSOR_TEST),o.enable(o.CULL_FACE),o.cullFace(o.BACK),t)}function mp(a,t){let o={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},e,r=o;if((!t||t==="webgl2")&&(e=a.getContext("webgl2",r),e))try{return new zn(e,2)}catch(n){he.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${n}`)}if((!t||t==="webgl")&&(e=a.getContext("webgl",r)||a.getContext("experimental-webgl",r),e))try{return new zn(e,1)}catch(n){he.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${n}`)}throw new Error("WebGL is not supported")}function jb(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let a=document.createElement("canvas");return a.width=1,a.height=1,a}function qb(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var on,bp=$(()=>{"use strict";ht();hp();on={}});var ri,gp=$(()=>{"use strict";Dt();ht();dp();bp();ri=class{get contextId(){return ee.webgl.contextId}set contextId(t){ee.webgl.contextId=t}get matmulMaxBatchSize(){return ee.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){ee.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return ee.webgl.textureCacheMode}set textureCacheMode(t){ee.webgl.textureCacheMode=t}get pack(){return ee.webgl.pack}set pack(t){ee.webgl.pack=t}get async(){return ee.webgl.async}set async(t){ee.webgl.async=t}initialize(){try{return this.glContext=_a(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),he.setWithEnv(ee),ee.webgl.context||Object.defineProperty(ee.webgl,"context",{value:this.glContext.gl}),he.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(t){return he.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${t}`),!1}}createSessionHandler(t){return new ti(this,t)}dispose(){this.glContext.dispose()}}});async function Oa(a){if(a){let t=typeof a=="string"?[a]:a;for(let o of t){let e=yp.get(o);if(e)return e;let r=await Xb(o);if(r)return r}}else return Oa(["webgl"]);throw new Error("no available backend to use")}async function Xb(a){let t=Yb;if(typeof t[a]<"u"&&Kb(t[a])){let o=t[a],e=o.initialize();if(typeof e=="object"&&"then"in e&&(e=await e),e)return yp.set(a,o),o}}function Kb(a){let t=a;return"initialize"in t&&typeof t.initialize=="function"&&"createSessionHandler"in t&&typeof t.createSessionHandler=="function"&&"dispose"in t&&typeof t.dispose=="function"}var yp,Yb,Tp=$(()=>{"use strict";gp();yp=new Map,Yb={webgl:new ri}});var Ia,ni,xp=$(()=>{"use strict";ht();Ia=class{constructor(t,o){this.op=t;this.node=o}},ni=class{constructor(t,o,e){this.graph=t;this.profiler=e;this.initialize(o)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",()=>{let o=this.graph.getNodes();if(o.length!==t.length)throw new Error("The size of nodes and OPs do not match.");this._ops=t.map((e,r)=>new Ia(e,o[r])),this.reset(),this._starter=[],this._ops.forEach((e,r)=>{let n=!0;for(let s of e.node.inputs)if(!this._values[s]&&this.graph.getInputIndices().indexOf(s)===-1){n=!1;break}n&&this._starter.push(r)})})}reset(){this._values=this.graph.getValues().map(t=>t.tensor)}async execute(t,o){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let e=t.createInferenceHandler(),r=this.graph.getInputIndices();if(o.length!==r.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${o.length} expected: ${r.length}`);o.forEach((f,h)=>{let m=r[h];this._values[m]=f});let n=this._starter.slice(0),s=this.graph.getValues(),i=this.graph.getNodes(),u=0;for(;u<n.length;){let f=n[u++],h=this._ops[f],m=h.node.inputs.map(A=>this._values[A]);if(m.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${h.node}`);let v=m;he.verbose("ExecPlan",`Runing op:${h.node.name} (${v.map((A,L)=>`'${h.node.inputs[L]}': ${A.type}[${A.dims.join(",")}]`).join(", ")})`);let I=await this.profiler.event("node",h.node.name,async()=>h.op.impl(e,v,h.op.context));if(I.length!==h.node.outputs.length)throw new Error("the size of output does not match model definition.");I.forEach((A,L)=>{let F=h.node.outputs[L];if(this._values[F])throw new Error(`output [${F}] already has value: op:${h.node.name}`);this._values[F]=A});let _=new Set;I.forEach((A,L)=>{let F=h.node.outputs[L];for(let M of s[F].to){let J=i[M],z=!0;for(let me of J.inputs)if(!this._values[me]){z=!1;break}z&&_.add(M)}}),n.push(..._)}let l=[];for(let f=0;f<this.graph.getOutputIndices().length;f++){let h=this.graph.getOutputIndices()[f],m=this._values[h];if(m===void 0)throw new Error(`required output [${h}] does not have value`);h===0?await m.getData():m.data,l.push(m)}return he.verbose("ExecPlan","disposing of inferenceHandler"),e.dispose(),l})}}});var ae,vt,Hn,vp=$(()=>{"use strict";$n();ae=jr(Kr());Pr();de();vt=q.experimental.fbs,Hn=class a{constructor(t){if(this._attributes=new Map,t!=null){for(let o of t)o instanceof ae.onnx.AttributeProto?this._attributes.set(o.name,[a.getValue(o),a.getType(o)]):o instanceof vt.Attribute&&this._attributes.set(o.name(),[a.getValue(o),a.getType(o)]);if(this._attributes.size<t.length)throw new Error("duplicated attribute names")}}set(t,o,e){this._attributes.set(t,[e,o])}delete(t){this._attributes.delete(t)}getFloat(t,o){return this.get(t,"float",o)}getInt(t,o){return this.get(t,"int",o)}getString(t,o){return this.get(t,"string",o)}getTensor(t,o){return this.get(t,"tensor",o)}getFloats(t,o){return this.get(t,"floats",o)}getInts(t,o){return this.get(t,"ints",o)}getStrings(t,o){return this.get(t,"strings",o)}getTensors(t,o){return this.get(t,"tensors",o)}get(t,o,e){let r=this._attributes.get(t);if(r===void 0){if(e!==void 0)return e;throw new Error(`required attribute not found: ${t}`)}if(r[1]!==o)throw new Error(`type mismatch: expected ${o} but got ${r[1]}`);return r[0]}static getType(t){let o=t instanceof ae.onnx.AttributeProto?t.type:t.type();switch(o){case ae.onnx.AttributeProto.AttributeType.FLOAT:return"float";case ae.onnx.AttributeProto.AttributeType.INT:return"int";case ae.onnx.AttributeProto.AttributeType.STRING:return"string";case ae.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case ae.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case ae.onnx.AttributeProto.AttributeType.INTS:return"ints";case ae.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case ae.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${ae.onnx.AttributeProto.AttributeType[o]}`)}}static getValue(t){let o=t instanceof ae.onnx.AttributeProto?t.type:t.type();if(o===ae.onnx.AttributeProto.AttributeType.GRAPH||o===ae.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let e=this.getValueNoCheck(t);if(o===ae.onnx.AttributeProto.AttributeType.INT&&it.isLong(e))return it.longToNumber(e);if(o===ae.onnx.AttributeProto.AttributeType.INTS){let r=e,n=new Array(r.length);for(let s=0;s<r.length;s++){let i=r[s];n[s]=it.longToNumber(i)}return n}if(o===ae.onnx.AttributeProto.AttributeType.TENSOR)return t instanceof ae.onnx.AttributeProto?ke.fromProto(e):ke.fromOrtTensor(e);if(o===ae.onnx.AttributeProto.AttributeType.TENSORS){if(t instanceof ae.onnx.AttributeProto)return e.map(n=>ke.fromProto(n));if(t instanceof vt.Attribute)return e.map(n=>ke.fromOrtTensor(n))}return o===ae.onnx.AttributeProto.AttributeType.STRING&&t instanceof ae.onnx.AttributeProto?Nn(e):o===ae.onnx.AttributeProto.AttributeType.STRINGS&&t instanceof ae.onnx.AttributeProto?e.map(Nn):e}static getValueNoCheck(t){return t instanceof ae.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(t):this.getValueNoCheckFromOrtFormat(t)}static getValueNoCheckFromOnnxFormat(t){switch(t.type){case ae.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case ae.onnx.AttributeProto.AttributeType.INT:return t.i;case ae.onnx.AttributeProto.AttributeType.STRING:return t.s;case ae.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case ae.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case ae.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case ae.onnx.AttributeProto.AttributeType.INTS:return t.ints;case ae.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case ae.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case ae.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw new Error(`unsupported attribute type: ${ae.onnx.AttributeProto.AttributeType[t.type]}`)}}static getValueNoCheckFromOrtFormat(t){switch(t.type()){case vt.AttributeType.FLOAT:return t.f();case vt.AttributeType.INT:return t.i();case vt.AttributeType.STRING:return t.s();case vt.AttributeType.TENSOR:return t.t();case vt.AttributeType.GRAPH:return t.g();case vt.AttributeType.FLOATS:return t.floatsArray();case vt.AttributeType.INTS:{let o=[];for(let e=0;e<t.intsLength();e++)o.push(t.ints(e));return o}case vt.AttributeType.STRINGS:{let o=[];for(let e=0;e<t.stringsLength();e++)o.push(t.strings(e));return o}case vt.AttributeType.TENSORS:{let o=[];for(let e=0;e<t.tensorsLength();e++)o.push(t.tensors(e));return o}default:throw new Error(`unsupported attribute type: ${vt.AttributeType[t.type()]}`)}}}});var Aa,oi,Pa,Ht,ii,Sa,wp=$(()=>{"use strict";vp();$n();Aa=jr(Kr());Pr();de();oi=q.experimental.fbs,Pa={from:(a,t)=>new Sa(a,t)},Ht=class{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=ze.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}},ii=class{constructor(t,o){t instanceof Aa.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new Hn(t.attribute)):t instanceof oi.Node&&(this.name=o??t.name(),this.opType=t.opType(),this.attributes=new Hn(ze.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Sa=class{constructor(t,o){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(o),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof Aa.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else if(t instanceof oi.Graph)this.buildGraphFromOrtFormat(t);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(t){let o=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let e=new Map;if(!t.input)throw new Error("missing information in graph: input");let r=[];for(let n of t.input){if(o.has(n.name))throw new Error(`duplicated input name: ${n.name}`);let s=this._allData.push(new Ht(n))-1;o.set(n.name,s),r.push(n.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(let n of t.initializer){let s=o.get(n.name);if(s===void 0){let i=new Ht;i.type={shape:{dims:ze.tensorDimsFromProto(n.dims)},tensorType:ze.tensorDataTypeFromProto(n.dataType)},s=this._allData.push(i)-1,o.set(n.name,s)}this._allData[s]._from=-1,this._allData[s].tensor=ke.fromProto(n)}for(let n=0;n<this._allData.length;n++)this._allData[n].tensor||(this._allInputIndices.push(n),this._allInputNames.push(r[n]));if(!t.output)throw new Error("missing information in graph: output");for(let n of t.output){if(o.has(n.name))throw new Error(`duplicated output name: ${n.name}`);let s=this._allData.push(new Ht(n))-1;o.set(n.name,s),this._allOutputIndices.push(s),this._allOutputNames.push(n.name)}if(!t.node)throw new Error("missing information in graph: node");for(let n of t.node){if(!n.name)for(let i=0;;i++){let u=`unnamed_${n.opType}_${i}`;if(!e.has(u)){n.name=u;break}}if(e.has(n.name))throw new Error(`duplicated node name: ${n.name}`);let s=this._nodes.push(new ii(n))-1;e.set(n.name,s)}for(let n=0;n<this._nodes.length;n++){let s=this._nodes[n],i=t.node[n];if(!i.output)throw new Error(`missing output for node: ${i.name}`);for(let u of i.output){let l=o.get(u);if(typeof l>"u"&&(l=this._allData.push(new Ht)-1,o.set(u,l)),s.outputs.push(l),this._allData[l]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${l}`);if(this._allData[l]._from=n,i.opType==="Constant"){if(!i.attribute||i.attribute.length!==1||!i.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!i.output||i.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");s.outputs.pop(),s.executeNode=!1,this._allData[l]._from=-1,this._allData[l].tensor=ke.fromProto(i.attribute[0].t)}}}for(let n=0;n<this._nodes.length;n++){let s=this._nodes[n],i=t.node[n];if(!i.input)throw new Error(`missing input for node: ${i.name}`);for(let u of i.input){let l=o.get(u);if(typeof l>"u"){if(u===""&&(i.input.length===3||i.input.length===4)&&i.opType==="Resize")continue;throw new Error(`unrecognized input '${u}' for node: ${i.name}`)}s.inputs.push(l),this._allData[l]._to.push(n)}}return!0}buildGraphFromOrtFormat(t){let o=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let e=new Map,r=[];for(let n=0;n<t.inputsLength();n++){let s=t.inputs(n);if(o.has(s))throw new Error(`duplicated input name: ${s}`);for(let i=0;i<t.nodeArgsLength();i++)if(t.nodeArgs(i)?.name()===s){let u=new Ht;if(t.nodeArgs(i)?.type()?.valueType()!==oi.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let f=t.nodeArgs(i).type().value(new oi.TensorTypeAndShape),h=ze.tensorDataTypeFromProto(f.elemType()),m=f.shape(),v=[];for(let _=0;_<m.dimLength();_++)v.push(it.longToNumber(m.dim(_).value().dimValue()));u.type={shape:{dims:v},tensorType:h};let I=this._allData.push(u)-1;o.set(s,I),r.push(s)}}for(let n=0;n<t.initializersLength();n++){let s=t.initializers(n),i=o.get(s.name());if(i===void 0){let u=new Ht,l=ze.tensorDimsFromORTFormat(s),f=ze.tensorDataTypeFromProto(s.dataType());u.type={shape:{dims:l},tensorType:f},i=this._allData.push(u)-1,o.set(s.name(),i)}this._allData[i]._from=-1,this._allData[i].tensor=ke.fromOrtTensor(s)}for(let n=0;n<this._allData.length;n++)this._allData[n].tensor||(this._allInputIndices.push(n),this._allInputNames.push(r[n]));for(let n=0;n<t.outputsLength();n++){let s=t.outputs(n);if(o.has(s))throw new Error(`duplicated output name: ${s}`);let i=this._allData.push(new Ht)-1;o.set(s,i),this._allOutputIndices.push(i),this._allOutputNames.push(s)}if(!t.nodes)throw new Error("missing information in graph: node");for(let n=0;n<t.nodesLength();n++){let s=t.nodes(n),i=s.name();if(!i)for(let l=0;i=`unnamed_${s.opType()}_${l}`,!!e.has(i);l++);if(e.has(i))throw new Error(`duplicated node name: ${i}`);let u=this._nodes.push(new ii(s,i))-1;e.set(i,u)}for(let n=0;n<this._nodes.length;n++){let s=this._nodes[n],i=t.nodes(n);if(i==null)throw new Error(`No node exists at index ${n}`);if(i?.outputsLength()===0)throw new Error(`missing output for node: ${i.name}`);for(let u=0;u<i?.outputsLength();u++){let l=i?.outputs(u),f=o.get(l);if(typeof f>"u"&&(f=this._allData.push(new Ht)-1,o.set(l,f)),s.outputs.push(f),this._allData[f]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${f}`);if(this._allData[f]._from=n,i.opType()==="Constant"){if(i.attributesLength()!==1||!i.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(i.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");s.outputs.pop(),s.executeNode=!1,this._allData[f]._from=-1,this._allData[f].tensor=ke.fromOrtTensor(i.attributes(0).t())}}}for(let n=0;n<this._nodes.length;n++){let s=this._nodes[n],i=t.nodes(n);if(i.inputsLength()===0)throw new Error(`missing input for node: ${i.name}`);for(let u=0;u<i.inputsLength();u++){let l=i.inputs(u),f=o.get(l);if(typeof f>"u")throw new Error(`unrecognized input '${l}' for node: ${i.name()}`);s.inputs.push(f),this._allData[f]._to.push(n)}}}checkIsAcyclic(){let t=new Set;this._allInputIndices.forEach(r=>{this._allData[r]._to.forEach(s=>{t.add(s)})});let o=Array.from(t),e=new Array(this._nodes.length).fill("white");for(;o.length>0;){let r=o.pop();e[r]==="gray"?e[r]="black":(o.push(r),e[r]="gray",this._nodes[r].outputs.forEach(n=>{let s=this._allData[n];if(typeof s.tensor<"u")throw new Error("node outputs should not be initialized");if(s._from!==r)throw new Error("from property of the Value object doesn't match index of Node being processed");s._to.forEach(i=>{if(e[i]==="gray")throw new Error("model graph is cyclic");e[i]==="white"&&o.push(i)})}))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0,o=new Array(this._nodes.length,0),e=0;for(let r=0;r<this._nodes.length;r++)o[r]=e,this._nodes[r].executeNode?(e!==r&&(this._nodes[e]=this._nodes[r]),e++):this._nodes[r].outputs.forEach(n=>{this._allData[n]._from=-2});this._nodes.splice(e,this._nodes.length-e);for(let r=0;r<this._allData.length;r++){let n=this._allData[r];n._from!==void 0&&n._from!==-1&&n._from!==-2&&(n._from=o[n._from]);for(let s=0;s<n._to.length;s++)if(n._to[s]>=0)n._to[s]=o[n._to[s]];else throw new Error("Trying to update a removed node")}t=0;for(let r=0;r<this._allData.length;r++){if(this._allData[r].from===-2&&this._allOutputIndices.indexOf(r+t)===-1){t++,this._allData.splice(r,1),r--;continue}if(t>0){let n=-1;this._allData[r].from!==void 0&&this._allData[r].from!==-1?(n=this._nodes[this._allData[r].from].outputs.indexOf(r+t),n!==-1&&(this._nodes[this._allData[r].from].outputs[n]=r)):(n=this._allInputIndices.indexOf(r+t),n!==-1&&(this._allInputIndices[n]=r)),this._allData[r].to.forEach(s=>{n=this._nodes[s].inputs.indexOf(r+t),n!==-1&&(this._nodes[s].inputs[n]=r)}),this._allData[r].to.length===0&&(n=this._allOutputIndices.indexOf(r+t),n!==-1&&(this._allOutputIndices[n]=r))}}}deleteNode(t){let o=this._nodes[t];if(o.outputs.length>1){for(let i=1;i<o.outputs.length;i++)if(this._allData[o.outputs[i]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}o.executeNode=!1;let e=o.inputs[0],r=o.outputs[0],n=this._allData[r].to;for(let i=0;i<o.inputs.length;i++){let u=this._allData[o.inputs[i]].to.indexOf(t);if(u===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[o.inputs[i]].to.splice(u,1)}this._allData[r]._to=[];let s=this._allOutputIndices.indexOf(r);if(s!==-1&&(this._allOutputIndices[s]=e),n&&n.length>0)for(let i of n){let u=this._nodes[i].inputs.indexOf(r);if(u===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[i].inputs[u]=e,this._allData[e].to.push(i)}}removeAllDropoutNodes(){let t=0;for(let o of this._nodes){if(o.opType==="Dropout"){if(o.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(o.outputs.length!==1&&o.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(o.outputs.length===2&&this._allData[o.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(let o of this._nodes)o.opType==="Identity"&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let t of this._nodes)if(t.opType==="Conv"){let o=this._allData[t.outputs[0]]._to;if(o.length===1&&this.isActivation(this._nodes[o[0]])){let e=this._nodes[o[0]];if(e.opType==="Clip")if(e.inputs.length===1)try{t.attributes.set("activation_params","floats",[e.attributes.getFloat("min"),e.attributes.getFloat("max")])}catch{t.attributes.set("activation_params","floats",[Sr,Ar])}else if(e.inputs.length>=3&&this._allData[e.inputs[1]].tensor!==void 0&&this._allData[e.inputs[2]].tensor!==void 0)t.attributes.set("activation_params","floats",[this._allData[e.inputs[1]].tensor.floatData[0],this._allData[e.inputs[2]].tensor.floatData[0]]);else continue;t.attributes.set("activation","string",e.opType),this.deleteNode(o[0])}}}}});var _p,Jb,ai,Op=$(()=>{"use strict";So();wp();$n();_p=jr(Kr());de();Jb=q.experimental.fbs,ai=class{constructor(){}load(t,o,e){if(!e)try{this.loadFromOnnxFormat(t,o);return}catch(r){if(e!==void 0)throw r}this.loadFromOrtFormat(t,o)}loadFromOnnxFormat(t,o){let e=_p.onnx.ModelProto.decode(t);if(it.longToNumber(e.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=e.opsetImport.map(n=>({domain:n.domain,version:it.longToNumber(n.version)})),this._graph=Pa.from(e.graph,o)}loadFromOrtFormat(t,o){let e=new O.ByteBuffer(t),r=Jb.InferenceSession.getRootAsInferenceSession(e).model();if(it.longToNumber(r.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let s=0;s<r.opsetImportLength();s++){let i=r.opsetImport(s);this._opsets.push({domain:i?.domain(),version:it.longToNumber(i.version())})}this._graph=Pa.from(r.graph(),o)}get graph(){return this._graph}get opsets(){return this._opsets}}});var si,Ip=$(()=>{"use strict";Tp();xp();ht();Op();si=class{constructor(t={}){this._initialized=!1,this.backendHint=t.backendHint,this.profiler=Oo.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(t,o,e){await this.profiler.event("session","Session.loadModel",async()=>{let r=await Oa(this.backendHint);if(this.sessionHandler=r.createSessionHandler(this.context),this._model=new ai,typeof t=="string"){let n=t.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let s=await(void 0)(t);this.initialize(s,n)}else{let i=await(await fetch(t)).arrayBuffer();this.initialize(new Uint8Array(i),n)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{let n=new Uint8Array(t,o||0,e||t.byteLength);this.initialize(n)}})}initialize(t,o){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let e=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,e,o),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new ni(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(t){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let o=this.normalizeAndValidateInputs(t),e=await this._executionPlan.execute(this.sessionHandler,o);return this.createOutput(e)})}normalizeAndValidateInputs(t){let o=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==o.length)throw new Error(`incorrect input array length: expected ${o.length} but got ${t.length}`)}else{if(t.size!==o.length)throw new Error(`incorrect input map size: expected ${o.length} but got ${t.size}`);let e=new Array(t.size),r=0;for(let n=0;n<o.length;++n){let s=t.get(o[n]);if(!s)throw new Error(`missing input tensor for: '${name}'`);e[r++]=s}t=e}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let e=this._model.graph.getInputIndices(),r=this._model.graph.getValues(),n=new Array(e.length);for(let s=0;s<e.length;++s){let i=r[e[s]];n[s]=i.type.shape.dims,this.context.graphInputTypes.push(i.type.tensorType),this.context.graphInputDims.push(t[s].dims)}this.validateInputTensorDims(n,t,!0)}else this.validateInputTensorDims(this.context.graphInputDims,t,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,o){for(let e=0;e<o.length;e++){let r=t[e],n=o[e].type;if(r!==n)throw new Error(`input tensor[${e}] check failed: expected type '${r}' but got ${n}`)}}validateInputTensorDims(t,o,e){for(let r=0;r<o.length;r++){let n=t[r],s=o[r].dims;if(!this.compareTensorDims(n,s,e))throw new Error(`input tensor[${r}] check failed: expected shape '[${n.join(",")}]' but got [${s.join(",")}]`)}}compareTensorDims(t,o,e){if(t.length!==o.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==o[r]&&(!e||t[r]!==0))return!1;return!0}createOutput(t){let o=this._model.graph.getOutputNames();if(t.length!==o.length)throw new Error("expected number of outputs do not match number of generated outputs");let e=new Map;for(let r=0;r<o.length;++r)e.set(o[r],t[r]);return e}initializeOps(t){let o=t.getNodes();this._ops=new Array(o.length);for(let e=0;e<o.length;e++)this._ops[e]=this.sessionHandler.resolve(o[e],this._model.opsets,t)}}});var ui,Sp=$(()=>{"use strict";Dt();Pr();ui=class{constructor(t){this.session=t;this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(t,o,e){let r=new Map;for(let i in t)if(Object.hasOwnProperty.call(t,i)){let u=t[i];r.set(i,new ke(u.dims,u.type,void 0,void 0,u.data))}let n=await this.session.run(r),s={};return n.forEach((i,u)=>{s[u]=new Ue(i.type,i.data,i.dims)}),s}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}});var Ap={};Hr(Ap,{onnxjsBackend:()=>Qb});var Ea,Qb,Pp=$(()=>{"use strict";Ip();Sp();Ea=class{async init(){}async createInferenceSessionHandler(t,o){let e=new si(o);return typeof t=="string"?await e.loadModel(t):await e.loadModel(t),new ui(e)}},Qb=new Ea});var Da={};Hr(Da,{createReadStream:()=>Ep,readFile:()=>eg,readFileSync:()=>tg});var eg,tg,Ep,La=$(()=>{eg=void 0,tg=void 0,Ep=void 0});var $a={};Hr($a,{join:()=>rg});var rg,Ca=$(()=>{rg=void 0});var $p=ye((Lp,Fa)=>{"use strict";var Dp=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),function(t={}){var o=t,e,r;o.ready=new Promise((c,d)=>{e=c,r=d});var n=Object.assign({},o),s="./this.program",i=typeof window=="object",u=typeof importScripts=="function",l=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",f="",h,m,v;if(l){var I=(La(),mr(Da)),_=(Ca(),mr($a));f=u?_.dirname(f)+"/":__dirname+"/",h=(c,d)=>(c=Ot(c)?new URL(c):_.normalize(c),I.readFileSync(c,d?void 0:"utf8")),v=c=>(c=h(c,!0),c.buffer||(c=new Uint8Array(c)),c),m=(c,d,y,w=!0)=>{c=Ot(c)?new URL(c):_.normalize(c),I.readFile(c,w?void 0:"utf8",(P,k)=>{P?y(P):d(w?k.buffer:k)})},!o.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),o.inspect=()=>"[Emscripten Module object]"}else(i||u)&&(u?f=self.location.href:typeof document<"u"&&document.currentScript&&(f=document.currentScript.src),a&&(f=a),f.indexOf("blob:")!==0?f=f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1):f="",h=c=>{var d=new XMLHttpRequest;return d.open("GET",c,!1),d.send(null),d.responseText},u&&(v=c=>{var d=new XMLHttpRequest;return d.open("GET",c,!1),d.responseType="arraybuffer",d.send(null),new Uint8Array(d.response)}),m=(c,d,y)=>{var w=new XMLHttpRequest;w.open("GET",c,!0),w.responseType="arraybuffer",w.onload=()=>{w.status==200||w.status==0&&w.response?d(w.response):y()},w.onerror=y,w.send(null)});var A=console.log.bind(console),L=console.error.bind(console);Object.assign(o,n),n=null,typeof WebAssembly!="object"&&ft("no native wasm support detected");var F,M=!1,J,z,me,Ie,V,oe,_t,j,Se,lt;function se(){var c=F.buffer;o.HEAP8=J=new Int8Array(c),o.HEAP16=me=new Int16Array(c),o.HEAPU8=z=new Uint8Array(c),o.HEAPU16=Ie=new Uint16Array(c),o.HEAP32=V=new Int32Array(c),o.HEAPU32=oe=new Uint32Array(c),o.HEAPF32=_t=new Float32Array(c),o.HEAPF64=lt=new Float64Array(c),o.HEAP64=j=new BigInt64Array(c),o.HEAPU64=Se=new BigUint64Array(c)}var He=[],tt=[],at=[],st=0,Be=null,Re=null;function ft(c){throw c="Aborted("+c+")",L(c),M=!0,c=new WebAssembly.RuntimeError(c+". Build with -sASSERTIONS for more info."),r(c),c}var Bt=c=>c.startsWith("data:application/octet-stream;base64,"),Ot=c=>c.startsWith("file://"),ct;if(ct="ort-wasm.wasm",!Bt(ct)){var Fr=ct;ct=o.locateFile?o.locateFile(Fr,f):f+Fr}function Ke(c){if(v)return v(c);throw"both async and sync fetching of the wasm failed"}function It(c){if(i||u){if(typeof fetch=="function"&&!Ot(c))return fetch(c,{credentials:"same-origin"}).then(d=>{if(!d.ok)throw"failed to load wasm binary file at '"+c+"'";return d.arrayBuffer()}).catch(()=>Ke(c));if(m)return new Promise((d,y)=>{m(c,w=>d(new Uint8Array(w)),y)})}return Promise.resolve().then(()=>Ke(c))}function St(c,d,y){return It(c).then(w=>WebAssembly.instantiate(w,d)).then(w=>w).then(y,w=>{L(`failed to asynchronously prepare wasm: ${w}`),ft(w)})}function Me(c,d){var y=ct;return typeof WebAssembly.instantiateStreaming!="function"||Bt(y)||Ot(y)||l||typeof fetch!="function"?St(y,c,d):fetch(y,{credentials:"same-origin"}).then(w=>WebAssembly.instantiateStreaming(w,c).then(d,function(P){return L(`wasm streaming compile failed: ${P}`),L("falling back to ArrayBuffer instantiation"),St(y,c,d)}))}var Ne={1358424:(c,d,y,w)=>{if(typeof o>"u"||!o.cb)return 1;if(c=er(c>>>0),c.startsWith("./")&&(c=c.substring(2)),c=o.cb.get(c),!c)return 2;if(d>>>=0,y>>>=0,d+y>c.byteLength)return 3;try{return z.set(c.subarray(d,d+y),w>>>0>>>0),0}catch{return 4}}};function Qt(c){this.Ua=c-24,this.fb=function(d){oe[this.Ua+4>>>2>>>0]=d},this.eb=function(d){oe[this.Ua+8>>>2>>>0]=d},this.Ya=function(d,y){this.Za(),this.fb(d),this.eb(y)},this.Za=function(){oe[this.Ua+16>>>2>>>0]=0}}var Nt=0,jt=0,ln=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Kn=(c,d,y)=>{d>>>=0;var w=d+y;for(y=d;c[y]&&!(y>=w);)++y;if(16<y-d&&c.buffer&&ln)return ln.decode(c.subarray(d,y));for(w="";d<y;){var P=c[d++];if(P&128){var k=c[d++]&63;if((P&224)==192)w+=String.fromCharCode((P&31)<<6|k);else{var C=c[d++]&63;P=(P&240)==224?(P&15)<<12|k<<6|C:(P&7)<<18|k<<12|C<<6|c[d++]&63,65536>P?w+=String.fromCharCode(P):(P-=65536,w+=String.fromCharCode(55296|P>>10,56320|P&1023))}}else w+=String.fromCharCode(P)}return w},er=(c,d)=>(c>>>=0)?Kn(z,c,d):"",kr=c=>{for(var d=0,y=0;y<c.length;++y){var w=c.charCodeAt(y);127>=w?d++:2047>=w?d+=2:55296<=w&&57343>=w?(d+=4,++y):d+=3}return d},At=(c,d,y,w)=>{if(y>>>=0,!(0<w))return 0;var P=y;w=y+w-1;for(var k=0;k<c.length;++k){var C=c.charCodeAt(k);if(55296<=C&&57343>=C){var X=c.charCodeAt(++k);C=65536+((C&1023)<<10)|X&1023}if(127>=C){if(y>=w)break;d[y++>>>0]=C}else{if(2047>=C){if(y+1>=w)break;d[y++>>>0]=192|C>>6}else{if(65535>=C){if(y+2>=w)break;d[y++>>>0]=224|C>>12}else{if(y+3>=w)break;d[y++>>>0]=240|C>>18,d[y++>>>0]=128|C>>12&63}d[y++>>>0]=128|C>>6&63}d[y++>>>0]=128|C&63}}return d[y>>>0]=0,y-P},fn=c=>{if(c===null)return"null";var d=typeof c;return d==="object"||d==="array"||d==="function"?c.toString():""+c},fr,Je=c=>{for(var d="";z[c>>>0];)d+=fr[z[c++>>>0]];return d},Br={},qt={},Jn={},Pt;function Nr(c,d,y={}){var w=d.name;if(!c)throw new Pt(`type "${w}" must have a positive integer typeid pointer`);if(qt.hasOwnProperty(c)){if(y.gb)return;throw new Pt(`Cannot register type '${w}' twice`)}qt[c]=d,delete Jn[c],Br.hasOwnProperty(c)&&(d=Br[c],delete Br[c],d.forEach(P=>P()))}function Et(c,d,y={}){if(!("argPackAdvance"in d))throw new TypeError("registerType registeredInstance requires argPackAdvance");Nr(c,d,y)}var be=(c,d,y)=>{switch(d){case 1:return y?w=>J[w>>>0>>>0]:w=>z[w>>>0>>>0];case 2:return y?w=>me[w>>>1>>>0]:w=>Ie[w>>>1>>>0];case 4:return y?w=>V[w>>>2>>>0]:w=>oe[w>>>2>>>0];case 8:return y?w=>j[w>>>3]:w=>Se[w>>>3];default:throw new TypeError(`invalid integer width (${d}): ${c}`)}};function cn(){this.Ra=[void 0],this.ab=[]}var je=new cn;function pn(c){c>>>=0,c>=je.Ua&&--je.get(c).bb===0&&je.Za(c)}var qe=c=>{if(!c)throw new Pt("Cannot use deleted val. handle = "+c);return je.get(c).value},pt=c=>{switch(c){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return je.Ya({bb:1,value:c})}};function Q(c){return this.fromWireType(V[c>>>2>>>0])}var Rr=(c,d)=>{switch(d){case 4:return function(y){return this.fromWireType(_t[y>>>2>>>0])};case 8:return function(y){return this.fromWireType(lt[y>>>3>>>0])};default:throw new TypeError(`invalid float width (${d}): ${c}`)}};function Zn(c){return this.fromWireType(oe[c>>>2>>>0])}var cr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Qn=(c,d)=>{for(var y=c>>1,w=y+d/2;!(y>=w)&&Ie[y>>>0];)++y;if(y<<=1,32<y-c&&cr)return cr.decode(z.subarray(c>>>0,y>>>0));for(y="",w=0;!(w>=d/2);++w){var P=me[c+2*w>>>1>>>0];if(P==0)break;y+=String.fromCharCode(P)}return y},gi=(c,d,y)=>{if(y??=2147483647,2>y)return 0;y-=2;var w=d;y=y<2*c.length?y/2:c.length;for(var P=0;P<y;++P)me[d>>>1>>>0]=c.charCodeAt(P),d+=2;return me[d>>>1>>>0]=0,d-w},eo=c=>2*c.length,yi=(c,d)=>{for(var y=0,w="";!(y>=d/4);){var P=V[c+4*y>>>2>>>0];if(P==0)break;++y,65536<=P?(P-=65536,w+=String.fromCharCode(55296|P>>10,56320|P&1023)):w+=String.fromCharCode(P)}return w},to=(c,d,y)=>{if(d>>>=0,y??=2147483647,4>y)return 0;var w=d;y=w+y-4;for(var P=0;P<c.length;++P){var k=c.charCodeAt(P);if(55296<=k&&57343>=k){var C=c.charCodeAt(++P);k=65536+((k&1023)<<10)|C&1023}if(V[d>>>2>>>0]=k,d+=4,d+4>y)break}return V[d>>>2>>>0]=0,d-w},ro=c=>{for(var d=0,y=0;y<c.length;++y){var w=c.charCodeAt(y);55296<=w&&57343>=w&&++y,d+=4}return d},Mr=(c,d)=>{var y=qt[c];if(y===void 0)throw c=In(c),y=Je(c),dt(c),new Pt(d+" has unknown type "+y);return y},dn=(c,d,y)=>{var w=[];return c=c.toWireType(w,y),w.length&&(oe[d>>>2>>>0]=pt(w)),c},tr=[],no={},Gr=c=>{var d=no[c];return d===void 0?Je(c):d},hn=()=>typeof globalThis=="object"?globalThis:Function("return this")(),oo=c=>{var d=tr.length;return tr.push(c),d},io=(c,d)=>{for(var y=Array(c),w=0;w<c;++w)y[w]=Mr(oe[d+4*w>>>2>>>0],"parameter "+w);return y},mn=(c,d)=>Object.defineProperty(d,"name",{value:c});function ao(c){var d=Function;if(!(d instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof d} which is not a function`);var y=mn(d.name||"unknownFunctionName",function(){});return y.prototype=d.prototype,y=new y,c=d.apply(y,c),c instanceof Object?c:y}var Yt=c=>c%4===0&&(c%100!==0||c%400===0),bn=[0,31,60,91,121,152,182,213,244,274,305,335],gn=[0,31,59,90,120,151,181,212,243,273,304,334],yn=c=>{var d=kr(c)+1,y=nr(d);return y&&At(c,z,y,d),y},Ur=[],Vr={},Wr=()=>{if(!rr){var c={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},d;for(d in Vr)Vr[d]===void 0?delete c[d]:c[d]=Vr[d];var y=[];for(d in c)y.push(`${d}=${c[d]}`);rr=y}return rr},rr,Tn=[null,[],[]],Xt=[31,29,31,30,31,30,31,31,30,31,30,31],xn=[31,28,31,30,31,30,31,31,30,31,30,31];function so(c){var d=Array(kr(c)+1);return At(c,d,0,d.length),d}function vn(c,d,y,w){function P(E,le,_e){for(E=typeof E=="number"?E.toString():E||"";E.length<le;)E=_e[0]+E;return E}function k(E,le){return P(E,le,"0")}function C(E,le){function _e(zr){return 0>zr?-1:0<zr?1:0}var Rt;return(Rt=_e(E.getFullYear()-le.getFullYear()))===0&&(Rt=_e(E.getMonth()-le.getMonth()))===0&&(Rt=_e(E.getDate()-le.getDate())),Rt}function X(E){switch(E.getDay()){case 0:return new Date(E.getFullYear()-1,11,29);case 1:return E;case 2:return new Date(E.getFullYear(),0,3);case 3:return new Date(E.getFullYear(),0,2);case 4:return new Date(E.getFullYear(),0,1);case 5:return new Date(E.getFullYear()-1,11,31);case 6:return new Date(E.getFullYear()-1,11,30)}}function re(E){var le=E.Sa;for(E=new Date(new Date(E.Ta+1900,0,1).getTime());0<le;){var _e=E.getMonth(),Rt=(Yt(E.getFullYear())?Xt:xn)[_e];if(le>Rt-E.getDate())le-=Rt-E.getDate()+1,E.setDate(1),11>_e?E.setMonth(_e+1):(E.setMonth(0),E.setFullYear(E.getFullYear()+1));else{E.setDate(E.getDate()+le);break}}return _e=new Date(E.getFullYear()+1,0,4),le=X(new Date(E.getFullYear(),0,4)),_e=X(_e),0>=C(le,E)?0>=C(_e,E)?E.getFullYear()+1:E.getFullYear():E.getFullYear()-1}c>>>=0,d>>>=0,y>>>=0,w>>>=0;var Z=oe[w+40>>>2>>>0];w={kb:V[w>>>2>>>0],jb:V[w+4>>>2>>>0],Wa:V[w+8>>>2>>>0],$a:V[w+12>>>2>>>0],Xa:V[w+16>>>2>>>0],Ta:V[w+20>>>2>>>0],Na:V[w+24>>>2>>>0],Sa:V[w+28>>>2>>>0],mb:V[w+32>>>2>>>0],ib:V[w+36>>>2>>>0],lb:Z?er(Z):""},y=er(y),Z={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var we in Z)y=y.replace(new RegExp(we,"g"),Z[we]);var Ye="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ut="January February March April May June July August September October November December".split(" ");Z={"%a":E=>Ye[E.Na].substring(0,3),"%A":E=>Ye[E.Na],"%b":E=>ut[E.Xa].substring(0,3),"%B":E=>ut[E.Xa],"%C":E=>k((E.Ta+1900)/100|0,2),"%d":E=>k(E.$a,2),"%e":E=>P(E.$a,2," "),"%g":E=>re(E).toString().substring(2),"%G":E=>re(E),"%H":E=>k(E.Wa,2),"%I":E=>(E=E.Wa,E==0?E=12:12<E&&(E-=12),k(E,2)),"%j":E=>{for(var le=0,_e=0;_e<=E.Xa-1;le+=(Yt(E.Ta+1900)?Xt:xn)[_e++]);return k(E.$a+le,3)},"%m":E=>k(E.Xa+1,2),"%M":E=>k(E.jb,2),"%n":()=>`
`,"%p":E=>0<=E.Wa&&12>E.Wa?"AM":"PM","%S":E=>k(E.kb,2),"%t":()=>"	","%u":E=>E.Na||7,"%U":E=>k(Math.floor((E.Sa+7-E.Na)/7),2),"%V":E=>{var le=Math.floor((E.Sa+7-(E.Na+6)%7)/7);if(2>=(E.Na+371-E.Sa-2)%7&&le++,le)le==53&&(_e=(E.Na+371-E.Sa)%7,_e==4||_e==3&&Yt(E.Ta)||(le=1));else{le=52;var _e=(E.Na+7-E.Sa-1)%7;(_e==4||_e==5&&Yt(E.Ta%400-1))&&le++}return k(le,2)},"%w":E=>E.Na,"%W":E=>k(Math.floor((E.Sa+7-(E.Na+6)%7)/7),2),"%y":E=>(E.Ta+1900).toString().substring(2),"%Y":E=>E.Ta+1900,"%z":E=>{E=E.ib;var le=0<=E;return E=Math.abs(E)/60,(le?"+":"-")+("0000"+(E/60*100+E%60)).slice(-4)},"%Z":E=>E.lb,"%%":()=>"%"},y=y.replace(/%%/g,"\0\0");for(we in Z)y.includes(we)&&(y=y.replace(new RegExp(we,"g"),Z[we](w)));return y=y.replace(/\0\0/g,"%"),we=so(y),we.length>d?0:(J.set(we,c>>>0),we.length-1)}for(var wn=Array(256),pr=0;256>pr;++pr)wn[pr]=String.fromCharCode(pr);fr=wn,Pt=o.BindingError=class extends Error{constructor(c){super(c),this.name="BindingError"}},o.InternalError=class extends Error{constructor(c){super(c),this.name="InternalError"}},Object.assign(cn.prototype,{get(c){return this.Ra[c]},has(c){return this.Ra[c]!==void 0},Ya(c){var d=this.ab.pop()||this.Ra.length;return this.Ra[d]=c,d},Za(c){this.Ra[c]=void 0,this.ab.push(c)}}),je.Ra.push({value:void 0},{value:null},{value:!0},{value:!1}),je.Ua=je.Ra.length,o.count_emval_handles=()=>{for(var c=0,d=je.Ua;d<je.Ra.length;++d)je.Ra[d]!==void 0&&++c;return c};var _n={a:function(c,d,y){throw c>>>=0,new Qt(c).Ya(d>>>0,y>>>0),Nt=c,jt++,Nt},t:function(){return 0},$:function(){},M:function(){},O:function(){},G:function(){return 0},Z:function(){},U:function(){},Y:function(){},B:function(){},N:function(){},K:function(){},_:function(){},L:function(){},E:function(c,d,y,w,P){d>>>=0,d=Je(d);var k=d.indexOf("u")!=-1;k&&(P=(1n<<64n)-1n),Et(c>>>0,{name:d,fromWireType:C=>C,toWireType:function(C,X){if(typeof X!="bigint"&&typeof X!="number")throw new TypeError(`Cannot convert "${fn(X)}" to ${this.name}`);if(X<w||X>P)throw new TypeError(`Passing a number "${fn(X)}" from JS side to C/C++ side to an argument of type "${d}", which is outside the valid range [${w}, ${P}]!`);return X},argPackAdvance:8,readValueFromPointer:be(d,y>>>0,!k),Va:null})},da:function(c,d,y,w){d=Je(d>>>0),Et(c>>>0,{name:d,fromWireType:function(P){return!!P},toWireType:function(P,k){return k?y:w},argPackAdvance:8,readValueFromPointer:function(P){return this.fromWireType(z[P>>>0])},Va:null})},ca:function(c,d){d=Je(d>>>0),Et(c>>>0,{name:d,fromWireType:y=>{var w=qe(y);return pn(y),w},toWireType:(y,w)=>pt(w),argPackAdvance:8,readValueFromPointer:Q,Va:null})},D:function(c,d,y){d=Je(d>>>0),Et(c>>>0,{name:d,fromWireType:w=>w,toWireType:(w,P)=>P,argPackAdvance:8,readValueFromPointer:Rr(d,y>>>0),Va:null})},q:function(c,d,y,w,P){if(c>>>=0,y>>>=0,d=Je(d>>>0),P===-1&&(P=4294967295),P=X=>X,w===0){var k=32-8*y;P=X=>X<<k>>>k}var C=d.includes("unsigned")?function(X,re){return re>>>0}:function(X,re){return re};Et(c,{name:d,fromWireType:P,toWireType:C,argPackAdvance:8,readValueFromPointer:be(d,y,w!==0),Va:null})},l:function(c,d,y){function w(k){return new P(J.buffer,oe[k+4>>>2>>>0],oe[k>>>2>>>0])}var P=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][d];y=Je(y>>>0),Et(c>>>0,{name:y,fromWireType:w,argPackAdvance:8,readValueFromPointer:w},{gb:!0})},F:function(c,d){d=Je(d>>>0);var y=d==="std::string";Et(c>>>0,{name:d,fromWireType:function(w){var P=oe[w>>>2>>>0],k=w+4;if(y)for(var C=k,X=0;X<=P;++X){var re=k+X;if(X==P||z[re>>>0]==0){if(C=er(C,re-C),Z===void 0)var Z=C;else Z+=String.fromCharCode(0),Z+=C;C=re+1}}else{for(Z=Array(P),X=0;X<P;++X)Z[X]=String.fromCharCode(z[k+X>>>0]);Z=Z.join("")}return dt(w),Z},toWireType:function(w,P){P instanceof ArrayBuffer&&(P=new Uint8Array(P));var k=typeof P=="string";if(!(k||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int8Array))throw new Pt("Cannot pass non-string to std::string");var C=y&&k?kr(P):P.length,X=nr(4+C+1),re=X+4;if(oe[X>>>2>>>0]=C,y&&k)At(P,z,re,C+1);else if(k)for(k=0;k<C;++k){var Z=P.charCodeAt(k);if(255<Z)throw dt(re),new Pt("String has UTF-16 code units that do not fit in 8 bits");z[re+k>>>0]=Z}else for(k=0;k<C;++k)z[re+k>>>0]=P[k];return w!==null&&w.push(dt,X),X},argPackAdvance:8,readValueFromPointer:Zn,Va(w){dt(w)}})},v:function(c,d,y){if(d>>>=0,y>>>=0,y=Je(y),d===2)var w=Qn,P=gi,k=eo,C=()=>Ie,X=1;else d===4&&(w=yi,P=to,k=ro,C=()=>oe,X=2);Et(c>>>0,{name:y,fromWireType:re=>{for(var Z=oe[re>>>2>>>0],we=C(),Ye,ut=re+4,E=0;E<=Z;++E){var le=re+4+E*d;(E==Z||we[le>>>X]==0)&&(ut=w(ut,le-ut),Ye===void 0?Ye=ut:(Ye+=String.fromCharCode(0),Ye+=ut),ut=le+d)}return dt(re),Ye},toWireType:(re,Z)=>{if(typeof Z!="string")throw new Pt(`Cannot pass non-string to C++ string type ${y}`);var we=k(Z),Ye=nr(4+we+d);return oe[Ye>>>2]=we>>X,P(Z,Ye+4,we+d),re!==null&&re.push(dt,Ye),Ye},argPackAdvance:8,readValueFromPointer:Q,Va(re){dt(re)}})},ea:function(c,d){d=Je(d>>>0),Et(c>>>0,{hb:!0,name:d,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},aa:()=>1,o:function(c,d,y){return d>>>=0,y>>>=0,c=qe(c>>>0),d=Mr(d,"emval::as"),dn(d,y,c)},x:function(c,d,y,w){return y>>>=0,w>>>=0,c=tr[c>>>0],d=qe(d>>>0),c(null,d,y,w)},j:function(c,d,y,w,P){return y>>>=0,w>>>=0,P>>>=0,c=tr[c>>>0],d=qe(d>>>0),y=Gr(y),c(d,d[y],w,P)},b:pn,w:function(c,d){return d>>>=0,c=qe(c>>>0),d=qe(d),c==d},s:function(c){return c>>>=0,c===0?pt(hn()):(c=Gr(c),pt(hn()[c]))},i:function(c,d,y){d=io(c,d>>>0);var w=d.shift();c--;var P=`return function (obj, func, destructorsRef, args) {
`,k=0,C=[];y===0&&C.push("obj");for(var X=["retType"],re=[w],Z=0;Z<c;++Z)C.push("arg"+Z),X.push("argType"+Z),re.push(d[Z]),P+=`  var arg${Z} = argType${Z}.readValueFromPointer(args${k?"+"+k:""});
`,k+=d[Z].argPackAdvance;for(P+=`  var rv = ${y===1?"new func":"func.call"}(${C.join(", ")});
`,Z=0;Z<c;++Z)d[Z].deleteObject&&(P+=`  argType${Z}.deleteObject(arg${Z});
`);return w.hb||(X.push("emval_returnValue"),re.push(dn),P+=`  return emval_returnValue(retType, destructorsRef, rv);
`),X.push(P+`};
`),c=ao(X).apply(null,re),y=`methodCaller<(${d.map(we=>we.name).join(", ")}) => ${w.name}>`,oo(mn(y,c))},p:function(c,d){return d>>>=0,c=qe(c>>>0),d=qe(d),pt(c[d])},c:function(c){c>>>=0,4<c&&(je.get(c).bb+=1)},r:function(){return pt([])},k:function(c){c=qe(c>>>0);for(var d=Array(c.length),y=0;y<c.length;y++)d[y]=c[y];return pt(d)},d:function(c){return pt(Gr(c>>>0))},h:function(){return pt({})},g:function(c){c>>>=0;for(var d=qe(c);d.length;){var y=d.pop();d.pop()(y)}pn(c)},f:function(c,d,y){d>>>=0,y>>>=0,c=qe(c>>>0),d=qe(d),y=qe(y),c[d]=y},e:function(c,d){return d>>>=0,c=Mr(c>>>0,"_emval_take_value"),c=c.readValueFromPointer(d),pt(c)},R:function(c,d){c=-9007199254740992>c||9007199254740992<c?NaN:Number(c),d>>>=0,c=new Date(1e3*c),V[d>>>2>>>0]=c.getUTCSeconds(),V[d+4>>>2>>>0]=c.getUTCMinutes(),V[d+8>>>2>>>0]=c.getUTCHours(),V[d+12>>>2>>>0]=c.getUTCDate(),V[d+16>>>2>>>0]=c.getUTCMonth(),V[d+20>>>2>>>0]=c.getUTCFullYear()-1900,V[d+24>>>2>>>0]=c.getUTCDay(),V[d+28>>>2>>>0]=(c.getTime()-Date.UTC(c.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},S:function(c,d){c=-9007199254740992>c||9007199254740992<c?NaN:Number(c),d>>>=0,c=new Date(1e3*c),V[d>>>2>>>0]=c.getSeconds(),V[d+4>>>2>>>0]=c.getMinutes(),V[d+8>>>2>>>0]=c.getHours(),V[d+12>>>2>>>0]=c.getDate(),V[d+16>>>2>>>0]=c.getMonth(),V[d+20>>>2>>>0]=c.getFullYear()-1900,V[d+24>>>2>>>0]=c.getDay(),V[d+28>>>2>>>0]=(Yt(c.getFullYear())?bn:gn)[c.getMonth()]+c.getDate()-1|0,V[d+36>>>2>>>0]=-(60*c.getTimezoneOffset());var y=new Date(c.getFullYear(),6,1).getTimezoneOffset(),w=new Date(c.getFullYear(),0,1).getTimezoneOffset();V[d+32>>>2>>>0]=(y!=w&&c.getTimezoneOffset()==Math.min(w,y))|0},T:function(c){c>>>=0;var d=new Date(V[c+20>>>2>>>0]+1900,V[c+16>>>2>>>0],V[c+12>>>2>>>0],V[c+8>>>2>>>0],V[c+4>>>2>>>0],V[c>>>2>>>0],0),y=V[c+32>>>2>>>0],w=d.getTimezoneOffset(),P=new Date(d.getFullYear(),6,1).getTimezoneOffset(),k=new Date(d.getFullYear(),0,1).getTimezoneOffset(),C=Math.min(k,P);return 0>y?V[c+32>>>2>>>0]=+(P!=k&&C==w):0<y!=(C==w)&&(P=Math.max(k,P),d.setTime(d.getTime()+6e4*((0<y?C:P)-w))),V[c+24>>>2>>>0]=d.getDay(),V[c+28>>>2>>>0]=(Yt(d.getFullYear())?bn:gn)[d.getMonth()]+d.getDate()-1|0,V[c>>>2>>>0]=d.getSeconds(),V[c+4>>>2>>>0]=d.getMinutes(),V[c+8>>>2>>>0]=d.getHours(),V[c+12>>>2>>>0]=d.getDate(),V[c+16>>>2>>>0]=d.getMonth(),V[c+20>>>2>>>0]=d.getYear(),c=d.getTime(),isNaN(c)?(V[On()>>>2>>>0]=61,c=-1):c/=1e3,BigInt(c)},P:function(){return-52},Q:function(){},I:function(c,d,y){function w(re){return(re=re.toTimeString().match(/\(([A-Za-z ]+)\)$/))?re[1]:"GMT"}y>>>=0;var P=new Date().getFullYear(),k=new Date(P,0,1),C=new Date(P,6,1);P=k.getTimezoneOffset();var X=C.getTimezoneOffset();oe[c>>>0>>>2>>>0]=60*Math.max(P,X),V[d>>>0>>>2>>>0]=+(P!=X),c=w(k),d=w(C),c=yn(c),d=yn(d),X<P?(oe[y>>>2>>>0]=c,oe[y+4>>>2>>>0]=d):(oe[y>>>2>>>0]=d,oe[y+4>>>2>>>0]=c)},y:()=>{ft("")},fa:function(c,d,y){c>>>=0,d>>>=0,y>>>=0,Ur.length=0;for(var w;w=z[d++>>>0];){var P=w!=105;P&=w!=112,y+=P&&y%8?4:0,Ur.push(w==112?oe[y>>>2>>>0]:w==106?j[y>>>3]:w==105?V[y>>>2>>>0]:lt[y>>>3>>>0]),y+=P?8:4}return Ne[c].apply(null,Ur)},C:()=>Date.now(),J:function(){return 4294901760},n:()=>performance.now(),H:function(c){c>>>=0;var d=z.length;if(4294901760<c)return!1;for(var y=1;4>=y;y*=2){var w=d*(1+.2/y);w=Math.min(w,c+100663296);var P=Math;w=Math.max(c,w);e:{P=(P.min.call(P,4294901760,w+(65536-w%65536)%65536)-F.buffer.byteLength+65535)/65536;try{F.grow(P),se();var k=1;break e}catch{}k=void 0}if(k)return!0}return!1},W:function(c,d){c>>>=0,d>>>=0;var y=0;return Wr().forEach((w,P)=>{var k=d+y;for(P=oe[c+4*P>>>2>>>0]=k,k=0;k<w.length;++k)J[P++>>>0>>>0]=w.charCodeAt(k);J[P>>>0>>>0]=0,y+=w.length+1}),0},X:function(c,d){c>>>=0,d>>>=0;var y=Wr();oe[c>>>2>>>0]=y.length;var w=0;return y.forEach(P=>w+=P.length+1),oe[d>>>2>>>0]=w,0},u:()=>52,A:function(){return 52},V:function(){return 70},z:function(c,d,y,w){d>>>=0,y>>>=0,w>>>=0;for(var P=0,k=0;k<y;k++){var C=oe[d>>>2>>>0],X=oe[d+4>>>2>>>0];d+=8;for(var re=0;re<X;re++){var Z=z[C+re>>>0],we=Tn[c];Z===0||Z===10?((c===1?A:L)(Kn(we,0)),we.length=0):we.push(Z)}P+=X}return oe[w>>>2>>>0]=P,0},ba:vn,m:function(c,d,y,w){return vn(c>>>0,d>>>0,y>>>0,w>>>0)}},te=function(){function c(y){return te=y.exports,te=Ti(),F=te.ga,se(),tt.unshift(te.ha),st--,st==0&&(Be!==null&&(clearInterval(Be),Be=null),Re&&(y=Re,Re=null,y())),te}var d={a:_n};if(st++,o.instantiateWasm)try{return o.instantiateWasm(d,c)}catch(y){L(`Module.instantiateWasm callback failed with error: ${y}`),r(y)}return Me(d,function(y){c(y.instance)}).catch(r),{}}();o._OrtInit=(c,d)=>(o._OrtInit=te.ia)(c,d),o._OrtGetLastError=(c,d)=>(o._OrtGetLastError=te.ja)(c,d),o._OrtCreateSessionOptions=(c,d,y,w,P,k,C,X,re,Z)=>(o._OrtCreateSessionOptions=te.ka)(c,d,y,w,P,k,C,X,re,Z),o._OrtAppendExecutionProvider=(c,d)=>(o._OrtAppendExecutionProvider=te.la)(c,d),o._OrtAddFreeDimensionOverride=(c,d,y)=>(o._OrtAddFreeDimensionOverride=te.ma)(c,d,y),o._OrtAddSessionConfigEntry=(c,d,y)=>(o._OrtAddSessionConfigEntry=te.na)(c,d,y),o._OrtReleaseSessionOptions=c=>(o._OrtReleaseSessionOptions=te.oa)(c),o._OrtCreateSession=(c,d,y)=>(o._OrtCreateSession=te.pa)(c,d,y),o._OrtReleaseSession=c=>(o._OrtReleaseSession=te.qa)(c),o._OrtGetInputOutputCount=(c,d,y)=>(o._OrtGetInputOutputCount=te.ra)(c,d,y),o._OrtGetInputName=(c,d)=>(o._OrtGetInputName=te.sa)(c,d),o._OrtGetOutputName=(c,d)=>(o._OrtGetOutputName=te.ta)(c,d),o._OrtFree=c=>(o._OrtFree=te.ua)(c),o._OrtCreateTensor=(c,d,y,w,P,k)=>(o._OrtCreateTensor=te.va)(c,d,y,w,P,k),o._OrtGetTensorData=(c,d,y,w,P)=>(o._OrtGetTensorData=te.wa)(c,d,y,w,P),o._OrtReleaseTensor=c=>(o._OrtReleaseTensor=te.xa)(c),o._OrtCreateRunOptions=(c,d,y,w)=>(o._OrtCreateRunOptions=te.ya)(c,d,y,w),o._OrtAddRunConfigEntry=(c,d,y)=>(o._OrtAddRunConfigEntry=te.za)(c,d,y),o._OrtReleaseRunOptions=c=>(o._OrtReleaseRunOptions=te.Aa)(c),o._OrtCreateBinding=c=>(o._OrtCreateBinding=te.Ba)(c),o._OrtBindInput=(c,d,y)=>(o._OrtBindInput=te.Ca)(c,d,y),o._OrtBindOutput=(c,d,y,w)=>(o._OrtBindOutput=te.Da)(c,d,y,w),o._OrtClearBoundOutputs=c=>(o._OrtClearBoundOutputs=te.Ea)(c),o._OrtReleaseBinding=c=>(o._OrtReleaseBinding=te.Fa)(c),o._OrtRunWithBinding=(c,d,y,w,P)=>(o._OrtRunWithBinding=te.Ga)(c,d,y,w,P),o._OrtRun=(c,d,y,w,P,k,C,X)=>(o._OrtRun=te.Ha)(c,d,y,w,P,k,C,X),o._OrtEndProfiling=c=>(o._OrtEndProfiling=te.Ia)(c);var On=()=>(On=te.Ja)(),nr=o._malloc=c=>(nr=o._malloc=te.Ka)(c),dt=o._free=c=>(dt=o._free=te.La)(c),In=c=>(In=te.Ma)(c),Sn=()=>(Sn=te.Oa)(),An=c=>(An=te.Pa)(c),Pn=c=>(Pn=te.Qa)(c);function Ti(){var c=te;c=Object.assign({},c);var d=w=>()=>w()>>>0,y=w=>P=>w(P)>>>0;return c.Ja=d(c.Ja),c.Ka=y(c.Ka),c.Ma=y(c.Ma),c.Oa=d(c.Oa),c.Qa=y(c.Qa),c}o.stackAlloc=Pn,o.stackSave=Sn,o.stackRestore=An,o.UTF8ToString=er,o.stringToUTF8=(c,d,y)=>At(c,z,d,y),o.lengthBytesUTF8=kr;var dr;Re=function c(){dr||En(),dr||(Re=c)};function En(){if(!(0<st)){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;){var c=o.preRun.shift();He.unshift(c)}for(;0<He.length;)He.shift()(o);if(!(0<st||dr||(dr=!0,o.calledRun=!0,M))){for(;0<tt.length;)tt.shift()(o);for(e(o);0<at.length;)at.shift()(o)}}}return En(),t.ready}})();typeof Lp=="object"&&typeof Fa=="object"?Fa.exports=Dp:typeof define=="function"&&define.amd&&define([],()=>Dp)});var Cp=ye(()=>{});var Fp=ye(()=>{});var kp={};Hr(kp,{cpus:()=>ng});var ng,Bp=$(()=>{ng=void 0});var Mp=ye((Rp,ka)=>{"use strict";var Np=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),function(t={}){function o(){return Se.buffer!=tt.buffer&&ft(),tt}function e(){return Se.buffer!=tt.buffer&&ft(),at}function r(){return Se.buffer!=tt.buffer&&ft(),st}function n(){return Se.buffer!=tt.buffer&&ft(),Be}function s(){return Se.buffer!=tt.buffer&&ft(),Re}var i=t,u,l;i.ready=new Promise((p,b)=>{u=p,l=b});var f=Object.assign({},i),h="./this.program",m=(p,b)=>{throw b},v=typeof window=="object",I=typeof importScripts=="function",_=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A=i.ENVIRONMENT_IS_PTHREAD||!1,L="";function F(p){return i.locateFile?i.locateFile(p,L):L+p}var M,J,z;if(_){var me=(La(),mr(Da)),Ie=(Ca(),mr($a));L=I?Ie.dirname(L)+"/":__dirname+"/",M=(b,T)=>(b=Nt(b)?new URL(b):Ie.normalize(b),me.readFileSync(b,T?void 0:"utf8")),z=b=>(b=M(b,!0),b.buffer||(b=new Uint8Array(b)),b),J=(b,T,S,N=!0)=>{b=Nt(b)?new URL(b):Ie.normalize(b),me.readFile(b,N?void 0:"utf8",(R,H)=>{R?S(R):T(N?H.buffer:H)})},!i.thisProgram&&1<process.argv.length&&(h=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),m=(b,T)=>{throw process.exitCode=b,T},i.inspect=()=>"[Emscripten Module object]";let p;try{p=Cp()}catch(b){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),b}global.Worker=p.Worker}else(v||I)&&(I?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),typeof a<"u"&&a&&(L=a),L.indexOf("blob:")!==0?L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1):L="",_||(M=p=>{var b=new XMLHttpRequest;return b.open("GET",p,!1),b.send(null),b.responseText},I&&(z=p=>{var b=new XMLHttpRequest;return b.open("GET",p,!1),b.responseType="arraybuffer",b.send(null),new Uint8Array(b.response)}),J=(p,b,T)=>{var S=new XMLHttpRequest;S.open("GET",p,!0),S.responseType="arraybuffer",S.onload=()=>{S.status==200||S.status==0&&S.response?b(S.response):T()},S.onerror=T,S.send(null)}));_&&typeof performance>"u"&&(global.performance=Fp().performance);var V=console.log.bind(console),oe=console.error.bind(console);_&&(V=(...p)=>me.writeSync(1,p.join(" ")+`
`),oe=(...p)=>me.writeSync(2,p.join(" ")+`
`));var _t=V,j=oe;Object.assign(i,f),f=null,typeof WebAssembly!="object"&&Ne("no native wasm support detected");var Se,lt,se=!1,He,tt,at,st,Be,Re;function ft(){var p=Se.buffer;i.HEAP8=tt=new Int8Array(p),i.HEAP16=new Int16Array(p),i.HEAPU8=at=new Uint8Array(p),i.HEAPU16=new Uint16Array(p),i.HEAP32=st=new Int32Array(p),i.HEAPU32=Be=new Uint32Array(p),i.HEAPF32=new Float32Array(p),i.HEAPF64=Re=new Float64Array(p)}var Bt=16777216;if(A)Se=i.wasmMemory;else if(i.wasmMemory)Se=i.wasmMemory;else if(Se=new WebAssembly.Memory({initial:Bt/65536,maximum:65536,shared:!0}),!(Se.buffer instanceof SharedArrayBuffer))throw j("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&j("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");ft(),Bt=Se.buffer.byteLength;var Ot=[],ct=[],Fr=[],Ke=0,It=null,St=null;function Me(){if(Ke--,Ke==0&&(It!==null&&(clearInterval(It),It=null),St)){var p=St;St=null,p()}}function Ne(p){throw p="Aborted("+p+")",j(p),se=!0,He=1,p=new WebAssembly.RuntimeError(p+". Build with -sASSERTIONS for more info."),l(p),p}var Qt=p=>p.startsWith("data:application/octet-stream;base64,"),Nt=p=>p.startsWith("file://"),jt;jt="ort-wasm-threaded.wasm",Qt(jt)||(jt=F(jt));function ln(p){if(z)return z(p);throw"both async and sync fetching of the wasm failed"}function Kn(p){if(v||I){if(typeof fetch=="function"&&!Nt(p))return fetch(p,{credentials:"same-origin"}).then(b=>{if(!b.ok)throw"failed to load wasm binary file at '"+p+"'";return b.arrayBuffer()}).catch(()=>ln(p));if(J)return new Promise((b,T)=>{J(p,S=>b(new Uint8Array(S)),T)})}return Promise.resolve().then(()=>ln(p))}function er(p,b,T){return Kn(p).then(S=>WebAssembly.instantiate(S,b)).then(S=>S).then(T,S=>{j(`failed to asynchronously prepare wasm: ${S}`),Ne(S)})}function kr(p,b){var T=jt;return typeof WebAssembly.instantiateStreaming!="function"||Qt(T)||Nt(T)||_||typeof fetch!="function"?er(T,p,b):fetch(T,{credentials:"same-origin"}).then(S=>WebAssembly.instantiateStreaming(S,p).then(b,function(N){return j(`wasm streaming compile failed: ${N}`),j("falling back to ArrayBuffer instantiation"),er(T,p,b)}))}var At,fn={920284:(p,b,T,S)=>{if(typeof i>"u"||!i.cb)return 1;if(p=Nr(p>>>0),p.startsWith("./")&&(p=p.substring(2)),p=i.cb.get(p),!p)return 2;if(b>>>=0,T>>>=0,S>>>=0,b+T>p.byteLength)return 3;try{return e().set(p.subarray(b,b+T),S>>>0),0}catch{return 4}}};function fr(p){this.name="ExitStatus",this.message=`Program terminated with exit(${p})`,this.status=p}var Je=p=>{p.terminate(),p.onmessage=()=>{}},Br=p=>{Q.Pa.length==0&&(qe(),Q.Ya(Q.Pa[0]));var b=Q.Pa.pop();if(!b)return 6;Q.Qa.push(b),Q.Ma[p.Oa]=b,b.Oa=p.Oa;var T={cmd:"run",start_routine:p.kb,arg:p.hb,pthread_ptr:p.Oa};return _&&b.unref(),b.postMessage(T,p.qb),0},qt=0,Jn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Pt=(p,b,T)=>{b>>>=0;var S=b+T;for(T=b;p[T]&&!(T>=S);)++T;if(16<T-b&&p.buffer&&Jn)return Jn.decode(p.buffer instanceof SharedArrayBuffer?p.slice(b,T):p.subarray(b,T));for(S="";b<T;){var N=p[b++];if(N&128){var R=p[b++]&63;if((N&224)==192)S+=String.fromCharCode((N&31)<<6|R);else{var H=p[b++]&63;N=(N&240)==224?(N&15)<<12|R<<6|H:(N&7)<<18|R<<12|H<<6|p[b++]&63,65536>N?S+=String.fromCharCode(N):(N-=65536,S+=String.fromCharCode(55296|N>>10,56320|N&1023))}}else S+=String.fromCharCode(N)}return S},Nr=(p,b)=>(p>>>=0)?Pt(e(),p,b):"",Et=p=>{var b=zr();return p=p(),uo(b),p};function be(p,b){var T=arguments.length-2,S=arguments;return Et(()=>{for(var N=xi(8*T),R=N>>>3,H=0;H<T;H++){var Ae=S[2+H];s()[R+H>>>0]=Ae}return Ye(p,T,N,b)})}function cn(p){if(A)return be(0,1,p);He=p,0<qt||(Q.lb(),i.onExit?.(p),se=!0),m(p,new fr(p))}var je=p=>{if(He=p,A)throw Zn(p),"unwind";cn(p)};function pn(){for(var p=i.numThreads;p--;)qe();Ot.unshift(()=>{Ke++,pt(()=>Me())})}function qe(){var p=F("ort-wasm-threaded.worker.js");p=new Worker(p),Q.Pa.push(p)}function pt(p){A?p():Promise.all(Q.Pa.map(Q.Ya)).then(p)}var Q={Pa:[],Qa:[],bb:[],Ma:{},Wa(){A?(Q.receiveObjectTransfer=Q.jb,Q.threadInitTLS=Q.ab,Q.setExitStatus=Q.$a):pn()},$a:p=>He=p,tb:["$terminateWorker"],lb:()=>{for(var p of Q.Qa)Je(p);for(p of Q.Pa)Je(p);Q.Pa=[],Q.Qa=[],Q.Ma=[]},Za:p=>{var b=p.Oa;delete Q.Ma[b],Q.Pa.push(p),Q.Qa.splice(Q.Qa.indexOf(p),1),p.Oa=0,ut(b)},jb(){},ab(){Q.bb.forEach(p=>p())},Ya:p=>new Promise(b=>{p.onmessage=R=>{R=R.data;var H=R.cmd;if(R.targetThread&&R.targetThread!=re()){var Ae=Q.Ma[R.targetThread];Ae?Ae.postMessage(R,R.transferList):j(`Internal error! Worker sent a message "${H}" to target pthread ${R.targetThread}, but that thread no longer exists!`)}else H==="checkMailbox"?rr():H==="spawnThread"?Br(R):H==="cleanupThread"?Q.Za(Q.Ma[R.thread]):H==="killThread"?(R=R.thread,H=Q.Ma[R],delete Q.Ma[R],Je(H),ut(R),Q.Qa.splice(Q.Qa.indexOf(H),1),H.Oa=0):H==="cancelThread"?Q.Ma[R.thread].postMessage({cmd:"cancel"}):H==="loaded"?(p.loaded=!0,_&&!p.Oa&&p.unref(),b(p)):H==="alert"?alert(`Thread ${R.threadId}: ${R.text}`):R.target==="setimmediate"?p.postMessage(R):H==="callHandler"?i[R.handler](...R.args):H&&j(`worker sent an unknown command ${H}`)},p.onerror=R=>{throw j(`worker sent an error! ${R.filename}:${R.lineno}: ${R.message}`),R},_&&(p.on("message",R=>p.onmessage({data:R})),p.on("error",R=>p.onerror(R)));var T=[],S=["onExit"],N;for(N of S)i.hasOwnProperty(N)&&T.push(N);p.postMessage({cmd:"load",handlers:T,urlOrBlob:i.mainScriptUrlOrBlob||a,wasmMemory:Se,wasmModule:lt})})};i.PThread=Q;var Rr=p=>{for(;0<p.length;)p.shift()(i)};i.establishStackSpace=()=>{var p=re(),b=n()[p+52>>>2>>>0];p=n()[p+56>>>2>>>0],Rt(b,b-p),uo(b)};function Zn(p){if(A)return be(1,0,p);je(p)}var cr=[],Qn;i.invokeEntryPoint=(p,b)=>{var T=cr[p];T||(p>=cr.length&&(cr.length=p+1),cr[p]=T=Qn.get(p)),p=T(b),0<qt?Q.$a(p):E(p)};function gi(p){this.Va=p-24,this.gb=function(b){n()[this.Va+4>>>2>>>0]=b},this.fb=function(b){n()[this.Va+8>>>2>>>0]=b},this.Wa=function(b,T){this.eb(),this.gb(b),this.fb(T)},this.eb=function(){n()[this.Va+16>>>2>>>0]=0}}var eo=0,yi=0;function to(p,b,T,S){return A?be(2,1,p,b,T,S):ro(p,b,T,S)}function ro(p,b,T,S){if(p>>>=0,b>>>=0,T>>>=0,S>>>=0,typeof SharedArrayBuffer>"u")return j("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var N=[];return A&&N.length===0?to(p,b,T,S):(p={kb:T,Oa:p,hb:S,qb:N},A?(p.sb="spawnThread",postMessage(p,N),0):Br(p))}function Mr(p,b,T){return A?be(3,1,p,b,T):0}function dn(p,b){if(A)return be(4,1,p,b)}var tr=p=>{for(var b=0,T=0;T<p.length;++T){var S=p.charCodeAt(T);127>=S?b++:2047>=S?b+=2:55296<=S&&57343>=S?(b+=4,++T):b+=3}return b},no=(p,b,T,S)=>{if(T>>>=0,!(0<S))return 0;var N=T;S=T+S-1;for(var R=0;R<p.length;++R){var H=p.charCodeAt(R);if(55296<=H&&57343>=H){var Ae=p.charCodeAt(++R);H=65536+((H&1023)<<10)|Ae&1023}if(127>=H){if(T>=S)break;b[T++>>>0]=H}else{if(2047>=H){if(T+1>=S)break;b[T++>>>0]=192|H>>6}else{if(65535>=H){if(T+2>=S)break;b[T++>>>0]=224|H>>12}else{if(T+3>=S)break;b[T++>>>0]=240|H>>18,b[T++>>>0]=128|H>>12&63}b[T++>>>0]=128|H>>6&63}b[T++>>>0]=128|H&63}}return b[T>>>0]=0,T-N},Gr=(p,b,T)=>no(p,e(),b,T);function hn(p,b){if(A)return be(5,1,p,b)}function oo(p,b,T){if(A)return be(6,1,p,b,T)}function io(p,b,T){return A?be(7,1,p,b,T):0}function mn(p,b){if(A)return be(8,1,p,b)}function ao(p,b,T){if(A)return be(9,1,p,b,T)}function Yt(p,b,T,S){if(A)return be(10,1,p,b,T,S)}function bn(p,b,T,S){if(A)return be(11,1,p,b,T,S)}function gn(p,b,T,S){if(A)return be(12,1,p,b,T,S)}function yn(p){if(A)return be(13,1,p)}function Ur(p,b){if(A)return be(14,1,p,b)}function Vr(p,b,T){if(A)return be(15,1,p,b,T)}function Wr(p){p>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(r(),p>>>2,p).value.then(rr),p+=128,Atomics.store(r(),p>>>2,1))}i.__emscripten_thread_mailbox_await=Wr;var rr=()=>{var p=re();if(p&&(Wr(p),p=le,!se))try{if(p(),!(0<qt))try{A?E(He):je(He)}catch(b){b instanceof fr||b=="unwind"||m(1,b)}}catch(b){b instanceof fr||b=="unwind"||m(1,b)}};i.checkMailbox=rr;var Tn=[],Xt=p=>p%4===0&&(p%100!==0||p%400===0),xn=[0,31,60,91,121,152,182,213,244,274,305,335],so=[0,31,59,90,120,151,181,212,243,273,304,334];function vn(p,b,T,S,N,R,H,Ae){return A?be(16,1,p,b,T,S,N,R,H,Ae):-52}function wn(p,b,T,S,N,R,H){if(A)return be(17,1,p,b,T,S,N,R,H)}var pr=p=>{var b=tr(p)+1,T=Z(b);return T&&Gr(p,T,b),T},_n=[],te={},On=()=>{if(!nr){var p={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:h||"./this.program"},b;for(b in te)te[b]===void 0?delete p[b]:p[b]=te[b];var T=[];for(b in p)T.push(`${b}=${p[b]}`);nr=T}return nr},nr;function dt(p,b){if(A)return be(18,1,p,b);p>>>=0,b>>>=0;var T=0;return On().forEach((S,N)=>{var R=b+T;for(N=n()[p+4*N>>>2>>>0]=R,R=0;R<S.length;++R)o()[N++>>>0>>>0]=S.charCodeAt(R);o()[N>>>0>>>0]=0,T+=S.length+1}),0}function In(p,b){if(A)return be(19,1,p,b);p>>>=0,b>>>=0;var T=On();n()[p>>>2>>>0]=T.length;var S=0;return T.forEach(N=>S+=N.length+1),n()[b>>>2>>>0]=S,0}function Sn(p){return A?be(20,1,p):52}function An(p,b,T,S){return A?be(21,1,p,b,T,S):52}function Pn(p,b,T,S,N){return A?be(22,1,p,b,T,S,N):70}var Ti=[null,[],[]];function dr(p,b,T,S){if(A)return be(23,1,p,b,T,S);b>>>=0,T>>>=0,S>>>=0;for(var N=0,R=0;R<T;R++){var H=n()[b>>>2>>>0],Ae=n()[b+4>>>2>>>0];b+=8;for(var Mt=0;Mt<Ae;Mt++){var Ge=e()[H+Mt>>>0],rt=Ti[p];Ge===0||Ge===10?((p===1?_t:j)(Pt(rt,0)),rt.length=0):rt.push(Ge)}N+=Ae}return n()[S>>>2>>>0]=N,0}var En=[31,29,31,30,31,30,31,31,30,31,30,31],c=[31,28,31,30,31,30,31,31,30,31,30,31];function d(p){var b=Array(tr(p)+1);return no(p,b,0,b.length),b}var y=(p,b)=>{o().set(p,b>>>0)};function w(p,b,T,S){function N(D,ge,Pe){for(D=typeof D=="number"?D.toString():D||"";D.length<ge;)D=Pe[0]+D;return D}function R(D,ge){return N(D,ge,"0")}function H(D,ge){function Pe(Xa){return 0>Xa?-1:0<Xa?1:0}var hr;return(hr=Pe(D.getFullYear()-ge.getFullYear()))===0&&(hr=Pe(D.getMonth()-ge.getMonth()))===0&&(hr=Pe(D.getDate()-ge.getDate())),hr}function Ae(D){switch(D.getDay()){case 0:return new Date(D.getFullYear()-1,11,29);case 1:return D;case 2:return new Date(D.getFullYear(),0,3);case 3:return new Date(D.getFullYear(),0,2);case 4:return new Date(D.getFullYear(),0,1);case 5:return new Date(D.getFullYear()-1,11,31);case 6:return new Date(D.getFullYear()-1,11,30)}}function Mt(D){var ge=D.Ra;for(D=new Date(new Date(D.Sa+1900,0,1).getTime());0<ge;){var Pe=D.getMonth(),hr=(Xt(D.getFullYear())?En:c)[Pe];if(ge>hr-D.getDate())ge-=hr-D.getDate()+1,D.setDate(1),11>Pe?D.setMonth(Pe+1):(D.setMonth(0),D.setFullYear(D.getFullYear()+1));else{D.setDate(D.getDate()+ge);break}}return Pe=new Date(D.getFullYear()+1,0,4),ge=Ae(new Date(D.getFullYear(),0,4)),Pe=Ae(Pe),0>=H(ge,D)?0>=H(Pe,D)?D.getFullYear()+1:D.getFullYear():D.getFullYear()-1}p>>>=0,b>>>=0,T>>>=0,S>>>=0;var Ge=n()[S+40>>>2>>>0];S={ob:r()[S>>>2>>>0],nb:r()[S+4>>>2>>>0],Ta:r()[S+8>>>2>>>0],Xa:r()[S+12>>>2>>>0],Ua:r()[S+16>>>2>>>0],Sa:r()[S+20>>>2>>>0],Na:r()[S+24>>>2>>>0],Ra:r()[S+28>>>2>>>0],ub:r()[S+32>>>2>>>0],mb:r()[S+36>>>2>>>0],pb:Ge?Nr(Ge):""},T=Nr(T),Ge={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var rt in Ge)T=T.replace(new RegExp(rt,"g"),Ge[rt]);var qa="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ya="January February March April May June July August September October November December".split(" ");Ge={"%a":D=>qa[D.Na].substring(0,3),"%A":D=>qa[D.Na],"%b":D=>Ya[D.Ua].substring(0,3),"%B":D=>Ya[D.Ua],"%C":D=>R((D.Sa+1900)/100|0,2),"%d":D=>R(D.Xa,2),"%e":D=>N(D.Xa,2," "),"%g":D=>Mt(D).toString().substring(2),"%G":D=>Mt(D),"%H":D=>R(D.Ta,2),"%I":D=>(D=D.Ta,D==0?D=12:12<D&&(D-=12),R(D,2)),"%j":D=>{for(var ge=0,Pe=0;Pe<=D.Ua-1;ge+=(Xt(D.Sa+1900)?En:c)[Pe++]);return R(D.Xa+ge,3)},"%m":D=>R(D.Ua+1,2),"%M":D=>R(D.nb,2),"%n":()=>`
`,"%p":D=>0<=D.Ta&&12>D.Ta?"AM":"PM","%S":D=>R(D.ob,2),"%t":()=>"	","%u":D=>D.Na||7,"%U":D=>R(Math.floor((D.Ra+7-D.Na)/7),2),"%V":D=>{var ge=Math.floor((D.Ra+7-(D.Na+6)%7)/7);if(2>=(D.Na+371-D.Ra-2)%7&&ge++,ge)ge==53&&(Pe=(D.Na+371-D.Ra)%7,Pe==4||Pe==3&&Xt(D.Sa)||(ge=1));else{ge=52;var Pe=(D.Na+7-D.Ra-1)%7;(Pe==4||Pe==5&&Xt(D.Sa%400-1))&&ge++}return R(ge,2)},"%w":D=>D.Na,"%W":D=>R(Math.floor((D.Ra+7-(D.Na+6)%7)/7),2),"%y":D=>(D.Sa+1900).toString().substring(2),"%Y":D=>D.Sa+1900,"%z":D=>{D=D.mb;var ge=0<=D;return D=Math.abs(D)/60,(ge?"+":"-")+("0000"+(D/60*100+D%60)).slice(-4)},"%Z":D=>D.pb,"%%":()=>"%"},T=T.replace(/%%/g,"\0\0");for(rt in Ge)T.includes(rt)&&(T=T.replace(new RegExp(rt,"g"),Ge[rt](S)));return T=T.replace(/\0\0/g,"%"),rt=d(T),rt.length>b?0:(y(rt,p),rt.length-1)}Q.Wa();var P=[cn,Zn,to,Mr,dn,hn,oo,io,mn,ao,Yt,bn,gn,yn,Ur,Vr,vn,wn,dt,In,Sn,An,Pn,dr],k={b:function(p,b,T){throw p>>>=0,new gi(p).Wa(b>>>0,T>>>0),eo=p,yi++,eo},L:function(p){we(p>>>0,!I,1,!v,131072,!1),Q.ab()},j:function(p){p>>>=0,A?postMessage({cmd:"cleanupThread",thread:p}):Q.Za(Q.Ma[p])},H:ro,h:Mr,S:dn,D:hn,F:oo,T:io,Q:mn,J:ao,P:Yt,n:bn,E:gn,B:yn,R:Ur,C:Vr,p:()=>1,z:function(p,b){p>>>=0,p==b>>>0?setTimeout(()=>rr()):A?postMessage({targetThread:p,cmd:"checkMailbox"}):(p=Q.Ma[p])&&p.postMessage({cmd:"checkMailbox"})},I:function(p,b,T,S){b>>>=0,Tn.length=T,S=S>>>0>>>3;for(var N=0;N<T;N++)Tn[N]=s()[S+N>>>0];return p=0>p?fn[-p-1]:P[p],Q.ib=b,b=p.apply(null,Tn),Q.ib=0,b},K:Wr,o:function(p){_&&Q.Ma[p>>>0].ref()},s:function(p,b,T){p=b+2097152>>>0<4194305-!!p?(p>>>0)+4294967296*b:NaN,T>>>=0,p=new Date(1e3*p),r()[T>>>2>>>0]=p.getUTCSeconds(),r()[T+4>>>2>>>0]=p.getUTCMinutes(),r()[T+8>>>2>>>0]=p.getUTCHours(),r()[T+12>>>2>>>0]=p.getUTCDate(),r()[T+16>>>2>>>0]=p.getUTCMonth(),r()[T+20>>>2>>>0]=p.getUTCFullYear()-1900,r()[T+24>>>2>>>0]=p.getUTCDay(),p=(p.getTime()-Date.UTC(p.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,r()[T+28>>>2>>>0]=p},t:function(p,b,T){p=b+2097152>>>0<4194305-!!p?(p>>>0)+4294967296*b:NaN,T>>>=0,p=new Date(1e3*p),r()[T>>>2>>>0]=p.getSeconds(),r()[T+4>>>2>>>0]=p.getMinutes(),r()[T+8>>>2>>>0]=p.getHours(),r()[T+12>>>2>>>0]=p.getDate(),r()[T+16>>>2>>>0]=p.getMonth(),r()[T+20>>>2>>>0]=p.getFullYear()-1900,r()[T+24>>>2>>>0]=p.getDay(),b=(Xt(p.getFullYear())?xn:so)[p.getMonth()]+p.getDate()-1|0,r()[T+28>>>2>>>0]=b,r()[T+36>>>2>>>0]=-(60*p.getTimezoneOffset()),b=new Date(p.getFullYear(),6,1).getTimezoneOffset();var S=new Date(p.getFullYear(),0,1).getTimezoneOffset();p=(b!=S&&p.getTimezoneOffset()==Math.min(S,b))|0,r()[T+32>>>2>>>0]=p},u:function(p){p>>>=0;var b=new Date(r()[p+20>>>2>>>0]+1900,r()[p+16>>>2>>>0],r()[p+12>>>2>>>0],r()[p+8>>>2>>>0],r()[p+4>>>2>>>0],r()[p>>>2>>>0],0),T=r()[p+32>>>2>>>0],S=b.getTimezoneOffset(),N=new Date(b.getFullYear(),6,1).getTimezoneOffset(),R=new Date(b.getFullYear(),0,1).getTimezoneOffset(),H=Math.min(R,N);return 0>T?r()[p+32>>>2>>>0]=+(N!=R&&H==S):0<T!=(H==S)&&(N=Math.max(R,N),b.setTime(b.getTime()+6e4*((0<T?H:N)-S))),r()[p+24>>>2>>>0]=b.getDay(),T=(Xt(b.getFullYear())?xn:so)[b.getMonth()]+b.getDate()-1|0,r()[p+28>>>2>>>0]=T,r()[p>>>2>>>0]=b.getSeconds(),r()[p+4>>>2>>>0]=b.getMinutes(),r()[p+8>>>2>>>0]=b.getHours(),r()[p+12>>>2>>>0]=b.getDate(),r()[p+16>>>2>>>0]=b.getMonth(),r()[p+20>>>2>>>0]=b.getYear(),p=b.getTime(),isNaN(p)?(r()[X()>>>2>>>0]=61,p=-1):p/=1e3,_e((At=p,1<=+Math.abs(At)?0<At?+Math.floor(At/4294967296)>>>0:~~+Math.ceil((At-+(~~At>>>0))/4294967296)>>>0:0)),p>>>0},q:vn,r:wn,y:function(p,b,T){function S(Ge){return(Ge=Ge.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Ge[1]:"GMT"}p>>>=0,b>>>=0,T>>>=0;var N=new Date().getFullYear(),R=new Date(N,0,1),H=new Date(N,6,1);N=R.getTimezoneOffset();var Ae=H.getTimezoneOffset(),Mt=Math.max(N,Ae);n()[p>>>2>>>0]=60*Mt,r()[b>>>2>>>0]=+(N!=Ae),p=S(R),b=S(H),p=pr(p),b=pr(b),Ae<N?(n()[T>>>2>>>0]=p,n()[T+4>>>2>>>0]=b):(n()[T>>>2>>>0]=b,n()[T+4>>>2>>>0]=p)},c:()=>{Ne("")},O:function(p,b,T){p>>>=0,b>>>=0,T>>>=0,_n.length=0;for(var S;S=e()[b++>>>0];){var N=S!=105;N&=S!=112,T+=N&&T%8?4:0,_n.push(S==112?n()[T>>>2>>>0]:S==105?r()[T>>>2>>>0]:s()[T>>>3>>>0]),T+=N?8:4}return fn[p].apply(null,_n)},k:()=>{},i:()=>Date.now(),U:()=>{throw qt+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>_?(Bp(),mr(kp)).cpus().length:navigator.hardwareConcurrency,x:function(p){p>>>=0;var b=e().length;if(p<=b||4294901760<p)return!1;for(var T=1;4>=T;T*=2){var S=b*(1+.2/T);S=Math.min(S,p+100663296);var N=Math;S=Math.max(p,S);e:{N=(N.min.call(N,4294901760,S+(65536-S%65536)%65536)-Se.buffer.byteLength+65535)/65536;try{Se.grow(N),ft();var R=1;break e}catch{}R=void 0}if(R)return!0}return!1},M:dt,N:In,G:je,g:Sn,m:An,v:Pn,l:dr,a:Se||i.wasmMemory,w,d:function(p,b,T,S){return w(p>>>0,b>>>0,T>>>0,S>>>0)}},C=function(){function p(T,S){return C=T.exports,C=xd(),Q.bb.push(C.za),Qn=C.Aa,ct.unshift(C.V),lt=S,Me(),C}var b={a:k};if(Ke++,i.instantiateWasm)try{return i.instantiateWasm(b,p)}catch(T){j(`Module.instantiateWasm callback failed with error: ${T}`),l(T)}return kr(b,function(T){p(T.instance,T.module)}).catch(l),{}}();i._OrtInit=(p,b)=>(i._OrtInit=C.W)(p,b),i._OrtGetLastError=(p,b)=>(i._OrtGetLastError=C.X)(p,b),i._OrtCreateSessionOptions=(p,b,T,S,N,R,H,Ae,Mt,Ge)=>(i._OrtCreateSessionOptions=C.Y)(p,b,T,S,N,R,H,Ae,Mt,Ge),i._OrtAppendExecutionProvider=(p,b)=>(i._OrtAppendExecutionProvider=C.Z)(p,b),i._OrtAddFreeDimensionOverride=(p,b,T)=>(i._OrtAddFreeDimensionOverride=C._)(p,b,T),i._OrtAddSessionConfigEntry=(p,b,T)=>(i._OrtAddSessionConfigEntry=C.$)(p,b,T),i._OrtReleaseSessionOptions=p=>(i._OrtReleaseSessionOptions=C.aa)(p),i._OrtCreateSession=(p,b,T)=>(i._OrtCreateSession=C.ba)(p,b,T),i._OrtReleaseSession=p=>(i._OrtReleaseSession=C.ca)(p),i._OrtGetInputOutputCount=(p,b,T)=>(i._OrtGetInputOutputCount=C.da)(p,b,T),i._OrtGetInputName=(p,b)=>(i._OrtGetInputName=C.ea)(p,b),i._OrtGetOutputName=(p,b)=>(i._OrtGetOutputName=C.fa)(p,b),i._OrtFree=p=>(i._OrtFree=C.ga)(p),i._OrtCreateTensor=(p,b,T,S,N,R)=>(i._OrtCreateTensor=C.ha)(p,b,T,S,N,R),i._OrtGetTensorData=(p,b,T,S,N)=>(i._OrtGetTensorData=C.ia)(p,b,T,S,N),i._OrtReleaseTensor=p=>(i._OrtReleaseTensor=C.ja)(p),i._OrtCreateRunOptions=(p,b,T,S)=>(i._OrtCreateRunOptions=C.ka)(p,b,T,S),i._OrtAddRunConfigEntry=(p,b,T)=>(i._OrtAddRunConfigEntry=C.la)(p,b,T),i._OrtReleaseRunOptions=p=>(i._OrtReleaseRunOptions=C.ma)(p),i._OrtCreateBinding=p=>(i._OrtCreateBinding=C.na)(p),i._OrtBindInput=(p,b,T)=>(i._OrtBindInput=C.oa)(p,b,T),i._OrtBindOutput=(p,b,T,S)=>(i._OrtBindOutput=C.pa)(p,b,T,S),i._OrtClearBoundOutputs=p=>(i._OrtClearBoundOutputs=C.qa)(p),i._OrtReleaseBinding=p=>(i._OrtReleaseBinding=C.ra)(p),i._OrtRunWithBinding=(p,b,T,S,N)=>(i._OrtRunWithBinding=C.sa)(p,b,T,S,N),i._OrtRun=(p,b,T,S,N,R,H,Ae)=>(i._OrtRun=C.ta)(p,b,T,S,N,R,H,Ae),i._OrtEndProfiling=p=>(i._OrtEndProfiling=C.ua)(p);var X=()=>(X=C.va)(),re=i._pthread_self=()=>(re=i._pthread_self=C.wa)(),Z=i._malloc=p=>(Z=i._malloc=C.xa)(p);i._free=p=>(i._free=C.ya)(p),i.__emscripten_tls_init=()=>(i.__emscripten_tls_init=C.za)();var we=i.__emscripten_thread_init=(p,b,T,S,N,R)=>(we=i.__emscripten_thread_init=C.Ba)(p,b,T,S,N,R);i.__emscripten_thread_crashed=()=>(i.__emscripten_thread_crashed=C.Ca)();var Ye=(p,b,T,S)=>(Ye=C.Da)(p,b,T,S),ut=p=>(ut=C.Ea)(p),E=i.__emscripten_thread_exit=p=>(E=i.__emscripten_thread_exit=C.Fa)(p),le=()=>(le=C.Ga)(),_e=p=>(_e=C.Ha)(p),Rt=(p,b)=>(Rt=C.Ia)(p,b),zr=()=>(zr=C.Ja)(),uo=p=>(uo=C.Ka)(p),xi=p=>(xi=C.La)(p);function xd(){var p=C;p=Object.assign({},p);var b=S=>()=>S()>>>0,T=S=>N=>S(N)>>>0;return p.va=b(p.va),p.wa=b(p.wa),p.xa=T(p.xa),p.emscripten_main_runtime_thread_id=b(p.emscripten_main_runtime_thread_id),p.Ja=b(p.Ja),p.La=T(p.La),p}i.wasmMemory=Se,i.stackAlloc=xi,i.stackSave=zr,i.stackRestore=uo,i.keepRuntimeAlive=()=>0<qt,i.UTF8ToString=Nr,i.stringToUTF8=Gr,i.lengthBytesUTF8=tr,i.ExitStatus=fr,i.PThread=Q;var lo;St=function p(){lo||ja(),lo||(St=p)};function ja(){if(!(0<Ke))if(A)u(i),A||Rr(ct),startWorker(i);else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Ot.unshift(i.preRun.shift());Rr(Ot),0<Ke||lo||(lo=!0,i.calledRun=!0,se||(A||Rr(ct),u(i),A||Rr(Fr)))}}return ja(),t.ready}})();typeof Rp=="object"&&typeof ka=="object"?ka.exports=Np:typeof define=="function"&&define.amd&&define([],()=>Np)});var Gp=ye((nO,og)=>{og.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\n'});var Vp,ig,Ba,Na,li,Up,ag,sg,ug,Wp,Ce,an=$(()=>{"use strict";Vp=$p();ig=Mp(),Na=!1,li=!1,Up=!1,ag=a=>{if(a===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+a+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+a+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},sg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},ug=(a,t)=>a?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Wp=async a=>{if(Na)return Promise.resolve();if(li)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Up)throw new Error("previous call to 'initializeWebAssembly()' failed.");li=!0;let t=a.initTimeout,o=a.numThreads,e=a.simd,r=ag(o),n=e&&sg(),s=a.wasmPaths,i=typeof s=="string"?s:void 0,u=ug(n,r),l=typeof s=="object"?s[u]:void 0,f=!1,h=[];if(t>0&&h.push(new Promise(m=>{setTimeout(()=>{f=!0,m()},t)})),h.push(new Promise((m,v)=>{let I=r?ig:Vp,_={locateFile:(A,L)=>r&&A.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Gp()],{type:"text/javascript"})):A.endsWith(".wasm")?l||(i??L)+u:L+A};if(r)if(_.numThreads=o,typeof Blob>"u")_.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let A=`var ortWasmThreaded=${I.toString()};`;_.mainScriptUrlOrBlob=new Blob([A],{type:"text/javascript"})}I(_).then(A=>{li=!1,Na=!0,Ba=A,m()},A=>{li=!1,Up=!0,v(A)})})),await Promise.race(h),f)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Ce=()=>{if(Na&&Ba)return Ba;throw new Error("WebAssembly is not initialized yet.")}});var Fe,jn,Ee,fi=$(()=>{"use strict";an();Fe=(a,t)=>{let o=Ce(),e=o.lengthBytesUTF8(a)+1,r=o._malloc(e);return o.stringToUTF8(a,r,e),t.push(r),r},jn=(a,t,o,e)=>{if(typeof a=="object"&&a!==null){if(o.has(a))throw new Error("Circular reference in options");o.add(a)}Object.entries(a).forEach(([r,n])=>{let s=t?t+r:r;if(typeof n=="object")jn(n,s+".",o,e);else if(typeof n=="string"||typeof n=="number")e(s,n.toString());else if(typeof n=="boolean")e(s,n?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof n}`)})},Ee=a=>{let t=Ce(),o=t.stackSave();try{let e=t.stackAlloc(8);t._OrtGetLastError(e,e+4);let r=t.HEAP32[e/4],n=t.HEAPU32[e/4+1],s=n?t.UTF8ToString(n):"";throw new Error(`${a} ERROR_CODE: ${r}, ERROR_MESSAGE: ${s}`)}finally{t.stackRestore(o)}}});var zp,Hp=$(()=>{"use strict";an();fi();zp=a=>{let t=Ce(),o=0,e=[],r=a||{};try{if(a?.logSeverityLevel===void 0)r.logSeverityLevel=2;else if(typeof a.logSeverityLevel!="number"||!Number.isInteger(a.logSeverityLevel)||a.logSeverityLevel<0||a.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${a.logSeverityLevel}`);if(a?.logVerbosityLevel===void 0)r.logVerbosityLevel=0;else if(typeof a.logVerbosityLevel!="number"||!Number.isInteger(a.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${a.logVerbosityLevel}`);a?.terminate===void 0&&(r.terminate=!1);let n=0;return a?.tag!==void 0&&(n=Fe(a.tag,e)),o=t._OrtCreateRunOptions(r.logSeverityLevel,r.logVerbosityLevel,!!r.terminate,n),o===0&&Ee("Can't create run options."),a?.extra!==void 0&&jn(a.extra,"",new WeakSet,(s,i)=>{let u=Fe(s,e),l=Fe(i,e);t._OrtAddRunConfigEntry(o,u,l)!==0&&Ee(`Can't set a run config entry: ${s} - ${i}.`)}),[o,e]}catch(n){throw o!==0&&t._OrtReleaseRunOptions(o),e.forEach(s=>t._free(s)),n}}});var lg,fg,cg,pg,jp,qp=$(()=>{"use strict";an();fi();lg=a=>{switch(a){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${a}`)}},fg=a=>{switch(a){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${a}`)}},cg=a=>{a.extra||(a.extra={}),a.extra.session||(a.extra.session={});let t=a.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),a.executionProviders&&a.executionProviders.some(o=>(typeof o=="string"?o:o.name)==="webgpu")&&(a.enableMemPattern=!1)},pg=(a,t,o)=>{for(let e of t){let r=typeof e=="string"?e:e.name;switch(r){case"webnn":if(r="WEBNN",typeof e!="string"){let s=e;if(s?.deviceType){let i=Fe("deviceType",o),u=Fe(s.deviceType,o);Ce()._OrtAddSessionConfigEntry(a,i,u)!==0&&Ee(`Can't set a session config entry: 'deviceType' - ${s.deviceType}.`)}if(s?.numThreads){let i=s.numThreads;(typeof i!="number"||!Number.isInteger(i)||i<0)&&(i=0);let u=Fe("numThreads",o),l=Fe(i.toString(),o);Ce()._OrtAddSessionConfigEntry(a,u,l)!==0&&Ee(`Can't set a session config entry: 'numThreads' - ${s.numThreads}.`)}if(s?.powerPreference){let i=Fe("powerPreference",o),u=Fe(s.powerPreference,o);Ce()._OrtAddSessionConfigEntry(a,i,u)!==0&&Ee(`Can't set a session config entry: 'powerPreference' - ${s.powerPreference}.`)}}break;case"webgpu":if(r="JS",typeof e!="string"){let s=e;if(s?.preferredLayout){if(s.preferredLayout!=="NCHW"&&s.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${s.preferredLayout}`);let i=Fe("preferredLayout",o),u=Fe(s.preferredLayout,o);Ce()._OrtAddSessionConfigEntry(a,i,u)!==0&&Ee(`Can't set a session config entry: 'preferredLayout' - ${s.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${r}`)}let n=Fe(r,o);Ce()._OrtAppendExecutionProvider(a,n)!==0&&Ee(`Can't append execution provider: ${r}.`)}},jp=a=>{let t=Ce(),o=0,e=[],r=a||{};cg(r);try{let n=lg(r.graphOptimizationLevel??"all"),s=fg(r.executionMode??"sequential"),i=typeof r.logId=="string"?Fe(r.logId,e):0,u=r.logSeverityLevel??2;if(!Number.isInteger(u)||u<0||u>4)throw new Error(`log serverity level is not valid: ${u}`);let l=r.logVerbosityLevel??0;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log verbosity level is not valid: ${l}`);let f=typeof r.optimizedModelFilePath=="string"?Fe(r.optimizedModelFilePath,e):0;if(o=t._OrtCreateSessionOptions(n,!!r.enableCpuMemArena,!!r.enableMemPattern,s,!!r.enableProfiling,0,i,u,l,f),o===0&&Ee("Can't create session options."),r.executionProviders&&pg(o,r.executionProviders,e),r.freeDimensionOverrides)for(let[h,m]of Object.entries(r.freeDimensionOverrides)){if(typeof h!="string")throw new Error(`free dimension override name must be a string: ${h}`);if(typeof m!="number"||!Number.isInteger(m)||m<0)throw new Error(`free dimension override value must be a non-negative integer: ${m}`);let v=Fe(h,e);t._OrtAddFreeDimensionOverride(o,v,m)!==0&&Ee(`Can't set a free dimension override: ${h} - ${m}.`)}return r.extra!==void 0&&jn(r.extra,"",new WeakSet,(h,m)=>{let v=Fe(h,e),I=Fe(m,e);t._OrtAddSessionConfigEntry(o,v,I)!==0&&Ee(`Can't set a session config entry: ${h} - ${m}.`)}),[o,e]}catch(n){throw o!==0&&t._OrtReleaseSessionOptions(o),e.forEach(s=>t._free(s)),n}}});var Ra,Yp,Ma,Xp,Kp,ci,Jp,Ga=$(()=>{"use strict";Ra=a=>{switch(a){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${a}`)}},Yp=a=>{switch(a){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${a}`)}},Ma=a=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][a],Xp=a=>{switch(a){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${a}`)}},Kp=a=>{switch(a){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${a}`)}},ci=a=>a==="float32"||a==="int32"||a==="int64"||a==="bool"||a==="float16"||a==="uint32",Jp=a=>{switch(a){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${a}`)}}});var qn,Ua=$(()=>{"use strict";qn=async a=>{if(typeof a=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(a))}catch(t){if(t.code==="ERR_FS_FILE_TOO_LARGE"){let o=(void 0)(a),e=[];for await(let r of o)e.push(r);return new Uint8Array(Buffer.concat(e))}throw t}else{let t=await fetch(a);if(!t.ok)throw new Error(`failed to load external data file: ${a}`);let o=t.headers.get("Content-Length"),e=o?parseInt(o,10):0;if(e<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${a}, no response body.`);let r=t.body.getReader(),n;try{n=new ArrayBuffer(e)}catch(i){if(i instanceof RangeError){let u=Math.ceil(e/65536);n=new WebAssembly.Memory({initial:u,maximum:u}).buffer}else throw i}let s=0;for(;;){let{done:i,value:u}=await r.read();if(i)break;let l=u.byteLength;new Uint8Array(n,s,l).set(u),s+=l}return new Uint8Array(n,0,e)}}else return a instanceof Blob?new Uint8Array(await a.arrayBuffer()):a instanceof Uint8Array?a:new Uint8Array(a)}});var dg,Qp,ed,Yn,hg,Va,td,rd,Zp,nd,od,id,ad=$(()=>{"use strict";Hp();qp();Ga();an();fi();Ua();dg=(a,t)=>{Ce()._OrtInit(a,t)!==0&&Ee("Can't initialize onnxruntime.")},Qp=async a=>{dg(a.wasm.numThreads,Kp(a.logLevel))},ed=async(a,t)=>{},Yn=new Map,hg=a=>{let t=Ce(),o=t.stackSave();try{let e=t.stackAlloc(8);return t._OrtGetInputOutputCount(a,e,e+4)!==0&&Ee("Can't get session input/output count."),[t.HEAP32[e/4],t.HEAP32[e/4+1]]}finally{t.stackRestore(o)}},Va=a=>{let t=Ce(),o=t._malloc(a.byteLength);if(o===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${a.byteLength}.`);return t.HEAPU8.set(a,o),[o,a.byteLength]},td=async(a,t)=>{let o,e,r=Ce();Array.isArray(a)?[o,e]=a:a.buffer===r.HEAPU8.buffer?[o,e]=[a.byteOffset,a.byteLength]:[o,e]=Va(a);let n=0,s=0,i=0,u=[],l=[],f=[];try{if([s,u]=jp(t),t?.externalData&&r.mountExternalData){let L=[];for(let F of t.externalData){let M=typeof F=="string"?F:F.path;L.push(qn(typeof F=="string"?F:F.data).then(J=>{r.mountExternalData(M,J)}))}await Promise.all(L)}n=r._OrtCreateSession(o,e,s),n===0&&Ee("Can't create a session.");let[h,m]=hg(n),v=[],I=[],_=[];for(let L=0;L<h;L++){let F=r._OrtGetInputName(n,L);F===0&&Ee("Can't get an input name."),l.push(F),v.push(r.UTF8ToString(F))}for(let L=0;L<m;L++){let F=r._OrtGetOutputName(n,L);F===0&&Ee("Can't get an output name."),f.push(F);let M=r.UTF8ToString(F);I.push(M)}let A=null;return Yn.set(n,[n,l,f,A]),[n,v,I]}catch(h){throw l.forEach(m=>r._OrtFree(m)),f.forEach(m=>r._OrtFree(m)),i!==0&&r._OrtReleaseBinding(i),n!==0&&r._OrtReleaseSession(n),h}finally{r._free(o),s!==0&&r._OrtReleaseSessionOptions(s),u.forEach(h=>r._free(h)),r.unmountExternalData?.()}},rd=a=>{let t=Ce(),o=Yn.get(a);if(!o)throw new Error(`cannot release session. invalid session id: ${a}`);let[e,r,n,s]=o;s&&t._OrtReleaseBinding(s.handle),t.jsepUnregisterBuffers?.(a),r.forEach(i=>t._OrtFree(i)),n.forEach(i=>t._OrtFree(i)),t._OrtReleaseSession(e),Yn.delete(a)},Zp=(a,t,o,e,r)=>{if(!a){t.push(0);return}let n=Ce(),s=a[0],i=a[1],u=a[3],l,f;if(s==="string"&&u==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(u==="gpu-buffer"){let v=a[2].gpuBuffer,I=Ma(Ra(s));f=i.reduce((_,A)=>_*A,1)*I,l=n.jsepRegisterBuffer(e,r,v,f)}else{let v=a[2];if(Array.isArray(v)){f=4*v.length,l=n._malloc(f),o.push(l);let I=l/4;for(let _=0;_<v.length;_++){if(typeof v[_]!="string")throw new TypeError(`tensor data at index ${_} is not a string`);n.HEAPU32[I++]=Fe(v[_],o)}}else f=v.byteLength,l=n._malloc(f),o.push(l),n.HEAPU8.set(new Uint8Array(v.buffer,v.byteOffset,f),l)}let h=n.stackSave(),m=n.stackAlloc(4*i.length);try{let v=m/4;i.forEach(_=>n.HEAP32[v++]=_);let I=n._OrtCreateTensor(Ra(s),l,f,m,i.length,Jp(u));I===0&&Ee(`Can't create tensor for input/output. session=${e}, index=${r}.`),t.push(I)}finally{n.stackRestore(h)}},nd=async(a,t,o,e,r,n)=>{let s=Ce(),i=Yn.get(a);if(!i)throw new Error(`cannot run inference. invalid session id: ${a}`);let[u,l,f,h]=i,m=t.length,v=e.length,I=0,_=[],A=[],L=[],F=[],M=s.stackSave(),J=s.stackAlloc(m*4),z=s.stackAlloc(m*4),me=s.stackAlloc(v*4),Ie=s.stackAlloc(v*4);try{[I,_]=zp(n);for(let se=0;se<m;se++)Zp(o[se],A,F,a,t[se]);for(let se=0;se<v;se++)Zp(r[se],L,F,a,m+e[se]);let V=J/4,oe=z/4,_t=me/4,j=Ie/4;for(let se=0;se<m;se++)s.HEAPU32[V++]=A[se],s.HEAPU32[oe++]=l[t[se]];for(let se=0;se<v;se++)s.HEAPU32[_t++]=L[se],s.HEAPU32[j++]=f[e[se]];let Se;Se=await s._OrtRun(u,z,J,m,Ie,v,me,I),Se!==0&&Ee("failed to call OrtRun().");let lt=[];for(let se=0;se<v;se++){let He=s.HEAPU32[me/4+se];if(He===L[se]){lt.push(r[se]);continue}let tt=s.stackSave(),at=s.stackAlloc(4*4),st=!1,Be,Re=0;try{s._OrtGetTensorData(He,at,at+4,at+8,at+12)!==0&&Ee(`Can't access output tensor data on index ${se}.`);let Bt=at/4,Ot=s.HEAPU32[Bt++];Re=s.HEAPU32[Bt++];let ct=s.HEAPU32[Bt++],Fr=s.HEAPU32[Bt++],Ke=[];for(let Me=0;Me<Fr;Me++)Ke.push(s.HEAPU32[ct/4+Me]);s._OrtFree(ct);let It=Ke.reduce((Me,Ne)=>Me*Ne,1);Be=Yp(Ot);let St=h?.outputPreferredLocations[e[se]];if(Be==="string"){if(St==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Me=[],Ne=Re/4;for(let Qt=0;Qt<It;Qt++){let Nt=s.HEAPU32[Ne++],jt=Qt===It-1?void 0:s.HEAPU32[Ne]-Nt;Me.push(s.UTF8ToString(Nt,jt))}lt.push([Be,Ke,Me,"cpu"])}else if(St==="gpu-buffer"&&It>0){let Me=s.jsepGetBuffer(Re),Ne=Ma(Ot);if(Ne===void 0||!ci(Be))throw new Error(`Unsupported data type: ${Be}`);st=!0,lt.push([Be,Ke,{gpuBuffer:Me,download:s.jsepCreateDownloader(Me,It*Ne,Be),dispose:()=>{s._OrtReleaseTensor(He)}},"gpu-buffer"])}else{let Me=Xp(Be),Ne=new Me(It);new Uint8Array(Ne.buffer,Ne.byteOffset,Ne.byteLength).set(s.HEAPU8.subarray(Re,Re+Ne.byteLength)),lt.push([Be,Ke,Ne,"cpu"])}}finally{s.stackRestore(tt),Be==="string"&&Re&&s._free(Re),st||s._OrtReleaseTensor(He)}}return h&&s._OrtClearBoundOutputs(h.handle),lt}finally{s.stackRestore(M),A.forEach(V=>s._OrtReleaseTensor(V)),L.forEach(V=>s._OrtReleaseTensor(V)),F.forEach(V=>s._free(V)),I!==0&&s._OrtReleaseRunOptions(I),_.forEach(V=>s._free(V))}},od=a=>{let t=Ce(),o=Yn.get(a);if(!o)throw new Error("invalid session id");let e=o[0],r=t._OrtEndProfiling(e);r===0&&Ee("Can't get an profile file name."),t._OrtFree(r)},id=a=>{let t=[];for(let o of a){let e=o[2];!Array.isArray(e)&&"buffer"in e&&t.push(e.buffer)}return t}});var sd=ye((wO,bg)=>{bg.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var Kt=Object.defineProperty;var Jr=Object.getOwnPropertyDescriptor;var Xr=Object.getOwnPropertyNames;var Qr=Object.prototype.hasOwnProperty;var er=(f,m)=>()=>(f&&(m=f(f=0)),m);var Dt=(f,m)=>()=>(m||f((m={exports:{}}).exports,m),m.exports),tr=(f,m)=>{for(var s in m)Kt(f,s,{get:m[s],enumerable:!0})},Zr=(f,m,s,v)=>{if(m&&typeof m=="object"||typeof m=="function")for(let c of Xr(m))!Qr.call(f,c)&&c!==s&&Kt(f,c,{get:()=>m[c],enumerable:!(v=Jr(m,c))||v.enumerable});return f};var Ut=f=>Zr(Kt({},"__esModule",{value:!0}),f);var rr={};tr(rr,{createReadStream:()=>yr,readFile:()=>Kr,readFileSync:()=>en});var Kr,en,yr,nr=er(()=>{Kr=void 0,en=void 0,yr=void 0});var ar={};tr(ar,{join:()=>tn});var tn,or=er(()=>{tn=void 0});var Or=Dt((wr,ir)=>{"use strict";var vr=(()=>{var f=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(f=f||__filename),function(m={}){var s=m,v,c;s.ready=new Promise((e,r)=>{v=e,c=r});var _=Object.assign({},s),y="./this.program",u=typeof window=="object",C=typeof importScripts=="function",F=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",B="",$,R,I;if(F){var H=(nr(),Ut(rr)),W=(or(),Ut(ar));B=C?W.dirname(B)+"/":__dirname+"/",$=(e,r)=>(e=Me(e)?new URL(e):W.normalize(e),H.readFileSync(e,r?void 0:"utf8")),I=e=>(e=$(e,!0),e.buffer||(e=new Uint8Array(e)),e),R=(e,r,a,i=!0)=>{e=Me(e)?new URL(e):W.normalize(e),H.readFile(e,i?void 0:"utf8",(d,w)=>{d?a(d):r(i?w.buffer:w)})},!s.thisProgram&&1<process.argv.length&&(y=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),s.inspect=()=>"[Emscripten Module object]"}else(u||C)&&(C?B=self.location.href:typeof document<"u"&&document.currentScript&&(B=document.currentScript.src),f&&(B=f),B.indexOf("blob:")!==0?B=B.substr(0,B.replace(/[?#].*/,"").lastIndexOf("/")+1):B="",$=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},C&&(I=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),R=(e,r,a)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?r(i.response):a()},i.onerror=a,i.send(null)});var T=console.log.bind(console),x=console.error.bind(console);Object.assign(s,_),_=null,typeof WebAssembly!="object"&&_e("no native wasm support detected");var j,Oe=!1,se,z,me,Ae,E,k,Qe,ne,J,be;function L(){var e=j.buffer;s.HEAP8=se=new Int8Array(e),s.HEAP16=me=new Int16Array(e),s.HEAPU8=z=new Uint8Array(e),s.HEAPU16=Ae=new Uint16Array(e),s.HEAP32=E=new Int32Array(e),s.HEAPU32=k=new Uint32Array(e),s.HEAPF32=Qe=new Float32Array(e),s.HEAPF64=be=new Float64Array(e),s.HEAP64=ne=new BigInt64Array(e),s.HEAPU64=J=new BigUint64Array(e)}var ue=[],ge=[],ye=[],ve=0,te=null,ae=null;function _e(e){throw e="Aborted("+e+")",x(e),Oe=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),c(e),e}var xe=e=>e.startsWith("data:application/octet-stream;base64,"),Me=e=>e.startsWith("file://"),Ee;if(Ee="ort-wasm.wasm",!xe(Ee)){var Ze=Ee;Ee=s.locateFile?s.locateFile(Ze,B):B+Ze}function de(e){if(I)return I(e);throw"both async and sync fetching of the wasm failed"}function Ce(e){if(u||C){if(typeof fetch=="function"&&!Me(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at \'"+e+"\'";return r.arrayBuffer()}).catch(()=>de(e));if(R)return new Promise((r,a)=>{R(e,i=>r(new Uint8Array(i)),a)})}return Promise.resolve().then(()=>de(e))}function Pe(e,r,a){return Ce(e).then(i=>WebAssembly.instantiate(i,r)).then(i=>i).then(a,i=>{x(`failed to asynchronously prepare wasm: ${i}`),_e(i)})}function oe(e,r){var a=Ee;return typeof WebAssembly.instantiateStreaming!="function"||xe(a)||Me(a)||F||typeof fetch!="function"?Pe(a,e,r):fetch(a,{credentials:"same-origin"}).then(i=>WebAssembly.instantiateStreaming(i,e).then(r,function(d){return x(`wasm streaming compile failed: ${d}`),x("falling back to ArrayBuffer instantiation"),Pe(a,e,r)}))}var re={1358424:(e,r,a,i)=>{if(typeof s>"u"||!s.cb)return 1;if(e=He(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.cb.get(e),!e)return 2;if(r>>>=0,a>>>=0,r+a>e.byteLength)return 3;try{return z.set(e.subarray(r,r+a),i>>>0>>>0),0}catch{return 4}}};function $e(e){this.Ua=e-24,this.fb=function(r){k[this.Ua+4>>>2>>>0]=r},this.eb=function(r){k[this.Ua+8>>>2>>>0]=r},this.Ya=function(r,a){this.Za(),this.fb(r),this.eb(a)},this.Za=function(){k[this.Ua+16>>>2>>>0]=0}}var Re=0,Le=0,ft=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Rt=(e,r,a)=>{r>>>=0;var i=r+a;for(a=r;e[a]&&!(a>=i);)++a;if(16<a-r&&e.buffer&&ft)return ft.decode(e.subarray(r,a));for(i="";r<a;){var d=e[r++];if(d&128){var w=e[r++]&63;if((d&224)==192)i+=String.fromCharCode((d&31)<<6|w);else{var h=e[r++]&63;d=(d&240)==224?(d&15)<<12|w<<6|h:(d&7)<<18|w<<12|h<<6|e[r++]&63,65536>d?i+=String.fromCharCode(d):(d-=65536,i+=String.fromCharCode(55296|d>>10,56320|d&1023))}}else i+=String.fromCharCode(d)}return i},He=(e,r)=>(e>>>=0)?Rt(z,e,r):"",Ke=e=>{for(var r=0,a=0;a<e.length;++a){var i=e.charCodeAt(a);127>=i?r++:2047>=i?r+=2:55296<=i&&57343>=i?(r+=4,++a):r+=3}return r},De=(e,r,a,i)=>{if(a>>>=0,!(0<i))return 0;var d=a;i=a+i-1;for(var w=0;w<e.length;++w){var h=e.charCodeAt(w);if(55296<=h&&57343>=h){var A=e.charCodeAt(++w);h=65536+((h&1023)<<10)|A&1023}if(127>=h){if(a>=i)break;r[a++>>>0]=h}else{if(2047>=h){if(a+1>=i)break;r[a++>>>0]=192|h>>6}else{if(65535>=h){if(a+2>=i)break;r[a++>>>0]=224|h>>12}else{if(a+3>=i)break;r[a++>>>0]=240|h>>18,r[a++>>>0]=128|h>>12&63}r[a++>>>0]=128|h>>6&63}r[a++>>>0]=128|h&63}}return r[a>>>0]=0,a-d},lt=e=>{if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e},ze,pe=e=>{for(var r="";z[e>>>0];)r+=ze[z[e++>>>0]];return r},et={},We={},It={},Ue;function tt(e,r,a={}){var i=r.name;if(!e)throw new Ue(`type "${i}" must have a positive integer typeid pointer`);if(We.hasOwnProperty(e)){if(a.gb)return;throw new Ue(`Cannot register type \'${i}\' twice`)}We[e]=r,delete It[e],et.hasOwnProperty(e)&&(r=et[e],delete et[e],r.forEach(d=>d()))}function Fe(e,r,a={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");tt(e,r,a)}var Y=(e,r,a)=>{switch(r){case 1:return a?i=>se[i>>>0>>>0]:i=>z[i>>>0>>>0];case 2:return a?i=>me[i>>>1>>>0]:i=>Ae[i>>>1>>>0];case 4:return a?i=>E[i>>>2>>>0]:i=>k[i>>>2>>>0];case 8:return a?i=>ne[i>>>3]:i=>J[i>>>3];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}};function ct(){this.Ra=[void 0],this.ab=[]}var fe=new ct;function dt(e){e>>>=0,e>=fe.Ua&&--fe.get(e).bb===0&&fe.Za(e)}var le=e=>{if(!e)throw new Ue("Cannot use deleted val. handle = "+e);return fe.get(e).value},Se=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return fe.Ya({bb:1,value:e})}};function P(e){return this.fromWireType(E[e>>>2>>>0])}var rt=(e,r)=>{switch(r){case 4:return function(a){return this.fromWireType(Qe[a>>>2>>>0])};case 8:return function(a){return this.fromWireType(be[a>>>3>>>0])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}};function Bt(e){return this.fromWireType(k[e>>>2>>>0])}var Ve=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Lt=(e,r)=>{for(var a=e>>1,i=a+r/2;!(a>=i)&&Ae[a>>>0];)++a;if(a<<=1,32<a-e&&Ve)return Ve.decode(z.subarray(e>>>0,a>>>0));for(a="",i=0;!(i>=r/2);++i){var d=me[e+2*i>>>1>>>0];if(d==0)break;a+=String.fromCharCode(d)}return a},Jt=(e,r,a)=>{if(a??=2147483647,2>a)return 0;a-=2;var i=r;a=a<2*e.length?a/2:e.length;for(var d=0;d<a;++d)me[r>>>1>>>0]=e.charCodeAt(d),r+=2;return me[r>>>1>>>0]=0,r-i},Wt=e=>2*e.length,Xt=(e,r)=>{for(var a=0,i="";!(a>=r/4);){var d=E[e+4*a>>>2>>>0];if(d==0)break;++a,65536<=d?(d-=65536,i+=String.fromCharCode(55296|d>>10,56320|d&1023)):i+=String.fromCharCode(d)}return i},Nt=(e,r,a)=>{if(r>>>=0,a??=2147483647,4>a)return 0;var i=r;a=i+a-4;for(var d=0;d<e.length;++d){var w=e.charCodeAt(d);if(55296<=w&&57343>=w){var h=e.charCodeAt(++d);w=65536+((w&1023)<<10)|h&1023}if(E[r>>>2>>>0]=w,r+=4,r+4>a)break}return E[r>>>2>>>0]=0,r-i},kt=e=>{for(var r=0,a=0;a<e.length;++a){var i=e.charCodeAt(a);55296<=i&&57343>=i&&++a,r+=4}return r},nt=(e,r)=>{var a=We[e];if(a===void 0)throw e=Tt(e),a=pe(e),Te(e),new Ue(r+" has unknown type "+a);return a},pt=(e,r,a)=>{var i=[];return e=e.toWireType(i,a),i.length&&(k[r>>>2>>>0]=Se(i)),e},je=[],$t={},at=e=>{var r=$t[e];return r===void 0?pe(e):r},mt=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Ht=e=>{var r=je.length;return je.push(e),r},jt=(e,r)=>{for(var a=Array(e),i=0;i<e;++i)a[i]=nt(k[r+4*i>>>2>>>0],"parameter "+i);return a},gt=(e,r)=>Object.defineProperty(r,"name",{value:e});function Yt(e){var r=Function;if(!(r instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof r} which is not a function`);var a=gt(r.name||"unknownFunctionName",function(){});return a.prototype=r.prototype,a=new a,e=r.apply(a,e),e instanceof Object?e:a}var Ne=e=>e%4===0&&(e%100!==0||e%400===0),ht=[0,31,60,91,121,152,182,213,244,274,305,335],yt=[0,31,59,90,120,151,181,212,243,273,304,334],vt=e=>{var r=Ke(e)+1,a=Ge(r);return a&&De(e,z,a,r),a},ot=[],it={},st=()=>{if(!Ye){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"},r;for(r in it)it[r]===void 0?delete e[r]:e[r]=it[r];var a=[];for(r in e)a.push(`${r}=${e[r]}`);Ye=a}return Ye},Ye,wt=[null,[],[]],ke=[31,29,31,30,31,30,31,31,30,31,30,31],Ot=[31,28,31,30,31,30,31,31,30,31,30,31];function Gt(e){var r=Array(Ke(e)+1);return De(e,r,0,r.length),r}function bt(e,r,a,i){function d(p,N,q){for(p=typeof p=="number"?p.toString():p||"";p.length<N;)p=q[0]+p;return p}function w(p,N){return d(p,N,"0")}function h(p,N){function q(ut){return 0>ut?-1:0<ut?1:0}var Ie;return(Ie=q(p.getFullYear()-N.getFullYear()))===0&&(Ie=q(p.getMonth()-N.getMonth()))===0&&(Ie=q(p.getDate()-N.getDate())),Ie}function A(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function U(p){var N=p.Sa;for(p=new Date(new Date(p.Ta+1900,0,1).getTime());0<N;){var q=p.getMonth(),Ie=(Ne(p.getFullYear())?ke:Ot)[q];if(N>Ie-p.getDate())N-=Ie-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+N);break}}return q=new Date(p.getFullYear()+1,0,4),N=A(new Date(p.getFullYear(),0,4)),q=A(q),0>=h(N,p)?0>=h(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,r>>>=0,a>>>=0,i>>>=0;var M=k[i+40>>>2>>>0];i={kb:E[i>>>2>>>0],jb:E[i+4>>>2>>>0],Wa:E[i+8>>>2>>>0],$a:E[i+12>>>2>>>0],Xa:E[i+16>>>2>>>0],Ta:E[i+20>>>2>>>0],Na:E[i+24>>>2>>>0],Sa:E[i+28>>>2>>>0],mb:E[i+32>>>2>>>0],ib:E[i+36>>>2>>>0],lb:M?He(M):""},a=He(a),M={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var V in M)a=a.replace(new RegExp(V,"g"),M[V]);var ce="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),we="January February March April May June July August September October November December".split(" ");M={"%a":p=>ce[p.Na].substring(0,3),"%A":p=>ce[p.Na],"%b":p=>we[p.Xa].substring(0,3),"%B":p=>we[p.Xa],"%C":p=>w((p.Ta+1900)/100|0,2),"%d":p=>w(p.$a,2),"%e":p=>d(p.$a,2," "),"%g":p=>U(p).toString().substring(2),"%G":p=>U(p),"%H":p=>w(p.Wa,2),"%I":p=>(p=p.Wa,p==0?p=12:12<p&&(p-=12),w(p,2)),"%j":p=>{for(var N=0,q=0;q<=p.Xa-1;N+=(Ne(p.Ta+1900)?ke:Ot)[q++]);return w(p.$a+N,3)},"%m":p=>w(p.Xa+1,2),"%M":p=>w(p.jb,2),"%n":()=>`\n`,"%p":p=>0<=p.Wa&&12>p.Wa?"AM":"PM","%S":p=>w(p.kb,2),"%t":()=>"	","%u":p=>p.Na||7,"%U":p=>w(Math.floor((p.Sa+7-p.Na)/7),2),"%V":p=>{var N=Math.floor((p.Sa+7-(p.Na+6)%7)/7);if(2>=(p.Na+371-p.Sa-2)%7&&N++,N)N==53&&(q=(p.Na+371-p.Sa)%7,q==4||q==3&&Ne(p.Ta)||(N=1));else{N=52;var q=(p.Na+7-p.Sa-1)%7;(q==4||q==5&&Ne(p.Ta%400-1))&&N++}return w(N,2)},"%w":p=>p.Na,"%W":p=>w(Math.floor((p.Sa+7-(p.Na+6)%7)/7),2),"%y":p=>(p.Ta+1900).toString().substring(2),"%Y":p=>p.Ta+1900,"%z":p=>{p=p.ib;var N=0<=p;return p=Math.abs(p)/60,(N?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.lb,"%%":()=>"%"},a=a.replace(/%%/g,"\\0\\0");for(V in M)a.includes(V)&&(a=a.replace(new RegExp(V,"g"),M[V](i)));return a=a.replace(/\\0\\0/g,"%"),V=Gt(a),V.length>r?0:(se.set(V,e>>>0),V.length-1)}for(var _t=Array(256),qe=0;256>qe;++qe)_t[qe]=String.fromCharCode(qe);ze=_t,Ue=s.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},s.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(ct.prototype,{get(e){return this.Ra[e]},has(e){return this.Ra[e]!==void 0},Ya(e){var r=this.ab.pop()||this.Ra.length;return this.Ra[r]=e,r},Za(e){this.Ra[e]=void 0,this.ab.push(e)}}),fe.Ra.push({value:void 0},{value:null},{value:!0},{value:!1}),fe.Ua=fe.Ra.length,s.count_emval_handles=()=>{for(var e=0,r=fe.Ua;r<fe.Ra.length;++r)fe.Ra[r]!==void 0&&++e;return e};var Et={a:function(e,r,a){throw e>>>=0,new $e(e).Ya(r>>>0,a>>>0),Re=e,Le++,Re},t:function(){return 0},$:function(){},M:function(){},O:function(){},G:function(){return 0},Z:function(){},U:function(){},Y:function(){},B:function(){},N:function(){},K:function(){},_:function(){},L:function(){},E:function(e,r,a,i,d){r>>>=0,r=pe(r);var w=r.indexOf("u")!=-1;w&&(d=(1n<<64n)-1n),Fe(e>>>0,{name:r,fromWireType:h=>h,toWireType:function(h,A){if(typeof A!="bigint"&&typeof A!="number")throw new TypeError(`Cannot convert "${lt(A)}" to ${this.name}`);if(A<i||A>d)throw new TypeError(`Passing a number "${lt(A)}" from JS side to C/C++ side to an argument of type "${r}", which is outside the valid range [${i}, ${d}]!`);return A},argPackAdvance:8,readValueFromPointer:Y(r,a>>>0,!w),Va:null})},da:function(e,r,a,i){r=pe(r>>>0),Fe(e>>>0,{name:r,fromWireType:function(d){return!!d},toWireType:function(d,w){return w?a:i},argPackAdvance:8,readValueFromPointer:function(d){return this.fromWireType(z[d>>>0])},Va:null})},ca:function(e,r){r=pe(r>>>0),Fe(e>>>0,{name:r,fromWireType:a=>{var i=le(a);return dt(a),i},toWireType:(a,i)=>Se(i),argPackAdvance:8,readValueFromPointer:P,Va:null})},D:function(e,r,a){r=pe(r>>>0),Fe(e>>>0,{name:r,fromWireType:i=>i,toWireType:(i,d)=>d,argPackAdvance:8,readValueFromPointer:rt(r,a>>>0),Va:null})},q:function(e,r,a,i,d){if(e>>>=0,a>>>=0,r=pe(r>>>0),d===-1&&(d=4294967295),d=A=>A,i===0){var w=32-8*a;d=A=>A<<w>>>w}var h=r.includes("unsigned")?function(A,U){return U>>>0}:function(A,U){return U};Fe(e,{name:r,fromWireType:d,toWireType:h,argPackAdvance:8,readValueFromPointer:Y(r,a,i!==0),Va:null})},l:function(e,r,a){function i(w){return new d(se.buffer,k[w+4>>>2>>>0],k[w>>>2>>>0])}var d=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][r];a=pe(a>>>0),Fe(e>>>0,{name:a,fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{gb:!0})},F:function(e,r){r=pe(r>>>0);var a=r==="std::string";Fe(e>>>0,{name:r,fromWireType:function(i){var d=k[i>>>2>>>0],w=i+4;if(a)for(var h=w,A=0;A<=d;++A){var U=w+A;if(A==d||z[U>>>0]==0){if(h=He(h,U-h),M===void 0)var M=h;else M+=String.fromCharCode(0),M+=h;h=U+1}}else{for(M=Array(d),A=0;A<d;++A)M[A]=String.fromCharCode(z[w+A>>>0]);M=M.join("")}return Te(i),M},toWireType:function(i,d){d instanceof ArrayBuffer&&(d=new Uint8Array(d));var w=typeof d=="string";if(!(w||d instanceof Uint8Array||d instanceof Uint8ClampedArray||d instanceof Int8Array))throw new Ue("Cannot pass non-string to std::string");var h=a&&w?Ke(d):d.length,A=Ge(4+h+1),U=A+4;if(k[A>>>2>>>0]=h,a&&w)De(d,z,U,h+1);else if(w)for(w=0;w<h;++w){var M=d.charCodeAt(w);if(255<M)throw Te(U),new Ue("String has UTF-16 code units that do not fit in 8 bits");z[U+w>>>0]=M}else for(w=0;w<h;++w)z[U+w>>>0]=d[w];return i!==null&&i.push(Te,A),A},argPackAdvance:8,readValueFromPointer:Bt,Va(i){Te(i)}})},v:function(e,r,a){if(r>>>=0,a>>>=0,a=pe(a),r===2)var i=Lt,d=Jt,w=Wt,h=()=>Ae,A=1;else r===4&&(i=Xt,d=Nt,w=kt,h=()=>k,A=2);Fe(e>>>0,{name:a,fromWireType:U=>{for(var M=k[U>>>2>>>0],V=h(),ce,we=U+4,p=0;p<=M;++p){var N=U+4+p*r;(p==M||V[N>>>A]==0)&&(we=i(we,N-we),ce===void 0?ce=we:(ce+=String.fromCharCode(0),ce+=we),we=N+r)}return Te(U),ce},toWireType:(U,M)=>{if(typeof M!="string")throw new Ue(`Cannot pass non-string to C++ string type ${a}`);var V=w(M),ce=Ge(4+V+r);return k[ce>>>2]=V>>A,d(M,ce+4,V+r),U!==null&&U.push(Te,ce),ce},argPackAdvance:8,readValueFromPointer:P,Va(U){Te(U)}})},ea:function(e,r){r=pe(r>>>0),Fe(e>>>0,{hb:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},aa:()=>1,o:function(e,r,a){return r>>>=0,a>>>=0,e=le(e>>>0),r=nt(r,"emval::as"),pt(r,a,e)},x:function(e,r,a,i){return a>>>=0,i>>>=0,e=je[e>>>0],r=le(r>>>0),e(null,r,a,i)},j:function(e,r,a,i,d){return a>>>=0,i>>>=0,d>>>=0,e=je[e>>>0],r=le(r>>>0),a=at(a),e(r,r[a],i,d)},b:dt,w:function(e,r){return r>>>=0,e=le(e>>>0),r=le(r),e==r},s:function(e){return e>>>=0,e===0?Se(mt()):(e=at(e),Se(mt()[e]))},i:function(e,r,a){r=jt(e,r>>>0);var i=r.shift();e--;var d=`return function (obj, func, destructorsRef, args) {\n`,w=0,h=[];a===0&&h.push("obj");for(var A=["retType"],U=[i],M=0;M<e;++M)h.push("arg"+M),A.push("argType"+M),U.push(r[M]),d+=`  var arg${M} = argType${M}.readValueFromPointer(args${w?"+"+w:""});\n`,w+=r[M].argPackAdvance;for(d+=`  var rv = ${a===1?"new func":"func.call"}(${h.join(", ")});\n`,M=0;M<e;++M)r[M].deleteObject&&(d+=`  argType${M}.deleteObject(arg${M});\n`);return i.hb||(A.push("emval_returnValue"),U.push(pt),d+=`  return emval_returnValue(retType, destructorsRef, rv);\n`),A.push(d+`};\n`),e=Yt(A).apply(null,U),a=`methodCaller<(${r.map(V=>V.name).join(", ")}) => ${i.name}>`,Ht(gt(a,e))},p:function(e,r){return r>>>=0,e=le(e>>>0),r=le(r),Se(e[r])},c:function(e){e>>>=0,4<e&&(fe.get(e).bb+=1)},r:function(){return Se([])},k:function(e){e=le(e>>>0);for(var r=Array(e.length),a=0;a<e.length;a++)r[a]=e[a];return Se(r)},d:function(e){return Se(at(e>>>0))},h:function(){return Se({})},g:function(e){e>>>=0;for(var r=le(e);r.length;){var a=r.pop();r.pop()(a)}dt(e)},f:function(e,r,a){r>>>=0,a>>>=0,e=le(e>>>0),r=le(r),a=le(a),e[r]=a},e:function(e,r){return r>>>=0,e=nt(e>>>0,"_emval_take_value"),e=e.readValueFromPointer(r),Se(e)},R:function(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),E[r>>>2>>>0]=e.getUTCSeconds(),E[r+4>>>2>>>0]=e.getUTCMinutes(),E[r+8>>>2>>>0]=e.getUTCHours(),E[r+12>>>2>>>0]=e.getUTCDate(),E[r+16>>>2>>>0]=e.getUTCMonth(),E[r+20>>>2>>>0]=e.getUTCFullYear()-1900,E[r+24>>>2>>>0]=e.getUTCDay(),E[r+28>>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},S:function(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),E[r>>>2>>>0]=e.getSeconds(),E[r+4>>>2>>>0]=e.getMinutes(),E[r+8>>>2>>>0]=e.getHours(),E[r+12>>>2>>>0]=e.getDate(),E[r+16>>>2>>>0]=e.getMonth(),E[r+20>>>2>>>0]=e.getFullYear()-1900,E[r+24>>>2>>>0]=e.getDay(),E[r+28>>>2>>>0]=(Ne(e.getFullYear())?ht:yt)[e.getMonth()]+e.getDate()-1|0,E[r+36>>>2>>>0]=-(60*e.getTimezoneOffset());var a=new Date(e.getFullYear(),6,1).getTimezoneOffset(),i=new Date(e.getFullYear(),0,1).getTimezoneOffset();E[r+32>>>2>>>0]=(a!=i&&e.getTimezoneOffset()==Math.min(i,a))|0},T:function(e){e>>>=0;var r=new Date(E[e+20>>>2>>>0]+1900,E[e+16>>>2>>>0],E[e+12>>>2>>>0],E[e+8>>>2>>>0],E[e+4>>>2>>>0],E[e>>>2>>>0],0),a=E[e+32>>>2>>>0],i=r.getTimezoneOffset(),d=new Date(r.getFullYear(),6,1).getTimezoneOffset(),w=new Date(r.getFullYear(),0,1).getTimezoneOffset(),h=Math.min(w,d);return 0>a?E[e+32>>>2>>>0]=+(d!=w&&h==i):0<a!=(h==i)&&(d=Math.max(w,d),r.setTime(r.getTime()+6e4*((0<a?h:d)-i))),E[e+24>>>2>>>0]=r.getDay(),E[e+28>>>2>>>0]=(Ne(r.getFullYear())?ht:yt)[r.getMonth()]+r.getDate()-1|0,E[e>>>2>>>0]=r.getSeconds(),E[e+4>>>2>>>0]=r.getMinutes(),E[e+8>>>2>>>0]=r.getHours(),E[e+12>>>2>>>0]=r.getDate(),E[e+16>>>2>>>0]=r.getMonth(),E[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),isNaN(e)?(E[St()>>>2>>>0]=61,e=-1):e/=1e3,BigInt(e)},P:function(){return-52},Q:function(){},I:function(e,r,a){function i(U){return(U=U.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?U[1]:"GMT"}a>>>=0;var d=new Date().getFullYear(),w=new Date(d,0,1),h=new Date(d,6,1);d=w.getTimezoneOffset();var A=h.getTimezoneOffset();k[e>>>0>>>2>>>0]=60*Math.max(d,A),E[r>>>0>>>2>>>0]=+(d!=A),e=i(w),r=i(h),e=vt(e),r=vt(r),A<d?(k[a>>>2>>>0]=e,k[a+4>>>2>>>0]=r):(k[a>>>2>>>0]=r,k[a+4>>>2>>>0]=e)},y:()=>{_e("")},fa:function(e,r,a){e>>>=0,r>>>=0,a>>>=0,ot.length=0;for(var i;i=z[r++>>>0];){var d=i!=105;d&=i!=112,a+=d&&a%8?4:0,ot.push(i==112?k[a>>>2>>>0]:i==106?ne[a>>>3]:i==105?E[a>>>2>>>0]:be[a>>>3>>>0]),a+=d?8:4}return re[e].apply(null,ot)},C:()=>Date.now(),J:function(){return 4294901760},n:()=>performance.now(),H:function(e){e>>>=0;var r=z.length;if(4294901760<e)return!1;for(var a=1;4>=a;a*=2){var i=r*(1+.2/a);i=Math.min(i,e+100663296);var d=Math;i=Math.max(e,i);e:{d=(d.min.call(d,4294901760,i+(65536-i%65536)%65536)-j.buffer.byteLength+65535)/65536;try{j.grow(d),L();var w=1;break e}catch{}w=void 0}if(w)return!0}return!1},W:function(e,r){e>>>=0,r>>>=0;var a=0;return st().forEach((i,d)=>{var w=r+a;for(d=k[e+4*d>>>2>>>0]=w,w=0;w<i.length;++w)se[d++>>>0>>>0]=i.charCodeAt(w);se[d>>>0>>>0]=0,a+=i.length+1}),0},X:function(e,r){e>>>=0,r>>>=0;var a=st();k[e>>>2>>>0]=a.length;var i=0;return a.forEach(d=>i+=d.length+1),k[r>>>2>>>0]=i,0},u:()=>52,A:function(){return 52},V:function(){return 70},z:function(e,r,a,i){r>>>=0,a>>>=0,i>>>=0;for(var d=0,w=0;w<a;w++){var h=k[r>>>2>>>0],A=k[r+4>>>2>>>0];r+=8;for(var U=0;U<A;U++){var M=z[h+U>>>0],V=wt[e];M===0||M===10?((e===1?T:x)(Rt(V,0)),V.length=0):V.push(M)}d+=A}return k[i>>>2>>>0]=d,0},ba:bt,m:function(e,r,a,i){return bt(e>>>0,r>>>0,a>>>0,i>>>0)}},D=function(){function e(a){return D=a.exports,D=Qt(),j=D.ga,L(),ge.unshift(D.ha),ve--,ve==0&&(te!==null&&(clearInterval(te),te=null),ae&&(a=ae,ae=null,a())),D}var r={a:Et};if(ve++,s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(a){x(`Module.instantiateWasm callback failed with error: ${a}`),c(a)}return oe(r,function(a){e(a.instance)}).catch(c),{}}();s._OrtInit=(e,r)=>(s._OrtInit=D.ia)(e,r),s._OrtGetLastError=(e,r)=>(s._OrtGetLastError=D.ja)(e,r),s._OrtCreateSessionOptions=(e,r,a,i,d,w,h,A,U,M)=>(s._OrtCreateSessionOptions=D.ka)(e,r,a,i,d,w,h,A,U,M),s._OrtAppendExecutionProvider=(e,r)=>(s._OrtAppendExecutionProvider=D.la)(e,r),s._OrtAddFreeDimensionOverride=(e,r,a)=>(s._OrtAddFreeDimensionOverride=D.ma)(e,r,a),s._OrtAddSessionConfigEntry=(e,r,a)=>(s._OrtAddSessionConfigEntry=D.na)(e,r,a),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=D.oa)(e),s._OrtCreateSession=(e,r,a)=>(s._OrtCreateSession=D.pa)(e,r,a),s._OrtReleaseSession=e=>(s._OrtReleaseSession=D.qa)(e),s._OrtGetInputOutputCount=(e,r,a)=>(s._OrtGetInputOutputCount=D.ra)(e,r,a),s._OrtGetInputName=(e,r)=>(s._OrtGetInputName=D.sa)(e,r),s._OrtGetOutputName=(e,r)=>(s._OrtGetOutputName=D.ta)(e,r),s._OrtFree=e=>(s._OrtFree=D.ua)(e),s._OrtCreateTensor=(e,r,a,i,d,w)=>(s._OrtCreateTensor=D.va)(e,r,a,i,d,w),s._OrtGetTensorData=(e,r,a,i,d)=>(s._OrtGetTensorData=D.wa)(e,r,a,i,d),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=D.xa)(e),s._OrtCreateRunOptions=(e,r,a,i)=>(s._OrtCreateRunOptions=D.ya)(e,r,a,i),s._OrtAddRunConfigEntry=(e,r,a)=>(s._OrtAddRunConfigEntry=D.za)(e,r,a),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=D.Aa)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=D.Ba)(e),s._OrtBindInput=(e,r,a)=>(s._OrtBindInput=D.Ca)(e,r,a),s._OrtBindOutput=(e,r,a,i)=>(s._OrtBindOutput=D.Da)(e,r,a,i),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=D.Ea)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=D.Fa)(e),s._OrtRunWithBinding=(e,r,a,i,d)=>(s._OrtRunWithBinding=D.Ga)(e,r,a,i,d),s._OrtRun=(e,r,a,i,d,w,h,A)=>(s._OrtRun=D.Ha)(e,r,a,i,d,w,h,A),s._OrtEndProfiling=e=>(s._OrtEndProfiling=D.Ia)(e);var St=()=>(St=D.Ja)(),Ge=s._malloc=e=>(Ge=s._malloc=D.Ka)(e),Te=s._free=e=>(Te=s._free=D.La)(e),Tt=e=>(Tt=D.Ma)(e),At=()=>(At=D.Oa)(),Mt=e=>(Mt=D.Pa)(e),Ct=e=>(Ct=D.Qa)(e);function Qt(){var e=D;e=Object.assign({},e);var r=i=>()=>i()>>>0,a=i=>d=>i(d)>>>0;return e.Ja=r(e.Ja),e.Ka=a(e.Ka),e.Ma=a(e.Ma),e.Oa=r(e.Oa),e.Qa=a(e.Qa),e}s.stackAlloc=Ct,s.stackSave=At,s.stackRestore=Mt,s.UTF8ToString=He,s.stringToUTF8=(e,r,a)=>De(e,z,r,a),s.lengthBytesUTF8=Ke;var Je;ae=function e(){Je||Pt(),Je||(ae=e)};function Pt(){if(!(0<ve)){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;){var e=s.preRun.shift();ue.unshift(e)}for(;0<ue.length;)ue.shift()(s);if(!(0<ve||Je||(Je=!0,s.calledRun=!0,Oe))){for(;0<ge.length;)ge.shift()(s);for(v(s);0<ye.length;)ye.shift()(s)}}}return Pt(),m.ready}})();typeof wr=="object"&&typeof ir=="object"?ir.exports=vr:typeof define=="function"&&define.amd&&define([],()=>vr)});var br=Dt(()=>{});var _r=Dt(()=>{});var Er={};tr(Er,{cpus:()=>rn});var rn,Sr=er(()=>{rn=void 0});var Mr=Dt((Ar,sr)=>{"use strict";var Tr=(()=>{var f=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(f=f||__filename),function(m={}){function s(){return J.buffer!=ge.buffer&&_e(),ge}function v(){return J.buffer!=ge.buffer&&_e(),ye}function c(){return J.buffer!=ge.buffer&&_e(),ve}function _(){return J.buffer!=ge.buffer&&_e(),te}function y(){return J.buffer!=ge.buffer&&_e(),ae}var u=m,C,F;u.ready=new Promise((t,n)=>{C=t,F=n});var B=Object.assign({},u),$="./this.program",R=(t,n)=>{throw n},I=typeof window=="object",H=typeof importScripts=="function",W=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T=u.ENVIRONMENT_IS_PTHREAD||!1,x="";function j(t){return u.locateFile?u.locateFile(t,x):x+t}var Oe,se,z;if(W){var me=(nr(),Ut(rr)),Ae=(or(),Ut(ar));x=H?Ae.dirname(x)+"/":__dirname+"/",Oe=(n,o)=>(n=Re(n)?new URL(n):Ae.normalize(n),me.readFileSync(n,o?void 0:"utf8")),z=n=>(n=Oe(n,!0),n.buffer||(n=new Uint8Array(n)),n),se=(n,o,l,O=!0)=>{n=Re(n)?new URL(n):Ae.normalize(n),me.readFile(n,O?void 0:"utf8",(b,S)=>{b?l(b):o(O?S.buffer:S)})},!u.thisProgram&&1<process.argv.length&&($=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),R=(n,o)=>{throw process.exitCode=n,o},u.inspect=()=>"[Emscripten Module object]";let t;try{t=br()}catch(n){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),n}global.Worker=t.Worker}else(I||H)&&(H?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),typeof f<"u"&&f&&(x=f),x.indexOf("blob:")!==0?x=x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):x="",W||(Oe=t=>{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.send(null),n.responseText},H&&(z=t=>{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),se=(t,n,o)=>{var l=new XMLHttpRequest;l.open("GET",t,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?n(l.response):o()},l.onerror=o,l.send(null)}));W&&typeof performance>"u"&&(global.performance=_r().performance);var E=console.log.bind(console),k=console.error.bind(console);W&&(E=(...t)=>me.writeSync(1,t.join(" ")+`\n`),k=(...t)=>me.writeSync(2,t.join(" ")+`\n`));var Qe=E,ne=k;Object.assign(u,B),B=null,typeof WebAssembly!="object"&&re("no native wasm support detected");var J,be,L=!1,ue,ge,ye,ve,te,ae;function _e(){var t=J.buffer;u.HEAP8=ge=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAPU8=ye=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAP32=ve=new Int32Array(t),u.HEAPU32=te=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=ae=new Float64Array(t)}var xe=16777216;if(T)J=u.wasmMemory;else if(u.wasmMemory)J=u.wasmMemory;else if(J=new WebAssembly.Memory({initial:xe/65536,maximum:65536,shared:!0}),!(J.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),W&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");_e(),xe=J.buffer.byteLength;var Me=[],Ee=[],Ze=[],de=0,Ce=null,Pe=null;function oe(){if(de--,de==0&&(Ce!==null&&(clearInterval(Ce),Ce=null),Pe)){var t=Pe;Pe=null,t()}}function re(t){throw t="Aborted("+t+")",ne(t),L=!0,ue=1,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),F(t),t}var $e=t=>t.startsWith("data:application/octet-stream;base64,"),Re=t=>t.startsWith("file://"),Le;Le="ort-wasm-threaded.wasm",$e(Le)||(Le=j(Le));function ft(t){if(z)return z(t);throw"both async and sync fetching of the wasm failed"}function Rt(t){if(I||H){if(typeof fetch=="function"&&!Re(t))return fetch(t,{credentials:"same-origin"}).then(n=>{if(!n.ok)throw"failed to load wasm binary file at \'"+t+"\'";return n.arrayBuffer()}).catch(()=>ft(t));if(se)return new Promise((n,o)=>{se(t,l=>n(new Uint8Array(l)),o)})}return Promise.resolve().then(()=>ft(t))}function He(t,n,o){return Rt(t).then(l=>WebAssembly.instantiate(l,n)).then(l=>l).then(o,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),re(l)})}function Ke(t,n){var o=Le;return typeof WebAssembly.instantiateStreaming!="function"||$e(o)||Re(o)||W||typeof fetch!="function"?He(o,t,n):fetch(o,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,t).then(n,function(O){return ne(`wasm streaming compile failed: ${O}`),ne("falling back to ArrayBuffer instantiation"),He(o,t,n)}))}var De,lt={920284:(t,n,o,l)=>{if(typeof u>"u"||!u.cb)return 1;if(t=tt(t>>>0),t.startsWith("./")&&(t=t.substring(2)),t=u.cb.get(t),!t)return 2;if(n>>>=0,o>>>=0,l>>>=0,n+o>t.byteLength)return 3;try{return v().set(t.subarray(n,n+o),l>>>0),0}catch{return 4}}};function ze(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}var pe=t=>{t.terminate(),t.onmessage=()=>{}},et=t=>{P.Pa.length==0&&(le(),P.Ya(P.Pa[0]));var n=P.Pa.pop();if(!n)return 6;P.Qa.push(n),P.Ma[t.Oa]=n,n.Oa=t.Oa;var o={cmd:"run",start_routine:t.kb,arg:t.hb,pthread_ptr:t.Oa};return W&&n.unref(),n.postMessage(o,t.qb),0},We=0,It=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ue=(t,n,o)=>{n>>>=0;var l=n+o;for(o=n;t[o]&&!(o>=l);)++o;if(16<o-n&&t.buffer&&It)return It.decode(t.buffer instanceof SharedArrayBuffer?t.slice(n,o):t.subarray(n,o));for(l="";n<o;){var O=t[n++];if(O&128){var b=t[n++]&63;if((O&224)==192)l+=String.fromCharCode((O&31)<<6|b);else{var S=t[n++]&63;O=(O&240)==224?(O&15)<<12|b<<6|S:(O&7)<<18|b<<12|S<<6|t[n++]&63,65536>O?l+=String.fromCharCode(O):(O-=65536,l+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else l+=String.fromCharCode(O)}return l},tt=(t,n)=>(t>>>=0)?Ue(v(),t,n):"",Fe=t=>{var n=ut();return t=t(),zt(n),t};function Y(t,n){var o=arguments.length-2,l=arguments;return Fe(()=>{for(var O=Zt(8*o),b=O>>>3,S=0;S<o;S++){var X=l[2+S];y()[b+S>>>0]=X}return ce(t,o,O,n)})}function ct(t){if(T)return Y(0,1,t);ue=t,0<We||(P.lb(),u.onExit?.(t),L=!0),R(t,new ze(t))}var fe=t=>{if(ue=t,T)throw Bt(t),"unwind";ct(t)};function dt(){for(var t=u.numThreads;t--;)le();Me.unshift(()=>{de++,Se(()=>oe())})}function le(){var t=j("ort-wasm-threaded.worker.js");t=new Worker(t),P.Pa.push(t)}function Se(t){T?t():Promise.all(P.Pa.map(P.Ya)).then(t)}var P={Pa:[],Qa:[],bb:[],Ma:{},Wa(){T?(P.receiveObjectTransfer=P.jb,P.threadInitTLS=P.ab,P.setExitStatus=P.$a):dt()},$a:t=>ue=t,tb:["$terminateWorker"],lb:()=>{for(var t of P.Qa)pe(t);for(t of P.Pa)pe(t);P.Pa=[],P.Qa=[],P.Ma=[]},Za:t=>{var n=t.Oa;delete P.Ma[n],P.Pa.push(t),P.Qa.splice(P.Qa.indexOf(t),1),t.Oa=0,we(n)},jb(){},ab(){P.bb.forEach(t=>t())},Ya:t=>new Promise(n=>{t.onmessage=b=>{b=b.data;var S=b.cmd;if(b.targetThread&&b.targetThread!=U()){var X=P.Ma[b.targetThread];X?X.postMessage(b,b.transferList):ne(`Internal error! Worker sent a message "${S}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else S==="checkMailbox"?Ye():S==="spawnThread"?et(b):S==="cleanupThread"?P.Za(P.Ma[b.thread]):S==="killThread"?(b=b.thread,S=P.Ma[b],delete P.Ma[b],pe(S),we(b),P.Qa.splice(P.Qa.indexOf(S),1),S.Oa=0):S==="cancelThread"?P.Ma[b.thread].postMessage({cmd:"cancel"}):S==="loaded"?(t.loaded=!0,W&&!t.Oa&&t.unref(),n(t)):S==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?t.postMessage(b):S==="callHandler"?u[b.handler](...b.args):S&&ne(`worker sent an unknown command ${S}`)},t.onerror=b=>{throw ne(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},W&&(t.on("message",b=>t.onmessage({data:b})),t.on("error",b=>t.onerror(b)));var o=[],l=["onExit"],O;for(O of l)u.hasOwnProperty(O)&&o.push(O);t.postMessage({cmd:"load",handlers:o,urlOrBlob:u.mainScriptUrlOrBlob||f,wasmMemory:J,wasmModule:be})})};u.PThread=P;var rt=t=>{for(;0<t.length;)t.shift()(u)};u.establishStackSpace=()=>{var t=U(),n=_()[t+52>>>2>>>0];t=_()[t+56>>>2>>>0],Ie(n,n-t),zt(n)};function Bt(t){if(T)return Y(1,0,t);fe(t)}var Ve=[],Lt;u.invokeEntryPoint=(t,n)=>{var o=Ve[t];o||(t>=Ve.length&&(Ve.length=t+1),Ve[t]=o=Lt.get(t)),t=o(n),0<We?P.$a(t):p(t)};function Jt(t){this.Va=t-24,this.gb=function(n){_()[this.Va+4>>>2>>>0]=n},this.fb=function(n){_()[this.Va+8>>>2>>>0]=n},this.Wa=function(n,o){this.eb(),this.gb(n),this.fb(o)},this.eb=function(){_()[this.Va+16>>>2>>>0]=0}}var Wt=0,Xt=0;function Nt(t,n,o,l){return T?Y(2,1,t,n,o,l):kt(t,n,o,l)}function kt(t,n,o,l){if(t>>>=0,n>>>=0,o>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var O=[];return T&&O.length===0?Nt(t,n,o,l):(t={kb:o,Oa:t,hb:l,qb:O},T?(t.sb="spawnThread",postMessage(t,O),0):et(t))}function nt(t,n,o){return T?Y(3,1,t,n,o):0}function pt(t,n){if(T)return Y(4,1,t,n)}var je=t=>{for(var n=0,o=0;o<t.length;++o){var l=t.charCodeAt(o);127>=l?n++:2047>=l?n+=2:55296<=l&&57343>=l?(n+=4,++o):n+=3}return n},$t=(t,n,o,l)=>{if(o>>>=0,!(0<l))return 0;var O=o;l=o+l-1;for(var b=0;b<t.length;++b){var S=t.charCodeAt(b);if(55296<=S&&57343>=S){var X=t.charCodeAt(++b);S=65536+((S&1023)<<10)|X&1023}if(127>=S){if(o>=l)break;n[o++>>>0]=S}else{if(2047>=S){if(o+1>=l)break;n[o++>>>0]=192|S>>6}else{if(65535>=S){if(o+2>=l)break;n[o++>>>0]=224|S>>12}else{if(o+3>=l)break;n[o++>>>0]=240|S>>18,n[o++>>>0]=128|S>>12&63}n[o++>>>0]=128|S>>6&63}n[o++>>>0]=128|S&63}}return n[o>>>0]=0,o-O},at=(t,n,o)=>$t(t,v(),n,o);function mt(t,n){if(T)return Y(5,1,t,n)}function Ht(t,n,o){if(T)return Y(6,1,t,n,o)}function jt(t,n,o){return T?Y(7,1,t,n,o):0}function gt(t,n){if(T)return Y(8,1,t,n)}function Yt(t,n,o){if(T)return Y(9,1,t,n,o)}function Ne(t,n,o,l){if(T)return Y(10,1,t,n,o,l)}function ht(t,n,o,l){if(T)return Y(11,1,t,n,o,l)}function yt(t,n,o,l){if(T)return Y(12,1,t,n,o,l)}function vt(t){if(T)return Y(13,1,t)}function ot(t,n){if(T)return Y(14,1,t,n)}function it(t,n,o){if(T)return Y(15,1,t,n,o)}function st(t){t>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(c(),t>>>2,t).value.then(Ye),t+=128,Atomics.store(c(),t>>>2,1))}u.__emscripten_thread_mailbox_await=st;var Ye=()=>{var t=U();if(t&&(st(t),t=N,!L))try{if(t(),!(0<We))try{T?p(ue):fe(ue)}catch(n){n instanceof ze||n=="unwind"||R(1,n)}}catch(n){n instanceof ze||n=="unwind"||R(1,n)}};u.checkMailbox=Ye;var wt=[],ke=t=>t%4===0&&(t%100!==0||t%400===0),Ot=[0,31,60,91,121,152,182,213,244,274,305,335],Gt=[0,31,59,90,120,151,181,212,243,273,304,334];function bt(t,n,o,l,O,b,S,X){return T?Y(16,1,t,n,o,l,O,b,S,X):-52}function _t(t,n,o,l,O,b,S){if(T)return Y(17,1,t,n,o,l,O,b,S)}var qe=t=>{var n=je(t)+1,o=M(n);return o&&at(t,o,n),o},Et=[],D={},St=()=>{if(!Ge){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:$||"./this.program"},n;for(n in D)D[n]===void 0?delete t[n]:t[n]=D[n];var o=[];for(n in t)o.push(`${n}=${t[n]}`);Ge=o}return Ge},Ge;function Te(t,n){if(T)return Y(18,1,t,n);t>>>=0,n>>>=0;var o=0;return St().forEach((l,O)=>{var b=n+o;for(O=_()[t+4*O>>>2>>>0]=b,b=0;b<l.length;++b)s()[O++>>>0>>>0]=l.charCodeAt(b);s()[O>>>0>>>0]=0,o+=l.length+1}),0}function Tt(t,n){if(T)return Y(19,1,t,n);t>>>=0,n>>>=0;var o=St();_()[t>>>2>>>0]=o.length;var l=0;return o.forEach(O=>l+=O.length+1),_()[n>>>2>>>0]=l,0}function At(t){return T?Y(20,1,t):52}function Mt(t,n,o,l){return T?Y(21,1,t,n,o,l):52}function Ct(t,n,o,l,O){return T?Y(22,1,t,n,o,l,O):70}var Qt=[null,[],[]];function Je(t,n,o,l){if(T)return Y(23,1,t,n,o,l);n>>>=0,o>>>=0,l>>>=0;for(var O=0,b=0;b<o;b++){var S=_()[n>>>2>>>0],X=_()[n+4>>>2>>>0];n+=8;for(var Be=0;Be<X;Be++){var ie=v()[S+Be>>>0],he=Qt[t];ie===0||ie===10?((t===1?Qe:ne)(Ue(he,0)),he.length=0):he.push(ie)}O+=X}return _()[l>>>2>>>0]=O,0}var Pt=[31,29,31,30,31,30,31,31,30,31,30,31],e=[31,28,31,30,31,30,31,31,30,31,30,31];function r(t){var n=Array(je(t)+1);return $t(t,n,0,n.length),n}var a=(t,n)=>{s().set(t,n>>>0)};function i(t,n,o,l){function O(g,G,Q){for(g=typeof g=="number"?g.toString():g||"";g.length<G;)g=Q[0]+g;return g}function b(g,G){return O(g,G,"0")}function S(g,G){function Q(hr){return 0>hr?-1:0<hr?1:0}var Xe;return(Xe=Q(g.getFullYear()-G.getFullYear()))===0&&(Xe=Q(g.getMonth()-G.getMonth()))===0&&(Xe=Q(g.getDate()-G.getDate())),Xe}function X(g){switch(g.getDay()){case 0:return new Date(g.getFullYear()-1,11,29);case 1:return g;case 2:return new Date(g.getFullYear(),0,3);case 3:return new Date(g.getFullYear(),0,2);case 4:return new Date(g.getFullYear(),0,1);case 5:return new Date(g.getFullYear()-1,11,31);case 6:return new Date(g.getFullYear()-1,11,30)}}function Be(g){var G=g.Ra;for(g=new Date(new Date(g.Sa+1900,0,1).getTime());0<G;){var Q=g.getMonth(),Xe=(ke(g.getFullYear())?Pt:e)[Q];if(G>Xe-g.getDate())G-=Xe-g.getDate()+1,g.setDate(1),11>Q?g.setMonth(Q+1):(g.setMonth(0),g.setFullYear(g.getFullYear()+1));else{g.setDate(g.getDate()+G);break}}return Q=new Date(g.getFullYear()+1,0,4),G=X(new Date(g.getFullYear(),0,4)),Q=X(Q),0>=S(G,g)?0>=S(Q,g)?g.getFullYear()+1:g.getFullYear():g.getFullYear()-1}t>>>=0,n>>>=0,o>>>=0,l>>>=0;var ie=_()[l+40>>>2>>>0];l={ob:c()[l>>>2>>>0],nb:c()[l+4>>>2>>>0],Ta:c()[l+8>>>2>>>0],Xa:c()[l+12>>>2>>>0],Ua:c()[l+16>>>2>>>0],Sa:c()[l+20>>>2>>>0],Na:c()[l+24>>>2>>>0],Ra:c()[l+28>>>2>>>0],ub:c()[l+32>>>2>>>0],mb:c()[l+36>>>2>>>0],pb:ie?tt(ie):""},o=tt(o),ie={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var he in ie)o=o.replace(new RegExp(he,"g"),ie[he]);var mr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),gr="January February March April May June July August September October November December".split(" ");ie={"%a":g=>mr[g.Na].substring(0,3),"%A":g=>mr[g.Na],"%b":g=>gr[g.Ua].substring(0,3),"%B":g=>gr[g.Ua],"%C":g=>b((g.Sa+1900)/100|0,2),"%d":g=>b(g.Xa,2),"%e":g=>O(g.Xa,2," "),"%g":g=>Be(g).toString().substring(2),"%G":g=>Be(g),"%H":g=>b(g.Ta,2),"%I":g=>(g=g.Ta,g==0?g=12:12<g&&(g-=12),b(g,2)),"%j":g=>{for(var G=0,Q=0;Q<=g.Ua-1;G+=(ke(g.Sa+1900)?Pt:e)[Q++]);return b(g.Xa+G,3)},"%m":g=>b(g.Ua+1,2),"%M":g=>b(g.nb,2),"%n":()=>`\n`,"%p":g=>0<=g.Ta&&12>g.Ta?"AM":"PM","%S":g=>b(g.ob,2),"%t":()=>"	","%u":g=>g.Na||7,"%U":g=>b(Math.floor((g.Ra+7-g.Na)/7),2),"%V":g=>{var G=Math.floor((g.Ra+7-(g.Na+6)%7)/7);if(2>=(g.Na+371-g.Ra-2)%7&&G++,G)G==53&&(Q=(g.Na+371-g.Ra)%7,Q==4||Q==3&&ke(g.Sa)||(G=1));else{G=52;var Q=(g.Na+7-g.Ra-1)%7;(Q==4||Q==5&&ke(g.Sa%400-1))&&G++}return b(G,2)},"%w":g=>g.Na,"%W":g=>b(Math.floor((g.Ra+7-(g.Na+6)%7)/7),2),"%y":g=>(g.Sa+1900).toString().substring(2),"%Y":g=>g.Sa+1900,"%z":g=>{g=g.mb;var G=0<=g;return g=Math.abs(g)/60,(G?"+":"-")+("0000"+(g/60*100+g%60)).slice(-4)},"%Z":g=>g.pb,"%%":()=>"%"},o=o.replace(/%%/g,"\\0\\0");for(he in ie)o.includes(he)&&(o=o.replace(new RegExp(he,"g"),ie[he](l)));return o=o.replace(/\\0\\0/g,"%"),he=r(o),he.length>n?0:(a(he,t),he.length-1)}P.Wa();var d=[ct,Bt,Nt,nt,pt,mt,Ht,jt,gt,Yt,Ne,ht,yt,vt,ot,it,bt,_t,Te,Tt,At,Mt,Ct,Je],w={b:function(t,n,o){throw t>>>=0,new Jt(t).Wa(n>>>0,o>>>0),Wt=t,Xt++,Wt},L:function(t){V(t>>>0,!H,1,!I,131072,!1),P.ab()},j:function(t){t>>>=0,T?postMessage({cmd:"cleanupThread",thread:t}):P.Za(P.Ma[t])},H:kt,h:nt,S:pt,D:mt,F:Ht,T:jt,Q:gt,J:Yt,P:Ne,n:ht,E:yt,B:vt,R:ot,C:it,p:()=>1,z:function(t,n){t>>>=0,t==n>>>0?setTimeout(()=>Ye()):T?postMessage({targetThread:t,cmd:"checkMailbox"}):(t=P.Ma[t])&&t.postMessage({cmd:"checkMailbox"})},I:function(t,n,o,l){n>>>=0,wt.length=o,l=l>>>0>>>3;for(var O=0;O<o;O++)wt[O]=y()[l+O>>>0];return t=0>t?lt[-t-1]:d[t],P.ib=n,n=t.apply(null,wt),P.ib=0,n},K:st,o:function(t){W&&P.Ma[t>>>0].ref()},s:function(t,n,o){t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN,o>>>=0,t=new Date(1e3*t),c()[o>>>2>>>0]=t.getUTCSeconds(),c()[o+4>>>2>>>0]=t.getUTCMinutes(),c()[o+8>>>2>>>0]=t.getUTCHours(),c()[o+12>>>2>>>0]=t.getUTCDate(),c()[o+16>>>2>>>0]=t.getUTCMonth(),c()[o+20>>>2>>>0]=t.getUTCFullYear()-1900,c()[o+24>>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,c()[o+28>>>2>>>0]=t},t:function(t,n,o){t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN,o>>>=0,t=new Date(1e3*t),c()[o>>>2>>>0]=t.getSeconds(),c()[o+4>>>2>>>0]=t.getMinutes(),c()[o+8>>>2>>>0]=t.getHours(),c()[o+12>>>2>>>0]=t.getDate(),c()[o+16>>>2>>>0]=t.getMonth(),c()[o+20>>>2>>>0]=t.getFullYear()-1900,c()[o+24>>>2>>>0]=t.getDay(),n=(ke(t.getFullYear())?Ot:Gt)[t.getMonth()]+t.getDate()-1|0,c()[o+28>>>2>>>0]=n,c()[o+36>>>2>>>0]=-(60*t.getTimezoneOffset()),n=new Date(t.getFullYear(),6,1).getTimezoneOffset();var l=new Date(t.getFullYear(),0,1).getTimezoneOffset();t=(n!=l&&t.getTimezoneOffset()==Math.min(l,n))|0,c()[o+32>>>2>>>0]=t},u:function(t){t>>>=0;var n=new Date(c()[t+20>>>2>>>0]+1900,c()[t+16>>>2>>>0],c()[t+12>>>2>>>0],c()[t+8>>>2>>>0],c()[t+4>>>2>>>0],c()[t>>>2>>>0],0),o=c()[t+32>>>2>>>0],l=n.getTimezoneOffset(),O=new Date(n.getFullYear(),6,1).getTimezoneOffset(),b=new Date(n.getFullYear(),0,1).getTimezoneOffset(),S=Math.min(b,O);return 0>o?c()[t+32>>>2>>>0]=+(O!=b&&S==l):0<o!=(S==l)&&(O=Math.max(b,O),n.setTime(n.getTime()+6e4*((0<o?S:O)-l))),c()[t+24>>>2>>>0]=n.getDay(),o=(ke(n.getFullYear())?Ot:Gt)[n.getMonth()]+n.getDate()-1|0,c()[t+28>>>2>>>0]=o,c()[t>>>2>>>0]=n.getSeconds(),c()[t+4>>>2>>>0]=n.getMinutes(),c()[t+8>>>2>>>0]=n.getHours(),c()[t+12>>>2>>>0]=n.getDate(),c()[t+16>>>2>>>0]=n.getMonth(),c()[t+20>>>2>>>0]=n.getYear(),t=n.getTime(),isNaN(t)?(c()[A()>>>2>>>0]=61,t=-1):t/=1e3,q((De=t,1<=+Math.abs(De)?0<De?+Math.floor(De/4294967296)>>>0:~~+Math.ceil((De-+(~~De>>>0))/4294967296)>>>0:0)),t>>>0},q:bt,r:_t,y:function(t,n,o){function l(ie){return(ie=ie.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?ie[1]:"GMT"}t>>>=0,n>>>=0,o>>>=0;var O=new Date().getFullYear(),b=new Date(O,0,1),S=new Date(O,6,1);O=b.getTimezoneOffset();var X=S.getTimezoneOffset(),Be=Math.max(O,X);_()[t>>>2>>>0]=60*Be,c()[n>>>2>>>0]=+(O!=X),t=l(b),n=l(S),t=qe(t),n=qe(n),X<O?(_()[o>>>2>>>0]=t,_()[o+4>>>2>>>0]=n):(_()[o>>>2>>>0]=n,_()[o+4>>>2>>>0]=t)},c:()=>{re("")},O:function(t,n,o){t>>>=0,n>>>=0,o>>>=0,Et.length=0;for(var l;l=v()[n++>>>0];){var O=l!=105;O&=l!=112,o+=O&&o%8?4:0,Et.push(l==112?_()[o>>>2>>>0]:l==105?c()[o>>>2>>>0]:y()[o>>>3>>>0]),o+=O?8:4}return lt[t].apply(null,Et)},k:()=>{},i:()=>Date.now(),U:()=>{throw We+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>W?(Sr(),Ut(Er)).cpus().length:navigator.hardwareConcurrency,x:function(t){t>>>=0;var n=v().length;if(t<=n||4294901760<t)return!1;for(var o=1;4>=o;o*=2){var l=n*(1+.2/o);l=Math.min(l,t+100663296);var O=Math;l=Math.max(t,l);e:{O=(O.min.call(O,4294901760,l+(65536-l%65536)%65536)-J.buffer.byteLength+65535)/65536;try{J.grow(O),_e();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:Te,N:Tt,G:fe,g:At,m:Mt,v:Ct,l:Je,a:J||u.wasmMemory,w:i,d:function(t,n,o,l){return i(t>>>0,n>>>0,o>>>0,l>>>0)}},h=function(){function t(o,l){return h=o.exports,h=qr(),P.bb.push(h.za),Lt=h.Aa,Ee.unshift(h.V),be=l,oe(),h}var n={a:w};if(de++,u.instantiateWasm)try{return u.instantiateWasm(n,t)}catch(o){ne(`Module.instantiateWasm callback failed with error: ${o}`),F(o)}return Ke(n,function(o){t(o.instance,o.module)}).catch(F),{}}();u._OrtInit=(t,n)=>(u._OrtInit=h.W)(t,n),u._OrtGetLastError=(t,n)=>(u._OrtGetLastError=h.X)(t,n),u._OrtCreateSessionOptions=(t,n,o,l,O,b,S,X,Be,ie)=>(u._OrtCreateSessionOptions=h.Y)(t,n,o,l,O,b,S,X,Be,ie),u._OrtAppendExecutionProvider=(t,n)=>(u._OrtAppendExecutionProvider=h.Z)(t,n),u._OrtAddFreeDimensionOverride=(t,n,o)=>(u._OrtAddFreeDimensionOverride=h._)(t,n,o),u._OrtAddSessionConfigEntry=(t,n,o)=>(u._OrtAddSessionConfigEntry=h.$)(t,n,o),u._OrtReleaseSessionOptions=t=>(u._OrtReleaseSessionOptions=h.aa)(t),u._OrtCreateSession=(t,n,o)=>(u._OrtCreateSession=h.ba)(t,n,o),u._OrtReleaseSession=t=>(u._OrtReleaseSession=h.ca)(t),u._OrtGetInputOutputCount=(t,n,o)=>(u._OrtGetInputOutputCount=h.da)(t,n,o),u._OrtGetInputName=(t,n)=>(u._OrtGetInputName=h.ea)(t,n),u._OrtGetOutputName=(t,n)=>(u._OrtGetOutputName=h.fa)(t,n),u._OrtFree=t=>(u._OrtFree=h.ga)(t),u._OrtCreateTensor=(t,n,o,l,O,b)=>(u._OrtCreateTensor=h.ha)(t,n,o,l,O,b),u._OrtGetTensorData=(t,n,o,l,O)=>(u._OrtGetTensorData=h.ia)(t,n,o,l,O),u._OrtReleaseTensor=t=>(u._OrtReleaseTensor=h.ja)(t),u._OrtCreateRunOptions=(t,n,o,l)=>(u._OrtCreateRunOptions=h.ka)(t,n,o,l),u._OrtAddRunConfigEntry=(t,n,o)=>(u._OrtAddRunConfigEntry=h.la)(t,n,o),u._OrtReleaseRunOptions=t=>(u._OrtReleaseRunOptions=h.ma)(t),u._OrtCreateBinding=t=>(u._OrtCreateBinding=h.na)(t),u._OrtBindInput=(t,n,o)=>(u._OrtBindInput=h.oa)(t,n,o),u._OrtBindOutput=(t,n,o,l)=>(u._OrtBindOutput=h.pa)(t,n,o,l),u._OrtClearBoundOutputs=t=>(u._OrtClearBoundOutputs=h.qa)(t),u._OrtReleaseBinding=t=>(u._OrtReleaseBinding=h.ra)(t),u._OrtRunWithBinding=(t,n,o,l,O)=>(u._OrtRunWithBinding=h.sa)(t,n,o,l,O),u._OrtRun=(t,n,o,l,O,b,S,X)=>(u._OrtRun=h.ta)(t,n,o,l,O,b,S,X),u._OrtEndProfiling=t=>(u._OrtEndProfiling=h.ua)(t);var A=()=>(A=h.va)(),U=u._pthread_self=()=>(U=u._pthread_self=h.wa)(),M=u._malloc=t=>(M=u._malloc=h.xa)(t);u._free=t=>(u._free=h.ya)(t),u.__emscripten_tls_init=()=>(u.__emscripten_tls_init=h.za)();var V=u.__emscripten_thread_init=(t,n,o,l,O,b)=>(V=u.__emscripten_thread_init=h.Ba)(t,n,o,l,O,b);u.__emscripten_thread_crashed=()=>(u.__emscripten_thread_crashed=h.Ca)();var ce=(t,n,o,l)=>(ce=h.Da)(t,n,o,l),we=t=>(we=h.Ea)(t),p=u.__emscripten_thread_exit=t=>(p=u.__emscripten_thread_exit=h.Fa)(t),N=()=>(N=h.Ga)(),q=t=>(q=h.Ha)(t),Ie=(t,n)=>(Ie=h.Ia)(t,n),ut=()=>(ut=h.Ja)(),zt=t=>(zt=h.Ka)(t),Zt=t=>(Zt=h.La)(t);function qr(){var t=h;t=Object.assign({},t);var n=l=>()=>l()>>>0,o=l=>O=>l(O)>>>0;return t.va=n(t.va),t.wa=n(t.wa),t.xa=o(t.xa),t.emscripten_main_runtime_thread_id=n(t.emscripten_main_runtime_thread_id),t.Ja=n(t.Ja),t.La=o(t.La),t}u.wasmMemory=J,u.stackAlloc=Zt,u.stackSave=ut,u.stackRestore=zt,u.keepRuntimeAlive=()=>0<We,u.UTF8ToString=tt,u.stringToUTF8=at,u.lengthBytesUTF8=je,u.ExitStatus=ze,u.PThread=P;var Vt;Pe=function t(){Vt||pr(),Vt||(Pe=t)};function pr(){if(!(0<de))if(T)C(u),T||rt(Ee),startWorker(u);else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)Me.unshift(u.preRun.shift());rt(Me),0<de||Vt||(Vt=!0,u.calledRun=!0,L||(T||rt(Ee),C(u),T||rt(Ze)))}}return pr(),m.ready}})();typeof Ar=="object"&&typeof sr=="object"?sr.exports=Tr:typeof define=="function"&&define.amd&&define([],()=>Tr)});var Cr=Dt((_n,nn)=>{nn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\\n\'});var Dr;Dr=Or();var an=Mr(),ur,fr=!1,qt=!1,Pr=!1,on=f=>{if(f===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+f+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+f+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},sn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},un=(f,m)=>f?m?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":m?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Ur=async f=>{if(fr)return Promise.resolve();if(qt)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Pr)throw new Error("previous call to \'initializeWebAssembly()\' failed.");qt=!0;let m=f.initTimeout,s=f.numThreads,v=f.simd,c=on(s),_=v&&sn(),y=f.wasmPaths,u=typeof y=="string"?y:void 0,C=un(_,c),F=typeof y=="object"?y[C]:void 0,B=!1,$=[];if(m>0&&$.push(new Promise(R=>{setTimeout(()=>{B=!0,R()},m)})),$.push(new Promise((R,I)=>{let H=c?an:Dr,W={locateFile:(T,x)=>c&&T.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Cr()],{type:"text/javascript"})):T.endsWith(".wasm")?F||(u??x)+C:x+T};if(c)if(W.numThreads=s,typeof Blob>"u")W.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let T=`var ortWasmThreaded=${H.toString()};`;W.mainScriptUrlOrBlob=new Blob([T],{type:"text/javascript"})}H(W).then(T=>{qt=!1,fr=!0,ur=T,R()},T=>{qt=!1,Pr=!0,I(T)})})),await Promise.race($),B)throw new Error(`WebAssembly backend initializing failed due to timeout: ${m}ms`)},K=()=>{if(fr&&ur)return ur;throw new Error("WebAssembly is not initialized yet.")};var ee=(f,m)=>{let s=K(),v=s.lengthBytesUTF8(f)+1,c=s._malloc(v);return s.stringToUTF8(f,c,v),m.push(c),c},Ft=(f,m,s,v)=>{if(typeof f=="object"&&f!==null){if(s.has(f))throw new Error("Circular reference in options");s.add(f)}Object.entries(f).forEach(([c,_])=>{let y=m?m+c:c;if(typeof _=="object")Ft(_,y+".",s,v);else if(typeof _=="string"||typeof _=="number")v(y,_.toString());else if(typeof _=="boolean")v(y,_?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof _}`)})},Z=f=>{let m=K(),s=m.stackSave();try{let v=m.stackAlloc(8);m._OrtGetLastError(v,v+4);let c=m.HEAP32[v/4],_=m.HEAPU32[v/4+1],y=_?m.UTF8ToString(_):"";throw new Error(`${f} ERROR_CODE: ${c}, ERROR_MESSAGE: ${y}`)}finally{m.stackRestore(s)}};var Fr=f=>{let m=K(),s=0,v=[],c=f||{};try{if(f?.logSeverityLevel===void 0)c.logSeverityLevel=2;else if(typeof f.logSeverityLevel!="number"||!Number.isInteger(f.logSeverityLevel)||f.logSeverityLevel<0||f.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${f.logSeverityLevel}`);if(f?.logVerbosityLevel===void 0)c.logVerbosityLevel=0;else if(typeof f.logVerbosityLevel!="number"||!Number.isInteger(f.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${f.logVerbosityLevel}`);f?.terminate===void 0&&(c.terminate=!1);let _=0;return f?.tag!==void 0&&(_=ee(f.tag,v)),s=m._OrtCreateRunOptions(c.logSeverityLevel,c.logVerbosityLevel,!!c.terminate,_),s===0&&Z("Can\'t create run options."),f?.extra!==void 0&&Ft(f.extra,"",new WeakSet,(y,u)=>{let C=ee(y,v),F=ee(u,v);m._OrtAddRunConfigEntry(s,C,F)!==0&&Z(`Can\'t set a run config entry: ${y} - ${u}.`)}),[s,v]}catch(_){throw s!==0&&m._OrtReleaseRunOptions(s),v.forEach(y=>m._free(y)),_}};var fn=f=>{switch(f){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${f}`)}},ln=f=>{switch(f){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${f}`)}},cn=f=>{f.extra||(f.extra={}),f.extra.session||(f.extra.session={});let m=f.extra.session;m.use_ort_model_bytes_directly||(m.use_ort_model_bytes_directly="1"),f.executionProviders&&f.executionProviders.some(s=>(typeof s=="string"?s:s.name)==="webgpu")&&(f.enableMemPattern=!1)},dn=(f,m,s)=>{for(let v of m){let c=typeof v=="string"?v:v.name;switch(c){case"webnn":if(c="WEBNN",typeof v!="string"){let y=v;if(y?.deviceType){let u=ee("deviceType",s),C=ee(y.deviceType,s);K()._OrtAddSessionConfigEntry(f,u,C)!==0&&Z(`Can\'t set a session config entry: \'deviceType\' - ${y.deviceType}.`)}if(y?.numThreads){let u=y.numThreads;(typeof u!="number"||!Number.isInteger(u)||u<0)&&(u=0);let C=ee("numThreads",s),F=ee(u.toString(),s);K()._OrtAddSessionConfigEntry(f,C,F)!==0&&Z(`Can\'t set a session config entry: \'numThreads\' - ${y.numThreads}.`)}if(y?.powerPreference){let u=ee("powerPreference",s),C=ee(y.powerPreference,s);K()._OrtAddSessionConfigEntry(f,u,C)!==0&&Z(`Can\'t set a session config entry: \'powerPreference\' - ${y.powerPreference}.`)}}break;case"webgpu":if(c="JS",typeof v!="string"){let y=v;if(y?.preferredLayout){if(y.preferredLayout!=="NCHW"&&y.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${y.preferredLayout}`);let u=ee("preferredLayout",s),C=ee(y.preferredLayout,s);K()._OrtAddSessionConfigEntry(f,u,C)!==0&&Z(`Can\'t set a session config entry: \'preferredLayout\' - ${y.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${c}`)}let _=ee(c,s);K()._OrtAppendExecutionProvider(f,_)!==0&&Z(`Can\'t append execution provider: ${c}.`)}},xr=f=>{let m=K(),s=0,v=[],c=f||{};cn(c);try{let _=fn(c.graphOptimizationLevel??"all"),y=ln(c.executionMode??"sequential"),u=typeof c.logId=="string"?ee(c.logId,v):0,C=c.logSeverityLevel??2;if(!Number.isInteger(C)||C<0||C>4)throw new Error(`log serverity level is not valid: ${C}`);let F=c.logVerbosityLevel??0;if(!Number.isInteger(F)||F<0||F>4)throw new Error(`log verbosity level is not valid: ${F}`);let B=typeof c.optimizedModelFilePath=="string"?ee(c.optimizedModelFilePath,v):0;if(s=m._OrtCreateSessionOptions(_,!!c.enableCpuMemArena,!!c.enableMemPattern,y,!!c.enableProfiling,0,u,C,F,B),s===0&&Z("Can\'t create session options."),c.executionProviders&&dn(s,c.executionProviders,v),c.freeDimensionOverrides)for(let[$,R]of Object.entries(c.freeDimensionOverrides)){if(typeof $!="string")throw new Error(`free dimension override name must be a string: ${$}`);if(typeof R!="number"||!Number.isInteger(R)||R<0)throw new Error(`free dimension override value must be a non-negative integer: ${R}`);let I=ee($,v);m._OrtAddFreeDimensionOverride(s,I,R)!==0&&Z(`Can\'t set a free dimension override: ${$} - ${R}.`)}return c.extra!==void 0&&Ft(c.extra,"",new WeakSet,($,R)=>{let I=ee($,v),H=ee(R,v);m._OrtAddSessionConfigEntry(s,I,H)!==0&&Z(`Can\'t set a session config entry: ${$} - ${R}.`)}),[s,v]}catch(_){throw s!==0&&m._OrtReleaseSessionOptions(s),v.forEach(y=>m._free(y)),_}};var lr=f=>{switch(f){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${f}`)}},Rr=f=>{switch(f){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${f}`)}},cr=f=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][f],Ir=f=>{switch(f){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${f}`)}},Br=f=>{switch(f){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${f}`)}},Lr=f=>f==="float32"||f==="int32"||f==="int64"||f==="bool"||f==="float16"||f==="uint32",Wr=f=>{switch(f){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${f}`)}};var Nr=async f=>{if(typeof f=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(f))}catch(m){if(m.code==="ERR_FS_FILE_TOO_LARGE"){let s=(void 0)(f),v=[];for await(let c of s)v.push(c);return new Uint8Array(Buffer.concat(v))}throw m}else{let m=await fetch(f);if(!m.ok)throw new Error(`failed to load external data file: ${f}`);let s=m.headers.get("Content-Length"),v=s?parseInt(s,10):0;if(v<1073741824)return new Uint8Array(await m.arrayBuffer());{if(!m.body)throw new Error(`failed to load external data file: ${f}, no response body.`);let c=m.body.getReader(),_;try{_=new ArrayBuffer(v)}catch(u){if(u instanceof RangeError){let C=Math.ceil(v/65536);_=new WebAssembly.Memory({initial:C,maximum:C}).buffer}else throw u}let y=0;for(;;){let{done:u,value:C}=await c.read();if(u)break;let F=C.byteLength;new Uint8Array(_,y,F).set(C),y+=F}return new Uint8Array(_,0,v)}}else return f instanceof Blob?new Uint8Array(await f.arrayBuffer()):f instanceof Uint8Array?f:new Uint8Array(f)};var pn=(f,m)=>{K()._OrtInit(f,m)!==0&&Z("Can\'t initialize onnxruntime.")},$r=async f=>{pn(f.wasm.numThreads,Br(f.logLevel))},Hr=async(f,m)=>{},xt=new Map,mn=f=>{let m=K(),s=m.stackSave();try{let v=m.stackAlloc(8);return m._OrtGetInputOutputCount(f,v,v+4)!==0&&Z("Can\'t get session input/output count."),[m.HEAP32[v/4],m.HEAP32[v/4+1]]}finally{m.stackRestore(s)}},dr=f=>{let m=K(),s=m._malloc(f.byteLength);if(s===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${f.byteLength}.`);return m.HEAPU8.set(f,s),[s,f.byteLength]},jr=async(f,m)=>{let s,v,c=K();Array.isArray(f)?[s,v]=f:f.buffer===c.HEAPU8.buffer?[s,v]=[f.byteOffset,f.byteLength]:[s,v]=dr(f);let _=0,y=0,u=0,C=[],F=[],B=[];try{if([y,C]=xr(m),m?.externalData&&c.mountExternalData){let x=[];for(let j of m.externalData){let Oe=typeof j=="string"?j:j.path;x.push(Nr(typeof j=="string"?j:j.data).then(se=>{c.mountExternalData(Oe,se)}))}await Promise.all(x)}_=c._OrtCreateSession(s,v,y),_===0&&Z("Can\'t create a session.");let[$,R]=mn(_),I=[],H=[],W=[];for(let x=0;x<$;x++){let j=c._OrtGetInputName(_,x);j===0&&Z("Can\'t get an input name."),F.push(j),I.push(c.UTF8ToString(j))}for(let x=0;x<R;x++){let j=c._OrtGetOutputName(_,x);j===0&&Z("Can\'t get an output name."),B.push(j);let Oe=c.UTF8ToString(j);H.push(Oe)}let T=null;return xt.set(_,[_,F,B,T]),[_,I,H]}catch($){throw F.forEach(R=>c._OrtFree(R)),B.forEach(R=>c._OrtFree(R)),u!==0&&c._OrtReleaseBinding(u),_!==0&&c._OrtReleaseSession(_),$}finally{c._free(s),y!==0&&c._OrtReleaseSessionOptions(y),C.forEach($=>c._free($)),c.unmountExternalData?.()}},Yr=f=>{let m=K(),s=xt.get(f);if(!s)throw new Error(`cannot release session. invalid session id: ${f}`);let[v,c,_,y]=s;y&&m._OrtReleaseBinding(y.handle),m.jsepUnregisterBuffers?.(f),c.forEach(u=>m._OrtFree(u)),_.forEach(u=>m._OrtFree(u)),m._OrtReleaseSession(v),xt.delete(f)},kr=(f,m,s,v,c)=>{if(!f){m.push(0);return}let _=K(),y=f[0],u=f[1],C=f[3],F,B;if(y==="string"&&C==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(C==="gpu-buffer"){let I=f[2].gpuBuffer,H=cr(lr(y));B=u.reduce((W,T)=>W*T,1)*H,F=_.jsepRegisterBuffer(v,c,I,B)}else{let I=f[2];if(Array.isArray(I)){B=4*I.length,F=_._malloc(B),s.push(F);let H=F/4;for(let W=0;W<I.length;W++){if(typeof I[W]!="string")throw new TypeError(`tensor data at index ${W} is not a string`);_.HEAPU32[H++]=ee(I[W],s)}}else B=I.byteLength,F=_._malloc(B),s.push(F),_.HEAPU8.set(new Uint8Array(I.buffer,I.byteOffset,B),F)}let $=_.stackSave(),R=_.stackAlloc(4*u.length);try{let I=R/4;u.forEach(W=>_.HEAP32[I++]=W);let H=_._OrtCreateTensor(lr(y),F,B,R,u.length,Wr(C));H===0&&Z(`Can\'t create tensor for input/output. session=${v}, index=${c}.`),m.push(H)}finally{_.stackRestore($)}},Gr=async(f,m,s,v,c,_)=>{let y=K(),u=xt.get(f);if(!u)throw new Error(`cannot run inference. invalid session id: ${f}`);let[C,F,B,$]=u,R=m.length,I=v.length,H=0,W=[],T=[],x=[],j=[],Oe=y.stackSave(),se=y.stackAlloc(R*4),z=y.stackAlloc(R*4),me=y.stackAlloc(I*4),Ae=y.stackAlloc(I*4);try{[H,W]=Fr(_);for(let L=0;L<R;L++)kr(s[L],T,j,f,m[L]);for(let L=0;L<I;L++)kr(c[L],x,j,f,R+v[L]);let E=se/4,k=z/4,Qe=me/4,ne=Ae/4;for(let L=0;L<R;L++)y.HEAPU32[E++]=T[L],y.HEAPU32[k++]=F[m[L]];for(let L=0;L<I;L++)y.HEAPU32[Qe++]=x[L],y.HEAPU32[ne++]=B[v[L]];let J;J=await y._OrtRun(C,z,se,R,Ae,I,me,H),J!==0&&Z("failed to call OrtRun().");let be=[];for(let L=0;L<I;L++){let ue=y.HEAPU32[me/4+L];if(ue===x[L]){be.push(c[L]);continue}let ge=y.stackSave(),ye=y.stackAlloc(4*4),ve=!1,te,ae=0;try{y._OrtGetTensorData(ue,ye,ye+4,ye+8,ye+12)!==0&&Z(`Can\'t access output tensor data on index ${L}.`);let xe=ye/4,Me=y.HEAPU32[xe++];ae=y.HEAPU32[xe++];let Ee=y.HEAPU32[xe++],Ze=y.HEAPU32[xe++],de=[];for(let oe=0;oe<Ze;oe++)de.push(y.HEAPU32[Ee/4+oe]);y._OrtFree(Ee);let Ce=de.reduce((oe,re)=>oe*re,1);te=Rr(Me);let Pe=$?.outputPreferredLocations[v[L]];if(te==="string"){if(Pe==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let oe=[],re=ae/4;for(let $e=0;$e<Ce;$e++){let Re=y.HEAPU32[re++],Le=$e===Ce-1?void 0:y.HEAPU32[re]-Re;oe.push(y.UTF8ToString(Re,Le))}be.push([te,de,oe,"cpu"])}else if(Pe==="gpu-buffer"&&Ce>0){let oe=y.jsepGetBuffer(ae),re=cr(Me);if(re===void 0||!Lr(te))throw new Error(`Unsupported data type: ${te}`);ve=!0,be.push([te,de,{gpuBuffer:oe,download:y.jsepCreateDownloader(oe,Ce*re,te),dispose:()=>{y._OrtReleaseTensor(ue)}},"gpu-buffer"])}else{let oe=Ir(te),re=new oe(Ce);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(y.HEAPU8.subarray(ae,ae+re.byteLength)),be.push([te,de,re,"cpu"])}}finally{y.stackRestore(ge),te==="string"&&ae&&y._free(ae),ve||y._OrtReleaseTensor(ue)}}return $&&y._OrtClearBoundOutputs($.handle),be}finally{y.stackRestore(Oe),T.forEach(E=>y._OrtReleaseTensor(E)),x.forEach(E=>y._OrtReleaseTensor(E)),j.forEach(E=>y._free(E)),H!==0&&y._OrtReleaseRunOptions(H),W.forEach(E=>y._free(E))}},zr=f=>{let m=K(),s=xt.get(f);if(!s)throw new Error("invalid session id");let v=s[0],c=m._OrtEndProfiling(v);c===0&&Z("Can\'t get an profile file name."),m._OrtFree(c)},Vr=f=>{let m=[];for(let s of f){let v=s[2];!Array.isArray(v)&&"buffer"in v&&m.push(v.buffer)}return m};self.onmessage=f=>{let{type:m,in:s}=f.data;try{switch(m){case"init-wasm":Ur(s.wasm).then(()=>{$r(s).then(()=>{postMessage({type:m})},v=>{postMessage({type:m,err:v})})},v=>{postMessage({type:m,err:v})});break;case"init-ep":{let{epName:v,env:c}=s;Hr(c,v).then(()=>{postMessage({type:m})},_=>{postMessage({type:m,err:_})});break}case"copy-from":{let{buffer:v}=s,c=dr(v);postMessage({type:m,out:c});break}case"create":{let{model:v,options:c}=s;jr(v,c).then(_=>{postMessage({type:m,out:_})},_=>{postMessage({type:m,err:_})});break}case"release":Yr(s),postMessage({type:m});break;case"run":{let{sessionId:v,inputIndices:c,inputs:_,outputIndices:y,options:u}=s;Gr(v,c,_,y,new Array(y.length).fill(null),u).then(C=>{C.some(F=>F[3]!=="cpu")?postMessage({type:m,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:m,out:C},Vr(C))},C=>{postMessage({type:m,err:C})});break}case"end-profiling":zr(s),postMessage({type:m});break;default:}}catch(v){postMessage({type:m,err:v})}};})();\n'});var Cr,wt,Xn,di,hi,Wa,za,sn,un,gg,pi,ud,ld,fd,cd,pd,dd,hd,Ha=$(()=>{"use strict";Dt();ad();an();Cr=()=>!!ee.wasm.proxy&&typeof document<"u",Xn=!1,di=!1,hi=!1,za=new Map,sn=(a,t)=>{let o=za.get(a);o?o.push(t):za.set(a,[t])},un=()=>{if(Xn||!di||hi||!wt)throw new Error("worker not ready")},gg=a=>{switch(a.data.type){case"init-wasm":Xn=!1,a.data.err?(hi=!0,Wa[1](a.data.err)):(di=!0,Wa[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=za.get(a.data.type);a.data.err?t.shift()[1](a.data.err):t.shift()[0](a.data.out);break}default:}},pi=typeof document<"u"?document?.currentScript?.src:void 0,ud=async()=>{if(!di){if(Xn)throw new Error("multiple calls to 'initWasm()' detected.");if(hi)throw new Error("previous call to 'initWasm()' failed.");if(Xn=!0,Cr())return ee.wasm.wasmPaths===void 0&&pi&&pi.indexOf("blob:")!==0&&(ee.wasm.wasmPaths=pi.substr(0,+pi.lastIndexOf("/")+1)),new Promise((a,t)=>{wt?.terminate();let o=URL.createObjectURL(new Blob([sd()],{type:"text/javascript"}));wt=new Worker(o,{name:"ort-wasm-proxy-worker"}),wt.onerror=r=>t(r),wt.onmessage=gg,URL.revokeObjectURL(o),Wa=[a,t];let e={type:"init-wasm",in:ee};wt.postMessage(e)});try{await Wp(ee.wasm),await Qp(ee),di=!0}catch(a){throw hi=!0,a}finally{Xn=!1}}},ld=async a=>{if(Cr())return un(),new Promise((t,o)=>{sn("init-ep",[t,o]);let e={type:"init-ep",in:{epName:a,env:ee}};wt.postMessage(e)});await ed(ee,a)},fd=async a=>Cr()?(un(),new Promise((t,o)=>{sn("copy-from",[t,o]);let e={type:"copy-from",in:{buffer:a}};wt.postMessage(e,[a.buffer])})):Va(a),cd=async(a,t)=>{if(Cr()){if(t?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return un(),new Promise((o,e)=>{sn("create",[o,e]);let r={type:"create",in:{model:a,options:t}},n=[];a instanceof Uint8Array&&n.push(a.buffer),wt.postMessage(r,n)})}else return td(a,t)},pd=async a=>{if(Cr())return un(),new Promise((t,o)=>{sn("release",[t,o]);let e={type:"release",in:a};wt.postMessage(e)});rd(a)},dd=async(a,t,o,e,r,n)=>{if(Cr()){if(o.some(s=>s[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(r.some(s=>s))throw new Error("pre-allocated output tensor is not supported for proxy.");return un(),new Promise((s,i)=>{sn("run",[s,i]);let u=o,l={type:"run",in:{sessionId:a,inputIndices:t,inputs:u,outputIndices:e,options:n}};wt.postMessage(l,id(u))})}else return nd(a,t,o,e,r,n)},hd=async a=>{if(Cr())return un(),new Promise((t,o)=>{sn("end-profiling",[t,o]);let e={type:"end-profiling",in:a};wt.postMessage(e)});od(a)}});var md,yg,mi,bd=$(()=>{"use strict";Dt();Ha();Ga();Ua();md=(a,t)=>{switch(a.location){case"cpu":return[a.type,a.dims,a.data,"cpu"];case"gpu-buffer":return[a.type,a.dims,{gpuBuffer:a.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${a.location} for ${t()}`)}},yg=a=>{switch(a[3]){case"cpu":return new Ue(a[0],a[2],a[1]);case"gpu-buffer":{let t=a[0];if(!ci(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:o,download:e,dispose:r}=a[2];return Ue.fromGpuBuffer(o,{dataType:t,dims:a[1],download:e,dispose:r})}default:throw new Error(`invalid data location: ${a[3]}`)}},mi=class{async fetchModelAndCopyToWasmMemory(t){return fd(await qn(t))}async loadModel(t,o){Tr();let e;typeof t=="string"?typeof process<"u"&&process.versions&&process.versions.node?e=await qn(t):e=await this.fetchModelAndCopyToWasmMemory(t):e=t,[this.sessionId,this.inputNames,this.outputNames]=await cd(e,o),xr()}async dispose(){return pd(this.sessionId)}async run(t,o,e){Tr();let r=[],n=[];Object.entries(t).forEach(m=>{let v=m[0],I=m[1],_=this.inputNames.indexOf(v);if(_===-1)throw new Error(`invalid input '${v}'`);r.push(I),n.push(_)});let s=[],i=[];Object.entries(o).forEach(m=>{let v=m[0],I=m[1],_=this.outputNames.indexOf(v);if(_===-1)throw new Error(`invalid output '${v}'`);s.push(I),i.push(_)});let u=r.map((m,v)=>md(m,()=>`input "${this.inputNames[n[v]]}"`)),l=s.map((m,v)=>m?md(m,()=>`output "${this.outputNames[i[v]]}"`):null),f=await dd(this.sessionId,n,u,i,l,e),h={};for(let m=0;m<f.length;m++)h[this.outputNames[i[m]]]=s[m]??yg(f[m]);return xr(),h}startProfiling(){}endProfiling(){hd(this.sessionId)}}});var Tg,bi,gd=$(()=>{"use strict";Dt();Ha();bd();Tg=()=>{if((typeof ee.wasm.initTimeout!="number"||ee.wasm.initTimeout<0)&&(ee.wasm.initTimeout=0),typeof ee.wasm.simd!="boolean"&&(ee.wasm.simd=!0),typeof ee.wasm.proxy!="boolean"&&(ee.wasm.proxy=!1),typeof ee.wasm.trace!="boolean"&&(ee.wasm.trace=!1),typeof ee.wasm.numThreads!="number"||!Number.isInteger(ee.wasm.numThreads)||ee.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(ee.wasm.numThreads=1);let a=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;ee.wasm.numThreads=Math.min(4,Math.ceil((a||1)/2))}},bi=class{async init(t){Tg(),await ud(),await ld(t)}async createInferenceSessionHandler(t,o){let e=new mi;return await e.loadModel(t,o),Promise.resolve(e)}}});var yd={};Hr(yd,{wasmBackend:()=>xg});var xg,Td=$(()=>{"use strict";gd();xg=new bi});Dt();Dt();Dt();var _s="1.18.0";var zO=Oi;{let a=(Pp(),mr(Ap)).onnxjsBackend;gr("webgl",a,-10)}{let a=(Td(),mr(yd)).wasmBackend;gr("cpu",a,10),gr("wasm",a,10),gr("webnn",a,9)}Object.defineProperty(ee.versions,"web",{value:_s,enumerable:!0});export{Sd as InferenceSession,bs as TRACE,Tr as TRACE_FUNC_BEGIN,xr as TRACE_FUNC_END,Ue as Tensor,Pd as TrainingSession,zO as default,ee as env,gr as registerBackend};
/*! Bundled license information:

long/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
//# sourceMappingURL=ort.min.js.map

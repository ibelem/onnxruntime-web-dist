/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var er=Object.defineProperty;var Gt=Object.getOwnPropertyDescriptor;var Yt=Object.getOwnPropertyNames;var Vt=Object.prototype.hasOwnProperty;var oe=(a,u)=>()=>(a&&(u=a(a=0)),u);var qt=(a,u)=>()=>(u||a((u={exports:{}}).exports,u),u.exports),Xt=(a,u)=>{for(var n in u)er(a,n,{get:u[n],enumerable:!0})},Qe=(a,u,n,c)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of Yt(u))!Vt.call(a,d)&&d!==n&&er(a,d,{get:()=>u[d],enumerable:!(c=Gt(u,d))||c.enumerable});return a},ge=(a,u,n)=>(Qe(a,u,"default"),n&&Qe(n,u,"default"));var zr=a=>Qe(er({},"__esModule",{value:!0}),a);var Nr=qt((jr,rr)=>{"use strict";var $r=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),function(u={}){var n=u,c,d;n.ready=new Promise((e,r)=>{c=e,d=r});var y=Object.assign({},n),l="./this.program",O=typeof window=="object",T=typeof importScripts=="function",A=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",E="",U,h,w;if(A){var M=require("fs"),_=require("path");E=T?_.dirname(E)+"/":__dirname+"/",U=(e,r)=>(e=e.startsWith("file://")?new URL(e):_.normalize(e),M.readFileSync(e,r?void 0:"utf8")),w=e=>(e=U(e,!0),e.buffer||(e=new Uint8Array(e)),e),h=(e,r,t,o=!0)=>{e=e.startsWith("file://")?new URL(e):_.normalize(e),M.readFile(e,o?void 0:"utf8",(i,f)=>{i?t(i):r(o?f.buffer:f)})},!n.thisProgram&&1<process.argv.length&&(l=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.inspect=()=>"[Emscripten Module object]"}else(O||T)&&(T?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),a&&(E=a),E.indexOf("blob:")!==0?E=E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1):E="",U=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},T&&(w=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),h=(e,r,t)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{o.status==200||o.status==0&&o.response?r(o.response):t()},o.onerror=t,o.send(null)});var D=n.print||console.log.bind(console),R=n.printErr||console.error.bind(console);Object.assign(n,y),y=null,n.thisProgram&&(l=n.thisProgram);var Z;n.wasmBinary&&(Z=n.wasmBinary);var dr=n.noExitRuntime||!0;typeof WebAssembly!="object"&&Te("no native wasm support detected");var le,S,he=!1,ee,I,ae,we,g,x,ie,P,se,Ee;function Q(){var e=le.buffer;n.HEAP8=ee=new Int8Array(e),n.HEAP16=ae=new Int16Array(e),n.HEAP32=g=new Int32Array(e),n.HEAPU8=I=new Uint8Array(e),n.HEAPU16=we=new Uint16Array(e),n.HEAPU32=x=new Uint32Array(e),n.HEAPF32=ie=new Float32Array(e),n.HEAPF64=Ee=new Float64Array(e),n.HEAP64=P=new BigInt64Array(e),n.HEAPU64=se=new BigUint64Array(e)}var de=[],H=[],G=[];function pr(){var e=n.preRun.shift();de.unshift(e)}var Y=0,ve=null,ue=null;function Te(e){throw n.onAbort&&n.onAbort(e),e="Aborted("+e+")",R(e),he=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),d(e),e}function fe(e){return e.startsWith("data:application/octet-stream;base64,")}var V;if(V="ort-wasm.wasm",!fe(V)){var Ae=V;V=n.locateFile?n.locateFile(Ae,E):E+Ae}function z(e){if(e==V&&Z)return new Uint8Array(Z);if(w)return w(e);throw"both async and sync fetching of the wasm failed"}function $(e){if(!Z&&(O||T)){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+e+"'";return r.arrayBuffer()}).catch(()=>z(e));if(h)return new Promise((r,t)=>{h(e,o=>r(new Uint8Array(o)),t)})}return Promise.resolve().then(()=>z(e))}function Se(e,r,t){return $(e).then(o=>WebAssembly.instantiate(o,r)).then(o=>o).then(t,o=>{R("failed to asynchronously prepare wasm: "+o),Te(o)})}function Me(e,r){var t=V;return Z||typeof WebAssembly.instantiateStreaming!="function"||fe(t)||t.startsWith("file://")||A||typeof fetch!="function"?Se(t,e,r):fetch(t,{credentials:"same-origin"}).then(o=>WebAssembly.instantiateStreaming(o,e).then(r,function(i){return R("wasm streaming compile failed: "+i),R("falling back to ArrayBuffer instantiation"),Se(t,e,r)}))}var _e=e=>{for(;0<e.length;)e.shift()(n)};function At(e){this.Va=e-24,this.fb=function(r){x[this.Va+4>>2]=r},this.eb=function(r){x[this.Va+8>>2]=r},this.Za=function(r,t){this.$a(),this.fb(r),this.eb(t)},this.$a=function(){x[this.Va+16>>2]=0}}var mr=0,_t=0,gr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Pe=(e,r,t)=>{var o=r+t;for(t=r;e[t]&&!(t>=o);)++t;if(16<t-r&&e.buffer&&gr)return gr.decode(e.subarray(r,t));for(o="";r<t;){var i=e[r++];if(i&128){var f=e[r++]&63;if((i&224)==192)o+=String.fromCharCode((i&31)<<6|f);else{var m=e[r++]&63;i=(i&240)==224?(i&15)<<12|f<<6|m:(i&7)<<18|f<<12|m<<6|e[r++]&63,65536>i?o+=String.fromCharCode(i):(i-=65536,o+=String.fromCharCode(55296|i>>10,56320|i&1023))}}else o+=String.fromCharCode(i)}return o},De=e=>{for(var r=0,t=0;t<e.length;++t){var o=e.charCodeAt(t);127>=o?r++:2047>=o?r+=2:55296<=o&&57343>=o?(r+=4,++t):r+=3}return r},We=(e,r,t,o)=>{if(!(0<o))return 0;var i=t;o=t+o-1;for(var f=0;f<e.length;++f){var m=e.charCodeAt(f);if(55296<=m&&57343>=m){var p=e.charCodeAt(++f);m=65536+((m&1023)<<10)|p&1023}if(127>=m){if(t>=o)break;r[t++]=m}else{if(2047>=m){if(t+1>=o)break;r[t++]=192|m>>6}else{if(65535>=m){if(t+2>=o)break;r[t++]=224|m>>12}else{if(t+3>=o)break;r[t++]=240|m>>18,r[t++]=128|m>>12&63}r[t++]=128|m>>6&63}r[t++]=128|m&63}}return r[t]=0,t-i};function yr(e){if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e}var hr=void 0;function K(e){for(var r="";I[e];)r+=hr[I[e++]];return r}var Ve={},qe={},Pt={},wr=void 0;function pe(e){throw new wr(e)}function Ct(e,r,t={}){var o=r.name;if(e||pe(`type "${o}" must have a positive integer typeid pointer`),qe.hasOwnProperty(e)){if(t.gb)return;pe(`Cannot register type '${o}' twice`)}qe[e]=r,delete Pt[e],Ve.hasOwnProperty(e)&&(r=Ve[e],delete Ve[e],r.forEach(i=>i()))}function re(e,r,t={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");Ct(e,r,t)}function vr(e,r,t){switch(r){case 0:return t?function(o){return ee[o]}:function(o){return I[o]};case 1:return t?function(o){return ae[o>>1]}:function(o){return we[o>>1]};case 2:return t?function(o){return g[o>>2]}:function(o){return x[o>>2]};case 3:return t?function(o){return P[o>>3]}:function(o){return se[o>>3]};default:throw new TypeError("Unknown integer type: "+e)}}function Be(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function Sr(){this.Sa=[void 0],this.bb=[]}var q=new Sr;function Xe(e){e>=q.Va&&--q.get(e).cb===0&&q.$a(e)}var j=e=>(e||pe("Cannot use deleted val. handle = "+e),q.get(e).value),X=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return q.Za({cb:1,value:e})}};function Je(e){return this.fromWireType(g[e>>2])}function It(e,r){switch(r){case 2:return function(t){return this.fromWireType(ie[t>>2])};case 3:return function(t){return this.fromWireType(Ee[t>>3])};default:throw new TypeError("Unknown float type: "+e)}}var br=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,xt=(e,r)=>{for(var t=e>>1,o=t+r/2;!(t>=o)&&we[t];)++t;if(t<<=1,32<t-e&&br)return br.decode(I.subarray(e,t));for(t="",o=0;!(o>=r/2);++o){var i=ae[e+2*o>>1];if(i==0)break;t+=String.fromCharCode(i)}return t},Ut=(e,r,t)=>{if(t===void 0&&(t=2147483647),2>t)return 0;t-=2;var o=r;t=t<2*e.length?t/2:e.length;for(var i=0;i<t;++i)ae[r>>1]=e.charCodeAt(i),r+=2;return ae[r>>1]=0,r-o},Mt=e=>2*e.length,Dt=(e,r)=>{for(var t=0,o="";!(t>=r/4);){var i=g[e+4*t>>2];if(i==0)break;++t,65536<=i?(i-=65536,o+=String.fromCharCode(55296|i>>10,56320|i&1023)):o+=String.fromCharCode(i)}return o},Wt=(e,r,t)=>{if(t===void 0&&(t=2147483647),4>t)return 0;var o=r;t=o+t-4;for(var i=0;i<e.length;++i){var f=e.charCodeAt(i);if(55296<=f&&57343>=f){var m=e.charCodeAt(++i);f=65536+((f&1023)<<10)|m&1023}if(g[r>>2]=f,r+=4,r+4>t)break}return g[r>>2]=0,r-o},Bt=e=>{for(var r=0,t=0;t<e.length;++t){var o=e.charCodeAt(t);55296<=o&&57343>=o&&++t,r+=4}return r};function Le(e,r){var t=qe[e];if(t===void 0){e=Wr(e);var o=K(e);te(e),pe(r+" has unknown type "+o)}return t}var Lt={};function ke(e){var r=Lt[e];return r===void 0?K(e):r}var Fe=[];function Or(){return typeof globalThis=="object"?globalThis:Function("return this")()}function kt(e){var r=Fe.length;return Fe.push(e),r}function Ft(e,r){for(var t=Array(e),o=0;o<e;++o)t[o]=Le(x[r+4*o>>2],"parameter "+o);return t}function Er(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return 48<=r&&57>=r?`_${e}`:e}var Tr=[];function Rt(e,r){return e=Er(e),{[e]:function(){return r.apply(this,arguments)}}[e]}function zt(e){var r=Function;if(!(r instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof r} which is not a function`);var t=Rt(r.name||"unknownFunctionName",function(){});return t.prototype=r.prototype,t=new t,e=r.apply(t,e),e instanceof Object?e:t}function Ht(e){for(var r="",t=0;t<e;++t)r+=(t!==0?", ":"")+"arg"+t;var o="return function emval_allocator_"+e+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`;for(t=0;t<e;++t)o+="var argType"+t+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+t+`');
var arg`+t+" = argType"+t+`.readValueFromPointer(args);
args += argType`+t+`['argPackAdvance'];
argTypes += 4;
`;return new Function("requireRegisteredType","Module","valueToHandle","getMemory",o+("var obj = new constructor("+r+`);
return valueToHandle(obj);
}
`))(Le,n,X,()=>x)}var Ar={};function Ce(e){return-9007199254740992>e||9007199254740992<e?NaN:Number(e)}var be=e=>e%4===0&&(e%100!==0||e%400===0),_r=[0,31,60,91,121,152,182,213,244,274,305,335],Pr=[0,31,59,90,120,151,181,212,243,273,304,334],Cr=e=>{var r=De(e)+1,t=ze(r);return t&&We(e,I,t,r),t},Ze={},Ir=()=>{if(!Ke){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"},r;for(r in Ze)Ze[r]===void 0?delete e[r]:e[r]=Ze[r];var t=[];for(r in e)t.push(`${r}=${e[r]}`);Ke=t}return Ke},Ke,$t=[null,[],[]],xr=[31,29,31,30,31,30,31,31,30,31,30,31],Ur=[31,28,31,30,31,30,31,31,30,31,30,31];function jt(e){var r=Array(De(e)+1);return We(e,r,0,r.length),r}for(var Mr=(e,r,t,o)=>{function i(s,C,B){for(s=typeof s=="number"?s.toString():s||"";s.length<C;)s=B[0]+s;return s}function f(s,C){return i(s,C,"0")}function m(s,C){function B(Rr){return 0>Rr?-1:0<Rr?1:0}var me;return(me=B(s.getFullYear()-C.getFullYear()))===0&&(me=B(s.getMonth()-C.getMonth()))===0&&(me=B(s.getDate()-C.getDate())),me}function p(s){switch(s.getDay()){case 0:return new Date(s.getFullYear()-1,11,29);case 1:return s;case 2:return new Date(s.getFullYear(),0,3);case 3:return new Date(s.getFullYear(),0,2);case 4:return new Date(s.getFullYear(),0,1);case 5:return new Date(s.getFullYear()-1,11,31);case 6:return new Date(s.getFullYear()-1,11,30)}}function v(s){var C=s.Ta;for(s=new Date(new Date(s.Ua+1900,0,1).getTime());0<C;){var B=s.getMonth(),me=(be(s.getFullYear())?xr:Ur)[B];if(C>me-s.getDate())C-=me-s.getDate()+1,s.setDate(1),11>B?s.setMonth(B+1):(s.setMonth(0),s.setFullYear(s.getFullYear()+1));else{s.setDate(s.getDate()+C);break}}return B=new Date(s.getFullYear()+1,0,4),C=p(new Date(s.getFullYear(),0,4)),B=p(B),0>=m(C,s)?0>=m(B,s)?s.getFullYear()+1:s.getFullYear():s.getFullYear()-1}var b=g[o+40>>2];o={kb:g[o>>2],jb:g[o+4>>2],Xa:g[o+8>>2],ab:g[o+12>>2],Ya:g[o+16>>2],Ua:g[o+20>>2],Oa:g[o+24>>2],Ta:g[o+28>>2],mb:g[o+32>>2],ib:g[o+36>>2],lb:b&&b?Pe(I,b):""},t=t?Pe(I,t):"",b={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var W in b)t=t.replace(new RegExp(W,"g"),b[W]);var N="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ne="January February March April May June July August September October November December".split(" ");b={"%a":s=>N[s.Oa].substring(0,3),"%A":s=>N[s.Oa],"%b":s=>ne[s.Ya].substring(0,3),"%B":s=>ne[s.Ya],"%C":s=>f((s.Ua+1900)/100|0,2),"%d":s=>f(s.ab,2),"%e":s=>i(s.ab,2," "),"%g":s=>v(s).toString().substring(2),"%G":s=>v(s),"%H":s=>f(s.Xa,2),"%I":s=>(s=s.Xa,s==0?s=12:12<s&&(s-=12),f(s,2)),"%j":s=>{for(var C=0,B=0;B<=s.Ya-1;C+=(be(s.Ua+1900)?xr:Ur)[B++]);return f(s.ab+C,3)},"%m":s=>f(s.Ya+1,2),"%M":s=>f(s.jb,2),"%n":()=>`
`,"%p":s=>0<=s.Xa&&12>s.Xa?"AM":"PM","%S":s=>f(s.kb,2),"%t":()=>"	","%u":s=>s.Oa||7,"%U":s=>f(Math.floor((s.Ta+7-s.Oa)/7),2),"%V":s=>{var C=Math.floor((s.Ta+7-(s.Oa+6)%7)/7);if(2>=(s.Oa+371-s.Ta-2)%7&&C++,C)C==53&&(B=(s.Oa+371-s.Ta)%7,B==4||B==3&&be(s.Ua)||(C=1));else{C=52;var B=(s.Oa+7-s.Ta-1)%7;(B==4||B==5&&be(s.Ua%400-1))&&C++}return f(C,2)},"%w":s=>s.Oa,"%W":s=>f(Math.floor((s.Ta+7-(s.Oa+6)%7)/7),2),"%y":s=>(s.Ua+1900).toString().substring(2),"%Y":s=>s.Ua+1900,"%z":s=>{s=s.ib;var C=0<=s;return s=Math.abs(s)/60,(C?"+":"-")+("0000"+(s/60*100+s%60)).slice(-4)},"%Z":s=>s.lb,"%%":()=>"%"},t=t.replace(/%%/g,"\0\0");for(W in b)t.includes(W)&&(t=t.replace(new RegExp(W,"g"),b[W](o)));return t=t.replace(/\0\0/g,"%"),W=jt(t),W.length>r?0:(ee.set(W,e),W.length-1)},Dr=Array(256),Re=0;256>Re;++Re)Dr[Re]=String.fromCharCode(Re);hr=Dr,wr=n.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},n.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(Sr.prototype,{get(e){return this.Sa[e]},has(e){return this.Sa[e]!==void 0},Za(e){var r=this.bb.pop()||this.Sa.length;return this.Sa[r]=e,r},$a(e){this.Sa[e]=void 0,this.bb.push(e)}}),q.Sa.push({value:void 0},{value:null},{value:!0},{value:!1}),q.Va=q.Sa.length,n.count_emval_handles=function(){for(var e=0,r=q.Va;r<q.Sa.length;++r)q.Sa[r]!==void 0&&++e;return e};var Nt={a:function(e,r,t){throw new At(e).Za(r,t),mr=e,_t++,mr},v:function(){return 0},ba:()=>{},N:()=>{},P:()=>{},H:function(){return 0},$:()=>{},V:()=>{},_:()=>{},A:function(){},O:()=>{},L:()=>{},aa:()=>{},M:()=>{},D:function(e,r,t,o,i){r=K(r),t=Be(t);var f=r.indexOf("u")!=-1;f&&(i=(1n<<64n)-1n),re(e,{name:r,fromWireType:function(m){return m},toWireType:function(m,p){if(typeof p!="bigint"&&typeof p!="number")throw new TypeError(`Cannot convert "${yr(p)}" to ${this.name}`);if(p<o||p>i)throw new TypeError(`Passing a number "${yr(p)}" from JS side to C/C++ side to an argument of type "${r}", which is outside the valid range [${o}, ${i}]!`);return p},argPackAdvance:8,readValueFromPointer:vr(r,t,!f),Wa:null})},ea:function(e,r,t,o,i){var f=Be(t);r=K(r),re(e,{name:r,fromWireType:function(m){return!!m},toWireType:function(m,p){return p?o:i},argPackAdvance:8,readValueFromPointer:function(m){if(t===1)var p=ee;else if(t===2)p=ae;else if(t===4)p=g;else throw new TypeError("Unknown boolean type size: "+r);return this.fromWireType(p[m>>f])},Wa:null})},da:function(e,r){r=K(r),re(e,{name:r,fromWireType:function(t){var o=j(t);return Xe(t),o},toWireType:function(t,o){return X(o)},argPackAdvance:8,readValueFromPointer:Je,Wa:null})},C:function(e,r,t){t=Be(t),r=K(r),re(e,{name:r,fromWireType:function(o){return o},toWireType:function(o,i){return i},argPackAdvance:8,readValueFromPointer:It(r,t),Wa:null})},p:function(e,r,t,o,i){r=K(r),i===-1&&(i=4294967295),i=Be(t);var f=p=>p;if(o===0){var m=32-8*t;f=p=>p<<m>>>m}t=r.includes("unsigned")?function(p,v){return v>>>0}:function(p,v){return v},re(e,{name:r,fromWireType:f,toWireType:t,argPackAdvance:8,readValueFromPointer:vr(r,i,o!==0),Wa:null})},l:function(e,r,t){function o(f){f>>=2;var m=x;return new i(m.buffer,m[f+1],m[f])}var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][r];t=K(t),re(e,{name:t,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{gb:!0})},E:function(e,r){r=K(r);var t=r==="std::string";re(e,{name:r,fromWireType:function(o){var i=x[o>>2],f=o+4;if(t)for(var m=f,p=0;p<=i;++p){var v=f+p;if(p==i||I[v]==0){if(m=m?Pe(I,m,v-m):"",b===void 0)var b=m;else b+=String.fromCharCode(0),b+=m;m=v+1}}else{for(b=Array(i),p=0;p<i;++p)b[p]=String.fromCharCode(I[f+p]);b=b.join("")}return te(o),b},toWireType:function(o,i){i instanceof ArrayBuffer&&(i=new Uint8Array(i));var f=typeof i=="string";f||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array||pe("Cannot pass non-string to std::string");var m=t&&f?De(i):i.length,p=ze(4+m+1),v=p+4;if(x[p>>2]=m,t&&f)We(i,I,v,m+1);else if(f)for(f=0;f<m;++f){var b=i.charCodeAt(f);255<b&&(te(v),pe("String has UTF-16 code units that do not fit in 8 bits")),I[v+f]=b}else for(f=0;f<m;++f)I[v+f]=i[f];return o!==null&&o.push(te,p),p},argPackAdvance:8,readValueFromPointer:Je,Wa:function(o){te(o)}})},x:function(e,r,t){if(t=K(t),r===2)var o=xt,i=Ut,f=Mt,m=()=>we,p=1;else r===4&&(o=Dt,i=Wt,f=Bt,m=()=>x,p=2);re(e,{name:t,fromWireType:function(v){for(var b=x[v>>2],W=m(),N,ne=v+4,s=0;s<=b;++s){var C=v+4+s*r;(s==b||W[C>>p]==0)&&(ne=o(ne,C-ne),N===void 0?N=ne:(N+=String.fromCharCode(0),N+=ne),ne=C+r)}return te(v),N},toWireType:function(v,b){typeof b!="string"&&pe(`Cannot pass non-string to C++ string type ${t}`);var W=f(b),N=ze(4+W+r);return x[N>>2]=W>>p,i(b,N+4,W+r),v!==null&&v.push(te,N),N},argPackAdvance:8,readValueFromPointer:Je,Wa:function(v){te(v)}})},fa:function(e,r){r=K(r),re(e,{hb:!0,name:r,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},ca:()=>!0,o:function(e,r,t){e=j(e),r=Le(r,"emval::as");var o=[],i=X(o);return x[t>>2]=i,r.toWireType(o,e)},h:function(e,r,t,o,i){e=Fe[e],r=j(r),t=ke(t);var f=[];return x[o>>2]=X(f),e(r,t,f,i)},r:function(e,r,t,o){e=Fe[e],r=j(r),t=ke(t),e(r,t,null,o)},b:Xe,F:function(e,r){return e=j(e),r=j(r),e==r},u:function(e){return e===0?X(Or()):(e=ke(e),X(Or()[e]))},g:function(e,r){var t=Ft(e,r),o=t[0];r=o.name+"_$"+t.slice(1).map(function(W){return W.name}).join("_")+"$";var i=Tr[r];if(i!==void 0)return i;i=["retType"];for(var f=[o],m="",p=0;p<e-1;++p)m+=(p!==0?", ":"")+"arg"+p,i.push("argType"+p),f.push(t[1+p]);var v="return function "+Er("methodCaller_"+r)+`(handle, name, destructors, args) {
`,b=0;for(p=0;p<e-1;++p)v+="    var arg"+p+" = argType"+p+".readValueFromPointer(args"+(b?"+"+b:"")+`);
`,b+=t[p+1].argPackAdvance;for(v+="    var rv = handle[name]("+m+`);
`,p=0;p<e-1;++p)t[p+1].deleteObject&&(v+="    argType"+p+".deleteObject(arg"+p+`);
`);return o.hb||(v+=`    return retType.toWireType(destructors, rv);
`),i.push(v+`};
`),e=zt(i).apply(null,f),i=kt(e),Tr[r]=i},q:function(e,r){return e=j(e),r=j(r),X(e[r])},c:function(e){4<e&&(q.get(e).cb+=1)},G:function(e,r,t,o){e=j(e);var i=Ar[r];return i||(i=Ht(r),Ar[r]=i),i(e,t,o)},s:function(){return X([])},k:function(e){e=j(e);for(var r=Array(e.length),t=0;t<e.length;t++)r[t]=e[t];return X(r)},d:function(e){return X(ke(e))},j:function(){return X({})},f:function(e){for(var r=j(e);r.length;){var t=r.pop();r.pop()(t)}Xe(e)},i:function(e,r,t){e=j(e),r=j(r),t=j(t),e[r]=t},e:function(e,r){return e=Le(e,"_emval_take_value"),e=e.readValueFromPointer(r),X(e)},S:function(e,r){e=Ce(e),r=Ce(r),e=new Date(1e3*e),g[r>>2]=e.getUTCSeconds(),g[r+4>>2]=e.getUTCMinutes(),g[r+8>>2]=e.getUTCHours(),g[r+12>>2]=e.getUTCDate(),g[r+16>>2]=e.getUTCMonth(),g[r+20>>2]=e.getUTCFullYear()-1900,g[r+24>>2]=e.getUTCDay(),g[r+28>>2]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},T:function(e,r){e=Ce(e),r=Ce(r),e=new Date(1e3*e),g[r>>2]=e.getSeconds(),g[r+4>>2]=e.getMinutes(),g[r+8>>2]=e.getHours(),g[r+12>>2]=e.getDate(),g[r+16>>2]=e.getMonth(),g[r+20>>2]=e.getFullYear()-1900,g[r+24>>2]=e.getDay(),g[r+28>>2]=(be(e.getFullYear())?_r:Pr)[e.getMonth()]+e.getDate()-1|0,g[r+36>>2]=-(60*e.getTimezoneOffset());var t=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=new Date(e.getFullYear(),0,1).getTimezoneOffset();g[r+32>>2]=(t!=o&&e.getTimezoneOffset()==Math.min(o,t))|0},U:function(e){e=Ce(e);var r=new Date(g[e+20>>2]+1900,g[e+16>>2],g[e+12>>2],g[e+8>>2],g[e+4>>2],g[e>>2],0),t=g[e+32>>2],o=r.getTimezoneOffset(),i=new Date(r.getFullYear(),6,1).getTimezoneOffset(),f=new Date(r.getFullYear(),0,1).getTimezoneOffset(),m=Math.min(f,i);return 0>t?g[e+32>>2]=+(i!=f&&m==o):0<t!=(m==o)&&(i=Math.max(f,i),r.setTime(r.getTime()+6e4*((0<t?m:i)-o))),g[e+24>>2]=r.getDay(),g[e+28>>2]=(be(r.getFullYear())?_r:Pr)[r.getMonth()]+r.getDate()-1|0,g[e>>2]=r.getSeconds(),g[e+4>>2]=r.getMinutes(),g[e+8>>2]=r.getHours(),g[e+12>>2]=r.getDate(),g[e+16>>2]=r.getMonth(),g[e+20>>2]=r.getYear(),BigInt(r.getTime()/1e3)},Q:function(){return-52},R:function(){},J:(e,r,t)=>{function o(v){return(v=v.toTimeString().match(/\(([A-Za-z ]+)\)$/))?v[1]:"GMT"}var i=new Date().getFullYear(),f=new Date(i,0,1),m=new Date(i,6,1);i=f.getTimezoneOffset();var p=m.getTimezoneOffset();x[e>>2]=60*Math.max(i,p),g[r>>2]=+(i!=p),e=o(f),r=o(m),e=Cr(e),r=Cr(r),p<i?(x[t>>2]=e,x[t+4>>2]=r):(x[t>>2]=r,x[t+4>>2]=e)},t:()=>{Te("")},B:function(){return Date.now()},K:()=>2147483648,n:()=>performance.now(),Z:(e,r,t)=>I.copyWithin(e,r,r+t),I:e=>{var r=I.length;if(e>>>=0,2147483648<e)return!1;for(var t=1;4>=t;t*=2){var o=r*(1+.2/t);o=Math.min(o,e+100663296);var i=Math;o=Math.max(e,o);e:{i=i.min.call(i,2147483648,o+(65536-o%65536)%65536)-le.buffer.byteLength+65535>>>16;try{le.grow(i),Q();var f=1;break e}catch{}f=void 0}if(f)return!0}return!1},X:(e,r)=>{var t=0;return Ir().forEach(function(o,i){var f=r+t;for(i=x[e+4*i>>2]=f,f=0;f<o.length;++f)ee[i++>>0]=o.charCodeAt(f);ee[i>>0]=0,t+=o.length+1}),0},Y:(e,r)=>{var t=Ir();x[e>>2]=t.length;var o=0;return t.forEach(function(i){o+=i.length+1}),x[r>>2]=o,0},w:()=>52,z:()=>52,W:function(){return 70},y:(e,r,t,o)=>{for(var i=0,f=0;f<t;f++){var m=x[r>>2],p=x[r+4>>2];r+=8;for(var v=0;v<p;v++){var b=I[m+v],W=$t[e];b===0||b===10?((e===1?D:R)(Pe(W,0)),W.length=0):W.push(b)}i+=p}return x[o>>2]=i,0},ga:Mr,m:(e,r,t,o)=>Mr(e,r,t,o)};(function(){function e(t){if(S=t=t.exports,le=S.ha,Q(),H.unshift(S.ia),Y--,n.monitorRunDependencies&&n.monitorRunDependencies(Y),Y==0&&(ve!==null&&(clearInterval(ve),ve=null),ue)){var o=ue;ue=null,o()}return t}var r={a:Nt};if(Y++,n.monitorRunDependencies&&n.monitorRunDependencies(Y),n.instantiateWasm)try{return n.instantiateWasm(r,e)}catch(t){R("Module.instantiateWasm callback failed with error: "+t),d(t)}return Me(r,function(t){e(t.instance)}).catch(d),{}})(),n._OrtInit=(e,r)=>(n._OrtInit=S.ja)(e,r),n._OrtGetLastError=(e,r)=>(n._OrtGetLastError=S.ka)(e,r),n._OrtCreateSessionOptions=(e,r,t,o,i,f,m,p,v,b)=>(n._OrtCreateSessionOptions=S.la)(e,r,t,o,i,f,m,p,v,b),n._OrtAppendExecutionProvider=(e,r)=>(n._OrtAppendExecutionProvider=S.ma)(e,r),n._OrtAddFreeDimensionOverride=(e,r,t)=>(n._OrtAddFreeDimensionOverride=S.na)(e,r,t),n._OrtAddSessionConfigEntry=(e,r,t)=>(n._OrtAddSessionConfigEntry=S.oa)(e,r,t),n._OrtReleaseSessionOptions=e=>(n._OrtReleaseSessionOptions=S.pa)(e),n._OrtCreateSession=(e,r,t)=>(n._OrtCreateSession=S.qa)(e,r,t),n._OrtReleaseSession=e=>(n._OrtReleaseSession=S.ra)(e),n._OrtGetInputOutputCount=(e,r,t)=>(n._OrtGetInputOutputCount=S.sa)(e,r,t),n._OrtGetInputName=(e,r)=>(n._OrtGetInputName=S.ta)(e,r),n._OrtGetOutputName=(e,r)=>(n._OrtGetOutputName=S.ua)(e,r),n._OrtFree=e=>(n._OrtFree=S.va)(e),n._OrtCreateTensor=(e,r,t,o,i,f)=>(n._OrtCreateTensor=S.wa)(e,r,t,o,i,f),n._OrtGetTensorData=(e,r,t,o,i)=>(n._OrtGetTensorData=S.xa)(e,r,t,o,i),n._OrtReleaseTensor=e=>(n._OrtReleaseTensor=S.ya)(e),n._OrtCreateRunOptions=(e,r,t,o)=>(n._OrtCreateRunOptions=S.za)(e,r,t,o),n._OrtAddRunConfigEntry=(e,r,t)=>(n._OrtAddRunConfigEntry=S.Aa)(e,r,t),n._OrtReleaseRunOptions=e=>(n._OrtReleaseRunOptions=S.Ba)(e),n._OrtCreateBinding=e=>(n._OrtCreateBinding=S.Ca)(e),n._OrtBindInput=(e,r,t)=>(n._OrtBindInput=S.Da)(e,r,t),n._OrtBindOutput=(e,r,t,o)=>(n._OrtBindOutput=S.Ea)(e,r,t,o),n._OrtClearBoundOutputs=e=>(n._OrtClearBoundOutputs=S.Fa)(e),n._OrtReleaseBinding=e=>(n._OrtReleaseBinding=S.Ga)(e),n._OrtRunWithBinding=(e,r,t,o,i)=>(n._OrtRunWithBinding=S.Ha)(e,r,t,o,i),n._OrtRun=(e,r,t,o,i,f,m,p)=>(n._OrtRun=S.Ia)(e,r,t,o,i,f,m,p),n._OrtEndProfiling=e=>(n._OrtEndProfiling=S.Ja)(e);var ze=n._malloc=e=>(ze=n._malloc=S.Ka)(e),te=n._free=e=>(te=n._free=S.La)(e),Wr=e=>(Wr=S.Ma)(e);n.__embind_initialize_bindings=()=>(n.__embind_initialize_bindings=S.Na)();var Br=()=>(Br=S.Pa)(),Lr=e=>(Lr=S.Qa)(e),kr=e=>(kr=S.Ra)(e);n.stackAlloc=kr,n.stackSave=Br,n.stackRestore=Lr,n.UTF8ToString=(e,r)=>e?Pe(I,e,r):"",n.stringToUTF8=(e,r,t)=>We(e,I,r,t),n.lengthBytesUTF8=De;var He;ue=function e(){He||Fr(),He||(ue=e)};function Fr(){function e(){if(!He&&(He=!0,n.calledRun=!0,!he)){if(_e(H),c(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;){var r=n.postRun.shift();G.unshift(r)}_e(G)}}if(!(0<Y)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)pr();_e(de),0<Y||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),e()},1)):e())}}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();return Fr(),u.ready}})();typeof jr=="object"&&typeof rr=="object"?rr.exports=$r:typeof define=="function"&&define.amd&&define([],()=>$r)});var Yr,Jt,tr,nr,$e,Gr,Zt,Kt,Qt,Vr,k,Oe=oe(()=>{"use strict";Yr=Nr(),Jt=Yr,nr=!1,$e=!1,Gr=!1,Zt=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},Kt=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},Qt=(a,u)=>u?a?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":a?"ort-wasm-simd.wasm":"ort-wasm.wasm",Vr=async a=>{if(nr)return Promise.resolve();if($e)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Gr)throw new Error("previous call to 'initializeWebAssembly()' failed.");$e=!0;let u=a.initTimeout,n=a.numThreads,c=a.simd,d=n>1&&Zt(),y=c&&Kt(),l=a.wasmPaths,O=typeof l=="string"?l:void 0,T=Qt(y,d),A=typeof l=="object"?l[T]:void 0,E=!1,U=[];if(u>0&&U.push(new Promise(h=>{setTimeout(()=>{E=!0,h()},u)})),U.push(new Promise((h,w)=>{(d?Jt:Yr)({locateFile:(D,R)=>D.endsWith(".wasm")?A||(O??R)+T:R+D}).then(D=>{$e=!1,nr=!0,tr=D,h()},D=>{$e=!1,Gr=!0,w(D)})})),await Promise.race(U),E)throw new Error(`WebAssembly backend initializing failed due to timeout: ${u}ms`)},k=()=>{if(nr&&tr)return tr;throw new Error("WebAssembly is not initialized yet.")}});var F,Ie,L,je=oe(()=>{"use strict";Oe();F=(a,u)=>{let n=k(),c=n.lengthBytesUTF8(a)+1,d=n._malloc(c);return n.stringToUTF8(a,d,c),u.push(d),d},Ie=(a,u,n,c)=>{if(typeof a=="object"&&a!==null){if(n.has(a))throw new Error("Circular reference in options");n.add(a)}Object.entries(a).forEach(([d,y])=>{let l=u?u+d:d;if(typeof y=="object")Ie(y,l+".",n,c);else if(typeof y=="string"||typeof y=="number")c(l,y.toString());else if(typeof y=="boolean")c(l,y?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof y}`)})},L=a=>{let u=k(),n=u.stackSave();try{let c=u.stackAlloc(8);u._OrtGetLastError(c,c+4);let d=u.HEAP32[c/4],y=u.HEAPU32[c/4+1],l=y?u.UTF8ToString(y):"";throw new Error(`${a} ERROR_CODE: ${d}, ERROR_MESSAGE: ${l}`)}finally{u.stackRestore(n)}}});var qr,Xr=oe(()=>{"use strict";Oe();je();qr=a=>{let u=k(),n=0,c=[],d=a||{};try{if(a?.logSeverityLevel===void 0)d.logSeverityLevel=2;else if(typeof a.logSeverityLevel!="number"||!Number.isInteger(a.logSeverityLevel)||a.logSeverityLevel<0||a.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${a.logSeverityLevel}`);if(a?.logVerbosityLevel===void 0)d.logVerbosityLevel=0;else if(typeof a.logVerbosityLevel!="number"||!Number.isInteger(a.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${a.logVerbosityLevel}`);a?.terminate===void 0&&(d.terminate=!1);let y=0;return a?.tag!==void 0&&(y=F(a.tag,c)),n=u._OrtCreateRunOptions(d.logSeverityLevel,d.logVerbosityLevel,!!d.terminate,y),n===0&&L("Can't create run options."),a?.extra!==void 0&&Ie(a.extra,"",new WeakSet,(l,O)=>{let T=F(l,c),A=F(O,c);u._OrtAddRunConfigEntry(n,T,A)!==0&&L(`Can't set a run config entry: ${l} - ${O}.`)}),[n,c]}catch(y){throw n!==0&&u._OrtReleaseRunOptions(n),c.forEach(l=>u._free(l)),y}}});var en,rn,tn,nn,Jr,Zr=oe(()=>{"use strict";Oe();je();en=a=>{switch(a){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${a}`)}},rn=a=>{switch(a){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${a}`)}},tn=a=>{a.extra||(a.extra={}),a.extra.session||(a.extra.session={});let u=a.extra.session;u.use_ort_model_bytes_directly||(u.use_ort_model_bytes_directly="1"),a.executionProviders&&a.executionProviders.some(n=>(typeof n=="string"?n:n.name)==="webgpu")&&(a.enableMemPattern=!1)},nn=(a,u,n)=>{for(let c of u){let d=typeof c=="string"?c:c.name;switch(d){case"xnnpack":d="XNNPACK";break;case"webnn":if(d="WEBNN",typeof c!="string"){let l=c;if(l?.deviceType){let O=F("deviceType",n),T=F(l.deviceType,n);k()._OrtAddSessionConfigEntry(a,O,T)!==0&&L(`Can't set a session config entry: 'deviceType' - ${l.deviceType}.`)}if(l?.powerPreference){let O=F("powerPreference",n),T=F(l.powerPreference,n);k()._OrtAddSessionConfigEntry(a,O,T)!==0&&L(`Can't set a session config entry: 'powerPreference' - ${l.powerPreference}.`)}}break;case"webgpu":if(d="JS",typeof c!="string"){let l=c;if(l?.preferredLayout){if(l.preferredLayout!=="NCHW"&&l.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${l.preferredLayout}`);let O=F("preferredLayout",n),T=F(l.preferredLayout,n);k()._OrtAddSessionConfigEntry(a,O,T)!==0&&L(`Can't set a session config entry: 'preferredLayout' - ${l.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${d}`)}let y=F(d,n);k()._OrtAppendExecutionProvider(a,y)!==0&&L(`Can't append execution provider: ${d}.`)}},Jr=a=>{let u=k(),n=0,c=[],d=a||{};tn(d);try{let y=en(d.graphOptimizationLevel??"all"),l=rn(d.executionMode??"sequential"),O=typeof d.logId=="string"?F(d.logId,c):0,T=d.logSeverityLevel??2;if(!Number.isInteger(T)||T<0||T>4)throw new Error(`log serverity level is not valid: ${T}`);let A=d.logVerbosityLevel??0;if(!Number.isInteger(A)||A<0||A>4)throw new Error(`log verbosity level is not valid: ${A}`);let E=typeof d.optimizedModelFilePath=="string"?F(d.optimizedModelFilePath,c):0;if(n=u._OrtCreateSessionOptions(y,!!d.enableCpuMemArena,!!d.enableMemPattern,l,!!d.enableProfiling,0,O,T,A,E),n===0&&L("Can't create session options."),d.executionProviders&&nn(n,d.executionProviders,c),d.freeDimensionOverrides)for(let[U,h]of Object.entries(d.freeDimensionOverrides)){if(typeof U!="string")throw new Error(`free dimension override name must be a string: ${U}`);if(typeof h!="number"||!Number.isInteger(h)||h<0)throw new Error(`free dimension override value must be a non-negative integer: ${h}`);let w=F(U,c);u._OrtAddFreeDimensionOverride(n,w,h)!==0&&L(`Can't set a free dimension override: ${U} - ${h}.`)}return d.extra!==void 0&&Ie(d.extra,"",new WeakSet,(U,h)=>{let w=F(U,c),M=F(h,c);u._OrtAddSessionConfigEntry(n,w,M)!==0&&L(`Can't set a session config entry: ${U} - ${h}.`)}),[n,c]}catch(y){throw n!==0&&u._OrtReleaseSessionOptions(n),c.forEach(l=>u._free(l)),y}}});var or,Kr,ar,Qr,et,Ne,rt,ir=oe(()=>{"use strict";or=a=>{switch(a){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${a}`)}},Kr=a=>{switch(a){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${a}`)}},ar=a=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][a],Qr=a=>{switch(a){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${a}`)}},et=a=>{switch(a){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${a}`)}},Ne=a=>a==="float32"||a==="int32"||a==="int64"||a==="bool"||a==="float16"||a==="uint32",rt=a=>{switch(a){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${a}`)}}});var on,an,nt,xe,sr,ur,ot,at,tt,it,st,ut=oe(()=>{"use strict";Xr();Zr();ir();Oe();je();on=a=>{let u=k(),n=u.stackSave();try{let c=u.stackAlloc(8);return u._OrtGetInputOutputCount(a,c,c+4)!==0&&L("Can't get session input/output count."),[u.HEAP32[c/4],u.HEAP32[c/4+1]]}finally{u.stackRestore(n)}},an=(a,u)=>{k()._OrtInit(a,u)!==0&&L("Can't initialize onnxruntime.")},nt=async a=>{an(a.wasm.numThreads,et(a.logLevel))},xe=new Map,sr=a=>{let u=k(),n=u._malloc(a.byteLength);if(n===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${a.byteLength}.`);return u.HEAPU8.set(a,n),[n,a.byteLength]},ur=(a,u)=>{let n=k(),c=0,d=0,y=0,l=[],O=[],T=[];try{[d,l]=Jr(u),c=n._OrtCreateSession(a[0],a[1],d),c===0&&L("Can't create a session.");let[A,E]=on(c),U=[],h=[],w=[];for(let _=0;_<A;_++){let D=n._OrtGetInputName(c,_);D===0&&L("Can't get an input name."),O.push(D),U.push(n.UTF8ToString(D))}for(let _=0;_<E;_++){let D=n._OrtGetOutputName(c,_);D===0&&L("Can't get an output name."),T.push(D);let R=n.UTF8ToString(D);h.push(R)}let M=null;return xe.set(c,[c,O,T,M]),[c,U,h]}catch(A){throw O.forEach(E=>n._OrtFree(E)),T.forEach(E=>n._OrtFree(E)),y!==0&&n._OrtReleaseBinding(y),c!==0&&n._OrtReleaseSession(c),A}finally{n._free(a[0]),d!==0&&n._OrtReleaseSessionOptions(d),l.forEach(A=>n._free(A))}},ot=(a,u)=>{let n=sr(a);return ur(n,u)},at=a=>{let u=k(),n=xe.get(a);if(!n)throw new Error(`cannot release session. invalid session id: ${a}`);let[c,d,y,l]=n;l&&u._OrtReleaseBinding(l.handle),u.jsepUnregisterBuffers?.(a),d.forEach(O=>u._OrtFree(O)),y.forEach(O=>u._OrtFree(O)),u._OrtReleaseSession(c),xe.delete(a)},tt=(a,u,n,c,d)=>{if(!a){u.push(0);return}let y=k(),l=a[0],O=a[1],T=a[3],A,E;if(l==="string"&&T==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(T==="gpu-buffer"){let w=a[2].gpuBuffer,M=ar(or(l));E=O.reduce((_,D)=>_*D,1)*M,A=y.jsepRegisterBuffer(c,d,w,E)}else{let w=a[2];if(Array.isArray(w)){E=4*w.length,A=y._malloc(E),n.push(A);let M=A/4;for(let _=0;_<w.length;_++){if(typeof w[_]!="string")throw new TypeError(`tensor data at index ${_} is not a string`);y.HEAPU32[M++]=F(w[_],n)}}else E=w.byteLength,A=y._malloc(E),n.push(A),y.HEAPU8.set(new Uint8Array(w.buffer,w.byteOffset,E),A)}let U=y.stackSave(),h=y.stackAlloc(4*O.length);try{let w=h/4;O.forEach(_=>y.HEAP32[w++]=_);let M=y._OrtCreateTensor(or(l),A,E,h,O.length,rt(T));M===0&&L(`Can't create tensor for input/output. session=${c}, index=${d}.`),u.push(M)}finally{y.stackRestore(U)}},it=async(a,u,n,c,d,y)=>{let l=k(),O=xe.get(a);if(!O)throw new Error(`cannot run inference. invalid session id: ${a}`);let[T,A,E,U]=O,h=u.length,w=c.length,M=0,_=[],D=[],R=[],Z=[],dr=l.stackSave(),le=l.stackAlloc(h*4),S=l.stackAlloc(h*4),he=l.stackAlloc(w*4),ee=l.stackAlloc(w*4);try{[M,_]=qr(y);for(let P=0;P<h;P++)tt(n[P],D,Z,a,u[P]);for(let P=0;P<w;P++)tt(d[P],R,Z,a,h+c[P]);let I=le/4,ae=S/4,we=he/4,g=ee/4;for(let P=0;P<h;P++)l.HEAPU32[I++]=D[P],l.HEAPU32[ae++]=A[u[P]];for(let P=0;P<w;P++)l.HEAPU32[we++]=R[P],l.HEAPU32[g++]=E[c[P]];let x;x=await l._OrtRun(T,S,le,h,ee,w,he,M),x!==0&&L("failed to call OrtRun().");let ie=[];for(let P=0;P<w;P++){let se=l.HEAPU32[he/4+P];if(se===R[P]){ie.push(d[P]);continue}let Ee=l.stackSave(),Q=l.stackAlloc(4*4),de=!1,H,G=0;try{l._OrtGetTensorData(se,Q,Q+4,Q+8,Q+12)!==0&&L(`Can't access output tensor data on index ${P}.`);let Y=Q/4,ve=l.HEAPU32[Y++];G=l.HEAPU32[Y++];let ue=l.HEAPU32[Y++],Te=l.HEAPU32[Y++],fe=[];for(let z=0;z<Te;z++)fe.push(l.HEAPU32[ue/4+z]);l._OrtFree(ue);let V=fe.reduce((z,$)=>z*$,1);H=Kr(ve);let Ae=U?.outputPreferredLocations[c[P]];if(H==="string"){if(Ae==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let z=[],$=G/4;for(let Se=0;Se<V;Se++){let Me=l.HEAPU32[$++],_e=Se===V-1?void 0:l.HEAPU32[$]-Me;z.push(l.UTF8ToString(Me,_e))}ie.push([H,fe,z,"cpu"])}else if(Ae==="gpu-buffer"&&V>0){let z=l.jsepGetBuffer(G),$=ar(ve);if($===void 0||!Ne(H))throw new Error(`Unsupported data type: ${H}`);de=!0,ie.push([H,fe,{gpuBuffer:z,download:l.jsepCreateDownloader(z,V*$,H),dispose:()=>{l._OrtReleaseTensor(se)}},"gpu-buffer"])}else{let z=Qr(H),$=new z(V);new Uint8Array($.buffer,$.byteOffset,$.byteLength).set(l.HEAPU8.subarray(G,G+$.byteLength)),ie.push([H,fe,$,"cpu"])}}finally{l.stackRestore(Ee),H==="string"&&G&&l._free(G),de||l._OrtReleaseTensor(se)}}return U&&l._OrtClearBoundOutputs(U.handle),ie}finally{l.stackRestore(dr),D.forEach(I=>l._OrtReleaseTensor(I)),R.forEach(I=>l._OrtReleaseTensor(I)),Z.forEach(I=>l._free(I)),M!==0&&l._OrtReleaseRunOptions(M),_.forEach(I=>l._free(I))}},st=a=>{let u=k(),n=xe.get(a);if(!n)throw new Error("invalid session id");let c=n[0],d=u._OrtEndProfiling(c);d===0&&L("Can't get an profile file name."),u._OrtFree(d)}});var ft,Dn,ct,lt,dt,pt,fr,mt,gt,yt,cr=oe(()=>{"use strict";ft=require("onnxruntime-common");ut();Oe();Dn=typeof document<"u"?document?.currentScript?.src:void 0,ct=async()=>Vr(ft.env.wasm),lt=async a=>{await nt(a)},dt=async a=>sr(a),pt=async(a,u)=>ur(a,u),fr=async(a,u)=>ot(a,u),mt=async a=>{at(a)},gt=async(a,u,n,c,d,y)=>it(a,u,n,c,d,y),yt=async a=>{st(a)}});var vt,Ue,ht,Ge,wt,un,Ye,St=oe(()=>{"use strict";vt=require("node:fs/promises"),Ue=require("onnxruntime-common");cr();ir();wt=(a,u)=>{switch(a.location){case"cpu":return[a.type,a.dims,a.data,"cpu"];case"gpu-buffer":return[a.type,a.dims,{gpuBuffer:a.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${a.location} for ${u()}`)}},un=a=>{switch(a[3]){case"cpu":return new Ue.Tensor(a[0],a[2],a[1]);case"gpu-buffer":{let u=a[0];if(!Ne(u))throw new Error(`not supported data type: ${u} for deserializing GPU tensor`);let{gpuBuffer:n,download:c,dispose:d}=a[2];return Ue.Tensor.fromGpuBuffer(n,{dataType:u,dims:a[1],download:c,dispose:d})}default:throw new Error(`invalid data location: ${a[3]}`)}},Ye=class{async createSessionAllocate(u){let n=await fetch(u);if(n.status!==200)throw new Error(`failed to load model: ${u}`);let c=await n.arrayBuffer();return dt(new Uint8Array(c))}async loadModel(u,n){if(ht||(Ge||(Ge=lt(Ue.env)),await Ge,Ge=void 0,ht=!0),typeof u=="string")if(typeof process<"u"&&process.versions&&process.versions.node){let c=await(0,vt.readFile)(u);[this.sessionId,this.inputNames,this.outputNames]=await fr(c,n)}else{let c=await this.createSessionAllocate(u);[this.sessionId,this.inputNames,this.outputNames]=await pt(c,n)}else[this.sessionId,this.inputNames,this.outputNames]=await fr(u,n)}async dispose(){return mt(this.sessionId)}async run(u,n,c){let d=[],y=[];Object.entries(u).forEach(h=>{let w=h[0],M=h[1],_=this.inputNames.indexOf(w);if(_===-1)throw new Error(`invalid input '${w}'`);d.push(M),y.push(_)});let l=[],O=[];Object.entries(n).forEach(h=>{let w=h[0],M=h[1],_=this.outputNames.indexOf(w);if(_===-1)throw new Error(`invalid output '${w}'`);l.push(M),O.push(_)});let T=d.map((h,w)=>wt(h,()=>`input "${this.inputNames[y[w]]}"`)),A=l.map((h,w)=>h?wt(h,()=>`output "${this.outputNames[O[w]]}"`):null),E=await gt(this.sessionId,y,T,O,A,c),U={};for(let h=0;h<E.length;h++)U[this.outputNames[O[h]]]=l[h]??un(E[h]);return U}startProfiling(){}endProfiling(){yt(this.sessionId)}}});var Et={};Xt(Et,{initializeFlags:()=>Ot,wasmBackend:()=>fn});var bt,J,Ot,lr,fn,Tt=oe(()=>{"use strict";bt=require("node:os"),J=require("onnxruntime-common");cr();St();Ot=()=>{if((typeof J.env.wasm.initTimeout!="number"||J.env.wasm.initTimeout<0)&&(J.env.wasm.initTimeout=0),typeof J.env.wasm.simd!="boolean"&&(J.env.wasm.simd=!0),typeof J.env.wasm.proxy!="boolean"&&(J.env.wasm.proxy=!1),typeof J.env.wasm.numThreads!="number"||!Number.isInteger(J.env.wasm.numThreads)||J.env.wasm.numThreads<=0){let a=typeof navigator>"u"?(0,bt.cpus)().length:navigator.hardwareConcurrency;J.env.wasm.numThreads=Math.min(4,Math.ceil((a||1)/2))}},lr=class{async init(){Ot(),await ct()}async createInferenceSessionHandler(u,n){let c=new Ye;return await c.loadModel(u,n),Promise.resolve(c)}},fn=new lr});var ce={};module.exports=zr(ce);ge(ce,require("onnxruntime-common"),module.exports);var ye=require("onnxruntime-common");var Hr="1.17.0";{let a=(Tt(),zr(Et)).wasmBackend;(0,ye.registerBackend)("cpu",a,10),(0,ye.registerBackend)("wasm",a,10),(0,ye.registerBackend)("xnnpack",a,9),(0,ye.registerBackend)("webnn",a,9)}Object.defineProperty(ye.env.versions,"web",{value:Hr,enumerable:!0});0&&(module.exports={...require("onnxruntime-common")});
//# sourceMappingURL=ort.node.min.js.map

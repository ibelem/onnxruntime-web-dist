/*!
* ONNX Runtime Web v1.17.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ort=e():t.ort=e()}(self,(function(){return function(){var __webpack_modules__={5716:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.onnxjsBackend=void 0;var a=n(6027),i=n(1723),c=function(){function t(){}return t.prototype.init=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2]}))}))},t.prototype.createSessionHandler=function(t,e){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return n=new a.Session(e),"string"!=typeof t?[3,2]:[4,n.loadModel(t)];case 1:return r.sent(),[3,4];case 2:return[4,n.loadModel(t)];case 3:r.sent(),r.label=4;case 4:return[2,new i.OnnxjsSessionHandler(n)]}}))}))},t}();e.onnxjsBackend=new c},2818:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.wasmBackend=e.initializeFlags=void 0;var a=n(2235),i=n(5381),c=n(9544),s=n(6640);e.initializeFlags=function(){if(("number"!=typeof a.env.wasm.initTimeout||a.env.wasm.initTimeout<0)&&(a.env.wasm.initTimeout=0),"boolean"!=typeof a.env.wasm.simd&&(a.env.wasm.simd=!0),"boolean"!=typeof a.env.wasm.proxy&&(a.env.wasm.proxy=!1),"number"!=typeof a.env.wasm.numThreads||!Number.isInteger(a.env.wasm.numThreads)||a.env.wasm.numThreads<=0){var t="undefined"==typeof navigator?(0,i.cpus)().length:navigator.hardwareConcurrency;a.env.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}};var u=function(){function t(){}return t.prototype.init=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return(0,e.initializeFlags)(),[4,(0,c.initializeWebAssemblyInstance)()];case 1:return t.sent(),[2]}}))}))},t.prototype.createSessionHandler=function(t,e){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,(n=new s.OnnxruntimeWebAssemblySessionHandler).loadModel(t,e)];case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))},t}();e.wasmBackend=new u},1057:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(2235),e);var a=n(2235),i=n(8408),c=n(5716).onnxjsBackend;(0,a.registerBackend)("webgl",c,-10);var s=n(2818).wasmBackend;(0,a.registerBackend)("cpu",s,10),(0,a.registerBackend)("wasm",s,10),(0,a.registerBackend)("xnnpack",s,9),(0,a.registerBackend)("webnn",s,9),Object.defineProperty(a.env.versions,"web",{value:i.version,enumerable:!0})},4910:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;var n=function(){function t(t){Object.assign(this,t)}return Object.defineProperty(t.prototype,"cacheKey",{get:function(){var t=this;return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((function(e){return"".concat(t[e])})).join(";")),this._cacheKey},enumerable:!1,configurable:!0}),t}();e.createAttributeWithCacheKey=function(t){return new n(t)}},6874:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;var o=n(5127),a=n(2446),i=n(9240),c=n(7273),s=o.onnxruntime.experimental.fbs,u=function(){function t(e){var n,o;if(this._attributes=new Map,null!=e){try{for(var i=r(e),c=i.next();!c.done;c=i.next()){var u=c.value;u instanceof a.onnx.AttributeProto?this._attributes.set(u.name,[t.getValue(u),t.getType(u)]):u instanceof s.Attribute&&this._attributes.set(u.name(),[t.getValue(u),t.getType(u)])}}catch(t){n={error:t}}finally{try{c&&!c.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}if(this._attributes.size<e.length)throw new Error("duplicated attribute names")}}return t.prototype.set=function(t,e,n){this._attributes.set(t,[n,e])},t.prototype.delete=function(t){this._attributes.delete(t)},t.prototype.getFloat=function(t,e){return this.get(t,"float",e)},t.prototype.getInt=function(t,e){return this.get(t,"int",e)},t.prototype.getString=function(t,e){return this.get(t,"string",e)},t.prototype.getTensor=function(t,e){return this.get(t,"tensor",e)},t.prototype.getFloats=function(t,e){return this.get(t,"floats",e)},t.prototype.getInts=function(t,e){return this.get(t,"ints",e)},t.prototype.getStrings=function(t,e){return this.get(t,"strings",e)},t.prototype.getTensors=function(t,e){return this.get(t,"tensors",e)},t.prototype.get=function(t,e,n){var r=this._attributes.get(t);if(void 0===r){if(void 0!==n)return n;throw new Error("required attribute not found: ".concat(t))}if(r[1]!==e)throw new Error("type mismatch: expected ".concat(e," but got ").concat(r[1]));return r[0]},t.getType=function(t){var e=t instanceof a.onnx.AttributeProto?t.type:t.type();switch(e){case a.onnx.AttributeProto.AttributeType.FLOAT:return"float";case a.onnx.AttributeProto.AttributeType.INT:return"int";case a.onnx.AttributeProto.AttributeType.STRING:return"string";case a.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case a.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case a.onnx.AttributeProto.AttributeType.INTS:return"ints";case a.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case a.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error("attribute type is not supported yet: ".concat(a.onnx.AttributeProto.AttributeType[e]))}},t.getValue=function(t){var e=t instanceof a.onnx.AttributeProto?t.type:t.type();if(e===a.onnx.AttributeProto.AttributeType.GRAPH||e===a.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");var n=this.getValueNoCheck(t);if(e===a.onnx.AttributeProto.AttributeType.INT&&c.LongUtil.isLong(n))return c.LongUtil.longToNumber(n);if(e===a.onnx.AttributeProto.AttributeType.INTS){for(var r=n,o=new Array(r.length),u=0;u<r.length;u++){var l=r[u];o[u]=c.LongUtil.longToNumber(l)}return o}if(e===a.onnx.AttributeProto.AttributeType.TENSOR)return t instanceof a.onnx.AttributeProto?i.Tensor.fromProto(n):i.Tensor.fromOrtTensor(n);if(e===a.onnx.AttributeProto.AttributeType.TENSORS){if(t instanceof a.onnx.AttributeProto)return n.map((function(t){return i.Tensor.fromProto(t)}));if(t instanceof s.Attribute)return n.map((function(t){return i.Tensor.fromOrtTensor(t)}))}if(e===a.onnx.AttributeProto.AttributeType.STRING&&t instanceof a.onnx.AttributeProto){var p=n;return(0,c.decodeUtf8String)(p)}return e===a.onnx.AttributeProto.AttributeType.STRINGS&&t instanceof a.onnx.AttributeProto?n.map(c.decodeUtf8String):n},t.getValueNoCheck=function(t){return t instanceof a.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(t):this.getValueNoCheckFromOrtFormat(t)},t.getValueNoCheckFromOnnxFormat=function(t){switch(t.type){case a.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case a.onnx.AttributeProto.AttributeType.INT:return t.i;case a.onnx.AttributeProto.AttributeType.STRING:return t.s;case a.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case a.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case a.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case a.onnx.AttributeProto.AttributeType.INTS:return t.ints;case a.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case a.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case a.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw new Error("unsupported attribute type: ".concat(a.onnx.AttributeProto.AttributeType[t.type]))}},t.getValueNoCheckFromOrtFormat=function(t){switch(t.type()){case s.AttributeType.FLOAT:return t.f();case s.AttributeType.INT:return t.i();case s.AttributeType.STRING:return t.s();case s.AttributeType.TENSOR:return t.t();case s.AttributeType.GRAPH:return t.g();case s.AttributeType.FLOATS:return t.floatsArray();case s.AttributeType.INTS:for(var e=[],n=0;n<t.intsLength();n++)e.push(t.ints(n));return e;case s.AttributeType.STRINGS:var r=[];for(n=0;n<t.stringsLength();n++)r.push(t.strings(n));return r;case s.AttributeType.TENSORS:var o=[];for(n=0;n<t.tensorsLength();n++)o.push(t.tensors(n));return o;default:throw new Error("unsupported attribute type: ".concat(s.AttributeType[t.type()]))}},t}();e.Attribute=u},1975:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;var i=n(4418),c=new Map;function s(t){return r(this,void 0,void 0,(function(){var n,r,a;return o(this,(function(o){switch(o.label){case 0:return void 0!==(n=e.backend)[t]&&(i=n[t],"initialize"in(s=i)&&"function"==typeof s.initialize&&"createSessionHandler"in s&&"function"==typeof s.createSessionHandler&&"dispose"in s&&"function"==typeof s.dispose)?(r=n[t],"object"==typeof(a=r.initialize())&&"then"in a?[4,a]:[3,2]):[3,3];case 1:a=o.sent(),o.label=2;case 2:if(a)return c.set(t,r),[2,r];o.label=3;case 3:return[2,void 0]}var i,s}))}))}e.backend={webgl:new i.WebGLBackend},e.resolveBackend=function t(e){return r(this,void 0,void 0,(function(){var n,r,i,u,l,p,f,d,h;return o(this,(function(o){switch(o.label){case 0:return e?[3,1]:[2,t(["webgl"])];case 1:n="string"==typeof e?[e]:e,o.label=2;case 2:o.trys.push([2,7,8,9]),r=a(n),i=r.next(),o.label=3;case 3:return i.done?[3,6]:(u=i.value,(l=c.get(u))?[2,l]:[4,s(u)]);case 4:if(p=o.sent())return[2,p];o.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return f=o.sent(),d={error:f},[3,9];case 8:try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(d)throw d.error}return[7];case 9:throw new Error("no available backend to use")}}))}))}},4418:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;var r=n(2235),o=n(1315),a=n(2171),i=n(3389),c=function(){function t(){}return Object.defineProperty(t.prototype,"contextId",{get:function(){return r.env.webgl.contextId},set:function(t){r.env.webgl.contextId=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"matmulMaxBatchSize",{get:function(){return r.env.webgl.matmulMaxBatchSize},set:function(t){r.env.webgl.matmulMaxBatchSize=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textureCacheMode",{get:function(){return r.env.webgl.textureCacheMode},set:function(t){r.env.webgl.textureCacheMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pack",{get:function(){return r.env.webgl.pack},set:function(t){r.env.webgl.pack=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"async",{get:function(){return r.env.webgl.async},set:function(t){r.env.webgl.async=t},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){try{return this.glContext=(0,i.createWebGLContext)(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),o.Logger.setWithEnv(r.env),Object.defineProperty(r.env.webgl,"context",{value:this.glContext.gl}),o.Logger.verbose("WebGLBackend","Created WebGLContext: ".concat(typeof this.glContext," with matmulMaxBatchSize: ").concat(this.matmulMaxBatchSize,"; textureCacheMode: ").concat(this.textureCacheMode,"; pack: ").concat(this.pack,"; async: ").concat(this.async,".")),!0}catch(t){return o.Logger.warning("WebGLBackend","Unable to initialize WebGLBackend. ".concat(t)),!1}},t.prototype.createSessionHandler=function(t){return new a.WebGLSessionHandler(this,t)},t.prototype.dispose=function(){this.glContext.dispose()},t}();e.WebGLBackend=c},6859:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;var c=n(7273),s=n(1997),u=n(6757),l=n(7618),p=n(432),f=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getFunctions=function(){return a(a(a(a(a(a(a({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())},e.prototype.getCustomTypes=function(){return{}},e.prototype.offsetToCoords=function(){return{offsetToCoords:new s.GlslLibRoutine("\n      vec2 ".concat("offsetToCoords","(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      "))}},e.prototype.coordsToOffset=function(){return{coordsToOffset:new s.GlslLibRoutine("\n      int ".concat("coordsToOffset","(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      "))}},e.prototype.getOutputSamplingSnippet=function(){var t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)},e.prototype.getPackedOutputSamplingSnippet=function(t){var e=t.unpackedShape,n=[t.width,t.height],r={},o="getOutputCoords";switch(e.length){case 0:r[o]=this.getOutputScalarCoords();break;case 1:r[o]=this.getOutputPacked1DCoords(e,n);break;case 2:r[o]=this.getOutputPacked2DCoords(e,n);break;case 3:r[o]=this.getOutputPacked3DCoords(e,n);break;default:r[o]=this.getOutputPackedNDCoords(e,n)}var a=(0,u.getGlsl)(this.context.glContext.version),i="\n      void setOutput(vec4 val) {\n        ".concat(a.output," = val;\n      }\n    ");return r.floatTextureSetRGBA=new s.GlslLibRoutine(i),r},e.prototype.getUnpackedOutputSamplingSnippet=function(t){var e=t.unpackedShape,n=[t.width,t.height],r={},o="getOutputCoords";switch(e.length){case 0:r[o]=this.getOutputScalarCoords();break;case 1:r[o]=this.getOutputUnpacked1DCoords(e,n);break;case 2:r[o]=this.getOutputUnpacked2DCoords(e,n);break;case 3:r[o]=this.getOutputUnpacked3DCoords(e,n);break;case 4:r[o]=this.getOutputUnpacked4DCoords(e,n);break;case 5:r[o]=this.getOutputUnpacked5DCoords(e,n);break;case 6:r[o]=this.getOutputUnpacked6DCoords(e,n);break;default:throw new Error("Unsupported output dimensionality: ".concat(e.length))}var a=(0,u.getGlsl)(this.context.glContext.version),i="\n        void setOutput(float val) {\n          ".concat(a.output," = vec4(val, 0, 0, 0);\n        }\n    ");return r.floatTextureSetR=new s.GlslLibRoutine(i),r},e.prototype.getOutputScalarCoords=function(){return new s.GlslLibRoutine("\n      int getOutputCoords() {\n        return 0;\n      }\n    ")},e.prototype.getOutputPacked1DCoords=function(t,e){var n=e,r="";return 1===n[0]?(r="\n          int getOutputCoords() {\n            return 2 * int(TexCoords.y * ".concat(n[1],".0);\n          }\n        "),new s.GlslLibRoutine(r)):1===n[1]?(r="\n          int getOutputCoords() {\n            return 2 * int(TexCoords.x * ".concat(n[0],".0);\n          }\n        "),new s.GlslLibRoutine(r)):(r="\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                 vec2(".concat(n[0],", ").concat(n[1],"));\n          return 2 * (resTexRC.y * ").concat(n[0]," + resTexRC.x);\n        }\n      "),new s.GlslLibRoutine(r))},e.prototype.getOutputPacked2DCoords=function(t,e){var n="";if(c.ArrayUtil.arraysEqual(t,e))return n="\n        ivec2 getOutputCoords() {\n          return 2 * ivec2(TexCoords.xy * vec2(".concat(e[0],", ").concat(e[1],"));\n        }\n      "),new s.GlslLibRoutine(n);var r=e,o=Math.ceil(t[1]/2);return n="\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(r[0],", ").concat(r[1],"));\n\n          int index = resTexRC.y * ").concat(r[0]," + resTexRC.x;\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ").concat(o,") * 2;\n          int c = 2 * (index / ").concat(o,");\n\n          return ivec2(r, c);\n        }\n      "),new s.GlslLibRoutine(n)},e.prototype.getOutputPacked3DCoords=function(t,e){var n=[e[0],e[1]],r=Math.ceil(t[2]/2),o=r*Math.ceil(t[1]/2),a="\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(n[0],", ").concat(n[1],"));\n          int index = resTexRC.y * ").concat(n[0]," + resTexRC.x;\n\n          int b = index / ").concat(o,";\n          index -= b * ").concat(o,";\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ").concat(r,") * 2;\n          int c = 2 * (index / ").concat(r,");\n\n          return ivec3(b, r, c);\n        }\n      ");return new s.GlslLibRoutine(a)},e.prototype.getOutputPackedNDCoords=function(t,e){for(var n=[e[0],e[1]],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2),a=o,i="",c="b, r, c",u=2;u<t.length-1;u++)a*=t[t.length-u-1],i="\n      int b".concat(u," = index / ").concat(a,";\n      index -= b").concat(u," * ").concat(a,";\n    ")+i,c="b".concat(u,", ")+c;var l="\n      ivec".concat(t.length," getOutputCoords() {\n        ivec2 resTexRC = ivec2(TexCoords.xy *\n                              vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = resTexRC.y * ").concat(n[0]," + resTexRC.x;\n\n        ").concat(i,"\n\n        int b = index / ").concat(o,";\n        index -= b * ").concat(o,";\n\n        // reverse r and c order for packed texture\n        int r = imod(index, ").concat(r,") * 2;\n        int c = 2 * (index / ").concat(r,");\n\n        return ivec").concat(t.length,"(").concat(c,");\n      }\n    ");return new s.GlslLibRoutine(l)},e.prototype.getOutputUnpacked1DCoords=function(t,e){var n="\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          return resTexRC.y * ").concat(e[0]," + resTexRC.x;\n        }\n      ");return new s.GlslLibRoutine(n)},e.prototype.getOutputUnpacked2DCoords=function(t,e){var n="\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          int r = index / ").concat(t[1],";\n          int c = index - r * ").concat(t[1],";\n          return ivec2(r, c);\n        }\n      ");return new s.GlslLibRoutine(n)},e.prototype.getOutputUnpacked3DCoords=function(t,e){var n,r=t.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=t[r-1];for(var a=r-3;a>=0;--a)o[a]=o[a+1]*t[a+1];var i=["r","c","d"],c=o.map((function(t,e){var n="int ".concat(i[e]," = index / ").concat(t),r=e===o.length-1?"int ".concat(i[e+1]," = index - ").concat(i[e]," * ").concat(t):"index -= ".concat(i[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          ").concat(c,"\n          return ivec3(r, c, d);\n        }\n      "),new s.GlslLibRoutine(n)},e.prototype.getOutputUnpacked4DCoords=function(t,e){var n,r=t.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=t[r-1];for(var a=r-3;a>=0;--a)o[a]=o[a+1]*t[a+1];var i=["r","c","d","d2"],c=o.map((function(t,e){var n="int ".concat(i[e]," = index / ").concat(t),r=e===o.length-1?"int ".concat(i[e+1]," = index - ").concat(i[e]," * ").concat(t):"index -= ".concat(i[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n      ivec4 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          ").concat(c,"\n          return ivec4(r, c, d, d2);\n        }\n      "),new s.GlslLibRoutine(n)},e.prototype.getOutputUnpacked5DCoords=function(t,e){var n,r=t.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=t[r-1];for(var a=r-3;a>=0;--a)o[a]=o[a+1]*t[a+1];var i=["r","c","d","d2","d3"],c=o.map((function(t,e){var n="int ".concat(i[e]," = index / ").concat(t),r=e===o.length-1?"int ".concat(i[e+1]," = index - ").concat(i[e]," * ").concat(t):"index -= ".concat(i[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n      ivec5 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          ").concat(c,"\n          return ivec5(r, c, d, d2, d3);\n        }\n      "),new s.GlslLibRoutine(n)},e.prototype.getOutputUnpacked6DCoords=function(t,e){var n,r=t.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=t[r-1];for(var a=r-3;a>=0;--a)o[a]=o[a+1]*t[a+1];var i=["r","c","d","d2","d3","d4"],c=o.map((function(t,e){var n="int ".concat(i[e]," = index / ").concat(t),r=e===o.length-1?"int ".concat(i[e+1]," = index - ").concat(i[e]," * ").concat(t):"index -= ".concat(i[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n     ivec6 getOutputCoords() {\n         ivec2 resTexRC = ivec2(TexCoords.xy *\n                               vec2(".concat(e[0],", ").concat(e[1],"));\n         int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n         ").concat(c,"\n         return ivec6(r, c, d, d2, d3, d4);\n       }\n     "),new s.GlslLibRoutine(n)},e.prototype.getCommonUtilFuncs=function(){var t={},e="uvFromFlat";t[e]=new s.GlslLibRoutine("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),t[e="packedUVfrom1D"]=new s.GlslLibRoutine("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t[e="packedUVfrom2D"]=new s.GlslLibRoutine("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t[e="packedUVfrom3D"]=new s.GlslLibRoutine("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e="sampleTexture";var n=(0,u.getGlsl)(this.context.glContext.version);return t[e]=new s.GlslLibRoutine("\n        float sampleTexture(sampler2D textureSampler, vec2 uv) {\n            return ".concat(n.texture2D,"(textureSampler, uv).r;\n        }")),t},e.prototype.getInputsSamplingSnippets=function(){var t=this,e={},n=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((function(r,o){var a=t.context.inputTextureLayouts[o],i=(0,p.generateShaderFuncNameFromInputSamplerName)(r);a.isPacked?e[i]=t.getPackedSamplerFromInput(i,r,a):e[i]=t.getUnpackedSamplerFromInput(i,r,a);var c=(0,p.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(r);a.unpackedShape.length<=n.unpackedShape.length&&(a.isPacked?e[c]=t.getPackedSamplerAtOutputCoords(c,a,n,r):e[c]=t.getUnpackedSamplerAtOutputCoords(c,a,n,r))})),e},e.prototype.getPackedSamplerAtOutputCoords=function(t,e,n,r){var o,a=e.unpackedShape,i=n.unpackedShape,u=r,l=(0,p.generateShaderFuncNameFromInputSamplerName)(u),f=a.length,d=i.length,h=c.BroadcastUtil.getBroadcastDims(a,i),g=(0,p.getCoordsDataType)(d),y=d-f,m=(0,p.getGlChannels)();o=0===f?"":d<2&&h.length>=1?"coords = 0;":h.map((function(t){return"coords.".concat(m[t+y]," = 0;")})).join("\n");var v;v=d<2&&f>0?"coords":a.map((function(t,e){return"coords.".concat(m[e+y])})).join(", ");var b="return outputValue;",w=1===c.ShapeUtil.size(a),_=1===c.ShapeUtil.size(i);if(1!==f||w||_){if(w&&!_)b=1===d?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(h.length){var x=f-2,T=f-1;h.indexOf(x)>-1&&h.indexOf(T)>-1?b="return vec4(outputValue.x);":h.indexOf(x)>-1?b="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":h.indexOf(T)>-1&&(b="return vec4(outputValue.xx, outputValue.zz);")}}else b="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";var S="\n        int lastDim = coords.".concat(m[d-1],";\n        coords.").concat(m[d-1]," = coords.").concat(m[d-2],";\n        coords.").concat(m[d-2]," = lastDim;\n      "),O="\n      vec4 ".concat(t,"() {\n        ").concat(g," coords = getOutputCoords();\n        ").concat(S,"\n        ").concat(o,"\n        vec4 outputValue = ").concat(l,"(").concat(v,");\n        ").concat(b,"\n      }\n    ");return new s.GlslLibRoutine(O,["coordinates.getOutputCoords"])},e.prototype.getUnpackedSamplerAtOutputCoords=function(t,e,n,r){var o=[n.width,n.height],a=[e.width,e.height],i=e.unpackedShape.length,u=n.unpackedShape.length,l=e.unpackedShape,f=n.unpackedShape,d=(0,p.generateShaderFuncNameFromInputSamplerName)(r);if(i===u&&c.ArrayUtil.arraysEqual(a,o)){var h="\n          float ".concat(t,"() {\n            return sampleTexture(").concat(r,", TexCoords);\n          }\n        ");return new s.GlslLibRoutine(h,["coordinates.sampleTexture"])}var g,y=(0,p.getCoordsDataType)(u),m=c.BroadcastUtil.getBroadcastDims(l,f),v=u-i,b=(0,p.getGlChannels)();g=0===i?"":u<2&&m.length>=1?"coords = 0;":m.map((function(t){return"coords.".concat(b[t+v]," = 0;")})).join("\n");var w;w=u<2&&i>0?"coords":e.unpackedShape.map((function(t,e){return"coords.".concat(b[e+v])})).join(", ");var _="\n        float ".concat(t,"() {\n          ").concat(y," coords = getOutputCoords();\n          ").concat(g,"\n          return ").concat(d,"(").concat(w,");\n        }\n      ");return new s.GlslLibRoutine(_,["coordinates.getOutputCoords"])},e.prototype.getPackedSamplerFromInput=function(t,e,n){switch(n.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,n);case 2:return this.getPackedSampler2D(t,e,n);case 3:return this.getPackedSampler3D(t,e,n);default:return this.getPackedSamplerND(t,e,n)}},e.prototype.getUnpackedSamplerFromInput=function(t,e,n){var r=n.unpackedShape;switch(r.length){case 0:return this.getUnpackedSamplerScalar(t,e,n);case 1:return this.getUnpackedSampler1D(t,e,n);case 2:return this.getUnpackedSampler2D(t,e,n);case 3:return this.getUnpackedSampler3D(t,e,n);case 4:return this.getUnpackedSampler4D(t,e,n);case 5:return this.getUnpackedSampler5D(t,e,n);case 6:return this.getUnpackedSampler6D(t,e,n);default:throw new Error("Unsupported dimension ".concat(r.length,"-D"))}},e.prototype.getPackedSamplerScalar=function(t,e){var n=(0,u.getGlsl)(this.context.glContext.version),r="\n          vec4 ".concat(t,"() {\n            return ").concat(n.texture2D,"(").concat(e,", halfCR);\n          }\n        ");return new s.GlslLibRoutine(r)},e.prototype.getPackedSampler1D=function(t,e,n){var r=[n.width,n.height],o=[r[1],r[0]],a=(0,u.getGlsl)(this.context.glContext.version),i="vec4 ".concat(t,"(int index) {\n      vec2 uv = packedUVfrom1D(\n      ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(a.texture2D,"(").concat(e,", uv);\n    }");return new s.GlslLibRoutine(i,["coordinates.packedUVfrom1D"])},e.prototype.getPackedSampler2D=function(t,e,n){var r=n.unpackedShape,o=[n.width,n.height],a=(0,u.getGlsl)(this.context.glContext.version),i=o[0],l=o[1];if(null!=o&&c.ArrayUtil.arraysEqual(r,o)){var p="vec4 ".concat(t,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(l,".0, ").concat(i,".0);\n        return ").concat(a.texture2D,"(").concat(e,", uv);\n      }");return new s.GlslLibRoutine(p)}var f=o,d=Math.ceil(r[1]/2),h="vec4 ".concat(t,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(f[1],", ").concat(f[0],", ").concat(d,", row, col);\n      return ").concat(a.texture2D,"(").concat(e,", uv);\n    }");return new s.GlslLibRoutine(h,["coordinates.packedUVfrom2D"])},e.prototype.getPackedSampler3D=function(t,e,n){var r=n.unpackedShape,o=[n.width,n.height],a=[o[0],o[1]],i=(0,u.getGlsl)(this.context.glContext.version);if(1===r[0]){var c=r.slice(1),l=(0,p.squeezeInputShape)(r,c),f=JSON.parse(JSON.stringify(n));f.unpackedShape=l;var d=this.getPackedSamplerFromInput(t,e,f),h="".concat(d.routineBody,"\n      vec4 ").concat(t,"(int b, int row, int col) {\n        return ").concat(t,"(").concat((0,p.getSqueezedParams)(["b","row","col"],[1,2]),");\n      } ");return new s.GlslLibRoutine(h,d.dependencies)}var g=a[0],y=a[1],m=Math.ceil(r[2]/2),v=m*Math.ceil(r[1]/2),b="vec4 ".concat(t,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(y,", ").concat(g,", ").concat(v,", ").concat(m,", b, row, col);\n      return ").concat(i.texture2D,"(").concat(e,", uv);}");return new s.GlslLibRoutine(b,["coordinates.packedUVfrom3D"])},e.prototype.getPackedSamplerND=function(t,e,n){for(var r=n.unpackedShape,o=r.length,a=[n.width,n.height],i=(0,u.getGlsl)(this.context.glContext.version),c=[a[0],a[1]],l=c[1],p=c[0],f=Math.ceil(r[o-1]/2),d=f*Math.ceil(r[o-2]/2),h="int b, int row, int col",g="b * ".concat(d," + (row / 2) * ").concat(f," + (col / 2)"),y=2;y<o-1;y++)h="int b".concat(y,", ")+h,d*=r[o-y-1],g="b".concat(y," * ").concat(d," + ")+g;var m="vec4 ".concat(t,"(").concat(h,") {\n      int index = ").concat(g,";\n      int texR = index / ").concat(p,";\n      int texC = index - texR * ").concat(p,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,", ").concat(l,");\n      return ").concat(i.texture2D,"(").concat(e,", uv);\n    }");return new s.GlslLibRoutine(m)},e.prototype.getUnpackedSamplerScalar=function(t,e,n){var r=i([n.width,n.height],2),o=r[0],a=r[1];if(1===o&&1===a){var c="\n          float ".concat(t,"() {\n            return sampleTexture(").concat(e,", halfCR);\n          }\n        ");return new s.GlslLibRoutine(c,["coordinates.sampleTexture"])}var u="\n        float ".concat(t,"() {\n          int offset_").concat(e," = coordsToOffset(TexCoords, ").concat(o,", ").concat(a,");\n          vec2 uv = uvFromFlat(").concat(o,", ").concat(a,", offset_").concat(e,");\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new s.GlslLibRoutine(u,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},e.prototype.getUnpackedSampler1D=function(t,e,n){var r=n.width,o=n.height;if(1===o&&1===r){var a="\n        float ".concat(t,"(int index) {\n          return sampleTexture(").concat(e,", halfCR);\n        }\n      ");return new s.GlslLibRoutine(a,["coordinates.sampleTexture"])}if(1===o){var i="\n          float ".concat(t,"(int index) {\n            vec2 uv = vec2((float(index) + 0.5) / ").concat(r,".0, 0.5);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new s.GlslLibRoutine(i,["coordinates.sampleTexture"])}if(1===r){var c="\n          float ".concat(t,"(int index) {\n            vec2 uv = vec2(0.5, (float(index) + 0.5) / ").concat(o,".0);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new s.GlslLibRoutine(c,["coordinates.sampleTexture"])}var u="\n        float ".concat(t,"(int index) {\n          vec2 uv = uvFromFlat(").concat(r,", ").concat(o,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new s.GlslLibRoutine(u,["coordinates.uvFromFlat","coordinates.sampleTexture"])},e.prototype.getUnpackedSampler2D=function(t,e,n){var r=n.unpackedShape,o=[n.height,n.width];if(null!=o&&c.ArrayUtil.arraysEqual(r,o)){var a=o[1],i=o[0],u="\n          float ".concat(t,"(int row, int col) {\n            vec2 uv = (vec2(row, col) + halfCR) / vec2(").concat(a,".0, ").concat(i,".0);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new s.GlslLibRoutine(u,["coordinates.sampleTexture"])}var f=(0,l.squeezeShape)(r),d=f.newShape,h=f.keptDims,g=d;if(g.length<r.length){var y=(0,p.squeezeInputShape)(r,g),m=JSON.parse(JSON.stringify(n));m.unpackedShape=y;var v="\n          ".concat(this.getUnpackedSamplerFromInput(t,e,m).routineBody,"\n          float ").concat(t,"(int row, int col) {\n            return ").concat(t,"(").concat((0,p.getSqueezedParams)(["col","row"],h),");\n          }\n        ");return new s.GlslLibRoutine(v,["coordinates.sampleTexture"])}var b=o[1],w=o[0];if(1===w){var _="\n          float ".concat(t,"(int row, int col) {\n            int offset_").concat(e," = coordsToOffset(TexCoords, ").concat(b,", ").concat(w,");\n            float index = dot(vec3(row, col, offset_").concat(e,"), vec3(").concat(r[1],", 1, 1));\n            vec2 uv = vec2(0.5, (index + 0.5) / ").concat(b,".0);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new s.GlslLibRoutine(_,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(1===b){var x="\n          float ".concat(t,"(int row, int col) {\n            int offset_").concat(e," = coordsToOffset(TexCoords, ").concat(b,", ").concat(w,");\n            float index = dot(vec3(row, col, offset_").concat(e,"), vec3(").concat(r[1],", 1, 1));\n            vec2 uv = vec2((index + 0.5) / ").concat(w,".0, 0.5);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new s.GlslLibRoutine(x,["coordinates.sampleTexture","coordinates.coordsToOffset"])}var T="\n        float ".concat(t,"(int row, int col) {\n          int index = col * ").concat(r[1]," + row;\n          vec2 uv = uvFromFlat(").concat(b,", ").concat(w,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new s.GlslLibRoutine(T,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},e.prototype.getUnpackedSampler3D=function(t,e,n){var r=n.unpackedShape,o=r[1]*r[2],a=r[2],i=(0,l.squeezeShape)(r),c=i.newShape,u=i.keptDims,f=c;if(f.length<r.length){var d=(0,p.squeezeInputShape)(r,f),h=JSON.parse(JSON.stringify(n));h.unpackedShape=d;var g=this.getUnpackedSamplerFromInput(t,e,h),y=u.reverse(),m="\n          ".concat(g.routineBody,"\n          float ").concat(t,"(int batch, int row, int col) {\n            return ").concat(t,"(").concat((0,p.getSqueezedParams)(["batch","col","row"],y),");\n          }\n        ");return new s.GlslLibRoutine(m,g.dependencies)}var v=n.width,b=n.height,w="\n          float ".concat(t,"(int depth, int row, int col) {\n            // Explicitly use integer operations as dot() only works on floats.\n            int index = depth * ").concat(o," + col * ").concat(a," + row;\n            vec2 uv = uvFromFlat(").concat(v,", ").concat(b,", index);\n            return sampleTexture(").concat(e,", uv);\n          }\n      ");return new s.GlslLibRoutine(w,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},e.prototype.getUnpackedSampler4D=function(t,e,n){var r=n.unpackedShape,o=r[3],a=r[2]*o,i=r[1]*a,c=n.width,u=n.height,l="\n        float ".concat(t,"(int row, int col, int depth, int depth2) {\n          int index = row * ").concat(i," + col * ").concat(a," +\n              depth2 * ").concat(o," + depth;\n          vec2 uv = uvFromFlat(").concat(c,", ").concat(u,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new s.GlslLibRoutine(l,["coordinates.uvFromFlat","coordinates.sampleTexture"])},e.prototype.getUnpackedSampler5D=function(t,e,n){var r=n.unpackedShape,o=r[4],a=r[3]*o,i=r[2]*a,c=r[1]*i,u=(0,l.squeezeShape)(r),f=u.newShape,d=u.keptDims;if(f.length<r.length){var h=(0,p.squeezeInputShape)(r,f),g=JSON.parse(JSON.stringify(n));g.unpackedShape=h;var y="\n          ".concat(this.getUnpackedSamplerFromInput(t,e,g).routineBody,"\n          float ").concat(t,"(int row, int col, int depth, int depth2, int depth3) {\n            return ").concat(t,"(").concat((0,p.getSqueezedParams)(["row","col","depth","depth2","depth3"],d),");\n          }\n        ");return new s.GlslLibRoutine(y,["coordinates.sampleTexture","coordinates.uvFromFlat"])}var m=n.width,v=n.height,b="\n        float ".concat(t,"(int row, int col, int depth, int depth2, int depth3) {\n          int index = row * ").concat(c," + col * ").concat(i," + depth * ").concat(a," +\n          depth3 * ").concat(o," + depth2;\n          vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new s.GlslLibRoutine(b,["coordinates.sampleTexture","coordinates.uvFromFlat"])},e.prototype.getUnpackedSampler6D=function(t,e,n){var r=n.unpackedShape,o=r[5],a=r[4]*o,i=r[3]*a,c=r[2]*i,u=r[1]*c,f=(0,l.squeezeShape)(r),d=f.newShape,h=f.keptDims;if(d.length<r.length){var g=(0,p.squeezeInputShape)(r,d),y=JSON.parse(JSON.stringify(n));y.unpackedShape=g;var m="\n            ".concat(this.getUnpackedSamplerFromInput(t,e,y).routineBody,"\n            float ").concat(t,"(int row, int col, int depth,\n              int depth2, int depth3, int depth4) {\n              return ").concat(t,"(").concat((0,p.getSqueezedParams)(["row","col","depth","depth2","depth3","depth4"],h),");\n            }\n          ");return new s.GlslLibRoutine(m,["coordinates.sampleTexture","coordinates.uvFromFlat"])}var v=n.width,b=n.height,w="\n          float ".concat(t,"(int row, int col, int depth,\n            int depth2, int depth3, int depth4) {\n            int index = row * ").concat(u," + col * ").concat(c," + depth * ").concat(i," +\n            depth2 * ").concat(a," + depth3 * ").concat(o," + depth4;\n            vec2 uv = uvFromFlat(").concat(v,", ").concat(b,", index);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new s.GlslLibRoutine(w,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},e.prototype.toVec=function(){for(var t=this.context.outputTextureLayout,e=t.shape.length,n=t.strides,r=t.width,o=t.height,a=[],i=0;i<e-1;++i)a.push("\n        c[".concat(i,"] = offset / ").concat(n[i],";")),a.push("\n        offset -= c[".concat(i,"] * ").concat(n[i],";"));a.push("\n        c[".concat(e-1,"] = offset;"));var c="\n      void toVec(vec2 texCoords, out int c[".concat(e,"]) {\n        int offset = coordsToOffset(texCoords, ").concat(r,", ").concat(o,");\n        ").concat(a.join(""),"\n      }\n      void toVec(int offset, out int c[").concat(e,"]) {\n        ").concat(a.join(""),"\n      }\n    ");return{toVec:new s.GlslLibRoutine(c,["coordinates.coordsToOffset"])}},e.prototype.valueFrom=function(){var t=this,e={};return this.context.programInfo.inputNames.forEach((function(n,r){var o=t.context.inputTextureLayouts[r],a=(o.unpackedShape.length>0?o.unpackedShape:o.shape).length,i="_".concat(n);e[i]=new s.GlslLibRoutine(t.getValueFromSingle(n,a,o.width,o.height,!1),["shapeUtils.indicesToOffset".concat(i),"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),e[i+="_T"]=new s.GlslLibRoutine(t.getValueFromSingle(n,a,o.width,o.height,!0),["shapeUtils.indicesToOffset".concat(i),"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])})),e},e.prototype.getValueFromSingle=function(t,e,n,r,o){var a="_".concat(t);o&&(a+="_T");var i=(0,u.getGlsl)(this.context.glContext.version);return"\n        float ".concat(a,"(int m[").concat(e,"]) {\n          int offset = indicesToOffset").concat(a,"(m);\n          vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(r,");\n          float value = getColorAsFloat(").concat(i.texture2D,"(").concat(t,", coords));\n          return value;\n        }\n        ")},e.prototype.getPackedValueFrom=function(t,e,n,r,o){var a="_".concat(t,"_Pack");o&&(a+="_T");var i=(0,u.getGlsl)(this.context.glContext.version);return"\n        vec4 ".concat(a,"(int m[").concat(e,"]) {\n          int offset = indicesToOffset_").concat(t,"(m);\n          vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(r,");\n          return ").concat(i.texture2D,"(").concat(t,", coords);\n        }\n        ")},e}(s.GlslLib);e.CoordsGlslLib=f},1997:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(n=e.FunctionType||(e.FunctionType={}))[n.ValueBased=0]="ValueBased",n[n.Positional=1]="Positional";e.GlslContext=function(t,e,n,r){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=n,this.outputTextureLayout=r};e.GlslLib=function(t){this.context=t};e.GlslLibRoutine=function(t,e){this.routineBody=t,this.dependencies=e};var r=function(){function t(t,e,n){this.name=t,this.dependencies=n||[],e&&(this.routineBody=e)}return t.prototype.addDependency=function(t){t&&this.dependencies.push(t)},t}();e.GlslLibRoutineNode=r;var o=function(){function t(){}return t.returnOrderedNodes=function(t){if(!t||0===t.length)return[];if(1===t.length)return t;var e=new Set,n=new Set,r=new Array;return this.createOrderedNodes(t,e,n,r),r},t.createOrderedNodes=function(t,e,n,r){for(var o=0;o<t.length;++o)this.dfsTraverse(t[o],e,n,r)},t.dfsTraverse=function(t,e,n,r){if(t&&!n.has(t.name)){if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);var o=t.dependencies;if(o&&o.length>0)for(var a=0;a<o.length;++a)this.dfsTraverse(o[a],e,n,r);r.push(t),n.add(t.name),e.delete(t.name)}},t}();e.TopologicalSortGlslRoutines=o},1371:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;var i=n(1997),c=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getFunctions=function(){return a(a({},this.encodeFloat32()),this.decodeFloat32())},e.prototype.getCustomTypes=function(){return{}},e.prototype.encodeFloat32=function(){return{encode:new i.GlslLibRoutine("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}},e.prototype.decodeFloat32=function(){return{decode:new i.GlslLibRoutine("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}},e.prototype.encodeUint8=function(){var t=e.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new i.GlslLibRoutine("\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        ".concat(t,"\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        "))}},e.prototype.decodeUint8=function(){var t=e.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new i.GlslLibRoutine("\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          ".concat(t,"\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        "))}},e.isLittleEndian=function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);if(e[0]=3735928559,239===n[0])return!0;if(222===n[0])return!1;throw new Error("unknown endianness")},e}(i.GlslLib);e.EncodingGlslLib=c},2691:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;var i=n(1997),c=n(6757),s=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getFunctions=function(){return a(a({},this.setFragColor()),this.getColorAsFloat())},e.prototype.getCustomTypes=function(){return{}},e.prototype.setFragColor=function(){var t=(0,c.getGlsl)(this.context.glContext.version);return{setFragColor:new i.GlslLibRoutine("\n        void setFragColor(float value) {\n            ".concat(t.output," = encode(value);\n        }\n        "),["encoding.encode"])}},e.prototype.getColorAsFloat=function(){return{getColorAsFloat:new i.GlslLibRoutine("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}},e}(i.GlslLib);e.FragColorGlslLib=s},3878:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;var n=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(t){for(var e,r={};null!==(e=n.exec(t));){var o=e[3].split(",").map((function(t){var e=t.trim().split(" ");return e&&2===e.length?{type:e[0],name:e[1]}:null})).filter((function(t){return null!==t}));r[e[2]]={params:o,body:e[4]}}for(var a in r)for(var i="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",a),c=new RegExp(i,"gm"),s=function(){var n=e[1],o=e[2],i=e[3].split(","),c=n?"".concat(n," ").concat(o,";"):"",s=r[a].body,u="";r[a].params.forEach((function(t,e){t&&(u+="".concat(t.type," ").concat(t.name," = ").concat(i[e],";\n"))})),s=(s="".concat(u,"\n ").concat(s)).replace("return","".concat(o," = "));var l="\n      ".concat(c,"\n      {\n        ").concat(s,"\n      }\n      ");t=t.replace(e[0],l)};null!==(e=c.exec(t));)s();return t=t.replace(n,"")}},8897:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;var o=n(1997),a=n(3878),i=n(1248),c=n(6757),s=function(){function t(t,e,n,r){var a=this;this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new o.GlslContext(t,e,n,r),Object.keys(i.glslRegistry).forEach((function(t){var e=new i.glslRegistry[t](a.context);a.libs[t]=e}));var c=this.glslLibRoutineDependencyGraph;for(var s in this.libs){var u=this.libs[s].getFunctions();for(var l in u){var p=s+"."+l,f=void 0;c[p]?(f=c[p]).routineBody=u[l].routineBody:(f=new o.GlslLibRoutineNode(p,u[l].routineBody),c[p]=f);var d=u[l].dependencies;if(d)for(var h=0;h<d.length;++h)if(c[d[h]])f.addDependency(c[d[h]]);else{var g=new o.GlslLibRoutineNode(d[h]);c[d[h]]=g,f.addDependency(g)}}}}return t.prototype.preprocess=function(){var t=this.context.programInfo,e=t.shaderSource;return this.context.programInfo.hasMain||(e="".concat(e,"\n      ").concat((0,c.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length))),e=(0,a.replaceInlines)(e),"".concat((0,c.getFragShaderPreamble)(this.context.glContext.version),"\n    ").concat(this.getUniforms(t.inputNames,t.variables),"\n    ").concat(this.getImports(e),"\n    ").concat(e)},t.prototype.getImports=function(t){var e=this.selectGlslLibRoutinesToBeIncluded(t);if(0===e.length)return"";for(var n="",r=0;r<e.length;++r){if(!e[r].routineBody)throw new Error("Missing body for the Glsl Library routine: ".concat(e[r].name));n+=e[r].routineBody+"\n"}return n},t.prototype.selectGlslLibRoutinesToBeIncluded=function(t){var e=this,n=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach((function(r){var o=r.split(".")[1];-1!==t.indexOf(o)&&n.push(e.glslLibRoutineDependencyGraph[r])})),o.TopologicalSortGlslRoutines.returnOrderedNodes(n)},t.prototype.getUniforms=function(t,e){var n,o,a,i,c=[];if(t)try{for(var s=r(t),u=s.next();!u.done;u=s.next()){var l=u.value;c.push("uniform sampler2D ".concat(l,";"))}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}if(e)try{for(var p=r(e),f=p.next();!f.done;f=p.next()){var d=f.value;c.push("uniform ".concat(d.type," ").concat(d.name).concat(d.arrayLength?"[".concat(d.arrayLength,"]"):"",";"))}}catch(t){a={error:t}}finally{try{f&&!f.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}return c.join("\n")},t}();e.GlslPreprocessor=s},1248:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;var r=n(6859),o=n(1371),a=n(2691),i=n(9183),c=n(9314);e.glslRegistry={encoding:o.EncodingGlslLib,fragcolor:a.FragColorGlslLib,vec:c.VecGlslLib,shapeUtils:i.ShapeUtilsGlslLib,coordinates:r.CoordsGlslLib}},9183:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;var i=n(1997),c=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getFunctions=function(){return a(a(a(a(a({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())},e.prototype.getCustomTypes=function(){return{}},e.prototype.bcastIndex=function(){var t=this,e=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var a=t.context.inputTextureLayouts[o].unpackedShape;if(a.length<=e){for(var c=a.length,s=e-c,u="bcastIndices_".concat(r),l="",p=0;p<c;++p)l+="\n          realIndices[".concat(p,"] = int( mod(float(bcastedIndices[").concat(s+p,"]), ").concat(a[p],".0) );\n          ");var f="\n        void ".concat(u," (int bcastedIndices[").concat(e,"], out int realIndices[").concat(c,"]) {\n          ").concat(l,"\n        }\n        ");n[u]=new i.GlslLibRoutine(f)}})),n},e.prototype.bcastMatmulIndex=function(){var t=this,e=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var a=t.context.inputTextureLayouts[o].shape;if(!(a.length<2||a.length>e)){for(var c=a.length,s=e-c,u="bcastMatmulIndices_".concat(r),l="",p=0;p<c-2;++p)l+="\n          realIndices[".concat(p,"] = int( mod(float(bcastedIndices[").concat(s+p,"]), ").concat(a[p],".0) );\n          ");var f="\n        void ".concat(u,"(int bcastedIndices[").concat(e,"], out int realIndices[").concat(c,"]) {\n          ").concat(l,"\n          realIndices[").concat(c-1,"] = bcastedIndices[").concat(e-1,"];\n          realIndices[").concat(c-2,"] = bcastedIndices[").concat(e-2,"];\n        }\n        ");n[u]=new i.GlslLibRoutine(f)}})),n},e.prototype.indicesToOffset=function(){var t=this,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var a=t.context.inputTextureLayouts[o].shape,c=t.context.inputTextureLayouts[o].strides,s=a.length,u="indicesToOffset_".concat(r);n[u]=new i.GlslLibRoutine(e.indexToOffsetSingle(u,s,c)),u="indicesToOffset_".concat(r,"_T"),n[u]=new i.GlslLibRoutine(e.indexToOffsetSingle(u,s,c.slice().reverse()))})),n},e.indexToOffsetSingle=function(t,e,n){for(var r="",o=e-1;o>=0;--o)r+="\n        offset += indices[".concat(o,"] * ").concat(n[o],";\n        ");return"\n      int ".concat(t,"(int indices[").concat(e,"]) {\n        int offset = 0;\n        ").concat(r,"\n        return offset;\n      }\n      ")},e.prototype.offsetToIndices=function(){var t=this,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var a=t.context.inputTextureLayouts[o].shape,c=t.context.inputTextureLayouts[o].strides,s=a.length,u="offsetToIndices_".concat(r);n[u]=new i.GlslLibRoutine(e.offsetToIndicesSingle(u,s,c)),u="offsetToIndices_".concat(r,"_T"),n[u]=new i.GlslLibRoutine(e.offsetToIndicesSingle(u,s,c.slice().reverse()))})),n},e.offsetToIndicesSingle=function(t,e,n){for(var r=[],o=0;o<e-1;++o)r.push("\n      indices[".concat(o,"] = offset / ").concat(n[o],";")),r.push("\n        offset -= indices[".concat(o,"] * ").concat(n[o],";"));return r.push("\n      indices[".concat(e-1,"] = offset;")),"\n      void ".concat(t,"(int offset, out int indices[").concat(e,"]) {\n        ").concat(r.join(""),"\n      }\n      ")},e.prototype.incrementIndices=function(){var t=this,e={};return this.context.programInfo.inputNames.forEach((function(n,r){for(var o=t.context.inputTextureLayouts[r].shape,a=o.length,c="incrementIndices_".concat(n),s="",u=0;u<a;++u)s+="\n        shape[".concat(u,"] = ").concat(o[u],";");var l="\n        void ".concat(c,"(int axis, out int indices[").concat(a,"]) {\n          int shape[").concat(a,"];\n          ").concat(s,";\n          for(int i = ").concat(a," -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        ");e[c]=new i.GlslLibRoutine(l)})),e},e}(i.GlslLib);e.ShapeUtilsGlslLib=c},6757:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;var n={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},r={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function o(t){return 1===t?n:r}e.getGlsl=o,e.getVertexShaderSource=function(t){var e=o(t);return"".concat(e.version,"\n      precision highp float;\n      ").concat(e.attribute," vec3 position;\n      ").concat(e.attribute," vec2 textureCoord;\n\n      ").concat(e.varyingVertex," vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }")},e.getFragShaderPreamble=function(t){var e=o(t);return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFrag," vec2 TexCoords;\n    ").concat(e.outputDeclaration,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    // Custom vector types to handle higher dimenalities.\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    ")},e.getDefaultFragShaderMain=function(t,e){var n=o(t);return"\n  void main() {\n    int indices[".concat(e,"];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    ").concat(n.output," = result;\n  }\n  ")}},9314:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;var i=n(1997),c=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getCustomTypes=function(){return{}},e.prototype.getFunctions=function(){return a(a(a(a({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())},e.prototype.binaryVecFunctions=function(){var t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},n={};for(var r in e){for(var o="".concat(r,"Vec"),a="",c=0;c<t;++c)a+="\n          dest[".concat(c,"] ").concat(e[r]," src[").concat(c,"];\n          ");var s="\n        void ".concat(o,"(int src[").concat(t,"], out int dest[").concat(t,"]) {\n          ").concat(a,"\n        }\n        ");n[o]=new i.GlslLibRoutine(s)}return n},e.prototype.copyVec=function(){for(var t=this.context.outputTextureLayout.shape.length,e="",n=0;n<t;++n)e+="\n        dest[".concat(n,"] = src[").concat(n,"];\n        ");var r="\n      void copyVec(int src[".concat(t,"], out int dest[").concat(t,"]) {\n        ").concat(e,"\n      }\n      ");return{copyVec:new i.GlslLibRoutine(r)}},e.prototype.setVecItem=function(){for(var t=this.context.outputTextureLayout.shape.length,e="\n        if(index < 0)\n            index =".concat(t," + index;\n        if (index == 0)\n            m[0] = value;\n        "),n=1;n<t-1;++n)e+="\n        else if (index == ".concat(n,")\n            m[").concat(n,"] = value;\n            ");e+="\n        else\n            m[".concat(t-1,"] = value;\n        ");var r="\n      void setVecItem(out int m[".concat(t,"], int index, int value) {\n        ").concat(e,"\n      }\n        ");return{setVecItem:new i.GlslLibRoutine(r)}},e.prototype.getVecItem=function(){for(var t=this.context.outputTextureLayout.shape.length,e="\n        if(index < 0)\n            index = ".concat(t," + index;\n        if (index == 0)\n            return m[0];\n      "),n=1;n<t-1;++n)e+="\n        else if (index == ".concat(n,")\n            return m[").concat(n,"];\n      ");e+="\n        else\n            return m[".concat(t-1,"];\n        ");var r="\n      int getVecItem(int m[".concat(t,"], int index) {\n        ").concat(e,"\n      }\n    ");return{getVecItem:new i.GlslLibRoutine(r)}},e}(i.GlslLib);e.VecGlslLib=c},7860:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;var i=n(1315),c=n(9240),s=n(7273),u=n(9),l=n(7379),p=n(2488),f=n(540),d=n(3314),h=n(5639),g=function(){function t(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}return t.prototype.calculateTextureWidthAndHeight=function(t,e){return(0,d.calculateTextureWidthAndHeight)(this.session.layoutStrategy,t,e)},t.prototype.executeProgram=function(t,e){if(e.length<t.inputNames.length)throw new Error("Input size mustn't be less than ".concat(t.inputNames.length,"."));if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");for(var n=[],r=0;r<t.inputNames.length;++r)n[r]=this.getOrCreateTextureData(e[r],t.inputTypes[r]);var o=function(t,e){var n=e.map((function(t){return"".concat(t.unpackedShape.join(","),";").concat(t.width,"x").concat(t.height)})).join("_"),r=t.name;return t.cacheHint&&(r+="["+t.cacheHint+"]"),r+":"+n}(t,n),a=this.session.programManager.getArtifact(o),i=a?a.programInfo:"function"==typeof t.get?t.get():t,c=(0,d.createTextureLayoutFromTextureType)(this.session.layoutStrategy,i.output.dims,i.output.textureType),s=this.createTextureData(c,i.output.type);return a||(a=this.session.programManager.build(i,n,s),this.session.programManager.setArtifact(o,a)),this.runProgram(a,n,s),s},t.prototype.run=function(t,e){return this.executeProgram(t,e).tensor},t.prototype.runProgram=function(t,e,n){for(var r=0;r<e.length;++r)if(!!e[r].isPacked!=(t.programInfo.inputTypes[r]===h.TextureType.packed))throw new Error("input[".concat(r,"] property packed inconsistent"));if(!!n.isPacked!=(t.programInfo.output.textureType===h.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(t,e,n)},t.prototype.getOrCreateTextureData=function(t,e){var n=this.getTextureData(t.dataId,e===h.TextureType.packed);if(!n&&(n=this.getTextureData(t.dataId,e!==h.TextureType.packed)))return e===h.TextureType.packed?this.pack(n):this.unpack(n);if(!n){var r=(0,d.createTextureLayoutFromTextureType)(this.session.layoutStrategy,t.dims,e);if(e===h.TextureType.packedLastDimension){var o=t.dims;if(4===o.length){var a=[o[0],Math.ceil(o[1]*o[2]*o[3]/4)],i=(0,d.createTextureLayoutFromTextureType)(this.session.layoutStrategy,a,e),c=t.numberData;if(o[1]*o[2]*o[3]%4!=0){var s=o[0],u=o[1]*o[2]*o[3],l=4*Math.ceil(1*u/4);c=new Float32Array(s*l);for(var p=0;p<s;++p){var f=p*u,g=p*l+p%1*u;c.set(t.numberData.subarray(f,f+u),g)}}return this.createTextureData(i,t.type,c,t,1)}}if(e===h.TextureType.packed){var y=(0,d.createTextureLayoutFromShape)(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),m=this.createTextureData(y,t.type,t.numberData,t,1);n=this.pack(m)}else n=this.createTextureData(r,t.type,t.numberData,t,1)}return n},t.prototype.createTextureDataFromLayoutBindTensor=function(t,e,n,r){return this.createTextureData(t,e,n,r,1)},t.prototype.createTextureData=function(t,e,n,r,o){i.Logger.verbose("InferenceHandler","Creating TextureData: layout:[".concat(JSON.stringify(t),"]"));var a=this.session.textureManager.createTextureFromLayout(e,t,n,o);return this.createTextureDataFromTexture(t,e,a,r)},t.prototype.reshapeUnpacked=function(t,e){var n=this.getOrCreateTextureData(t,h.TextureType.unpacked),r={channels:n.channels,height:n.height,width:n.width,shape:0!==e.length?e:[1],strides:s.ShapeUtil.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(r,t.type,n.texture).tensor},t.prototype.reshapePacked=function(t,e){var n=this.getOrCreateTextureData(t,h.TextureType.packed);if((0,l.isReshapeCheap)(t.dims,e)){var r={channels:n.channels,height:n.height,width:n.width,shape:0!==e.length?e:[1],strides:s.ShapeUtil.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(r,t.type,n.texture).tensor}var o=(0,l.processDims3D)(t.dims),a=(0,l.processDims3D)(e),i=this.reshapePacked(t,o),c=this.run((0,l.createPackedReshape3DProgramInfoLoader)(this,i,a),[i]);return this.reshapePacked(c,e)},t.prototype.cast=function(t,e){var n=this.getOrCreateTextureData(t,h.TextureType.unpacked);return this.createTextureDataFromTexture(n,e,n.texture).tensor},t.prototype.createTextureDataFromTexture=function(t,e,n,i,s){var u=this,l=r(r({},t),{tensor:i||new c.Tensor(t.unpackedShape,e,(function(t){return u.readTexture(l)}),(function(t){return o(u,void 0,void 0,(function(){return a(this,(function(t){return[2,this.readTextureAsync(l)]}))}))}),void 0,s),texture:n});return this.setTextureData(l.tensor.dataId,l,t.isPacked),l},t.prototype.getTextureData=function(t,e){return void 0===e&&(e=!1),this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)},t.prototype.setTextureData=function(t,e,n){void 0===n&&(n=!1),this.session.isInitializer(t)?this.session.setTextureData(t,e,n):(n?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)},t.prototype.isTextureLayoutCached=function(t,e){return void 0===e&&(e=!1),!!this.getTextureData(t.dataId,e)},t.prototype.dispose=function(){var t=this;this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((function(e){return t.session.textureManager.releaseTexture(e)})),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((function(e){return t.session.textureManager.releaseTexture(e)})),this.unpackedTextureDataCache=new Map},t.prototype.readTexture=function(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat((0,p.encodeAsUint8)(this,t))},t.prototype.readTextureAsync=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){return t.isPacked?[2,this.readTextureAsync(this.unpack(t))]:this.session.backend.glContext.isFloat32DownloadSupported?[2,this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels)]:[2,this.session.textureManager.readUint8TextureAsFloat((0,p.encodeAsUint8)(this,t))]}))}))},t.prototype.pack=function(t){return this.executeProgram((0,u.createPackProgramInfoLoader)(this,t.tensor),[t.tensor])},t.prototype.unpack=function(t){return this.executeProgram((0,f.createUnpackProgramInfoLoader)(this,t.tensor),[t.tensor])},t}();e.WebGLInferenceHandler=g},4110:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;var i=n(8817),c=a(n(5194)),s=n(4752),u=n(6668),l=n(9754),p=n(5042),f=n(6742),d=n(4125),h=n(6149),g=n(5378),y=n(6981),m=n(7413),v=n(7006),b=n(8276),w=n(5565),_=n(2834),x=n(1010),T=n(8126),S=n(2801),O=n(565),I=n(2444),A=n(815),P=n(564),E=n(5416),k=n(1240),D=n(5944),C=n(5707),R=a(n(9087)),M=n(7862),j=n(3980);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",R.abs],["Acos","","7+",R.acos],["Add","","7+",c.add],["And","","7+",c.and],["Asin","","7+",R.asin],["Atan","","7+",R.atan],["AveragePool","","7+",_.averagePool,_.parseAveragePoolAttributes],["BatchNormalization","","7+",i.batchNormalization,i.parseBatchNormalizationAttributes],["Cast","","6+",s.cast,s.parseCastAttributes],["Ceil","","6+",R.ceil],["Clip","","6-10",R.clip,R.parseClipAttributes],["Clip","","11+",R.clipV11],["Concat","","4+",u.concat,u.parseConcatAttributes],["Conv","","1+",l.conv,l.parseConvAttributes],["ConvTranspose","","1+",p.convTranspose,p.parseConvTransposeAttributes],["Cos","","7+",R.cos],["Div","","7+",c.div],["Dropout","","7+",R.identity],["DepthToSpace","","1+",f.depthToSpace,f.parseDepthToSpaceAttributes],["Equal","","7+",c.equal],["Elu","","6+",R.elu,R.parseEluAttributes],["Exp","","6+",R.exp],["Flatten","","1+",d.flatten,d.parseFlattenAttributes],["Floor","","6+",R.floor],["FusedConv","com.microsoft","1+",l.conv,l.parseConvAttributes],["Gather","","1+",h.gather,h.parseGatherAttributes],["Gemm","","7-10",g.gemm,g.parseGemmAttributesV7],["Gemm","","11+",g.gemm,g.parseGemmAttributesV11],["GlobalAveragePool","","1+",_.globalAveragePool,_.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",_.globalMaxPool],["Greater","","7+",c.greater],["Identity","","1+",R.identity],["ImageScaler","","1+",y.imageScaler,y.parseImageScalerAttributes],["InstanceNormalization","","6+",m.instanceNormalization,m.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",R.leakyRelu,R.parseLeakyReluAttributes],["Less","","7+",c.less],["LRN","","1+",v.lrn,v.parseLrnAttributes],["Log","","6+",R.log],["MatMul","","1+",b.matMul,b.parseMatMulAttributes],["MaxPool","","1+",_.maxPool,_.parseMaxPoolAttributes],["Mul","","7+",c.mul],["Neg","","6+",R.neg],["Not","","1+",R.not],["Or","","7+",c.or],["Pad","","2-10",w.padV2,w.parsePadAttributesV2],["Pad","","11+",w.padV11,w.parsePadAttributesV11],["Pow","","7+",c.pow],["PRelu","","7+",c.pRelu],["ReduceLogSum","","1+",x.reduceLogSum,x.parseReduceAttributes],["ReduceMax","","1+",x.reduceMax,x.parseReduceAttributes],["ReduceMean","","1+",x.reduceMean,x.parseReduceAttributes],["ReduceMin","","1+",x.reduceMin,x.parseReduceAttributes],["ReduceProd","","1+",x.reduceProd,x.parseReduceAttributes],["ReduceSum","","1-12",x.reduceSum,x.parseReduceAttributes],["ReduceSumSquare","","1+",x.reduceLogSumSquare,x.parseReduceAttributes],["Relu","","6+",R.relu],["Reshape","","5+",T.reshape],["Resize","","10",S.resize,S.parseResizeAttributesV10],["Resize","","11+",S.resize,S.parseResizeAttributesV11],["Shape","","1+",O.shape],["Sigmoid","","6+",R.sigmoid],["Sin","","7+",R.sin],["Slice","","10+",I.sliceV10],["Slice","","1-9",I.slice,I.parseSliceAttributes],["Softmax","","1-12",A.softmax,A.parseSoftmaxAttributes],["Softmax","","13+",A.softmaxV13,A.parseSoftmaxAttributesV13],["Split","","2-12",P.split,P.parseSplitAttributes],["Sqrt","","6+",R.sqrt],["Squeeze","","1-12",E.squeeze,E.parseSqueezeAttributes],["Squeeze","","13+",E.squeezeV13],["Sub","","7+",c.sub],["Sum","","6+",k.sum],["Tan","","7+",R.tan],["Tanh","","6+",R.tanh],["Tile","","6+",D.tile],["Transpose","","1+",C.transpose,C.parseTransposeAttributes],["Upsample","","7-8",j.upsample,j.parseUpsampleAttributesV7],["Upsample","","9",j.upsample,j.parseUpsampleAttributesV9],["Unsqueeze","","1-12",M.unsqueeze,M.parseUnsqueezeAttributes],["Unsqueeze","","13+",M.unsqueezeV13],["Xor","","7+",c.xor]]},8817:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;var a=n(4910),i=n(6757),c=n(5639),s={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[c.TextureType.unpacked,c.TextureType.unpacked,c.TextureType.unpacked,c.TextureType.unpacked,c.TextureType.unpacked]};e.batchNormalization=function(t,e,n){return l(e),[t.run(r(r({},s),{cacheHint:n.cacheKey,get:function(){return u(t,e,n)}}),e)]},e.parseBatchNormalizationAttributes=function(t){var e=t.attributes.getFloat("epsilon",1e-5),n=t.attributes.getFloat("momentum",.9),r=t.attributes.getInt("spatial",1);return(0,a.createAttributeWithCacheKey)({epsilon:e,momentum:n,spatial:r})};var u=function(t,e,n){var a=(0,i.getGlsl)(t.session.backend.glContext.version),u=e[0].dims.length,l=o(t.calculateTextureWidthAndHeight(e[1].dims,c.TextureType.unpacked),2),p=l[0],f=l[1],d="\n  float process(int[".concat(u,"] indices) {\n    vec2 position = offsetToCoords(indices[1], ").concat(p,", ").concat(f,");\n    float scale = getColorAsFloat(").concat(a.texture2D,"(Scale, position));\n    float mean = getColorAsFloat(").concat(a.texture2D,"(Mean, position));\n    float variance = getColorAsFloat(").concat(a.texture2D,"(Variance, position));\n    float b = getColorAsFloat(").concat(a.texture2D,"(B, position));\n\n    return scale * ( (_A(indices) - mean) / sqrt(variance + float(").concat(n.epsilon,")) ) + b;\n  }");return r(r({},s),{output:{dims:e[0].dims,type:e[0].type,textureType:c.TextureType.unpacked},shaderSource:d})},l=function(t){if(!t||5!==t.length)throw new Error("BatchNormalization requires 5 inputs.");var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4];if(e.dims.length<3||1!==n.dims.length||1!==r.dims.length||1!==o.dims.length||1!==a.dims.length)throw new Error("invalid input shape.");if(n.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1]||o.dims[0]!==e.dims[1]||a.dims[0]!==e.dims[1])throw new Error("invalid input shape.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==o.type&&"float64"!==o.type||"float32"!==a.type&&"float64"!==a.type)throw new Error("invalid input tensor types.")}},5194:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;var r=n(7273),o=n(1997),a=n(6757),i=n(5639);function c(){var t="add_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a + b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function s(){var t="div_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a / b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function u(){var t="mul_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a * b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function l(){var t="sub_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a - b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function p(){var t="equal_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float(a == b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4(equal(v1, v2));\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function f(){var t="greater_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float(a > b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function d(){var t="less_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float(a < b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function h(){var t="and_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function g(){var t="or_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function y(){var t="xor_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function m(){return function(t){var e="".concat(t,"_");return{body:"\n  float ".concat(e,"(float a, float b) {\n    return ").concat(t,"(a, b);\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return ").concat(t,"(v1, v2);\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}("pow")}function v(){var t="prelu_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}e.glslAdd=c,e.glslDiv=s,e.glslMul=u,e.glslSub=l,e.glslEqual=p,e.glslGreater=f,e.glslLess=d,e.glslAnd=h,e.glslOr=g,e.glslXor=y,e.glslPow=m,e.glslPRelu=v;var b=function(t,e,n,r,o){void 0===r&&(r=e[0].type);var a=t.session.pack?i.TextureType.packed:i.TextureType.unpacked;return{name:n.name,inputNames:["A","B"],inputTypes:[a,a],cacheHint:o,get:function(){return w(t,e,n,r)}}},w=function(t,e,n,o){void 0===o&&(o=e[0].type);var c=t.session.pack?i.TextureType.packed:i.TextureType.unpacked,s=!r.ShapeUtil.areEqual(e[0].dims,e[1].dims),u=e[0].dims,l=t.session.pack;if(s){var p=r.BroadcastUtil.calcShape(e[0].dims,e[1].dims,!1);if(!p)throw new Error("Can't perform binary op on the given tensors");var f=(u=p).length,d=0!==e[0].dims.length?e[0].dims.length:1,h=0!==e[1].dims.length?e[1].dims.length:1,g=0!==e[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",y=0!==e[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",m=(0,a.getGlsl)(t.session.backend.glContext.version),v=l?"\n      ".concat(n.body,"\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        vec4 result = ").concat(n.name,"(a, b);\n        ").concat(m.output," = result;\n      }"):"\n      ".concat(n.body,"\n      float process(int indices[").concat(f,"]) {\n        int aindices[").concat(d,"];\n        int bindices[").concat(h,"];\n        ").concat(g,"\n        ").concat(y,"\n        return ").concat(n.name,"(_A(aindices), _B(bindices));\n      }");return{name:n.name,inputNames:["A","B"],inputTypes:[c,c],output:{dims:u,type:o,textureType:c},shaderSource:v,hasMain:l}}var b=(0,a.getGlsl)(t.session.backend.glContext.version),w="\n    ".concat(n.body,"\n    void main() {\n      vec4 v1 = ").concat(b.texture2D,"(A, TexCoords);\n      vec4 v2 = ").concat(b.texture2D,"(B, TexCoords);\n      vec4 result = ").concat(n.name,"(v1, v2);\n      ").concat(b.output," = result;\n    }\n    ");return{name:n.name,inputNames:["A","B"],inputTypes:[c,c],output:{dims:e[0].dims,type:o,textureType:c},shaderSource:w,hasMain:!0}};e.add=function(t,e){return[t.run(b(t,e,c()),e)]},e.and=function(t,e){return[t.run(b(t,e,h(),"bool"),e)]},e.div=function(t,e){return[t.run(b(t,e,s()),e)]},e.equal=function(t,e){return[t.run(b(t,e,p(),"bool"),e)]},e.greater=function(t,e){return[t.run(b(t,e,f(),"bool"),e)]},e.less=function(t,e){return[t.run(b(t,e,d(),"bool"),e)]},e.mul=function(t,e){return[t.run(b(t,e,u()),e)]},e.or=function(t,e){return[t.run(b(t,e,g(),"bool"),e)]},e.pow=function(t,e){return[t.run(b(t,e,m()),e)]},e.pRelu=function(t,e){return[t.run(b(t,e,v()),e)]},e.sub=function(t,e){return[t.run(b(t,e,l()),e)]},e.xor=function(t,e){return[t.run(b(t,e,y(),"bool"),e)]}},4752:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;var r=n(7273);e.cast=function(t,e,n){return o(e),[t.cast(e[0],n)]},e.parseCastAttributes=function(t){return r.ProtoUtil.tensorDataTypeFromProto(t.attributes.getInt("to"))};var o=function(t){if(!t||1!==t.length)throw new Error("Cast requires 1 input.");if("string"===t[0].type)throw new Error("Invalid input type.")}},4595:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;var o=n(6757),a=n(5639),i=n(432),c=n(5614);e.createPackedConcatProgramInfoLoader=function(t,e,n){var u,l,p=(u=e.length,l=n.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:u},(function(t,e){return"X".concat(e)})),inputTypes:Array(u).fill(a.TextureType.packed),cacheHint:l});return r(r({},p),{get:function(){return function(t,e,n,u){var l=n[0].dims.slice();if(u>=l.length||u<-1*l.length)throw new Error("axis specified for concat doesn't match input dimensionality");u<0&&(u=l.length+u);for(var p=l.slice(0),f=1;f<n.length;f++)for(var d=n[f].dims.slice(),h=0;h<l.length;h++)if(h===u)p[u]+=d[h];else if(l[h]!==d[h])throw new Error("non concat dimensions must match");var g=p.length,y=(0,c.getChannels)("coords",g),m=(0,i.getCoordsDataType)(g),v=(0,c.unpackFromChannel)(),b=n.map((function(t){return t.dims})),w=(0,i.getGlChannels)(g),_=new Array(b.length-1);for(_[0]=b[0][u],f=1;f<_.length;f++)_[f]=_[f-1]+b[f][u];var x=w[u],T=w.slice(-2),S=w.join(),O="if (".concat(x," < ").concat(_[0],") {\n        return getChannel(\n            getX0(").concat(S,"), vec2(").concat(T.join(),"));\n        }");for(f=1;f<_.length;f++){var I=_[f-1];O+="\n            if (".concat(x," < ").concat(_[f],"  && ").concat(x," >= ").concat(_[f-1],") {\n              return getChannel(\n                getX").concat(f,"(").concat(s(w,x,I),"),\n                vec2(").concat(s(T,x,I),"));\n            }")}var A=_.length,P=_[_.length-1];O+="\n            return getChannel(\n              getX".concat(A,"(").concat(s(w,x,P),"),\n              vec2(").concat(s(T,x,P),"));");var E=(0,o.getGlsl)(t.session.backend.glContext.version),k="\n          ".concat(v,"\n          float getValue(").concat(w.map((function(t){return"int "+t})),") {\n            ").concat(O,"\n          }\n\n          void main() {\n            ").concat(m," coords = getOutputCoords();\n            int lastDim = coords.").concat(w[g-1],";\n            coords.").concat(w[g-1]," = coords.").concat(w[g-2],";\n            coords.").concat(w[g-2]," = lastDim;\n\n            vec4 result = vec4(getValue(").concat(y,"), 0., 0., 0.);\n\n            ").concat(y[g-1]," = ").concat(y[g-1]," + 1;\n            if (").concat(y[g-1]," < ").concat(p[g-1],") {\n              result.g = getValue(").concat(y,");\n            }\n\n            ").concat(y[g-2]," = ").concat(y[g-2]," + 1;\n            if (").concat(y[g-2]," < ").concat(p[g-2],") {\n              result.a = getValue(").concat(y,");\n            }\n\n            ").concat(y[g-1]," = ").concat(y[g-1]," - 1;\n            if (").concat(y[g-2]," < ").concat(p[g-2]," &&\n                ").concat(y[g-1]," < ").concat(p[g-1],") {\n              result.b = getValue(").concat(y,");\n            }\n            ").concat(E.output," = result;\n          }\n        ");return r(r({},e),{output:{dims:p,type:n[0].type,textureType:a.TextureType.packed},shaderSource:k,hasMain:!0})}(t,p,e,n.axis)}})};var s=function(t,e,n){var r=t.indexOf(e);return t.map((function(t,e){return e===r?"".concat(t," - ").concat(n):t})).join()}},6668:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;var a=n(4910),i=n(5639),c=n(4595);e.concat=function(t,e,n){return d(e),t.session.pack&&e[0].dims.length>1?[t.run((0,c.createPackedConcatProgramInfoLoader)(t,e,n),e)]:[t.run(s(t,e,n),e)]};var s=function(t,e,n){var o,a,c=(o=e.length,a=n.cacheKey,{name:"Concat",inputNames:Array.from({length:o},(function(t,e){return"X".concat(e)})),inputTypes:Array(o).fill(i.TextureType.unpacked),cacheHint:a});return r(r({},c),{get:function(){return function(t,e,n,o){var a=n[0].dims.slice();if(o>=a.length||o<-1*a.length)throw new Error("axis specified for concat doesn't match input dimensionality");o<0&&(o=a.length+o);for(var c=a.slice(0),s=1;s<n.length;s++)for(var d=n[s].dims.slice(),h=0;h<a.length;h++)if(h===o)c[o]+=d[h];else if(a[h]!==d[h])throw new Error("non concat dimensions must match");var g=c.length,y=new Array(n.length),m=0;for(s=0;s<y.length;++s)m+=n[s].dims[o],y[s]=m;var v;v=n.length<5?u(y):l(y);var b=p(n.length,g),w=f(y),_="\n        ".concat(b,"\n        ").concat(w,"\n        ").concat(v,"\n        float process(int indices[").concat(g,"]) {\n          int textureIndex = getTextureWhereDataResides (indices[").concat(o,"]);\n\n          if(textureIndex != 0) {\n            indices[").concat(o,"] = indices[").concat(o,"] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));\n          }\n\n          return fetchDataFromCorrectTexture(textureIndex, indices);\n        }");return r(r({},e),{output:{dims:c,type:n[0].type,textureType:i.TextureType.unpacked},shaderSource:_})}(0,c,e,n.axis)}})},u=function(t){var e=t.map((function(t,e){return"if(index<".concat(t,") {return ").concat(e,";}\n")}));return"int getTextureWhereDataResides(int index) {\n      ".concat(e.join(""),"\n    }")},l=function(t){return u(t)},p=function(t,e){for(var n=["float fetchDataFromCorrectTexture(int textureIndex, int indices[".concat(e,"]) {")],r=0;r<t;++r)0===r?n.push("\t"+"if (textureIndex == ".concat(r,") { return _X").concat(r,"(indices); }")):r===t-1?n.push("\t"+"else { return _X".concat(r,"(indices); }")):n.push("\t"+"else if (textureIndex == ".concat(r,") { return _X").concat(r,"(indices); }"));return n.push("\t}"),n.join("\n")},f=function(t){for(var e=["int getSizeInConcatAxisValueFromIndex(int index) {"],n=0;n<t.length;++n)0===n?e.push("\t"+"if (index == ".concat(n,") { return ").concat(t[n],"; }")):n===t.length-1?e.push("\t"+"else { return ".concat(t[n],"; }")):e.push("\t"+"else if (index == ".concat(n,") { return ").concat(t[n],"; }"));return e.push("\t}"),e.join("\n")};e.parseConcatAttributes=function(t){return(0,a.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis")})};var d=function(t){var e,n;if(!t||t.length<1)throw new Error("too few inputs");var r=t[0].type,a=t[0].dims.length;if("string"===r)throw new Error("string tensor is not supported yet");try{for(var i=o(t),c=i.next();!c.done;c=i.next()){var s=c.value;if(s.type!==r)throw new Error("input tensors should be one type");if(s.dims.length!==a)throw new Error("input tensors should have the same shape")}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},7825:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;var o=n(1315),a=n(6757),i=n(5639),c=n(9754),s=n(2150);e.createUnpackedGroupedConvProgramInfoLoader=function(t,e,n){var u,l,p=(u=e.length>2,l=n.cacheKey,{name:"GroupedConv",inputNames:u?["X","W","Bias"]:["X","W"],inputTypes:u?[i.TextureType.unpacked,i.TextureType.unpacked,i.TextureType.unpacked]:[i.TextureType.unpacked,i.TextureType.unpacked],cacheHint:l});return r(r({},p),{get:function(){return function(t,e,n,u){var l=e.length>2?"value += getBias(output_channel);":"",p=e[0].dims.slice(),f=e[1].dims.slice(),d=f[0]/u.group;o.Logger.verbose("GroupedConv","autpPad:".concat(u.autoPad,", dilations:").concat(u.dilations,", group:").concat(u.group,", kernelShape:").concat(u.kernelShape,", pads:").concat(u.pads,", strides:").concat(u.strides));var h=(0,c.calculateOutputShape)(p,f,u.dilations,u.pads,u.strides),g=(0,a.getGlsl)(t.session.backend.glContext.version),y=(0,s.getActivationSnippet)(u),m=y.activationFunction,v=y.applyActivation,b="\n  const ivec2 strides = ivec2(".concat(u.strides[0],", ").concat(u.strides[1],");\n  const ivec2 pads = ivec2(").concat(u.pads[0],", ").concat(u.pads[1],");\n  ").concat(m,"\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n    ivec2 xRCCorner = coords.zw * strides - pads;\n    int group_id = output_channel / ").concat(d,";\n\n    float value = 0.0;\n    for (int wInChannel = 0; wInChannel < ").concat(f[1],"; wInChannel++) {\n      int input_channel = group_id * ").concat(f[1]," + wInChannel;\n      for (int wHeight = 0; wHeight < ").concat(f[2],"; wHeight++) {\n        int xHeight = xRCCorner.x + wHeight * ").concat(u.dilations[0],";\n\n        if (xHeight < 0 || xHeight >= ").concat(p[2],") {\n          continue;\n        }\n\n        for (int wWidth = 0; wWidth < ").concat(f[3],"; wWidth++) {\n          int xWidth = xRCCorner.y + wWidth * ").concat(u.dilations[1],";\n          if (xWidth < 0 || xWidth >= ").concat(p[3],") {\n            continue;\n          }\n\n          float xVal = getX(batch, input_channel, xWidth, xHeight);\n          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);\n          value += xVal*wVal;\n        }\n      }\n    }\n    ").concat(l,"\n    ").concat(v,"\n    ").concat(g.output," = vec4(value, .0, .0, .0);\n  }\n");return r(r({},n),{output:{dims:h,type:e[0].type,textureType:i.TextureType.unpacked},shaderSource:b,hasMain:!0})}(t,e,p,n)}})}},7708:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;var r=n(9754),o=n(5950),a=n(5632);e.conv2DPackedPointwise=function(t,e,n){var o=e[0].dims,i=e[1].dims,c=(0,r.calculateOutputShape)(o,i,n.dilations,n.pads,n.strides),s=t.reshapePacked(e[0],[o[1],o[2]*o[3]]),u=t.reshapePacked(e[1],[i[0],i[1]]),l=e.length>2?[u,s,e[2]]:[u,s],p=t.run((0,a.createPackedMatmulProgramInfoLoader)(t,l,n),l);return t.reshapePacked(p,c)},e.conv2DPacked=function(t,e,n){var i=e[0].dims,c=e[1].dims,s=(0,r.calculateOutputShape)(i,c,n.dilations,n.pads,n.strides),u=t.run((0,o.createPackedIm2ColProgramInfoLoader)(t,e[0],e[1],s,n),[e[0]]),l=t.reshapePacked(e[1],[c[0],c[1]*c[2]*c[3]]),p=3===e.length?[l,u,e[2]]:[l,u],f=t.run((0,a.createPackedMatmulProgramInfoLoader)(t,p,n),p);return t.reshapePacked(f,s)}},5042:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;var i=n(4910),c=n(6757),s=n(5639),u=n(2150),l=function(t,e,n,r,o,a){return(t-1)*e+n+(r-1)*o+1-a},p=function(t,e,n,r,o){var a=Math.floor(t/2);"SAME_UPPER"===e?(n[r]=a,n[o]=t-a):"SAME_LOWER"===e&&(n[r]=t-a,n[o]=a)};e.convTranspose=function(t,e,n){return g(e,n),f(t,e,n)};var f=function(t,e,n){var r=h(n,e);return[d(t,e,r)]},d=function(t,e,n){return t.run(function(t,e,n){var i,l,p=(i=e.length>2,l=n.cacheKey,{name:"ConvTranspose",inputNames:i?["X","W","B"]:["X","W"],inputTypes:i?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],cacheHint:l});return r(r({},p),{get:function(){return function(t,e,n,i){var l=e.length>2?"getB(output_channel)":"0.0",p=e[0].dims,f=e[1].dims,d=f[1],h=f[0]/i.group,g=a([e[0].dims[0],e[1].dims[1]*i.group],o(i.outputShape),!1),y=(0,c.getGlsl)(t.session.backend.glContext.version),m=(0,u.getActivationSnippet)(i),v=m.activationFunction,b=m.applyActivation,w="\n  const ivec2 strides = ivec2(".concat(i.strides[0],", ").concat(i.strides[1],");\n  const ivec2 pads = ivec2(").concat(i.pads[0],", ").concat(i.pads[1],");\n  ").concat(v,"\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n\n    ivec2 loc = coords.zw + pads;\n\n    int group_id = output_channel / ").concat(d,";\n    int wOutChannel = output_channel - group_id * ").concat(d,";\n\n    float value = ").concat(l,";\n    for (int inChannelOffset = 0; inChannelOffset < ").concat(h,"; inChannelOffset++) {\n      int input_channel = group_id * ").concat(h," + inChannelOffset;\n      for (int wWOff = 0; wWOff < ").concat(f[2],"; wWOff++) {\n        for (int wHOff = 0; wHOff < ").concat(f[3],"; wHOff++) {\n          ivec2 wOff = ivec2(wWOff * ").concat(i.dilations[0],", wHOff * ").concat(i.dilations[1],");\n          ivec2 wLoc = loc - wOff;\n          ivec2 wLocIn = wLoc / strides;\n          if (\n            wLocIn * strides == wLoc &&\n            wLocIn.x >= 0 && wLocIn.x < ").concat(p[2]," &&\n            wLocIn.y >= 0 && wLocIn.y < ").concat(p[3],"\n          ) {\n            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);\n            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);\n            value += xVal * wVal;\n          }\n        }\n      }\n    }\n    ").concat(b,"\n    ").concat(y.output," = vec4(value, .0, .0, .0);\n  }\n");return r(r({},n),{output:{dims:g,type:e[0].type,textureType:s.TextureType.unpacked},shaderSource:w,hasMain:!0})}(t,e,p,n)}})}(t,e,n),e)},h=function(t,e){var n=t.kernelShape.slice();if(0===t.kernelShape.length)for(var r=2;r<e[1].dims.length;++r)n.push(e[1].dims[r]);var o=t.pads.slice(),a=t.outputShape.slice();!function(t,e,n,r,o,a,i,c){for(var s=t.length-2,u=0===c.length,f=0;f<s;++f){var d=u?t[f+2]*a[f]:c[f],h=l(t[f+2],a[f],o[f],e[f],n[f],d);p(h,r,o,f,f+s),u&&c.push(a[f]*(t[f+2]-1)+i[f]+(e[f]-1)*n[f]+1-o[f]-o[f+s])}}(e[0].dims,n,t.dilations,t.autoPad,o,t.strides,t.outputPadding,a);var i=Object.assign({},t);return Object.assign(i,{kernelShape:n,pads:o,outputShape:a,cacheKey:t.cacheKey}),i};e.parseConvTransposeAttributes=function(t){var e=t.attributes,n=(0,u.parseInternalActivationAttributes)(e),o=e.getString("auto_pad","NOTSET"),a=e.getInts("dilations",[1,1]),c=e.getInt("group",1),s=e.getInts("kernel_shape",[]),l=e.getInts("output_padding",[0,0]),p=e.getInts("output_shape",[]),f=e.getInts("pads",[0,0,0,0]),d=e.getInts("strides",[1,1]);return(0,i.createAttributeWithCacheKey)(r({autoPad:o,dilations:a,group:c,kernelShape:s,outputPadding:l,outputShape:p,pads:f,strides:d},n))};var g=function(t,e){if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");var n=t[1].dims[1]*e.group;if(3===t.length&&(1!==t[2].dims.length||t[2].dims[0]!==n))throw new Error("invalid bias");var r=t[0].dims.length-2;if(e.dilations.length!==r)throw new Error("dilations should be ".concat(r,"D"));if(e.strides.length!==r)throw new Error("strides should be ".concat(r,"D"));if(e.pads.length!==2*r)throw new Error("pads should be ".concat(2*r,"D"));if(e.outputPadding.length!==r)throw new Error("output_padding should be ".concat(r,"D"));if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==e.outputShape.length&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw new Error("ConvTranspose input(bias) should be float tensor")}},9754:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;var i=n(4910),c=n(7273),s=n(7825),u=n(7708),l=n(3281),p=n(2150),f=n(1625),d=n(8276);e.calculateOutputShape=function(t,e,n,r,i){var c,s=t[0],u=t.slice(2),l=u.length,p=e[0],f=e.slice(2).map((function(t,e){return t+(t-1)*(n[e]-1)})),d=u.map((function(t,e){return t+r[e]+r[e+l]})).map((function(t,e){return Math.floor((t-f[e]+i[e])/i[e])}));return(c=[s,p]).concat.apply(c,a([],o(d),!1))},e.conv=function(t,e,n){return v(e,n),h(t,e,n)};var h=function(t,e,n){var r=m(n,e),o=t.session.pack,a=1===r.kernelShape[0]&&1===r.kernelShape[1];return r.group>1?[t.run((0,s.createUnpackedGroupedConvProgramInfoLoader)(t,e,r),e)]:a&&o?[g(t,e,r)]:o&&4===e[0].dims.length&&1===e[0].dims[0]&&!a?[(0,u.conv2DPacked)(t,e,r)]:[y(t,e,r)]},g=function(t,n,r){var o=n[0].dims,a=n[1].dims,i=(0,e.calculateOutputShape)(o,a,r.dilations,r.pads,r.strides),c=t.reshapeUnpacked(n[0],[o[1],o[2]*o[3]]),s=t.reshapeUnpacked(n[1],[a[0],a[1]]),u=n.length>2?[s,c,n[2]]:[s,c],l=t.run((0,d.createMatmulProgramInfoLoader)(u,r),u);return t.reshapeUnpacked(l,i)},y=function(t,n,r){var o=n[0].dims,a=n[1].dims,i=(0,e.calculateOutputShape)(o,a,r.dilations,r.pads,r.strides),c=t.run((0,f.createIm2ColProgramInfoLoader)(t,n[0],n[1],i,r),[n[0]]),s=3===n.length?[c,n[1],n[2]]:[c,n[1]];return t.run((0,l.createDotProductProgramInfoLoader)(t,n,i,r),s)},m=function(t,e){var n=t.kernelShape.slice();if(0===t.kernelShape.length)for(var r=2;r<e[1].dims.length;++r)n.push(e[1].dims[r]);var o=t.pads.slice();c.PoolConvUtil.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,n,o,t.autoPad);var a=Object.assign({},t);return Object.assign(a,{kernelShape:n,pads:o,cacheKey:t.cacheKey}),a};e.parseConvAttributes=function(t){var e=t.attributes,n=(0,p.parseInternalActivationAttributes)(e),o=e.getString("auto_pad","NOTSET"),a=e.getInts("dilations",[1,1]),c=e.getInt("group",1),s=e.getInts("kernel_shape",[]),u=e.getInts("pads",[0,0,0,0]),l=e.getInts("strides",[1,1]);return(0,i.createAttributeWithCacheKey)(r({autoPad:o,dilations:a,group:c,kernelShape:s,pads:u,strides:l},n))};var v=function(t,e){if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[1]*e.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===t.length&&(1!==t[2].dims.length||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");var n=t[0].dims.length-2;if(e.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(e.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(e.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw new Error("Conv input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw new Error("Conv input(bias) should be float tensor")}},6742:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;var o=n(5707);e.depthToSpace=function(t,e,n){a(e);var i=n.blocksize,c=i*i,s="DCR"===n.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],u="DCR"===n.mode?[e[0].dims[0],i,i,e[0].dims[1]/c,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/c,i,i,e[0].dims[2],e[0].dims[3]],l=t.reshapeUnpacked(e[0],u),p={perm:s,cacheKey:"".concat(s)},f=r((0,o.transpose)(t,[l],p),1)[0],d=[e[0].dims[0],e[0].dims[1]/c,e[0].dims[2]*i,e[0].dims[3]*i];return[t.reshapeUnpacked(f,d)]},e.parseDepthToSpaceAttributes=function(t){var e=t.attributes.getInt("blocksize");if(e<1)throw new Error("blocksize must be >= 1, but got : ".concat(e," for DepthToSpace"));var n=t.attributes.getString("mode","DCR");if("DCR"!==n&&"CRD"!==n)throw new Error("unrecognized mode: ".concat(n," for DepthToSpace"));return{mode:n,blocksize:e}};var a=function(t){if(1!==t.length)throw new Error("DepthToSpace expect 1 inputs, but got ".concat(t.length));if("string"===t[0].type||4!==t[0].dims.length)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},3281:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;var a=n(7273),i=n(6757),c=n(5639),s=n(2150),u=n(1625);e.createDotProductProgramInfoLoader=function(t,e,n,l){var p=function(t,e){return{name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[c.TextureType.unpacked,c.TextureType.packedLastDimension,c.TextureType.unpacked]:[c.TextureType.unpacked,c.TextureType.packedLastDimension],cacheKey:e.activationCacheKey}}(e.length>2,l);return r(r({},p),{get:function(){return function(t,e,n,l,p){var f=n[0].dims,d=n[1].dims,h=[d[0],Math.ceil(f[1]*d[2]*d[3]/4)],g=(0,u.calculateIm2ColDims)(f,d,l),y=o(t.calculateTextureWidthAndHeight(h,c.TextureType.packedLastDimension),2),m=y[0],v=y[1],b=a.ShapeUtil.computeStrides(g),w=o(t.calculateTextureWidthAndHeight(g,c.TextureType.packedLastDimension),2),_=w[0],x=w[1],T=l.length,S=n.length<3?"0.0":"_B(b)",O=Math.ceil(f[1]*d[2]*d[3]/4),I=(0,s.getActivationSnippet)(p),A=I.activationFunction,P=I.applyActivation,E=(0,i.getGlsl)(t.session.backend.glContext.version),k="\n".concat(A,"\nfloat process(int indices[").concat(T,"]) {\n  int b[1];\n  b[0] = indices[1];\n  int im2col[4];\n  im2col[0] = indices[0];\n  im2col[1] = indices[2];\n  im2col[2] = indices[3];\n  int im2colOffset = im2col[0] * ").concat(b[0]," + im2col[1] * ").concat(b[1]," + im2col[2] * ").concat(b[2],";\n  int kernelOffset = indices[1] * ").concat(h[1],";\n  float value = ").concat(S,";\n  for (int i = 0; i < ").concat(O,"; ++i) {\n    vec2 im2colCoords = offsetToCoords(im2colOffset, ").concat(_,", ").concat(x,");\n    vec2 kernelCoords = offsetToCoords(kernelOffset, ").concat(m,", ").concat(v,");\n    value += dot(").concat(E.texture2D,"(Im2Col, im2colCoords), ").concat(E.texture2D,"(K, kernelCoords));\n    ++im2colOffset;\n    ++kernelOffset;\n  }\n  ").concat(P,"\n  return value;\n}");return r(r({},e),{output:{dims:l,type:n[0].type,textureType:c.TextureType.unpacked},shaderSource:k})}(t,p,e,n,l)}})}},4125:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;var r=n(7273);e.flatten=function(t,e,n){o(e,n);var a=r.ShapeUtil.flattenShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],a)]},e.parseFlattenAttributes=function(t){return t.attributes.getInt("axis",1)};var o=function(t,e){if(!t||1!==t.length)throw new Error("Flatten requires 1 input.");var n=t[0].dims.length;if(0===n)throw new Error("scalar tensor is not supported.");if(e<-n||e>n)throw new Error("Invalid axis");if("string"===t[0].type)throw new Error("string tensor is not supported.")}},2150:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;var o=n(7273),a=n(9087);e.getActivationSnippet=function(t){var e;switch(t.activation){case"Relu":e=(0,a.glslRelu)();break;case"Sigmoid":e=(0,a.glslSigmoid)();break;case"Clip":e=(0,a.glslClip)(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}var n=e.name;return{activationFunction:e.body,applyActivation:"value = ".concat(n,"_(value);")}},e.parseInternalActivationAttributes=function(t){var e=t.getString("activation","");if("Clip"===e){var n=r(t.getFloats("activation_params",[o.MIN_CLIP,o.MAX_CLIP]),2),a=n[0],i=n[1];return{activation:e,clipMax:i,clipMin:a,activationCacheKey:"".concat(e,":").concat(a,",").concat(i)}}return{activation:e,activationCacheKey:e}}},6149:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;var o=n(4910),a=n(6145),i=n(7273),c=n(5639);e.gather=function(t,e,n){return l(e,n.axis),[t.run(u(t,e,n),e)]},e.parseGatherAttributes=function(t){return(0,o.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",0)})};var s={name:"Gather",inputNames:["A","B"],inputTypes:[c.TextureType.unpacked,c.TextureType.unpacked]},u=function(t,e,n){var o=r(r({},s),{cacheHint:n.cacheKey});return r(r({},o),{get:function(){return function(t,e,n,o){var a=n[0].dims.slice(),s=n[1].dims.slice(),u=new Array(a.length+s.length-1);o=i.ShapeUtil.normalizeAxis(o,a.length);for(var l=[],p=0;p<u.length;p++)p<o?(u[p]=a[p],l.push("inputIdx[".concat(p,"] = outputIdx[").concat(p,"];"))):p<o+s.length?(u[p]=s[p-o],l.push("indexDataIdx[".concat(p-o,"] = outputIdx[").concat(p,"];"))):(u[p]=a[p-s.length+1],l.push("inputIdx[".concat(p-s.length+1,"] = outputIdx[").concat(p,"];")));var f=u.length||1,d=a.length,h=s.length||1,g="\n      float process(int outputIdx[".concat(f,"]) {\n        int inputIdx[").concat(d,"];\n        int indexDataIdx[").concat(h,"];\n        indexDataIdx[0] = 0;\n        ").concat(l.join("\n        "),"\n        int idx = int(_B(indexDataIdx));\n        inputIdx[").concat(o,"] = idx < 0 ? idx + ").concat(a[o]," : idx;\n        return _A(inputIdx);\n      }");return r(r({},e),{output:{dims:u,type:n[0].type,textureType:c.TextureType.unpacked},shaderSource:g})}(0,o,e,n.axis)}})},l=function(t,e){if(!t||2!==t.length)throw new Error("Gather requires 2 inputs.");var n=t[0].dims.length;if(n<1)throw new Error("Invalid input shape.");if(e<-n||e>n-1)throw new Error("Invalid axis.");if(-1===a.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invaid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw new Error("Invaid input type.")}},5378:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;var a=n(4910),i=n(7273),c=n(5639);e.gemm=function(t,e,n){return p(e,n),[t.run(u(e,n),e)]};var s=function(t,e){var n=0!==t.attributes.getInt("transA",0),r=0!==t.attributes.getInt("transB",0),o=t.attributes.getFloat("alpha",1),i=t.attributes.getFloat("beta",1);return(0,a.createAttributeWithCacheKey)({transA:n,transB:r,alpha:o,beta:i,isOptionalC:e})};e.parseGemmAttributesV7=function(t){return s(t,!1)},e.parseGemmAttributesV11=function(t){return s(t,!0)};var u=function(t,e){var n={name:"Gemm",inputNames:3===t.length?["A","B","C"]:["A","B"],inputTypes:3===t.length?[c.TextureType.unpacked,c.TextureType.unpacked,c.TextureType.unpacked]:[c.TextureType.unpacked,c.TextureType.unpacked],key:e.cacheKey};return r(r({},n),{get:function(){return l(n,t,e)}})},l=function(t,e,n){var a=e[0].dims.slice(),s=e[1].dims.slice(),u=o(i.GemmUtil.getShapeOfGemmResult(a,n.transA,s,n.transB,3===e.length?e[2].dims:void 0),2),l=[u[0],u[1]];if(!l)throw new Error("Can't use gemm on the given tensors");var p=a[a.length-1],f="";n.transA&&(p=a[0]),n.transA&&n.transB?f="value += _A_T(a) * _B_T(b);":n.transA&&!n.transB?f="value += _A_T(a) * _B(b);":!n.transA&&n.transB?f="value += _A(a) * _B_T(b);":n.transA||n.transB||(f="value += _A(a) * _B(b);");var d=l.length,h=3===e.length?"int c[".concat(e[2].dims.length,"];"):"",g=3===e.length?"bcastIndices_C(indices, c);":"",y=3===e.length?"value += beta * _C(c);":"",m="\n      float process(int indices[".concat(d,"]) {\n          int a[").concat(d,"];\n          int b[").concat(d,"];\n          ").concat(h,"\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          ").concat(g,"\n\n          float value = 0.0;\n          for (int k=0; k<").concat(p,"; ++k) {\n              a[").concat(d-1,"] = k;\n              b[").concat(d-2,"] = k;\n              ").concat(f,"\n          }\n\n          value = value * alpha;\n          ").concat(y,"\n          return value;\n      }");return r(r({},t),{output:{dims:l,type:e[0].type,textureType:c.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:n.alpha},{name:"beta",type:"float",data:n.beta}],shaderSource:m})},p=function(t,e){if(!t)throw new Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw new Error("Invaid input shape.");if(!e.isOptionalC&&3!==t.length)throw new Error("Gemm requires 3 inputs");if(3===t.length&&1!==t[2].dims.length&&2!==t[2].dims.length)throw new Error("Invalid input shape of C");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type||3===t.length&&"float32"!==t[2].type&&"float64"!==t[2].type)throw new Error("Invalid input type.");if(t[0].type!==t[1].type||3===t.length&&t[0].type!==t[2].type)throw new Error("Input types are mismatched")}},5950:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;var o=n(6757),a=n(5639),i=n(5614);e.createPackedIm2ColProgramInfoLoader=function(t,e,n,c,s){var u,l=(u=s.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[a.TextureType.packed],cacheHint:u});return r(r({},l),{get:function(){return function(t,e,n,c,s,u){for(var l=n.dims,p=c.dims,f=s.length,d=[p[1]*p[2]*p[3],s[2]*s[3]],h=p[2]*p[3],g=(0,i.unpackFromChannel)(),y=(0,o.getGlsl)(t.session.backend.glContext.version),m="",v=0;v<=1;v++)for(var b=0;b<=1;b++)m+="\n            blockIndex = rc.x + ".concat(b,";\n            pos = rc.y + ").concat(v,";\n\n            if(blockIndex < ").concat(d[1]," && pos < ").concat(d[0],") {\n              offsetY = int(blockIndex / (").concat(s[f-1],")) * ").concat(u.strides[0]," -\n                ").concat(u.pads[0],";\n              d0 = offsetY + ").concat(u.dilations[0]," * (imod(pos, ").concat(h,") / ").concat(p[2],");\n\n              if(d0 < ").concat(l[2]," && d0 >= 0) {\n                offsetX = imod(blockIndex, ").concat(s[f-1],") * ").concat(u.strides[1]," -\n                  ").concat(u.pads[1],";\n                d1 = offsetX + ").concat(u.dilations[1]," * imod(imod(pos, ").concat(h,"), ").concat(p[2],");\n\n                if(d1 < ").concat(l[3]," && d1 >= 0) {\n\n                  ch = int(float(pos)/ ").concat(h,".);\n                    innerDims = vec2(d0, d1);\n                    result[").concat(2*v+b,"] = getChannel(\n                      getA(0, ch, int(innerDims.x),\n                      int(innerDims.y)), innerDims);\n                }\n              }\n            }\n\n          ");var w="\n      ".concat(g,"\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n          vec4 result = vec4(0.0);\n          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n          vec2 innerDims;\n          ").concat(m,"\n          ").concat(y.output," = result;\n      }\n            ");return r(r({},e),{output:{dims:d,type:n.type,textureType:a.TextureType.packed},shaderSource:w,hasMain:!0})}(t,l,e,n,c,s)}})}},1625:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;var o=n(5639);e.createIm2ColProgramInfoLoader=function(t,n,a,i,c){var s,u=(s=c.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[o.TextureType.unpacked],cacheHint:s});return r(r({},u),{get:function(){return function(t,n,a,i,c,s){var u=a.dims,l=i.dims,p=c.length,f=(0,e.calculateIm2ColDims)(u,l,c,4),d="\n        const int XC = ".concat(u[1],";\n        const int XH = ").concat(u[2],";\n        const int XW = ").concat(u[3],";\n        const int KH = ").concat(s.kernelShape[0],";\n        const int KW = ").concat(s.kernelShape[1],";\n        const int dilationH = ").concat(s.dilations[0],";\n        const int dilationW = ").concat(s.dilations[1],";\n        const int strideH = ").concat(s.strides[0],";\n        const int strideW = ").concat(s.strides[1],";\n        const int padH = ").concat(s.pads[0],";\n        const int padW = ").concat(s.pads[1],";\n        const int KHKW = KH*KW;\n        const int XCKHKW = XC * KHKW;\n        const int outputChannels = 4;\n        vec4 process(int indices[").concat(p,"]) {\n          int b  = indices[0]; // batch size\n          int oh = indices[1] * strideH - padH; //output height\n          int ow = indices[2] * strideW - padW; //output width\n          int p = indices[3] * outputChannels; //patch\n          vec4 value = vec4(0.0);\n          for(int i=0; i < outputChannels; ++i) {\n            if(p < XCKHKW) {\n              int patchC = p / KHKW;\n              int patchH = (p - patchC*KHKW) / KW;\n              int patchW = (p - patchC*KHKW) - patchH * KW;\n              int xh2 = oh + patchH * dilationH;\n              int xw2 = ow + patchW * dilationW;\n              int x[").concat(u.length,"];\n              x[0] = b;\n              x[1] = patchC;\n              x[2] = xh2;\n              x[3] = xw2;\n              if(xh2 >= 0 &&\n                  xh2 < XH &&\n                  xw2 >= 0 &&\n                  xw2 < XW) {\n                value[i] = _X(x);\n              }\n            }\n            ++p;\n          }\n          return value;\n        }\n        ");return r(r({},n),{output:{dims:f,type:a.type,textureType:o.TextureType.packedLastDimension},shaderSource:d})}(0,u,n,a,i,c)}})},e.calculateIm2ColDims=function(t,e,n,r){return void 0===r&&(r=4),[n[0],n[2],n[3],Math.ceil(t[1]*e[2]*e[3]/r)]}},6981:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;var o=n(4910),a=n(5639);e.imageScaler=function(t,e,n){return u(e),[t.run(c(t,e,n),e)]},e.parseImageScalerAttributes=function(t){var e=t.attributes.getFloat("scale"),n=t.attributes.getFloats("bias");return(0,o.createAttributeWithCacheKey)({scale:e,bias:n})};var i={name:"ImageScaler",inputNames:["X"],inputTypes:[a.TextureType.unpacked]},c=function(t,e,n){var o=r(r({},i),{cacheHint:n.cacheKey});return r(r({},o),{get:function(){return function(t,e,n,o){var i=n[0].dims.slice(),c=i.length,u=s(o.bias.length),l="\n      ".concat(u,"\n      float process(int indices[").concat(c,"]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }");return r(r({},e),{output:{dims:i,type:n[0].type,textureType:a.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:o.bias.length,data:o.bias},{name:"scale",type:"float",data:o.scale}],shaderSource:l})}(0,o,e,n)}})},s=function(t){for(var e=["float getBias(float bias[".concat(t,"], int channel) {")],n=0;n<t;++n)0===n?e.push("\t"+"if (channel == ".concat(n,") { return bias[").concat(n,"]; }")):n===t-1?e.push("\t"+"else { return bias[".concat(n,"]; }")):e.push("\t"+"else if (channel == ".concat(n,") { return bias[").concat(n,"]; }"));return e.push("\t}"),e.join("\n")},u=function(t){if(!t||1!==t.length)throw new Error("ImageScaler requires 1 input.");if(4!==t[0].dims.length)throw new Error("Invalid input shape.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")}},7413:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;var a=n(6757),i=n(5639);e.instanceNormalization=function(t,e,n){p(e);var r=t.run(s(e[0]),e);return[t.run(l(t,e[0],n,r.dims),[e[0],r,e[1],e[2]])]},e.parseInstanceNormalizationAttributes=function(t){return t.attributes.getFloat("epsilon",1e-5)};var c={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[i.TextureType.unpacked]},s=function(t){return r(r({},c),{get:function(){return function(t,e){var n=e.dims.slice(),o=n[1],a=n[2]*n[3],c=[n[0],o],s="\n      vec4 process(int[2] indices) {\n        vec4 v = vec4(0.0);\n        int a[4];\n        a[0] = indices[0];\n        a[1] = indices[1];\n        float temp = 0.0;\n        for(int a2=0; a2<".concat(n[2],"; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<").concat(n[3],"; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += x;\n          }\n        }\n        float mean = temp / float(").concat(a,");\n        temp = 0.0;\n        for(int a2=0; a2<").concat(n[2],"; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<").concat(n[3],"; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += (x - mean) * (x - mean);\n          }\n        }\n        v.r = mean;\n        v.g = temp / float(").concat(a,");\n\n        return v;\n      }");return r(r({},t),{output:{dims:c,type:e.type,textureType:i.TextureType.packedLastDimension},shaderSource:s})}(c,t)}})},u={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[i.TextureType.unpacked,i.TextureType.packedLastDimension,i.TextureType.unpacked,i.TextureType.unpacked]},l=function(t,e,n,c){var s=r(r({},u),{cacheHint:"".concat(n)});return r(r({},s),{get:function(){return function(t,e,n,c,s){var u=(0,a.getGlsl)(t.session.backend.glContext.version),l=o(t.calculateTextureWidthAndHeight(s,i.TextureType.packedLastDimension),2),p=l[0],f=l[1],d=o([p/4,f],2),h=d[0],g=d[1],y="\n      vec4 get_MeanAndVariance(int[2] mv) {\n        int offset = indicesToOffset_MeanAndVariance(mv);\n        vec2 coords = offsetToCoords(offset, ".concat(h,", ").concat(g,");\n        return ").concat(u.texture2D,"(MeanAndVariance, coords);\n      }\n\n      float process(int[4] indices) {\n        int mv[2];\n        mv[0] = indices[0];\n        mv[1] = indices[1];\n        vec4 mean_and_variance = get_MeanAndVariance(mv);\n        float mean = mean_and_variance.r;\n        float variance = mean_and_variance.g;\n\n        int sb[1];\n        sb[0] = indices[1];\n        float scale = _Scale(sb);\n        float b = _B(sb);\n\n        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n      }");return r(r({},e),{output:{dims:n.dims,type:n.type,textureType:i.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:c}],shaderSource:y})}(t,s,e,n,c)}})},p=function(t){if(!t||3!==t.length)throw new Error("InstanceNormalization requires 3 inputs.");var e=t[0],n=t[1],r=t[2];if(e.dims.length<3||1!==n.dims.length||1!==r.dims.length)throw new Error("Invalid input shape.");if(n.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1])throw new Error("Input shapes are mismatched.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type)throw new Error("Invalid input type.");if(4!==t[0].dims.length)throw new Error("Only support 4-D input shape.")}},7006:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createLrnProgramInfoLoader=e.parseLrnAttributes=e.lrn=void 0;var o=n(4910),a=n(5639);e.lrn=function(t,e,n){return s(e),[t.run(c(e,n),e)]},e.parseLrnAttributes=function(t){var e=t.attributes.getFloat("alpha",1e-4),n=t.attributes.getFloat("beta",.75),r=t.attributes.getFloat("bias",1),a=t.attributes.getInt("size");return(0,o.createAttributeWithCacheKey)({alpha:e,beta:n,bias:r,size:a})};var i={name:"LRN",inputNames:["X"],inputTypes:[a.TextureType.unpacked]};function c(t,e){return r(r({},i),{cacheHint:e.cacheKey,get:function(){return function(t,e){var n=t[0].dims[1],o=t[0].dims.length,c=-Math.floor((e.size-1)/2),s=Math.ceil((e.size-1)/2),u="float(".concat(e.alpha,") / float(").concat(e.size,")"),l="float(".concat(e.bias,")"),p="float(".concat(e.beta,")"),f="\n    float process(int indices[".concat(o,"]) {\n        int c = indices[1];\n        float x = _X(indices);\n        float square_sum = 0.0;\n\n        for (int i = ").concat(c,"; i <= ").concat(s,"; i++) {\n          int idx = c + i;\n          if (c >= 0 && c < ").concat(n,") {\n            indices[1] = idx;\n            float j = _X(indices);\n            square_sum += j * j;\n          }\n        }\n        return x / pow(").concat(l," + ").concat(u," * square_sum, ").concat(p,");\n    }");return r(r({},i),{cacheHint:e.cacheKey,output:{dims:t[0].dims,type:t[0].type,textureType:a.TextureType.unpacked},shaderSource:f})}(t,e)}})}e.createLrnProgramInfoLoader=c;var s=function(t){if(!t||1!==t.length)throw new Error("LRN requires 1 input.");if(4!==t[0].dims.length)throw new Error('currently only support LRN for input with "NCHW" format');if("float32"!==t[0].type)throw new Error("input should be float type")}},5632:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;var o=n(7273),a=n(6757),i=n(5639),c=n(432),s=n(2150),u=n(8276);e.createPackedMatmulProgramInfoLoader=function(t,e,n){var l,p,f=(l=e.length>2,p=n.activationCacheKey,{name:"MatMul (packed)",inputNames:l?["A","B","Bias"]:["A","B"],inputTypes:l?[i.TextureType.packed,i.TextureType.packed,i.TextureType.packed]:[i.TextureType.packed,i.TextureType.packed],cacheHint:p});return r(r({},f),{get:function(){return function(t,e,n,l){var p=n.length>2,f=p?"value += getBiasForMatmul();":"",d=n[0].dims,h=n[1].dims,g=o.BroadcastUtil.calcShape(d,h,!0),y=!o.ShapeUtil.areEqual(n[0].dims,n[1].dims);if(!g)throw new Error("Can't use matmul on the given tensors");var m=d[d.length-1],v=Math.ceil(m/2),b=d.length,w=h.length,_=(0,a.getGlsl)(t.session.backend.glContext.version),x=(0,c.getCoordsDataType)(g.length),T=g.length,S=(0,c.getGlChannels)(),O=(0,s.getActivationSnippet)(l),I=O.activationFunction,A=O.applyActivation,P=p?"".concat((0,u.getBiasForMatmul)(x,S,n[2].dims,g,!0)):"",E=y?"".concat(function(t,e,n,r){var a=[],i=[],c=n[0].dims,s=n[1].dims,u=c.length,l=s.length,p=r.length,f=p-u,d=p-l;(a=c.map((function(t,n){return"coords.".concat(e[n+f])})))[u-1]="i*2",a.join(", "),(i=s.map((function(t,n){return"coords.".concat(e[n+d])})))[l-2]="i*2",i.join(", ");var h=o.BroadcastUtil.getBroadcastDims(c,r),g=o.BroadcastUtil.getBroadcastDims(s,r),y=h.map((function(t){return"coords.".concat(e[t+f]," = 0;")})).join("\n"),m=g.map((function(t){return"coords.".concat(e[t+d]," = 0;")})).join("\n"),v="int lastDim = coords.".concat(e[p-1],";\n  coords.").concat(e[p-1]," = coords.").concat(e[p-2],";\n  coords.").concat(e[p-2]," = lastDim;");return"\nvec4 getAAtOutCoordsMatmul(int i) {\n  ".concat(t," coords = getOutputCoords();\n  ").concat(v,"\n  ").concat(y,"\n  vec4 outputValue = getA(").concat(a,");\n  return outputValue;\n}\n\nvec4 getBAtOutCoordsMatmul(int i) {\n  ").concat(t," coords = getOutputCoords();\n  ").concat(v,"\n  ").concat(m,"\n  vec4 outputValue = getB(").concat(i,");\n  return outputValue;\n}")}(x,S,n,g)):"",k=y?"getAAtOutCoordsMatmul(i)":"getA(".concat(function(t,e){for(var n="",r=0;r<e-2;r++)n+="rc.".concat(t[r],", ");return n+("rc.".concat(t[e-2],", ")+"i*2")}(S,b),")"),D=y?"getBAtOutCoordsMatmul(i)":"getB(".concat(function(t,e){for(var n="",r=0;r<e-2;r++)n+="rc.".concat(t[r],", ");return n+"i*2, "+"rc.".concat(t[e-1])}(S,w),")"),C=y?"":"".concat(x," rc =\n          getOutputCoords(); int lastDim = rc.").concat(S[T-1],"; rc.").concat(S[T-1]," =\n          rc.").concat(S[T-2],"; rc.").concat(S[T-2]," = lastDim;\n      "),R="\n            ".concat(E,"\n            ").concat(P,"\n            ").concat(I,"\n            void main() {\n              ").concat(C,"\n\n              vec4 value = vec4(0);\n              for (int i = 0; i < ").concat(v,"; i++) {\n                vec4 a = ").concat(k,";\n                vec4 b = ").concat(D,";\n\n                value += (a.rrbb * b.rgrg);\n                value += (a.ggaa * b.baba);\n              }\n              ").concat(f,"\n              ").concat(A,"\n              ").concat(_.output," = value;\n            }");return r(r({},e),{output:{dims:g,type:n[0].type,textureType:i.TextureType.packed},shaderSource:R,hasMain:!0})}(t,f,e,n)}})}},8276:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;var o=n(7273),a=n(5639),i=n(432),c=n(2150),s=n(5632);e.matMul=function(t,e,n){return p(e),t.session.pack?[t.run((0,s.createPackedMatmulProgramInfoLoader)(t,e,n),e)]:[t.run(l(e,n),e)]},e.parseMatMulAttributes=function(t){return(0,c.parseInternalActivationAttributes)(t.attributes)};var u=function(t,e){return{name:"MatMul",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked]:[a.TextureType.unpacked,a.TextureType.unpacked],cacheHint:e}};function l(t,e){var n=u(t.length>2,e.activationCacheKey);return r(r({},n),{get:function(){return function(t,e,n){var s=e[0].dims,u=e[1].dims,l=o.BroadcastUtil.calcShape(s,u,!0);if(!l)throw new Error("Can't use matmul on the given tensors");var p=(0,i.getCoordsDataType)(l.length),d=(0,i.getGlChannels)(),h=(0,c.getActivationSnippet)(n),g=h.activationFunction,y=h.applyActivation,m=e.length>2,v=m?"value += getBiasForMatmul();":"",b=m?"".concat(f(p,d,e[2].dims,l,!1)):"",w=l.length,_=s.length,x=u.length,T=s[s.length-1],S="\n    ".concat(g,"\n    ").concat(b,"\n    float process(int indices[").concat(w,"]) {\n        int a[").concat(_,"];\n        int b[").concat(x,"];\n        bcastMatmulIndices_A(indices, a);\n        bcastMatmulIndices_B(indices, b);\n\n        float value;\n        for (int k=0; k<").concat(T,"; ++k) {\n            a[").concat(_-1,"] = k;\n            b[").concat(x-2,"] = k;\n            value += _A(a) * _B(b);\n        }\n        ").concat(v,"\n        ").concat(y,"\n        return value;\n    }");return r(r({},t),{output:{dims:l,type:e[0].type,textureType:a.TextureType.unpacked},shaderSource:S})}(n,t,e)}})}e.createMatmulProgramInfoLoader=l;var p=function(t){if(!t||2!==t.length)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type)throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")};function f(t,e,n,r,a){var i,c=n.length,s=r.length,u=s-c;i=s<2&&c>0?"coords":n.map((function(t,n){return"coords.".concat(e[n+u])})).join(", ");var l=o.BroadcastUtil.getBroadcastDims(n,r).map((function(t){return"coords.".concat(e[t+u]," = 0;")})).join("\n"),p="vec4(outputValue.xx, outputValue.yy)";return 1===o.ShapeUtil.size(n)&&(p="vec4(outputValue.x)"),a?"\nvec4 getBiasForMatmul() {\n  ".concat(t," coords = getOutputCoords();\n  ").concat(l,"\n  vec4 outputValue = getBias(").concat(i,");\n  return ").concat(p,";\n}"):"\nfloat getBiasForMatmul() {\n  ".concat(t," coords = getOutputCoords();\n  ").concat(l,"\n  return getBias(coords.x);\n}")}e.getBiasForMatmul=f},9:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;var o=n(6757),a=n(5639),i=n(432),c=n(5614),s={name:"pack",inputNames:["A"],inputTypes:[a.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=function(t,e){return r(r({},s),{get:function(){return function(t,e){var n,u,l,p,f=(0,o.getGlsl)(t.session.backend.glContext.version),d=e.dims,h=d.length,g=e.dims.length,y=(0,i.getCoordsDataType)(g),m=(0,c.getChannels)("rc",g),v=(n=g,u=m,l=d[d.length-2],p=d[d.length-1],0===n||1===n?"":"\n    int r = ".concat(u[n-2],";\n    int c = ").concat(u[n-1],";\n    int rp1 = ").concat(u[n-2]," + 1;\n    int cp1 = ").concat(u[n-1]," + 1;\n    bool rEdge = rp1 >= ").concat(p,";\n    bool cEdge = cp1 >= ").concat(l,";\n    ")),b=function(t,e,n){if(0===t)return"false";if(1===t)return"rc > ".concat(e[0]);for(var r="",o=t-2;o<t;o++)r+="".concat(n[o]," >= ").concat(e[o-t+2]),o<t-1&&(r+="||");return r}(g,0===h?[1,1]:1===h?[d[0],1]:[d[g-1],d[g-2]],m),w=function(t,e){var n=t.length;if(0===n)return"getA(), 0, 0, 0";if(1===n)return"getA(rc),\n            rc + 1 >= ".concat(t[0]," ? 0. : getA(rc + 1),\n            0, 0");var r="";if(n>2)for(var o=0;o<n-2;++o)r+="".concat(e[o],",");return"getA(".concat(r).concat("r, c","),\n          rEdge ? 0. : getA(").concat(r).concat("rp1, c","),\n          cEdge ? 0. : getA(").concat(r).concat("r, cp1","),\n          rEdge || cEdge ? 0. : getA(").concat(r).concat("rp1, cp1",")")}(d,m),_="\n        void main() {\n          ".concat(y," rc = getOutputCoords();\n\n          if(").concat(b,") {\n            ").concat(f.output," = vec4(0);\n          } else {\n            ").concat(v,"\n\n            ").concat(f.output," = vec4(").concat(w,");\n          }\n        }\n      ");return r(r({},s),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:a.TextureType.packed},shaderSource:_})}(t,e)}})}},5614:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;var r=n(432);function o(t,e){return(0,r.getGlChannels)(e).map((function(e){return"".concat(t,".").concat(e)}))}e.getVecChannels=o,e.getChannels=function(t,e){return 1===e?[t]:o(t,e)},e.unpackFromChannel=function(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  "}},5565:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;var a=n(4910),i=n(7273),c=n(6757),s=n(5639),u={name:"Pad",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};e.padV2=function(t,e,n){return f(e),[t.run(r(r({},u),{cacheHint:n.cacheKey,get:function(){return p(t,e[0],n)}}),e)]},e.parsePadAttributesV2=function(t){var e=t.attributes.getString("mode","constant"),n=t.attributes.getFloat("value",0),r=t.attributes.getInts("pads");return(0,a.createAttributeWithCacheKey)({mode:e,value:n,pads:r})},e.padV11=function(t,n,r){d(n);var o=l(t,n,r);return(0,e.padV2)(t,[n[0]],o)},e.parsePadAttributesV11=function(t){return t.attributes.getString("mode","constant")};var l=function(t,e,n){if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw new Error("dynamic pad attributes are not allowed");var r=Array.from(e[1].integerData),o=e.length>=3?e[2].floatData[0]:0;return(0,a.createAttributeWithCacheKey)({mode:n,pads:r,value:o})},p=function(t,e,n){var r=i.ShapeUtil.padShape(e.dims.slice(),n.pads),o=r.length,a=h(t,e,n),c="\n      ".concat(a,"\n      float process(int[").concat(o,"] indices) {\n          return padA(indices);\n      }");return{name:"Pad",inputNames:["A"],inputTypes:[s.TextureType.unpacked],output:{dims:r,type:e.type,textureType:s.TextureType.unpacked},shaderSource:c}},f=function(t){if(!t||1!==t.length)throw new Error("Pad requires 1 input");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")},d=function(t){if(!t||2!==t.length&&3!==t.length)throw new Error("Pad requires 2 or 3 inputs");if("int32"!==t[1].type)throw new Error("Invalid input type.");if(t.length>=3&&"string"===t[2].type)throw new Error("Invalid input type.")},h=function(t,e,n){var r=(0,c.getGlsl)(t.session.backend.glContext.version),a=o(t.calculateTextureWidthAndHeight(e.dims,s.TextureType.unpacked),2),u=a[0],l=a[1],p=i.ShapeUtil.computeStrides(e.dims);switch(n.mode){case"constant":return g(r,e.dims,p,u,l,n.pads,n.value);case"reflect":return y(r,e.dims,p,u,l,n.pads);case"edge":return m(r,e.dims,p,u,l,n.pads);default:throw new Error("Invalid mode")}},g=function(t,e,n,r,o,a,i){for(var c=e.length,s="",u=c-1;u>=0;--u)s+="\n        k = m[".concat(u,"] - ").concat(a[u],";\n        if (k < 0)  return constant;\n        if (k >= ").concat(e[u],") return constant;\n        offset += k * ").concat(n[u],";\n        ");return"\n      float padA(int m[".concat(c,"]) {\n        const float constant = float(").concat(i,");\n        int offset = 0;\n        int k = 0;\n        ").concat(s,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(o,");\n        float value = getColorAsFloat(").concat(t.texture2D,"(A, coords));\n        return value;\n      }\n      ")},y=function(t,e,n,r,o,a){for(var i=e.length,c="",s=i-1;s>=0;--s)c+="\n        k = m[".concat(s,"] - ").concat(a[s],";\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = ").concat(2*(e[s]-1),";\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= ").concat(e[s],") { k = _2n_1 - k; }\n        }\n        offset += k * ").concat(n[s],";\n        ");return"\n      float padA(int m[".concat(i,"]) {\n        int offset = 0;\n        int k = 0;\n        ").concat(c,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(o,");\n        float value = getColorAsFloat(").concat(t.texture2D,"(A, coords));\n        return value;\n      }\n      ")},m=function(t,e,n,r,o,a){for(var i=e.length,c="",s=i-1;s>=0;--s)c+="\n        k = m[".concat(s,"] - ").concat(a[s],";\n        if (k < 0)  k = 0;\n        if (k >= ").concat(e[s],") k = ").concat(e[s]-1,";\n        offset += k * ").concat(n[s],";\n      ");return"\n      float padA(int m[".concat(i,"]) {\n        int offset = 0;\n        int k = 0;\n        ").concat(c,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(o,");\n        float value = getColorAsFloat(").concat(t.texture2D,"(A, coords));\n        return value;\n      }\n      ")}},2834:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;var a=n(4910),i=n(7273),c=n(5639);e.averagePool=function(t,e,n){d(e);var o={name:"AveragePool",inputNames:["X"],inputTypes:[c.TextureType.unpacked],cacheHint:n.cacheKey};return[t.run(r(r({},o),{get:function(){return s(e,o,!1,n)}}),e)]},e.parseAveragePoolAttributes=function(t){var e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),r=0!==t.attributes.getInt("count_include_pad",0),o=t.attributes.getInts("kernel_shape"),i=t.attributes.getInts("strides",[]),c=t.attributes.getInts("pads",[]);if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,a.createAttributeWithCacheKey)({autoPad:e,ceilMode:n,countIncludePad:r,kernelShape:o,strides:i,pads:c})};var s=function(t,e,n,a){var s=o(l(t,a,n),2),u=s[0],p=s[1],f=i.ShapeUtil.size(u.kernelShape),d="";u.countIncludePad?d+="value /= float(".concat(f,");"):d+="value /= float(".concat(f," - pad);");var g=h(t[0].dims,u,"value += _X(x);",d,"0.0"),y="\n        ".concat(g,"\n      ");return r(r({},e),{output:{dims:p,type:t[0].type,textureType:c.TextureType.unpacked},shaderSource:y})};e.globalAveragePool=function(t,e,n){d(e);var o={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[c.TextureType.unpacked],cacheHint:"".concat(n.countIncludePad)};return[t.run(r(r({},o),{get:function(){return s(e,o,!0,n)}}),e)]},e.parseGlobalAveragePoolAttributes=function(t){var e=0!==t.attributes.getInt("count_include_pad",0);return(0,a.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},e.maxPool=function(t,e,n){d(e);var o={name:"MaxPool",inputNames:["X"],inputTypes:[c.TextureType.unpacked],cacheHint:n.cacheKey};return[t.run(r(r({},o),{get:function(){return u(e,o,!1,n)}}),e)]},e.parseMaxPoolAttributes=function(t){var e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),r=t.attributes.getInts("kernel_shape"),o=t.attributes.getInts("strides",[]),i=t.attributes.getInts("pads",[]),c=t.attributes.getInt("storage_order",0),s=t.attributes.getInts("dilations",[]);if(0!==c)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,a.createAttributeWithCacheKey)({autoPad:e,ceilMode:n,countIncludePad:!1,kernelShape:r,strides:o,pads:i,storageOrder:c,dilations:s})};var u=function(t,e,n,a){var i=o(l(t,a,n),2),s=i[0],u=i[1],p=h(t[0].dims,s,"\n      value = max(_X(x), value);\n    ","","-1e5"),f="\n      ".concat(p,"\n    ");return r(r({},e),{output:{dims:u,type:t[0].type,textureType:c.TextureType.unpacked},shaderSource:f})},l=function(t,e,n){var r=t[0].dims.slice(),o=Object.hasOwnProperty.call(e,"dilations"),a=e.kernelShape.slice(),c=e.strides.slice(),s=o?e.dilations.slice():[],u=e.pads.slice();i.PoolConvUtil.adjustPoolAttributes(n,r,a,c,s,u);var l=i.PoolConvUtil.computePoolOutputShape(n,r,c,s,a,u,e.autoPad),p=Object.assign({},e);return o?Object.assign(p,{kernelShape:a,strides:c,pads:u,dilations:s,cacheKey:e.cacheKey}):Object.assign(p,{kernelShape:a,strides:c,pads:u,cacheKey:e.cacheKey}),[p,l]},p={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},f={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[c.TextureType.unpacked]};e.globalMaxPool=function(t,e){return d(e),[t.run(r(r({},f),{get:function(){return u(e,f,!0,p)}}),e)]};var d=function(t){if(!t||1!==t.length)throw new Error("Pool ops requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")},h=function(t,e,n,r,o){var a=t.length;if(e.kernelShape.length<=2){var c,s=e.kernelShape[e.kernelShape.length-1],u=e.strides[e.strides.length-1],l=e.pads[e.pads.length/2-1],p=e.pads[e.pads.length-1],f=t[a-1],d="",h="";if(c=l+p!==0?"\n          for (int i = 0; i < ".concat(s,"; i++) {\n            x[").concat(a," - 1] = indices[").concat(a," - 1] * ").concat(u," - ").concat(l," + i;\n            if (x[").concat(a," - 1] < 0 || x[").concat(a," - 1] >= ").concat(f,") {\n              pad++;\n              continue;\n            }\n            ").concat(n,"\n          }"):"\n          for (int i = 0; i < ".concat(s,"; i++) {\n            x[").concat(a," - 1] = indices[").concat(a," - 1] * ").concat(u," - ").concat(l," + i;\n            ").concat(n,"\n          }"),2===e.kernelShape.length){var m=e.kernelShape[e.kernelShape.length-2],v=e.strides[e.strides.length-2],b=e.pads[e.pads.length/2-2],w=e.pads[e.pads.length-2],_=t[a-2];d=b+w!==0?"\n            for (int j = 0; j < ".concat(m,"; j++) {\n              x[").concat(a," - 2] = indices[").concat(a," - 2] * ").concat(v," - ").concat(b," + j;\n              if (x[").concat(a," - 2] < 0 || x[").concat(a," - 2] >= ").concat(_,") {\n                pad+= ").concat(s,";\n                continue;\n              }\n          "):"\n            for (int j = 0; j < ".concat(m,"; j++) {\n              x[").concat(a," - 2] = indices[").concat(a," - 2] * ").concat(v," - ").concat(b," + j;\n            "),h="\n          }\n        "}return"\n        float process(int indices[".concat(a,"]) {\n          int x[").concat(a,"];\n          copyVec(indices, x);\n\n          float value = ").concat(o,";\n          int pad = 0;\n          ").concat(d,"\n          ").concat(c,"\n          ").concat(h,"\n          ").concat(r,"\n          return value;\n        }\n      ")}var x,T=i.ShapeUtil.size(e.kernelShape),S=i.ShapeUtil.computeStrides(e.kernelShape),O=S.length,I=e.pads.length,A=y(O),P=g(t,"inputDims"),E=g(e.pads,"pads"),k=g(S,"kernelStrides"),D=g(e.strides,"strides");return x=e.pads.reduce((function(t,e){return t+e}))?"\n            if (x[j] >= inputDims[j] || x[j] < 0) {\n              pad++;\n              isPad = true;\n              break;\n            }\n          }\n          if (!isPad) {\n            ".concat(n,"\n          }"):"\n          }\n          ".concat(n,"\n        "),"\n        ".concat(A,"\n        float process(int indices[").concat(a,"]) {\n          int x[").concat(a,"];\n          copyVec(indices, x);\n          int offset[").concat(O,"];\n          int pads[").concat(I,"];\n          int inputDims[").concat(a,"];\n          int kernelStrides[").concat(O,"];\n          int strides[").concat(O,"];\n          ").concat(E,"\n          ").concat(P,"\n          ").concat(D,"\n          ").concat(k,"\n\n          float value = ").concat(o,";\n          int pad = 0;\n          bool isPad = false;\n          for (int i = 0; i < ").concat(T,"; i++) {\n            offsetToIndices(i, kernelStrides, offset);\n            isPad = false;\n            for (int j = ").concat(a," - ").concat(O,"; j < ").concat(a,"; j++) {\n              x[j] = indices[j] * strides[j - ").concat(a," + ").concat(O,"]\n                + offset[j - ").concat(a," + ").concat(O,"] - pads[j - 2];\n              ").concat(x,"\n          }\n          ").concat(r,"\n\n          return value;\n        }\n      ")},g=function(t,e){for(var n="",r=0;r<t.length;r++)n+="\n      ".concat(e,"[").concat(r,"] = ").concat(t[r],";\n    ");return n},y=function(t){return"\n  void offsetToIndices(int offset, int[".concat(t,"] strides, out int[").concat(t,"] indices) {\n    if (").concat(t," == 0) {\n      return;\n    }\n    for (int i = 0; i < ").concat(t," - 1; ++i) {\n      indices[i] = offset / strides[i];\n      offset -= indices[i] * strides[i];\n    }\n    indices[").concat(t," - 1] = offset;\n  }")}},1010:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;var o=n(4910),a=n(6145),i=n(7273),c=n(5639),s=function(t,e,n,o,a){l(e);var i={name:o,inputNames:["A"],inputTypes:[c.TextureType.unpacked]};return[t.run(r(r({},i),{cacheHint:n.cacheKey,get:function(){return u(t,e,n,o,a,i)}}),e)]};e.parseReduceAttributes=function(t){var e=t.attributes.getInts("axes",[]),n=1===t.attributes.getInt("keepdims",1);return(0,o.createAttributeWithCacheKey)({axes:e,keepDims:n})};var u=function(t,e,n,o,a,s){for(var u=[],l=e[0].dims.length||1,p=[],f=i.ShapeUtil.normalizeAxes(n.axes,e[0].dims.length),d=a(e,f),h=d[1],g=0;g<e[0].dims.length;g++)f.indexOf(g)>=0||0===f.length?(n.keepDims&&u.push(1),h="\n          for(int j".concat(g," = 0; j").concat(g," < ").concat(e[0].dims[g],"; j").concat(g,"++) {\n            inputIdx[").concat(g,"] = j").concat(g,";\n            ").concat(h,"\n          }")):(p.push("inputIdx[".concat(g,"] = outputIdx[").concat(u.length,"];")),u.push(e[0].dims[g]));var y=u.length||1,m="\n      float process(int outputIdx[".concat(y,"]) {\n        float value;                 // final result\n        int inputIdx[").concat(l,"];      // addressing input data\n        ").concat(p.join("\n"),"\n        ").concat(d[0],"       // init ops for reduce max/min\n        ").concat(h,"\n        ").concat(d[2],"       // final computation for reduce mean\n        return value;\n      }");return r(r({},s),{output:{dims:u,type:e[0].type,textureType:c.TextureType.unpacked},shaderSource:m})},l=function(t){if(!t||1!==t.length)throw new Error("Reduce op requires 1 input.");if(-1===a.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.")};e.reduceSum=function(t,e,n){return s(t,e,n,"ReduceSum",(function(){return["value = 0.0;","value += _A(inputIdx);",""]}))},e.reduceMean=function(t,e,n){return s(t,e,n,"ReduceMean",(function(t,e){for(var n=1,r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&(n*=t[0].dims[r]);return["value = 0.0;","value += _A(inputIdx);","value /= ".concat(n,".;")]}))},e.reduceMax=function(t,e,n){return s(t,e,n,"ReduceMax",(function(t,e){for(var n=[],r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push("inputIdx[".concat(r,"] = 0;"));return["".concat(n.join("\n"),"\nvalue = _A(inputIdx);"),"value = max(value, _A(inputIdx));",""]}))},e.reduceMin=function(t,e,n){return s(t,e,n,"ReduceMin",(function(t,e){for(var n=[],r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push("inputIdx[".concat(r,"] = 0;"));return["".concat(n.join("\n"),"\nvalue = _A(inputIdx);"),"value = min(value, _A(inputIdx));",""]}))},e.reduceProd=function(t,e,n){return s(t,e,n,"ReduceProd",(function(){return["value = 1.0;","value *= _A(inputIdx);",""]}))},e.reduceLogSum=function(t,e,n){return s(t,e,n,"ReduceLogSum",(function(){return["value = 0.0;","value += _A(inputIdx);","value = log(value);"]}))},e.reduceLogSumSquare=function(t,e,n){return s(t,e,n,"ReduceLogSumSquare",(function(){return["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""]}))}},7379:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;var o=n(7273),a=n(6757),i=n(5639),c=n(5614);e.createPackedReshape3DProgramInfoLoader=function(t,e,n){var s=function(t){return{name:"Reshape (packed)",inputTypes:[i.TextureType.packed],inputNames:["A"],cacheHint:"".concat(t)}}(n);return r(r({},s),{get:function(){return function(t,e,n,s){for(var u=e.dims,l=s,p="",f=0;f<4;f++){var d="";switch(f){case 0:d="outputCoords = rc;";break;case 1:d="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:d="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:d="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}p+="\n        ".concat(d,"\n        ").concat(f>0?"if(outputCoords.y < rows && outputCoords.z < cols){":"","\n          int flattenedIndex = getFlattenedIndex(outputCoords);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);\n          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(f,"] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);\n\n        ").concat(f>0?"}":"","\n      ")}var h,g,y,m,v,b=(0,a.getGlsl)(t.session.backend.glContext.version),w="\n      ".concat((h=u,g=o.ShapeUtil.computeStrides(h),y=["b","r","c"],m="index",v=g.map((function(t,e){var n="int ".concat(y[e]," = ").concat(m," / ").concat(t),r=e===g.length-1?"int ".concat(y[e+1]," = ").concat(m," - ").concat(y[e]," * ").concat(t):"index -= ".concat(y[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join(""),"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(v,"\n      return ivec3(b, r, c);\n    }\n  ")),"\n      ").concat(function(t){var e=o.ShapeUtil.computeStrides(t);return"\n  int getFlattenedIndex(ivec3 coords) {\n    // reverse y, z order\n    return coords.x * ".concat(e[0]," + coords.z * ").concat(e[1]," + coords.y;\n  }\n")}(l),"\n      ").concat((0,c.unpackFromChannel)(),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.0);\n\n        ivec3 outputCoords;\n        int rows = ").concat(l[2],";\n        int cols = ").concat(l[1],";\n\n        ").concat(p,"\n        ").concat(b.output," = result;\n      }\n    ");return r(r({},n),{output:{dims:l,type:e.type,textureType:i.TextureType.packed},shaderSource:w,hasMain:!0})}(t,e,s,n)}})},e.processDims3D=function(t){if(0===t.length)return[1,1,1];for(var e=1,n=0;n<t.length-2;++n)e*=t[n];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]},e.isReshapeCheap=function(t,e){return 0===t.length||0===e.length||(t.length<2||e.length<2?t[t.length-1]===e[e.length-1]:t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2])}},8126:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;var r=n(7273);e.reshape=function(t,e){var n=r.ShapeUtil.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],n)]:[t.reshapeUnpacked(e[0],n)]}},2801:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;var a=n(6757),i=n(5639),c=n(432),s=n(5614),u=n(3980),l={name:"Resize",inputNames:["A"],inputTypes:[i.TextureType.packed]};e.resize=function(t,e,n){return(0,u.validateInputs)(e,n),[t.run(r(r({},l),{cacheHint:n.cacheKey,get:function(){return p(t,e,n)}}),e)]},e.parseResizeAttributesV10=function(t){return(0,u.parseUpsampleAttributes)(t,10)},e.parseResizeAttributesV11=function(t){return(0,u.parseUpsampleAttributes)(t,11)};var p=function(t,e,n){var u=(0,a.getGlsl)(t.session.backend.glContext.version),p=o(f(e,n),2),d=p[0],h=p[1];if(d.every((function(t){return 1===t}))&&"tf_crop_and_resize"!==n.coordinateTransformMode)return r(r({},l),{output:{dims:h,type:e[0].type,textureType:i.TextureType.packed},hasMain:!0,shaderSource:"void main() {\n                    vec4 v = ".concat(u.texture2D,"(X, TexCoords);\n                    ").concat(u.output," = v;\n                }")});var g=h.length;if(g<2)throw new Error("output dimension should be at least 2, but got ".concat(g));var y=h[g-2],m=h[g-1],v=e[0].dims;if(g!==v.length)throw new Error("output dimension should match input ".concat(v.length,", but got ").concat(g));var b=v[g-2],w=v[g-1],_=d[g-2],x=d[g-1],T="";if("linear"!==n.mode)throw new Error("resize (packed) does not support mode: '".concat(n.mode,"'"));switch(n.coordinateTransformMode){case"asymmetric":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"pytorch_half_pixel":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 fcoords = vec4(coords);\n                        return vec4(\n                            ".concat(m,".0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,\n                            ").concat(y,".0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,\n                            ").concat(m,".0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,\n                            ").concat(y,".0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0\n                          );\n                    }\n                ");break;case"align_corners":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 resized = vec4(".concat(m,".0 - 1.0, ").concat(y,".0 - 1.0, ").concat(m,".0 - 1.0,\n                            ").concat(y,".0 - 1.0);\n                        vec4 original = vec4(").concat(w,".0 - 1.0, ").concat(b,".0 - 1.0, ").concat(w,".0 - 1.0,\n                            ").concat(b,".0 - 1.0);\n                        vec4 new_scale = original / resized;\n                        return vec4(coords) * new_scale;\n                    }\n                ");break;default:throw new Error("resize (packed) does not support coordinateTransformMode:                                 '".concat(n.coordinateTransformMode,"'"))}var S=(0,c.getCoordsDataType)(g),O=(0,s.unpackFromChannel)(),I="\n            const vec2 inputWH = vec2(".concat(b,".0, ").concat(w,".0);\n            const vec4 scaleWHWH = vec4(float(").concat(_,"), float(").concat(x,"), float(").concat(_,"), float(").concat(x,"));\n            ").concat(O,"\n            ").concat(T,"\n            float getAValue(int x10, int r, int c, int d) {\n                return getChannel(getA(x10, r, c, d), vec2(c, d));\n            }\n            void main() {\n                ").concat(S," rc = getOutputCoords();\n\n                int batch = rc[0];\n                int depth = rc[1];\n\n                // retrieve the 4 coordinates that is used in the 4 packed output values.\n                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);\n\n                // calculate the source index in fraction\n                vec4 sourceFrac = getSourceFracIndex(coords);\n\n                // get the lower and upper bound of the 4 values that will be packed into one texel.\n                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));\n                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));\n                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));\n                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));\n\n                bool hasNextRow = rc.w < ").concat(y-1,";\n                bool hasNextCol = rc.z < ").concat(m-1,";\n\n                // pack x00, x01, x10, x11's top-left corner into one vec4 structure\n                vec4 topLeft = vec4(\n                    getAValue(batch, depth, x00.x, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's top-right corner into one vec4 structure\n                vec4 topRight = vec4(\n                    getAValue(batch, depth, x00.x, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure\n                vec4 bottomLeft = vec4(\n                    getAValue(batch, depth, x00.z, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure\n                vec4 bottomRight = vec4(\n                    getAValue(batch, depth, x00.z, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);\n\n                // calculate the interpolation fraction on u and v direction\n                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);\n                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));\n\n                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);\n                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);\n                vec4 newValue = mix(top, bottom, clampFrac.xxzz);\n\n                ").concat(u.output," = vec4(newValue);\n            }\n        ");return r(r({},l),{output:{dims:h,type:e[0].type,textureType:i.TextureType.packed},hasMain:!0,shaderSource:I})},f=function(t,e){var n,r=t[0].dims,o=e.scales;if(0===o.length){var a=t[e.scalesInputIdx];if(a&&0!==a.size){if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");o=d(a,e.mode,e.isResize)}else{var i=t[e.sizesInputIdx];if(!i||0===i.size)throw new Error("Either scales or sizes MUST be provided as input.");n=Array.from(i.integerData),o=h(n,r,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");var c=n||r.map((function(t,e){return Math.floor(t*o[e])}));return[o,c]},d=function(t,e,n){var r=Array.from(t.floatData);return(0,u.scalesValidation)(r,e,n),r},h=function(t,e,n,r){for(var o=e.length,a=new Array(o),i=0,c=o;i<c;i++)if(0===e[i]){if(0!==t[i])throw new Error("Input dim is zero but required output dim is non-zero.");a[i]=1}else a[i]=t[i]/e[i];return(0,u.scalesValidation)(a,n,r),a}},565:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;var r=n(9240);e.shape=function(t,e){return o(e),[new r.Tensor([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]};var o=function(t){if(!t||1!==t.length)throw new Error("Shape requires 1 input.")}},2444:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;var o=n(4910),a=n(6145),i=n(7273),c=n(5639),s={name:"Slice",inputNames:["A"],inputTypes:[c.TextureType.unpacked]};e.slice=function(t,e,n){return l(e),[t.run(r(r({},s),{cacheHint:n.cacheKey,get:function(){return u(t,e[0],n)}}),e)]},e.parseSliceAttributes=function(t){var e=t.attributes.getInts("starts"),n=t.attributes.getInts("ends"),r=t.attributes.getInts("axes",[]);return(0,o.createAttributeWithCacheKey)({starts:e,ends:n,axes:r})};var u=function(t,e,n){for(var o=0===n.axes.length?e.dims.slice(0).map((function(t,e){return e})):n.axes,a=i.ShapeUtil.normalizeAxes(o,e.dims.length),u=n.starts.map((function(t,n){return t>e.dims[a[n]]-1?e.dims[a[n]]:i.ShapeUtil.normalizeAxis(t,e.dims[a[n]])})),l=n.ends.map((function(t,n){return t>e.dims[a[n]]-1?e.dims[a[n]]:i.ShapeUtil.normalizeAxis(t,e.dims[a[n]])})),p=e.dims.slice(),f=[],d=0;d<a.length;d++)p[a[d]]=l[d]-u[d],u[d]>0&&f.push("outputIdx[".concat(a[d],"] += ").concat(u[d],";"));var h=p.length,g="\n      float process(int outputIdx[".concat(h,"]) {\n        ").concat(f.join("\n      "),"\n        return _A(outputIdx);\n      }");return r(r({},s),{output:{dims:p,type:e.type,textureType:c.TextureType.unpacked},shaderSource:g})},l=function(t){if(!t||1!==t.length)throw new Error("Slice requires 1 input.");if(-1===a.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.")};e.sliceV10=function(t,e){f(e);var n=p(t,e);return[t.run(r(r({},s),{cacheHint:n.cacheKey,get:function(){return u(t,e[0],n)}}),[e[0]])]};var p=function(t,e){if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some((function(t){return 1!==t})))throw new Error("currently non-1 steps is not supported for Slice");var n=Array.from(e[1].integerData),r=Array.from(e[2].integerData),o=e.length>=4?Array.from(e[3].integerData):[];return{starts:n,ends:r,axes:o,cacheKey:"".concat(o,";").concat(n,";").concat(r)}},f=function(t){if(!t||t.length<3||t.length>5)throw new Error("Invalid input number.");if("int32"!==t[1].type||1!==t[1].dims.length)throw new Error("Invalid input type.");if("int32"!==t[2].type||1!==t[2].dims.length)throw new Error("Invalid input type.");if(t.length>=4&&("int32"!==t[3].type||1!==t[3].dims.length))throw new Error("Invalid input type.");if(t.length>=5&&("int32"!==t[4].type||1!==t[4].dims.length))throw new Error("Invalid input type.")}},815:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;var a=n(4910),i=n(7273),c=n(6757),s=n(5639),u=n(5707),l={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[s.TextureType.unpacked]},p={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked]},f={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]};e.softmax=function(t,e,n){m(e);var r=e[0].dims.slice(),o=i.ShapeUtil.normalizeAxis(n.axis,r.length),a=i.ShapeUtil.sizeToDimension(r,o),c=i.ShapeUtil.sizeFromDimension(r,o);return d(t,e,n,a,c)},e.parseSoftmaxAttributes=function(t){return(0,a.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",1)})},e.parseSoftmaxAttributesV13=function(t){return(0,a.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",-1)})},e.softmaxV13=function(t,e,n){m(e);var r,o=e[0].dims.slice(),c=i.ShapeUtil.normalizeAxis(n.axis,o.length),s=o.length,l=c!==s-1,p=[],f=[],h=[];l&&((f=Array.from({length:s}).map((function(t,e){return e})))[c]=s-1,f[s-1]=c,f.map((function(t){return p.push(o[t])})),r=(0,a.createAttributeWithCacheKey)({perm:f}),h=(0,u.transpose)(t,e,r));var g=l?i.ShapeUtil.sizeToDimension(p,s-1):i.ShapeUtil.sizeToDimension(o,s-1),y=l?i.ShapeUtil.sizeFromDimension(p,s-1):i.ShapeUtil.sizeFromDimension(o,s-1),v=d(t,l?h:e,n,g,y);return l?(0,u.transpose)(t,v,r):v};var d=function(t,e,n,o,a){var i=h(t,e[0],o,a,[o]),c=t.run(r(r({},l),{cacheHint:n.cacheKey,get:function(){return i}}),e),s=g(t,e[0],o,a,i.output.dims,[o]),u=t.run(r(r({},p),{cacheHint:n.cacheKey,get:function(){return s}}),[e[0],c]),d=y(t,e[0],o,a,i.output.dims,s.output.dims);return[t.run(r(r({},f),{cacheHint:n.cacheKey,get:function(){return d}}),[e[0],c,u])]},h=function(t,e,n,a,i){var u=o(t.calculateTextureWidthAndHeight(e.dims,s.TextureType.unpacked),2),p=u[0],f=u[1],d=i.length;if(n<1||a<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length)throw new Error("Dimensionality of the output should be 1");if(i[0]!==n)throw new Error("Shape of the output should be equal to logical row count");var h=(0,c.getGlsl)(t.session.backend.glContext.version),g="\n      float process(int[".concat(d,"] indices) {\n        int logical_row_start_offset = indices[0] * ").concat(a,";\n\n        float max = getColorAsFloat(").concat(h.texture2D,"(A, offsetToCoords(logical_row_start_offset, ").concat(p,",\n        ").concat(f," )));\n        for(int i=1; i<").concat(a,"; ++i)\n        {\n          float current = getColorAsFloat(").concat(h.texture2D,"(A, offsetToCoords(logical_row_start_offset + i,\n            ").concat(p,", ").concat(f,")));\n          if(current > max)\n          max = current;\n        }\n\n        return max;\n      }");return r(r({},l),{output:{dims:i,type:e.type,textureType:s.TextureType.unpacked},shaderSource:g})},g=function(t,e,n,a,i,u){var l=o(t.calculateTextureWidthAndHeight(e.dims,s.TextureType.unpacked),2),f=l[0],d=l[1],h=u.length;if(n<1||a<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==u.length)throw new Error("Dimensionality of the output should be 1");if(u[0]!==n)throw new Error("Shape of the output should be equal to logical row count");if(1!==i.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");var g=(0,c.getGlsl)(t.session.backend.glContext.version),y="\n      float process(int[".concat(h,"] indices) {\n        int logical_row_start_offset = indices[0] * ").concat(a,";\n\n        float norm_factor = 0.0;\n        float max = _Max(indices);\n        for(int i=0; i<").concat(a,"; ++i)\n        {\n          norm_factor += exp(getColorAsFloat(").concat(g.texture2D,"(A, offsetToCoords(logical_row_start_offset + i,\n            ").concat(f,", ").concat(d,"))) - max);\n        }\n\n        return norm_factor;\n      }");return r(r({},p),{output:{dims:u,type:e.type,textureType:s.TextureType.unpacked},shaderSource:y})},y=function(t,e,n,a,i,c){var u=o(t.calculateTextureWidthAndHeight(e.dims,s.TextureType.unpacked),2),l=u[0],p=u[1],d=e.dims.length;if(n<1||a<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length||1!==c.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==n||c[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");var h="\n      float process(int[".concat(d,"] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, ").concat(l,", ").concat(p,");\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / ").concat(a,";\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }");return r(r({},f),{output:{dims:e.dims,type:e.type,textureType:s.TextureType.unpacked},shaderSource:h})},m=function(t){if(!t||1!==t.length)throw new Error("Softmax requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type")}},564:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;var a=n(4910),i=n(7273),c=n(5639),s={name:"Split",inputNames:["A"],inputTypes:[c.TextureType.unpacked]};e.split=function(t,e,n){p(e);for(var o=i.ShapeUtil.normalizeAxis(n.axis,e[0].dims.length),a=u(t,e,o,n),c=[],f=function(a){c.push(t.run(r(r({},s),{cacheHint:"".concat(n.cacheKey,";").concat(a),get:function(){return l(t,e[0],n,o,a)}}),e))},d=0;d<a;++d)f(d);return c},e.parseSplitAttributes=function(t){var e=t.attributes.getInt("axis",0),n=t.attributes.getInts("split",[]),r=t.outputs.length;return(0,a.createAttributeWithCacheKey)({axis:e,split:n,numOutputs:r})};var u=function(t,e,n,r){return o(i.SplitUtil.splitShape(e[0].dims,n,r.split,r.numOutputs),2)[1].length},l=function(t,e,n,a,u){var l=o(i.SplitUtil.splitShape(e.dims,a,n.split,n.numOutputs),2),p=l[0],f=l[1][u],d=p[u],h=d.length,g="\n      float process(int indices[".concat(h,"]) {\n        indices[").concat(a,"] += ").concat(f,";\n        return _A(indices);\n      }\n    ");return r(r({},s),{cacheHint:"".concat(n.cacheKey,":").concat(u),output:{dims:d,type:e.type,textureType:c.TextureType.unpacked},shaderSource:g})},p=function(t){if(!t||1!==t.length)throw new Error("Split requires one input.");if("int8"!==t[0].type&&"uint8"!==t[0].type&&"int16"!==t[0].type&&"uint16"!==t[0].type&&"int32"!==t[0].type&&"uint32"!==t[0].type&&"float32"!==t[0].type&&"float64"!==t[0].type&&"bool"!==t[0].type)throw new Error("Invalid input type.")}},5416:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;var r=n(7273);e.squeeze=function(t,e,n){o(e);var a=r.ShapeUtil.squeezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],a)]},e.squeezeV13=function(t,n){return a(n),(0,e.squeeze)(t,[n[0]],Array.from(n[1].integerData))},e.parseSqueezeAttributes=function(t){return t.attributes.getInts("axes")};var o=function(t){if(!t||1!==t.length)throw new Error("Squeeze requires 1 input.");if("string"===t[0].type)throw new Error("invalid input tensor types.")},a=function(t){if(!t||2!==t.length)throw new Error("Squeeze requires 2 inputs.");if("int32"!==t[1].type)throw new Error("Invalid input type.")}},1240:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;var o=n(6757),a=n(5639);e.sum=function(t,e){c(e);var n={name:"Sum",inputNames:e.map((function(t,e){return"X".concat(e)})),inputTypes:new Array(e.length).fill(a.TextureType.unpacked)};return[t.run(r(r({},n),{get:function(){return i(t,e,n)}}),e)]};var i=function(t,e,n){var i=(0,o.getGlsl)(t.session.backend.glContext.version),c=e[0].dims.slice(),s=e.map((function(t,e){return"".concat(i.texture2D,"(X").concat(e,",TexCoords)")})).join(" + "),u="\n      void main() {\n        vec4 result = ".concat(s,";\n        ").concat(i.output," = result;\n      }\n    ");return r(r({},n),{output:{dims:c,type:e[0].type,textureType:a.TextureType.unpacked},hasMain:!0,shaderSource:u})},c=function(t){if(!t||0===t.length)throw new Error("Sum requires inputs.");for(var e=t[0].dims.length,n=1;n<t.length;n++){if(e!==t[n].dims.length)throw new Error("Input shapes are mismatched.");for(var r=0;r<e;r++)if(t[0].dims[r]!==t[n].dims[r])throw new Error("Input shapes are not matched.")}if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.");for(n=1;n<t.length;n++)if(t[0].type!==t[n].type)throw new Error("Input types are not matched.")}},5944:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;var o=n(6145),a=n(5639);e.tile=function(t,e){c(e);var n={name:"Tile",inputNames:["A"],inputTypes:[a.TextureType.unpacked]};return[t.run(r(r({},n),{get:function(){return i(t,e,n)}}),e)]};var i=function(t,e,n){for(var o=e[0].dims.slice(),i=new Array(o.length),c=[],s=0;s<o.length;s++)i[s]=o[s]*e[1].numberData[s],c.push("inputIdx[".concat(s,"] = int(mod(float(outputIdx[").concat(s,"]), ").concat(o[s],".));"));var u=i.length,l="\n      float process(int outputIdx[".concat(u,"]) {\n        int inputIdx[").concat(u,"];\n        ").concat(c.join("\n"),"\n        return _A(inputIdx);\n      }\n    ");return r(r({},n),{output:{dims:i,type:e[0].type,textureType:a.TextureType.unpacked},shaderSource:l})},c=function(t){if(!t||2!==t.length)throw new Error("Tile requires 2 input.");if(1!==t[1].dims.length)throw new Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw new Error("Invalid input shape.");if(-1===o.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw new Error("Invalid repeat type.")}},5707:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;var i=n(4910),c=n(7273),s=n(5639),u={name:"Transpose",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};e.transpose=function(t,e,n){return h(e),[t.run(r(r({},u),{cacheHint:n.cacheKey,get:function(){return l(t,e[0],n.perm)}}),e)]},e.parseTransposeAttributes=function(t){return(0,i.createAttributeWithCacheKey)({perm:t.attributes.getInts("perm",[])})};var l=function(t,e,n){var o=e.dims;n=p(o,n);var a=f(o,n),i=o.length,c="\n      ".concat(d("perm",n,i),"\n      float process(int indices[").concat(i,"]) {\n        int a[").concat(i,"];\n        perm(a, indices);\n        return _A(a);\n      }");return r(r({},u),{output:{dims:a,type:e.type,textureType:s.TextureType.unpacked},shaderSource:c})},p=function(t,e){return e&&e.length!==t.length&&(e=a([],o(t.keys()),!1).reverse()),e},f=function(t,e){return e=p(t,e),c.ShapeUtil.sortBasedOnPerm(t,e)},d=function(t,e,n){var r=[];r.push("void ".concat(t,"(out int a[").concat(n,"], int src[").concat(n,"]) {"));for(var o=0;o<n;++o)r.push("\ta[".concat(e[o],"]=src[").concat(o,"];"));return r.push("\t}"),r.join("\n")},h=function(t){if(!t||1!==t.length)throw new Error("Transpose requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("input should be float tensor")}},2488:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;var r=n(6757),o=n(5639);e.encodeAsUint8=function(t,e){var n=e.shape,a=(0,r.getGlsl)(t.session.backend.glContext.version),i="\n    const float FLOAT_MAX = 1.70141184e38;\n    const float FLOAT_MIN = 1.17549435e-38;\n\n    bool isNaN(float val) {\n      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n    }\n\n    highp vec4 encodeAsUint8(highp float v) {\n      if (isNaN(v)) {\n        return vec4(255, 255, 255, 255);\n      }\n\n      highp float av = abs(v);\n\n      if(av < FLOAT_MIN) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n      } else if(v > FLOAT_MAX) {\n        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n      } else if(v < -FLOAT_MAX) {\n        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n      }\n\n      highp vec4 c = vec4(0,0,0,0);\n\n      highp float e = floor(log2(av));\n      highp float m = exp2(fract(log2(av))) - 1.0;\n\n      c[2] = floor(128.0 * m);\n      m -= c[2] / 128.0;\n      c[1] = floor(32768.0 * m);\n      m -= c[1] / 32768.0;\n      c[0] = floor(8388608.0 * m);\n\n      highp float ebias = e + 127.0;\n      c[3] = floor(ebias / 2.0);\n      ebias -= c[3] * 2.0;\n      c[2] += floor(ebias) * 128.0;\n\n      c[3] += 128.0 * step(0.0, -v);\n\n      return c / 255.0;\n    }\n\n    void main() {\n      float value = ".concat(a.texture2D,"(X,TexCoords).r;\n      ").concat(a.output," = encodeAsUint8(value);\n    }"),c={name:"Uint8Encode",inputTypes:[o.TextureType.unpacked],inputNames:["X"],output:{dims:n,type:e.tensor.type,textureType:o.TextureType.downloadUint8AsFloat},shaderSource:i,hasMain:!0};return t.executeProgram(c,[e.tensor])}},9087:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;var o=n(4910),a=n(7273),i=n(1997),c=n(6757),s=n(5639);function u(){return k("abs")}function l(){return k("acos")}function p(){return k("asin")}function f(){return k("atan")}function d(){return k("ceil")}function h(){return k("cos")}function g(t){var e="elu";return{body:"\n  const float alpha = float(".concat(t,");\n\n  float ").concat(e,"_(float a) {\n    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return vec4(").concat(e,"_(v.x), ").concat(e,"_(v.y), ").concat(e,"_(v.z), ").concat(e,"_(v.w));\n  }\n  "),name:e,type:i.FunctionType.ValueBased}}function y(){return k("exp")}function m(){return k("floor")}function v(t,e){var n="clip";return{body:"\n  const float min = float(".concat(t,");\n  const float max = float(").concat(e,");\n\n  float ").concat(n,"_(float a) {\n    return clamp(a, min, max);\n  }\n  vec4 ").concat(n,"_(vec4 v) {\n    return clamp(v, min, max);\n  }\n  "),name:n,type:i.FunctionType.ValueBased}}function b(){var t="indentity";return{body:"\n  float ".concat(t,"_(float a) {\n    return a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return v;\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function w(t){var e="leakyRelu";return{body:"\n  const float alpha = float(".concat(t,");\n\n  float ").concat(e,"_(float a) {\n    return a < 0.0 ? a * alpha : a;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return vec4(").concat(e,"_(v.x), ").concat(e,"_(v.y), ").concat(e,"_(v.z), ").concat(e,"_(v.w));\n  }\n  "),name:e,type:i.FunctionType.ValueBased}}function _(){return k("log")}function x(){var t="neg";return{body:"\n  float ".concat(t,"_(float a) {\n    return -a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return -v;\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function T(){var t="not";return{body:"\n  float ".concat(t,"_(float a) {\n    return float( ! bool(a) );\n  }\n  bool ").concat(t,"_(bool a) {\n    return !a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 ").concat(t,"_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function S(){return k("sin")}function O(){var t="relu";return{body:"\n  float ".concat(t,"_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function I(){var t="sigmoid";return{body:"\n  float ".concat(t,"_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function A(){return k("sqrt")}function P(){return k("tan")}function E(){var t="tanh";return{body:"\n  float ".concat(t,"_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function k(t){return{body:"\n  float ".concat(t,"_(float a) {\n    return ").concat(t,"(a);\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return ").concat(t,"(v);\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}e.glslAbs=u,e.glslAcos=l,e.glslAsin=p,e.glslAtan=f,e.glslCeil=d,e.glslCos=h,e.glslElu=g,e.glslExp=y,e.glslFloor=m,e.glslClip=v,e.glslIdentity=b,e.glslLeakyRelu=w,e.glslLog=_,e.glslNeg=x,e.glslNot=T,e.glslSin=S,e.glslRelu=O,e.glslSigmoid=I,e.glslSqrt=A,e.glslTan=P,e.glslTanh=E;var D=function(t,e,n,o){var a=t.session.pack?s.TextureType.packed:s.TextureType.unpacked,i={name:n.name,inputTypes:[a],inputNames:["A"],cacheHint:o};return r(r({},i),{get:function(){return function(t,e,n,o){var a=t.session.pack?s.TextureType.packed:s.TextureType.unpacked,i=(0,c.getGlsl)(t.session.backend.glContext.version);return r(r({},e),{output:{dims:n.dims,type:n.type,textureType:a},shaderSource:"\n     ".concat(o.body,"\n     void main() {\n       vec4 v = ").concat(i.texture2D,"(A, TexCoords);\n       v = ").concat(o.name,"_(v);\n       ").concat(i.output," = v;\n     }\n     "),hasMain:!0})}(t,i,e,n)}})};e.abs=function(t,e){return[t.run(D(t,e[0],u()),e)]},e.acos=function(t,e){return[t.run(D(t,e[0],l()),e)]},e.asin=function(t,e){return[t.run(D(t,e[0],p()),e)]},e.atan=function(t,e){return[t.run(D(t,e[0],f()),e)]},e.clip=function(t,e,n){return[t.run(D(t,e[0],v(n.min,n.max),n.cacheKey),e)]},e.parseClipAttributes=function(t){return(0,o.createAttributeWithCacheKey)({min:t.attributes.getFloat("min",a.MIN_CLIP),max:t.attributes.getFloat("max",a.MAX_CLIP)})},e.clipV11=function(t,n){var r=C(t,n);return(0,e.clip)(t,[n[0]],r)};var C=function(t,e){if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");var n=e.length>=3?e[1].numberData[0]:a.MIN_CLIP,r=e.length>=3?e[2].numberData[0]:a.MAX_CLIP;return(0,o.createAttributeWithCacheKey)({min:n,max:r})};e.ceil=function(t,e){return[t.run(D(t,e[0],d()),e)]},e.cos=function(t,e){return[t.run(D(t,e[0],h()),e)]},e.elu=function(t,e,n){return[t.run(D(t,e[0],g(n.alpha),n.cacheKey),e)]},e.parseEluAttributes=function(t){return(0,o.createAttributeWithCacheKey)({alpha:t.attributes.getFloat("alpha",1)})},e.exp=function(t,e){return[t.run(D(t,e[0],y()),e)]},e.floor=function(t,e){return[t.run(D(t,e[0],m()),e)]},e.identity=function(t,e){return[t.run(D(t,e[0],b()),e)]},e.leakyRelu=function(t,e,n){return[t.run(D(t,e[0],w(n.alpha),n.cacheKey),e)]},e.parseLeakyReluAttributes=function(t){return(0,o.createAttributeWithCacheKey)({alpha:t.attributes.getFloat("alpha",.01)})},e.log=function(t,e){return[t.run(D(t,e[0],_()),e)]},e.neg=function(t,e){return[t.run(D(t,e[0],x()),e)]},e.not=function(t,e){return[t.run(D(t,e[0],T()),e)]},e.relu=function(t,e){return[t.run(D(t,e[0],O()),e)]},e.sigmoid=function(t,e){return[t.run(D(t,e[0],I()),e)]},e.sin=function(t,e){return[t.run(D(t,e[0],S()),e)]},e.sqrt=function(t,e){return[t.run(D(t,e[0],A()),e)]},e.tan=function(t,e){return[t.run(D(t,e[0],P()),e)]},e.tanh=function(t,e){return[t.run(D(t,e[0],E()),e)]}},540:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;var o=n(6757),a=n(5639),i=n(432),c=n(5614),s={name:"unpack",inputNames:["A"],inputTypes:[a.TextureType.packed]};e.createUnpackProgramInfo=function(t,e){var n=e.dims.length,u=(0,c.getChannels)("rc",n),l=u.slice(-2),p=(0,i.getCoordsDataType)(n),f=(0,c.unpackFromChannel)(),d=0===e.dims.length?"":function(t,e){if(1===t)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(n,u),h=n<=1?"rc":"vec2(".concat(l.join(","),")"),g=(0,o.getGlsl)(t.session.backend.glContext.version),y="\n    ".concat(f,"\n    void main() {\n      ").concat(p," rc = getOutputCoords();\n\n       // Sample the texture with the coords to get the rgba channel value.\n       vec4 packedInput = getA(").concat(d,");\n\n       ").concat(g.output," = vec4(getChannel(packedInput, ").concat(h,"), 0, 0, 0);\n     }\n   ");return r(r({},s),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:a.TextureType.unpacked},shaderSource:y})},e.createUnpackProgramInfoLoader=function(t,n){return r(r({},s),{get:function(){return(0,e.createUnpackProgramInfo)(t,n)}})}},7862:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;var r=n(7273);e.unsqueeze=function(t,e,n){o(e);var a=r.ShapeUtil.unsqueezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],a)]},e.unsqueezeV13=function(t,n){return a(n),(0,e.unsqueeze)(t,[n[0]],Array.from(n[1].integerData))},e.parseUnsqueezeAttributes=function(t){return t.attributes.getInts("axes")};var o=function(t){if(!t||1!==t.length)throw new Error("Unsqueeze requires 1 input.");if("string"===t[0].type)throw new Error("invalid input tensor types.")},a=function(t){if(!t||2!==t.length)throw new Error("Unsqueeze requires 2 inputs.");if("int32"!==t[1].type)throw new Error("Invalid input type.")}},3980:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;var i=n(4910),c=n(6757),s=n(5639),u={name:"Upsample",inputNames:["X"],inputTypes:[s.TextureType.unpacked]};e.upsample=function(t,n,o){return(0,e.validateInputs)(n,o),[t.run(r(r({},u),{cacheHint:o.cacheKey,get:function(){return l(t,n,o)}}),n)]},e.parseUpsampleAttributesV7=function(t){return(0,e.parseUpsampleAttributes)(t,7)},e.parseUpsampleAttributesV9=function(t){return(0,e.parseUpsampleAttributes)(t,9)},e.parseUpsampleAttributes=function(t,n){var r=n>=10,o=t.attributes.getString("mode","nearest");if("nearest"!==o&&"linear"!==o&&(n<11||"cubic"!==o))throw new Error("unrecognized mode: ".concat(o));var a=[];n<9&&(a=t.attributes.getFloats("scales"),(0,e.scalesValidation)(a,o,r));var c=t.attributes.getFloat("extrapolation_value",0),s=n>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(s))throw new Error("coordinate_transform_mode '".concat(s,"' is not supported"));var u="tf_crop_and_resize"===s,l=u,p="nearest"===o&&n>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(p))throw new Error("nearest_mode '".concat(p,"' is not supported"));var f=t.attributes.getFloat("cubic_coeff_a",-.75),d=0!==t.attributes.getInt("exclude_outside",0);if(d&&"cubic"!==o)throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");var h=n<11||"nearest"===o&&"asymmetric"===s&&"floor"===p,g=0,y=0,m=0;return n>10?t.inputs.length>2?(g=1,y=2,m=3):(y=1,m=2):9===n&&(y=1),(0,i.createAttributeWithCacheKey)({opset:n,isResize:r,mode:o,scales:a,extrapolationValue:c,coordinateTransformMode:s,useExtrapolation:l,needRoiInput:u,nearestMode:p,cubicCoefficientA:f,excludeOutside:d,useNearest2xOptimization:h,roiInputIdx:g,scalesInputIdx:y,sizesInputIdx:m})};var l=function(t,e,n){for(var a=(0,c.getGlsl)(t.session.backend.glContext.version),i=o(t.calculateTextureWidthAndHeight(e[0].dims,s.TextureType.unpacked),2),l=i[0],p=i[1],f=e[0].dims.map((function(t,e){return Math.floor(t*n.scales[e])})),d=o(t.calculateTextureWidthAndHeight(f,s.TextureType.unpacked),2),h=d[0],g=d[1],y=f.length,m=new Array(y),v=new Array(y),b="\n      int output_pitches[".concat(y,"];\n      int input_pitches[").concat(y,"];\n      "),w=y-1;w>=0;w--)m[w]=w===y-1?1:m[w+1]*f[w+1],v[w]=w===y-1?1:v[w+1]*e[0].dims[w+1],b+="\n        output_pitches[".concat(w,"] = ").concat(m[w],";\n        input_pitches[").concat(w,"] = ").concat(v[w],";\n        ");var _="\n      float getInputFloat(int index) {\n        vec2 coords = offsetToCoords(index, ".concat(l,", ").concat(p,");\n        float value = getColorAsFloat(").concat(a.texture2D,"(X, coords));\n        return value;\n      }\n      "),x="nearest"===n.mode?"\n    ".concat(_,"\n    float process(int indices[").concat(y,"]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(h,", ").concat(g,");\n\n      ").concat(b,"\n\n      int d, m;\n      for (int dim = 0; dim < ").concat(y,"; ++dim) {\n        d = output_index / output_pitches[dim];\n        m = output_index - d * output_pitches[dim];\n        output_index = m;\n\n        if (scales[dim] != 1 && d > 0) {\n          int d2 = d / scales[dim];\n          m = d - d2 * scales[dim];\n          d = d2;\n        }\n        input_index += input_pitches[dim] * d;\n      }\n\n      return getInputFloat(input_index);\n    }"):4===y?"\n    ".concat(_,"\n    float process(int indices[4]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(h,", ").concat(g,");\n\n      ").concat(b,"\n\n      int m;\n      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m / output_pitches[1];\n      m = m - index_of_dim1 * output_pitches[1];\n      index_of_dim2 = m / output_pitches[2];\n      m = m - index_of_dim2 * output_pitches[2];\n      index_of_dim3 = m;\n\n      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n      index_of_input_dim2 = index_of_dim2 / scales[2];\n      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n      index_of_input_dim3 = index_of_dim3 / scales[3];\n      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n      input_index = index_of_dim0 * input_pitches[0] +\n            index_of_dim1 * input_pitches[1] +\n            index_of_input_dim2 * input_pitches[2] +\n            index_of_input_dim3;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim2 = false;\n      if (index_of_input_dim2 == (").concat(e[0].dims[2]," - 1)) {\n        // It's the end in dimension 2\n        x01 = x00;\n        end_of_dim2 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[2]);\n      }\n\n      if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n        // It's the end in dimension 3\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n    }"):"\n    ".concat(_,"\n    float process(int indices[2]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(h,", ").concat(g,");\n\n      ").concat(b,"\n\n      int m;\n      int index_of_dim0, index_of_dim1;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m;\n\n      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n      index_of_input_dim0 = index_of_dim0 / scales[0];\n      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n      index_of_input_dim1 = index_of_dim1 / scales[1];\n      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim0 = false;\n      if (index_of_input_dim0 == (").concat(e[0].dims[0]," - 1)) {\n        // It's the end in dimension 0\n        x01 = x00;\n        end_of_dim0 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[0]);\n      }\n\n      if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n        // It's the end in dimension 1\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n    }");return r(r({},u),{output:{dims:f,type:e[0].type,textureType:s.TextureType.unpacked},shaderSource:x,variables:[{name:"scales",type:"int",arrayLength:n.scales.length,data:n.scales.map((function(t){return Math.ceil(t)}))}]})};e.validateInputs=function(t,e){if(!t||e.opset<9&&1!==t.length||e.opset>=9&&e.opset<11&&2!==t.length||e.opset>=11&&t.length<2)throw new Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw new Error("Invalid input shape.");if("string"===t[0].type)throw new Error("Invalid input tensor types.")},e.scalesValidation=function(t,e,n){var r,o,i,c;if(n)try{for(var s=a(t),u=s.next();!u.done;u=s.next())if(u.value<=0)throw new Error("Scale value should be greater than 0.")}catch(t){i={error:t}}finally{try{u&&!u.done&&(c=s.return)&&c.call(s)}finally{if(i)throw i.error}}else try{for(var l=a(t),p=l.next();!p.done;p=l.next())if(p.value<1)throw new Error("Scale value should be greater than or equal to 1.")}catch(t){r={error:t}}finally{try{p&&!p.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}if(!("linear"!==e&&"cubic"!==e||2===t.length||4===t.length&&1===t[0]&&1===t[1]))throw new Error("'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ".concat(n?"Resize":"Upsample"," opeartor."))}},2757:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;var a=n(2235),i=n(1315),c=n(8897),s=n(6757),u=function(){function t(t,e,n){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=n,this.repo=new Map,this.attributesBound=!1}return t.prototype.getArtifact=function(t){return this.repo.get(t)},t.prototype.setArtifact=function(t,e){this.repo.set(t,e)},t.prototype.run=function(t,e,n){var r,o=this;this.profiler.event("op","ProgramManager.run ".concat(null!==(r=t.programInfo.name)&&void 0!==r?r:"unknown kernel"),(function(){var r,a=o.glContext.gl,c=t.program;a.useProgram(c);try{o.bindOutput(n),o.attributesBound||o.bindAttributes(t.attribLocations),o.bindUniforms(t.uniformLocations,null!==(r=t.programInfo.variables)&&void 0!==r?r:[],e)}catch(e){throw i.Logger.error("ProgramManager",t.programInfo.shaderSource),e}o.profiler.event("backend","GlContext.draw()",(function(){o.glContext.draw()}))}),this.glContext)},t.prototype.dispose=function(){var t=this;this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach((function(e){return t.glContext.deleteProgram(e.program)}))},t.prototype.build=function(t,e,n){var r=this;return this.profiler.event("backend","ProgramManager.build",(function(){var o=new c.GlslPreprocessor(r.glContext,t,e,n),a=o.preprocess(),i=r.compile(a);return{programInfo:t,program:i,uniformLocations:r.getUniformLocations(i,o.context.programInfo.inputNames,o.context.programInfo.variables),attribLocations:r.getAttribLocations(i)}}))},t.prototype.compile=function(t){if(!this.vertexShader){i.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");var e=(0,s.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(e,this.glContext.gl.VERTEX_SHADER)}a.env.debug&&i.Logger.verbose("ProrgramManager","FragShader:\n".concat(t,"\n"));var n=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,n);return this.glContext.deleteShader(n),r},t.prototype.bindOutput=function(t){var e=t.width,n=t.height;i.Logger.verbose("ProrgramManager","Binding output texture to Framebuffer: w/h=".concat(e,"/").concat(n,", shape=").concat(t.shape,", type=").concat(t.tensor.type)),this.glContext.attachFramebuffer(t.texture,e,n)},t.prototype.bindAttributes=function(t){var e=t.position,n=t.textureCoord;this.glContext.setVertexAttributes(e,n),this.attributesBound=!0},t.prototype.bindUniforms=function(t,e,n){var r,a,i,c=this.glContext.gl,s=0,u=function(t,r,o,a){var u=null===(i=e.find((function(e){return e.name===t})))||void 0===i?void 0:i.data;if("sampler2D"!==r&&!u)throw new Error("variable '".concat(t,"' does not have data defined in program info"));switch(r){case"sampler2D":l.bindTexture(n[s],o,s),s++;break;case"float":a?c.uniform1fv(o,u):c.uniform1f(o,u);break;case"int":a?c.uniform1iv(o,u):c.uniform1i(o,u);break;default:throw new Error("Uniform not implemented: ".concat(r))}},l=this;try{for(var p=o(t),f=p.next();!f.done;f=p.next()){var d=f.value;u(d.name,d.type,d.location,d.arrayLength)}}catch(t){r={error:t}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(r)throw r.error}}},t.prototype.bindTexture=function(t,e,n){this.glContext.bindTextureToUniform(t.texture,n,e)},t.prototype.getAttribLocations=function(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}},t.prototype.getUniformLocations=function(t,e,n){var a,i,c,s,u=[];if(e)try{for(var l=o(e),p=l.next();!p.done;p=l.next()){var f=p.value;u.push({name:f,type:"sampler2D",location:this.getUniformLocation(t,f)})}}catch(t){a={error:t}}finally{try{p&&!p.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}if(n)try{for(var d=o(n),h=d.next();!h.done;h=d.next()){var g=h.value;u.push(r(r({},g),{location:this.getUniformLocation(t,g.name)}))}}catch(t){c={error:t}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(c)throw c.error}}return u},t.prototype.getUniformLocation=function(t,e){var n=this.glContext.gl.getUniformLocation(t,e);if(null===n)throw new Error("Uniform ".concat(e," not found."));return n},t.prototype.getAttribLocation=function(t,e){return this.glContext.gl.getAttribLocation(t,e)},t}();e.ProgramManager=u},2171:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;var r=n(1315),o=n(5881),a=n(7860),i=n(4110),c=n(2757),s=n(7618),u=n(5243),l=function(){function t(t,e){this.backend=t,this.context=e,this.layoutStrategy=new s.PreferLogicalStrategy(t.glContext.maxTextureSize),this.programManager=new c.ProgramManager(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new u.TextureManager(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===t.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}return t.prototype.createInferenceHandler=function(){return new a.WebGLInferenceHandler(this)},t.prototype.onGraphInitialized=function(t){var e=t.getValues().filter((function(t){return-1===t.from&&t.tensor})).map((function(t){return t.tensor.dataId}));this.initializers=new Set(e)},t.prototype.isInitializer=function(t){return!!this.initializers&&this.initializers.has(t)},t.prototype.addInitializer=function(t){this.initializers.add(t)},t.prototype.getTextureData=function(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)},t.prototype.setTextureData=function(t,e,n){void 0===n&&(n=!1),r.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),n?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)},t.prototype.dispose=function(){var t=this;this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((function(e){return t.textureManager.releaseTexture(e,!0)})),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((function(e){return t.textureManager.releaseTexture(e,!0)})),this.unpackedTextureDataCache=new Map},t.prototype.resolve=function(t,e,n){var r=(0,o.resolveOperator)(t,e,i.WEBGL_OP_RESOLVE_RULES);return{impl:r.opImpl,context:r.opInit?r.opInit(t,n):t}},t}();e.WebGLSessionHandler=l},9622:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;var r=n(1315),o=function(){function t(t,e){if(void 0===e&&(e=1),1===e)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else{if(4!==e)throw new Error("Invalid number of channels: ".concat(e));this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e}}return t.prototype.encode=function(t,e){var n,o;return t.constructor!==Float32Array&&(r.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),o=new Float32Array(t)),e*this.channelSize>t.length?(r.Logger.warning("Encoder","Source data too small. Allocating larger array"),o=t,n=this.allocate(e*this.channelSize),o.forEach((function(t,e){return n[e]=t}))):n=o=t,n},t.prototype.allocate=function(t){return new Float32Array(4*t)},t.prototype.decode=function(t,e){return 1===this.channelSize?t.filter((function(t,e){return e%4==0})).subarray(0,e):t.subarray(0,e)},t}();e.RedFloat32DataEncoder=o;var a=function(){function t(t,e,n){if(void 0===e&&(e=1),1!==e&&4!==e)throw new Error("Invalid number of channels: ".concat(e));this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=n||t.FLOAT}return t.prototype.encode=function(t,e){var n=t;return 1===this.channelSize&&(r.Logger.verbose("Encoder","Exploding into a larger array"),n=this.allocate(e),t.forEach((function(t,e){return n[4*e]=t}))),n},t.prototype.allocate=function(t){return new Float32Array(4*t)},t.prototype.decode=function(t,e){return 1===this.channelSize?t.filter((function(t,e){return e%4==0})).subarray(0,e):t.subarray(0,e)},t}();e.RGBAFloatDataEncoder=a;var i=function(){function t(t,e){if(void 0===e&&(e=1),this.channelSize=4,1===e)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else{if(4!==e)throw new Error("Invalid number of channels: ".concat(e));this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e}}return t.prototype.encode=function(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},t.prototype.allocate=function(t){return new Uint8Array(t*this.channelSize)},t.prototype.decode=function(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error("Invalid array type: ".concat(t.constructor))},t}();e.Uint8DataEncoder=i},7618:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;var r=n(1315),o=n(7273),a=function(){function t(t){this.maxTextureSize=t}return t.prototype.computeTextureWH=function(t,e){if(0===t.length)return[1,1];var n=this.maxTextureSize;if(e&&void 0!==e.breakAxis){var o=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((function(t,e){return t*e})),a=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((function(t,e){return t*e}));if(!(o>n||a>n))return[o,a];r.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:".concat(t,", breakAxis:").concat(e.breakAxis))}for(var i=t.reduce((function(t,e){return t*e})),c=Math.floor(Math.sqrt(i));c<n&&c<i&&i%c!=0;c++);if(c>=n||i%c!=0)throw new Error("The given dimensions are outside this GPU's boundaries: ".concat(t));return[c,i/c]},t}();e.AlwaysKeepOriginalSizeStrategy=a;var i=function(){function t(t){this.maxTextureSize=t}return t.prototype.computeTextureWH=function(t,e){var n=this.computeTexture(t,e);return e&&e.isPacked&&(n[0]/=2,n[1]/=2),e&&e.reverseWH?[n[1],n[0]]:n},t.prototype.computeTexture=function(t,e){var n=e&&e.isPacked;if(0===t.length)return n?[2,2]:[1,1];var o=this.maxTextureSize;if(e&&void 0!==e.breakAxis){var a=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((function(t,e){return t*e})),i=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((function(t,e){return t*e}));if(!(a>o||i>o))return[a,i];r.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:".concat(t,", breakAxis:").concat(e.breakAxis))}var s=t.slice(0);if(n&&(o*=2,1===(s=s.map((function(t,e){return e>=s.length-2?s[e]%2==0?s[e]:s[e]+1:s[e]}))).length&&(s=[2,s[0]])),2!==s.length){var u=c(s);s=u.newShape}var f=l(s);return s.length<=1&&f<=o?[1,f]:2===s.length&&s[0]<=o&&s[1]<=o?s:3===s.length&&s[0]*s[1]<=o&&s[2]<=o?[s[0]*s[1],s[2]]:3===s.length&&s[0]<=o&&s[1]*s[2]<=o?[s[0],s[1]*s[2]]:4===s.length&&s[0]*s[1]*s[2]<=o&&s[3]<=o?[s[0]*s[1]*s[2],s[3]]:4===s.length&&s[0]<=o&&s[1]*s[2]*s[3]<=o?[s[0],s[1]*s[2]*s[3]]:n?p(f/4).map((function(t){return 2*t})):p(f)},t}();function c(t,e){for(var n=[],r=[],o=null!=e&&Array.isArray(e)&&0===e.length,a=null==e||o?null:s(e,t).sort(),i=0,c=0;c<t.length;++c){if(null!=a){if(a[i]===c&&1!==t[c])throw new Error("Can't squeeze axis ".concat(c," since its dim '").concat(t[c],"' is not 1"));(null==a[i]||a[i]>c)&&1===t[c]&&(n.push(t[c]),r.push(c)),a[i]<=c&&i++}1!==t[c]&&(n.push(t[c]),r.push(c))}return{newShape:n,keptDims:r}}function s(t,e){var n=e.length;return t=null==t?e.map((function(t,e){return e})):[].concat(t),(0,o.assert)(t.every((function(t){return t>=-n&&t<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(t)})),(0,o.assert)(t.every(u),(function(){return"All values in axis param must be integers but "+"got axis ".concat(t)})),t.map((function(t){return t<0?n+t:t}))}function u(t){return t%1==0}function l(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function p(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}e.PreferLogicalStrategy=i,e.squeezeShape=c,e.parseAxisParam=s,e.isInt=u,e.sizeFromShape=l,e.getRowsCols=function(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]},e.sizeToSquarishShape=p,e.getBatchDim=function(t,e){return void 0===e&&(e=2),l(t.slice(0,t.length-e))}},3314:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;var o=n(7273),a=n(5639);e.createTextureLayoutFromTextureType=function(t,n,r){var o=r===a.TextureType.unpacked||r===a.TextureType.unpackedReversed?1:4,i=r===a.TextureType.packed,c=r===a.TextureType.unpackedReversed||r===a.TextureType.packed,s=r===a.TextureType.packedLastDimension?n.length-1:void 0,u=r===a.TextureType.packedLastDimension?n.map((function(t,e){return e===n.length-1?4*t:t})):void 0;return(0,e.createTextureLayoutFromShape)(t,n,o,u,{isPacked:i,reverseWH:c,breakAxis:s})},e.calculateTextureWidthAndHeight=function(t,n,r){var o=(0,e.createTextureLayoutFromTextureType)(t,n,r);return[o.width,o.height]},e.createTextureLayoutFromShape=function(t,e,n,a,i){void 0===n&&(n=1);var c=!(!i||!i.isPacked),s=r(t.computeTextureWH(c&&a||e,i),2),u=s[0],l=s[1],p=e.length,f=e.slice(0);if(0===p&&(f=[1]),1===n)a=e;else if(c){if(4!==n)throw new Error("a packed texture must be 4-channel");a=e,p>0&&(f[p-1]=Math.ceil(f[p-1]/2)),p>1&&(f[p-2]=Math.ceil(f[p-2]/2))}else if(!a)throw new Error("Unpacked shape is needed when using channels > 1");return{width:u,height:l,channels:n,isPacked:c,shape:f,strides:o.ShapeUtil.computeStrides(f),unpackedShape:a,reversedWH:i&&i.reverseWH}}},5243:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;var a=n(1315),i=function(){function t(t,e,n,r){this.glContext=t,this.layoutStrategy=e,this.profiler=n,this.config=r,this.pendingRead=new Map,r.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}return t.prototype.createTextureFromLayout=function(t,e,n,r){var o=this.toEncoderType(t),i=this.glContext.getEncoder(o,e.channels||1,r);if(e.isPacked&&1===r)throw new Error("not implemented");var c,s,u=e.width,l=e.height;if(this.config.reuseTextures){c="".concat(u,"x").concat(l,"_").concat(i.format,"_").concat(i.internalFormat,"_").concat(i.textureType),(s=this.inUseTextures.get(c))||(s=[],this.inUseTextures.set(c,s));var p=this.idleTextures.get(c);if(p&&p.length>0){var f=p.pop();return s.push(f),1===r&&this.glContext.updateTexture(f,u,l,i,this.toTextureData(t,n)),f}}a.Logger.verbose("TextureManager","Creating new texture of size ".concat(e.width,"x").concat(e.height));var d=this.glContext.allocateTexture(u,l,i,this.toTextureData(t,n));return this.config.reuseTextures&&(s.push(d),this.textureLookup.set(d,c)),d},t.prototype.readTexture=function(t,e,n){var r=this;return n||(n=1),this.profiler.event("backend","TextureManager.readTexture",(function(){var o=t.shape.reduce((function(t,e){return t*e}))*n,a=r.glContext.readTexture(t.texture,t.width,t.height,o,r.toEncoderType(e),n);return r.toTensorData(e,a)}))},t.prototype.readTextureAsync=function(t,e,n){return r(this,void 0,void 0,(function(){var a,i,c=this;return o(this,(function(s){return a=t.tensor.dataId,n||(n=1),this.pendingRead.has(a)?(i=this.pendingRead.get(a),[2,new Promise((function(t){return null==i?void 0:i.push(t)}))]):[2,this.profiler.event("backend","TextureManager.readTextureAsync",(function(){return r(c,void 0,void 0,(function(){var r,i,c,s;return o(this,(function(o){switch(o.label){case 0:return this.pendingRead.set(a,[]),r=t.shape.reduce((function(t,e){return t*e}))*n,[4,this.glContext.createAndWaitForFence()];case 1:return o.sent(),i=this.glContext.readTexture(t.texture,t.width,t.height,r,this.toEncoderType(e),n),c=this.toTensorData(e,i),s=this.pendingRead.get(a),this.pendingRead.delete(a),null==s||s.forEach((function(t){return t(c)})),[2,c]}}))}))}))]}))}))},t.prototype.readUint8TextureAsFloat=function(t){var e=this;return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",(function(){var n=t.shape.reduce((function(t,e){return t*e})),r=e.glContext.readTexture(t.texture,t.width,t.height,4*n,"byte",4);return new Float32Array(r.buffer,r.byteOffset,n)}))},t.prototype.releaseTexture=function(t,e){var n;if(this.config.reuseTextures&&(n=this.textureLookup.get(t.texture))){e&&this.textureLookup.delete(n);var r=this.inUseTextures.get(n);if(r){var o=r.indexOf(t.texture);if(-1!==o){r.splice(o,1);var i=this.idleTextures.get(n);i||(i=[],this.idleTextures.set(n,i)),i.push(t.texture)}}}n&&!e||(a.Logger.verbose("TextureManager","Deleting texture of size ".concat(t.width,"x").concat(t.height)),this.glContext.deleteTexture(t.texture))},t.prototype.toTensorData=function(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw new Error("TensorData type ".concat(t," is not supported"))}},t.prototype.toTextureData=function(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)},t.prototype.toEncoderType=function(t){return"float"},t.prototype.clearActiveTextures=function(){this.glContext.clearActiveTextures()},t}();e.TextureManager=i},5639:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(n=e.TextureType||(e.TextureType={}))[n.unpacked=0]="unpacked",n[n.unpackedReversed=1]="unpackedReversed",n[n.packed=2]="packed",n[n.downloadUint8AsFloat=3]="downloadUint8AsFloat",n[n.packedLastDimension=4]="packedLastDimension"},432:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;var a=n(7273);e.getPackedShape=function(t){var e=t.length;return t.slice(0,e-1).concat(t[e-1]/4)},e.repeatedTry=function(t,e,n){return void 0===e&&(e=function(t){return 0}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,new Promise((function(r,o){var a=0,i=function(){if(t())r();else{a++;var c=e(a);null!=n&&a>=n?o():setTimeout(i,c)}};i()}))]}))}))},e.generateShaderFuncNameFromInputSamplerName=function(t){return(0,a.assert)(void 0!==t&&0!==t.length,(function(){return"empty string found for sampler name"})),"get"+t.charAt(0).toUpperCase()+t.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(t){return(0,a.assert)(void 0!==t&&0!==t.length,(function(){return"empty string found for sampler name"})),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(t,e){return JSON.parse(JSON.stringify(t)),e},e.getSqueezedParams=function(t,e){return e.map((function(e){return t[e]})).join(", ")},e.getCoordsDataType=function(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank ".concat(t," is not yet supported"))},e.getGlChannels=function(t){return void 0===t&&(t=6),["x","y","z","w","u","v"].slice(0,t)}},3389:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;var r=n(1315),o=n(3524),a={};function i(t,e){var n,a={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!e||"webgl2"===e)&&(n=t.getContext("webgl2",a)))try{return new o.WebGLContext(n,2)}catch(t){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl2'. Error: ".concat(t))}if((!e||"webgl"===e)&&(n=t.getContext("webgl",a)||t.getContext("experimental-webgl",a)))try{return new o.WebGLContext(n,1)}catch(t){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ".concat(t))}throw new Error("WebGL is not supported")}e.createWebGLContext=function t(e){var n;if(e&&"webgl2"!==e||!("webgl2"in a)?e&&"webgl"!==e||!("webgl"in a)||(n=a.webgl):n=a.webgl2,!n)try{n=i(function(){if("undefined"==typeof OffscreenCanvas)throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}(),e)}catch(t){n=i(function(){if("undefined"==typeof document)throw new TypeError("failed to create canvas: document is not supported");var t=document.createElement("canvas");return t.width=1,t.height=1,t}(),e)}e=e||1===n.version?"webgl":"webgl2";var r=n.gl;return a[e]=n,r.isContextLost()?(delete a[e],t(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),n)},e.createNewWebGLContext=i},3524:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;var s=n(2235),u=a(n(9622)),l=n(432);function p(t){for(var e=0;e<t.length&&t[e]();++e);return e-1}e.linearSearchLastTrue=p;var f=function(){function t(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}return t.prototype.allocateTexture=function(t,e,n,r){var o=this.gl,a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);var i=r?n.encode(r,t*e):null;return o.texImage2D(o.TEXTURE_2D,0,n.internalFormat,t,e,0,n.format,n.textureType,i),this.checkError(),a},t.prototype.updateTexture=function(t,e,n,r,o){var a=this.gl;a.bindTexture(a.TEXTURE_2D,t);var i=r.encode(o,e*n);a.texSubImage2D(a.TEXTURE_2D,0,0,0,e,n,r.format,r.textureType,i),this.checkError()},t.prototype.attachFramebuffer=function(t,e,n){var r=this.gl;r.bindTexture(r.TEXTURE_2D,t),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.checkError(),r.viewport(0,0,e,n),r.scissor(0,0,e,n)},t.prototype.readTexture=function(t,e,n,r,o,a){var i=this.gl;a||(a=1),this.frameBufferBound||this.attachFramebuffer(t,e,n);var c=this.getEncoder(o,a),s=c.allocate(e*n);return i.bindTexture(i.TEXTURE_2D,t),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0),i.readPixels(0,0,e,n,i.RGBA,c.textureType,s),this.checkError(),c.decode(s,r)},t.prototype.isFramebufferReady=function(){return!0},t.prototype.getActiveTexture=function(){var t=this.gl,e=t.getParameter(this.gl.ACTIVE_TEXTURE);return"TEXTURE".concat(e-t.TEXTURE0)},t.prototype.getTextureBinding=function(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)},t.prototype.getFramebufferBinding=function(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)},t.prototype.setVertexAttributes=function(t,e){var n=this.gl;n.vertexAttribPointer(t,3,n.FLOAT,!1,20,0),n.enableVertexAttribArray(t),-1!==e&&(n.vertexAttribPointer(e,2,n.FLOAT,!1,20,12),n.enableVertexAttribArray(e)),this.checkError()},t.prototype.createProgram=function(t,e){var n=this.gl,r=n.createProgram();return n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),r},t.prototype.compileShader=function(t,e){var n=this.gl,r=n.createShader(e);if(!r)throw new Error("createShader() returned null with type ".concat(e));if(n.shaderSource(r,t),n.compileShader(r),!1===n.getShaderParameter(r,n.COMPILE_STATUS))throw new Error("Failed to compile shader: ".concat(n.getShaderInfoLog(r),"\nShader source:\n").concat(t));return r},t.prototype.deleteShader=function(t){this.gl.deleteShader(t)},t.prototype.bindTextureToUniform=function(t,e,n){var r=this.gl;r.activeTexture(r.TEXTURE0+e),this.checkError(),r.bindTexture(r.TEXTURE_2D,t),this.checkError(),r.uniform1i(n,e),this.checkError()},t.prototype.draw=function(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()},t.prototype.checkError=function(){if(s.env.debug){var t=this.gl,e=t.getError(),n="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:n="INVALID_ENUM";break;case t.INVALID_VALUE:n="INVALID_VALUE";break;case t.INVALID_OPERATION:n="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:n="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:n="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:n="CONTEXT_LOST_WEBGL";break;default:n="Unknown WebGL Error: ".concat(e.toString(16))}throw new Error(n)}},t.prototype.deleteTexture=function(t){this.gl.deleteTexture(t)},t.prototype.deleteProgram=function(t){this.gl.deleteProgram(t)},t.prototype.getEncoder=function(t,e,n){if(void 0===n&&(n=0),2===this.version)return new u.RedFloat32DataEncoder(this.gl,e);switch(t){case"float":return 1===n||this.isRenderFloat32Supported?new u.RGBAFloatDataEncoder(this.gl,e):new u.RGBAFloatDataEncoder(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new u.Uint8DataEncoder(this.gl,e);default:throw new Error("Invalid dataType: ".concat(t))}},t.prototype.clearActiveTextures=function(){for(var t=this.gl,e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)},t.prototype.dispose=function(){if(!this.disposed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}},t.prototype.createDefaultGeometry=function(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])},t.prototype.createVertexbuffer=function(){var t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");var n=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),this.checkError(),e},t.prototype.createFramebuffer=function(){var t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t},t.prototype.queryVitalParameters=function(){var t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version},t.prototype.getExtensions=function(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))},t.prototype.checkFloatTextureAttachableToFrameBuffer=function(){var t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);var n=2===this.version?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,t.RGBA,t.FLOAT,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),o},t.prototype.checkRenderFloat32=function(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer},t.prototype.checkFloat32Download=function(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else{if(!this.textureFloatExtension)return!1;if(!this.gl.getExtension("WEBGL_color_buffer_float"))return!1}return this.isFloatTextureAttachableToFrameBuffer},t.prototype.checkFloat32Blend=function(){var t,e,n,r,o,a=this.gl;try{t=a.createTexture(),e=a.createFramebuffer(),a.bindTexture(a.TEXTURE_2D,t);var i=2===this.version?a.RGBA32F:a.RGBA;return a.texImage2D(a.TEXTURE_2D,0,i,1,1,0,a.RGBA,a.FLOAT,null),a.bindFramebuffer(a.FRAMEBUFFER,e),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t,0),a.enable(a.BLEND),!!(n=a.createShader(a.VERTEX_SHADER))&&(a.shaderSource(n,"void main(){}"),a.compileShader(n),!!(r=a.createShader(a.FRAGMENT_SHADER))&&(a.shaderSource(r,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),a.compileShader(r),!!(o=a.createProgram())&&(a.attachShader(o,n),a.attachShader(o,r),a.linkProgram(o),a.useProgram(o),a.drawArrays(a.POINTS,0,1),a.getError()===a.NO_ERROR)))}finally{a.disable(a.BLEND),o&&a.deleteProgram(o),n&&a.deleteShader(n),r&&a.deleteShader(r),e&&(a.bindFramebuffer(a.FRAMEBUFFER,null),a.deleteFramebuffer(e)),t&&(a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(t))}},t.prototype.beginTimer=function(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){var t=this.gl,e=this.disjointTimerQueryWebgl2Extension,n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}throw new Error("WebGL1 profiling currently not supported.")},t.prototype.endTimer=function(){if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");var t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT)},t.prototype.isTimerResultAvailable=function(t){var e,n;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");var r=this.gl,o=this.disjointTimerQueryWebgl2Extension;return e=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE),n=r.getParameter(o.GPU_DISJOINT_EXT),e&&!n},t.prototype.getTimerResult=function(t){var e;if(2!==this.version)throw new Error("WebGL1 profiling currently not supported");var n=this.gl;return e=n.getQueryParameter(t,n.QUERY_RESULT),n.deleteQuery(t),e/1e6},t.prototype.waitForQueryAndGetTime=function(t){return i(this,void 0,void 0,(function(){var e=this;return c(this,(function(n){switch(n.label){case 0:return[4,(0,l.repeatedTry)((function(){return e.isTimerResultAvailable(t)}))];case 1:return n.sent(),[2,this.getTimerResult(t)]}}))}))},t.prototype.createAndWaitForFence=function(){return i(this,void 0,void 0,(function(){var t;return c(this,(function(e){return t=this.createFence(this.gl),[2,this.pollFence(t)]}))}))},t.prototype.createFence=function(t){var e=t,n=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),{query:n,isFencePassed:null===n?function(){return!0}:function(){var t=e.clientWaitSync(n,0,0);return t===e.ALREADY_SIGNALED||t===e.CONDITION_SATISFIED}}},t.prototype.pollFence=function(t){return i(this,void 0,void 0,(function(){var e=this;return c(this,(function(n){return[2,new Promise((function(n){e.addItemToPoll((function(){return t.isFencePassed()}),(function(){return n()}))}))]}))}))},t.prototype.pollItems=function(){for(var t=p(this.itemsToPoll.map((function(t){return t.isDoneFn}))),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){return i(this,void 0,void 0,(function(){var n=this;return c(this,(function(r){switch(r.label){case 0:return this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1?[2]:[4,(0,l.repeatedTry)((function(){return n.pollItems(),0===n.itemsToPoll.length}))];case 1:return r.sent(),[2]}}))}))},t}();e.WebGLContext=f},6496:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},c=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;var s=n(1315),u=function(t,e){this.op=t,this.node=e},l=function(){function t(t,e,n){this.graph=t,this.profiler=n,this.initialize(e)}return t.prototype.initialize=function(t){var e=this;this.profiler.event("session","ExecutionPlan.initialize",(function(){var n=e.graph.getNodes();if(n.length!==t.length)throw new Error("The size of nodes and OPs do not match.");e._ops=t.map((function(t,e){return new u(t,n[e])})),e.reset(),e._starter=[],e._ops.forEach((function(t,n){var r,o,i=!0;try{for(var c=a(t.node.inputs),s=c.next();!s.done;s=c.next()){var u=s.value;if(!e._values[u]&&-1===e.graph.getInputIndices().indexOf(u)){i=!1;break}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}i&&e._starter.push(n)}))}))},t.prototype.reset=function(){this._values=this.graph.getValues().map((function(t){return t.tensor}))},t.prototype.execute=function(t,e){return r(this,void 0,void 0,(function(){var n=this;return o(this,(function(u){return[2,this.profiler.event("session","ExecutionPlan.execute",(function(){return r(n,void 0,void 0,(function(){var n,u,l,p,f,d,h,g,y,m,v,b,w=this;return o(this,(function(_){switch(_.label){case 0:if(this.reset(),n=t.createInferenceHandler(),u=this.graph.getInputIndices(),e.length!==u.length)throw new Error("number of input tensors don't match the number of inputs to the model: actual: ".concat(e.length," expected: ").concat(u.length));e.forEach((function(t,e){var n=u[e];w._values[n]=t})),l=this._starter.slice(0),p=this.graph.getValues(),f=this.graph.getNodes(),d=0,h=function(){var t,e,u,h,y,m;return o(this,(function(v){switch(v.label){case 0:if(t=l[d++],e=g._ops[t],u=e.node.inputs.map((function(t){return w._values[t]})),-1!==u.indexOf(void 0))throw new Error("unresolved input detected: op: ".concat(e.node));return h=u,s.Logger.verbose("ExecPlan","Runing op:".concat(e.node.name," (").concat(h.map((function(t,n){return"'".concat(e.node.inputs[n],"': ").concat(t.type,"[").concat(t.dims.join(","),"]")})).join(", "),")")),[4,g.profiler.event("node",e.node.name,(function(){return r(w,void 0,void 0,(function(){return o(this,(function(t){return[2,e.op.impl(n,h,e.op.context)]}))}))}))];case 1:if((y=v.sent()).length!==e.node.outputs.length)throw new Error("the size of output does not match model definition.");return y.forEach((function(t,n){var r=e.node.outputs[n];if(w._values[r])throw new Error("output [".concat(r,"] already has value: op:").concat(e.node.name));w._values[r]=t})),m=new Set,y.forEach((function(t,n){var r,o,i,c,s=e.node.outputs[n];try{for(var u=(r=void 0,a(p[s].to)),l=u.next();!l.done;l=u.next()){var d=l.value,h=f[d],g=!0;try{for(var y=(i=void 0,a(h.inputs)),v=y.next();!v.done;v=y.next()){var b=v.value;if(!w._values[b]){g=!1;break}}}catch(t){i={error:t}}finally{try{v&&!v.done&&(c=y.return)&&c.call(y)}finally{if(i)throw i.error}}g&&m.add(d)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}})),l.push.apply(l,c([],i(m),!1)),[2]}}))},g=this,_.label=1;case 1:return d<l.length?[5,h()]:[3,3];case 2:return _.sent(),[3,1];case 3:y=[],m=0,_.label=4;case 4:if(!(m<this.graph.getOutputIndices().length))return[3,9];if(v=this.graph.getOutputIndices()[m],void 0===(b=this._values[v]))throw new Error("required output [".concat(v,"] does not have value"));return 0!==v?[3,6]:[4,b.getData()];case 5:return _.sent(),[3,7];case 6:b.data,_.label=7;case 7:y.push(b),_.label=8;case 8:return m++,[3,4];case 9:return s.Logger.verbose("ExecPlan","disposing of inferenceHandler"),n.dispose(),[2,y]}}))}))}))]}))}))},t}();e.ExecutionPlan=l},4662:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var o=n(6874),a=n(5127),i=n(2446),c=n(9240),s=n(7273),u=a.onnxruntime.experimental.fbs;e.Graph={from:function(t,e){return new f(t,e)}};var l=function(){function t(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=s.ProtoUtil.tensorValueTypeFromProto(t.type.tensorType))}return Object.defineProperty(t.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this._to},enumerable:!1,configurable:!0}),t}(),p=function(t,e){t instanceof i.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new o.Attribute(t.attribute)):t instanceof u.Node&&(this.name=null!=e?e:t.name(),this.opType=t.opType(),this.attributes=new o.Attribute(s.ProtoUtil.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0},f=function(){function t(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}return t.prototype.getInputIndices=function(){return this._allInputIndices},t.prototype.getInputNames=function(){return this._allInputNames},t.prototype.getOutputIndices=function(){return this._allOutputIndices},t.prototype.getOutputNames=function(){return this._allOutputNames},t.prototype.getValues=function(){return this._allData},t.prototype.getNodes=function(){return this._nodes},t.prototype.buildGraph=function(t){if(t instanceof i.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else{if(!(t instanceof u.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(t)}},t.prototype.buildGraphFromOnnxFormat=function(t){var e,n,o,a,i,u,f,d,h,g,y,m,v=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];var b=new Map;if(!t.input)throw new Error("missing information in graph: input");var w=[];try{for(var _=r(t.input),x=_.next();!x.done;x=_.next()){var T=x.value;if(v.has(T.name))throw new Error("duplicated input name: ".concat(T.name));var S=this._allData.push(new l(T))-1;v.set(T.name,S),w.push(T.name)}}catch(t){e={error:t}}finally{try{x&&!x.done&&(n=_.return)&&n.call(_)}finally{if(e)throw e.error}}if(!t.initializer)throw new Error("missing information in graph: initializer");try{for(var O=r(t.initializer),I=O.next();!I.done;I=O.next()){T=I.value;var A=v.get(T.name);if(void 0===A){var P=new l;P.type={shape:{dims:s.ProtoUtil.tensorDimsFromProto(T.dims)},tensorType:s.ProtoUtil.tensorDataTypeFromProto(T.dataType)},A=this._allData.push(P)-1,v.set(T.name,A)}this._allData[A]._from=-1,this._allData[A].tensor=c.Tensor.fromProto(T)}}catch(t){o={error:t}}finally{try{I&&!I.done&&(a=O.return)&&a.call(O)}finally{if(o)throw o.error}}for(T=0;T<this._allData.length;T++)this._allData[T].tensor||(this._allInputIndices.push(T),this._allInputNames.push(w[T]));if(!t.output)throw new Error("missing information in graph: output");try{for(var E=r(t.output),k=E.next();!k.done;k=E.next()){if(T=k.value,v.has(T.name))throw new Error("duplicated output name: ".concat(T.name));S=this._allData.push(new l(T))-1,v.set(T.name,S),this._allOutputIndices.push(S),this._allOutputNames.push(T.name)}}catch(t){i={error:t}}finally{try{k&&!k.done&&(u=E.return)&&u.call(E)}finally{if(i)throw i.error}}if(!t.node)throw new Error("missing information in graph: node");try{for(var D=r(t.node),C=D.next();!C.done;C=D.next()){if(!(L=C.value).name)for(var R=0;;R++){var M="unnamed_".concat(L.opType,"_").concat(R);if(!b.has(M)){L.name=M;break}}if(b.has(L.name))throw new Error("duplicated node name: ".concat(L.name));S=this._nodes.push(new p(L))-1,b.set(L.name,S)}}catch(t){f={error:t}}finally{try{C&&!C.done&&(d=D.return)&&d.call(D)}finally{if(f)throw f.error}}for(T=0;T<this._nodes.length;T++){var j=this._nodes[T];if(!(L=t.node[T]).output)throw new Error("missing output for node: ".concat(L.name));try{for(var B=(h=void 0,r(L.output)),z=B.next();!z.done;z=B.next()){var N=z.value;if(void 0===(U=v.get(N))&&(U=this._allData.push(new l)-1,v.set(N,U)),j.outputs.push(U),void 0!==this._allData[U]._from)throw new Error("multiple nodes output to one data value: ".concat(U));if(this._allData[U]._from=T,"Constant"===L.opType){if(!L.attribute||1!==L.attribute.length||!L.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!L.output||1!==L.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");j.outputs.pop(),j.executeNode=!1,this._allData[U]._from=-1,this._allData[U].tensor=c.Tensor.fromProto(L.attribute[0].t)}}}catch(t){h={error:t}}finally{try{z&&!z.done&&(g=B.return)&&g.call(B)}finally{if(h)throw h.error}}}for(T=0;T<this._nodes.length;T++){var L;if(j=this._nodes[T],!(L=t.node[T]).input)throw new Error("missing input for node: ".concat(L.name));try{for(var F=(y=void 0,r(L.input)),G=F.next();!G.done;G=F.next()){var U,V=G.value;if(void 0===(U=v.get(V))){if(""===V&&(3===L.input.length||4===L.input.length)&&"Resize"===L.opType)continue;throw new Error("unrecognized input '".concat(V,"' for node: ").concat(L.name))}j.inputs.push(U),this._allData[U]._to.push(T)}}catch(t){y={error:t}}finally{try{G&&!G.done&&(m=F.return)&&m.call(F)}finally{if(y)throw y.error}}}return!0},t.prototype.buildGraphFromOrtFormat=function(t){var e,n,r,o=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];for(var a=new Map,i=[],f=0;f<t.inputsLength();f++){var d=t.inputs(f);if(o.has(d))throw new Error("duplicated input name: ".concat(d));for(var h=0;h<t.nodeArgsLength();h++)if((null===(e=t.nodeArgs(h))||void 0===e?void 0:e.name())===d){var g=new l;if((null===(r=null===(n=t.nodeArgs(h))||void 0===n?void 0:n.type())||void 0===r?void 0:r.valueType())!==u.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");for(var y=t.nodeArgs(h).type().value(new u.TensorTypeAndShape),m=s.ProtoUtil.tensorDataTypeFromProto(y.elemType()),v=y.shape(),b=[],w=0;w<v.dimLength();w++)b.push(s.LongUtil.longToNumber(v.dim(w).value().dimValue()));g.type={shape:{dims:b},tensorType:m};var _=this._allData.push(g)-1;o.set(d,_),i.push(d)}}for(f=0;f<t.initializersLength();f++){var x=t.initializers(f),T=o.get(x.name());void 0===T&&(g=new l,b=s.ProtoUtil.tensorDimsFromORTFormat(x),m=s.ProtoUtil.tensorDataTypeFromProto(x.dataType()),g.type={shape:{dims:b},tensorType:m},T=this._allData.push(g)-1,o.set(x.name(),T)),this._allData[T]._from=-1,this._allData[T].tensor=c.Tensor.fromOrtTensor(x)}for(f=0;f<this._allData.length;f++)this._allData[f].tensor||(this._allInputIndices.push(f),this._allInputNames.push(i[f]));for(f=0;f<t.outputsLength();f++){var S=t.outputs(f);if(o.has(S))throw new Error("duplicated output name: ".concat(S));_=this._allData.push(new l)-1,o.set(S,_),this._allOutputIndices.push(_),this._allOutputNames.push(S)}if(!t.nodes)throw new Error("missing information in graph: node");for(f=0;f<t.nodesLength();f++){var O=(E=t.nodes(f)).name();if(!O)for(var I=0;O="unnamed_".concat(E.opType(),"_").concat(I),a.has(O);I++);if(a.has(O))throw new Error("duplicated node name: ".concat(O));_=this._nodes.push(new p(E,O))-1,a.set(O,_)}for(f=0;f<this._nodes.length;f++){var A=this._nodes[f];if(null==(E=t.nodes(f)))throw new Error("No node exists at index ".concat(f));if(0===(null==E?void 0:E.outputsLength()))throw new Error("missing output for node: ".concat(E.name));for(h=0;h<(null==E?void 0:E.outputsLength());h++){var P=null==E?void 0:E.outputs(h);if(void 0===(k=o.get(P))&&(k=this._allData.push(new l)-1,o.set(P,k)),A.outputs.push(k),void 0!==this._allData[k]._from)throw new Error("multiple nodes output to one data value: ".concat(k));if(this._allData[k]._from=f,"Constant"===E.opType()){if(1!==E.attributesLength()||!E.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==E.outputsLength())throw new Error("missing output or incorrect number of outputs for this Constant operator");A.outputs.pop(),A.executeNode=!1,this._allData[k]._from=-1,this._allData[k].tensor=c.Tensor.fromOrtTensor(E.attributes(0).t())}}}for(f=0;f<this._nodes.length;f++){var E;if(A=this._nodes[f],0===(E=t.nodes(f)).inputsLength())throw new Error("missing input for node: ".concat(E.name));for(h=0;h<E.inputsLength();h++){var k,D=E.inputs(h);if(void 0===(k=o.get(D)))throw new Error("unrecognized input '".concat(D,"' for node: ").concat(E.name()));A.inputs.push(k),this._allData[k]._to.push(f)}}},t.prototype.checkIsAcyclic=function(){var t=this,e=new Set;this._allInputIndices.forEach((function(n){t._allData[n]._to.forEach((function(t){e.add(t)}))}));for(var n=Array.from(e),r=new Array(this._nodes.length).fill("white"),o=function(){var e=n.pop();"gray"===r[e]?r[e]="black":(n.push(e),r[e]="gray",a._nodes[e].outputs.forEach((function(o){var a=t._allData[o];if(void 0!==a.tensor)throw new Error("node outputs should not be initialized");if(a._from!==e)throw new Error("from property of the Value object doesn't match index of Node being processed");a._to.forEach((function(t){if("gray"===r[t])throw new Error("model graph is cyclic");"white"===r[t]&&n.push(t)}))})))},a=this;n.length>0;)o()},t.prototype.transformGraph=function(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()},t.prototype.finalizeGraph=function(){for(var t=this,e=0,n=new Array(this._nodes.length,0),r=0,o=0;o<this._nodes.length;o++)n[o]=r,this._nodes[o].executeNode?(r!==o&&(this._nodes[r]=this._nodes[o]),r++):this._nodes[o].outputs.forEach((function(e){t._allData[e]._from=-2}));for(this._nodes.splice(r,this._nodes.length-r),o=0;o<this._allData.length;o++){var a=this._allData[o];void 0!==a._from&&-1!==a._from&&-2!==a._from&&(a._from=n[a._from]);for(var i=0;i<a._to.length;i++){if(!(a._to[i]>=0))throw new Error("Trying to update a removed node");a._to[i]=n[a._to[i]]}}e=0;var c,s=function(n){if(-2===u._allData[n].from&&-1===u._allOutputIndices.indexOf(n+e))return e++,u._allData.splice(n,1),n--,c=n,"continue";if(e>0){var r=-1;void 0!==u._allData[n].from&&-1!==u._allData[n].from?-1!==(r=u._nodes[u._allData[n].from].outputs.indexOf(n+e))&&(u._nodes[u._allData[n].from].outputs[r]=n):-1!==(r=u._allInputIndices.indexOf(n+e))&&(u._allInputIndices[r]=n),u._allData[n].to.forEach((function(o){-1!==(r=t._nodes[o].inputs.indexOf(n+e))&&(t._nodes[o].inputs[r]=n)})),0===u._allData[n].to.length&&-1!==(r=u._allOutputIndices.indexOf(n+e))&&(u._allOutputIndices[r]=n)}c=n},u=this;for(o=0;o<this._allData.length;o++)s(o),o=c},t.prototype.deleteNode=function(t){var e,n,o=this._nodes[t];if(o.outputs.length>1)for(var a=1;a<o.outputs.length;a++)if(this._allData[o.outputs[a]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");o.executeNode=!1;var i=o.inputs[0],c=o.outputs[0],s=this._allData[c].to;for(a=0;a<o.inputs.length;a++){var u=this._allData[o.inputs[a]].to.indexOf(t);if(-1===u)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[o.inputs[a]].to.splice(u,1)}this._allData[c]._to=[];var l=this._allOutputIndices.indexOf(c);if(-1!==l&&(this._allOutputIndices[l]=i),s&&s.length>0)try{for(var p=r(s),f=p.next();!f.done;f=p.next()){var d=f.value,h=this._nodes[d].inputs.indexOf(c);if(-1===h)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[d].inputs[h]=i,this._allData[i].to.push(d)}}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}},t.prototype.removeAllDropoutNodes=function(){var t,e,n=0;try{for(var o=r(this._nodes),a=o.next();!a.done;a=o.next()){var i=a.value;if("Dropout"===i.opType){if(1!==i.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==i.outputs.length&&2!==i.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===i.outputs.length&&0!==this._allData[i.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(n)}n++}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.removeAllIdentityNodes=function(){var t,e,n=0;try{for(var o=r(this._nodes),a=o.next();!a.done;a=o.next())"Identity"===a.value.opType&&this.deleteNode(n),n++}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.isActivation=function(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}},t.prototype.fuseConvActivationNodes=function(){var t,e;try{for(var n=r(this._nodes),o=n.next();!o.done;o=n.next()){var a=o.value;if("Conv"===a.opType){var i=this._allData[a.outputs[0]]._to;if(1===i.length&&this.isActivation(this._nodes[i[0]])){var c=this._nodes[i[0]];if("Clip"===c.opType)if(1===c.inputs.length)try{a.attributes.set("activation_params","floats",[c.attributes.getFloat("min"),c.attributes.getFloat("max")])}catch(t){a.attributes.set("activation_params","floats",[s.MIN_CLIP,s.MAX_CLIP])}else{if(!(c.inputs.length>=3&&void 0!==this._allData[c.inputs[1]].tensor&&void 0!==this._allData[c.inputs[2]].tensor))continue;a.attributes.set("activation_params","floats",[this._allData[c.inputs[1]].tensor.floatData[0],this._allData[c.inputs[2]].tensor.floatData[0]])}a.attributes.set("activation","string",c.opType),this.deleteNode(i[0])}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t}()},1315:function(t,e){"use strict";var n,r,o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;var i=function(){function t(){}return t.prototype.log=function(t,e,n){},t}(),c=function(){function t(){}return t.prototype.log=function(t,e,n){console.log("".concat(this.color(t)," ").concat(n?"[35m"+n+"[0m ":"").concat(e))},t.prototype.color=function(t){switch(t){case"verbose":return"[34;40mv[0m";case"info":return"[32mi[0m";case"warning":return"[30;43mw[0m";case"error":return"[31;40me[0m";case"fatal":return"[101mf[0m";default:throw new Error("unsupported severity: ".concat(t))}},t}(),s={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},u=((n={}).none=new i,n.console=new c,n),l={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},p=((r={})[""]=l,r);function f(t,e,n,r){if(void 0===e)return o=t,{verbose:f.verbose.bind(null,o),info:f.info.bind(null,o),warning:f.warning.bind(null,o),error:f.error.bind(null,o),fatal:f.fatal.bind(null,o)};if(void 0===n)d(t,e);else if("number"==typeof n&&void 0===r)d(t,e);else if("string"==typeof n&&void 0===r)d(t,n,0,e);else{if("string"!=typeof n||"number"!=typeof r)throw new TypeError("input is valid");d(t,n,0,e)}var o}function d(t,e,n,r){var o=p[r||""]||p[""];s[t]<s[o.minimalSeverity]||(o.logDateTime&&(e="".concat((new Date).toISOString(),"|").concat(e)),o.logSourceLocation,u[o.provider].log(t,e,r))}!function(t){function e(t){p={},n("",t||{})}function n(t,n){if("*"===t)e(n);else{var r=p[t]||l;p[t]={provider:n.provider||r.provider,minimalSeverity:n.minimalSeverity||r.minimalSeverity,logDateTime:void 0===n.logDateTime?r.logDateTime:n.logDateTime,logSourceLocation:void 0===n.logSourceLocation?r.logSourceLocation:n.logSourceLocation}}}t.verbose=function(e,n){t("verbose",e,n)},t.info=function(e,n){t("info",e,n)},t.warning=function(e,n){t("warning",e,n)},t.error=function(e,n){t("error",e,n)},t.fatal=function(e,n){t("fatal",e,n)},t.reset=e,t.set=n,t.setWithEnv=function(t){var e={};t.logLevel&&(e.minimalSeverity=t.logLevel),n("",e)}}(f||(f={})),e.Logger=f;var h=function(){function t(t,e,n,r,o,a){this.category=t,this.name=e,this.startTime=n,this.endCallback=r,this.timer=o,this.ctx=a}return t.prototype.end=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this.endCallback(this)]}))}))},t.prototype.checkTimer=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){if(void 0===this.ctx||void 0===this.timer)throw new Error("No webgl timer found");return this.ctx.endTimer(),[2,this.ctx.waitForQueryAndGetTime(this.timer)]}))}))},t}(),g=function(t,e,n,r){this.category=t,this.name=e,this.startTime=n,this.endTime=r},y=function(){function t(t,e,n){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===t?1e4:t,this._flushBatchSize=void 0===e?10:e,this._flushIntervalInMilliseconds=void 0===n?5e3:n}return t.create=function(t){return void 0===t?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)},t.prototype.start=function(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0},t.prototype.stop=function(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])},t.prototype.event=function(t,e,n,r){var i=this,c=this._started?this.begin(t,e,r):void 0,s=!1,u=n();if(u&&"function"==typeof u.then)return s=!0,new Promise((function(t,e){u.then((function(e){return o(i,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return c?[4,c.end()]:[3,2];case 1:n.sent(),n.label=2;case 2:return t(e),[2]}}))}))}),(function(t){return o(i,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return c?[4,c.end()]:[3,2];case 1:n.sent(),n.label=2;case 2:return e(t),[2]}}))}))}))}));if(!s&&c){var l=c.end();if(l&&"function"==typeof l.then)return new Promise((function(t,e){l.then((function(){t(u)}),(function(t){e(t)}))}))}return u},t.prototype.begin=function(t,n,r){var i=this;if(!this._started)throw new Error("profiler is not started yet");if(void 0===r){var c=(0,e.now)();return this.flush(c),new h(t,n,c,(function(t){return i.endSync(t)}))}var s=r.beginTimer();return new h(t,n,0,(function(t){return o(i,void 0,void 0,(function(){return a(this,(function(e){return[2,this.end(t)]}))}))}),s,r)},t.prototype.end=function(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,t.checkTimer()];case 1:return e=n.sent(),this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new g(t.category,t.name,t.startTime,e)),this.flush(e)),[2]}}))}))},t.prototype.endSync=function(t){var n=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new g(t.category,t.name,t.startTime,n)),this.flush(n))},t.prototype.logOneEvent=function(t){e.Logger.verbose("Profiler.".concat(t.category),"".concat((t.endTime-t.startTime).toFixed(2),"ms on event '").concat(t.name,"' at ").concat(t.endTime.toFixed(2)))},t.prototype.flush=function(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(var n=this._flushPointer;this._flushPointer<n+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!1,configurable:!0}),t}();e.Profiler=y,e.now="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now},1745:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var r=n(5686),o=n(4662),a=n(5127),i=n(2446),c=n(7273),s=a.onnxruntime.experimental.fbs,u=function(){function t(){}return t.prototype.load=function(t,e,n){if(!n)try{return void this.loadFromOnnxFormat(t,e)}catch(t){if(void 0!==n)throw t}this.loadFromOrtFormat(t,e)},t.prototype.loadFromOnnxFormat=function(t,e){var n=i.onnx.ModelProto.decode(t);if(c.LongUtil.longToNumber(n.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=n.opsetImport.map((function(t){return{domain:t.domain,version:c.LongUtil.longToNumber(t.version)}})),this._graph=o.Graph.from(n.graph,e)},t.prototype.loadFromOrtFormat=function(t,e){var n=new r.flatbuffers.ByteBuffer(t),a=s.InferenceSession.getRootAsInferenceSession(n).model();if(c.LongUtil.longToNumber(a.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(var i=0;i<a.opsetImportLength();i++){var u=a.opsetImport(i);this._opsets.push({domain:null==u?void 0:u.domain(),version:c.LongUtil.longToNumber(u.version())})}this._graph=o.Graph.from(a.graph(),e)},Object.defineProperty(t.prototype,"graph",{get:function(){return this._graph},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opsets",{get:function(){return this._opsets},enumerable:!1,configurable:!0}),t}();e.Model=u},6145:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},5881:function(t,e){"use strict";var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function r(t,e){if(e.endsWith("+")){var n=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(n)&&n<=t}if(2===e.split("-").length){var r=e.split("-"),o=(n=Number.parseInt(r[0],10),Number.parseInt(r[1],10));return!isNaN(n)&&!isNaN(o)&&n<=t&&t<=o}return Number.parseInt(e,10)===t}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(t,e,o){var a,i,c,s;try{for(var u=n(o),l=u.next();!l.done;l=u.next()){var p=l.value,f=p[0],d=p[1],h=p[2],g=p[3],y=p[4];if(t.opType===f)try{for(var m=(c=void 0,n(e)),v=m.next();!v.done;v=m.next()){var b=v.value;if((b.domain===d||"ai.onnx"===b.domain&&""===d)&&r(b.version,h))return{opImpl:g,opInit:y}}}catch(t){c={error:t}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(c)throw c.error}}}}catch(t){a={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}throw new TypeError("cannot resolve operator '".concat(t.opType,"' with opsets: ").concat(e.map((function(t){return"".concat(t.domain||"ai.onnx"," v").concat(t.version)})).join(", ")))}},5127:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;var r,o,a,i,c=n(5686);r=e.onnxruntime||(e.onnxruntime={}),o=r.experimental||(r.experimental={}),a=o.fbs||(o.fbs={}),(i=a.AttributeType||(a.AttributeType={}))[i.UNDEFINED=0]="UNDEFINED",i[i.FLOAT=1]="FLOAT",i[i.INT=2]="INT",i[i.STRING=3]="STRING",i[i.TENSOR=4]="TENSOR",i[i.GRAPH=5]="GRAPH",i[i.FLOATS=6]="FLOATS",i[i.INTS=7]="INTS",i[i.STRINGS=8]="STRINGS",i[i.TENSORS=9]="TENSORS",i[i.GRAPHS=10]="GRAPHS",i[i.SPARSE_TENSOR=11]="SPARSE_TENSOR",i[i.SPARSE_TENSORS=12]="SPARSE_TENSORS",function(t){!function(t){!function(t){var e;(e=t.DimensionValueType||(t.DimensionValueType={}))[e.UNKNOWN=0]="UNKNOWN",e[e.VALUE=1]="VALUE",e[e.PARAM=2]="PARAM"}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e;(e=t.TensorDataType||(t.TensorDataType={}))[e.UNDEFINED=0]="UNDEFINED",e[e.FLOAT=1]="FLOAT",e[e.UINT8=2]="UINT8",e[e.INT8=3]="INT8",e[e.UINT16=4]="UINT16",e[e.INT16=5]="INT16",e[e.INT32=6]="INT32",e[e.INT64=7]="INT64",e[e.STRING=8]="STRING",e[e.BOOL=9]="BOOL",e[e.FLOAT16=10]="FLOAT16",e[e.DOUBLE=11]="DOUBLE",e[e.UINT32=12]="UINT32",e[e.UINT64=13]="UINT64",e[e.COMPLEX64=14]="COMPLEX64",e[e.COMPLEX128=15]="COMPLEX128",e[e.BFLOAT16=16]="BFLOAT16",e[e.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",e[e.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",e[e.FLOAT8E5M2=19]="FLOAT8E5M2",e[e.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e;(e=t.NodeType||(t.NodeType={}))[e.Primitive=0]="Primitive",e[e.Fused=1]="Fused"}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e;(e=t.TypeInfoValue||(t.TypeInfoValue={}))[e.NONE=0]="NONE",e[e.tensor_type=1]="tensor_type",e[e.sequence_type=2]="sequence_type",e[e.map_type=3]="map_type"}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsShape=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsShape=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.dim=function(e,n){var r=this.bb.__offset(this.bb_pos,4);return r?(n||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.dimLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startShape=function(t){t.startObject(1)},e.addDim=function(t,e){t.addFieldOffset(0,e,0)},e.createDimVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startDimVector=function(t,e){t.startVector(4,e,4)},e.endShape=function(t){return t.endObject()},e.createShape=function(t,n){return e.startShape(t),e.addDim(t,n),e.endShape(t)},e}();e.Shape=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDimension=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsDimension=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.value=function(e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.denotation=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.startDimension=function(t){t.startObject(2)},e.addValue=function(t,e){t.addFieldOffset(0,e,0)},e.addDenotation=function(t,e){t.addFieldOffset(1,e,0)},e.endDimension=function(t){return t.endObject()},e.createDimension=function(t,n,r){return e.startDimension(t),e.addValue(t,n),e.addDenotation(t,r),e.endDimension(t)},e}();e.Dimension=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDimensionValue=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsDimensionValue=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.dimType=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):t.experimental.fbs.DimensionValueType.UNKNOWN},e.prototype.dimValue=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.dimParam=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},e.startDimensionValue=function(t){t.startObject(3)},e.addDimType=function(e,n){e.addFieldInt8(0,n,t.experimental.fbs.DimensionValueType.UNKNOWN)},e.addDimValue=function(t,e){t.addFieldInt64(1,e,t.createLong(0,0))},e.addDimParam=function(t,e){t.addFieldOffset(2,e,0)},e.endDimensionValue=function(t){return t.endObject()},e.createDimensionValue=function(t,n,r,o){return e.startDimensionValue(t),e.addDimType(t,n),e.addDimValue(t,r),e.addDimParam(t,o),e.endDimensionValue(t)},e}();e.DimensionValue=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTensorTypeAndShape=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsTensorTypeAndShape=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.elemType=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED},e.prototype.shape=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startTensorTypeAndShape=function(t){t.startObject(2)},e.addElemType=function(e,n){e.addFieldInt32(0,n,t.experimental.fbs.TensorDataType.UNDEFINED)},e.addShape=function(t,e){t.addFieldOffset(1,e,0)},e.endTensorTypeAndShape=function(t){return t.endObject()},e.createTensorTypeAndShape=function(t,n,r){return e.startTensorTypeAndShape(t),e.addElemType(t,n),e.addShape(t,r),e.endTensorTypeAndShape(t)},e}();e.TensorTypeAndShape=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsMapType=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsMapType=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.keyType=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED},e.prototype.valueType=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startMapType=function(t){t.startObject(2)},e.addKeyType=function(e,n){e.addFieldInt32(0,n,t.experimental.fbs.TensorDataType.UNDEFINED)},e.addValueType=function(t,e){t.addFieldOffset(1,e,0)},e.endMapType=function(t){return t.endObject()},e.createMapType=function(t,n,r){return e.startMapType(t),e.addKeyType(t,n),e.addValueType(t,r),e.endMapType(t)},e}();e.MapType=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSequenceType=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsSequenceType=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.elemType=function(e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startSequenceType=function(t){t.startObject(1)},e.addElemType=function(t,e){t.addFieldOffset(0,e,0)},e.endSequenceType=function(t){return t.endObject()},e.createSequenceType=function(t,n){return e.startSequenceType(t),e.addElemType(t,n),e.endSequenceType(t)},e}();e.SequenceType=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.nodeIndex=function(){return this.bb.readUint32(this.bb_pos)},t.prototype.srcArgIndex=function(){return this.bb.readInt32(this.bb_pos+4)},t.prototype.dstArgIndex=function(){return this.bb.readInt32(this.bb_pos+8)},t.createEdgeEnd=function(t,e,n,r){return t.prep(4,12),t.writeInt32(r),t.writeInt32(n),t.writeInt32(e),t.offset()},t}();t.EdgeEnd=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsNodeEdge=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsNodeEdge=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.nodeIndex=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0},e.prototype.inputEdges=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*e,this.bb):null},e.prototype.inputEdgesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.outputEdges=function(e,n){var r=this.bb.__offset(this.bb_pos,8);return r?(n||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*e,this.bb):null},e.prototype.outputEdgesLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startNodeEdge=function(t){t.startObject(3)},e.addNodeIndex=function(t,e){t.addFieldInt32(0,e,0)},e.addInputEdges=function(t,e){t.addFieldOffset(1,e,0)},e.startInputEdgesVector=function(t,e){t.startVector(12,e,4)},e.addOutputEdges=function(t,e){t.addFieldOffset(2,e,0)},e.startOutputEdgesVector=function(t,e){t.startVector(12,e,4)},e.endNodeEdge=function(t){return t.endObject()},e.createNodeEdge=function(t,n,r,o){return e.startNodeEdge(t),e.addNodeIndex(t,n),e.addInputEdges(t,r),e.addOutputEdges(t,o),e.endNodeEdge(t)},e}();e.NodeEdge=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsNode=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsNode=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.domain=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.sinceVersion=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):0},e.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint32(this.bb_pos+t):0},e.prototype.opType=function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.NodeType.Primitive},e.prototype.executionProviderType=function(t){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.inputs=function(t,e){var n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.inputsLength=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.outputs=function(t,e){var n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.outputsLength=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.attributes=function(e,n){var r=this.bb.__offset(this.bb_pos,24);return r?(n||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.attributesLength=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.inputArgCounts=function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0},e.prototype.inputArgCountsLength=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.inputArgCountsArray=function(){var t=this.bb.__offset(this.bb_pos,26);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},e.prototype.implicitInputs=function(t,e){var n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.implicitInputsLength=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startNode=function(t){t.startObject(13)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addDocString=function(t,e){t.addFieldOffset(1,e,0)},e.addDomain=function(t,e){t.addFieldOffset(2,e,0)},e.addSinceVersion=function(t,e){t.addFieldInt32(3,e,0)},e.addIndex=function(t,e){t.addFieldInt32(4,e,0)},e.addOpType=function(t,e){t.addFieldOffset(5,e,0)},e.addType=function(e,n){e.addFieldInt32(6,n,t.experimental.fbs.NodeType.Primitive)},e.addExecutionProviderType=function(t,e){t.addFieldOffset(7,e,0)},e.addInputs=function(t,e){t.addFieldOffset(8,e,0)},e.createInputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startInputsVector=function(t,e){t.startVector(4,e,4)},e.addOutputs=function(t,e){t.addFieldOffset(9,e,0)},e.createOutputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startOutputsVector=function(t,e){t.startVector(4,e,4)},e.addAttributes=function(t,e){t.addFieldOffset(10,e,0)},e.createAttributesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startAttributesVector=function(t,e){t.startVector(4,e,4)},e.addInputArgCounts=function(t,e){t.addFieldOffset(11,e,0)},e.createInputArgCountsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()},e.startInputArgCountsVector=function(t,e){t.startVector(4,e,4)},e.addImplicitInputs=function(t,e){t.addFieldOffset(12,e,0)},e.createImplicitInputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startImplicitInputsVector=function(t,e){t.startVector(4,e,4)},e.endNode=function(t){return t.endObject()},e.createNode=function(t,n,r,o,a,i,c,s,u,l,p,f,d,h){return e.startNode(t),e.addName(t,n),e.addDocString(t,r),e.addDomain(t,o),e.addSinceVersion(t,a),e.addIndex(t,i),e.addOpType(t,c),e.addType(t,s),e.addExecutionProviderType(t,u),e.addInputs(t,l),e.addOutputs(t,p),e.addAttributes(t,f),e.addInputArgCounts(t,d),e.addImplicitInputs(t,h),e.endNode(t)},e}();e.Node=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsValueInfo=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsValueInfo=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.type=function(e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startValueInfo=function(t){t.startObject(3)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addDocString=function(t,e){t.addFieldOffset(1,e,0)},e.addType=function(t,e){t.addFieldOffset(2,e,0)},e.endValueInfo=function(t){return t.endObject()},e.createValueInfo=function(t,n,r,o){return e.startValueInfo(t),e.addName(t,n),e.addDocString(t,r),e.addType(t,o),e.endValueInfo(t)},e}();e.ValueInfo=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTypeInfo=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsTypeInfo=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.denotation=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.valueType=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.experimental.fbs.TypeInfoValue.NONE},e.prototype.value=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null},e.startTypeInfo=function(t){t.startObject(3)},e.addDenotation=function(t,e){t.addFieldOffset(0,e,0)},e.addValueType=function(e,n){e.addFieldInt8(1,n,t.experimental.fbs.TypeInfoValue.NONE)},e.addValue=function(t,e){t.addFieldOffset(2,e,0)},e.endTypeInfo=function(t){return t.endObject()},e.createTypeInfo=function(t,n,r,o){return e.startTypeInfo(t),e.addDenotation(t,n),e.addValueType(t,r),e.addValue(t,o),e.endTypeInfo(t)},e}();e.TypeInfo=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsOperatorSetId=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsOperatorSetId=function(e,n){return e.setPosition(e.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.domain=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.version=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},t.startOperatorSetId=function(t){t.startObject(2)},t.addDomain=function(t,e){t.addFieldOffset(0,e,0)},t.addVersion=function(t,e){t.addFieldInt64(1,e,t.createLong(0,0))},t.endOperatorSetId=function(t){return t.endObject()},t.createOperatorSetId=function(e,n,r){return t.startOperatorSetId(e),t.addDomain(e,n),t.addVersion(e,r),t.endOperatorSetId(e)},t}();t.OperatorSetId=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTensor=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsTensor=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.dims=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)},e.prototype.dimsLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.dataType=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED},e.prototype.rawData=function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},e.prototype.rawDataLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.rawDataArray=function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},e.prototype.stringData=function(t,e){var n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.stringDataLength=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startTensor=function(t){t.startObject(6)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addDocString=function(t,e){t.addFieldOffset(1,e,0)},e.addDims=function(t,e){t.addFieldOffset(2,e,0)},e.createDimsVector=function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()},e.startDimsVector=function(t,e){t.startVector(8,e,8)},e.addDataType=function(e,n){e.addFieldInt32(3,n,t.experimental.fbs.TensorDataType.UNDEFINED)},e.addRawData=function(t,e){t.addFieldOffset(4,e,0)},e.createRawDataVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},e.startRawDataVector=function(t,e){t.startVector(1,e,1)},e.addStringData=function(t,e){t.addFieldOffset(5,e,0)},e.createStringDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startStringDataVector=function(t,e){t.startVector(4,e,4)},e.endTensor=function(t){return t.endObject()},e.createTensor=function(t,n,r,o,a,i,c){return e.startTensor(t),e.addName(t,n),e.addDocString(t,r),e.addDims(t,o),e.addDataType(t,a),e.addRawData(t,i),e.addStringData(t,c),e.endTensor(t)},e}();e.Tensor=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSparseTensor=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsSparseTensor=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.values=function(e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.indices=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.dims=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)},e.prototype.dimsLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startSparseTensor=function(t){t.startObject(3)},e.addValues=function(t,e){t.addFieldOffset(0,e,0)},e.addIndices=function(t,e){t.addFieldOffset(1,e,0)},e.addDims=function(t,e){t.addFieldOffset(2,e,0)},e.createDimsVector=function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()},e.startDimsVector=function(t,e){t.startVector(8,e,8)},e.endSparseTensor=function(t){return t.endObject()},e.createSparseTensor=function(t,n,r,o){return e.startSparseTensor(t),e.addValues(t,n),e.addIndices(t,r),e.addDims(t,o),e.endSparseTensor(t)},e}();e.SparseTensor=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsAttribute=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsAttribute=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.AttributeType.UNDEFINED},e.prototype.f=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb_pos+t):0},e.prototype.i=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.s=function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.t=function(e){var n=this.bb.__offset(this.bb_pos,16);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.g=function(e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.floats=function(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*t):0},e.prototype.floatsLength=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.floatsArray=function(){var t=this.bb.__offset(this.bb_pos,20);return t?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},e.prototype.ints=function(t){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)},e.prototype.intsLength=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.strings=function(t,e){var n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.stringsLength=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.tensors=function(e,n){var r=this.bb.__offset(this.bb_pos,26);return r?(n||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.tensorsLength=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.graphs=function(e,n){var r=this.bb.__offset(this.bb_pos,28);return r?(n||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.graphsLength=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startAttribute=function(t){t.startObject(13)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addDocString=function(t,e){t.addFieldOffset(1,e,0)},e.addType=function(e,n){e.addFieldInt32(2,n,t.experimental.fbs.AttributeType.UNDEFINED)},e.addF=function(t,e){t.addFieldFloat32(3,e,0)},e.addI=function(t,e){t.addFieldInt64(4,e,t.createLong(0,0))},e.addS=function(t,e){t.addFieldOffset(5,e,0)},e.addT=function(t,e){t.addFieldOffset(6,e,0)},e.addG=function(t,e){t.addFieldOffset(7,e,0)},e.addFloats=function(t,e){t.addFieldOffset(8,e,0)},e.createFloatsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addFloat32(e[n]);return t.endVector()},e.startFloatsVector=function(t,e){t.startVector(4,e,4)},e.addInts=function(t,e){t.addFieldOffset(9,e,0)},e.createIntsVector=function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()},e.startIntsVector=function(t,e){t.startVector(8,e,8)},e.addStrings=function(t,e){t.addFieldOffset(10,e,0)},e.createStringsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startStringsVector=function(t,e){t.startVector(4,e,4)},e.addTensors=function(t,e){t.addFieldOffset(11,e,0)},e.createTensorsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startTensorsVector=function(t,e){t.startVector(4,e,4)},e.addGraphs=function(t,e){t.addFieldOffset(12,e,0)},e.createGraphsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startGraphsVector=function(t,e){t.startVector(4,e,4)},e.endAttribute=function(t){return t.endObject()},e.createAttribute=function(t,n,r,o,a,i,c,s,u,l,p,f,d,h){return e.startAttribute(t),e.addName(t,n),e.addDocString(t,r),e.addType(t,o),e.addF(t,a),e.addI(t,i),e.addS(t,c),e.addT(t,s),e.addG(t,u),e.addFloats(t,l),e.addInts(t,p),e.addStrings(t,f),e.addTensors(t,d),e.addGraphs(t,h),e.endAttribute(t)},e}();e.Attribute=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsGraph=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsGraph=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.initializers=function(e,n){var r=this.bb.__offset(this.bb_pos,4);return r?(n||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.initializersLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.nodeArgs=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.nodeArgsLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.nodes=function(e,n){var r=this.bb.__offset(this.bb_pos,8);return r?(n||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.nodesLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.maxNodeIndex=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint32(this.bb_pos+t):0},e.prototype.nodeEdges=function(e,n){var r=this.bb.__offset(this.bb_pos,12);return r?(n||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.nodeEdgesLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.inputs=function(t,e){var n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.inputsLength=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.outputs=function(t,e){var n=this.bb.__offset(this.bb_pos,16);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.outputsLength=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.sparseInitializers=function(e,n){var r=this.bb.__offset(this.bb_pos,18);return r?(n||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.sparseInitializersLength=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startGraph=function(t){t.startObject(8)},e.addInitializers=function(t,e){t.addFieldOffset(0,e,0)},e.createInitializersVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startInitializersVector=function(t,e){t.startVector(4,e,4)},e.addNodeArgs=function(t,e){t.addFieldOffset(1,e,0)},e.createNodeArgsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startNodeArgsVector=function(t,e){t.startVector(4,e,4)},e.addNodes=function(t,e){t.addFieldOffset(2,e,0)},e.createNodesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startNodesVector=function(t,e){t.startVector(4,e,4)},e.addMaxNodeIndex=function(t,e){t.addFieldInt32(3,e,0)},e.addNodeEdges=function(t,e){t.addFieldOffset(4,e,0)},e.createNodeEdgesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startNodeEdgesVector=function(t,e){t.startVector(4,e,4)},e.addInputs=function(t,e){t.addFieldOffset(5,e,0)},e.createInputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startInputsVector=function(t,e){t.startVector(4,e,4)},e.addOutputs=function(t,e){t.addFieldOffset(6,e,0)},e.createOutputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startOutputsVector=function(t,e){t.startVector(4,e,4)},e.addSparseInitializers=function(t,e){t.addFieldOffset(7,e,0)},e.createSparseInitializersVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startSparseInitializersVector=function(t,e){t.startVector(4,e,4)},e.endGraph=function(t){return t.endObject()},e.createGraph=function(t,n,r,o,a,i,c,s,u){return e.startGraph(t),e.addInitializers(t,n),e.addNodeArgs(t,r),e.addNodes(t,o),e.addMaxNodeIndex(t,a),e.addNodeEdges(t,i),e.addInputs(t,c),e.addOutputs(t,s),e.addSparseInitializers(t,u),e.endGraph(t)},e}();e.Graph=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsModel=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsModel=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.irVersion=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.opsetImport=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.opsetImportLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.producerName=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.producerVersion=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.domain=function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.modelVersion=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.graph=function(e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.graphDocString=function(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null},e.startModel=function(t){t.startObject(9)},e.addIrVersion=function(t,e){t.addFieldInt64(0,e,t.createLong(0,0))},e.addOpsetImport=function(t,e){t.addFieldOffset(1,e,0)},e.createOpsetImportVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startOpsetImportVector=function(t,e){t.startVector(4,e,4)},e.addProducerName=function(t,e){t.addFieldOffset(2,e,0)},e.addProducerVersion=function(t,e){t.addFieldOffset(3,e,0)},e.addDomain=function(t,e){t.addFieldOffset(4,e,0)},e.addModelVersion=function(t,e){t.addFieldInt64(5,e,t.createLong(0,0))},e.addDocString=function(t,e){t.addFieldOffset(6,e,0)},e.addGraph=function(t,e){t.addFieldOffset(7,e,0)},e.addGraphDocString=function(t,e){t.addFieldOffset(8,e,0)},e.endModel=function(t){return t.endObject()},e.createModel=function(t,n,r,o,a,i,c,s,u,l){return e.startModel(t),e.addIrVersion(t,n),e.addOpsetImport(t,r),e.addProducerName(t,o),e.addProducerVersion(t,a),e.addDomain(t,i),e.addModelVersion(t,c),e.addDocString(t,s),e.addGraph(t,u),e.addGraphDocString(t,l),e.endModel(t)},e}();e.Model=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsKernelCreateInfos=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsKernelCreateInfos=function(e,n){return e.setPosition(e.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.nodeIndices=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0},t.prototype.nodeIndicesLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.nodeIndicesArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.prototype.kernelDefHashes=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)},t.prototype.kernelDefHashesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startKernelCreateInfos=function(t){t.startObject(2)},t.addNodeIndices=function(t,e){t.addFieldOffset(0,e,0)},t.createNodeIndicesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()},t.startNodeIndicesVector=function(t,e){t.startVector(4,e,4)},t.addKernelDefHashes=function(t,e){t.addFieldOffset(1,e,0)},t.createKernelDefHashesVector=function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()},t.startKernelDefHashesVector=function(t,e){t.startVector(8,e,8)},t.endKernelCreateInfos=function(t){return t.endObject()},t.createKernelCreateInfos=function(e,n,r){return t.startKernelCreateInfos(e),t.addNodeIndices(e,n),t.addKernelDefHashes(e,r),t.endKernelCreateInfos(e)},t}();t.KernelCreateInfos=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSubGraphSessionState=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsSubGraphSessionState=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.graphId=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.sessionState=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startSubGraphSessionState=function(t){t.startObject(2)},e.addGraphId=function(t,e){t.addFieldOffset(0,e,0)},e.addSessionState=function(t,e){t.addFieldOffset(1,e,0)},e.endSubGraphSessionState=function(t){var e=t.endObject();return t.requiredField(e,4),e},e.createSubGraphSessionState=function(t,n,r){return e.startSubGraphSessionState(t),e.addGraphId(t,n),e.addSessionState(t,r),e.endSubGraphSessionState(t)},e}();e.SubGraphSessionState=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSessionState=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsSessionState=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.kernels=function(e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.subGraphSessionStates=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.subGraphSessionStatesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startSessionState=function(t){t.startObject(2)},e.addKernels=function(t,e){t.addFieldOffset(0,e,0)},e.addSubGraphSessionStates=function(t,e){t.addFieldOffset(1,e,0)},e.createSubGraphSessionStatesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startSubGraphSessionStatesVector=function(t,e){t.startVector(4,e,4)},e.endSessionState=function(t){return t.endObject()},e.createSessionState=function(t,n,r){return e.startSessionState(t),e.addKernels(t,n),e.addSubGraphSessionStates(t,r),e.endSessionState(t)},e}();e.SessionState=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsInferenceSession=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsInferenceSession=function(t,n){return t.setPosition(t.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.bufferHasIdentifier=function(t){return t.__has_identifier("ORTM")},e.prototype.ortVersion=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.model=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.sessionState=function(e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startInferenceSession=function(t){t.startObject(3)},e.addOrtVersion=function(t,e){t.addFieldOffset(0,e,0)},e.addModel=function(t,e){t.addFieldOffset(1,e,0)},e.addSessionState=function(t,e){t.addFieldOffset(2,e,0)},e.endInferenceSession=function(t){return t.endObject()},e.finishInferenceSessionBuffer=function(t,e){t.finish(e,"ORTM")},e.finishSizePrefixedInferenceSessionBuffer=function(t,e){t.finish(e,"ORTM",!0)},e.createInferenceSession=function(t,n,r,o){return e.startInferenceSession(t),e.addOrtVersion(t,n),e.addModel(t,r),e.addSessionState(t,o),e.endInferenceSession(t)},e}();e.InferenceSession=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},1723:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;var a=n(2235),i=n(9240),c=function(){function t(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}return t.prototype.dispose=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2]}))}))},t.prototype.run=function(t,e,n){return r(this,void 0,void 0,(function(){var e,n,r,c,s;return o(this,(function(o){switch(o.label){case 0:for(n in e=new Map,t)Object.hasOwnProperty.call(t,n)&&(r=t[n],e.set(n,new i.Tensor(r.dims,r.type,void 0,void 0,r.data)));return[4,this.session.run(e)];case 1:return c=o.sent(),s={},c.forEach((function(t,e){s[e]=new a.Tensor(t.type,t.data,t.dims)})),[2,s]}}))}))},t.prototype.startProfiling=function(){this.session.startProfiling()},t.prototype.endProfiling=function(){this.session.endProfiling()},t}();e.OnnxjsSessionHandler=c},6027:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;var a=n(7067),i=n(1296),c=n(1975),s=n(6496),u=n(1315),l=n(1745),p=function(){function t(t){void 0===t&&(t={}),this._initialized=!1,this.backendHint=t.backendHint,this.profiler=u.Profiler.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}return Object.defineProperty(t.prototype,"inputNames",{get:function(){return this._model.graph.getInputNames()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputNames",{get:function(){return this._model.graph.getOutputNames()},enumerable:!1,configurable:!0}),t.prototype.startProfiling=function(){this.profiler.start()},t.prototype.endProfiling=function(){this.profiler.stop()},t.prototype.loadModel=function(t,e,n){return r(this,void 0,void 0,(function(){var s=this;return o(this,(function(u){switch(u.label){case 0:return[4,this.profiler.event("session","Session.loadModel",(function(){return r(s,void 0,void 0,(function(){var r,s,u,p;return o(this,(function(o){switch(o.label){case 0:return[4,(0,c.resolveBackend)(this.backendHint)];case 1:return r=o.sent(),this.sessionHandler=r.createSessionHandler(this.context),this._model=new l.Model,"string"!=typeof t?[3,7]:(s=t.endsWith(".ort"),"undefined"!=typeof process&&process.versions&&process.versions.node?[4,(0,i.promisify)(a.readFile)(t)]:[3,3]);case 2:return u=o.sent(),this.initialize(u,s),[3,6];case 3:return[4,fetch(t)];case 4:return[4,o.sent().arrayBuffer()];case 5:u=o.sent(),this.initialize(new Uint8Array(u),s),o.label=6;case 6:return[3,8];case 7:ArrayBuffer.isView(t)?this.initialize(t):(p=new Uint8Array(t,e||0,n||t.byteLength),this.initialize(p)),o.label=8;case 8:return[2]}}))}))}))];case 1:return u.sent(),[2]}}))}))},t.prototype.initialize=function(t,e){var n=this;if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",(function(){var r=n.sessionHandler.transformGraph?n.sessionHandler:void 0;n._model.load(t,r,e),n.sessionHandler.onGraphInitialized&&n.sessionHandler.onGraphInitialized(n._model.graph),n.initializeOps(n._model.graph),n._executionPlan=new s.ExecutionPlan(n._model.graph,n._ops,n.profiler)})),this._initialized=!0},t.prototype.run=function(t){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(n){if(!this._initialized)throw new Error("session not initialized yet");return[2,this.profiler.event("session","Session.run",(function(){return r(e,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return e=this.normalizeAndValidateInputs(t),[4,this._executionPlan.execute(this.sessionHandler,e)];case 1:return n=r.sent(),[2,this.createOutput(n)]}}))}))}))]}))}))},t.prototype.normalizeAndValidateInputs=function(t){var e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error("incorrect input array length: expected ".concat(e.length," but got ").concat(t.length))}else{if(t.size!==e.length)throw new Error("incorrect input map size: expected ".concat(e.length," but got ").concat(t.size));for(var n=new Array(t.size),r=0,o=0;o<e.length;++o){var a=t.get(e[o]);if(!a)throw new Error("missing input tensor for: '".concat(name,"'"));n[r++]=a}t=n}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,t,!1);else{var i=this._model.graph.getInputIndices(),c=this._model.graph.getValues(),s=new Array(i.length);for(o=0;o<i.length;++o){var u=c[i[o]];s[o]=u.type.shape.dims,this.context.graphInputTypes.push(u.type.tensorType),this.context.graphInputDims.push(t[o].dims)}this.validateInputTensorDims(s,t,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,t),t},t.prototype.validateInputTensorTypes=function(t,e){for(var n=0;n<e.length;n++){var r=t[n],o=e[n].type;if(r!==o)throw new Error("input tensor[".concat(n,"] check failed: expected type '").concat(r,"' but got ").concat(o))}},t.prototype.validateInputTensorDims=function(t,e,n){for(var r=0;r<e.length;r++){var o=t[r],a=e[r].dims;if(!this.compareTensorDims(o,a,n))throw new Error("input tensor[".concat(r,"] check failed: expected shape '[").concat(o.join(","),"]' but got [").concat(a.join(","),"]"))}},t.prototype.compareTensorDims=function(t,e,n){if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r]&&(!n||0!==t[r]))return!1;return!0},t.prototype.createOutput=function(t){var e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");for(var n=new Map,r=0;r<e.length;++r)n.set(e[r],t[r]);return n},t.prototype.initializeOps=function(t){var e=t.getNodes();this._ops=new Array(e.length);for(var n=0;n<e.length;n++)this._ops[n]=this.sessionHandler.resolve(e[n],this._model.opsets,t)},t}();e.Session=p},9240:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;var i=n(3442),c=a(n(1583)),s=n(5127),u=n(2446),l=n(7273),p=s.onnxruntime.experimental.fbs,f=function(){function t(t,e,n,r,o,a){void 0===a&&(a=i.Guid.create()),this.dims=t,this.type=e,this.dataProvider=n,this.asyncDataProvider=r,this.cache=o,this.dataId=a,this.size=l.ShapeUtil.validateDimsAndCalcSize(t);var c=this.size,s=void 0===n&&void 0===r&&void 0===o;if(void 0!==o&&o.length!==c)throw new RangeError("Input dims doesn't match data length.");if("string"===e){if(!(void 0===o||Array.isArray(o)&&o.every((function(t){return"string"==typeof t}))))throw new TypeError("cache should be a string array");s&&(this.cache=new Array(c))}else{if(void 0!==o){var u=h(e);if(!(o instanceof u))throw new TypeError("cache should be type ".concat(u.name))}if(s){var p=new ArrayBuffer(c*function(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error("cannot calculate sizeof() on type ".concat(t))}}(e));this.cache=function(t,e){return new(h(e))(t)}(p,e)}}}return Object.defineProperty(t.prototype,"data",{get:function(){if(void 0===this.cache){var t=this.dataProvider(this.dataId);if(t.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stringData",{get:function(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"integerData",{get:function(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"floatData",{get:function(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numberData",{get:function(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")},enumerable:!1,configurable:!0}),t.prototype.get=function(t){return this.data[l.ShapeUtil.indicesToOffset(t,this.strides)]},t.prototype.set=function(t,e){this.data[l.ShapeUtil.indicesToOffset(t,this.strides)]=e},t.prototype.getData=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return void 0!==this.cache?[3,2]:(t=this,[4,this.asyncDataProvider(this.dataId)]);case 1:t.cache=e.sent(),e.label=2;case 2:return[2,this.cache]}}))}))},Object.defineProperty(t.prototype,"strides",{get:function(){return this._strides||(this._strides=l.ShapeUtil.computeStrides(this.dims)),this._strides},enumerable:!1,configurable:!0}),t.fromProto=function(e){if(!e)throw new Error("cannot construct Value from an empty tensor");var n=l.ProtoUtil.tensorDataTypeFromProto(e.dataType),r=new t(l.ProtoUtil.tensorDimsFromProto(e.dims),n);if("string"===n)e.stringData.forEach((function(t,e){r.data[e]=(0,l.decodeUtf8String)(t)}));else if(e.rawData&&"number"==typeof e.rawData.byteLength&&e.rawData.byteLength>0){var o=r.data,a=new DataView(e.rawData.buffer,e.rawData.byteOffset,e.rawData.byteLength),i=d(e.dataType),s=e.rawData.byteLength/i;if(e.rawData.byteLength%i!=0)throw new Error("invalid buffer length");if(o.length!==s)throw new Error("buffer length mismatch");for(var p=0;p<s;p++){var f=y(a,e.dataType,p*i);o[p]=f}}else{var h=void 0;switch(e.dataType){case u.onnx.TensorProto.DataType.FLOAT:h=e.floatData;break;case u.onnx.TensorProto.DataType.INT32:case u.onnx.TensorProto.DataType.INT16:case u.onnx.TensorProto.DataType.UINT16:case u.onnx.TensorProto.DataType.INT8:case u.onnx.TensorProto.DataType.UINT8:case u.onnx.TensorProto.DataType.BOOL:h=e.int32Data;break;case u.onnx.TensorProto.DataType.INT64:h=e.int64Data;break;case u.onnx.TensorProto.DataType.DOUBLE:h=e.doubleData;break;case u.onnx.TensorProto.DataType.UINT32:case u.onnx.TensorProto.DataType.UINT64:h=e.uint64Data;break;default:throw new Error("unspecific error")}if(null==h)throw new Error("failed to populate data from a tensorproto value");var m=r.data;if(m.length!==h.length)throw new Error("array length mismatch");for(p=0;p<h.length;p++){var v=h[p];c.default.isLong(v)?m[p]=g(v,e.dataType):m[p]=v}}return r},t.fromData=function(e,n,r){return new t(n,r,void 0,void 0,e)},t.fromOrtTensor=function(e){if(!e)throw new Error("cannot construct Value from an empty tensor");var n=l.ProtoUtil.tensorDimsFromORTFormat(e),r=l.ProtoUtil.tensorDataTypeFromProto(e.dataType()),o=new t(n,r);if("string"===r)for(var a=0;a<e.stringDataLength();a++)o.data[a]=e.stringData(a);else if(e.rawDataArray()&&"number"==typeof e.rawDataLength()&&e.rawDataLength()>0){var i=o.data,c=new DataView(e.rawDataArray().buffer,e.rawDataArray().byteOffset,e.rawDataLength()),s=d(e.dataType()),u=e.rawDataLength()/s;if(e.rawDataLength()%s!=0)throw new Error("invalid buffer length");if(i.length!==u)throw new Error("buffer length mismatch");for(a=0;a<u;a++){var p=y(c,e.dataType(),a*s);i[a]=p}}return o},t}();function d(t){switch(t){case u.onnx.TensorProto.DataType.UINT8:case u.onnx.TensorProto.DataType.INT8:case u.onnx.TensorProto.DataType.BOOL:return 1;case u.onnx.TensorProto.DataType.UINT16:case u.onnx.TensorProto.DataType.INT16:return 2;case u.onnx.TensorProto.DataType.FLOAT:case u.onnx.TensorProto.DataType.INT32:case u.onnx.TensorProto.DataType.UINT32:return 4;case u.onnx.TensorProto.DataType.INT64:case u.onnx.TensorProto.DataType.DOUBLE:case u.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error("cannot calculate sizeof() on type ".concat(u.onnx.TensorProto.DataType[t]))}}function h(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function g(t,e){if(e===u.onnx.TensorProto.DataType.INT64||e===p.TensorDataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(e!==u.onnx.TensorProto.DataType.UINT32&&e!==p.TensorDataType.UINT32&&e!==u.onnx.TensorProto.DataType.UINT64&&e!==p.TensorDataType.UINT64)throw new TypeError("not a LONG type: ".concat(u.onnx.TensorProto.DataType[e]));if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}return t.toNumber()}function y(t,e,n){switch(e){case u.onnx.TensorProto.DataType.BOOL:case u.onnx.TensorProto.DataType.UINT8:return t.getUint8(n);case u.onnx.TensorProto.DataType.INT8:return t.getInt8(n);case u.onnx.TensorProto.DataType.UINT16:return t.getUint16(n,!0);case u.onnx.TensorProto.DataType.INT16:return t.getInt16(n,!0);case u.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(n,!0);case u.onnx.TensorProto.DataType.INT32:return t.getInt32(n,!0);case u.onnx.TensorProto.DataType.UINT32:return t.getUint32(n,!0);case u.onnx.TensorProto.DataType.INT64:return g(c.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!1),e);case u.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(n,!0);case u.onnx.TensorProto.DataType.UINT64:return g(c.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!0),e);default:throw new Error("cannot read from DataView for type ".concat(u.onnx.TensorProto.DataType[e]))}}e.Tensor=f},7273:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;var i=n(5686),c=a(n(1583)),s=n(2446),u=n(9240);e.checkInputsShape=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].dims||t[r].dims.length!==e[r])return!1;return!0},e.assert=function(t,e){if(!t)throw new Error("string"==typeof e?e:e())};var l=function(){function t(){}return t.arraysEqual=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},t}();e.ArrayUtil=l;var p=function(){function t(){}return t.preprocessInputShapes=function(t,e){return[1===t.length?[1,t[0]]:t,1===e.length?[e[0],1]:e]},t.postprocessOutputShape=function(t,e,n){1===e&&t.splice(t.length-2,1),1===n&&t.pop()},t.calcMatMulShape=function(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]},t}();e.MatMulUtil=p;var f=function(){function t(){}return t.calcShape=function(t,e,n){var o;void 0===n&&(n=!1);var a=t.length,i=e.length;if(0===a)return e;if(0===i)return t;var c=Math.max(t.length,e.length),s=new Array(c);if(n){if(a<2||i<2)return;var u=p.calcMatMulShape([t[a-2],t[a-1]],[e[i-2],e[i-1]]);if(void 0===u)return;o=r(u,2),s[c-2]=o[0],s[c-1]=o[1]}for(var l=n?3:1;l<=c;l++){var f=a-l<0?1:t[a-l],d=i-l<0?1:e[i-l];if(f!==d&&f>1&&d>1)return;s[c-l]=Math.max(f,d)}return s},t.index=function(e,n){var r=new Array(n.length);return t.fillIndex(e,n,r),r},t.fillIndex=function(t,e,n){for(var r=t.length-e.length,o=0;o<e.length;o++)n[o]=t[r+o]%e[o]},t.calc=function(e,n,r,o,a){var i=t.calcShape(e.dims,n.dims);if(i){if(o&&!y.areEqual(i,e.dims))return;var c=y.size(i),s=o?e:new u.Tensor(i,a||e.type);if(0===i.length)s.set([],r(e.get([]),n.get([])));else{var l=new Array(i.length),p=new Array(e.dims.length),f=new Array(n.dims.length),d=0,h=0,g=!1,m=!1;0===e.dims.length&&(d=e.get([]),g=!0),0===n.dims.length&&(h=n.get([]),m=!0);for(var v=void 0,b=0;b<c;b++){v=b;for(var w=i.length-1;w>=0;w--)l[w]=v%i[w],v=Math.floor(v/i[w]);g||(t.fillIndex(l,e.dims,p),d=e.get(p)),m||(t.fillIndex(l,n.dims,f),h=n.get(f)),s.set(l,r(d,h))}}return s}},t.isValidBroadcast=function(t,e){var n=t.length,r=e.length;if(n>r)return!1;for(var o=1;o<=n;o++)if(1!==t[n-o]&&t[n-o]!==e[r-o])return!1;return!0},t.getBroadcastDims=function(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var a=n-1-o,i=t[a]||1;(e[e.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r},t}();e.BroadcastUtil=f,e.arrayCopyHelper=function(t,e,n,r,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var a=0;a<o;a++)t[n+a]=e[r+a]};var d=function(){function t(){}return t.getShapeOfGemmResult=function(t,e,n,r,o){if(2!==t.length||2!==n.length)throw new Error("shape need to be of size 2");var a,i,c;e?(a=t[1],i=t[0]):(a=t[0],i=t[1]);var s=-1;if(r?(c=n[0],s=1):(c=n[1],s=0),n[s]!==i)throw new Error("dimension mismatch");if(a<=0||c<=0||i<=0)throw new Error("invalid shape specified");if(o&&!f.isValidBroadcast(o,[a,c]))throw new Error("gemm: invalid bias shape for broadcast");return[a,c,i]},t}();e.GemmUtil=d;var h=function(){function t(){}return t.tensorDataTypeFromProto=function(t){switch(t){case s.onnx.TensorProto.DataType.INT8:return"int8";case s.onnx.TensorProto.DataType.UINT8:return"uint8";case s.onnx.TensorProto.DataType.BOOL:return"bool";case s.onnx.TensorProto.DataType.INT16:return"int16";case s.onnx.TensorProto.DataType.UINT16:return"uint16";case s.onnx.TensorProto.DataType.INT32:return"int32";case s.onnx.TensorProto.DataType.UINT32:return"uint32";case s.onnx.TensorProto.DataType.FLOAT:return"float32";case s.onnx.TensorProto.DataType.DOUBLE:return"float64";case s.onnx.TensorProto.DataType.STRING:return"string";case s.onnx.TensorProto.DataType.INT64:return"int32";case s.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error("unsupported data type: ".concat(s.onnx.TensorProto.DataType[t]))}},t.tensorDataTypeStringToEnum=function(t){switch(t){case"int8":return s.onnx.TensorProto.DataType.INT8;case"uint8":return s.onnx.TensorProto.DataType.UINT8;case"bool":return s.onnx.TensorProto.DataType.BOOL;case"int16":return s.onnx.TensorProto.DataType.INT16;case"uint16":return s.onnx.TensorProto.DataType.UINT16;case"int32":return s.onnx.TensorProto.DataType.INT32;case"uint32":return s.onnx.TensorProto.DataType.UINT32;case"float32":return s.onnx.TensorProto.DataType.FLOAT;case"float64":return s.onnx.TensorProto.DataType.DOUBLE;case"string":return s.onnx.TensorProto.DataType.STRING;case"int64":return s.onnx.TensorProto.DataType.INT64;case"uint64":return s.onnx.TensorProto.DataType.UINT64;default:throw new Error("unsupported data type: ".concat(t))}},t.tensorDimsFromProto=function(t){return t.map((function(t){return c.default.isLong(t)?t.toNumber():t}))},t.tensorValueTypeFromProto=function(e){return{tensorType:t.tensorDataTypeFromProto(e.elemType),shape:{dims:t.tensorDimsFromProto(e.shape.dim.map((function(t){return t.dimValue})))}}},t.tensorDimsFromORTFormat=function(t){for(var e=[],n=0;n<t.dimsLength();n++)e.push(g.longToNumber(t.dims(n)));return e},t.tensorAttributesFromORTFormat=function(t){for(var e=[],n=0;n<t.attributesLength();n++)e.push(t.attributes(n));return e},t}();e.ProtoUtil=h;var g=function(){function t(){}return t.longToNumber=function(t,e){return c.default.isLong(t)?t.toNumber():t instanceof i.flatbuffers.Long?c.default.fromValue({low:t.low,high:t.high,unsigned:null!=e&&e}).toNumber():t},t.isLong=function(t){return c.default.isLong(t)||t instanceof i.flatbuffers.Long},t}();e.LongUtil=g;var y=function(){function t(){}return t.size=function(e){return t.getSizeFromDimensionRange(e,0,e.length)},t.sizeFromDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of ".concat(n," for sizeFromDimension as Tensor has ").concat(e.length," dimensions."));return t.getSizeFromDimensionRange(e,n,e.length)},t.sizeToDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of ".concat(n," for sizeToDimension as Tensor has ").concat(e.length," dimensions."));return t.getSizeFromDimensionRange(e,0,n)},t.getSizeFromDimensionRange=function(t,e,n){for(var r=1,o=e;o<n;o++){if(t[o]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");r*=t[o]}return r},t.computeStrides=function(t){var e=t.length;if(0===e)return[];if(1===e)return[1];var n=new Array(e);n[e-1]=1,n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n},t.transpose=function(t){return t.slice().reverse()},t.indicesToOffset=function(t,e,n){void 0===n&&(n=t.length);for(var r=0,o=0;o<n;++o)r+=e[o]*t[o];return r},t.offsetToIndices=function(t,e){var n=e.length;if(0===n)return[];if(1===n)return[t*e[0]];for(var r=new Array(e.length),o=0;o<r.length-1;++o)r[o]=Math.floor(t/e[o]),t-=r[o]*e[o];return r[r.length-1]=t,r},t.normalizeAxis=function(t,e){if(t<-e&&t>=e)throw new Error("unsupported axis for this operation.");return t<0?t+e:t},t.normalizeAxes=function(t,e){var n=this;return t.map((function(t){return n.normalizeAxis(t,e)}))},t.incrementIndex=function(t,e,n){if(0===e.length||0===t.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===n)n=e.length;else if(n<=0||n>e.length)throw new Error("Incorrect axis to increment on");for(var r=n-1;r>=0&&(t[r]++,!(t[r]<e[r]));--r)t[r]=0},t.calculateReshapedDims=function(e,n){if(0===n.length){if(0===e.length||1===t.size(e))return[];throw new Error("cannot reshape to a scalar Tensor")}for(var r=n.length,o=new Array(r),a=-1,i=1,c=0;c<r;c++){if(n[c]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===n[c]){if(-1!==a)throw new Error("at most one dimension in shape hints can be -1");a=c}else{if(0===n[c]){if(c>=e.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");o[c]=e[c]}else o[c]=n[c];i*=o[c]}}var s=t.size(e);if(-1!==a){if(s%i!=0)throw new Error("the input tensor cannot be reshaped to the requested shape. Input shape: [".concat(e,"] Output shape: [").concat(n,"]"));o[a]=s/i}else if(i!==s)throw new Error("reshapedDims and originalDims don't have matching sizes");return o},t.sortBasedOnPerm=function(t,e){return e?e.map((function(e){return t[e]})):t.slice().reverse()},t.padShape=function(t,e){var n=t.length;return t.map((function(t,r){return t+e[r]+e[r+n]}))},t.areEqual=function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))},t.validateDimsAndCalcSize=function(t){var e,n;if(t.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");var r=1;try{for(var a=o(t),i=a.next();!i.done;i=a.next()){var c=i.value;if(!Number.isInteger(c))throw new TypeError("Invalid shape: ".concat(c," is not an integer"));if(c<0||c>2147483647)throw new TypeError("Invalid shape: length ".concat(c," is not allowed"));r*=c}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r},t.flattenShape=function(t,e){e<0&&(e+=t.length);var n=t.reduce((function(t,e){return t*e}),1),r=t.slice(e).reduce((function(t,e){return t*e}),1);return[n/r,r]},t.squeezeShape=function(e,n){var r=new Array;n=t.normalizeAxes(n,e.length);for(var o=0;o<e.length;o++){var a=n.indexOf(o)>=0;if(a&&1!==e[o])throw new Error("squeeze an axis of size different than 1");(0===n.length&&e[o]>1||n.length>0&&!a)&&r.push(e[o])}return r},t.unsqueezeShape=function(e,n){var r=new Array(e.length+n.length);r.fill(0);for(var o=0;o<n.length;o++){var a=t.normalizeAxis(n[o],r.length);if(a>=r.length)throw new Error("'axes' has an out of range axis");if(0!==r[a])throw new Error("'axes' has a duplicate axis");r[a]=1}var i=0;for(o=0;o<r.length;o++)0===r[o]&&(r[o]=e[i++]);if(i!==e.length)throw new Error("the unsqueezed dimension could not be established");return r},t}();e.ShapeUtil=y;var m=function(){function t(){}return t.sqr=function(t,e,n,r,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var a=0;a<o;a++)t[n+a]+=Math.pow(e[r+a],2)},t.axpy=function(t,e,n,r,o,a){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var i=0;i<o;i++)t[n+i]+=a*e[r+i]},t.powx=function(t,e,n,r,o,a){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var i=0;i<o;i++)t[n+i]=Math.pow(e[r+i],a)},t.mul=function(t,e,n,r,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var a=0;a<o;a++)t[n+a]=e[r+a]*t[n+a]},t}();e.MathUtil=m;var v=function(){function t(){}return t.splitShape=function(e,n,r,o){if(0===r.length){if(!o)throw new Error("need to know number of outputs when the 'split' attribute is not specified");t.determineSplit(e[n],o,r)}for(var a=[],i=[0],c=0;c<r.length;++c){0!==c&&i.push(i[c-1]+r[c-1]);var s=e.slice();s[n]=r[c],a.push(s)}return[a,i]},t.determineSplit=function(t,e,n){if(t%e!=0)throw new Error("cannot split tensor to equal sized parts");for(var r=0;r<e;++r)n.push(t/e)},t}();e.SplitUtil=v;var b=function(){function t(){}return t.calcReduce=function(e,n,r,o,a){var i=e.dims.slice(0);0===n.length&&i.forEach((function(t,e){return n.push(e)}));for(var c=t.calcReduceShape(i,n,!0),s=y.size(c),l=new u.Tensor(c,e.type),p=y.computeStrides(c),d=y.computeStrides(i),h=new Array(i.length),g=0;g<s;g++){var m=y.offsetToIndices(g,p);f.fillIndex(m,i,h),l.set(m,t.calcReduceByAxis(e.numberData,n,i,0,y.indicesToOffset(h,d),o,a))}return r?l:new u.Tensor(t.calcReduceShape(i,n,r),l.type,void 0,void 0,l.data,l.dataId)},t.calcReduceByAxis=function(e,n,r,o,a,i,c){var s=0;if(o>=n.length)return i(e[a]);for(var u=n[o],l=u>=r.length?1:y.size(r.slice(u+1)),p=0;p<r[u];p++)s=0===p?t.calcReduceByAxis(e,n,r,o+1,a,i,c):c(s,t.calcReduceByAxis(e,n,r,o+1,a,i,c)),a+=l;return s},t.calcReduceShape=function(t,e,n){for(var r=t.slice(),o=0;o<e.length;o++)r[e[o]]=n?1:0;return r.filter((function(t){return 0!==t}))},t}();e.ReduceUtil=b;var w=function(){function t(){}return t.adjustPoolAttributes=function(t,e,n,r,o,a){if(!t&&n.length!==e.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(var i=0;i<e.length-2;i++)i>=n.length?n.push(e[i+2]):n[i]=e[i+2];for(i=0;i<n.length;i++)if(i<r.length){if(r[i]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(i=0;i<n.length;i++)if(i<o.length){if(o[i]<0)throw new Error("dilations should be greater than or equal to 1")}else o.push(1);for(i=0;i<2*n.length;i++)if(i<a.length){if(a[i]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(i=0;i<n.length;i++){if(n[i]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[i]>=n[i]||a[i+n.length]>=n[i])throw new Error("pads should be smaller than kernel")}},t.adjustPadsBasedOnAutoPad=function(e,n,r,o,a,i){if(i){if(a.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var c=0;c<e.length-2;c++)t.adjustPadAndReturnShape(e[c+2],n[c],r[c],o[c],a,c,c+e.length-2,i)}},t.computePoolOutputShape=function(e,n,r,o,a,i,c){if(n.length<=0)throw new Error("input shape must be of size greater than 0");var s=[n[0],n[1]];return t.computeShapeHelper(e,n,s,r,o,a,i,c),s},t.computeConvOutputShape=function(e,n,r,o,a,i,c){if(e.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var s=[e[0],n[0]];return t.computeShapeHelper(!1,e,s,r,o,a,i,c),s},t.computeShapeHelper=function(e,n,r,o,a,i,c,s){if(e)for(var u=0;u<n.length-2;u++)r.push(1);else for(u=0;u<n.length-2;u++)r.push(t.adjustPadAndReturnShape(n[u+2],o[u],a[u],i[u],c,u,u+n.length-2,s))},t.adjustPadAndReturnShape=function(t,e,n,r,o,a,i,c){var s=n*(r-1)+1;if(!c||"NOTSET"===c)return Math.floor((t+o[a]+o[i]-s)/e+1);switch(c){case"VALID":return o[a]=0,o[i]=0,Math.floor((t-s)/e+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var u=((t+e-1)/e-1)*e+r-t;return o[a]="SAME_LOWER"===c?Math.floor((u+1)/2):Math.floor(u/2),o[i]=u-o[a],Math.floor((t+u-r)/e+1);default:throw new Error("Unsupported AutoPad type")}},t}();e.PoolConvUtil=w,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(t){return(new TextDecoder).decode(t)}},8408:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version=void 0,e.version="1.17.0"},3838:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGpuBackend=void 0;var c=n(4955),s=n(7771),u=n(8510),l=n(8305),p=function(){function t(){this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.pendingDispatchNumber=0,this.supportTimestampQuery=!1}return Object.defineProperty(t.prototype,"currentKernelCustomData",{get:function(){if(null===this.currentKernelId)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");var t=this.kernelCustomData.get(this.currentKernelId);return t||(t={},this.kernelCustomData.set(this.currentKernelId,t)),t},enumerable:!1,configurable:!0}),t.prototype.initialize=function(t){return r(this,void 0,void 0,(function(){var e,n,r,a;return o(this,(function(o){switch(o.label){case 0:if(!navigator.gpu)throw new Error("WebGpuBackend: WebGPU is not available.");return[4,navigator.gpu.requestAdapter()];case 1:if(!(e=o.sent()))throw new Error("WebGpuBackend: Failed to get GPU adapter.");return this.env=t,n=[],r={requiredLimits:{maxComputeWorkgroupStorageSize:e.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:e.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:e.limits.maxStorageBufferBindingSize,maxBufferSize:e.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:e.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:e.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:e.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:e.limits.maxComputeWorkgroupSizeZ},requiredFeatures:n},e.features.has("timestamp-query-inside-passes")&&(this.supportTimestampQuery=!0,n.push("timestamp-query-inside-passes")),e.features.has("shader-f16")&&n.push("shader-f16"),a=this,[4,e.requestDevice(r)];case 2:return a.device=o.sent(),this.gpuDataManager=(0,s.createGpuDataManager)(this),this.programManager=new l.ProgramManager(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,(0,c.configureLogger)(t.logLevel,!!t.debug),this.device.onuncapturederror=function(t){t.error instanceof GPUValidationError&&console.error("An uncaught WebGPU validation error was raised: ".concat(t.error.message))},this.supportTimestampQuery&&(this.profilingQuerySet=this.device.createQuerySet({type:"timestamp",count:2})),Object.defineProperty(this.env.webgpu,"device",{value:this.device}),[2]}}))}))},t.prototype.dispose=function(){},t.prototype.getCommandEncoder=function(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder},t.prototype.getComputePassEncoder=function(){return this.computePassEncoder||(this.computePassEncoder=this.getCommandEncoder().beginComputePass()),this.computePassEncoder},t.prototype.endComputePass=function(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)},t.prototype.flush=function(){this.endComputePass(),this.device.queue.submit([this.getCommandEncoder().finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0},t.prototype.run=function(t,e,n,r,o){if(e.length!==t.inputTypes.length)throw new Error("Input size must be equal to ".concat(t.inputTypes.length,"."));for(var a=[],i=0;i<e.length;++i){if(!(h=this.gpuDataManager.get(e[i].data)))throw new Error("no GPU data for input: ".concat(e[i].data));a[i]=h}var s=function(t,e){var n=e.map((function(t){return"".concat(t.dataType,";").concat(t.dims.join(","))})).join("|"),r=t.name;return t.cacheHint&&(r+="["+t.cacheHint+"]"),r+":"+n}(t,e),u=this.programManager.getArtifact(s),l=u?u.programInfo:"function"==typeof t.get?t.get():t,p=0===n.length?l.outputs.map((function(t,e){return e})):n;if(p.length!==l.outputs.length)throw new Error("Output size ".concat(p.length," must be equal to ").concat(l.outputs.length,"."));var f=[],d=[];for(i=0;i<l.outputs.length;++i){if(!Number.isInteger(p[i])||p[i]<-3||p[i]>=l.outputs.length)throw new Error("Invalid output index: ".concat(p[i]));if(-3!==p[i]){var h,g=-1===p[i],y=-2===p[i],m=g||y?o(l.outputs[i].dataType,l.outputs[i].dims):r(p[i],l.outputs[i].dataType,l.outputs[i].dims);if(!(h=this.gpuDataManager.get(m.data)))throw new Error("no GPU data for output: ".concat(m.data));if(g&&this.temporaryData.push(h),y){var v=this.kernelPersistentData.get(this.currentKernelId);v||(v=[],this.kernelPersistentData.set(this.currentKernelId,v)),v.push(h)}f.push(m),d.push(h)}}var b=this.programManager.normalizeDispatchGroupSize(l.dispatchGroup(e));return u||(u=this.programManager.build(l,b),this.programManager.setArtifact(s,u)),(0,c.LOG_DEBUG)("info",(function(){return'[ProgramManager] run "'.concat(l.name,'" (key=').concat(s,") with ").concat(b[0],"x").concat(b[1],"x").concat(b[2])})),this.programManager.run(u,e,a,d,b),f},t.prototype.upload=function(t,e){this.gpuDataManager.upload(t,e)},t.prototype.memcpy=function(t,e){this.gpuDataManager.memcpy(t,e)},t.prototype.download=function(t,e){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return[4,this.gpuDataManager.download(t)];case 1:return n=o.sent(),(r=e()).set(new Uint8Array(n,0,r.byteLength)),[2]}}))}))},t.prototype.alloc=function(t){return this.gpuDataManager.create(t).id},t.prototype.free=function(t){return this.gpuDataManager.release(t)},t.prototype.createKernel=function(t,e,n,r){var o=u.WEBGPU_OP_RESOLVE_RULES.get(t);if(!o)throw new Error("kernel not implemented: ".concat(t));this.kernels.set(e,[t,r,o[0],[o[1],n]])},t.prototype.releaseKernel=function(t){var e,n,r=this.kernelPersistentData.get(t);if(r){try{for(var o=a(r),i=o.next();!i.done;i=o.next()){var c=i.value;this.gpuDataManager.release(c.id)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}this.kernelPersistentData.delete(t)}this.kernelCustomData.delete(t),this.kernels.delete(t)},t.prototype.computeKernel=function(t,e,n){var r,o,s=this.kernels.get(t);if(!s)throw new Error("kernel not created: ".concat(t));var u=i(s,4),l=u[0],p=u[1],f=u[2],d=u[3];if(null!==this.currentKernelId)throw new Error('kernel "['.concat(l,"] ").concat(p,'" is not allowed to be called recursively'));this.currentKernelId=t,d[0]&&(d[1]=d[0](d[1]),d[0]=void 0),(0,c.LOG_DEBUG)("info",(function(){return'[WebGPU] Start to run kernel "['.concat(l,"] ").concat(p,'"...')}));var h=this.env.debug;this.temporaryData=[];try{return h&&this.device.pushErrorScope("validation"),f(e,d[1]),0}catch(t){return(0,c.LOG_DEBUG)("warning",'[WebGPU] Kernel "['.concat(l,"] ").concat(p,'" failed. Error: ').concat(t)),1}finally{h&&n.push(this.device.popErrorScope().then((function(t){return t?'GPU validation error for kernel "['.concat(l,"] ").concat(p,'": ').concat(t.message):null})));try{for(var g=a(this.temporaryData),y=g.next();!y.done;y=g.next()){var m=y.value;this.gpuDataManager.release(m.id)}}catch(t){r={error:t}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(r)throw r.error}}this.temporaryData=[],this.currentKernelId=null}},t}();e.WebGpuBackend=p},7675:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;var a=n(7917),i=n(3838),c=n(4955),s=n(6952),u=function(){function t(t,e,n,r){this.module=t,this.dataType=e,this.data=n,this.dims=r}return t.prototype.getFloat32Array=function(){if(1!==this.dataType)throw new Error("Invalid data type");var t=s.ShapeUtil.size(this.dims);return 0===t?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)},t.prototype.getBigInt64Array=function(){if(7!==this.dataType)throw new Error("Invalid data type");var t=s.ShapeUtil.size(this.dims);return 0===t?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)},t.prototype.getInt32Array=function(){if(6!==this.dataType)throw new Error("Invalid data type");var t=s.ShapeUtil.size(this.dims);return 0===t?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)},t.prototype.reshape=function(e){if(s.ShapeUtil.size(e)!==s.ShapeUtil.size(this.dims))throw new Error("Invalid new shape");return new t(this.module,this.dataType,this.data,e)},t}(),l=function(){function t(t,e,n){this.module=t,this.backend=e,this.customDataOffset=0,this.customDataSize=0;var r=t.HEAPU32,o=n>>2;this.opKernelContext=r[o++];var a=r[o++];this.outputCount=r[o++],this.customDataOffset=r[o++],this.customDataSize=r[o++];for(var i=[],c=0;c<a;c++){for(var s=r[o++],l=r[o++],p=r[o++],f=[],d=0;d<p;d++)f.push(r[o++]);i.push(new u(t,s,l,f))}this.inputs=i}return Object.defineProperty(t.prototype,"kernelCustomData",{get:function(){return this.backend.currentKernelCustomData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customDataBuffer",{get:function(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)},enumerable:!1,configurable:!0}),t.prototype.compute=function(t,e){var n,r,o,i=this,c=null!==(r=null===(n=null==e?void 0:e.inputs)||void 0===n?void 0:n.map((function(t){return"number"==typeof t?i.inputs[t]:t})))&&void 0!==r?r:this.inputs,l=null!==(o=null==e?void 0:e.outputs)&&void 0!==o?o:[];return this.backend.run(t,c,l,(function(t,e,n){return new u(i.module,e,i.output(t,n),n)}),(function(t,e){var n=(0,a.getTensorElementSize)(t);if(!n)throw new Error("Unsupported data type: ".concat(t));var r=n*s.ShapeUtil.size(e);return new u(i.module,t,i.backend.gpuDataManager.create(r).id,e)}))},t.prototype.output=function(t,e){var n=this.module.stackSave();try{var r=this.module.stackAlloc(4*(1+e.length)),o=r>>2;this.module.HEAPU32[o++]=e.length;for(var a=0;a<e.length;a++)this.module.HEAPU32[o++]=e[a];return this.module._JsepOutput(this.opKernelContext,t,r)}finally{this.module.stackRestore(n)}},t}();e.init=function(t,e){return r(void 0,void 0,void 0,(function(){var n,a;return o(this,(function(s){switch(s.label){case 0:if(!(n=t.jsepInit)||!navigator.gpu)return[3,2];if(!e.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using WebGPU EP");return[4,(a=new i.WebGpuBackend).initialize(e)];case 1:s.sent(),n({backend:a},(function(t){return a.alloc(t)}),(function(t){return a.free(t)}),(function(e,n,r,o){if(void 0===o&&(o=!1),o)(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToGpu: src=".concat(e,", dst=").concat(n,", size=").concat(r)})),a.memcpy(e,n);else{(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyCpuToGpu: dataOffset=".concat(e,", gpuDataId=").concat(n,", size=").concat(r)}));var i=t.HEAPU8.subarray(e,e+r);a.upload(n,i)}}),(function(e,n,i){return r(void 0,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToCpu: gpuDataId=".concat(e,", dataOffset=").concat(n,", size=").concat(i)})),[4,a.download(e,(function(){return t.HEAPU8.subarray(n,n+i)}))];case 1:return r.sent(),[2]}}))}))}),(function(n,r,o){return a.createKernel(n,r,o,e.debug||"default"===e.webgpu.profilingMode?t.UTF8ToString(t._JsepGetNodeName(r)):"".concat(r))}),(function(t){return a.releaseKernel(t)}),(function(e,n,r){(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepRun: sessionId=".concat(r.sessionId,", kernel=").concat(e,", contextDataOffset=").concat(n)}));var o=new l(t,a,n);return a.computeKernel(e,o,r.errors)})),s.label=2;case 2:return[2]}}))}))}},4955:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.LOG_DEBUG=e.LOG=e.configureLogger=void 0;var a,i,c=n(7917),s=["V","I","W","E","F"];e.configureLogger=function(t,e){a=t,i=e},e.LOG=function(t,e){var n,r,o=(0,c.logLevelStringToEnum)(t);o>=(0,c.logLevelStringToEnum)(a)&&(n=o,r="function"==typeof e?e():e,console.log("[".concat(s[n],",").concat((new Date).toISOString(),"]").concat(r)))},e.LOG_DEBUG=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i&&e.LOG.apply(void 0,o([],r(t),!1))}},6952:function(t,e){"use strict";var n=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_CLIP=e.MIN_CLIP=e.GemmUtil=e.PoolConvUtil=e.ShapeUtil=e.BroadcastUtil=e.MatMulUtil=void 0;var r=function(){function t(){}return t.calcMatMulShape=function(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]},t}();e.MatMulUtil=r;var o=function(){function t(){}return t.calcShape=function(t,e,o){var a;void 0===o&&(o=!1);var i=t.length,c=e.length;if(0===i)return e;if(0===c)return t;var s=Math.max(t.length,e.length),u=new Array(s);if(o){if(i<2||c<2)return;var l=r.calcMatMulShape([t[i-2],t[i-1]],[e[c-2],e[c-1]]);if(void 0===l)return;a=n(l,2),u[s-2]=a[0],u[s-1]=a[1]}for(var p=o?3:1;p<=s;p++){var f=i-p<0?1:t[i-p],d=c-p<0?1:e[c-p];if(f!==d&&f>1&&d>1)return;u[s-p]=Math.max(f,d)}return u},t.isValidBroadcast=function(t,e){var n=t.length,r=e.length;if(n>r)return!1;for(var o=1;o<=n;o++)if(1!==t[n-o]&&t[n-o]!==e[r-o])return!1;return!0},t}();e.BroadcastUtil=o;var a=function(){function t(){}return t.size=function(e){return t.getSizeFromDimensionRange(e,0,e.length)},t.sizeFromDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of ".concat(n," for sizeFromDimension as Tensor has ").concat(e.length," dimensions."));return t.getSizeFromDimensionRange(e,n,e.length)},t.sizeToDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of ".concat(n," for sizeToDimension as Tensor has ").concat(e.length," dimensions."));return t.getSizeFromDimensionRange(e,0,n)},t.getSizeFromDimensionRange=function(t,e,n){for(var r=1,o=e;o<n;o++){if(t[o]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");r*=t[o]}return r},t.computeStrides=function(t){var e=t.length;if(0===e)return[];if(1===e)return[1];var n=new Array(e);n[e-1]=1,n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n},t.normalizeAxis=function(t,e){if(t<-e&&t>=e)throw new Error("unsupported axis for this operation.");return t<0?t+e:t},t.normalizeAxes=function(t,e){var n=this;return t.map((function(r){return n.normalizeAxis(r,null!=e?e:t.length)}))},t.sortBasedOnPerm=function(t,e){return e?e.map((function(e){return t[e]})):t.slice().reverse()},t.padShape=function(t,e){var n=t.length;return t.map((function(t,r){return t+e[r]+e[r+n]}))},t.areEqual=function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))},t}();e.ShapeUtil=a;var i=function(){function t(){}return t.adjustPoolAttributes=function(t,e,n,r,o,a){if(!t&&n.length!==e.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(var i=0;i<e.length-2;i++)i>=n.length?n.push(e[i+2]):n[i]=e[i+2];for(i=0;i<n.length;i++)if(i<r.length){if(r[i]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(i=0;i<n.length;i++)if(i<o.length){if(o[i]<0)throw new Error("dilations should be greater than or equal to 1")}else o.push(1);for(i=0;i<2*n.length;i++)if(i<a.length){if(a[i]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(i=0;i<n.length;i++){if(n[i]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[i]>=n[i]||a[i+n.length]>=n[i])throw new Error("pads should be smaller than kernel")}},t.adjustPadsBasedOnAutoPad=function(e,n,r,o,a,i,c){if(c){if(a.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var s=0;s<e.length-2;s++)t.adjustPadAndReturnShape(e[s+(i?1:2)],n[s],r[s],o[s],a,s,s+e.length-2,c)}},t.computePoolOutputShape=function(e,n,r,o,a,i,c){if(n.length<=0)throw new Error("input shape must be of size greater than 0");var s=[n[0],n[1]];return t.computeShapeHelper(e,n,s,r,o,a,i,c),s},t.computeConvOutputShape=function(e,n,r,o,a,i,c){if(e.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var s=[e[0],n[0]];return t.computeShapeHelper(!1,e,s,r,o,a,i,c),s},t.computeShapeHelper=function(e,n,r,o,a,i,c,s){if(e)for(var u=0;u<n.length-2;u++)r.push(1);else for(u=0;u<n.length-2;u++)r.push(t.adjustPadAndReturnShape(n[u+2],o[u],a[u],i[u],c,u,u+n.length-2,s))},t.adjustPadAndReturnShape=function(t,e,n,r,o,a,i,c){var s=n*(r-1)+1;if(!c||"NOTSET"===c)return Math.floor((t+o[a]+o[i]-s)/e+1);switch(c){case"VALID":return o[a]=0,o[i]=0,Math.floor((t-s)/e+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var u=((t+e-1)/e-1)*e+r-t;return o[a]="SAME_LOWER"===c?Math.floor((u+1)/2):Math.floor(u/2),o[i]=u-o[a],Math.floor((t+u-r)/e+1);default:throw new Error("Unsupported AutoPad type")}},t}();e.PoolConvUtil=i;var c=function(){function t(){}return t.getShapeOfGemmResult=function(t,e,n,r,a){if(2!==t.length||2!==n.length)throw new Error("shape need to be of size 2");var i,c,s;e?(i=t[1],c=t[0]):(i=t[0],c=t[1]);var u=-1;if(r?(s=n[0],u=1):(s=n[1],u=0),n[u]!==c)throw new Error("dimension mismatch");if(i<=0||s<=0||c<=0)throw new Error("invalid shape specified");if(a&&!o.isValidBroadcast(a,[i,s]))throw new Error("gemm: invalid bias shape for broadcast");return[i,s,c]},t}();e.GemmUtil=c,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22},387:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;var n=function(){function t(t){Object.assign(this,t)}return Object.defineProperty(t.prototype,"cacheKey",{get:function(){var t=this;return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((function(e){return"".concat(t[e])})).join(";")),this._cacheKey},enumerable:!1,configurable:!0}),t}();e.createAttributeWithCacheKey=function(t){return new n(t)}},7771:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},c=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.createGpuDataManager=void 0;var s=n(4955),u=n(1163),l=function(t){return 16*Math.ceil(t/16)},p=0,f=function(){function t(t){this.backend=t,this.storageCache=new Map,this.freeBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[]}return t.prototype.upload=function(t,e){var n=e.buffer,r=e.byteOffset,o=e.byteLength,a=l(o),i=this.storageCache.get(t);if(!i)throw new Error("gpu data for uploading does not exist");if(i.originalSize!==o)throw new Error("inconsistent data size. gpu data size=".concat(i.originalSize,", data size=").concat(o));var c=this.backend.device.createBuffer({mappedAtCreation:!0,size:a,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),u=c.getMappedRange();new Uint8Array(u).set(new Uint8Array(n,r,o)),c.unmap();var p=this.backend.getCommandEncoder();this.backend.endComputePass(),p.copyBufferToBuffer(c,0,i.gpuData.buffer,0,a),(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.upload(id=".concat(t,")")})),this.buffersForUploadingPending.push(c)},t.prototype.memcpy=function(t,e){var n=this.storageCache.get(t);if(!n)throw new Error("source gpu data for memcpy does not exist");var r=this.storageCache.get(e);if(!r)throw new Error("destination gpu data for memcpy does not exist");if(n.originalSize!==r.originalSize)throw new Error("inconsistent source and destination gpu data size");var o=l(n.originalSize),a=this.backend.getCommandEncoder();this.backend.endComputePass(),a.copyBufferToBuffer(n.gpuData.buffer,0,r.gpuData.buffer,0,o)},t.prototype.create=function(t,e){void 0===e&&(e=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST);var n,r=l(t);if((e&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){var o=this.freeBuffers.get(r);o||(o=[],this.freeBuffers.set(r,o)),n=o.length>0?o.pop():this.backend.device.createBuffer({size:r,usage:e})}else n=this.backend.device.createBuffer({size:r,usage:e});var a={id:p++,type:u.GpuDataType.default,buffer:n};return this.storageCache.set(a.id,{gpuData:a,originalSize:t}),(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.create(size=".concat(t,") => id=").concat(a.id)})),a},t.prototype.get=function(t){var e;return null===(e=this.storageCache.get(t))||void 0===e?void 0:e.gpuData},t.prototype.release=function(t){var e=this.storageCache.get(t);if(!e)throw new Error("releasing data does not exist");return(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.release(id=".concat(t,"), gpuDataId=").concat(e.gpuData.id)})),this.storageCache.delete(t),this.buffersPending.push(e.gpuData.buffer),e.originalSize},t.prototype.download=function(t){return r(this,void 0,void 0,(function(){var e,n,r,a;return o(this,(function(o){if(!(e=this.storageCache.get(t)))throw new Error("data does not exist");return n=this.backend.getCommandEncoder(),this.backend.endComputePass(),r=l(e.originalSize),a=this.backend.device.createBuffer({size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),n.copyBufferToBuffer(e.gpuData.buffer,0,a,0,r),this.backend.flush(),[2,new Promise((function(t){a.mapAsync(GPUMapMode.READ).then((function(){var e=a.getMappedRange().slice(0);a.destroy(),t(e)}))}))]}))}))},t.prototype.refreshPendingBuffers=function(){var t,e,n,r;try{for(var o=a(this.buffersForUploadingPending),i=o.next();!i.done;i=o.next())(u=i.value).destroy()}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}this.buffersForUploadingPending=[];try{for(var c=a(this.buffersPending),s=c.next();!s.done;s=c.next()){var u;((u=s.value).usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE?this.freeBuffers.get(u.size).push(u):u.destroy()}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}this.buffersPending=[]},t.prototype.dispose=function(){this.freeBuffers.forEach((function(t){t.forEach((function(t){t.destroy()}))})),this.storageCache.forEach((function(t){t.gpuData.buffer.destroy()})),this.storageCache=new Map,this.freeBuffers=new Map},t}();e.createGpuDataManager=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(f.bind.apply(f,c([void 0],i(t),!1)))}},8510:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGPU_OP_RESOLVE_RULES=void 0;var i=n(1868),c=a(n(504)),s=n(513),u=n(9770),l=n(7640),p=n(2771),f=n(8856),d=n(8405),h=n(9218),g=n(4271),y=n(1798),m=n(2915),v=n(1522),b=n(3053),w=a(n(5262)),_=n(6031),x=n(4566),T=n(8906),S=n(5101),O=n(6198),I=n(2067),A=n(8699),P=n(2625),E=a(n(9302));e.WEBGPU_OP_RESOLVE_RULES=new Map([["Abs",[E.abs]],["Acos",[E.acos]],["Acosh",[E.acosh]],["Add",[c.add]],["ArgMax",[i.argMax,i.parseArgMinMaxAttributes]],["ArgMin",[i.argMin,i.parseArgMinMaxAttributes]],["Asin",[E.asin]],["Asinh",[E.asinh]],["Atan",[E.atan]],["Atanh",[E.atanh]],["AveragePool",[w.averagePool,w.parseAveragePoolAttributes]],["Cast",[E.cast,E.parseCastAttributes]],["Ceil",[E.ceil]],["ClipV10",[E.clipV10]],["Clip",[E.clip]],["Concat",[s.concat,s.parseConcatAttributes]],["Conv",[u.conv,u.parseConvAttributes]],["ConvTranspose",[l.convTranspose,l.parseConvTransposeAttributes]],["Cos",[E.cos]],["Cosh",[E.cosh]],["Div",[c.div]],["Einsum",[p.einsum,p.parseEinsumAttributes]],["Elu",[E.elu,E.parseAlphaAttributes]],["Equal",[c.equal]],["Erf",[E.erf]],["Exp",[E.exp]],["Expand",[f.expand]],["Floor",[E.floor]],["Gather",[d.gather,d.parseGatherAttributes]],["GatherElements",[h.gatherElements,h.parseGatherElementsAttributes]],["Gelu",[E.gelu]],["Gemm",[g.gemm,g.parseGemmAttributes]],["GlobalAveragePool",[w.globalAveragePool,w.parseGlobalAveragePoolAttributes]],["GlobalMaxPool",[w.globalMaxPool,w.parseGlobalMaxPoolAttributes]],["Greater",[c.greater]],["GreaterOrEqual",[c.greaterOrEqual]],["InstanceNormalization",[y.instanceNorm,y.parseInstanceNormAttributes]],["LayerNormalization",[m.layerNorm,m.parseLayerNormAttributes]],["LeakyRelu",[E.leakyRelu,E.parseAlphaAttributes]],["Less",[c.less]],["LessOrEqual",[c.lessOrEqual]],["Log",[E.log]],["MatMul",[v.matMul]],["MaxPool",[w.maxPool,w.parseMaxPoolAttributes]],["Mul",[c.mul]],["Neg",[E.neg]],["Not",[E.not]],["Pad",[b.pad,b.parsePadAttributes]],["Pow",[c.pow]],["Reciprocal",[E.reciprocal]],["ReduceMin",[_.reduceMin,_.parseReduceAttributes]],["ReduceMean",[_.reduceMean,_.parseReduceAttributes]],["ReduceMax",[_.reduceMax,_.parseReduceAttributes]],["ReduceSum",[_.reduceSum,_.parseReduceAttributes]],["ReduceProd",[_.reduceProd,_.parseReduceAttributes]],["ReduceL1",[_.reduceL1,_.parseReduceAttributes]],["ReduceL2",[_.reduceL2,_.parseReduceAttributes]],["ReduceLogSum",[_.reduceLogSum,_.parseReduceAttributes]],["ReduceLogSumExp",[_.reduceLogSumExp,_.parseReduceAttributes]],["ReduceSumSquare",[_.reduceSumSquare,_.parseReduceAttributes]],["Relu",[E.relu]],["Resize",[x.resize,x.parseResizeAttributes]],["Sigmoid",[E.sigmoid]],["Sin",[E.sin]],["Sinh",[E.sinh]],["Slice",[S.slice,S.parseSliceAttributes]],["SkipLayerNormalization",[T.skipLayerNorm,T.parseSkipLayerNormAttributes]],["Split",[I.split,I.parseSplitAttributes]],["Sqrt",[E.sqrt]],["Softmax",[O.softmax,O.parseSoftmaxAttributes]],["Sub",[c.sub]],["Tan",[E.tan]],["Tanh",[E.tanh]],["ThresholdedRelu",[E.thresholdedRelu,E.parseAlphaAttributes]],["Tile",[A.tile]],["Transpose",[P.transpose,P.parseTransposeAttributes]]])},1427:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.biasActivationSnippet=e.activationFnSnippet=e.typeSnippet=void 0,e.typeSnippet=function(t){switch(t){case 1:return"f32";case 2:return"vec2<f32>";case 3:return"vec3<f32>";case 4:return"vec4<f32>";default:throw new Error("".concat(t,"-component is not supported."))}},e.activationFnSnippet=function(t,e,n,r){return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=3),""},e.biasActivationSnippet=function(t,e){return"\n      ".concat(t?"value = value + getBiasByOutputCoords(coords);":"","\n      ").concat(e?"value = activation(value, coords);":"","\n      ")}},9456:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createConv2DMatMulProgramInfo=void 0;var o=n(4955),a=n(6952),i=n(1163),c=n(1427),s=n(4085),u=n(158);e.createConv2DMatMulProgramInfo=function(t,e,n,l,p,f,d,h,g){var y="NHWC"===n.format,m=y?t[0].dims[3]:t[0].dims[1],v=l[0],b=y?l[2]:l[3],w=y?l[1]:l[2],_=y?l[3]:l[1],x=((m%4==0||m%3==0)&&y||b%4==0&&!y)&&_%4==0,T=y?_:b*w,S=y?b*w:_,O=x?[8,8,1]:[T<=4?4:16,T>4&&S<=4?4:16,1],I=x?[4,4,1]:[T<=4?1:2,T>4&&S<=4?1:2,1],A=[Math.ceil(T/O[0]/I[0]),Math.ceil(S/O[1]/I[1]),Math.ceil(v/O[2]/I[2])];(0,o.LOG_DEBUG)("verbose",(function(){return"[conv2d_mm_webgpu] dispatch = ".concat(A)}));var P=x?y&&m%4!=0?3:4:I[0],E=O[1]*I[1],k=O[0]*I[0],D=Math.max(O[0]*P,O[1]),C=p%E==0,R=f%k==0,M=d%D==0,j=x?[P,4,4]:[1,1,1],B=["@group(0) @binding(0) var<storage, read> x: array<".concat(x&&4===P?"vec4<f32>":"f32",">;"),"@group(0) @binding(1) var<storage, read> w: array<".concat(x?"vec4<f32>":"f32",">;")],z="\n      fn setOutputAtIndex(flatIndex : i32, value : ".concat(x?"vec4<f32>":"f32",") {\n        result[flatIndex] = ").concat(x?"vec4<f32>":"f32","(value);\n      }\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ").concat(x?"vec4<f32>":"f32",") {\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\n        setOutputAtIndex(flatIndex ").concat(x?"/ 4":"",", value);\n      }");return h&&(B.push("@group(0) @binding(2) var<storage, read> bias: array<".concat(x?"vec4<f32>":"f32",">;")),z+="\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ".concat(x?"vec4<f32>":"f32"," {\n          return bias[coords.").concat(y?"w":"y").concat(x?"/ 4":"","];\n        }")),r(r({},e),{outputs:[{dims:l,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:A[0],y:A[1],z:A[2]}},getShaderSource:function(){return"\n        ".concat(s.utilFunctions,"\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\n        ").concat(B.join(""),"\n        @group(0) @binding(").concat(B.length,") var<storage, read_write> result: array<").concat(x?"vec4<f32>":"f32",">;\n        //@group(0) @binding(").concat(B.length+1,") var<uniform> uniforms: Uniforms;\n\n        const xShape : vec4<i32> = vec4<i32>(").concat(t[0].dims.join(","),");\n        const wShape : vec4<i32> = vec4<i32>(").concat(t[1].dims.join(","),");\n        const outShape : vec4<i32> = vec4<i32>(").concat(l.join(","),");\n        const outShapeStrides : vec3<i32> = vec3<i32>(").concat(a.ShapeUtil.computeStrides(l).slice(0,3).join(","),");\n        const filterDims : vec2<i32> = vec2<i32>(").concat(n.kernelShape[0],", ").concat(n.kernelShape[1],");\n        const pad : vec2<i32> = vec2<i32>(").concat(n.pads[0],", ").concat(n.pads[1],");\n        const stride : vec2<i32> = vec2<i32>(").concat(n.strides[0],", ").concat(n.strides[1],");\n        const dilation : vec2<i32> = vec2<i32>(").concat(n.dilations[0],", ").concat(n.dilations[1],");\n        const dimAOuter : i32 = ").concat(p,";\n        const dimBOuter : i32 = ").concat(f,";\n        const dimInner : i32 = ").concat(d,";\n        ").concat(z,"\n        ").concat(function(t,e,n,r,o,a,i,s,u,l){void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===s&&(s=4),void 0===u&&(u=4),void 0===l&&(l=4);var p=t?"\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\n    ":"\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\n    ",f=t?"\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    ":"\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    ",d=t?"xShape[1]":"xShape[2]",h=t?"xShape[2]":"xShape[3]",g=t?"row":"col",y=t?"col":"row",m="\n    let inChannels = wShape[2];\n    let outWidth = ".concat(t?"outShape[2]":"outShape[3]",";\n    let outRow = ").concat(g," / outWidth;\n    let outCol = ").concat(g," % outWidth;\n\n    let WRow = ").concat(y," / (filterDims[1] * inChannels);\n    let WCol = ").concat(y," / inChannels % filterDims[1];\n    let xRow = outRow * stride[0] + dilation[0] * WRow - pad[0];\n    let xCol = outCol * stride[1] + dilation[1] * WCol - pad[1];\n    let xCh = ").concat(y," % inChannels;\n    var resData = ").concat((0,c.typeSnippet)(s),"(0.0);\n    // The bounds checking is always needed since we use it to pad zero for\n    // the 'same' padding type.\n    if (xRow >= 0 && xRow < ").concat(d," && xCol >= 0 && xCol < ").concat(h,") {\n      ").concat(p,"\n      let xIndex = getIndexFromCoords4D(coord, xShape);\n      ").concat(function(t){switch(t){case 1:return"resData = x[xIndex];";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = x[xIndex / 4];";default:throw new Error("innerElementSize ".concat(t," is not supported."))}}(s),"\n    }\n    return resData;"),v=t?e&&r?"\n    let col = colIn * ".concat(s,";\n    ").concat(m):"\n    let col = colIn * ".concat(s,";\n    if (row < dimAOuter && col < dimInner) {\n      ").concat(m,"\n    }\n    return ").concat((0,c.typeSnippet)(s),"(0.0);"):r&&n?"\n    let col = colIn * ".concat(s,";\n    ").concat(m):"\n    let col = colIn * ".concat(s,";\n    if (row < dimInner && col < dimBOuter) {\n      ").concat(m,"\n    }\n    return ").concat((0,c.typeSnippet)(s),"(0.0);"),b="".concat(function(t){switch(t){case 1:return"return w[row * wShape[3] + colIn];";case 4:return"return w[row * wShape[3] / 4 + colIn];";default:throw new Error("innerElementSize ".concat(t," is not supported."))}}(u)),w=(0,c.typeSnippet)(l),_=t?(0,c.typeSnippet)(s):(0,c.typeSnippet)(u),x=t?(0,c.typeSnippet)(u):(0,c.typeSnippet)(s);return"\n    ".concat((0,c.activationFnSnippet)(a,i,4===l,4),"\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ").concat(_," {\n      ").concat(t?v:b,"\n    }\n\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ").concat(x," {\n      ").concat(t?b:v,"\n    }\n\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ").concat(w,") {\n      let col = colIn * ").concat(l,";\n      if (row < dimAOuter && col < dimBOuter)\n      {\n      var value = valueIn;\n      let outWidth = ").concat(t?"outShape[2]":"outShape[3]",";\n      ").concat(f,"\n      ").concat((0,c.biasActivationSnippet)(o,a),"\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n      }\n    }")}(y,C,R,M,h,void 0,!1,j[0],j[1],j[2]),"\n            ").concat(x?(0,u.makeMatMulPackedVec4Source)(I,O,void 0,!y,D):(0,u.makeMatMulPackedSource)(I,O,void 0,!y,D,!1,void 0,g))}})}},6514:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.createConvTranspose2DProgramInfo=void 0;var i=n(4955),c=n(6952),s=n(1163),u=n(2075);e.createConvTranspose2DProgramInfo=function(t,e,n,l){var p=t.length>2,f=n.outputShape,d=c.ShapeUtil.size(f),h=[Math.ceil(d/64),1,1];return(0,i.LOG_DEBUG)("verbose",(function(){return"[conv2d_backprop_webgpu] dispatch = ".concat(h)})),r(r({},e),{outputs:[{dims:l?l(f):f,dataType:t[0].dataType,gpuDataType:s.GpuDataType.default}],dispatchGroup:function(){return{x:h[0],y:h[1],z:h[2]}},getShaderSource:function(e){return function(t,e,n,r,i,s,l){void 0===l&&(l=!1);var p="NHWC"===n.format,f=p?1:2,d=p?2:3,h=p?3:1,g=c.ShapeUtil.size(r),y=l?2:1,m=n.group,v=e[1].dims,b=v[0]/m,w=v[1],_="\n  fn setOutputAtIndex(flatIndex : u32, value : ".concat(l?"vec4<f32>":"f32",") {\n    result[flatIndex] = ").concat(l?"vec4<f32>":"f32","(value);\n  }");i&&(_+="\n    fn getBiasByOutputCoords(coords : vec4<u32>) -> ".concat(l?"vec4<f32>":"f32"," {\n      return bias[coords.").concat(p?"w":"y").concat(l?"/ 4":"","];\n    }"));var x=l?4:1,T=(0,u.inputVariable)("W",e[1].dataType,e[1].dims,x),S=(0,u.inputVariable)("Dy",e[0].dataType,e[0].dims,x),O=[S,T];i&&O.push((0,u.inputVariable)("bias",e[2].dataType,[r[h]],x));var I=(0,u.outputVariable)("result",e[0].dataType,r,x),A="{\n        let batch: u32 = ".concat(s?"global_id.z":"workgroup_id.z"," / outShape[1];\n        let r = ").concat(s?"global_id.z":"workgroup_id.z"," % outShape[1];\n        let c = ").concat(s?"global_id.y":"workgroup_id.y"," * ").concat(y,";\n        let d1: u32 = ").concat(s?"global_id.x":"workgroup_id.x"," * 4;\n\n        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(pads);\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd: array<vec4<f32>, ").concat(y,">;\n        for (var i = 0; i < ").concat(y,"; i++) {\n          dotProd[i] = vec4<f32>(0.0);\n        }\n        for (var wR: u32 = 0; wR < filterDims[0]; wR = wR + 1) {\n          var dyR = (f32(dyCorner.x) + f32(wR)) / f32(strides.x);\n          let wRPerm = filterDims[0] - 1 - wR;\n          if (dyR < 0.0 || dyR >= f32(outBackprop[1]) ||\n              fract(dyR) > 0.0 || wRPerm < 0) {\n            continue;\n          }\n          let idyR: u32 = u32(dyR);\n\n          for (var wC: u32 = 0; wC < filterDims[1]; wC = wC + 1) {\n            let dyC = (f32(dyCorner.y) + f32(wC)) / f32(strides.y);\n            let dyC2 = (f32(dyCorner.y) + 1.0 + f32(wC)) / f32(strides.y);\n            let wCPerm = filterDims[1] - 1 - wC;\n            if (wCPerm < 0) {\n              continue;\n            }\n            var bDyCVal = true;\n            var bDyCVal2 = true;\n            if (dyC < 0.0 || dyC >= f32(outBackprop[2]) ||\n                fract(dyC) > 0.0) {\n              bDyCVal = false;\n            }\n            if (dyC2 < 0.0 || dyC2 >= f32(outBackprop[2]) ||\n                fract(dyC2) > 0.0) {\n              bDyCVal2 = false;\n            }\n\n            let idyC: u32 = u32(dyC);\n            let idyC2: u32 = u32(dyC2);\n            if (bDyCVal && bDyCVal2) {\n              let d2Length = outBackprop[3];\n              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ").concat(T.get("u32(wRPerm)","u32(wCPerm)","d1","d2"),";\n                let wValue1 = ").concat(T.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2"),";\n                let wValue2 = ").concat(T.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2"),";\n                let wValue3 = ").concat(T.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2"),";\n\n                var xValue = ").concat(S.get("batch","idyR","idyC","d2"),";\n                let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n\n                xValue =  ").concat(S.get("batch","idyR","idyC2","d2"),";\n\n                dotProd[1] = dotProd[1] + vec4<f32>(dot(xValue, wValue0),\n                                                    dot(xValue, wValue1),\n                                                    dot(xValue, wValue2),\n                                                    dot(xValue, wValue3));\n              }\n            } else if (bDyCVal) {\n              let d2Length = outBackprop[").concat(h,"];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ").concat(T.get("u32(wRPerm)","u32(wCPerm)","d1","d2"),";\n                let wValue1 = ").concat(T.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2"),";\n                let wValue2 = ").concat(T.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2"),";\n                let wValue3 = ").concat(T.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2"),";\n\n                var xValue = ").concat(S.get("batch","idyR","idyC","d2"),";\n                let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n              }\n            } else if (bDyCVal2) {\n              let d2Length = outBackprop[3];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ").concat(T.get("u32(wRPerm)","u32(wCPerm)","d1","d2"),";\n                let wValue1 = ").concat(T.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2"),";\n                let wValue2 = ").concat(T.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2"),";\n                let wValue3 = ").concat(T.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2"),";\n\n                var xValue = ").concat(S.get("batch","idyR","idyC2","d2"),";\n                let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[1] = dotProd[1] + tmpval;\n              }\n            }\n          }\n        }\n\n        for (var i: u32 = 0; i < ").concat(y,"; i = i + 1) {\n          let value = dotProd[i] + ").concat(i?"bias[c+i]":"0.0",";\n          ").concat(I.set("batch","r","c + i","d1","value"),";\n        }\n      }"),P="\n          let outputIndices = ".concat(I.offsetToIndices("global_idx"),";\n          let batch = ").concat(I.indicesGet("outputIndices",0),";\n          let d1 = ").concat(I.indicesGet("outputIndices",h),";\n          let r = ").concat(I.indicesGet("outputIndices",f),";\n          let c = ").concat(I.indicesGet("outputIndices",d),";\n          let dyCorner = vec2<i32>(i32(r), i32(c)) - pads;\n          let dyRCorner = dyCorner.x;\n          let dyCCorner = dyCorner.y;\n          let groupId = d1 / ").concat(w,";\n          let wOutChannel = d1 - groupId * ").concat(w,";\n          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n          // ? = to be determined. : = across all values in that axis.\n          var dotProd = 0.0;\n          for (var wR: u32 = 0; wR < effectiveFilterDims.x; wR = wR + 1) {\n            if (wR % dilations.x != 0) {\n              continue;\n            }\n            let dyR = (f32(dyRCorner) + f32(wR)) / f32(strides[0]);\n            let wRPerm = filterDims.x - 1 - wR / dilations.x;\n            if (dyR < 0.0 || dyR >= f32(outBackprop[").concat(f,"]) || fract(dyR) > 0.0 ||\n                wRPerm < 0) {\n              continue;\n            }\n            let idyR: u32 = u32(dyR);\n\n            for (var wC: u32 = 0; wC < effectiveFilterDims.y; wC = wC + 1) {\n              if (wC % dilations.y != 0) {\n                continue;\n              }\n              let dyC = (f32(dyCCorner) + f32(wC)) / f32(strides.y);\n              let wCPerm = filterDims.y - 1 - wC / dilations.y;\n              if (dyC < 0.0 || dyC >= f32(outBackprop[").concat(d,"]) ||\n                  fract(dyC) > 0.0 || wCPerm < 0) {\n                continue;\n              }\n              let idyC: u32 = u32(dyC);\n\n              for (var d2: u32 = 0; d2 < ").concat(b,"; d2 = d2 + 1) {\n                let inputChannel = groupId * ").concat(b," + d2;\n                let xValue = ").concat(p?S.get("batch","idyR","idyC","inputChannel"):S.get("batch","inputChannel","idyR","idyC"),";\n                let wValue = ").concat(T.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)"),";\n                dotProd = dotProd + xValue * wValue;\n              }\n            }\n          }\n          let value = dotProd + ").concat(i?"bias[d1]":"0.0",";\n          ").concat(I.setByOffset("global_idx","value"),";\n        ");return"\n  ".concat(t.declareVariables.apply(t,a(a([],o(O),!1),[I],!1)),"\n  ").concat(_,"\n  const outShape : vec4<u32> = vec4<u32>(").concat(r.join(","),");\n  const outBackprop : vec4<u32> = vec4<u32>(").concat(e[0].dims.join(","),");\n  const strides : vec2<u32> = vec2<u32>(").concat(n.strides[0],", ").concat(n.strides[1],");\n  const filterDims : vec2<u32> = vec2<u32>(").concat(n.kernelShape[p?1:2],", ").concat(n.kernelShape[p?2:3],");\n  const dilations : vec2<u32> = vec2<u32>(").concat(n.dilations[0],", ").concat(n.dilations[1],");\n  const effectiveFilterDims : vec2<u32> = filterDims + vec2<u32>(\n          ").concat(n.dilations[0]<=1?0:(n.kernelShape[p?1:2]-1)*(n.dilations[0]-1),",\n          ").concat(n.dilations[1]<=1?0:(n.kernelShape[p?2:3]-1)*(n.dilations[1]-1),");\n  const pads : vec2<i32> = vec2<i32>(i32(effectiveFilterDims[0]) - 1 - (").concat(n.pads[0]+n.pads[2],")/2,\n                                     i32(effectiveFilterDims[1]) - 1 - (").concat(n.pads[1]+n.pads[3],")/2);\n    ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(g),";\n  ").concat(l?A:P,"}")}(e,t,n,f,p,1===h[1]&&1===h[2])}})}},4085:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.utilFunctions=void 0,e.utilFunctions="\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n}\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n    outShapeStrides.x, outShapeStrides.y, outShapeStrides.z, 1));\n}\n"},158:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.createMatmulProgramInfo=e.makeMatMulPackedSource=e.makeMatMulPackedVec4Source=void 0;var i=n(6952),c=n(1163),s=n(2075),u=n(3997),l=n(1427);e.makeMatMulPackedVec4Source=function(t,e,n,r,o,a,i){void 0===r&&(r=!1),void 0===o&&(o=32),void 0===a&&(a=!1),void 0===i&&(i=32);var c=e[1]*t[1],s=e[0]*t[0],u=r?c:o,l=r?o:c,p=u/e[0],f=o/e[1];if((!r||4!==p||4!==t[1])&&(r||3!==p&&4!==p)||u%e[0]!=0||o%e[1]!=0||4!==t[0])throw new Error("If transposeA ".concat(r," is true, innerElementSize ").concat(p," and workPerThread[1] ").concat(t[1]," must be 4.\n      Otherwise, innerElementSize ").concat(p," must be 3 or 4.\n  tileAWidth ").concat(u," must be divisible by workgroupSize[0]").concat(e[0],". tileInner ").concat(o," must be divisible by workgroupSize[1] ").concat(e[1],". colPerThread ").concat(t[0]," must be 4."));return"\nvar<workgroup> mm_Asub : array<array<vec".concat(p,"<f32>, ").concat(u/p,">, ").concat(l,">;\nvar<workgroup> mm_Bsub : array<array<vec4<f32>, ").concat(s/t[0],">, ").concat(o,">;\n\nconst rowPerThread = ").concat(t[1],";\nconst colPerThread = ").concat(t[0],";\nconst innerElementSize = ").concat(p,";\nconst tileInner = ").concat(o,";\n\n@compute @workgroup_size(").concat(e[0],", ").concat(e[1],", ").concat(e[2],")\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n  let localRow = i32(localId.y);\n  let tileRow = localRow * rowPerThread;\n  let tileCol = i32(localId.x);\n\n  let globalRow =i32(globalId.y) * rowPerThread;\n  let globalCol = i32(globalId.x);\n  let batch = ").concat(a?"0":"i32(globalId.z)",";\n  ").concat(n?"let batchIndices = ".concat(n.offsetToIndices("u32(batch)"),";"):"","\n  let globalRowStart = i32(workgroupId.y) * ").concat(c,";\n\n  let numTiles = ").concat(a?"".concat(Math.ceil(i/o)):"(dimInner - 1) / tileInner + 1",";\n  var kStart = ").concat(a?"i32(globalId.z) * ".concat(i):"0",";\n\n  var acc: array<vec4<f32>, rowPerThread>;\n\n  // Loop over shared dimension.\n  let tileRowB = localRow * ").concat(f,";\n  for (var t = 0; t < numTiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let inputRow = tileRow + innerRow;\n          let inputCol = tileCol;\n          ").concat(function(t,e){return t?"\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          kStart + inputRow,\n          globalRowStart / innerElementSize + inputCol".concat(e?", batchIndices":"",");\n        "):"\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          globalRow + innerRow,\n          kStart / innerElementSize + inputCol".concat(e?", batchIndices":"",");\n        ")}(r,n),"\n      }\n\n      // Load one tile of B into local memory.\n      for (var innerRow = 0; innerRow < ").concat(f,"; innerRow = innerRow + 1) {\n          let inputRow = tileRowB + innerRow;\n          let inputCol = tileCol;\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol").concat(n?", batchIndices":"",");\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\n          ").concat(3===p?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];","\n\n          ").concat(function(t,e){return t?"\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\n        ".concat(3===e?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];","\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          acc[i] = BCached0 * ACached0[i] + acc[i];\n          acc[i] = BCached1 * ACached1[i] + acc[i];\n          acc[i] = BCached2 * ACached2[i] + acc[i];\n          ").concat(3===e?"":"acc[i] = BCached3 * ACached3[i] + acc[i];","\n        }"):"\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached0 * ACached.x + acc[i];\n          acc[i] = BCached1 * ACached.y + acc[i];\n          acc[i] = BCached2 * ACached.z + acc[i];\n          ".concat(3===e?"":"acc[i] = BCached3 * ACached.w + acc[i];","\n        }")}(r,p),"\n      }\n\n      workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n  }\n}")};var p=function(t,e){return t?"\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              kStart + inputRow,\n              globalRowStart + inputCol".concat(e?", batchIndices":"",");\n            "):"\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              globalRowStart + inputRow,\n              kStart + inputCol".concat(e?", batchIndices":"",");\n            ")};e.makeMatMulPackedSource=function(t,e,n,r,o,a,i,c){void 0===r&&(r=!1),void 0===o&&(o=32),void 0===a&&(a=!1),void 0===i&&(i=32),void 0===c&&(c=!1);var s=t[1]*e[1],u=t[0]*e[0],l=r?s:o,f=r?o:s;if(f%e[1]!=0||l%e[0]!=0||o%e[1]!=0)throw new Error("tileAHight ".concat(f," must be divisible by workgroupSize[1]").concat(e[1],", tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(e[0],", tileInner ").concat(o," must be divisible by workgroupSize[1]").concat(e[1]));var d=f/e[1],h=l/e[0],g=o/e[1],y=c?"\n    let localRow = i32(localId.y);\n    let localCol = i32(localId.x);\n    let globalRowStart = i32(workgroupId.y) * ".concat(s,";\n    let globalColStart = i32(workgroupId.x) * ").concat(u,";\n\n    // Loop over shared dimension.\n    for (var t = 0; t < numTiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var inputRow = localRow; inputRow < ").concat(f,"; inputRow = inputRow + ").concat(e[1],") {\n        for (var inputCol = localCol; inputCol < ").concat(l,"; inputCol = inputCol + ").concat(e[0],") {\n          ").concat(p(r,n),"\n        }\n      }\n      // Load one tile of B into local memory.\n      for (var inputRow = localRow; inputRow < ").concat(o,"; inputRow = inputRow + ").concat(e[1],") {\n            for (var inputCol = localCol; inputCol < ").concat(u,"; inputCol = inputCol + ").concat(e[0],") {\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n            kStart + inputRow,\n            globalColStart + inputCol").concat(n?", batchIndices":"",");\n        }\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      var BCached : array<f32, colPerThread>;\n      for (var k = 0; k < tileInner; k = k + 1) {\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n          BCached[inner] = mm_Bsub[k][localCol + inner * ").concat(e[0],"];\n        }\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let ACached = ").concat(r?"mm_Asub[k][localRow + innerRow * ".concat(e[1],"];"):"mm_Asub[localRow + innerRow * ".concat(e[1],"][k];"),"\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\n                ACached * BCached[innerCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      let gRow = globalRowStart + localRow + innerRow * ").concat(e[1],";\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        let gCol = globalColStart + localCol + innerCol * ").concat(e[0],";\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n      }\n    }\n    "):"\nlet tileRow = i32(localId.y) * rowPerThread;\nlet tileCol = i32(localId.x) * colPerThread;\n\nlet globalRow = i32(globalId.y) * rowPerThread;\nlet globalCol = i32(globalId.x) * colPerThread;\nlet globalRowStart = i32(workgroupId.y) * ".concat(s,";\n\nlet tileRowA = i32(localId.y) * ").concat(d,";\nlet tileColA = i32(localId.x) * ").concat(h,";\nlet tileRowB = i32(localId.y) * ").concat(g,";\n// Loop over shared dimension.\nfor (var t = 0; t < numTiles; t = t + 1) {\n  // Load one tile of A into local memory.\n  for (var innerRow = 0; innerRow < ").concat(d,"; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < ").concat(h,"; innerCol = innerCol + 1) {\n      let inputRow = tileRowA + innerRow;\n      let inputCol = tileColA + innerCol;\n      ").concat(p(r,n),"\n    }\n  }\n\n  // Load one tile of B into local memory.\n  for (var innerRow = 0; innerRow < ").concat(g,"; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n      let inputRow = tileRowB + innerRow;\n      let inputCol = tileCol + innerCol;\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n        kStart + inputRow,\n        globalCol + innerCol").concat(n?", batchIndices":"",");\n    }\n  }\n  kStart = kStart + tileInner;\n  workgroupBarrier();\n\n  // Compute acc values for a single thread.\n  var BCached : array<f32, colPerThread>;\n  for (var k = 0; k < tileInner; k = k + 1) {\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\n    }\n\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      ").concat(function(t){return t?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];"}(r),"\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n      }\n    }\n  }\n\n  workgroupBarrier();\n}\n\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n        acc[innerRow][innerCol]);\n  }\n}\n");return"\n  var<workgroup> mm_Asub : array<array<f32, ".concat(l,">, ").concat(f,">;\n  var<workgroup> mm_Bsub : array<array<f32, ").concat(u,">, ").concat(o,">;\n  const rowPerThread = ").concat(t[1],";\n  const colPerThread = ").concat(t[0],";\n  const tileInner = ").concat(o,";\n\n@compute @workgroup_size(").concat(e[0],", ").concat(e[1],", ").concat(e[2],")\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n    let batch = ").concat(a?"0":"i32(globalId.z)",";\n    ").concat(n?"let batchIndices = ".concat(n.offsetToIndices("u32(batch)"),";"):"","\n    let numTiles = ").concat(a?"".concat(Math.ceil(i/o)):"(dimInner - 1) / tileInner + 1",";\n    var kStart = ").concat(a?"i32(globalId.z) * ".concat(i):"0",";\n\n    var acc : array<array<f32, colPerThread>, rowPerThread>;\n\n    // Without this initialization strange values show up in acc.\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = 0.0;\n      }\n    }\n    ").concat(y,"\n  }\n")},e.createMatmulProgramInfo=function(t,n,p,f,d){var h=n[0].dims,g=n[1].dims,y=h.slice(0,-2),m=g.slice(0,-2),v=d?d.slice(0,-2):f.slice(0,-2),b=(0,s.inputVariable)("batchDims",n[0].dataType,v),w=[(0,s.inputVariable)("batchADims",n[0].dataType,y),(0,s.inputVariable)("batchBDims",n[0].dataType,m),b],_=i.ShapeUtil.size(v),x=h[h.length-2],T=h[h.length-1],S=g[g.length-1],O=T%4==0&&S%4==0,I=(0,u.getActicationSnippet)(p),A=I.activationFunction,P=I.applyActivation,E=x<=8?[4,1,1]:[4,4,1],k=[8,8,1],D=[Math.ceil(S/k[0]/E[0]),Math.ceil(x/k[1]/E[1]),Math.ceil(_/k[2]/E[2])],C=O?4:1,R=(0,s.inputVariable)("a",n[0].dataType,a(a([],o(y),!1),[x,T/C],!1),C),M=(0,s.inputVariable)("b",n[1].dataType,a(a([],o(m),!1),[T,S/C],!1),C),j=(0,s.outputVariable)("result",n[0].dataType,[_,x,S/C],C);w.push(R),w.push(M),w.push(j);var B=[R,M],z=n.length>2,N=function(t,e,n,r){var o=r[0],a=r[1],i=r[2],c=r[3],u=r[4],p=r[5],f=(0,s.getBroadcastDims)(o.shape,i.shape),d=(0,s.getBroadcastDims)(a.shape,i.shape);return"\n    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ".concat(i.type.indices,") -> ").concat((0,l.typeSnippet)(t)," {\n      var value = ").concat((0,l.typeSnippet)(t),"(0.0);\n      let col = colIn * ").concat(t,";\n      if(row < dimAOuter && col < dimInner)\n      {\n        ").concat(function(){for(var t=c.shape.length,e=i.shape.length,n="var aIndices: ".concat(c.type.indices,";"),r=t-2-1,o=e-1;r>=0;r--,o--)n+="\naIndices[".concat(r,"] = ").concat(e>1?"batchIndices[".concat(o,"]"):"batchIndices",";");return f.forEach((function(t){n+="\naIndices[".concat(t,"] = 0;")})),n+="\naIndices[".concat(t-2,"] = u32(row);\n                   aIndices[").concat(t-1,"] = u32(colIn);")}(),"\n        value = ").concat(c.getByIndices("aIndices"),";\n      }\n      return value;\n    }\n\n    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ").concat(i.type.indices,") -> ").concat((0,l.typeSnippet)(t)," {\n      var value = ").concat((0,l.typeSnippet)(t),"(0.0);\n      let col = colIn * ").concat(t,";\n      if(row < dimInner && col < dimBOuter)\n      {\n        ").concat(function(){for(var t=u.shape.length,e=i.shape.length,n="var bIndices: ".concat(u.type.indices,";"),r=t-2-1,o=e-1;r>=0;r--,o--)n+="\nbIndices[".concat(r,"] = ").concat(e>1?"batchIndices[".concat(o,"]"):"batchIndices",";");return d.forEach((function(t){n+="\nbIndices[".concat(t,"] = 0;")})),n+="\nbIndices[".concat(t-2,"] = u32(row);\n                   bIndices[").concat(t-1,"] = u32(colIn);")}(),"\n        value = ").concat(u.getByIndices("bIndices"),";\n      }\n      return value;\n    }\n\n    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ").concat((0,l.typeSnippet)(t),") {\n      let col = colIn * ").concat(t,";\n      if (row < dimAOuter && col < dimBOuter) {\n        var value = valueIn;\n        let coords = vec3<i32>(batch, row, colIn);\n        ").concat(e?"value = value + bias[colIn];":"","\n        ").concat(n,"\n        ").concat(p.setByIndices("vec3<u32>(coords)","value"),"\n      }\n    }\n    ")}(C,z,P,w);return z&&B.push((0,s.inputVariable)("bias",n[2].dataType,[S/C],C)),r(r({},t),{outputs:[{dims:f,dataType:n[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(t){return"\n  const dimAOuter: i32 = ".concat(x,";\n  const dimBOuter: i32 = ").concat(S,";\n  const dimInner: i32 = ").concat(T,";\n  ").concat(t.declareVariables.apply(t,a(a([],o(B),!1),[j],!1)),"\n  ").concat(N,"\n  ").concat(A,"\n  ").concat(O?(0,e.makeMatMulPackedVec4Source)(E,k,b):(0,e.makeMatMulPackedSource)(E,k,b),"\n                   ").concat(b.impl())},dispatchGroup:function(){return{x:D[0],y:D[1],z:D[2]}}})}},1868:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseArgMinMaxAttributes=e.argMax=e.argMin=void 0;var o=n(387),a=n(1163),i=n(6031),c=function(t){if(!t||0===t.length||t.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(1!==t[0].dataType)throw new Error("Invalid input type.")},s=function(t,e,n,c){var s=1===t.length?n:function(t,e){return(0,o.createAttributeWithCacheKey)({axis:e.axis,keepDims:e.keepDims,selectLastIndex:e.selectLastIndex})}(0,n),u=s.cacheKey+t.map((function(t){return t.dims.toString()})).join("_"),l={name:e,inputTypes:[a.GpuDataType.default],cacheHint:u};return r(r({},l),{get:function(){return(0,i.createReduceProgramInfo)(l,[t[0]],c,[s.axis],7,s.keepDims)}})};e.argMin=function(t,e){c(t.inputs),t.compute(s(t.inputs,"ArgMin",e,(function(t,n,r){for(var o=[],a=0;a<t.shape.length;a++)(r.indexOf(a)>=0||0===r.length)&&o.push("inputIndices[".concat(a,"] = 0;"));return["".concat(o.join("\n")),"var value = ".concat(t.getByOffset("inputOffset"),";\nvar bestIndex : i32 = 0;"),"if (".concat(t.getByOffset("inputOffset")," ").concat(e.selectLastIndex>0?"<=":"<"," value) {\n         value = ").concat(t.getByOffset("inputOffset"),";\n         bestIndex = i32(lastIndex);\n       }"),"",n.setByOffset("global_idx","bestIndex")]})),{inputs:[0]})},e.argMax=function(t,e){c(t.inputs),t.compute(s(t.inputs,"argMax",e,(function(t,n,r){for(var o=[],a=0;a<t.shape.length;a++)(r.indexOf(a)>=0||0===r.length)&&o.push("inputIndices[".concat(a,"] = 0;"));return["".concat(o.join("\n")),"var value = ".concat(t.getByOffset("inputOffset"),";\nvar bestIndex : i32 = 0;"),"if (".concat(t.getByOffset("inputOffset")," ").concat(e.selectLastIndex>0?">=":">"," value) {\n         value = ").concat(t.getByOffset("inputOffset"),";\n         bestIndex = i32(lastIndex);\n       }"),"",n.setByOffset("global_idx","bestIndex")]})),{inputs:[0]})},e.parseArgMinMaxAttributes=function(t){return(0,o.createAttributeWithCacheKey)(t)}},504:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.lessOrEqual=e.greaterOrEqual=e.less=e.greater=e.sub=e.pow=e.mul=e.equal=e.div=e.add=void 0;var o=n(6952),a=n(1163),i=n(2075),c=function(t,e,n,c,s,u){var l={name:e,inputTypes:[a.GpuDataType.default,a.GpuDataType.default],cacheHint:s};return r(r({},l),{get:function(){return function(t,e,n,c,s,u){var l,p;void 0===u&&(u=e.dataType);var f=!o.ShapeUtil.areEqual(e.dims,n.dims),d=e.dims,h=o.ShapeUtil.size(e.dims),g=!1;if(f){var y=o.BroadcastUtil.calcShape(e.dims,n.dims,!1);if(!y)throw new Error("Can't perform binary op on the given tensors");d=y,h=o.ShapeUtil.size(d);for(var m=1===o.ShapeUtil.size(e.dims),v=1===o.ShapeUtil.size(n.dims),b=1,w=1;w<d.length;w++){var _=null!==(l=e.dims[e.dims.length-w])&&void 0!==l?l:1;if(_!==(null!==(p=n.dims[n.dims.length-w])&&void 0!==p?p:1))break;b*=_}(b%4==0||m||v)&&(g=!0)}else g=!0;return r(r({},t),{getShaderSource:function(t){return function(t,e,n,r,a,c,s,u,l,p,f){var d,h,g=o.ShapeUtil.size(r),y=Math.ceil(g/4);"string"==typeof s?d=h=function(t,e){return"".concat(s,"((").concat(t,"),(").concat(e,"))")}:"function"==typeof s?d=h=s:(d=s.scalar,h=s.vector);var m,v="",b=(0,i.outputVariable)("outputData",p,r,4),w=(0,i.inputVariable)("aData",u,e,4),_=(0,i.inputVariable)("bData",l,n,4);if(c){var x=function(t){for(var e=o.ShapeUtil.computeStrides(t),n=[],a=t.length-1;a>=0;a--){var i=b.indicesGet("outputIndices",a+r.length-t.length);n.push("".concat(e[a],"u * (").concat(i," % ").concat(t[a],"u)"))}return n.length>0?n.join("+"):"0u"};v="\n          fn calcOffsetA(outputIndices: ".concat(b.type.indices,") -> u32 {\n            return ").concat(x(e),";\n          }\n\n          fn calcOffsetB(outputIndices: ").concat(b.type.indices,") -> u32 {\n            return ").concat(x(n),";\n          }\n        ")}if(a)if(c){var T=1===o.ShapeUtil.size(e),S=1===o.ShapeUtil.size(n);m=T||S?b.setByOffset("global_idx",h(T?"".concat(w.type.value,"(").concat(w.getByOffset("0"),".x)"):w.getByOffset("global_idx"),S?"".concat(_.type.value,"(").concat(_.getByOffset("0"),".x)"):_.getByOffset("global_idx"))):"\n            let outputIndices = ".concat(b.offsetToIndices("global_idx * 4u"),";\n            let offsetA = calcOffsetA(outputIndices);\n            let offsetB = calcOffsetB(outputIndices);\n            ").concat(b.setByOffset("global_idx",h(w.getByOffset("offsetA / 4u"),_.getByOffset("offsetB / 4u"))),"\n          ")}else m=b.setByOffset("global_idx",h(w.getByOffset("global_idx"),_.getByOffset("global_idx")));else{if(!c)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");var O=function(t,e,n){void 0===n&&(n="");var r="aData[indexA".concat(e,"][componentA").concat(e,"]"),o="bData[indexB".concat(e,"][componentB").concat(e,"]");return"\n            let outputIndices".concat(e," = ").concat(b.offsetToIndices("global_idx * 4u + ".concat(e,"u")),";\n            let offsetA").concat(e," = calcOffsetA(outputIndices").concat(e,");\n            let offsetB").concat(e," = calcOffsetB(outputIndices").concat(e,");\n            let indexA").concat(e," = offsetA").concat(e," / 4u;\n            let indexB").concat(e," = offsetB").concat(e," / 4u;\n            let componentA").concat(e," = offsetA").concat(e," % 4u;\n            let componentB").concat(e," = offsetB").concat(e," % 4u;\n            ").concat(t,"[").concat(e,"] = ").concat(n,"(").concat(d(r,o),");\n          ")};m=9===p?"\n            var data = vec4<u32>(0);\n            ".concat(O("data",0,"u32"),"\n            ").concat(O("data",1,"u32"),"\n            ").concat(O("data",2,"u32"),"\n            ").concat(O("data",3,"u32"),"\n            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));"):"\n            ".concat(O("outputData[global_idx]",0),"\n            ").concat(O("outputData[global_idx]",1),"\n            ").concat(O("outputData[global_idx]",2),"\n            ").concat(O("outputData[global_idx]",3),"\n          ")}return"\n        ".concat(t.declareVariables(w,_,b),"\n\n        ").concat(null!=f?f:"","\n        ").concat(v,"\n\n        ").concat(t.mainStart(),"\n        ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(y),"\n        ").concat(m,"\n      }")}(t,e.dims,n.dims,d,g,f,c,e.dataType,n.dataType,u,s)},outputs:[{dims:d,dataType:u,gpuDataType:a.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(h/64/4)}}})}(l,t[0],t[1],n,c,u)}})};e.add=function(t){t.compute(c(t.inputs,"Add",(function(t,e){return"".concat(t,"+").concat(e)})))},e.div=function(t){t.compute(c(t.inputs,"Div",(function(t,e){return"".concat(t,"/").concat(e)})))},e.equal=function(t){t.compute(c(t.inputs,"Equal",{scalar:function(t,e){return"u32(".concat(t,"==").concat(e,")")},vector:function(t,e){return"vec4<u32>(".concat(t,"==").concat(e,")")}},void 0,void 0,9))},e.mul=function(t){t.compute(c(t.inputs,"Mul",(function(t,e){return"".concat(t,"*").concat(e)})))},e.pow=function(t){var e=(0,i.inputVariable)("input",t.inputs[0].dataType,t.inputs[0].dims).type.value,n="i32"===e?"round":"";t.compute(c(t.inputs,"Pow",{scalar:function(t,e){return"pow_custom(".concat(t,",").concat(e,")")},vector:function(t,e){return"pow_vector_custom(".concat(t,",").concat(e,")")}},"\n    fn pow_custom(a : ".concat(e,", b : ").concat(e,") -> ").concat(e," {\n      if (b == ").concat(e,"(0.0)) {\n        return ").concat(e,"(1.0);\n      } else if (a < ").concat(e,"(0.0) && f32(b) != floor(f32(b))) {\n        return ").concat(e,"(pow(f32(a), f32(b))); // NaN\n      }\n      return select(sign(a), ").concat(e,"(1.0), round(f32(abs(b) % ").concat(e,"(2.0))) != 1.0) * ").concat(e,"(").concat(n,"(pow(f32(abs(a)), f32(b))));\n    }\n    fn pow_vector_custom(a : vec4<").concat(e,">, b : vec4<").concat(e,">) -> vec4<").concat(e,"> {\n      // TODO: implement vectorized pow\n      return vec4<").concat(e,">(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));\n    }\n      ")))},e.sub=function(t){t.compute(c(t.inputs,"Sub",(function(t,e){return"".concat(t,"-").concat(e)})))},e.greater=function(t){t.compute(c(t.inputs,"Greater",{scalar:function(t,e){return"u32(".concat(t,">").concat(e,")")},vector:function(t,e){return"vec4<u32>(".concat(t,">").concat(e,")")}},void 0,void 0,9))},e.less=function(t){t.compute(c(t.inputs,"Less",{scalar:function(t,e){return"u32(".concat(t,"<").concat(e,")")},vector:function(t,e){return"vec4<u32>(".concat(t,"<").concat(e,")")}},void 0,void 0,9))},e.greaterOrEqual=function(t){t.compute(c(t.inputs,"GreaterOrEqual",{scalar:function(t,e){return"u32(".concat(t,">=").concat(e,")")},vector:function(t,e){return"vec4<u32>(".concat(t,">=").concat(e,")")}},void 0,void 0,9))},e.lessOrEqual=function(t){t.compute(c(t.inputs,"LessOrEqual",{scalar:function(t,e){return"u32(".concat(t,"<=").concat(e,")")},vector:function(t,e){return"vec4<u32>(".concat(t,"<=").concat(e,")")}},void 0,void 0,9))}},2075:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBroadcastDims=e.createShaderHelper=e.outputVariable=e.inputVariable=e.tensorTypeToWsglValueType=e.tensorTypeToWsglStorageType=e.WORKGROUP_SIZE=void 0;var r=n(6952);e.WORKGROUP_SIZE=64;var o=function(t,e){if(3===e)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(t){case 10:return e>1?"vec".concat(e,"<f16>"):"f16";case 1:return e>1?"vec".concat(e,"<f32>"):"f32";case 6:return e>1?"vec".concat(e,"<i32>"):"i32";case 12:return e>1?"vec".concat(e,"<u32>"):"u32";case 7:if(e>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(e>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(4!==e)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error("Unknown data type: ".concat(t))}};e.tensorTypeToWsglStorageType=function(t,e){void 0===e&&(e=1);var n=o(t,e);return"string"==typeof n?n:n[0]},e.tensorTypeToWsglValueType=function(t,e){void 0===e&&(e=1);var n=o(t,e);return"string"==typeof n?n:n[1]};var a=function(t,e,n,a,i){for(var c=n.length,s=c<2?"u32":c<=4?"vec".concat(c,"<u32>"):"array<u32, ".concat(c,">"),u=o(e,i),l="string"==typeof u?u:u[1],p="string"==typeof u?u:u[0],f={indices:s,value:l,storage:p,tensor:e},d=function(t){return"string"==typeof t?t:"".concat(t,"u")},h={offsetToIndices:!1,indicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},g=r.ShapeUtil.computeStrides(n),y="",m=0;m<c-1;m++)y+="\n    let dim".concat(m," = current / ").concat(g[m],"u;\n    let rest").concat(m," = current % ").concat(g[m],"u;\n    indices[").concat(m,"] = dim").concat(m,";\n    current = rest").concat(m,";\n    ");y+="indices[".concat(c-1,"] = current;");var v=c<2?"":"\n  fn o2i_".concat(t,"(offset: u32) -> ").concat(f.indices," {\n    var indices: ").concat(f.indices,";\n    var current = offset;\n    ").concat(y,"\n    return indices;\n  }"),b=[];if(c>=2)for(m=c-1;m>=0;m--)b.push("".concat(g[m],"u * (indices[").concat(m,"])"));var w,_,x=c<2?"":"\n  fn i2o_".concat(t,"(indices: ").concat(f.indices,") -> u32 {\n    return ").concat(b.join("+"),";\n  }"),T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===c?"0u":"".concat(f.indices,"(").concat(t.map(d).join(","),")")},S=function(e,n){return function(){if(f.storage===f.value)return"".concat(t,"[").concat(e,"]=").concat(n,";");if("vec2<u32>"===f.storage&&"i32"===f.value)return"".concat(t,"[").concat(e,"]=vec2<u32>(u32(").concat(n,"), select(0u, 0xFFFFFFFFu, ").concat(n," < 0));");if("vec2<u32>"===f.storage&&"u32"===f.value)return"".concat(t,"[").concat(e,"]=vec2<u32>(u32(").concat(n,"), 0u);");if("u32"===f.storage&&"vec4<bool>"===f.value)return"".concat(t,"[").concat(e,"]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(").concat(n,"));");throw new Error("not supported combination of storage type ".concat(f.storage," and value type ").concat(f.value," yet"))}()},O=function(e){return function(){if(f.storage===f.value)return"".concat(t,"[").concat(e,"]");if("vec2<u32>"===f.storage&&"i32"===f.value)return"i32(".concat(t,"[").concat(e,"].x)");if("vec2<u32>"===f.storage&&"u32"===f.value)return"u32(".concat(t,"[").concat(e,"].x)");if("u32"===f.storage&&"vec4<bool>"===f.value)return"vec4<bool>(bool(".concat(t,"[").concat(e,"] & 0xFFu), bool(").concat(t,"[").concat(e,"] & 0xFF00u), bool(").concat(t,"[").concat(e,"] & 0xFF0000u), bool(").concat(t,"[").concat(e,"] & 0xFF000000u))");throw new Error("not supported combination of storage type ".concat(f.storage," and value type ").concat(f.value," yet"))}()},I=c<2?"":"\n  fn get_".concat(t,"ByIndices(indices: ").concat(f.indices,") -> ").concat(l," {\n    return ").concat(O("i2o_".concat(t,"(indices)")),";\n  }"),A=c<2?"":(w=n.map((function(t,e){return"d".concat(e,": u32")})).join(", "),_=n.map((function(t,e){return"d".concat(e)})).join(", "),"\n  fn get_".concat(t,"(").concat(w,") -> ").concat(l," {\n    return get_").concat(t,"ByIndices(").concat(T(_),");\n  }")),P=c<2?"":"\n  fn set_".concat(t,"ByIndices(indices: ").concat(f.indices,", value: ").concat(l,") {\n    ").concat(S("i2o_".concat(t,"(indices)"),"value"),"\n  }"),E=c<2?"":function(){var e=n.map((function(t,e){return"d".concat(e,": u32")})).join(", "),r=n.map((function(t,e){return"d".concat(e)})).join(", ");return"\n  fn set_".concat(t,"(").concat(e,", value: ").concat(l,") {\n    set_").concat(t,"ByIndices(").concat(T(r),", value);\n  }")}();return{impl:function(){var t=[];return h.offsetToIndices&&t.push(v),h.indicesToOffset&&t.push(x),h.set&&t.push(E),h.setByIndices&&t.push(P),h.get&&t.push(A),h.getByIndices&&t.push(I),t.join("\n")},type:f,offsetToIndices:function(e){return h.offsetToIndices=!0,c<2?e:"o2i_".concat(t,"(").concat(e,")")},indicesToOffset:function(e){return h.indicesToOffset=!0,c<2?e:"i2o_".concat(t,"(").concat(e,")")},indices:T,indicesGet:function(t,e){return c<2?"".concat(t):"".concat(t,"[").concat(e,"]")},indicesSet:function(t,e,n){return c<2?"".concat(t,"=").concat(n,";"):"".concat(t,"[").concat(e,"]=").concat(n,";")},set:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(e.length!==c+1)throw new Error("indices length must be ".concat(c));var r=e[c];if("string"!=typeof r)throw new Error("value must be string");var o=e.slice(0,c).map(d).join(",");return 0===c?S("0u",r):1===c?S(o[0],r):(h.set=!0,h.setByIndices=!0,h.indicesToOffset=!0,"set_".concat(t,"(").concat(o,", ").concat(r,")"))},setByOffset:S,setByIndices:function(e,n){return c<2?S(e,n):(h.setByIndices=!0,h.indicesToOffset=!0,"set_".concat(t,"ByIndices(").concat(e,", ").concat(n,");"))},get:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(e.length!==c)throw new Error("indices length must be ".concat(c));var r=e.map(d).join(",");return 0===c?O("0u"):1===c?O(r[0]):(h.get=!0,h.getByIndices=!0,h.indicesToOffset=!0,"get_".concat(t,"(").concat(r,")"))},getByOffset:O,getByIndices:function(e){return c<2?O(e):(h.getByIndices=!0,h.indicesToOffset=!0,"get_".concat(t,"ByIndices(").concat(e,")"))},usage:a?"input":"output",name:t,shape:n}};e.inputVariable=function(t,e,n,r){return void 0===r&&(r=1),a(t,e,n,!0,r)},e.outputVariable=function(t,e,n,r){return void 0===r&&(r=1),a(t,e,n,!1,r)};var i=function(){function t(t){this.normalizedDispatchGroup=t,this.indicesHelpers=[]}return t.prototype.guardAgainstOutOfBoundsWorkgroupSizes=function(t){var e="number"==typeof t?"".concat(t,"u"):t;return"if (global_idx >= ".concat(e,") { return; }")},t.prototype.mainStart=function(t){void 0===t&&(t=e.WORKGROUP_SIZE);var n="number"==typeof t?t:t[0],r="number"==typeof t?1:t[1],o="number"==typeof t?1:t[2],a=1===this.normalizedDispatchGroup[1]&&1===this.normalizedDispatchGroup[2],i=a?"@builtin(global_invocation_id) global_id : vec3<u32>,\n    @builtin(local_invocation_id) local_id : vec3<u32>":"@builtin(local_invocation_index) local_index : u32,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>",c=a?"let global_idx = global_id.x;":"let global_idx = (workgroup_id.z * ".concat(this.normalizedDispatchGroup[0]*this.normalizedDispatchGroup[1],"u +\n          workgroup_id.y * ").concat(this.normalizedDispatchGroup[0],"u + workgroup_id.x) * ").concat(n*r*o,"u + local_index;");return"@compute @workgroup_size(".concat(n,", ").concat(r,", ").concat(o,")\n  fn main(").concat(i,") {\n    ").concat(c,"\n  ")},t.prototype.declareVariable=function(t,e){this.indicesHelpers.push(t);var n="input"===t.usage?"read":"read_write",r=t.type.storage;return"@group(0) @binding(".concat(e,") var<storage, ").concat(n,"> ").concat(t.name,": array<").concat(r,">;")},t.prototype.declareVariables=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=0;return e.filter((function(t){return r.ShapeUtil.size(t.shape)>0})).map((function(e){return t.declareVariable(e,o++)})).join("\n")},Object.defineProperty(t.prototype,"additionalImplementations",{get:function(){return this.indicesHelpers.map((function(t){return t.impl()})).join("\n")},enumerable:!1,configurable:!0}),t}();e.createShaderHelper=function(t){return new i(t)},e.getBroadcastDims=function(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var a=n-1-o,i=t[a]||1;(e[e.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r}},513:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;var c=n(6952),s=n(387),u=n(1163),l=n(2075);e.concat=function(t,e){!function(t){var e,n;if(!t||t.length<1)throw new Error("too few inputs");var r=t[0].dataType,a=t[0].dims.length;try{for(var i=o(t),c=i.next();!c.done;c=i.next()){var s=c.value;if(s.dataType!==r)throw new Error("input tensors should be one type");if(s.dims.length!==a)throw new Error("input tensors should have the same shape")}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}(t.inputs),t.compute(function(t,e){var n,o,s=(n=t.length,o=e.cacheKey,{name:"Concat",inputTypes:Array(n).fill(u.GpuDataType.default),cacheHint:o});return r(r({},s),{get:function(){return function(t,e,n){var o=e[0].dims.slice();if(n>=o.length||n<-1*o.length)throw new Error("axis specified for concat doesn't match input dimensionality");for(var s=n<0?o.length+n:n,p=o.slice(0),f=1;f<e.length;f++)for(var d=e[f].dims.slice(),h=0;h<o.length;h++)if(h===s)p[s]+=d[h];else if(o[h]!==d[h])throw new Error("non concat dimensions must match");var g=c.ShapeUtil.size(p),y=new Array(e.length),m=new Array(e.length),v=e[0].dataType,b=0;for(f=0;f<e.length;++f)b+=e[f].dims[s],y[f]=b,m[f]=(0,l.inputVariable)("input".concat(f),v,e[f].dims);var w=(0,l.outputVariable)("output",v,p),_=w.indicesGet("indices",s);return r(r({},t),{outputs:[{dims:p,dataType:e[0].dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(t){return"\n  ".concat(t.declareVariables.apply(t,i(i([],a(m),!1),[w],!1)),"\n\n  const sizeInConcatAxis = array<u32, ").concat(y.length,">(").concat(y.map((function(t){return"".concat(t,"u")})).join(","),");\n  ").concat((e=y.length,"\n  fn calculateInputIndex(index: u32) -> u32 {\n    for (var i: u32 = 0u; i < ".concat(e,"u; i += 1u ) {\n      if (index < sizeInConcatAxis[i]) {\n        return i;\n      }\n    }\n    return ").concat(e,"u;\n  }")),"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(g),"\n\n    var indices = ").concat(w.offsetToIndices("global_idx"),";\n\n    let inputIndex = calculateInputIndex(").concat(_,");\n    if (inputIndex != 0u) {\n      ").concat(_," -= sizeInConcatAxis[inputIndex - 1u];\n    }\n\n    ").concat(function(t,e){for(var n=t.length,r=[],o=0;o<n;++o){var a=e.setByOffset("global_idx",t[o].getByIndices("indices"));1===n?r.push(a):0===o?r.push("if (inputIndex == ".concat(o,"u) { ").concat(a," }")):o===n-1?r.push("else { ".concat(a," }")):r.push("else if (inputIndex == ".concat(o,") { ").concat(a," }"))}return r.join("\n")}(m,w),"\n  }");var e},dispatchGroup:function(){return{x:Math.ceil(g/64)}}})}(s,t,e.axis)}})}(t.inputs,e))},e.parseConcatAttributes=function(t){return(0,s.createAttributeWithCacheKey)({axis:t.axis})}},9192:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.createGroupedConvProgramInfoLoader=void 0;var i=n(6952),c=n(1163),s=n(2075),u=n(9770),l=n(3997);e.createGroupedConvProgramInfoLoader=function(t,e,n){var p,f,d=(p=t.length>2,f=e.cacheKey,{name:"GroupedConv",inputTypes:p?[c.GpuDataType.default,c.GpuDataType.default,c.GpuDataType.default]:[c.GpuDataType.default,c.GpuDataType.default],cacheHint:f});return r(r({},d),{get:function(){return function(t,e,n,p){var f=t.length>2,d=f?"value += b[output_channel];":"",h=t[0].dims,g=t[1].dims,y=g[0]/n.group,m=(0,l.getActicationSnippet)(n),v=m.activationFunction,b=m.applyActivation,w="NHWC"===n.format,_=(0,u.calculateOutputShape)(h,g,n.dilations,n.pads,n.strides,w),x=i.ShapeUtil.size(_),T=(0,s.outputVariable)("output",t[0].dataType,_),S=(0,s.inputVariable)("x",t[0].dataType,h),O=(0,s.inputVariable)("w",t[1].dataType,g),I=[S,O];return f&&I.push((0,s.inputVariable)("b",t[2].dataType,t[2].dims)),r(r({},e),{outputs:[{dims:p?p(_):_,dataType:t[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(t){return"\n  const strides: vec2<u32> = vec2(".concat(n.strides[0],"u, ").concat(n.strides[1],"u);\n  const pads: vec2<u32> = vec2(").concat(n.pads[0],"u, ").concat(n.pads[1],"u);\n\n  ").concat(t.declareVariables.apply(t,a(a([],o(I),!1),[T],!1)),"\n\n  ").concat(v,"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(x),"\n\n    let outputIndices = ").concat(T.offsetToIndices("global_idx"),";\n    let batch: u32 = outputIndices[0];\n    let output_channel: u32 = outputIndices[").concat(w?3:1,"];\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[").concat(w?1:2,"], outputIndices[").concat(w?2:3,"]) * strides - pads;\n    let group_id: u32 = output_channel / ").concat(y,"u;\n\n    var value: ").concat(T.type.value," = ").concat(T.type.value,"(0);\n    for (var wInChannel: u32 = 0u; wInChannel < ").concat(g[1],"u; wInChannel++) {\n      let input_channel = group_id * ").concat(g[1],"u + wInChannel;\n      for (var wHeight: u32 = 0u; wHeight < ").concat(g[2],"u; wHeight++) {\n        let xHeight = xRCCorner.x + wHeight * ").concat(n.dilations[0],"u;\n\n        if (xHeight < 0u || xHeight >= ").concat(h[w?1:2],"u) {\n          continue;\n        }\n\n        for (var wWidth: u32 = 0u; wWidth < ").concat(g[3],"u; wWidth++) {\n          let xWidth = xRCCorner.y + wWidth * ").concat(n.dilations[1],"u;\n          if (xWidth < 0u || xWidth >= ").concat(h[w?2:3],"u) {\n            continue;\n          }\n\n          let xVal = ").concat(w?S.get("batch","xHeight","xWidth","input_channel"):S.get("batch","input_channel","xHeight","xWidth"),";\n          let wVal = ").concat(O.get("output_channel","wInChannel","wHeight","wWidth"),";\n          value += xVal*wVal;\n        }\n      }\n    }\n    ").concat(d,"\n    ").concat(b,"\n    ").concat(T.setByOffset("global_idx","value"),"\n  }")},dispatchGroup:function(){return{x:Math.ceil(x/64)}}})}(t,d,e,n)}})}},7640:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.convTranspose=e.parseConvTransposeAttributes=void 0;var o=n(387),a=n(1163),i=n(6514),c=n(3997),s=function(t,e,n,r,o,a){return(t-1)*e+n+(r-1)*o+1-a},u=function(t,e,n,r,o){var a=Math.floor(t/2);"SAME_UPPER"===e?(n[r]=a,n[o]=t-a):"SAME_LOWER"===e&&(n[r]=t-a,n[o]=a)},l=function(t,e){var n=t.kernelShape.slice();if(0===t.kernelShape.length||0===t.kernelShape.reduce((function(t,e){return t*e}),0)){n.length=0;for(var r=2;r<e[1].dims.length;++r)n.push(e[1].dims[r])}var o="NHWC"===t.format;n.splice(0,0,e[1].dims[0]),n.splice(o?3:1,0,e[1].dims[1]);var a=t.pads.slice(),i=t.outputShape.slice(),c=t.outputPadding.slice(),l=e[0].dims,p=t.dilations.slice();if(0===p.reduce((function(t,e){return t+e}),0)){var f=e[0].dims.length-2;p=new Array(f).fill(1)}var d=t.strides.slice();0===d.reduce((function(t,e){return t+e}),0)&&(f=e[0].dims.length-2,d=new Array(f).fill(1)),function(t,e,n,r,o,a,i,c,l,p){var f=t.length-2,d=0===p.length;if(0===l.length)for(var h=0;h<f;++h)l.push(0);for(var g=t[0],y=e[c?3:1]*o,m=(h=0,t.length-f-(c?1:0));h<f;++h,++m){var v=t[m],b=d?v*i[h]:p[h],w=s(v,i[h],a[h],e[m],n[h],b);u(w,r,a,h,h+f),d&&p.push(i[h]*(v-1)+l[h]+(e[m]-1)*n[h]+1-a[h]-a[h+f])}p.splice(0,0,g),p.splice(c?3:1,0,y)}(l,n,p,t.autoPad,t.group,a,d,o,c,i);var h=Object.assign({},t);return Object.assign(h,{kernelShape:n,pads:a,outputPadding:c,outputShape:i,dilations:p,strides:d,cacheKey:t.cacheKey}),h};e.parseConvTransposeAttributes=function(t){var e=(0,c.parseInternalActivationAttributes)(t),n=t.format,a=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][void 0===t.autoPad?0:t.autoPad],i=t.dilations,s=t.group,u=t.kernelShape,l=t.pads,p=t.strides,f=t.wIsConst(),d=t.outputPadding,h=t.outputShape;return(0,o.createAttributeWithCacheKey)(r({autoPad:a,format:n,dilations:i,group:s,kernelShape:u,outputPadding:d,outputShape:h,pads:l,strides:p,wIsConst:f},e))};var p=function(t,e,n){var o,c,s=(o=3===t.length,c=e.cacheKey,{name:"ConvTranspose2D",inputTypes:o?[a.GpuDataType.default,a.GpuDataType.default,a.GpuDataType.default]:[a.GpuDataType.default,a.GpuDataType.default],cacheHint:c});return r(r({},s),{get:function(){return(0,i.createConvTranspose2DProgramInfo)(t,s,e,n)}})};e.convTranspose=function(t,e){!function(t,e){if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length&&3!==t[0].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims.length!==t[1].dims.length)throw new Error("filter does not have same dimension as input");if(t[0].dims["NHWC"===e.format?t[0].dims.length-1:1]!==t[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");var n=t[1].dims[1]*e.group;if(3===t.length&&(1!==t[2].dims.length||t[2].dims[0]!==n))throw new Error("invalid bias");var r=t[0].dims.length-2;if(e.dilations.reduce((function(t,e){return t+e}),0)>0&&e.dilations.length!==r)throw new Error("dilations should be ".concat(r,"D"));if(e.strides.reduce((function(t,e){return t+e}),0)>0&&e.strides.length!==r)throw new Error("strides should be ".concat(r,"D"));if(e.pads.reduce((function(t,e){return t+e}),0)>0&&e.pads.length!==2*r)throw new Error("pads should be ".concat(2*r,"D"));if(e.outputPadding.length!==r&&0!==e.outputPadding.length)throw new Error("output_padding should be ".concat(r,"D"));if(e.kernelShape.reduce((function(t,e){return t+e}),0)>0&&0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==e.outputShape.length&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if(1!==t[0].dataType||1!==t[1].dataType)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===t.length&&1!==t[2].dataType)throw new Error("ConvTranspose input(bias) should be float tensor")}(t.inputs,e),3===t.inputs[0].dims.length?function(t,e){var n="NHWC"===e.format,o=[t.inputs[0].reshape(n?[t.inputs[0].dims[0],1,t.inputs[0].dims[1],t.inputs[0].dims[2]]:[t.inputs[0].dims[0],t.inputs[0].dims[1],1,t.inputs[0].dims[2]]),t.inputs[1].reshape([t.inputs[1].dims[0],t.inputs[1].dims[1],1,t.inputs[1].dims[2]])];3===o.length&&o.push(t.inputs[2]);var a=e.kernelShape;0!==a.length&&0!==a[0]||(a=[t.inputs[1].dims[2]]);var i=e.dilations;0!==i.length&&0!==i[0]||(i=[1]);var c=e.strides;0!==c.length&&0!==c[0]||(c=[1]);var s=e.pads;0===s.length&&(s=[0,0]),s=[0,s[0],0,s[1]],c=[1].concat(c),i=[1].concat(i),a=[1].concat(a);var u=l(r(r({},e),{pads:s,strides:c,dilations:i,kernelShape:a}),o);t.compute(p(o,u,(function(t){return n?[t[0],t[2],t[3]]:[t[0],t[1],t[3]]})))}(t,e):function(t,e,n){var r=l(n,e);t.compute(p(e,r))}(t,t.inputs,e)}},9770:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.conv=e.parseConvAttributes=e.calculateOutputShape=void 0;var o=n(6952),a=n(387),i=n(9192),c=n(3822),s=n(3997),u=n(1522),l=n(2625);e.calculateOutputShape=function(t,e,n,r,o,a){var i=t[0],c=t.slice(a?1:2,a?3:4),s=c.length,u=e[0],l=e.slice(2).map((function(t,e){return t+(t-1)*(n[e]-1)})),p=c.map((function(t,e){return t+r[e]+r[e+s]})).map((function(t,e){return Math.floor((t-l[e]+o[e])/o[e])}));return p.splice(0,0,i),p.splice(a?3:1,0,u),p};var p=(0,a.createAttributeWithCacheKey)({perm:[2,3,1,0]}),f=function(t,e){for(var n=t.kernelShape.slice(),r=2;r<e[1].dims.length;++r)0===n[r-2]&&(n[r-2]=e[1].dims[r]);var a=t.pads.slice();o.PoolConvUtil.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,n,a,"NHWC"===t.format,t.autoPad);var i=Object.assign({},t);return Object.assign(i,{kernelShape:n,pads:a,cacheKey:t.cacheKey}),i};e.parseConvAttributes=function(t){var e=(0,s.parseInternalActivationAttributes)(t),n=t.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][t.auto_pad],i=t.dilations,c=t.group,u=t.kernel_shape,l=t.pads,p=t.strides,f=t.w_is_const();return(0,a.createAttributeWithCacheKey)(r({autoPad:o,format:n,dilations:i,group:c,kernelShape:u,pads:l,strides:p,wIsConst:f},e))},e.conv=function(t,n){!function(t,e){if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length&&3!==t[0].dims.length)throw new Error("currently only support conv 1D and 2D");if(t[0].dims.length!==t[1].dims.length)throw new Error("filter does not have same dimension as input");if(t[0].dims["NHWC"===e.format?t[0].dims.length-1:1]!==t[1].dims[1]*e.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===t.length&&(1!==t[2].dims.length||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");var n=t[0].dims.length-2;if(e.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(e.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(e.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(1!==t[0].dataType||1!==t[1].dataType)throw new Error("Conv input(X,W) should be float tensor");if(3===t.length&&1!==t[2].dataType)throw new Error("Conv input(bias) should be float tensor")}(t.inputs,n),3===t.inputs[0].dims.length?function(t,e){var n="NHWC"===e.format,o=[t.inputs[0].reshape(n?[t.inputs[0].dims[0],1,t.inputs[0].dims[1],t.inputs[0].dims[2]]:[t.inputs[0].dims[0],t.inputs[0].dims[1],1,t.inputs[0].dims[2]]),t.inputs[1].reshape([t.inputs[1].dims[0],t.inputs[1].dims[1],1,t.inputs[1].dims[2]])];3===t.inputs.length&&o.push(t.inputs[2]);var a=[0,e.pads[0],0,e.pads[1]],c=[1].concat(e.strides),s=[1].concat(e.dilations),u=[1].concat(e.kernelShape),l=f(r(r({},e),{pads:a,strides:c,dilations:s,kernelShape:u}),o);t.compute((0,i.createGroupedConvProgramInfoLoader)(o,l,(function(t){return n?[t[0],t[2],t[3]]:[]})))}(t,n):function(t,n,o){var a,s,d=f(o,n),h=3===n.length,g="NHWC"===o.format;if(g&&1===o.group){var y=n[0].dims[g?1:2],m=n[0].dims[g?2:3],v=n[0].dims[g?3:1],b=n[1].dims[2],w=n[1].dims[3],_=(0,e.calculateOutputShape)(n[0].dims,n[1].dims,o.dilations,d.pads,o.strides,g),x=_[g?1:2],T=_[g?2:3],S=_[g?3:1],O=_[0];if(g&&b===y&&w===m&&"VALID"===o.autoPad||1===b&&1===w&&1===o.dilations[0]&&1===o.dilations[1]&&1===o.strides[0]&&1===o.strides[1]&&0===o.pads[0]&&0===o.pads[1]){var I=null!==(a=t.kernelCustomData.wT)&&void 0!==a?a:t.compute(r(r({},l.transposeProgramMetadata),{cacheHint:p.cacheKey,get:function(){return(0,l.createTransposeProgramInfo)(n[1],p.perm)}}),{inputs:[1],outputs:[o.wIsConst?-2:-1]})[0];o.wIsConst&&!t.kernelCustomData.wT&&(t.kernelCustomData.wT=I);var A=[];A.push(n[0].reshape([O,y*m,v])),A.push(I.reshape([1,v,S])),h&&A.push(n[2]);var P=[O,x*T,S];t.compute((0,u.createMatmulProgramInfoLoader)(A,d,_,P),{inputs:A})}else{var E=g?x*T:S,k=g?S:x*T,D=b*w*v,C=null!==(s=t.kernelCustomData.wT)&&void 0!==s?s:t.compute(r(r({},l.transposeProgramMetadata),{cacheHint:p.cacheKey,get:function(){return(0,l.createTransposeProgramInfo)(n[1],p.perm)}}),{inputs:[1],outputs:[o.wIsConst?-2:-1]})[0];o.wIsConst&&!t.kernelCustomData.wT&&(t.kernelCustomData.wT=C);var R=[n[0],C];h&&(g||1!==n[2].dims.length?R.push(n[2]):R.push(n[2].reshape([n[2].dims[0],1,1]))),t.compute((0,c.createConv2DMatMulProgramInfoLoader)(R,d,_,E,k,D,h,!0),{inputs:R})}}else t.compute((0,i.createGroupedConvProgramInfoLoader)(n,d))}(t,t.inputs,n)}},3822:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createConv2DMatMulProgramInfoLoader=void 0;var o=n(1163),a=n(9456);e.createConv2DMatMulProgramInfoLoader=function(t,e,n,i,c,s,u,l){var p=function(t,e){return{name:"Conv2DMatMul",inputTypes:t?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:e}}(u,e.cacheKey);return r(r({},p),{get:function(){return(0,a.createConv2DMatMulProgramInfo)(t,p,e,n,i,c,s,u,l)}})}},2771:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseEinsumAttributes=e.einsum=void 0;var i=n(6952),c=n(387),s=n(1163),u=n(2075),l="[a-zA-Z]|\\.\\.\\.",p="("+l+")+",f="^"+p+"$",d="^("+p+",)*"+p+"$",h=function(){function t(t){void 0===t&&(t=-1),this.symbolToIndices=new Map,this.inputIndex=t}return t.prototype.addSymbol=function(t,e){var n=this.symbolToIndices.get(t);void 0===n?n=[e]:n.push(e),this.symbolToIndices.set(t,n)},t}(),g=function(){function t(t,e){var n=this;this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];var r=o(e.includes("->")?e.split("->",2):[e,""],2),i=r[0],c=r[1];if(!i.match(RegExp(d)))throw new Error("Invalid LHS term");if(i.split(",").forEach((function(e,r){var o=t[r].dims.slice();if(!e.match(RegExp(f)))throw new Error("Invalid LHS term");var a=n.processTerm(e,!0,o,r);n.lhs.push(a)})),""===c)c+=a([],o(this.symbolToInfo.entries()),!1).filter((function(t){var e=o(t,2),n=e[0];return 1===e[1].count||"..."===n})).map((function(t){return o(t,1)[0]})).join("");else if(!c.match(RegExp(p)))throw new Error("Invalid RHS");var s=c.match(RegExp(l,"g"));null==s||s.forEach((function(t){if("..."===t)n.outputDims=n.outputDims.concat(n.ellipsisDims);else{var e=n.symbolToInfo.get(t);if(void 0===e)throw new Error("Invalid RHS symbol");n.outputDims.push(e.dimValue)}})),this.rhs=this.processTerm(c,!0,this.outputDims)}return t.prototype.addSymbol=function(t,e,n){var r=this.symbolToInfo.get(t);if(void 0!==r){if(r.dimValue!==e&&1!==r.count)throw new Error("Dimension mismatch");r.count++,r.inputIndices.push(n)}else r={count:1,dimValue:e,inputIndices:[n]};this.symbolToInfo.set(t,r)},t.prototype.processTerm=function(t,e,n,r){var o=this;void 0===r&&(r=-1);var a=n.length,i=!1,c=[],s=0;if(!t.match(RegExp(f))&&!e&&""!==t)throw new Error("Invalid LHS term");var u=t.match(RegExp(l,"g")),p=new h(r);return null==u||u.forEach((function(t,l){if("..."===t){if(i)throw new Error("Only one ellipsis is allowed per input term");i=!0;var f=a-u.length+1;if(f<0)throw new Error("Ellipsis out of bounds");if(c=n.slice(s,s+f),o.hasEllipsis){if(o.ellipsisDims.length!==c.length||o.ellipsisDims.toString()!==c.toString())throw new Error("Ellipsis dimensions mismatch")}else{if(!e)throw new Error("Ellipsis must be specified in the LHS");o.hasEllipsis=!0,o.ellipsisDims=c}for(var d=0;d<c.length;d++){var h=String.fromCharCode("0".charCodeAt(0)+l);p.addSymbol(h,l+d),o.addSymbol(h,n[s++],r)}}else p.addSymbol(t,l),o.addSymbol(t,n[s++],r)})),p},t}();e.einsum=function(t,e){var n=new g(t.inputs,e.equation);t.compute(function(t,e,n){var c,l,p=(c=t.length,l=n.cacheKey,{name:"Einsum",inputTypes:Array(c).fill(s.GpuDataType.default),cacheHint:l});return r(r({},p),{get:function(){return function(t,e,n){for(var c=e[0].dataType,l=new Array(e.length),p=0;p<e.length;++p)l[p]=(0,u.inputVariable)("input".concat(p),c,e[p].dims);var f=n.outputDims,d=i.ShapeUtil.size(f),h=(0,u.outputVariable)("output",c,f),g=[],y=Array.from(n.rhs.symbolToIndices.keys()),m=[],v=[],b=[],w=[],_=n.symbolToInfo.size===y.length;n.symbolToInfo.forEach((function(t,e){var r;if(y.includes(e)){var o=y.indexOf(e);n.lhs.forEach((function(n,r){if(t.inputIndices.includes(r)){var a=n.symbolToIndices.get(e);if(void 0===a)throw new Error("Invalid symbol error");a.forEach((function(t){g.push("".concat(l[r].indicesSet("input".concat(r,"Indices"),t,h.indicesGet("outputIndices",o))))}))}}))}else n.lhs.forEach((function(t,r){var o=n.symbolToInfo.get(e);if(void 0===o)throw new Error("Invalid symbol error");if(o.inputIndices.includes(r)){var a=t.symbolToIndices.get(e);if(void 0===a)throw new Error("Invalid symbol error");a.forEach((function(t){m.push("".concat(l[r].indicesSet("input".concat(r,"Indices"),t,"".concat(e))))})),w.push("prod *= ".concat(l[r].getByIndices("input".concat(r,"Indices")),";"))}})),v.push("for(var ".concat(e,": u32 = 0; ").concat(e," < ").concat(null===(r=n.symbolToInfo.get(e))||void 0===r?void 0:r.dimValue,"; ").concat(e,"++) {")),b.push("}")}));var x=_?a(a([],o(g),!1),["let sum = ".concat(l.map((function(t,e){return t.getByIndices("input".concat(e,"Indices"))})).join(" * "),";")],!1):a(a(a(a(a(a(a(a([],o(g),!1),["var sum = 0.0;"],!1),o(v),!1),o(m),!1),["var prod = 1.0;"],!1),o(w),!1),["sum += prod;"],!1),o(b),!1);return r(r({},t),{outputs:[{dims:f,dataType:e[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(t){return"\n      ".concat(t.declareVariables.apply(t,a(a([],o(l),!1),[h],!1)),"\n\n      ").concat(t.mainStart(),"\n        ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(d),"\n        var outputIndices = ").concat(h.offsetToIndices("global_idx"),";\n        ").concat(l.map((function(t,e){return"var input".concat(e,"Indices: ").concat(l[e].type.indices,";")})).join("\n"),"\n        ").concat(x.join("\n"),";\n        ").concat(h.setByOffset("global_idx","sum"),";\n      }")},dispatchGroup:function(){return{x:Math.ceil(d/64)}}})}(p,t,e)}})}(t.inputs,n,e))},e.parseEinsumAttributes=function(t){var e=t.equation.replace(/\s+/g,"");return(0,c.createAttributeWithCacheKey)({equation:e})}},8856:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.expand=e.expandProgramMetadata=void 0;var i=n(6952),c=n(1163),s=n(2075);e.expandProgramMetadata={name:"Expand",inputTypes:[c.GpuDataType.default]};var u=function(t,e){for(var n=t.length-e.length,r=[],o=0;o<n;++o)r.push(t[o]);for(o=0;o<e.length;++o)r.push(1===e[o]?t[o+n]:e[o]);return r};e.expand=function(t){!function(t){if(!t||2!==t.length)throw new Error("Expand requires 2 input.");for(var e=t[0].dims,n=Array.from(t[1].getBigInt64Array(),Number),r=n.length<e.length?0:n.length-e.length,o=e.length<n.length?0:e.length-n.length;r<n.length&&o<e.length;++r,++o)if(n[r]!==e[o]&&1!==n[r]&&1!==e[o])throw new Error("Expand requires shape to be broadcastable to input")}(t.inputs);var n=Array.from(t.inputs[1].getBigInt64Array(),Number).toString();t.compute(r(r({},e.expandProgramMetadata),{cacheHint:n,get:function(){return n=e.expandProgramMetadata,l=t.inputs,p=l[0].dims,f=Array.from(l[1].getBigInt64Array(),Number),d=function(t,e){return t.length>e.length?u(t,e):u(e,t)}(p,f),h=i.ShapeUtil.size(d),g=l[0].dataType,y=(0,s.inputVariable)("input",g,p),m=(0,s.outputVariable)("output",g,d),r(r({},n),{getShaderSource:function(t){return"\n  const inputShape = ".concat(y.indices.apply(y,a([],o(p),!1)),";\n  ").concat(t.declareVariables(y,m),"\n  ").concat(t.mainStart(),"\n  ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(h),"\n    let outputIndices = ").concat(m.offsetToIndices("global_idx"),";\n    var inputIndices: ").concat(y.type.indices,";\n    for (var i = 0; i < ").concat(p.length,"; i++) {\n      if (").concat(y.indicesGet("inputShape","i")," == 1) {\n        ").concat(y.indicesSet("inputIndices","i",0),"\n      } else {\n        ").concat(y.indicesSet("inputIndices","i",m.indicesGet("outputIndices","i + ".concat(d.length-p.length))),"\n      }\n    }\n    ").concat(m.setByOffset("global_idx",y.getByIndices("inputIndices")),"\n  }")},outputs:[{dims:d,dataType:l[0].dataType,gpuDataType:c.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(h/64)}}});var n,l,p,f,d,h,g,y,m}}),{inputs:[0]})}},3997:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActicationSnippet=void 0;var o=n(6952);e.getActicationSnippet=function(t){switch(t.activation){case"Relu":return{activationFunction:"",applyActivation:"value = max(value, 0.0);"};case"Sigmoid":return{activationFunction:"",applyActivation:"value = (1.0 / (1.0 + exp(-value)));"};case"Clip":return{activationFunction:"const clip_min_=f32(".concat(t.clipMin,");const clip_max_=f32(").concat(t.clipMax,");"),applyActivation:"value = clamp(value, clip_min_, clip_max_);"};default:return{activationFunction:"",applyActivation:""}}},e.parseInternalActivationAttributes=function(t){var e=(null==t?void 0:t.activation)||"";if("Clip"===e){var n=r((null==t?void 0:t.activation_params)||[o.MIN_CLIP,o.MAX_CLIP],2),a=n[0],i=n[1];return{activation:e,clipMax:i,clipMin:a,activationCacheKey:"".concat(e,":").concat(a,",").concat(i)}}return{activation:e,activationCacheKey:e}}},9218:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.gatherElements=e.parseGatherElementsAttributes=void 0;var o=n(6952),a=n(387),i=n(1163),c=n(2075);e.parseGatherElementsAttributes=function(t){return(0,a.createAttributeWithCacheKey)({axis:t.axis})},e.gatherElements=function(t,e){!function(t){if(!t||2!==t.length)throw new Error("GatherElements requires 2 inputs.");if(t[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(t[0].dims.length!==t[1].dims.length)throw new Error("GatherElements requires that the data input and\n                     indices input tensors be of same rank.")}(t.inputs);var n={name:"GatherElements",inputTypes:[i.GpuDataType.default,i.GpuDataType.default],cacheHint:e.cacheKey};t.compute(function(t,e,n){var a=e[0].dims,s=e[0].dataType,u=a.length,l=o.ShapeUtil.computeStrides(a),p=o.ShapeUtil.size(a),f=e[1].dims,d=e[1].dataType,h=o.ShapeUtil.size(f),g=o.ShapeUtil.normalizeAxis(n.axis,u),y=a[g],m=f.slice(0),v=o.ShapeUtil.size(m),b=(0,c.inputVariable)("input",s,a),w=(0,c.inputVariable)("indices",d,[h]),_=(0,c.outputVariable)("output",s,m);return r(r({},t),{outputs:[{dims:m,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}],getShaderSource:function(t){return"\n      const inputStrides = array<u32, ".concat(l.length,">(").concat(l.map((function(t){return"".concat(t,"u")})).join(","),");\n      ").concat(t.declareVariables(b,w,_),"\n      ").concat(t.mainStart(),"\n      ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(v),"\n\n      let outputIndices = ").concat(_.offsetToIndices("global_idx"),";\n\n      var idx = ").concat(w.getByOffset("global_idx"),";\n      if (idx < 0) {\n        idx = idx + ").concat(y,";\n      }\n\n      var srcOffset = u32(0);\n\n      for (var i = 0; i < ").concat(a.length,"; i++) {\n        if (i == ").concat(g,") {\n          srcOffset +=  u32(idx) * inputStrides[i];\n        } else {\n          srcOffset += ").concat(_.indicesGet("outputIndices","i")," * inputStrides[i];\n        }\n      }\n\n      // Should never hit this with valid values in indices\n      // This is a guard against malicious data in the indices input\n      if (srcOffset < 0 || srcOffset >= ").concat(p,") {\n        return;\n      }\n\n      output[global_idx] = input[srcOffset];\n  }")},dispatchGroup:function(){return{x:Math.ceil(v/64)}}})}(n,t.inputs,e))}},8405:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.gather=e.parseGatherAttributes=void 0;var i=n(6952),c=n(387),s=n(1163),u=n(2075);e.parseGatherAttributes=function(t){return(0,c.createAttributeWithCacheKey)({axis:t.axis})},e.gather=function(t,e){!function(t){if(!t||2!==t.length)throw new Error("Gather requires 2 inputs.")}(t.inputs);var n={name:"Gather",inputTypes:[s.GpuDataType.default,s.GpuDataType.default],cacheHint:e.cacheKey};t.compute(function(t,e,n){var c=e[0].dims,l=e[1].dims,p=c.length,f=i.ShapeUtil.normalizeAxis(n.axis,p),d=c.slice(0);d.splice.apply(d,a([f,1],o(l),!1));var h=c[f],g=i.ShapeUtil.size(d),y=(0,u.inputVariable)("data",e[0].dataType,e[0].dims),m=(0,u.inputVariable)("inputIndices",e[1].dataType,e[1].dims),v=(0,u.outputVariable)("output",e[0].dataType,d);return r(r({},t),{outputs:[{dims:d,dataType:e[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(t){return"\n      ".concat(t.declareVariables(y,m,v),"\n      ").concat(t.mainStart(),"\n        ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(g),"\n        let outputIndices = ").concat(v.offsetToIndices("global_idx"),";\n        ").concat(function(){for(var t=l.length,e="var indicesIndices  = ".concat(m.type.indices,"(0);"),n=0;n<t;n++)e+="".concat(t>1?"indicesIndices[".concat(n,"]"):"indicesIndices"," = ").concat(d.length>1?"outputIndices[".concat(f+n,"]"):"outputIndices",";");e+="\n        var idx = ".concat(m.getByIndices("indicesIndices"),";\n        if (idx < 0) {\n          idx = idx + ").concat(h,";\n        }\n        var dataIndices = ").concat(y.type.indices,"(0);\n      "),n=0;for(var r=0;n<p;n++)n===f?(e+="".concat(p>1?"dataIndices[".concat(n,"]"):"dataIndices"," = u32(idx);"),r+=t):(e+="".concat(p>1?"dataIndices[".concat(n,"]"):"dataIndices"," = ").concat(d.length>1?"outputIndices[".concat(r,"]"):"outputIndices",";"),r++);return e}(),";\n        let value = ").concat(y.getByIndices("dataIndices"),";\n        ").concat(v.setByOffset("global_idx","value"),";\n      }")},dispatchGroup:function(){return{x:Math.ceil(g/64)}}})}(n,t.inputs,e))}},4271:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributes=e.gemm=void 0;var a=n(6952),i=n(387),c=n(1163),s=n(2075);e.gemm=function(t,e){!function(t){if(!t)throw new Error("Input is missing");if(t.length<2||t.length>3)throw new Error("Invaid input number.");if(3===t.length&&t[2].dims.length>2)throw new Error("Invalid input shape of C");if(t[0].dataType!==t[1].dataType||3===t.length&&t[0].dataType!==t[2].dataType)throw new Error("Input types are mismatched")}(t.inputs),t.compute(function(t,e){var n={name:"Gemm",inputTypes:3===t.length?[c.GpuDataType.default,c.GpuDataType.default,c.GpuDataType.default]:[c.GpuDataType.default,c.GpuDataType.default],cacheHint:e.cacheKey};return r(r({},n),{get:function(){return function(t,e,n){var i=e[0].dims.slice(),u=e[1].dims.slice(),l=o(a.GemmUtil.getShapeOfGemmResult(i,n.transA,u,n.transB,3===e.length?e[2].dims:void 0),3),p=l[0],f=l[1],d=l[2],h=[p,f];if(!h)throw new Error("Can't use gemm on the given tensors");var g=a.ShapeUtil.size(h),y="";n.transA&&n.transB?y="value += a[k * M + m] * b[n * K + k];":n.transA&&!n.transB?y="value += a[k * M + m] * b[k * N + n];":!n.transA&&n.transB?y="value += a[m * K + k] * b[n * K + k];":n.transA||n.transB||(y="value += a[m * K + k] * b[k * N + n];");var m=(0,s.tensorTypeToWsglStorageType)(e[0].dataType),v=1===n.alpha?"":"value *= alpha;",b=3===e.length?"value += beta * c[".concat(function(t,e,n){if(0===n.length)return"0u";var r=1===n.length&&1!==t||2===n.length&&n[0]!==t,o=n[n.length-1]!==e,a="0u";return r||(a+="+ m * ".concat(n[n.length-1],"u")),o||(a+="+n"),a}(p,f,e[2].dims),"];"):"",w=["@group(0) @binding(0) var<storage, read> a : array<".concat(m,">;"),"@group(0) @binding(1) var<storage, read> b : array<".concat(m,">;")];return 3===e.length&&w.push("@group(0) @binding(2) var<storage, read> c : array<".concat(m,">;")),r(r({},t),{outputs:[{dims:h,dataType:e[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(t){return"\n  const M: u32 = ".concat(p,"u;\n  const N: u32 = ").concat(f,"u;\n  const K: u32 = ").concat(d,"u;\n  const alpha = ").concat(m,"(").concat(n.alpha,");\n  const beta = ").concat(m,"(").concat(n.beta,");\n\n  ").concat(w.join("\n"),"\n  @group(0) @binding(").concat(e.length,") var<storage, read_write> output : array<").concat(m,">;\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(g),"\n\n    let m = global_id.x / N;\n    let n = global_id.x % N;\n\n    var value = ").concat(m,"(0);\n    for (var k: u32 = 0u; k<").concat(d,"u; k++) {\n      ").concat(y,"\n    }\n\n    ").concat(v,"\n    ").concat(b,"\n    output[global_id.x] = value;\n\n  }")},dispatchGroup:function(){return{x:Math.ceil(g/64)}}})}(n,t,e)}})}(t.inputs,e))},e.parseGemmAttributes=function(t){return(0,i.createAttributeWithCacheKey)(t)}},1798:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.instanceNorm=e.parseInstanceNormAttributes=void 0;var i=n(6952),c=n(387),s=n(1163),u=n(2075);e.parseInstanceNormAttributes=function(t){return(0,c.createAttributeWithCacheKey)({epsilon:t.epsilon,format:t.format})},e.instanceNorm=function(t,e){var n={name:"InstanceNormalization",inputTypes:[s.GpuDataType.default,s.GpuDataType.default,s.GpuDataType.default],cacheHint:e.cacheKey};"NHWC"===e.format?t.compute(function(t,e,n){var o=e[0].dims,a=o,c=i.ShapeUtil.size(a),l=o[0],p=o[o.length-1],f=i.ShapeUtil.sizeFromDimension(o,1)/p,d=(0,u.tensorTypeToWsglStorageType)(e[0].dataType),h=p*l;return r(r({},t),{outputs:[{dims:a,dataType:e[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(t){return"\n  const N: u32 = ".concat(l,";\n  const H: u32 = ").concat(f,";\n  const C: u32 = ").concat(p,";\n  const normSizeTyped: ").concat(d," = ").concat(f,";\n  const imageSize: u32 = ").concat(f*p,";\n  const epsilon: f32 = ").concat(n.epsilon,";\n\n  @group(0) @binding(0) var<storage, read> x : array<").concat(d,">;\n  @group(0) @binding(1) var<storage, read> scale : array<").concat(d,">;\n  @group(0) @binding(2) var<storage, read> bias : array<").concat(d,">;\n  @group(0) @binding(3) var<storage, read_write> output : array<").concat(d,">;\n\n  ").concat(t.mainStart(),"\n    let currentImageNumber = global_idx / C;\n    let currentChannelNumber = global_idx % C;\n\n    // offset is channel num * N\n    let offset = currentImageNumber * imageSize;\n    if (offset >= ").concat(c,") { return; }\n    var mean: ").concat(d," = 0;\n\n    for (var i: u32 = 0u; i < H; i++) {\n        mean = mean + x[offset + i * C + currentChannelNumber];\n    }\n    mean = mean / normSizeTyped;\n\n    var squaredNorm: ").concat(d," = 0;\n    for (var i: u32 = 0u; i < H; i++) {\n        let deviation: f32 = x[offset + i * C + currentChannelNumber] - mean;\n        squaredNorm = squaredNorm + deviation * deviation;\n    }\n    let invStdDev = 1 / sqrt(squaredNorm / normSizeTyped + epsilon);\n    let channelScale = invStdDev * scale[currentChannelNumber];\n    let channelShift = bias[currentChannelNumber] - mean * channelScale;\n    for (var i: u32 = 0u; i < H; i++) {\n        let currentOffset = offset + i * C + currentChannelNumber;\n        output[currentOffset] = x[currentOffset] * channelScale + channelShift;\n    }\n  }")},dispatchGroup:function(){return{x:Math.ceil(h/64)}}})}(n,t.inputs,e)):t.compute(function(t,e,n){var c=e[0].dims,l=c,p=i.ShapeUtil.sizeToDimension(c,2),f=i.ShapeUtil.sizeFromDimension(c,2),d=c[1],h=(0,u.inputVariable)("x",e[0].dataType,[c[0],c[1],f]),g=(0,u.inputVariable)("scale",e[1].dataType,e[1].dims),y=(0,u.inputVariable)("bias",e[2].dataType,e[2].dims),m=(0,u.outputVariable)("output",e[0].dataType,[c[0],c[1],f]),v=[h,g,y,m],b=h.type.value;return r(r({},t),{outputs:[{dims:l,dataType:e[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(t){return"\n\n  const C: u32 = ".concat(d,";\n  const normSize: u32 = ").concat(f,";\n  const epsilon: f32 = ").concat(n.epsilon,";\n  var<workgroup> meanShared : ").concat(b,";\n  var<workgroup> squaredNormShared : ").concat(b,";\n  var<workgroup> workgroupShared : array<").concat(b,", ").concat(64,">;\n  const workgroupSize = ").concat(64,"u;\n  ").concat(t.declareVariables.apply(t,a([],o(v),!1)),"\n  ").concat(t.mainStart(64),"\n    let norm = global_idx / workgroupSize;\n    let batch = norm / C;\n    let channel = norm % C;\n    let localIndex = local_id.x;\n\n    // initialize workgroup memory\n    var initial: ").concat(b," = 0;\n    for (var h = localIndex; h < normSize; h += workgroupSize) {\n      initial = initial + ").concat(h.get("batch","channel","h"),";\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the mean of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      meanShared = workgroupShared[0] / ").concat(b,"(normSize);\n    }\n    workgroupBarrier();\n\n    // reinitialize workgroup memory.\n    initial = 0;\n    for (var h = localIndex; h < normSize; h += workgroupSize) {\n      let deviation =  ").concat(h.get("batch","channel","h")," - meanShared;\n      initial = initial + deviation * deviation;\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the sum of square of deviation of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      squaredNormShared = workgroupShared[0];\n    }\n    workgroupBarrier();\n\n    let invStdDev = 1 / sqrt(squaredNormShared / ").concat(b,"(normSize) + epsilon);\n    let channelScale = invStdDev * ").concat(g.getByOffset("channel"),";\n    let channelShift = ").concat(y.getByOffset("channel")," - meanShared * channelScale;\n    for (var h = localIndex; h < normSize; h += workgroupSize) {\n      let value = ").concat(h.get("batch","channel","h")," * channelScale + channelShift;\n      ").concat(m.set("batch","channel","h","value"),";\n    }\n  }")},dispatchGroup:function(){return{x:p}}})}(n,t.inputs,e))}},2915:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.layerNorm=e.parseLayerNormAttributes=void 0;var o=n(6952),a=n(387),i=n(1163),c=n(2075);e.parseLayerNormAttributes=function(t){return(0,a.createAttributeWithCacheKey)({axis:t.axis,epsilon:t.epsilon})},e.layerNorm=function(t,e){!function(t){if(!t||t.length<2)throw new Error("layerNorm requires at least 2 inputs.");if(1!==t[0].dataType||1!==t[1].dataType)throw new Error("inputs should be float type")}(t.inputs);var n={name:"LayerNormalization",inputTypes:2===t.inputs.length?[i.GpuDataType.default,i.GpuDataType.default]:[i.GpuDataType.default,i.GpuDataType.default,i.GpuDataType.default],cacheHint:e.cacheKey+t.outputCount.toString(10)+t.inputs.length.toString(10)};t.compute(function(t,e,n,a){var s=e[0].dims,u=e[1],l=e[2],p=s,f=o.ShapeUtil.size(p),d=o.ShapeUtil.normalizeAxis(n.axis,s.length),h=o.ShapeUtil.sizeToDimension(s,d),g=o.ShapeUtil.sizeFromDimension(s,d),y=o.ShapeUtil.size(u.dims),m=l?o.ShapeUtil.size(l.dims):0;if(y!==g||l&&m!==g)throw new Error("Size of X.shape()[axis:] == ".concat(g,".\n       Size of scale and bias (if provided) must match this.\n       Got scale size of ").concat(y," and bias size of ").concat(m));for(var v=[],b=0;b<s.length;++b)b<d?v.push(s[b]):v.push(1);var w=(0,c.tensorTypeToWsglStorageType)(e[0].dataType),_=a>1,x=a>2,T=0,S=[{dims:p,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}];return _&&S.push({dims:v,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}),x&&S.push({dims:v,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}),r(r({},t),{outputs:S,getShaderSource:function(t){return"\n  const normSize: u32 = ".concat(g,";\n  const normSizeTyped: ").concat(w," = ").concat(g,";\n  const epsilon: f32 = ").concat(n.epsilon,";\n\n  @group(0) @binding(").concat(T++,") var<storage, read> x : array<").concat(w,">;\n  @group(0) @binding(").concat(T++,") var<storage, read> scale : array<").concat(w,">;\n  ").concat(l?"@group(0) @binding(".concat(T++,") var<storage, read> bias : array<").concat(w,">;"):"","\n  @group(0) @binding(").concat(T++,") var<storage, read_write> output : array<").concat(w,">;\n  ").concat(_?"@group(0) @binding(".concat(T++,") var<storage, read_write> meanDataOutput : array<").concat(w,">"):"",";\n  ").concat(x?"@group(0) @binding(".concat(T++,") var<storage, read_write> invStdOutput : array<").concat(w,">"):"",";\n\n  ").concat(t.mainStart(),"\n    let offset = global_idx * normSize;\n    if (offset >= ").concat(f,") { return; }\n    var mean: ").concat(w," = 0;\n    var meanSquare: ").concat(w," = 0;\n\n    for (var h: u32 = 0u; h < normSize; h++) {\n      mean = mean + x[h + offset];\n      meanSquare = meanSquare + x[h + offset] * x[h + offset];\n    }\n    mean = mean / normSizeTyped;\n    meanSquare = sqrt(meanSquare / normSizeTyped - mean * mean + epsilon);\n\n    for (var j: u32 = 0; j < normSize; j++) {\n      output[j + offset] = (x[j + offset] - mean) / meanSquare * scale[j] ").concat(l?"+ bias[j]":"",";\n    }\n\n    ").concat(_?"meanDataOutput[global_idx] = mean":"",";\n    ").concat(x?"invStdOutput[global_idx] = 1 / meanSquare":"",";\n  }")},dispatchGroup:function(){return{x:Math.ceil(h/64)}}})}(n,t.inputs,e,t.outputCount))}},1522:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.matMul=e.createMatmulProgramInfoLoader=void 0;var o=n(6952),a=n(1163),i=n(158);e.createMatmulProgramInfoLoader=function(t,e,n,o){var c,s,u=(c=t.length>2,s=e.activationCacheKey,{name:"MatMul",inputTypes:c?[a.GpuDataType.default,a.GpuDataType.default,a.GpuDataType.default]:[a.GpuDataType.default,a.GpuDataType.default],cacheHint:s});return r(r({},u),{get:function(){return(0,i.createMatmulProgramInfo)(u,t,e,n,o)}})},e.matMul=function(t){!function(t){if(!t||2!==t.length)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if(1!==t[0].dataType||1!==t[1].dataType)throw new Error("inputs should be float type")}(t.inputs);var n=o.BroadcastUtil.calcShape(t.inputs[0].dims,t.inputs[1].dims,!0);if(!n)throw new Error("Can't use matmul on the given tensors");t.compute((0,e.createMatmulProgramInfoLoader)(t.inputs,{activation:"",activationCacheKey:""},n))}},3053:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributes=e.pad=void 0;var o=n(6952),a=n(387),i=n(1163),c=n(2075),s=function(t,e){var n=function(t,e){if(t.length>1){var n=t[1].getBigInt64Array(),r=t.length>=3?t[2].getFloat32Array()[0]:0,o=t[0].dims.length,i=new Int32Array(2*o).fill(0);if(t.length>=4)for(var c=t[3].getBigInt64Array(),s=0;s<c.length;s++)i[Number(c[s])]=Number(n[s]),i[Number(c[s])+o]=Number(n[s+c.length]);else n.forEach((function(t,e){return i[Number(t)]=Number(e)}));var u=[];return i.forEach((function(t){return u.push(t)})),(0,a.createAttributeWithCacheKey)({mode:e.mode,value:r,pads:u})}return e}(t,e),s={name:"Pad",inputTypes:[i.GpuDataType.default],cacheHint:n.cacheKey};return r(r({},s),{get:function(){return function(t,e,n){var a=o.ShapeUtil.padShape(t[0].dims.slice(),n.pads);return r(r({},e),{outputs:[{dims:a,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}],getShaderSource:function(e){return function(t,e,n,r){var a=e[0].dims,i=o.ShapeUtil.padShape(a.slice(),n.pads),s=o.ShapeUtil.size(i),u=o.ShapeUtil.computeStrides(a),l=(0,c.outputVariable)("output",e[0].dataType,i),p=(0,c.inputVariable)("x",e[0].dataType,a),f=function(t,e,n,r,o,a){switch(o.mode){case 0:return function(t,e,n,r,o,a,i){for(var c="",s=n.length-1;s>=0;--s)c+="\n            k = i32(".concat(t.indicesGet("indices",s),") - ").concat(o[s],";\n            if (k < 0) {\n              break;\n            }\n            if (k >= ").concat(n[s],") {\n              break;\n            }\n            offset += k * ").concat(r[s],";\n        ");return"\n          value = ".concat(a,"(").concat(i,");\n          for (var i = 0; i < 1; i++) {\n            var offset = 0;\n            var k = 0;\n            ").concat(c,"\n            value = x[offset];\n          }\n      ")}(t,0,n,r,o.pads,a,o.value);case 1:return function(t,e,n,r,o){for(var a="",i=n.length-1;i>=0;--i)a+="\n                k = i32(".concat(t.indicesGet("indices",i),") - ").concat(o[i],";\n                if (k < 0) {\n                  k = -k;\n                }\n                {\n                  let _2n_1 = ").concat(2*(n[i]-1),";\n                  k = k % _2n_1;\n                  if(k >= ").concat(n[i],") {\n                    k = _2n_1 - k;\n                  }\n                }\n                offset += k * ").concat(r[i],";\n            ");return"\n              var offset = 0;\n              var k = 0;\n              ".concat(a,"\n              value = x[offset];\n          ")}(t,0,n,r,o.pads);case 2:return function(t,e,n,r,o){for(var a="",i=n.length-1;i>=0;--i)a+="\n                k = i32(".concat(t.indicesGet("indices",i),") - ").concat(o[i],";\n                if (k < 0) {\n                  k = 0;\n                }\n                if (k >= ").concat(n[i],") {\n                  k = ").concat(n[i]-1,";\n                }\n                offset += k * ").concat(r[i],";\n            ");return"\n              var offset = 0;\n              var k = 0;\n              ".concat(a,"\n              value = x[offset];\n          ")}(t,0,n,r,o.pads);case 3:return function(t,e,n,r,o){for(var a="",i=n.length-1;i>=0;--i)a+="\n                k = i32(".concat(t.indicesGet("indices",i),") - ").concat(o[i],";\n                if (k < 0)  {\n                  k += ").concat(n[i],";\n                }\n                if (k >= ").concat(n[i],") {\n                  k -= ").concat(n[i],";\n                }\n                offset += k * ").concat(r[i],";\n            ");return"\n              var offset = 0;\n              var k = 0;\n              ".concat(a,"\n              value = x[offset];\n          ")}(t,0,n,r,o.pads);default:throw new Error("Invalid mode")}}(l,0,a,u,n,r);return"\n              ".concat(t.declareVariables(p,l),"\n              ").concat(l.impl(),"\n              ").concat(t.mainStart(),"\n              ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(s),"\n\n              let indices = ").concat(l.offsetToIndices("global_idx"),";\n\n              var value = ").concat(r,"(0);\n              ").concat(f,"\n              output[global_idx] = value;\n          }")}(e,t,n,"f32")},dispatchGroup:function(){return{x:Math.ceil(o.ShapeUtil.size(a)/64)}}})}(t,s,n)}})};e.pad=function(t,e){!function(t){if(!t||t.length<1)throw new Error("Too few inputs");if(1!==t[0].dataType)throw new Error("Input type must be float.");if(t.length>=2){var e=2*t[0].dims.length===t[1].dims[0];if(4===t.length&&(e=2*t[3].dims[0]===t[1].dims[0]),!e)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}}(t.inputs),t.compute(s(t.inputs,e),{inputs:[0]})},e.parsePadAttributes=function(t){var e=t.mode,n=t.value,r=t.pads;return(0,a.createAttributeWithCacheKey)({mode:e,value:n,pads:r})}},5262:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseGlobalMaxPoolAttributes=e.parseMaxPoolAttributes=e.maxPool=e.globalAveragePool=e.parseGlobalAveragePoolAttributes=e.averagePool=e.parseAveragePoolAttributes=void 0;var a=n(6952),i=n(387),c=n(1163),s=n(2075),u=function(t){if(!t||1!==t.length)throw new Error("Pool ops requires 1 input.");if(4!==t[0].dims.length)throw new Error("Pool ops supports 2-D inputs only for now.")},l=function(t,e,n){var r="NHWC"===e.format,o=r?[t.dims[0],t.dims[3],t.dims[1],t.dims[2]]:t.dims.slice(),i=Object.hasOwnProperty.call(e,"dilations"),c=e.kernelShape.slice(),s=e.strides.slice(),u=i?e.dilations.slice():[],l=e.pads.slice();a.PoolConvUtil.adjustPoolAttributes(n,o,c,s,u,l);var p=a.PoolConvUtil.computePoolOutputShape(n,o,s,u,c,l,e.autoPad),f=Object.assign({},e);return i?Object.assign(f,{kernelShape:c,strides:s,pads:l,dilations:u,cacheKey:e.cacheKey}):Object.assign(f,{kernelShape:c,strides:s,pads:l,cacheKey:e.cacheKey}),[f,r?[p[0],p[2],p[3],p[1]]:p]},p=function(t,e,n,r,o,i,c){var u="NHWC"===r.format,l=e.shape,p=e.type.value,f=l.length,d=a.ShapeUtil.size(n),h=(0,s.outputVariable)("output",e.type.tensor,n);if(r.kernelShape.length<=2){var g,y=r.kernelShape[r.kernelShape.length-1],m=r.strides[r.strides.length-1],v=r.pads[r.pads.length/2-1],b=f-(u?2:1),w="",_="";if(g=v+r.pads[r.pads.length-1]!==0?"\n              for (var i: u32 = 0u; i < ".concat(y,"u; i++) {\n                xIndices[").concat(b,"] = indices[").concat(b,"] * ").concat(m," - ").concat(v," + i;\n                if (xIndices[").concat(b,"] < 0 || xIndices[").concat(b,"] >= ").concat(l[b],") {\n                  pad++;\n                  continue;\n                }\n                let x_val = x[").concat(e.indicesToOffset("xIndices"),"];\n                ").concat(o,"\n              }"):"\n              for (var i: u32 = 0u; i < ".concat(y,"u; i++) {\n                xIndices[").concat(b,"] = indices[").concat(b,"] * ").concat(m," - ").concat(v," + i;\n                let x_val = x[").concat(e.indicesToOffset("xIndices"),"];\n                ").concat(o,"\n              }"),2===r.kernelShape.length){var x=r.kernelShape[r.kernelShape.length-2],T=r.strides[r.strides.length-2],S=r.pads[r.pads.length/2-2],O=r.pads[r.pads.length-2],I=f-(u?3:2),A=l[I];w=S+O!==0?"\n                for (var j: u32 = 0u; j < ".concat(x,"u; j++) {\n                  xIndices[").concat(I,"] = indices[").concat(I,"] * ").concat(T," - ").concat(S," + j;\n                  if (xIndices[").concat(I,"] < 0 || xIndices[").concat(I,"] >= ").concat(A,") {\n                    pad+= ").concat(y,";\n                    continue;\n                  }\n              "):"\n                for (var j: u32 = 0u; j < ".concat(x,"u; j++) {\n                  xIndices[").concat(I,"] = indices[").concat(I,"] * ").concat(T," - ").concat(S," + j;\n                "),_="\n              }\n            "}return"\n            ".concat(t.declareVariables(e,h),"\n\n            ").concat(t.mainStart(),"\n              ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(d),"\n\n              let indices = ").concat(h.offsetToIndices("global_idx"),";\n              var xIndices = ").concat(h.offsetToIndices("global_idx"),";\n\n              var value: ").concat(p," = ").concat(p,"(").concat(c,");\n              var pad = 0;\n              ").concat(w,"\n              ").concat(g,"\n              ").concat(_,"\n              ").concat(i,"\n\n              output[global_idx] = value;\n            }")}if(u)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");var P,E=a.ShapeUtil.size(r.kernelShape),k=a.ShapeUtil.computeStrides(r.kernelShape),D=k.length,C=r.pads.length;return P=r.pads.reduce((function(t,e){return t+e}))?"\n                if (xIndices[j] >= inputDims[j]) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                let x_val = x[".concat(e.indicesToOffset("xIndices"),"];\n                ").concat(o,"\n              }"):"\n              }\n              let x_val = x[".concat(e.indicesToOffset("xIndices"),"];\n              ").concat(o,"\n            "),"\n            ".concat(t.declareVariables(e,h),"\n\n            const pads = array<u32, ").concat(C,">(").concat(r.pads.map((function(t){return"".concat(t,"u")})).join(","),");\n            const inputDims = array<u32, ").concat(f,">(").concat(l.map((function(t){return"".concat(t,"u")})).join(","),");\n            const kernelStrides = array<u32, ").concat(D,">(").concat(k.map((function(t){return"".concat(t,"u")})).join(","),");\n            const strides = array<u32, ").concat(D,">(").concat(r.strides.map((function(t){return"".concat(t,"u")})).join(","),");\n\n            ").concat(t.mainStart(),"\n              ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(d),"\n\n              let indices = ").concat(h.offsetToIndices("global_idx"),";\n              let xIndices = ").concat(h.offsetToIndices("global_idx"),";\n\n              var offsets: array<u32, ").concat(D,">;\n\n              var value = ").concat(h.type.value,"(").concat(c,");\n              var pad = 0;\n              var isPad = false;\n\n              for (var i: u32 = 0u; i < ").concat(E,"u; i++) {\n                var offset = i;\n                for (var j = 0u; j < ").concat(D-1,"u; j++) {\n                  offsets[j] = offset / kernelStrides[j];\n                  offset -= offsets[j] * kernelStrides[j];\n                }\n                offsets[").concat(D-1,"] = offset;\n\n                isPad = false;\n                for (var j = ").concat(f-D,"u; j < ").concat(f,"u; j++) {\n                  xIndices[j] = indices[j] * strides[j - ").concat(f-D,"u]\n                    + offsets[j - ").concat(f-D,"u] - pads[j - 2u];\n                  ").concat(P,"\n              }\n              ").concat(i,"\n\n              output[global_idx] = value;\n            }")},f=function(t){return{format:t.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][t.auto_pad],ceilMode:t.ceil_mode,kernelShape:t.kernel_shape,strides:t.strides,pads:t.pads}},d=function(t,e,n,i){var u=o(l(t,i,n),2),f=u[0],d=u[1],h=a.ShapeUtil.size(f.kernelShape),g=(0,s.inputVariable)("x",t.dataType,t.dims),y=g.type.value,m="";return f.countIncludePad?m+="value /= ".concat(y,"(").concat(h,");"):m+="value /= ".concat(y,"(").concat(h," - pad);"),r(r({},e),{outputs:[{dims:d,dataType:t.dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(t){return p(t,g,d,f,"value += x_val;",m,"0.0")},dispatchGroup:function(){return{x:Math.ceil(a.ShapeUtil.size(d)/64)}}})};e.parseAveragePoolAttributes=function(t){var e=0!==t.count_include_pad,n=f(t);if(0!==n.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,i.createAttributeWithCacheKey)(r({countIncludePad:e},n))},e.averagePool=function(t,e){u(t.inputs);var n={name:"AveragePool",inputTypes:[c.GpuDataType.default],cacheHint:e.cacheKey};t.compute(r(r({},n),{get:function(){return d(t.inputs[0],n,!1,e)}}))};var h={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""};e.parseGlobalAveragePoolAttributes=function(t){var e=t.format;return r(r({format:e},h),{cacheKey:e})},e.globalAveragePool=function(t,e){u(t.inputs);var n={name:"GlobalAveragePool",inputTypes:[c.GpuDataType.default],cacheHint:e.cacheKey};t.compute(r(r({},n),{get:function(){return d(t.inputs[0],n,!0,e)}}))};var g=function(t,e,n,i){var u=o(l(t,i,n),2),f=u[0],d=u[1],h=(0,s.inputVariable)("x",t.dataType,t.dims);return r(r({},e),{outputs:[{dims:d,dataType:t.dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(t){return p(t,h,d,f,"\n      value = max(x_val, value);\n    ","","-1e5")},dispatchGroup:function(){return{x:Math.ceil(a.ShapeUtil.size(d)/64)}}})};e.maxPool=function(t,e){u(t.inputs);var n={name:"MaxPool",inputTypes:[c.GpuDataType.default],cacheHint:e.cacheKey};t.compute(r(r({},n),{get:function(){return g(t.inputs[0],n,!1,e)}}))},e.parseMaxPoolAttributes=function(t){var e=t.storage_order,n=t.dilations,o=f(t);if(0!==e)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==o.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,i.createAttributeWithCacheKey)(r({storageOrder:e,dilations:n},o))},e.parseGlobalMaxPoolAttributes=function(t){var e=t.format;return r(r({format:e},h),{cacheKey:e})},e.globalMaxPool=function(t,e){u(t.inputs);var n={name:"GlobalMaxPool",inputTypes:[c.GpuDataType.default],cacheHint:e.cacheKey};t.compute(r(r({},n),{get:function(){return g(t.inputs[0],n,!0,e)}}))}},6031:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseReduceAttributes=e.reduceSumSquare=e.reduceSum=e.reduceProd=e.reduceMin=e.reduceMean=e.reduceMax=e.reduceLogSumExp=e.reduceL2=e.reduceL1=e.reduceLogSum=e.createReduceProgramInfo=void 0;var o=n(6952),a=n(387),i=n(1163),c=n(2075),s=function(t){if(!t||0===t.length||t.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(2===t.length&&1!==t[1].dims.length)throw new Error("Invalid axes input dims.")},u=function(t){return["","","var value = ".concat(t.getByOffset("inputOffset"),";"),""]};e.createReduceProgramInfo=function(t,e,n,a,s,u,l){void 0===u&&(u=!1),void 0===l&&(l=!1);var p=[],f=e[0].dims,d=o.ShapeUtil.normalizeAxes(a,e[0].dims.length),h=!l&&0===d.length;f.forEach((function(t,e){h||d.indexOf(e)>=0?u&&p.push(1):p.push(t)}));for(var g=[],y=(0,c.inputVariable)("_A",e[0].dataType,f),m=(0,c.outputVariable)("output",s,p),v=n(y,m,d),b="inputOffset = ".concat(y.indicesToOffset("inputIndices"),";"),w="let ".concat(b,";"),_="var ".concat(b,";"),x=""===v[1]?"":_,T=(""===v[1]?w:b)+"\n"+v[2],S=0,O=0;S<e[0].dims.length;S++)h||d.indexOf(S)>=0?(u&&O++,T="for(var j".concat(S,": u32 = 0; j").concat(S," < ").concat(e[0].dims[S],"; j").concat(S,"++) {\n                ").concat(v[2].includes("lastIndex")?"let lastIndex = j".concat(S,";"):"","\n                ").concat(y.indicesSet("inputIndices",S,"j".concat(S)),"\n                ").concat(T,"\n              }")):(g.push("".concat(y.indicesSet("inputIndices",S,m.indicesGet("outputIndices",O)),";")),O++);var I=o.ShapeUtil.size(p);return r(r({},t),{getShaderSource:function(t){return"\n        ".concat(t.declareVariables(y,m),"\n\n        ").concat(t.mainStart(),"\n          ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(I),"\n          var inputIndices: ").concat(y.type.indices,";\n          let outputIndices = ").concat(m.offsetToIndices("global_idx"),";\n\n          ").concat(g.join("\n"),"\n          ").concat(v[0],"       // init ops for reduce max/min\n          ").concat(x,"\n          ").concat(v[1],"\n          ").concat(T,"\n          ").concat(v[3],"\n          ").concat(4===v.length?m.setByOffset("global_idx","value"):v.slice(4).join("\n"),"\n        }")},outputs:[{dims:p,dataType:s,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(I/64)}}})};var l=function(t,n,o,c){var s=1===t.length?o:function(t,e){var n=[];return t[1].dims[0]>0&&t[1].getBigInt64Array().forEach((function(t){return n.push(Number(t))})),(0,a.createAttributeWithCacheKey)({axes:n,keepDims:e.keepDims,noopWithEmptyAxes:e.noopWithEmptyAxes})}(t,o),l={name:n,inputTypes:[i.GpuDataType.default],cacheHint:s.cacheKey+"_"+t[0].dims.map((function(t){return t.toString()})).join(",")};return r(r({},l),{get:function(){return(0,e.createReduceProgramInfo)(l,[t[0]],s.noopWithEmptyAxes&&0===s.axes.length?u:c,s.axes,t[0].dataType,s.keepDims,s.noopWithEmptyAxes)}})};e.reduceLogSum=function(t,e){s(t.inputs),t.compute(l(t.inputs,"ReduceLogSum",e,(function(t,e){return["var value = ".concat(e.type.storage,"(0);"),"","value += ".concat(t.getByOffset("inputOffset"),";"),"value = log(value);"]})),{inputs:[0]})},e.reduceL1=function(t,e){s(t.inputs),t.compute(l(t.inputs,"ReduceL1",e,(function(t,e){return["var value = ".concat(e.type.storage,"(0);"),"","value += abs(".concat(t.getByOffset("inputOffset"),");"),""]})),{inputs:[0]})},e.reduceL2=function(t,e){s(t.inputs),t.compute(l(t.inputs,"ReduceL2",e,(function(t,e){return["var t = ".concat(e.type.value,"(0); var value = ").concat(e.type.value,"(0);"),"","t = ".concat(t.getByOffset("inputOffset"),"; value += (t * t);"),"value = sqrt(value);"]})),{inputs:[0]})},e.reduceLogSumExp=function(t,e){s(t.inputs),t.compute(l(t.inputs,"ReduceLogSumExp",e,(function(t,e){return["var value = ".concat(e.type.storage,"(0);"),"","value += exp(".concat(t.getByOffset("inputOffset"),");"),"value = log(value);"]})),{inputs:[0]})},e.reduceMax=function(t,e){s(t.inputs),t.compute(l(t.inputs,"ReduceMax",e,(function(t,e,n){for(var r=[],o=0;o<t.shape.length;o++)(n.indexOf(o)>=0||0===n.length)&&r.push(t.indicesSet("inputIndices",o,0));return["".concat(r.join("\n")),"var value = ".concat(t.getByOffset("inputOffset"),";"),"value = max(value, ".concat(t.getByOffset("inputOffset"),");"),""]})),{inputs:[0]})},e.reduceMean=function(t,e){s(t.inputs),t.compute(l(t.inputs,"ReduceMean",e,(function(t,e,n){for(var r=1,o=0;o<t.shape.length;o++)(n.indexOf(o)>=0||0===n.length)&&(r*=t.shape[o]);return["var sum = f32(0);","","sum += f32(".concat(t.getByOffset("inputOffset"),");"),"let value = ".concat(e.type.value,"(sum / ").concat(r,");")]})),{inputs:[0]})},e.reduceMin=function(t,e){s(t.inputs),t.compute(l(t.inputs,"ReduceMin",e,(function(t,e,n){for(var r=[],o=0;o<t.shape.length;o++)(n.indexOf(o)>=0||0===n.length)&&r.push("inputIndices[".concat(o,"] = 0;"));return["".concat(r.join("\n")),"var value = ".concat(t.getByOffset("inputOffset"),";"),"value = min(value, ".concat(t.getByOffset("inputOffset"),");"),""]})),{inputs:[0]})},e.reduceProd=function(t,e){s(t.inputs),t.compute(l(t.inputs,"ReduceProd",e,(function(t,e){return["var value = ".concat(e.type.storage,"(1);"),"","value *= ".concat(t.getByOffset("inputOffset"),";"),""]})),{inputs:[0]})},e.reduceSum=function(t,e){s(t.inputs),t.compute(l(t.inputs,"ReduceSum",e,(function(t,e){return["var value = ".concat(e.type.storage,"(0);"),"","value += ".concat(t.getByOffset("inputOffset"),";"),""]})),{inputs:[0]})},e.reduceSumSquare=function(t,e){s(t.inputs),t.compute(l(t.inputs,"ReduceSumSquare",e,(function(t,e){return["var t = ".concat(e.type.value,"(0); var value = ").concat(e.type.value,"(0);"),"","t = ".concat(t.getByOffset("inputOffset"),"; value += t * t;"),""]})),{inputs:[0]})},e.parseReduceAttributes=function(t){return(0,a.createAttributeWithCacheKey)(t)}},4566:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributes=e.resize=e.createResizeProgramInfoLoader=void 0;var i=n(6952),c=n(387),s=n(1163),u=n(2075);e.createResizeProgramInfoLoader=function(t,e,n,c,l,p){var f={name:"Resize",inputTypes:[s.GpuDataType.default],cacheHint:e.cacheKey+n.toString()+(c.length>0?"_scales_"+c.toString():"")+(l.length>0?"_sizes_"+l.toString():"")};return r(r({},f),{get:function(){return function(t,e,n,c,l,p,f){var d=e.dims,h=function(t,e,n){var r=new Array(n).fill(0).concat(new Array(n).fill(1)),o=0===t.length?r:t.slice();return e.length>0?(e.forEach((function(t,a){r[t]=o[a],r[a+n]=o[e.length+a]})),r):o}(f,n.axes,d.length),g=function(t,e,n,r){var i=[];if(n.length>0)if(r.length>0){if(t.forEach((function(t){return i.push(t)})),Math.max.apply(Math,a([],o(r),!1))>t.length)throw new Error("axes is out of bound");r.forEach((function(t,e){return i[t]=n[e]}))}else n.forEach((function(t){return i.push(t)}));else{if(0===e.length)throw new Error("Resize requires either scales or sizes.");i=t.map((function(t,n){return Math.round(t*e[n])}))}return i}(d,l,p,n.axes),y=l.slice();0===l.length&&(y=d.map((function(t,e){return 0===t?1:g[e]/t})),"stretch"!==n.keepAspectRatioPolicy&&(g=function(t,e,n,r){var i=function(){switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min.apply(Math,a(a([],o(r.axes.map((function(t){return n[t]}))),!1),[Number.MAX_VALUE],!1)):Math.min.apply(Math,a(a([],o(n),!1),[Number.MAX_VALUE],!1));case"not_smaller":return r.axes.length>0?Math.max.apply(Math,a(a([],o(r.axes.map((function(t){return n[t]}))),!1),[Number.MIN_VALUE],!1)):Math.max.apply(Math,a(a([],o(n),!1),[Number.MIN_VALUE],!1));default:throw new Error("Keep aspect ratio policy ".concat(r.keepAspectRatioPolicy," is not supported"))}}();n.fill(1,0,n.length);var c=t.slice();return r.axes.length>0?(r.axes.forEach((function(t){return n[t]=i})),r.axes.forEach((function(e){return c[e]=Math.round(t[e]*n[e])}))):(n.fill(i,0,n.length),c.forEach((function(t,e){return c[e]=Math.round(t*n[e])}))),c}(d,0,y,n)));var m=(0,u.outputVariable)("output",e.dataType,g),v=(0,u.inputVariable)("input",e.dataType,d),b=i.ShapeUtil.size(g),w=d.length===g.length&&d.every((function(t,e){return t===g[e]})),_="tf_crop_and_resize"===n.coordinateTransformMode;return r(r({},t),{getShaderSource:function(t){return"\n      ".concat((e=n.coordinateTransformMode,"fn getOriginalCoordinateFromResizedCoordinate(xResized: f32, xScale: f32, lengthResized: f32,    lengthOriginal: f32, roiStart: f32, roiEnd: f32) -> f32 { "+function(){switch(e){case"asymmetric":return"return xResized / xScale;";case"pytorch_half_pixel":return"if (lengthResized > 1) {                     return (xResized + 0.5) / xScale - 0.5;                   } else {                     return 0.0;                   }";case"tf_half_pixel_for_nn":return"return (xResized + 0.5) / xScale;";case"align_corners":return"if (lengthResized == 1) {                     return 0.0;                   } else {                     return xResized * (lengthOriginal - 1) / (lengthResized - 1);                   }";case"tf_crop_and_resize":return"if (lengthResized > 1) {                     return roiStart * (lengthOriginal - 1) +                           (xResized * (roiEnd - roiStart) * (lengthOriginal - 1)) / (lengthResized - 1);                   } else {                     return 0.5 * (roiStart + roiEnd) * f32(lengthOriginal - 1);                   }";case"half_pixel_symmetric":return["const outputWidth = xScale * lengthResized;","const adjustment = lengthResized / outputWidth;","const center = lengthOriginal / 2;","const offset = center * (1 - adjustment);","return offset + ((xResized + 0.5) / xScale) - 0.5;"].join("\n");case"half_pixel":return"return ((xResized + 0.5) / xScale) - 0.5;";default:throw new Error("Coordinate transform mode ".concat(e," is not supported"))}}()+"}"),";\n      ").concat(function(){switch(n.mode){case"nearest":return"\n              ".concat(function(t,e){return"\n    fn checkInputIndices(inputIndices: ".concat(t.type.indices,") -> bool {\n      const inputShape = array<u32, ").concat(e.length,">(").concat(e.map((function(t){return"".concat(t,"u")})).join(","),");\n      for (var i:u32 = 0; i < ").concat(e.length,"; i++) {\n        var inputIndex = ").concat(1===e.length?"inputIndices":"inputIndices[i]",";\n        if (inputIndex < 0 || inputIndex >= inputShape[i]) {\n          return false;\n        }\n      }\n      return true;\n    }")}(v,d),";\n              ").concat(function(t,e){return"fn getNearestPixelFromOriginal(xOriginal: f32, isDownSample: bool) -> f32 {"+function(){switch(t){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";default:if(e<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error("Nearest mode ".concat(t," is not supported"))}}()+"}"}(n.nearestMode,c),";\n              ").concat(function(t,e,n,r,o,a,i){return"\n    fn calculateInputIndicesFromOutputIndices(outputIndices: ".concat(e.type.indices,") -> ").concat(t.type.indices," {\n        const inputShape = array<u32, ").concat(n.length,">(").concat(n.map((function(t){return"".concat(t,"u")})).join(","),");\n        const outputShape = array<u32, ").concat(r.length,">(").concat(r.map((function(t){return"".concat(t,"u")})).join(","),");\n        const scales = array<f32, ").concat(o.length,">(").concat(o.map((function(t){return"".concat(t,"f")})).join(","),");\n        const roi = array<f32, ").concat(a.length,">(").concat(a.map((function(t){return"".concat(t,"f")})).join(","),");\n        var inputIndices: ").concat(t.type.indices,";\n        for (var i:u32 = 0; i < ").concat(r.length,"; i++) {\n          var outputIndex = ").concat(1===r.length?"outputIndices":"outputIndices[i]",";\n          var inputIndex: u32;\n          if (scales[i] == 1.0) {\n            inputIndex = outputIndex;\n          } else {\n            var original_idx = getOriginalCoordinateFromResizedCoordinate(f32(outputIndex), scales[i],\n                    f32(outputShape[i]), f32(inputShape[i]), roi[i], roi[i + ").concat(n.length,"]);\n            if (!").concat(i," || (original_idx >= 0 && original_idx < f32(inputShape[i]))) {\n              if (original_idx < 0) {\n                inputIndex = 0;\n              } else if (original_idx > (f32(inputShape[i]) - 1)) {\n                inputIndex = inputShape[i] - 1;\n              } else {\n                inputIndex = u32(getNearestPixelFromOriginal(original_idx, scales[i] < 1));\n              }\n            } else {\n              inputIndex = u32(original_idx);\n            }\n          }\n          ").concat(t.indicesSet("inputIndices","i","inputIndex"),"\n        }\n        return inputIndices;\n    }")}(v,m,d,g,y,h,_),";\n              ");case"linear":return"\n              ".concat(function(t,e,n,r,o){return"\n    fn calculateOriginalIndicesFromOutputIndices(outputIndices: ".concat(t.type.indices,") -> array<f32, ").concat(n.length,"> {\n      const inputShape = array<u32, ").concat(e.length,">(").concat(e.map((function(t){return"".concat(t,"u")})).join(","),");\n      const outputShape = array<u32, ").concat(n.length,">(").concat(n.map((function(t){return"".concat(t,"u")})).join(","),");\n      const scales = array<f32, ").concat(r.length,">(").concat(r.map((function(t){return"".concat(t,"f")})).join(","),");\n      const roi = array<f32, ").concat(o.length,">(").concat(o.map((function(t){return"".concat(t,"f")})).join(","),");\n      var originalIndices: array<f32, ").concat(n.length,">;\n      for (var i:u32 = 0; i < ").concat(n.length,"; i++) {\n        var outputIndex = ").concat(1===n.length?"outputIndices":"outputIndices[i]",";\n        if (scales[i] == 1.0) {\n          originalIndices[i] = f32(outputIndex);\n        } else {\n          originalIndices[i] = getOriginalCoordinateFromResizedCoordinate(f32(outputIndex), scales[i],\n                f32(outputShape[i]), f32(inputShape[i]), roi[i], roi[i + ").concat(e.length,"]);\n        }\n      }\n      return originalIndices;\n    }")}(m,d,g,y,h),";\n              ").concat(function(t,e,n,r,a,i,c){var s=o(2===n.length?[-1,0,1,-1]:1===a[1]?[0,2,3,1]:[0,1,2,3],4),u=s[0],l=s[1],p=s[2],f=s[3];return"\n    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> f32 {\n      var inputIndices: ".concat(t.type.indices,";\n      inputIndices[").concat(l,"] = max(0, min(row, ").concat(n[l]," - 1));\n      inputIndices[").concat(p,"] = max(0, min(col, ").concat(n[p]," - 1));\n      if (").concat(n.length," > 2) {\n        inputIndices[").concat(f,"] = channel;\n        inputIndices[").concat(u,"] = batch;\n      };\n      return input[").concat(t.indicesToOffset("inputIndices"),"];\n    }\n\n    fn bilinearInterpolation(outputIndices: ").concat(e.type.indices,") -> f32 {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(outputIndices);\n      var row:f32 = originalIndices[").concat(l,"];\n      var col:f32 = originalIndices[").concat(p,"];\n      if (").concat(i," && (row < 0 || row > (").concat(n[l]," - 1) || col < 0 || col > ").concat(n[p]," - 1)) {\n        return ").concat(c,";\n      }\n      row = max(0, min(row, ").concat(n[l]," - 1));\n      col = max(0, min(col, ").concat(n[p]," - 1));\n      var row1: u32 = u32(row);\n      var col1: u32 = u32(col);\n      var row2: u32 = u32(row + 1);\n      var col2: u32 = u32(col + 1);\n      var channel: u32 = 0;\n      var batch: u32 = 0;\n      if (").concat(n.length>2,") {\n        channel = u32(originalIndices[").concat(f,"]);\n        batch = u32(originalIndices[").concat(u,"]);\n      }\n      var x11: f32 = getInputValue(batch, channel, row1, col1);\n      var x12: f32 = getInputValue(batch, channel, row1, col2);\n      var x21: f32 = getInputValue(batch, channel, row2, col1);\n      var x22: f32 = getInputValue(batch, channel, row2, col2);\n      var dx1: f32 = row - f32(row1);\n      var dx2: f32 = f32(row2 ) - row;\n      var dy1 = col - f32(col1);\n      var dy2 = f32(col2) - col;\n      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);\n    }")}(v,m,d,0,y,_,n.extrapolationValue),";\n              ");case"cubic":return"\n            ".concat(function(t,e,n,r,a,i,c,s,u,l){var p=o(2===n.length?[0,1]:1===a[1]?[2,3]:[1,2],2),f=p[0],d=p[1],h=function(o){var c=o===f?"row":"col";return"\n      fn ".concat(c,"CubicInterpolation(inputIndices: ").concat(t.type.indices,", outputIndices: ").concat(e.type.indices,") -> f32 {\n        var outputIndex = ").concat(1===r.length?"outputIndices":"outputIndices[".concat(o,"]"),";\n        var originalIdx: f32 = getOriginalCoordinateFromResizedCoordinate(f32(outputIndex), ").concat(a[o],",\n        f32(").concat(r[o],"), f32(").concat(n[o],"), ").concat(i[o],", ").concat(i[o]," + ").concat(n.length,");\n        var fractOriginalIdx: f32 = originalIdx - floor(originalIdx);\n        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);\n\n        if (").concat(s," && (originalIdx < 0 || originalIdx > (").concat(n[o]," - 1))) {\n          return ").concat(u,";\n        }\n        var data: array<f32, 4> = array<f32, 4>(0.0, 0.0, 0.0, 0.0);\n        for (var i: i32 = -1; i < 3; i++) {\n          var ").concat(c,": f32 = originalIdx + f32(i);\n          if (").concat(c," < 0 || ").concat(c," >= ").concat(n[o],") {\n            if (").concat(l,") {\n              coefs[i + 1] = 0.0;\n              continue;\n            } else if (").concat(s,") {\n              return ").concat(u,";\n            } else {\n              ").concat(c," = max(0, min(").concat(c,", ").concat(n[o]," - 1));\n            }\n          }\n          var inputIndicesCopy: ").concat(t.type.indices," = inputIndices;\n          inputIndicesCopy[").concat(o,"] = u32(").concat(c,");\n          data[i + 1] = ").concat(o===f?"input[".concat(t.indicesToOffset("inputIndicesCopy"),"];"):"\n                                               rowCubicInterpolation(inputIndicesCopy, outputIndices);","\n        }\n        return cubicInterpolation1D(data, coefs);\n      }")};return"\n    ".concat(h(f),";\n    ").concat(h(d),";\n  fn getCubicInterpolationCoefs(s: f32) -> array<f32, 4> {\n    var absS = abs(s);\n    var coeffs: array<f32, 4> = array<f32, 4>(0.0, 0.0, 0.0, 0.0);\n    var oneMinusAbsS: f32 = 1.0 - absS;\n    var twoMinusAbsS: f32 = 2.0 - absS;\n    var onePlusAbsS: f32 = 1.0 + absS;\n    coeffs[0] = ((").concat(c," * onePlusAbsS - 5 * ").concat(c,") * onePlusAbsS + 8 * ").concat(c,") * onePlusAbsS - 4 * ").concat(c,";\n    coeffs[1] = ((").concat(c," + 2) * absS - (").concat(c," + 3)) * absS * absS + 1;\n    coeffs[2] = ((").concat(c," + 2) * oneMinusAbsS - (").concat(c," + 3)) * oneMinusAbsS * oneMinusAbsS + 1;\n    coeffs[3] = ((").concat(c," * twoMinusAbsS - 5 * ").concat(c,") * twoMinusAbsS + 8 * ").concat(c,") * twoMinusAbsS - 4 * ").concat(c,";\n    return coeffs;\n  }\n\n  fn cubicInterpolation1D(x: array<f32, 4>, coefs: array<f32, 4>) -> f32 {\n    var coefsSum: f32 = coefs[0] + coefs[1] + coefs[2] + coefs[3];\n    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;\n  }\n\n  fn bicubicInterpolation(outputIndices: ").concat(e.type.indices,") -> f32 {\n    var inputIndices: ").concat(t.type.indices," = outputIndices;\n    return colCubicInterpolation(inputIndices, outputIndices);\n  }\n    ")}(v,m,d,g,y,h,n.cubicCoeffA,_,n.extrapolationValue,n.excludeOutside),";\n            ");default:throw Error("Invalid resize mode")}}(),";\n      ").concat(t.declareVariables(v,m),"\n      ").concat(t.mainStart(),"\n        ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(b),"\n        if (").concat(w,") {\n          output[global_idx] = input[global_idx];\n        } else {\n          let outputIndices = ").concat(m.offsetToIndices("global_idx"),";\n          var inputIndices: ").concat(v.type.indices,";\n          ").concat(function(){switch(n.mode){case"nearest":return"inputIndices = calculateInputIndicesFromOutputIndices(outputIndices);\n                  if (checkInputIndices(inputIndices)) {\n                    output[global_idx] = input[".concat(v.indicesToOffset("inputIndices"),"];\n                  } else {\n                    output[global_idx] = ").concat(n.extrapolationValue,";\n                  }");case"linear":return"output[global_idx] = bilinearInterpolation(outputIndices);";case"cubic":return"output[global_idx] = bicubicInterpolation(outputIndices);";default:throw Error("Unsupported resize mode: ".concat(n.mode))}}(),";\n        }\n      }");var e},outputs:[{dims:g,dataType:e.dataType,gpuDataType:s.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(b/64)}}})}(f,t,e,n,c,l,p)}})},e.resize=function(t,n){var r=[],a=[],i=[],c=function(t){var e=t.customDataBuffer;return new Uint32Array(e,e.byteOffset,1)[0]}(t);(function(t,e,n,r,a,i){var c=o(n>10?[1,2,3]:[-1,t.length>1?1:-1,-1],3),s=c[0],u=c[1],l=c[2],p=t[0].dims.length;if(s>0&&t.length>s&&t[s].dims.length>0)t[s].getFloat32Array().forEach((function(t){return i.push(t)}));else if("tf_crop_and_resize"===e.coordinateTransformMode)throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(u>0&&t.length>u&&t[u].dims.length>0){if(t[u].getFloat32Array().forEach((function(t){return r.push(t)})),0!==r.length&&r.length!==p&&n>=18&&r.length!==e.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");!function(t,e){if(t.every((function(t){return t>0||function(){throw new Error("Resize requires scales input values to be positive")}})),t.length>0)if("linear"===e.mode){if(!(2===t.length||4===t.length&&1===t[0]&&1===t[1]||4===t.length&&1===t[0]&&1===t[3]))throw new Error("Resize requires scales input size to be 2 or 4 for linear mode")}else if("cubic"===e.mode&&!(2===t.length||4===t.length&&1===t[0]&&1===t[1]||4===t.length&&1===t[0]&&1===t[3]))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}(r,e),e.axes.length>0&&function(t,e,n){e.every((function(t){return t>=0&&t<n||function(){throw new Error("Resize requires axes input values to be positive and less than rank")}}));var r=new Array(n).fill(1);return e.forEach((function(e,n){return r[e]=t[n]})),r}(r,e.axes,p).forEach((function(t,e){return r[e]=t}))}if(l>0&&t.length>l&&(t[l].getBigInt64Array().forEach((function(t){return a.push(Number(t))})),a.length!==p||n>=18&&a.length===e.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(e.axes.length>0){if(r.length!==e.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(a.length!==e.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(void 0!==r&&void 0!==a&&r.length>0&&a.length>p)throw new Error("Resize requires only of scales or sizes to be specified")})(t.inputs,n,c,r,a,i),t.compute((0,e.createResizeProgramInfoLoader)(t.inputs[0],n,c,r,a,i),{inputs:[0]})},e.parseResizeAttributes=function(t){var e=t.antialias,n=t.axes,r=t.coordinateTransformMode,o=t.cubicCoeffA,a=0!==t.excludeOutside,i=t.extrapolationValue,s=t.keepAspectRatioPolicy,u=t.mode,l=""===t.nearestMode?"simple":t.nearestMode;return(0,c.createAttributeWithCacheKey)({antialias:e,axes:n,coordinateTransformMode:r,cubicCoeffA:o,excludeOutside:a,extrapolationValue:i,keepAspectRatioPolicy:s,mode:u,nearestMode:l})}},8906:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseSkipLayerNormAttributes=e.skipLayerNorm=void 0;var o=n(6952),a=n(387),i=n(1163),c=n(2075);e.skipLayerNorm=function(t,e){!function(t){if(!t||t.length<3)throw new Error("layerNorm requires at least 3 inputs.");if(1!==t[0].dataType||1!==t[1].dataType)throw new Error("inputs should be float type");var e=t[0],n=t[1],r=t[2];if(e.dataType!==n.dataType||e.dataType!==r.dataType)throw new Error("All inputs must have the same data type");if(3!==e.dims.length&&2!==e.dims.length)throw new Error("Input must be 2D or 3D");if(3!==n.dims.length&&2!==n.dims.length)throw new Error("Skip must be 2D or 3D");var o=e.dims[e.dims.length-1],a=e.dims[e.dims.length-2];if(n.dims[n.dims.length-1]!==o)throw new Error("Skip must have the same hidden size as input");if(n.dims[n.dims.length-2]!==a)throw new Error("Skip must have the same sequence length as input");if(1!==r.dims.length)throw new Error("Gamma must be 1D");if(r.dims[r.dims.length-1]!==o)throw new Error("Gamma must have the same hidden size as input");if(t.length>3){var i=t[3];if(1!==i.dims.length)throw new Error("Beta must be 1D");if(i.dims[i.dims.length-1]!==o)throw new Error("Beta must have the same hidden size as input")}if(t.length>4){var c=t[4];if(1!==c.dims.length)throw new Error("Bias must be 1D");if(c.dims[c.dims.length-1]!==o)throw new Error("Bias must have the same hidden size as input")}}(t.inputs);var n=[0];t.outputCount>1&&n.push(-3),t.outputCount>2&&n.push(-3),t.outputCount>3&&n.push(3),t.compute(function(t,e,n,a){var s={name:"SkipLayerNormalization",inputTypes:new Array(t.length).fill(i.GpuDataType.default),cacheHint:e.cacheKey};return r(r({},s),{get:function(){return function(t,e,n,a,s){var u=e[0].dims,l=u,p=o.ShapeUtil.size(u),f=u.slice(-1)[0],d=s?u.slice(0,-1).concat(1):[],h=e.length>3,g=e.length>4,y=(0,c.tensorTypeToWsglStorageType)(e[0].dataType),m=s&&a>1,v=s&&a>2,b=a>3,w=0,_=[{dims:l,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}];return a>1&&_.push({dims:d,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}),a>2&&_.push({dims:d,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}),a>3&&_.push({dims:u,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}),r(r({},t),{getShaderSource:function(t){return"\n      const hiddenSize: u32 = ".concat(f,";\n      const epsilon: f32 = ").concat(n.epsilon,";\n\n      @group(0) @binding(").concat(w++,") var<storage, read> x : array<").concat(y,">;\n      @group(0) @binding(").concat(w++,") var<storage, read> skip : array<").concat(y,">;\n      @group(0) @binding(").concat(w++,") var<storage, read> gamma : array<").concat(y,">;\n      ").concat(h?"@group(0) @binding(".concat(w++,") var<storage, read> beta : array<").concat(y,">;"):"","\n      ").concat(g?"@group(0) @binding(".concat(w++,") var<storage, read> bias : array<").concat(y,">;"):"","\n      @group(0) @binding(").concat(w++,") var<storage, read_write> output : array<").concat(y,">;\n      ").concat(m?"@group(0) @binding(".concat(w++,") var<storage, read_write> meanOutput : array<").concat(y,">;"):"","\n      ").concat(v?"@group(0) @binding(".concat(w++,") var<storage, read_write> invStdOutput : array<").concat(y,">;"):"","\n      ").concat(b?"@group(0) @binding(".concat(w++,") var<storage, read_write> inputSkipBiasSum : array<").concat(y,">;"):"","\n\n      ").concat(t.mainStart(),"\n        ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(p/f),"\n        let offset = global_idx * hiddenSize;\n        var sum: f32 = 0.0;\n        var squareSum: f32 = 0.0;\n        for (var i: u32 = 0; i < hiddenSize; i++) {\n          let skipValue = skip[offset + i];\n          let biasValue = ").concat(g?"bias[i]":"0.0",";\n          let inputValue = x[offset + i];\n          let value = inputValue + skipValue + biasValue;\n          ").concat(b?"inputSkipBiasSum[offset + i] = value;":"","\n          output[offset + i] = value;\n          sum += value;\n          squareSum += value * value;\n        }\n        let mean: f32 = sum / f32(hiddenSize);\n        let variance: f32 = sqrt(squareSum / f32(hiddenSize) - mean * mean + epsilon);\n        ").concat(m?"meanOutput[global_idx] = mean;":"","\n        ").concat(v?"invStdOutput[global_idx] = 1.0 / variance;":"","\n        for (var i: u32 = 0; i < hiddenSize; i++) {\n          output[offset + i] = (output[offset + i] - mean) / variance * gamma[i] + ").concat(h?"beta[i]":"0.0",";\n        }\n      }")},outputs:_,dispatchGroup:function(){return{x:Math.ceil(p/f/64)}}})}(s,t,e,n,a)}})}(t.inputs,e,t.outputCount,!1),{outputs:n})},e.parseSkipLayerNormAttributes=function(t){var e=t.epsilon;return(0,a.createAttributeWithCacheKey)({epsilon:e})}},5101:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseSliceAttributes=e.slice=void 0;var i=n(6952),c=n(387),s=n(1163),u=n(2075),l=function(t,e){var n=[];if(t.length>e)if(7===t[e].dataType)t[e].getBigInt64Array().forEach((function(t){return n.push(Number(t))}));else{if(6!==t[e].dataType)throw new Error("Input ".concat(e," must be an array of int32 or int64"));t[e].getInt32Array().forEach((function(t){return n.push(Number(t))}))}return n},p=function(t,e,n,r,o){var a=t;return t<0&&(a+=n[r[e]]),o[e]<0?Math.max(0,Math.min(a,n[r[e]]-1)):Math.max(0,Math.min(a,n[r[e]]))};e.slice=function(t,e){!function(t,e){if(!t||t.length<1)throw new Error("too few inputs");if(0!==e.axes.length){if(e.axes.length!==e.starts.length||e.axes.length!==e.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(e.starts.length!==e.ends.length)throw new Error("starts and ends must have the same length");t.slice(1).forEach((function(e,n){if(6!==t[n+1].dataType&&7!==t[n+1].dataType)throw new Error("Input ".concat(n," must be an array of int32 or int64"))}))}(t.inputs,e);var n=function(t,e){var n=function(t,e){if(t.length>1){var n=l(t,1),r=l(t,2),i=l(t,3);return 0===i.length&&(i=a([],o(Array(t[0].dims.length).keys()),!1)),(0,c.createAttributeWithCacheKey)({starts:n,ends:r,axes:i})}return e}(t,e),f={name:"Slice",inputTypes:[s.GpuDataType.default],cacheHint:n.cacheKey+(t.length>4?"steps_"+t[4].dims.toString():"")};return r(r({},f),{get:function(){return function(t,e,n){var c=e[0].dims,f=i.ShapeUtil.size(c),d=n.axes.length>0?i.ShapeUtil.normalizeAxes(n.axes,c.length):a([],o(Array(c.length).keys()),!1),h=l(e,4);h.forEach((function(t){return 0!==t||function(){throw new Error("step cannot be 0")}})),0===h.length&&(h=Array(d.length).fill(1));var g=n.starts.map((function(t,e){return p(t,e,c,d,h)})),y=n.ends.map((function(t,e){return p(t,e,c,d,h)}));if(d.length!==c.length)for(var m=0;m<c.length;++m)d.includes(m)||(g.splice(m,0,0),y.splice(m,0,c[m]),h.splice(m,0,1));var v=h.map((function(t){return Math.sign(t)}));h.forEach((function(t,e,n){if(t<0){var r=(y[e]-g[e])/t,o=g[e],a=o+r*h[e];g[e]=a,y[e]=o,n[e]=-t}}));var b=c.slice(0);d.forEach((function(t,e){b[t]=Math.ceil((y[t]-g[t])/h[t])}));var w={dims:b,dataType:e[0].dataType,gpuDataType:s.GpuDataType.default},_=(0,u.outputVariable)("output",e[0].dataType,b),x=(0,u.inputVariable)("input",e[0].dataType,c),T=i.ShapeUtil.size(b);return r(r({},t),{getShaderSource:function(t){return"\n      ".concat(t.declareVariables(x,_),"\n        const signs = array<i32, ").concat(v.length,">(").concat(v.map((function(t){return"".concat(t,"i")})).join(","),");\n        const starts = array<u32, ").concat(g.length,">(").concat(g.map((function(t){return"".concat(t,"u")})).join(","),");\n        const ends = array<u32, ").concat(y.length,">(").concat(y.map((function(t){return"".concat(t,"u")})).join(","),");\n        const steps = array<u32, ").concat(h.length,">(").concat(h.map((function(t){return"".concat(t,"u")})).join(","),");\n        const inputShape = array<u32, ").concat(c.length,">(").concat(c.map((function(t){return"".concat(t,"u")})).join(","),");\n\n        ").concat(function(t,e,n,r){return"fn calculateInputIndices(outputIndices: ".concat(e.type.indices,") -> ").concat(t.type.indices," {\n          var inputIndices: ").concat(t.type.indices,";\n          var carry = 0u;\n          for (var i = ").concat(n.length,"; i >= 0; i--) {\n            var outputIndex = ").concat(1===r.length?"outputIndices":"outputIndices[i]",";\n            var inputIndex = outputIndex * steps[i] + starts[i] + carry;\n            carry = inputIndex / inputShape[i];\n            inputIndex = inputIndex % inputShape[i];\n            if (signs[i] < 0) {\n              inputIndex = inputShape[i] - inputIndex - 1u + starts[i];\n            }\n            ").concat(1===n.length?"inputIndices":"inputIndices[i]"," = inputIndex;\n          }\n          return inputIndices;\n      }")}(x,_,c,b),"\n        ").concat(t.mainStart(),"\n          ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(T),"\n          let outputIndices = ").concat(_.offsetToIndices("global_idx"),";\n          let inputIndices = calculateInputIndices(outputIndices);\n          ").concat(_.setByOffset("global_idx",x.getByIndices("inputIndices")),"\n      }")},outputs:[w],dispatchGroup:function(){return{x:Math.ceil(f/64)}}})}(f,t,n)}})}(t.inputs,e),f=n.get();if(!(i.ShapeUtil.size(f.outputs[0].dims)>0))throw new Error("slice: output size is 0");t.compute(n,{inputs:[0]})},e.parseSliceAttributes=function(t){var e=t.starts,n=t.ends,r=t.axes;return(0,c.createAttributeWithCacheKey)({starts:e,ends:n,axes:r})}},6198:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseSoftmaxAttributes=e.softmax=e.softmaxProgramMetadata=void 0;var o=n(6952),a=n(387),i=n(1163),c=n(2075);e.softmaxProgramMetadata={name:"Softmax",inputTypes:[i.GpuDataType.default]},e.softmax=function(t,n){!function(t){if(!t||1!==t.length)throw new Error("Softmax op requires 1 input.")}(t.inputs),t.compute(r(r({},e.softmaxProgramMetadata),{cacheHint:n.cacheKey,get:function(){return function(t,n){var a=(0,c.tensorTypeToWsglStorageType)(t.dataType),s=t.dims,u=o.ShapeUtil.size(s),l=n.axis;if(l<0&&(l=s.length+l),l<s.length-1)throw new Error("softmax only supports last axis for now.");var p=s[l],f=u/p,d="f32"===a?"var threadMax: f32 = -3.402823e+38f;":"var threadMax: f16 = -65504.0h;";return r(r({},e.softmaxProgramMetadata),{outputs:[{dims:s,dataType:t.dataType,gpuDataType:i.GpuDataType.default}],getShaderSource:function(t){return"\n      var<workgroup> rowMaxShared : ".concat(a,";\n      var<workgroup> rowSumShared : ").concat(a,";\n      var<workgroup> threadShared : array<").concat(a,", ").concat(64,">;\n\n      @group(0) @binding(0) var<storage, read> x : array<").concat(a,">;\n      @group(0) @binding(1) var<storage, read_write> result : array<").concat(a,">;\n\n      fn getValue(row: i32, col: i32, row_stride: i32) -> ").concat(a," {\n        let index = row * row_stride + col;\n        return x[index];\n      }\n\n      fn setValue(row: i32, col: i32, row_stride: i32, value: ").concat(a,") {\n        let index = row * row_stride + col;\n        result[index] = value;\n      }\n\n      @compute @workgroup_size(").concat(64,", 1, 1)\n      fn main(@builtin(local_invocation_id) local_id : vec3<u32>, @builtin(global_invocation_id) global_id : vec3u) {\n        let gindex = i32(global_id.x);\n        let lindex = i32(local_id.x);\n        const wg = ").concat(64,";\n        let row = gindex / wg;\n        let cols = ").concat(p,";\n        let row_stride : i32 = ").concat(p,";\n\n        // find the rows max\n        ").concat(d,"\n        for (var col = lindex; col < cols; col += wg) {\n          let value = getValue(row, col, row_stride);\n          threadMax = max(threadMax, value);\n        }\n        if (lindex < cols) {\n          threadShared[lindex] = threadMax;\n        }\n        workgroupBarrier();\n\n        var reduceSize = min(cols, wg);\n        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\n          reduceSize = currSize + (reduceSize & 1);\n          if (lindex < currSize) {\n            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowMaxShared = threadShared[0];\n        }\n        workgroupBarrier();\n\n        // find the rows sum\n        var threadSum: ").concat(a," = 0.0;\n        for (var col = lindex; col < cols; col += wg) {\n          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);\n          threadSum += subExp;\n        }\n        threadShared[lindex] = threadSum;\n        workgroupBarrier();\n\n        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {\n          if (lindex < currSize) {\n            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowSumShared = threadShared[0];\n        }\n        workgroupBarrier();\n\n        // calculate final value for each element in the row\n        for (var col = lindex; col < cols; col += wg) {\n          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;\n          setValue(row, col, row_stride, value);\n        }\n      }")},dispatchGroup:function(){return{x:f}}})}(t.inputs[0],n)}}))},e.parseSoftmaxAttributes=function(t){return(0,a.createAttributeWithCacheKey)({axis:t.axis})}},2067:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;var i=n(6952),c=n(387),s=n(1163),u=n(2075);e.split=function(t,e){!function(t){if(!t||t.length<1)throw new Error("too few inputs")}(t.inputs),t.compute(function(t,e){var n=1===t.length?e:function(t,e){var n=[],r=e.numOutputs;return t[1].dims[0]>0&&(t[1].getBigInt64Array().forEach((function(t){return n.push(Number(t))})),r=n.length),(0,c.createAttributeWithCacheKey)({numOutputs:r,axis:e.axis,splitSizes:n})}(t,e),l={name:"Split",inputTypes:[s.GpuDataType.default],cacheHint:n.cacheKey};return r(r({},l),{get:function(){return function(t,e,n){for(var c=e[0].dims,l=i.ShapeUtil.size(c),p=e[0].dataType,f=c.length,d=n.axis,h=d<0?c.length+d:d,g=new Array(n.numOutputs),y=(0,u.inputVariable)("input",p,c),m=new Array(n.numOutputs),v=[],b=[],w=0,_=0;_<n.numOutputs;_++){w+=n.splitSizes[_],m[_]=w;var x=c.slice();x[n.axis]=n.splitSizes[_],b.push(x),g[_]=(0,u.outputVariable)("output".concat(_),p,b[_]),v.push({dims:b[_],dataType:e[0].dataType,gpuDataType:s.GpuDataType.default})}var T=f<2?"indices":"indices[".concat(h,"]");return r(r({},t),{getShaderSource:function(t){return"\n  ".concat(t.declareVariables.apply(t,a([y],o(g),!1)),"\n  const sizeInConcatAxis = array<u32, ").concat(m.length,">(").concat(m.map((function(t){return"".concat(t,"u")})).join(","),");\n  ").concat((e=m.length,"\nfn calculateOutputIndex(index: u32) -> u32 {\n    for (var i: u32 = 0u; i < ".concat(e,"u; i += 1u ) {\n    if (index < sizeInConcatAxis[i]) {\n        return i;\n    }\n    }\n    return ").concat(e,"u;\n}")),"\n  ").concat(function(t){for(var e=t.length,n=[],r=0;r<e;++r){var o=t[r].setByIndices("indices","input[global_idx]");1===e?n.push(o):0===r?n.push("if (outputNumber == ".concat(r,"u) { ").concat(o," }")):r===e-1?n.push("else { ".concat(o," }")):n.push("else if (outputNumber == ".concat(r,") { ").concat(o," }"))}return"\n      fn writeBufferData(outputNumber: u32, indices: ".concat(t[0].type.indices,", global_idx: u32) {\n        ").concat(n.join("\n"),"\n      }")}(g),"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(l),"\n\n    var indices = ").concat(y.offsetToIndices("global_idx"),";\n    let outputNumber = calculateOutputIndex(").concat(T,");\n    if (outputNumber != 0) {\n        ").concat(T," -= sizeInConcatAxis[outputNumber - 1u];\n    }\n    writeBufferData(outputNumber, indices, global_idx);\n  }");var e},outputs:v,dispatchGroup:function(){return{x:Math.ceil(l/64)}}})}(l,[t[0]],n)}})}(t.inputs,e),{inputs:[0]})},e.parseSplitAttributes=function(t){var e=t.axis,n=t.splitSizes,r=t.numOutputs<0?n.length:t.numOutputs;if(r!==n.length)throw new Error("numOutputs and splitSizes lengh must be equal");return(0,c.createAttributeWithCacheKey)({axis:e,numOutputs:r,splitSizes:n})}},8699:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.tile=e.createTileProgramInfo=e.tileProgramMetadata=void 0;var i=n(6952),c=n(1163),s=n(2075);e.tileProgramMetadata={name:"Tile",inputTypes:[c.GpuDataType.default]};var u=function(t){return Array.from(t.getBigInt64Array(),Number)};e.createTileProgramInfo=function(t,e){var n=e[0].dims,l=u(e[1]),p=function(t,e){for(var n=[],r=0;r<t.length;++r)n.push(t[r]*e[r]);return n}(n,l),f=i.ShapeUtil.size(p),d=e[0].dataType,h=(0,s.inputVariable)("input",d,n),g=(0,s.outputVariable)("output",d,p);return r(r({},t),{outputs:[{dims:p,dataType:e[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(t){return"\n      const inputShape = ".concat(h.indices.apply(h,a([],o(n),!1)),";\n      ").concat(t.declareVariables(h,g),"\n      ").concat(t.mainStart(),"\n      ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(f),"\n      let outputIndices = ").concat(g.offsetToIndices("global_idx"),";\n      var inputIndices: ").concat(h.type.indices,";\n      for (var i = 0; i < ").concat(n.length,"; i++) {\n        let inputDimValue = ").concat(g.indicesGet("outputIndices","i"),"  % ").concat(h.indicesGet("inputShape","i"),";\n\n        ").concat(h.indicesSet("inputIndices","i","inputDimValue"),"\n      }\n      ").concat(g.setByOffset("global_idx",h.getByIndices("inputIndices")),"\n    }")},dispatchGroup:function(){return{x:Math.ceil(f/64)}}})},e.tile=function(t){!function(t){if(!t||2!==t.length)throw new Error("Tile requires 2 inputs.");if(1!==t[0].dataType&&6!==t[0].dataType&&12!==t[0].dataType)throw new Error("Tile only support float, int32, and uint32 data types");if(7!==t[1].dataType)throw new Error("Tile `repeats` input should be of int64 data type");if(1!==t[1].dims.length)throw new Error("Tile `repeats` input should be 1-D");if(u(t[1]).length!==t[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")}(t.inputs);var n=u(t.inputs[1]).toString();t.compute(r(r({},e.tileProgramMetadata),{cacheHint:n,get:function(){return(0,e.createTileProgramInfo)(e.tileProgramMetadata,t.inputs)}}),{inputs:[0]})}},2625:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=e.createTransposeProgramInfo=e.transposeProgramMetadata=void 0;var i=n(6952),c=n(387),s=n(1163),u=n(2075);e.transposeProgramMetadata={name:"Transpose",inputTypes:[s.GpuDataType.default]};var l=function(t,e){return e&&e.length!==t.length?a([],o(t.keys()),!1).reverse():e};e.createTransposeProgramInfo=function(t,n){var o=t.dataType,a=t.dims,c=l(a,n),p=function(t,e){return i.ShapeUtil.sortBasedOnPerm(t,l(t,e))}(a,c),f=a.length,d=i.ShapeUtil.size(p),h=(0,u.outputVariable)("output",o,p),g=(0,u.inputVariable)("a",o,a);return r(r({},e.transposeProgramMetadata),{outputs:[{dims:p,dataType:t.dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(t){return"\n  ".concat(t.declareVariables(g,h),"\n\n  ").concat(function(t,e,n,r){var o=[];o.push("fn perm(i: ".concat(r.type.indices,") -> ").concat(n.type.indices," {\n    var a: ").concat(n.type.indices,";"));for(var a=0;a<e;++a)o.push(n.indicesSet("a",t[a],"i[".concat(a,"]")));return o.push("return a;}"),o.join("\n")}(c,f,g,h),"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(d),"\n\n    let indices = ").concat(h.offsetToIndices("global_idx"),";\n    let aIndices = perm(indices);\n\n    ").concat(h.setByOffset("global_idx",g.getByIndices("aIndices")),"\n  }")},dispatchGroup:function(){return{x:Math.ceil(d/64)}}})},e.transpose=function(t,n){!function(t){if(!t||1!==t.length)throw new Error("Transpose requires 1 input.")}(t.inputs),t.compute(r(r({},e.transposeProgramMetadata),{cacheHint:n.cacheKey,get:function(){return(0,e.createTransposeProgramInfo)(t.inputs[0],n.perm)}}))},e.parseTransposeAttributes=function(t){return(0,c.createAttributeWithCacheKey)({perm:t.perm})}},9302:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.log=e.thresholdedRelu=e.tanh=e.tan=e.sqrt=e.sinh=e.sin=e.sigmoid=e.relu=e.reciprocal=e.neg=e.not=e.leakyRelu=e.gelu=e.floor=e.exp=e.erf=e.erfImpl=e.elu=e.parseAlphaAttributes=e.cosh=e.cos=e.ceil=e.clip=e.clipV10=e.cast=e.parseCastAttributes=e.atanh=e.atan=e.asinh=e.asin=e.acosh=e.acos=e.abs=void 0;var o=n(6952),a=n(387),i=n(1163),c=n(2075),s=function(t,e,n,a,s,u){void 0===u&&(u=t.dataType);var l={name:e,inputTypes:[i.GpuDataType.default],cacheHint:s};return r(r({},l),{get:function(){return function(t,e,n,a,s){return r(r({},t),{getShaderSource:function(t){return function(t,e,n,r,o,a){var i,s=Math.ceil(e/4);i="string"==typeof o?"".concat(o,"(a)"):o("a");var u=(0,c.inputVariable)("inputData",n,[s],4),l=(0,c.outputVariable)("outputData",r,[s],4);return"\n  ".concat(t.declareVariables(u,l),"\n\n  ").concat(null!=a?a:"","\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(s),"\n\n    let a = ").concat(u.getByOffset("global_idx"),";\n    ").concat(l.setByOffset("global_idx",i),"\n  }")}(t,o.ShapeUtil.size(e.dims),e.dataType,n,a,s)},outputs:[{dims:e.dims,dataType:n,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(t){return{x:Math.ceil(o.ShapeUtil.size(t[0].dims)/64/4)}}})}(l,t,u,n,a)}})};e.abs=function(t){t.compute(s(t.inputs[0],"Abs","abs"))},e.acos=function(t){t.compute(s(t.inputs[0],"Acos","acos"))},e.acosh=function(t){t.compute(s(t.inputs[0],"Acosh","acosh"))},e.asin=function(t){t.compute(s(t.inputs[0],"Asin","asin"))},e.asinh=function(t){t.compute(s(t.inputs[0],"Asinh","asinh"))},e.atan=function(t){t.compute(s(t.inputs[0],"Atan","atan"))},e.atanh=function(t){t.compute(s(t.inputs[0],"Atanh","atanh"))},e.parseCastAttributes=function(t){return(0,a.createAttributeWithCacheKey)(t)},e.cast=function(t,e){var n;switch(e.to){case 10:n="vec4<f16>";break;case 1:n="vec4<f32>";break;case 12:n="vec4<u32>";break;case 6:n="vec4<i32>";break;case 9:n="vec4<bool>";break;default:throw new RangeError("not supported type (specified in attribute 'to' from 'Cast' operator): ".concat(e.to))}t.compute(s(t.inputs[0],"Cast",n,void 0,e.cacheKey,e.to))},e.clipV10=function(t,e){var n=(0,c.tensorTypeToWsglStorageType)(t.inputs[0].dataType);t.compute(s(t.inputs[0],"Clip",(function(t){return"clamp(".concat(t,", clip_min_, clip_max_)")}),"\n    const clip_min_: vec4<".concat(n,"> = vec4(").concat(n,"(").concat(e.min,"));\n    const clip_max_: vec4<").concat(n,"> = vec4(").concat(n,"(").concat(e.max,"));\n"),e.cacheKey),{inputs:[0]})},e.clip=function(t){var n,r,i,c=(r=(n=t.inputs).length>=2?n[1].getFloat32Array()[0]:o.MIN_CLIP,i=n.length>=3?n[2].getFloat32Array()[0]:o.MAX_CLIP,(0,a.createAttributeWithCacheKey)({min:r,max:i}));(0,e.clipV10)(t,c)},e.ceil=function(t){t.compute(s(t.inputs[0],"Ceil","ceil"))},e.cos=function(t){t.compute(s(t.inputs[0],"Cos","cos"))},e.cosh=function(t){t.compute(s(t.inputs[0],"Cosh","cosh"))},e.parseAlphaAttributes=function(t){return(0,a.createAttributeWithCacheKey)(t)},e.elu=function(t,e){t.compute(s(t.inputs[0],"Elu",(function(t){return"elu_vf32(".concat(t,")")}),"\n  const elu_alpha_: f32 = f32(".concat(e.alpha,");\n\n  fn elu_f32(a: f32) -> f32 {\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\n  }\n\n  fn elu_vf32(v: vec4<f32>) -> vec4<f32> {\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\n  }"),e.cacheKey))},e.erfImpl=function(t,e){return void 0===e&&(e="f32"),"\nconst r0: ".concat(e," = 0.3275911;\nconst r1: ").concat(e," = 0.254829592;\nconst r2: ").concat(e," = -0.284496736;\nconst r3: ").concat(e," = 1.421413741;\nconst r4: ").concat(e," = -1.453152027;\nconst r5: ").concat(e," = 1.061405429;\n\nfn erf_vf32(v: ").concat(t,") -> ").concat(t," {\n  let absv = abs(v);\n  let x = 1.0 / (1.0 + r0 * absv);\n  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\n}")},e.erf=function(t){var n=(0,c.tensorTypeToWsglStorageType)(t.inputs[0].dataType);t.compute(s(t.inputs[0],"Erf",(function(t){return"erf_vf32(".concat(t,")")}),(0,e.erfImpl)("vec4<".concat(n,">"),n)))},e.exp=function(t){t.compute(s(t.inputs[0],"Exp","exp"))},e.floor=function(t){t.compute(s(t.inputs[0],"Floor","floor"))},e.gelu=function(t){var n=(0,c.tensorTypeToWsglStorageType)(t.inputs[0].dataType);t.compute(s(t.inputs[0],"Gelu",(function(t){return"0.5 * ".concat(t," * (1.0 + erf_vf32(").concat(t," * 0.7071067811865475))")}),(0,e.erfImpl)("vec4<".concat(n,">"),n)))},e.leakyRelu=function(t,e){t.compute(s(t.inputs[0],"LeakyRelu",(function(t){return"select(leaky_relu_alpha_ * ".concat(t,", ").concat(t,", ").concat(t," >= vec4<f32>(0.0))")}),"const leaky_relu_alpha_: f32 = f32(".concat(e.alpha,");"),e.cacheKey))},e.not=function(t){t.compute(s(t.inputs[0],"Not",(function(t){return"!".concat(t)})))},e.neg=function(t){t.compute(s(t.inputs[0],"Neg",(function(t){return"-".concat(t)})))},e.reciprocal=function(t){t.compute(s(t.inputs[0],"Reciprocal",(function(t){return"1.0/".concat(t)})))},e.relu=function(t){t.compute(s(t.inputs[0],"Relu",(function(t){return"select(vec4<f32>(0.0), ".concat(t,", ").concat(t," > vec4<f32>(0.0))")})))},e.sigmoid=function(t){t.compute(s(t.inputs[0],"Sigmoid",(function(t){return"(1.0 / (1.0 + exp(-".concat(t,")))")})))},e.sin=function(t){t.compute(s(t.inputs[0],"Sin","sin"))},e.sinh=function(t){t.compute(s(t.inputs[0],"Sinh","sinh"))},e.sqrt=function(t){t.compute(s(t.inputs[0],"Sqrt","sqrt"))},e.tan=function(t){t.compute(s(t.inputs[0],"Tan","tan"))},e.tanh=function(t){t.compute(s(t.inputs[0],"Tanh","tanh"))},e.thresholdedRelu=function(t,e){return t.compute(s(t.inputs[0],"ThresholdedRelu",(function(t){return"select(vec4<f32>(0.0), ".concat(t,", ").concat(t," > thresholded_relu_alpha_)")}),"const thresholded_relu_alpha_: vec4<f32> = vec4<f32>(".concat(e.alpha,");"),e.cacheKey)),0},e.log=function(t){t.compute(s(t.inputs[0],"Log","log"))}},8305:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;var i=n(7917),c=n(4955),s=n(2075),u=function(){function t(t){this.backend=t,this.repo=new Map,this.attributesBound=!1}return t.prototype.getArtifact=function(t){return this.repo.get(t)},t.prototype.setArtifact=function(t,e){this.repo.set(t,e)},t.prototype.run=function(t,e,n,c,s){var u,l,p,f,d=this,h=this.backend.device,g=this.backend.getComputePassEncoder(),y=this.backend.supportTimestampQuery&&"default"===this.backend.env.webgpu.profilingMode;y&&g.writeTimestamp(this.backend.profilingQuerySet,0),g.setPipeline(t.computePipeline);var m=[];try{for(var v=r(n),b=v.next();!b.done;b=v.next()){var w=b.value;m.push({binding:m.length,resource:{buffer:w.buffer}})}}catch(t){u={error:t}}finally{try{b&&!b.done&&(l=v.return)&&l.call(v)}finally{if(u)throw u.error}}try{for(var _=r(c),x=_.next();!x.done;x=_.next()){var T=x.value;m.push({binding:m.length,resource:{buffer:T.buffer}})}}catch(t){p={error:t}}finally{try{x&&!x.done&&(f=_.return)&&f.call(_)}finally{if(p)throw p.error}}var S=h.createBindGroup({layout:t.computePipeline.getBindGroupLayout(0),entries:m,label:t.programInfo.name});if(g.setBindGroup(0,S),g.dispatchWorkgroups.apply(g,a([],o(s),!1)),this.backend.pendingDispatchNumber++,y){g.writeTimestamp(this.backend.profilingQuerySet,1),null==this.backend.profilingQueryData&&(this.backend.profilingQueryData=this.backend.gpuDataManager.create(16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE));var O=this.backend.gpuDataManager.create(16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.backend.endComputePass(),this.backend.getCommandEncoder().resolveQuerySet(this.backend.profilingQuerySet,0,2,this.backend.profilingQueryData.buffer,0),this.backend.getCommandEncoder().copyBufferToBuffer(this.backend.profilingQueryData.buffer,0,O.buffer,0,16),this.backend.flush();var I=this.backend.currentKernelId,A=this.backend.kernels.get(I),P="[".concat(A[0],"] ").concat(A[1]);O.buffer.mapAsync(GPUMapMode.READ).then((function(){var n=new BigUint64Array(O.buffer.getMappedRange()),r=n[0],o=n[1];O.buffer.unmap(),void 0===d.backend.profilingTimeBase&&(d.backend.profilingTimeBase=r);var a=Number(r-d.backend.profilingTimeBase),c=Number(o-d.backend.profilingTimeBase);if(!Number.isSafeInteger(a)||!Number.isSafeInteger(c))throw new RangeError("incorrect timestamp range");d.backend.gpuDataManager.release(O.id);var s="";e.forEach((function(t,e){s+="input[".concat(e,"]: [").concat(t.dims,"] | ").concat((0,i.tensorDataTypeEnumToString)(t.dataType),", ")}));var u="";t.programInfo.outputs.forEach((function(t,e){u+="output[".concat(e,"]: [").concat(t.dims,"] | ").concat((0,i.tensorDataTypeEnumToString)(t.dataType),", ")})),console.log('[profiling] kernel "'.concat(I,"|").concat(P,'" ').concat(s).concat(u,"execution time: ").concat(c-a," ns"))}))}this.backend.pendingDispatchNumber>=16&&this.backend.flush()},t.prototype.dispose=function(){},t.prototype.build=function(t,e){var n=this.backend.device,r=[];n.features.has("shader-f16")&&r.push("enable f16;");var o=(0,s.createShaderHelper)(e),a=t.getShaderSource(o),i="".concat(r.join("\n"),"\n").concat(o.additionalImplementations,"\n").concat(a),u=n.createShaderModule({code:i,label:t.name});return(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] shader code: ".concat(i)})),{programInfo:t,computePipeline:n.createComputePipeline({compute:{module:u,entryPoint:"main"},layout:"auto",label:t.name})}},t.prototype.normalizeDispatchGroupSize=function(t){var e="number"==typeof t?t:t.x,n="number"==typeof t?1:t.y||1,r="number"==typeof t?1:t.z||1,o=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(e<=o&&n<=o&&r<=o)return[e,n,r];var a=e*n*r,i=Math.ceil(Math.sqrt(a));if(i>o){if((i=Math.ceil(Math.cbrt(a)))>o)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[i,i,i]}return[i,i,1]},t}();e.ProgramManager=u},1163:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.GpuDataType=void 0,(n=e.GpuDataType||(e.GpuDataType={}))[n.default=0]="default",n[n.upload=1]="upload",n[n.profile=2]="profile"},9544:function(t,e,n){"use strict";var r,o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return a(e,t),e},c=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initializeRuntime=e.initializeWebAssemblyInstance=void 0;var u,l,p,f=n(2235),d=i(n(1259)),h=n(263),g=function(){return!!f.env.wasm.proxy&&"undefined"!=typeof document},y=!1,m=!1,v=!1,b=[],w=[],_=[],x=[],T=[],S=[],O=function(){if(y||!m||v||!u)throw new Error("worker not ready")},I=function(t){switch(t.data.type){case"init-wasm":y=!1,t.data.err?(v=!0,l[1](t.data.err)):(m=!0,l[0]());break;case"init-ort":t.data.err?p[1](t.data.err):p[0]();break;case"create_allocate":t.data.err?b.shift()[1](t.data.err):b.shift()[0](t.data.out);break;case"create_finalize":t.data.err?w.shift()[1](t.data.err):w.shift()[0](t.data.out);break;case"create":t.data.err?_.shift()[1](t.data.err):_.shift()[0](t.data.out);break;case"release":t.data.err?x.shift()[1](t.data.err):x.shift()[0]();break;case"run":t.data.err?T.shift()[1](t.data.err):T.shift()[0](t.data.out);break;case"end-profiling":t.data.err?S.shift()[1](t.data.err):S.shift()[0]()}},A="undefined"!=typeof document?null===(r=null===document||void 0===document?void 0:document.currentScript)||void 0===r?void 0:r.src:void 0;e.initializeWebAssemblyInstance=function(){return c(void 0,void 0,void 0,(function(){return s(this,(function(t){if(g()){if(m)return[2];if(y)throw new Error("multiple calls to 'initWasm()' detected.");if(v)throw new Error("previous call to 'initWasm()' failed.");return y=!0,void 0===f.env.wasm.wasmPaths&&A&&0!==A.indexOf("blob:")&&(f.env.wasm.wasmPaths=A.substr(0,+A.lastIndexOf("/")+1)),[2,new Promise((function(t,e){null==u||u.terminate(),(u=n(8050).Z()).onmessage=I,l=[t,e];var r={type:"init-wasm",in:f.env.wasm};u.postMessage(r)}))]}return[2,(0,h.initializeWebAssembly)(f.env.wasm)]}))}))},e.initializeRuntime=function(t){return c(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return g()?(O(),[2,new Promise((function(e,n){p=[e,n];var r={type:"init-ort",in:t};u.postMessage(r)}))]):[3,1];case 1:return[4,d.initRuntime(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.createSessionAllocate=function(t){return c(void 0,void 0,void 0,(function(){return s(this,(function(e){return g()?(O(),[2,new Promise((function(e,n){b.push([e,n]);var r={type:"create_allocate",in:{model:t}};u.postMessage(r,[t.buffer])}))]):[2,d.createSessionAllocate(t)]}))}))},e.createSessionFinalize=function(t,e){return c(void 0,void 0,void 0,(function(){return s(this,(function(n){return g()?(O(),[2,new Promise((function(n,r){w.push([n,r]);var o={type:"create_finalize",in:{modeldata:t,options:e}};u.postMessage(o)}))]):[2,d.createSessionFinalize(t,e)]}))}))},e.createSession=function(t,e){return c(void 0,void 0,void 0,(function(){return s(this,(function(n){return g()?(O(),[2,new Promise((function(n,r){_.push([n,r]);var o={type:"create",in:{model:t,options:e}};u.postMessage(o,[t.buffer])}))]):[2,d.createSession(t,e)]}))}))},e.releaseSession=function(t){return c(void 0,void 0,void 0,(function(){return s(this,(function(e){return g()?(O(),[2,new Promise((function(e,n){x.push([e,n]);var r={type:"release",in:t};u.postMessage(r)}))]):(d.releaseSession(t),[2])}))}))},e.run=function(t,e,n,r,o){return c(void 0,void 0,void 0,(function(){return s(this,(function(a){return g()?(O(),[2,new Promise((function(a,i){T.push([a,i]);var c={type:"run",in:{sessionId:t,inputIndices:e,inputs:n,outputIndices:r,options:o}};u.postMessage(c,d.extractTransferableBuffers(n))}))]):[2,d.run(t,e,n,r,o)]}))}))},e.endProfiling=function(t){return c(void 0,void 0,void 0,(function(){return s(this,(function(e){return g()?(O(),[2,new Promise((function(e,n){S.push([e,n]);var r={type:"end-profiling",in:t};u.postMessage(r)}))]):(d.endProfiling(t),[2])}))}))}},7918:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;var r=n(263),o=n(1497);e.setRunOptions=function(t){var e=(0,r.getInstance)(),n=0,a=[],i=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))i.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error("log serverity level is not valid: ".concat(t.logSeverityLevel));if(void 0===(null==t?void 0:t.logVerbosityLevel))i.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error("log verbosity level is not valid: ".concat(t.logVerbosityLevel));void 0===(null==t?void 0:t.terminate)&&(i.terminate=!1);var c=0;return void 0!==(null==t?void 0:t.tag)&&(c=(0,o.allocWasmString)(t.tag,a)),0===(n=e._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,c))&&(0,o.checkLastError)("Can't create run options."),void 0!==(null==t?void 0:t.extra)&&(0,o.iterateExtraOptions)(t.extra,"",new WeakSet,(function(t,r){var i=(0,o.allocWasmString)(t,a),c=(0,o.allocWasmString)(r,a);0!==e._OrtAddRunConfigEntry(n,i,c)&&(0,o.checkLastError)("Can't set a run config entry: ".concat(t," - ").concat(r,"."))})),[n,a]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),a.forEach((function(t){return e._free(t)})),t}}},6640:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;var i,c,s=n(2806),u=n(2235),l=n(2850),p=n(9544),f=function(){function t(){}return t.prototype.createSessionAllocate=function(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,fetch(t)];case 1:if(200!==(e=r.sent()).status)throw new Error("failed to load model: ".concat(t));return[4,e.arrayBuffer()];case 2:return n=r.sent(),[2,(0,p.createSessionAllocate)(new Uint8Array(n))]}}))}))},t.prototype.loadModel=function(t,e){return r(this,void 0,void 0,(function(){var n,r,f,d,h;return o(this,(function(o){switch(o.label){case 0:return i?[3,2]:(c||(c=(0,p.initializeRuntime)(u.env)),[4,c]);case 1:o.sent(),c=void 0,i=!0,o.label=2;case 2:return"string"!=typeof t?[3,9]:"undefined"!=typeof process&&process.versions&&process.versions.node?[4,(0,l.promisify)(s.readFile)(t)]:[3,5];case 3:return n=o.sent(),[4,(0,p.createSession)(n,e)];case 4:return f=a.apply(void 0,[o.sent(),3]),this.sessionId=f[0],this.inputNames=f[1],this.outputNames=f[2],[3,8];case 5:return[4,this.createSessionAllocate(t)];case 6:return r=o.sent(),[4,(0,p.createSessionFinalize)(r,e)];case 7:d=a.apply(void 0,[o.sent(),3]),this.sessionId=d[0],this.inputNames=d[1],this.outputNames=d[2],o.label=8;case 8:return[3,11];case 9:return[4,(0,p.createSession)(t,e)];case 10:h=a.apply(void 0,[o.sent(),3]),this.sessionId=h[0],this.inputNames=h[1],this.outputNames=h[2],o.label=11;case 11:return[2]}}))}))},t.prototype.dispose=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,(0,p.releaseSession)(this.sessionId)]}))}))},t.prototype.run=function(t,e,n){return r(this,void 0,void 0,(function(){var r,a,i,c,s,l,f=this;return o(this,(function(o){switch(o.label){case 0:return r=[],a=[],Object.entries(t).forEach((function(t){var e=t[0],n=t[1],o=f.inputNames.indexOf(e);if(-1===o)throw new Error("invalid input '".concat(e,"'"));r.push(n),a.push(o)})),i=[],Object.entries(e).forEach((function(t){var e=t[0],n=f.outputNames.indexOf(e);if(-1===n)throw new Error("invalid output '".concat(e,"'"));i.push(n)})),[4,(0,p.run)(this.sessionId,a,r.map((function(t){return[t.type,t.dims,t.data]})),i,n)];case 1:for(c=o.sent(),s={},l=0;l<c.length;l++)s[this.outputNames[i[l]]]=new u.Tensor(c[l][0],c[l][2],c[l][1]);return[2,s]}}))}))},t.prototype.startProfiling=function(){},t.prototype.endProfiling=function(){(0,p.endProfiling)(this.sessionId)},t}();e.OnnxruntimeWebAssemblySessionHandler=f},7622:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;var a=n(263),i=n(1497);e.setSessionOptions=function(t){var e,n,c,s,u,l,p=(0,a.getInstance)(),f=0,d=[],h=t||{};!function(t){t.extra||(t.extra={}),t.extra.session||(t.extra.session={});var e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1"),t.executionProviders&&t.executionProviders.some((function(t){return"webgpu"===("string"==typeof t?t:t.name)}))&&(t.enableMemPattern=!1)}(h);try{var g=function(t){switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error("unsupported graph optimization level: ".concat(t))}}(null!==(c=h.graphOptimizationLevel)&&void 0!==c?c:"all"),y=function(t){switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error("unsupported execution mode: ".concat(t))}}(null!==(s=h.executionMode)&&void 0!==s?s:"sequential"),m="string"==typeof h.logId?(0,i.allocWasmString)(h.logId,d):0,v=null!==(u=h.logSeverityLevel)&&void 0!==u?u:2;if(!Number.isInteger(v)||v<0||v>4)throw new Error("log serverity level is not valid: ".concat(v));var b=null!==(l=h.logVerbosityLevel)&&void 0!==l?l:0;if(!Number.isInteger(b)||b<0||b>4)throw new Error("log verbosity level is not valid: ".concat(b));var w="string"==typeof h.optimizedModelFilePath?(0,i.allocWasmString)(h.optimizedModelFilePath,d):0;if(0===(f=p._OrtCreateSessionOptions(g,!!h.enableCpuMemArena,!!h.enableMemPattern,y,!!h.enableProfiling,0,m,v,b,w))&&(0,i.checkLastError)("Can't create session options."),h.executionProviders&&function(t,e,n){var o,c;try{for(var s=r(e),u=s.next();!u.done;u=s.next()){var l=u.value,p="string"==typeof l?l:l.name;switch(p){case"xnnpack":p="XNNPACK";break;case"webnn":if(p="WEBNN","string"!=typeof l){var f=l;if(null==f?void 0:f.deviceType){var d=(0,i.allocWasmString)("deviceType",n),h=(0,i.allocWasmString)(f.deviceType,n);0!==(0,a.getInstance)()._OrtAddSessionConfigEntry(t,d,h)&&(0,i.checkLastError)("Can't set a session config entry: 'deviceType' - ".concat(f.deviceType,"."))}(null==f?void 0:f.powerPreference)&&(d=(0,i.allocWasmString)("powerPreference",n),h=(0,i.allocWasmString)(f.powerPreference,n),0!==(0,a.getInstance)()._OrtAddSessionConfigEntry(t,d,h)&&(0,i.checkLastError)("Can't set a session config entry: 'powerPreference' - ".concat(f.powerPreference,".")))}break;case"webgpu":p="JS";break;case"wasm":case"cpu":continue;default:throw new Error("not supported execution provider: ".concat(p))}var g=(0,i.allocWasmString)(p,n);0!==(0,a.getInstance)()._OrtAppendExecutionProvider(t,g)&&(0,i.checkLastError)("Can't append execution provider: ".concat(p,"."))}}catch(t){o={error:t}}finally{try{u&&!u.done&&(c=s.return)&&c.call(s)}finally{if(o)throw o.error}}}(f,h.executionProviders,d),h.freeDimensionOverrides)try{for(var _=r(Object.entries(h.freeDimensionOverrides)),x=_.next();!x.done;x=_.next()){var T=o(x.value,2),S=T[0],O=T[1];if("string"!=typeof S)throw new Error("free dimension override name must be a string: ".concat(S));if("number"!=typeof O||!Number.isInteger(O)||O<0)throw new Error("free dimension override value must be a non-negative integer: ".concat(O));var I=(0,i.allocWasmString)(S,d);0!==p._OrtAddFreeDimensionOverride(f,I,O)&&(0,i.checkLastError)("Can't set a free dimension override: ".concat(S," - ").concat(O,"."))}}catch(t){e={error:t}}finally{try{x&&!x.done&&(n=_.return)&&n.call(_)}finally{if(e)throw e.error}}return void 0!==h.extra&&(0,i.iterateExtraOptions)(h.extra,"",new WeakSet,(function(t,e){var n=(0,i.allocWasmString)(t,d),r=(0,i.allocWasmString)(e,d);0!==p._OrtAddSessionConfigEntry(f,n,r)&&(0,i.checkLastError)("Can't set a session config entry: ".concat(t," - ").concat(e,"."))})),[f,d]}catch(t){throw 0!==f&&p._OrtReleaseSessionOptions(f),d.forEach((function(t){return p._free(t)})),t}}},7917:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logLevelStringToEnum=e.tensorTypeToTypedArrayConstructor=e.getTensorElementSize=e.tensorDataTypeEnumToString=e.tensorDataTypeStringToEnum=void 0,e.tensorDataTypeStringToEnum=function(t){switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error("unsupported data type: ".concat(t))}},e.tensorDataTypeEnumToString=function(t){switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error("unsupported data type: ".concat(t))}},e.getTensorElementSize=function(t){return[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t]},e.tensorTypeToTypedArrayConstructor=function(t){switch(t){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("unsupported type: ".concat(t))}},e.logLevelStringToEnum=function(t){switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error("unsupported logging level: ".concat(t))}}},1259:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initRuntime=void 0;var c=n(7918),s=n(7622),u=n(7917),l=n(263),p=n(1497);e.initRuntime=function(t){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return n=t.wasm.numThreads,r=(0,u.logLevelStringToEnum)(t.logLevel),0!==(0,l.getInstance)()._OrtInit(n,r)&&(0,p.checkLastError)("Can't initialize onnxruntime."),[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}var n,r}))}))};var f=new Map;e.createSessionAllocate=function(t){var e=(0,l.getInstance)(),n=e._malloc(t.byteLength);if(0===n)throw new Error("Can't create a session. failed to allocate a buffer of size ".concat(t.byteLength,"."));return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=function(t,e){var n,r=(0,l.getInstance)(),o=0,i=0,c=[],u=[],d=[];try{i=(n=a((0,s.setSessionOptions)(e),2))[0],c=n[1],0===(o=r._OrtCreateSession(t[0],t[1],i))&&(0,p.checkLastError)("Can't create a session.");for(var h=a(function(t){var e=(0,l.getInstance)(),n=e.stackSave();try{var r=e.stackAlloc(8);return 0!==e._OrtGetInputOutputCount(t,r,r+4)&&(0,p.checkLastError)("Can't get session input/output count."),[e.HEAP32[r/4],e.HEAP32[r/4+1]]}finally{e.stackRestore(n)}}(o),2),g=h[0],y=h[1],m=[],v=[],b=0;b<g;b++){var w=r._OrtGetInputName(o,b);0===w&&(0,p.checkLastError)("Can't get an input name."),u.push(w),m.push(r.UTF8ToString(w))}for(b=0;b<y;b++){var _=r._OrtGetOutputName(o,b);0===_&&(0,p.checkLastError)("Can't get an output name."),d.push(_),v.push(r.UTF8ToString(_))}return f.set(o,[o,u,d]),[o,m,v]}catch(t){throw u.forEach((function(t){return r._OrtFree(t)})),d.forEach((function(t){return r._OrtFree(t)})),0!==o&&r._OrtReleaseSession(o),t}finally{r._free(t[0]),0!==i&&r._OrtReleaseSessionOptions(i),c.forEach((function(t){return r._free(t)}))}},e.createSession=function(t,n){var r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=function(t){var e=(0,l.getInstance)(),n=f.get(t);if(!n)throw new Error("cannot release session. invalid session id: ".concat(t));var r=a(n,3),o=r[0],i=r[1],c=r[2];i.forEach((function(t){return e._OrtFree(t)})),c.forEach((function(t){return e._OrtFree(t)})),e._OrtReleaseSession(o),f.delete(t)},e.run=function(t,e,n,i,s){return r(void 0,void 0,void 0,(function(){var r,d,h,g,y,m,v,b,w,_,x,T,S,O,I,A,P,E,k,D,C,R,M,j,B,z,N,L,F,G,U,V,W,H,q,K,Y,X,Z,$,J,Q,tt,et,nt,rt,ot,at;return o(this,(function(o){switch(o.label){case 0:if(r=(0,l.getInstance)(),!(d=f.get(t)))throw new Error("cannot run inference. invalid session id: ".concat(t));h=a(d,3),g=h[0],y=h[1],m=h[2],v=e.length,b=i.length,w=0,_=[],x=[],T=[],o.label=1;case 1:for(o.trys.push([1,,9,10]),ot=a((0,c.setRunOptions)(s),2),w=ot[0],_=ot[1],S=function(t){var e=n[t][0],o=n[t][1],a=n[t][2],i=void 0,c=void 0;if(Array.isArray(a)){c=4*a.length,i=r._malloc(c),T.push(i);for(var s=i/4,l=0;l<a.length;l++){if("string"!=typeof a[l])throw new TypeError("tensor data at index ".concat(l," is not a string"));r.HEAPU32[s++]=(0,p.allocWasmString)(a[l],T)}}else c=a.byteLength,i=r._malloc(c),T.push(i),r.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,c),i);var f=r.stackSave(),d=r.stackAlloc(4*o.length);try{var h=d/4;o.forEach((function(t){return r.HEAP32[h++]=t}));var g=r._OrtCreateTensor((0,u.tensorDataTypeStringToEnum)(e),i,c,d,o.length);0===g&&(0,p.checkLastError)("Can't create tensor for input[".concat(t,"].")),x.push(g)}finally{r.stackRestore(f)}},N=0;N<v;N++)S(N);O=r.stackSave(),I=r.stackAlloc(4*v),A=r.stackAlloc(4*v),P=r.stackAlloc(4*b),E=r.stackAlloc(4*b),o.label=2;case 2:for(o.trys.push([2,,7,8]),k=I/4,D=A/4,C=P/4,R=E/4,N=0;N<v;N++)r.HEAPU32[k++]=x[N],r.HEAPU32[D++]=y[e[N]];for(N=0;N<b;N++)r.HEAPU32[C++]=0,r.HEAPU32[R++]=m[i[N]];return null===(at=r.jsepOnRunStart)||void 0===at||at.call(r,t),M=r._OrtRun(g,A,I,v,E,b,P,w),(j=r.jsepRunPromise)?[4,j]:[3,4];case 3:M=o.sent(),o.label=4;case 4:return(B=r.jsepOnRunEnd)?[4,B(t)]:[3,6];case 5:o.sent(),o.label=6;case 6:for(z=[],0!==M&&(0,p.checkLastError)("failed to call OrtRun()."),N=0;N<b;N++){L=r.HEAPU32[P/4+N],F=r.stackSave(),G=r.stackAlloc(16),U=void 0,V=0;try{for(0!==(M=r._OrtGetTensorData(L,G,G+4,G+8,G+12))&&(0,p.checkLastError)("Can't access output tensor data on index ".concat(N,".")),W=G/4,H=r.HEAPU32[W++],V=r.HEAPU32[W++],q=r.HEAPU32[W++],K=r.HEAPU32[W++],Y=[],X=0;X<K;X++)Y.push(r.HEAPU32[q/4+X]);if(r._OrtFree(q),Z=0===Y.length?1:Y.reduce((function(t,e){return t*e})),"string"===(U=(0,u.tensorDataTypeEnumToString)(H))){for($=[],J=V/4,Q=0;Q<Z;Q++)tt=r.HEAPU32[J++],et=Q===Z-1?void 0:r.HEAPU32[J]-tt,$.push(r.UTF8ToString(tt,et));z.push([U,Y,$])}else nt=(0,u.tensorTypeToTypedArrayConstructor)(U),rt=new nt(Z),new Uint8Array(rt.buffer,rt.byteOffset,rt.byteLength).set(r.HEAPU8.subarray(V,V+rt.byteLength)),z.push([U,Y,rt])}finally{r.stackRestore(F),"string"===U&&V&&r._free(V),r._OrtReleaseTensor(L)}}return[2,z];case 7:return r.stackRestore(O),[7];case 8:return[3,10];case 9:return x.forEach((function(t){return r._OrtReleaseTensor(t)})),T.forEach((function(t){return r._free(t)})),0!==w&&r._OrtReleaseRunOptions(w),_.forEach((function(t){return r._free(t)})),[7];case 10:return[2]}}))}))},e.endProfiling=function(t){var e=(0,l.getInstance)(),n=f.get(t);if(!n)throw new Error("invalid session id");var r=n[0],o=e._OrtEndProfiling(r);0===o&&(0,p.checkLastError)("Can't get an profile file name."),e._OrtFree(o)},e.extractTransferableBuffers=function(t){var e,n,r=[];try{for(var o=i(t),a=o.next();!a.done;a=o.next()){var c=a.value[2];!Array.isArray(c)&&c.buffer&&r.push(c.buffer)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}},263:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;var s,u=a(n(6449)),l=n(932),p=n(3474),f=!1,d=!1,h=!1;e.initializeWebAssembly=function(t){return i(void 0,void 0,void 0,(function(){var e,r,o,a,i,g,y,m,v,b,w;return c(this,(function(c){switch(c.label){case 0:if(f)return[2,Promise.resolve()];if(d)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(h)throw new Error("previous call to 'initializeWebAssembly()' failed.");return d=!0,e=t.initTimeout,r=t.numThreads,o=t.simd,a=r>1&&function(){try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}}(),i=o&&function(){try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}}(),g=t.wasmPaths,y="string"==typeof g?g:void 0,m=function(t,e){return e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm"}(i,a),v="object"==typeof g?g[m]:void 0,b=!1,w=[],e>0&&w.push(new Promise((function(t){setTimeout((function(){b=!0,t()}),e)}))),w.push(new Promise((function(t,e){var r=a?p:l,o={locateFile:function(t,e){return a&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(4154)],{type:"text/javascript"})):t.endsWith(".wasm")?v||(null!=y?y:e)+m:e+t}};if(a)if("undefined"==typeof Blob)o.mainScriptUrlOrBlob=u.join(__dirname,"ort-wasm-threaded.js");else{var i="var ortWasmThreaded=(function(){var _scriptDir;return ".concat(r.toString(),"})();");o.mainScriptUrlOrBlob=new Blob([i],{type:"text/javascript"})}r(o).then((function(e){d=!1,f=!0,s=e,t()}),(function(t){d=!1,h=!0,e(t)}))}))),[4,Promise.race(w)];case 1:if(c.sent(),b)throw new Error("WebAssembly backend initializing failed due to timeout: ".concat(e,"ms"));return[2]}}))}))},e.getInstance=function(){if(f&&s)return s;throw new Error("WebAssembly is not initialized yet.")},e.dispose=function(){var t;!f||d||h||(d=!0,null===(t=s.PThread)||void 0===t||t.terminateAllThreads(),s=void 0,d=!1,f=!1,h=!0)}},1497:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.checkLastError=e.iterateExtraOptions=e.allocWasmString=void 0;var o=n(263);e.allocWasmString=function(t,e){var n=(0,o.getInstance)(),r=n.lengthBytesUTF8(t)+1,a=n._malloc(r);return n.stringToUTF8(t,a,r),e.push(a),a},e.iterateExtraOptions=function(t,n,o,a){if("object"==typeof t&&null!==t){if(o.has(t))throw new Error("Circular reference in options");o.add(t)}Object.entries(t).forEach((function(t){var i=r(t,2),c=i[0],s=i[1],u=n?n+c:c;if("object"==typeof s)(0,e.iterateExtraOptions)(s,u+".",o,a);else if("string"==typeof s||"number"==typeof s)a(u,s.toString());else{if("boolean"!=typeof s)throw new Error("Can't handle extra config type: ".concat(typeof s));a(u,s?"1":"0")}}))},e.checkLastError=function(t){var e=(0,o.getInstance)(),n=e.stackSave();try{var r=e.stackAlloc(8);e._OrtGetLastError(r,r+4);var a=e.HEAP32[r/4],i=e.HEAPU32[r/4+1],c=i?e.UTF8ToString(i):"";throw new Error("".concat(t," ERROR_CODE: ").concat(a,", ERROR_MESSAGE: ").concat(c))}finally{e.stackRestore(n)}}},8050:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(6614),o=n.n(r);function a(){return o()('/*!\n* ONNX Runtime Web v1.17.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n!function(){var e={3838:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGpuBackend=void 0;var c=n(4955),u=n(7771),s=n(8510),l=n(8305),p=function(){function e(){this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.pendingDispatchNumber=0,this.supportTimestampQuery=!1}return Object.defineProperty(e.prototype,"currentKernelCustomData",{get:function(){if(null===this.currentKernelId)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");var e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o;return a(this,(function(a){switch(a.label){case 0:if(!navigator.gpu)throw new Error("WebGpuBackend: WebGPU is not available.");return[4,navigator.gpu.requestAdapter()];case 1:if(!(t=a.sent()))throw new Error("WebGpuBackend: Failed to get GPU adapter.");return this.env=e,n=[],r={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize,maxBufferSize:t.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:t.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:t.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:t.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:t.limits.maxComputeWorkgroupSizeZ},requiredFeatures:n},t.features.has("timestamp-query-inside-passes")&&(this.supportTimestampQuery=!0,n.push("timestamp-query-inside-passes")),t.features.has("shader-f16")&&n.push("shader-f16"),o=this,[4,t.requestDevice(r)];case 2:return o.device=a.sent(),this.gpuDataManager=(0,u.createGpuDataManager)(this),this.programManager=new l.ProgramManager(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,(0,c.configureLogger)(e.logLevel,!!e.debug),this.device.onuncapturederror=function(e){e.error instanceof GPUValidationError&&console.error("An uncaught WebGPU validation error was raised: ".concat(e.error.message))},this.supportTimestampQuery&&(this.profilingQuerySet=this.device.createQuerySet({type:"timestamp",count:2})),Object.defineProperty(this.env.webgpu,"device",{value:this.device}),[2]}}))}))},e.prototype.dispose=function(){},e.prototype.getCommandEncoder=function(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder},e.prototype.getComputePassEncoder=function(){return this.computePassEncoder||(this.computePassEncoder=this.getCommandEncoder().beginComputePass()),this.computePassEncoder},e.prototype.endComputePass=function(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)},e.prototype.flush=function(){this.endComputePass(),this.device.queue.submit([this.getCommandEncoder().finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0},e.prototype.run=function(e,t,n,r,a){if(t.length!==e.inputTypes.length)throw new Error("Input size must be equal to ".concat(e.inputTypes.length,"."));for(var o=[],i=0;i<t.length;++i){if(!(h=this.gpuDataManager.get(t[i].data)))throw new Error("no GPU data for input: ".concat(t[i].data));o[i]=h}var u=function(e,t){var n=t.map((function(e){return"".concat(e.dataType,";").concat(e.dims.join(","))})).join("|"),r=e.name;return e.cacheHint&&(r+="["+e.cacheHint+"]"),r+":"+n}(e,t),s=this.programManager.getArtifact(u),l=s?s.programInfo:"function"==typeof e.get?e.get():e,p=0===n.length?l.outputs.map((function(e,t){return t})):n;if(p.length!==l.outputs.length)throw new Error("Output size ".concat(p.length," must be equal to ").concat(l.outputs.length,"."));var f=[],d=[];for(i=0;i<l.outputs.length;++i){if(!Number.isInteger(p[i])||p[i]<-3||p[i]>=l.outputs.length)throw new Error("Invalid output index: ".concat(p[i]));if(-3!==p[i]){var h,g=-1===p[i],v=-2===p[i],m=g||v?a(l.outputs[i].dataType,l.outputs[i].dims):r(p[i],l.outputs[i].dataType,l.outputs[i].dims);if(!(h=this.gpuDataManager.get(m.data)))throw new Error("no GPU data for output: ".concat(m.data));if(g&&this.temporaryData.push(h),v){var y=this.kernelPersistentData.get(this.currentKernelId);y||(y=[],this.kernelPersistentData.set(this.currentKernelId,y)),y.push(h)}f.push(m),d.push(h)}}var b=this.programManager.normalizeDispatchGroupSize(l.dispatchGroup(t));return s||(s=this.programManager.build(l,b),this.programManager.setArtifact(u,s)),(0,c.LOG_DEBUG)("info",(function(){return\'[ProgramManager] run "\'.concat(l.name,\'" (key=\').concat(u,") with ").concat(b[0],"x").concat(b[1],"x").concat(b[2])})),this.programManager.run(s,t,o,d,b),f},e.prototype.upload=function(e,t){this.gpuDataManager.upload(e,t)},e.prototype.memcpy=function(e,t){this.gpuDataManager.memcpy(e,t)},e.prototype.download=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return a(this,(function(a){switch(a.label){case 0:return[4,this.gpuDataManager.download(e)];case 1:return n=a.sent(),(r=t()).set(new Uint8Array(n,0,r.byteLength)),[2]}}))}))},e.prototype.alloc=function(e){return this.gpuDataManager.create(e).id},e.prototype.free=function(e){return this.gpuDataManager.release(e)},e.prototype.createKernel=function(e,t,n,r){var a=s.WEBGPU_OP_RESOLVE_RULES.get(e);if(!a)throw new Error("kernel not implemented: ".concat(e));this.kernels.set(t,[e,r,a[0],[a[1],n]])},e.prototype.releaseKernel=function(e){var t,n,r=this.kernelPersistentData.get(e);if(r){try{for(var a=o(r),i=a.next();!i.done;i=a.next()){var c=i.value;this.gpuDataManager.release(c.id)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)},e.prototype.computeKernel=function(e,t,n){var r,a,u=this.kernels.get(e);if(!u)throw new Error("kernel not created: ".concat(e));var s=i(u,4),l=s[0],p=s[1],f=s[2],d=s[3];if(null!==this.currentKernelId)throw new Error(\'kernel "[\'.concat(l,"] ").concat(p,\'" is not allowed to be called recursively\'));this.currentKernelId=e,d[0]&&(d[1]=d[0](d[1]),d[0]=void 0),(0,c.LOG_DEBUG)("info",(function(){return\'[WebGPU] Start to run kernel "[\'.concat(l,"] ").concat(p,\'"...\')}));var h=this.env.debug;this.temporaryData=[];try{return h&&this.device.pushErrorScope("validation"),f(t,d[1]),0}catch(e){return(0,c.LOG_DEBUG)("warning",\'[WebGPU] Kernel "[\'.concat(l,"] ").concat(p,\'" failed. Error: \').concat(e)),1}finally{h&&n.push(this.device.popErrorScope().then((function(e){return e?\'GPU validation error for kernel "[\'.concat(l,"] ").concat(p,\'": \').concat(e.message):null})));try{for(var g=o(this.temporaryData),v=g.next();!v.done;v=g.next()){var m=v.value;this.gpuDataManager.release(m.id)}}catch(e){r={error:e}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(r)throw r.error}}this.temporaryData=[],this.currentKernelId=null}},e}();t.WebGpuBackend=p},7675:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;var o=n(7917),i=n(3838),c=n(4955),u=n(6952),s=function(){function e(e,t,n,r){this.module=e,this.dataType=t,this.data=n,this.dims=r}return e.prototype.getFloat32Array=function(){if(1!==this.dataType)throw new Error("Invalid data type");var e=u.ShapeUtil.size(this.dims);return 0===e?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,e)},e.prototype.getBigInt64Array=function(){if(7!==this.dataType)throw new Error("Invalid data type");var e=u.ShapeUtil.size(this.dims);return 0===e?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,e)},e.prototype.getInt32Array=function(){if(6!==this.dataType)throw new Error("Invalid data type");var e=u.ShapeUtil.size(this.dims);return 0===e?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,e)},e.prototype.reshape=function(t){if(u.ShapeUtil.size(t)!==u.ShapeUtil.size(this.dims))throw new Error("Invalid new shape");return new e(this.module,this.dataType,this.data,t)},e}(),l=function(){function e(e,t,n){this.module=e,this.backend=t,this.customDataOffset=0,this.customDataSize=0;var r=e.HEAPU32,a=n>>2;this.opKernelContext=r[a++];var o=r[a++];this.outputCount=r[a++],this.customDataOffset=r[a++],this.customDataSize=r[a++];for(var i=[],c=0;c<o;c++){for(var u=r[a++],l=r[a++],p=r[a++],f=[],d=0;d<p;d++)f.push(r[a++]);i.push(new s(e,u,l,f))}this.inputs=i}return Object.defineProperty(e.prototype,"kernelCustomData",{get:function(){return this.backend.currentKernelCustomData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"customDataBuffer",{get:function(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)},enumerable:!1,configurable:!0}),e.prototype.compute=function(e,t){var n,r,a,i=this,c=null!==(r=null===(n=null==t?void 0:t.inputs)||void 0===n?void 0:n.map((function(e){return"number"==typeof e?i.inputs[e]:e})))&&void 0!==r?r:this.inputs,l=null!==(a=null==t?void 0:t.outputs)&&void 0!==a?a:[];return this.backend.run(e,c,l,(function(e,t,n){return new s(i.module,t,i.output(e,n),n)}),(function(e,t){var n=(0,o.getTensorElementSize)(e);if(!n)throw new Error("Unsupported data type: ".concat(e));var r=n*u.ShapeUtil.size(t);return new s(i.module,e,i.backend.gpuDataManager.create(r).id,t)}))},e.prototype.output=function(e,t){var n=this.module.stackSave();try{var r=this.module.stackAlloc(4*(1+t.length)),a=r>>2;this.module.HEAPU32[a++]=t.length;for(var o=0;o<t.length;o++)this.module.HEAPU32[a++]=t[o];return this.module._JsepOutput(this.opKernelContext,e,r)}finally{this.module.stackRestore(n)}},e}();t.init=function(e,t){return r(void 0,void 0,void 0,(function(){var n,o;return a(this,(function(u){switch(u.label){case 0:if(!(n=e.jsepInit)||!navigator.gpu)return[3,2];if(!t.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using WebGPU EP");return[4,(o=new i.WebGpuBackend).initialize(t)];case 1:u.sent(),n({backend:o},(function(e){return o.alloc(e)}),(function(e){return o.free(e)}),(function(t,n,r,a){if(void 0===a&&(a=!1),a)(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToGpu: src=".concat(t,", dst=").concat(n,", size=").concat(r)})),o.memcpy(t,n);else{(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyCpuToGpu: dataOffset=".concat(t,", gpuDataId=").concat(n,", size=").concat(r)}));var i=e.HEAPU8.subarray(t,t+r);o.upload(n,i)}}),(function(t,n,i){return r(void 0,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToCpu: gpuDataId=".concat(t,", dataOffset=").concat(n,", size=").concat(i)})),[4,o.download(t,(function(){return e.HEAPU8.subarray(n,n+i)}))];case 1:return r.sent(),[2]}}))}))}),(function(n,r,a){return o.createKernel(n,r,a,t.debug||"default"===t.webgpu.profilingMode?e.UTF8ToString(e._JsepGetNodeName(r)):"".concat(r))}),(function(e){return o.releaseKernel(e)}),(function(t,n,r){(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepRun: sessionId=".concat(r.sessionId,", kernel=").concat(t,", contextDataOffset=").concat(n)}));var a=new l(e,o,n);return o.computeKernel(t,a,r.errors)})),u.label=2;case 2:return[2]}}))}))}},4955:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_DEBUG=t.LOG=t.configureLogger=void 0;var o,i,c=n(7917),u=["V","I","W","E","F"];t.configureLogger=function(e,t){o=e,i=t},t.LOG=function(e,t){var n,r,a=(0,c.logLevelStringToEnum)(e);a>=(0,c.logLevelStringToEnum)(o)&&(n=a,r="function"==typeof t?t():t,console.log("[".concat(u[n],",").concat((new Date).toISOString(),"]").concat(r)))},t.LOG_DEBUG=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i&&t.LOG.apply(void 0,a([],r(e),!1))}},6952:function(e,t){"use strict";var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_CLIP=t.MIN_CLIP=t.GemmUtil=t.PoolConvUtil=t.ShapeUtil=t.BroadcastUtil=t.MatMulUtil=void 0;var r=function(){function e(){}return e.calcMatMulShape=function(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]},e}();t.MatMulUtil=r;var a=function(){function e(){}return e.calcShape=function(e,t,a){var o;void 0===a&&(a=!1);var i=e.length,c=t.length;if(0===i)return t;if(0===c)return e;var u=Math.max(e.length,t.length),s=new Array(u);if(a){if(i<2||c<2)return;var l=r.calcMatMulShape([e[i-2],e[i-1]],[t[c-2],t[c-1]]);if(void 0===l)return;o=n(l,2),s[u-2]=o[0],s[u-1]=o[1]}for(var p=a?3:1;p<=u;p++){var f=i-p<0?1:e[i-p],d=c-p<0?1:t[c-p];if(f!==d&&f>1&&d>1)return;s[u-p]=Math.max(f,d)}return s},e.isValidBroadcast=function(e,t){var n=e.length,r=t.length;if(n>r)return!1;for(var a=1;a<=n;a++)if(1!==e[n-a]&&e[n-a]!==t[r-a])return!1;return!0},e}();t.BroadcastUtil=a;var o=function(){function e(){}return e.size=function(t){return e.getSizeFromDimensionRange(t,0,t.length)},e.sizeFromDimension=function(t,n){if(n<0||n>t.length)throw new Error("invalid dimension of ".concat(n," for sizeFromDimension as Tensor has ").concat(t.length," dimensions."));return e.getSizeFromDimensionRange(t,n,t.length)},e.sizeToDimension=function(t,n){if(n<0||n>t.length)throw new Error("invalid dimension of ".concat(n," for sizeToDimension as Tensor has ").concat(t.length," dimensions."));return e.getSizeFromDimensionRange(t,0,n)},e.getSizeFromDimensionRange=function(e,t,n){for(var r=1,a=t;a<n;a++){if(e[a]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");r*=e[a]}return r},e.computeStrides=function(e){var t=e.length;if(0===t)return[];if(1===t)return[1];var n=new Array(t);n[t-1]=1,n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n},e.normalizeAxis=function(e,t){if(e<-t&&e>=t)throw new Error("unsupported axis for this operation.");return e<0?e+t:e},e.normalizeAxes=function(e,t){var n=this;return e.map((function(r){return n.normalizeAxis(r,null!=t?t:e.length)}))},e.sortBasedOnPerm=function(e,t){return t?t.map((function(t){return e[t]})):e.slice().reverse()},e.padShape=function(e,t){var n=e.length;return e.map((function(e,r){return e+t[r]+t[r+n]}))},e.areEqual=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},e}();t.ShapeUtil=o;var i=function(){function e(){}return e.adjustPoolAttributes=function(e,t,n,r,a,o){if(!e&&n.length!==t.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(var i=0;i<t.length-2;i++)i>=n.length?n.push(t[i+2]):n[i]=t[i+2];for(i=0;i<n.length;i++)if(i<r.length){if(r[i]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(i=0;i<n.length;i++)if(i<a.length){if(a[i]<0)throw new Error("dilations should be greater than or equal to 1")}else a.push(1);for(i=0;i<2*n.length;i++)if(i<o.length){if(o[i]<0)throw new Error("pad should be greater than or equal to 1")}else o.push(0);for(i=0;i<n.length;i++){if(n[i]<=0)throw new Error("kernel shapes need to be greater than 0");if(o[i]>=n[i]||o[i+n.length]>=n[i])throw new Error("pads should be smaller than kernel")}},e.adjustPadsBasedOnAutoPad=function(t,n,r,a,o,i,c){if(c){if(o.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(a.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var u=0;u<t.length-2;u++)e.adjustPadAndReturnShape(t[u+(i?1:2)],n[u],r[u],a[u],o,u,u+t.length-2,c)}},e.computePoolOutputShape=function(t,n,r,a,o,i,c){if(n.length<=0)throw new Error("input shape must be of size greater than 0");var u=[n[0],n[1]];return e.computeShapeHelper(t,n,u,r,a,o,i,c),u},e.computeConvOutputShape=function(t,n,r,a,o,i,c){if(t.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var u=[t[0],n[0]];return e.computeShapeHelper(!1,t,u,r,a,o,i,c),u},e.computeShapeHelper=function(t,n,r,a,o,i,c,u){if(t)for(var s=0;s<n.length-2;s++)r.push(1);else for(s=0;s<n.length-2;s++)r.push(e.adjustPadAndReturnShape(n[s+2],a[s],o[s],i[s],c,s,s+n.length-2,u))},e.adjustPadAndReturnShape=function(e,t,n,r,a,o,i,c){var u=n*(r-1)+1;if(!c||"NOTSET"===c)return Math.floor((e+a[o]+a[i]-u)/t+1);switch(c){case"VALID":return a[o]=0,a[i]=0,Math.floor((e-u)/t+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var s=((e+t-1)/t-1)*t+r-e;return a[o]="SAME_LOWER"===c?Math.floor((s+1)/2):Math.floor(s/2),a[i]=s-a[o],Math.floor((e+s-r)/t+1);default:throw new Error("Unsupported AutoPad type")}},e}();t.PoolConvUtil=i;var c=function(){function e(){}return e.getShapeOfGemmResult=function(e,t,n,r,o){if(2!==e.length||2!==n.length)throw new Error("shape need to be of size 2");var i,c,u;t?(i=e[1],c=e[0]):(i=e[0],c=e[1]);var s=-1;if(r?(u=n[0],s=1):(u=n[1],s=0),n[s]!==c)throw new Error("dimension mismatch");if(i<=0||u<=0||c<=0)throw new Error("invalid shape specified");if(o&&!a.isValidBroadcast(o,[i,u]))throw new Error("gemm: invalid bias shape for broadcast");return[i,u,c]},e}();t.GemmUtil=c,t.MIN_CLIP=-34028234663852886e22,t.MAX_CLIP=34028234663852886e22},387:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAttributeWithCacheKey=void 0;var n=function(){function e(e){Object.assign(this,e)}return Object.defineProperty(e.prototype,"cacheKey",{get:function(){var e=this;return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((function(t){return"".concat(e[t])})).join(";")),this._cacheKey},enumerable:!1,configurable:!0}),e}();t.createAttributeWithCacheKey=function(e){return new n(e)}},7771:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},c=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createGpuDataManager=void 0;var u=n(4955),s=n(1163),l=function(e){return 16*Math.ceil(e/16)},p=0,f=function(){function e(e){this.backend=e,this.storageCache=new Map,this.freeBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[]}return e.prototype.upload=function(e,t){var n=t.buffer,r=t.byteOffset,a=t.byteLength,o=l(a),i=this.storageCache.get(e);if(!i)throw new Error("gpu data for uploading does not exist");if(i.originalSize!==a)throw new Error("inconsistent data size. gpu data size=".concat(i.originalSize,", data size=").concat(a));var c=this.backend.device.createBuffer({mappedAtCreation:!0,size:o,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),s=c.getMappedRange();new Uint8Array(s).set(new Uint8Array(n,r,a)),c.unmap();var p=this.backend.getCommandEncoder();this.backend.endComputePass(),p.copyBufferToBuffer(c,0,i.gpuData.buffer,0,o),(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.upload(id=".concat(e,")")})),this.buffersForUploadingPending.push(c)},e.prototype.memcpy=function(e,t){var n=this.storageCache.get(e);if(!n)throw new Error("source gpu data for memcpy does not exist");var r=this.storageCache.get(t);if(!r)throw new Error("destination gpu data for memcpy does not exist");if(n.originalSize!==r.originalSize)throw new Error("inconsistent source and destination gpu data size");var a=l(n.originalSize),o=this.backend.getCommandEncoder();this.backend.endComputePass(),o.copyBufferToBuffer(n.gpuData.buffer,0,r.gpuData.buffer,0,a)},e.prototype.create=function(e,t){void 0===t&&(t=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST);var n,r=l(e);if((t&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){var a=this.freeBuffers.get(r);a||(a=[],this.freeBuffers.set(r,a)),n=a.length>0?a.pop():this.backend.device.createBuffer({size:r,usage:t})}else n=this.backend.device.createBuffer({size:r,usage:t});var o={id:p++,type:s.GpuDataType.default,buffer:n};return this.storageCache.set(o.id,{gpuData:o,originalSize:e}),(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.create(size=".concat(e,") => id=").concat(o.id)})),o},e.prototype.get=function(e){var t;return null===(t=this.storageCache.get(e))||void 0===t?void 0:t.gpuData},e.prototype.release=function(e){var t=this.storageCache.get(e);if(!t)throw new Error("releasing data does not exist");return(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.release(id=".concat(e,"), gpuDataId=").concat(t.gpuData.id)})),this.storageCache.delete(e),this.buffersPending.push(t.gpuData.buffer),t.originalSize},e.prototype.download=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o;return a(this,(function(a){if(!(t=this.storageCache.get(e)))throw new Error("data does not exist");return n=this.backend.getCommandEncoder(),this.backend.endComputePass(),r=l(t.originalSize),o=this.backend.device.createBuffer({size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),n.copyBufferToBuffer(t.gpuData.buffer,0,o,0,r),this.backend.flush(),[2,new Promise((function(e){o.mapAsync(GPUMapMode.READ).then((function(){var t=o.getMappedRange().slice(0);o.destroy(),e(t)}))}))]}))}))},e.prototype.refreshPendingBuffers=function(){var e,t,n,r;try{for(var a=o(this.buffersForUploadingPending),i=a.next();!i.done;i=a.next())(s=i.value).destroy()}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}this.buffersForUploadingPending=[];try{for(var c=o(this.buffersPending),u=c.next();!u.done;u=c.next()){var s;((s=u.value).usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE?this.freeBuffers.get(s.size).push(s):s.destroy()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}this.buffersPending=[]},e.prototype.dispose=function(){this.freeBuffers.forEach((function(e){e.forEach((function(e){e.destroy()}))})),this.storageCache.forEach((function(e){e.gpuData.buffer.destroy()})),this.storageCache=new Map,this.freeBuffers=new Map},e}();t.createGpuDataManager=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(f.bind.apply(f,c([void 0],i(e),!1)))}},8510:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WEBGPU_OP_RESOLVE_RULES=void 0;var i=n(1868),c=o(n(504)),u=n(513),s=n(9770),l=n(7640),p=n(2771),f=n(8856),d=n(8405),h=n(9218),g=n(4271),v=n(1798),m=n(6145),y=n(1522),b=n(3053),w=o(n(5262)),S=n(6031),_=n(4566),x=n(8906),T=n(5101),O=n(6198),I=n(2067),A=n(8699),E=n(2625),C=o(n(9302));t.WEBGPU_OP_RESOLVE_RULES=new Map([["Abs",[C.abs]],["Acos",[C.acos]],["Acosh",[C.acosh]],["Add",[c.add]],["ArgMax",[i.argMax,i.parseArgMinMaxAttributes]],["ArgMin",[i.argMin,i.parseArgMinMaxAttributes]],["Asin",[C.asin]],["Asinh",[C.asinh]],["Atan",[C.atan]],["Atanh",[C.atanh]],["AveragePool",[w.averagePool,w.parseAveragePoolAttributes]],["Cast",[C.cast,C.parseCastAttributes]],["Ceil",[C.ceil]],["ClipV10",[C.clipV10]],["Clip",[C.clip]],["Concat",[u.concat,u.parseConcatAttributes]],["Conv",[s.conv,s.parseConvAttributes]],["ConvTranspose",[l.convTranspose,l.parseConvTransposeAttributes]],["Cos",[C.cos]],["Cosh",[C.cosh]],["Div",[c.div]],["Einsum",[p.einsum,p.parseEinsumAttributes]],["Elu",[C.elu,C.parseAlphaAttributes]],["Equal",[c.equal]],["Erf",[C.erf]],["Exp",[C.exp]],["Expand",[f.expand]],["Floor",[C.floor]],["Gather",[d.gather,d.parseGatherAttributes]],["GatherElements",[h.gatherElements,h.parseGatherElementsAttributes]],["Gelu",[C.gelu]],["Gemm",[g.gemm,g.parseGemmAttributes]],["GlobalAveragePool",[w.globalAveragePool,w.parseGlobalAveragePoolAttributes]],["GlobalMaxPool",[w.globalMaxPool,w.parseGlobalMaxPoolAttributes]],["Greater",[c.greater]],["GreaterOrEqual",[c.greaterOrEqual]],["InstanceNormalization",[v.instanceNorm,v.parseInstanceNormAttributes]],["LayerNormalization",[m.layerNorm,m.parseLayerNormAttributes]],["LeakyRelu",[C.leakyRelu,C.parseAlphaAttributes]],["Less",[c.less]],["LessOrEqual",[c.lessOrEqual]],["Log",[C.log]],["MatMul",[y.matMul]],["MaxPool",[w.maxPool,w.parseMaxPoolAttributes]],["Mul",[c.mul]],["Neg",[C.neg]],["Not",[C.not]],["Pad",[b.pad,b.parsePadAttributes]],["Pow",[c.pow]],["Reciprocal",[C.reciprocal]],["ReduceMin",[S.reduceMin,S.parseReduceAttributes]],["ReduceMean",[S.reduceMean,S.parseReduceAttributes]],["ReduceMax",[S.reduceMax,S.parseReduceAttributes]],["ReduceSum",[S.reduceSum,S.parseReduceAttributes]],["ReduceProd",[S.reduceProd,S.parseReduceAttributes]],["ReduceL1",[S.reduceL1,S.parseReduceAttributes]],["ReduceL2",[S.reduceL2,S.parseReduceAttributes]],["ReduceLogSum",[S.reduceLogSum,S.parseReduceAttributes]],["ReduceLogSumExp",[S.reduceLogSumExp,S.parseReduceAttributes]],["ReduceSumSquare",[S.reduceSumSquare,S.parseReduceAttributes]],["Relu",[C.relu]],["Resize",[_.resize,_.parseResizeAttributes]],["Sigmoid",[C.sigmoid]],["Sin",[C.sin]],["Sinh",[C.sinh]],["Slice",[T.slice,T.parseSliceAttributes]],["SkipLayerNormalization",[x.skipLayerNorm,x.parseSkipLayerNormAttributes]],["Split",[I.split,I.parseSplitAttributes]],["Sqrt",[C.sqrt]],["Softmax",[O.softmax,O.parseSoftmaxAttributes]],["Sub",[c.sub]],["Tan",[C.tan]],["Tanh",[C.tanh]],["ThresholdedRelu",[C.thresholdedRelu,C.parseAlphaAttributes]],["Tile",[A.tile]],["Transpose",[E.transpose,E.parseTransposeAttributes]]])},1427:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.biasActivationSnippet=t.activationFnSnippet=t.typeSnippet=void 0,t.typeSnippet=function(e){switch(e){case 1:return"f32";case 2:return"vec2<f32>";case 3:return"vec3<f32>";case 4:return"vec4<f32>";default:throw new Error("".concat(e,"-component is not supported."))}},t.activationFnSnippet=function(e,t,n,r){return void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=3),""},t.biasActivationSnippet=function(e,t){return"\\n      ".concat(e?"value = value + getBiasByOutputCoords(coords);":"","\\n      ").concat(t?"value = activation(value, coords);":"","\\n      ")}},9456:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConv2DMatMulProgramInfo=void 0;var a=n(4955),o=n(6952),i=n(1163),c=n(1427),u=n(4085),s=n(158);t.createConv2DMatMulProgramInfo=function(e,t,n,l,p,f,d,h,g){var v="NHWC"===n.format,m=v?e[0].dims[3]:e[0].dims[1],y=l[0],b=v?l[2]:l[3],w=v?l[1]:l[2],S=v?l[3]:l[1],_=((m%4==0||m%3==0)&&v||b%4==0&&!v)&&S%4==0,x=v?S:b*w,T=v?b*w:S,O=_?[8,8,1]:[x<=4?4:16,x>4&&T<=4?4:16,1],I=_?[4,4,1]:[x<=4?1:2,x>4&&T<=4?1:2,1],A=[Math.ceil(x/O[0]/I[0]),Math.ceil(T/O[1]/I[1]),Math.ceil(y/O[2]/I[2])];(0,a.LOG_DEBUG)("verbose",(function(){return"[conv2d_mm_webgpu] dispatch = ".concat(A)}));var E=_?v&&m%4!=0?3:4:I[0],C=O[1]*I[1],P=O[0]*I[0],k=Math.max(O[0]*E,O[1]),M=p%C==0,R=f%P==0,D=d%k==0,z=_?[E,4,4]:[1,1,1],B=["@group(0) @binding(0) var<storage, read> x: array<".concat(_&&4===E?"vec4<f32>":"f32",">;"),"@group(0) @binding(1) var<storage, read> w: array<".concat(_?"vec4<f32>":"f32",">;")],G="\\n      fn setOutputAtIndex(flatIndex : i32, value : ".concat(_?"vec4<f32>":"f32",") {\\n        result[flatIndex] = ").concat(_?"vec4<f32>":"f32","(value);\\n      }\\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ").concat(_?"vec4<f32>":"f32",") {\\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\\n        setOutputAtIndex(flatIndex ").concat(_?"/ 4":"",", value);\\n      }");return h&&(B.push("@group(0) @binding(2) var<storage, read> bias: array<".concat(_?"vec4<f32>":"f32",">;")),G+="\\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ".concat(_?"vec4<f32>":"f32"," {\\n          return bias[coords.").concat(v?"w":"y").concat(_?"/ 4":"","];\\n        }")),r(r({},t),{outputs:[{dims:l,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:A[0],y:A[1],z:A[2]}},getShaderSource:function(){return"\\n        ".concat(u.utilFunctions,"\\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\\n        ").concat(B.join(""),"\\n        @group(0) @binding(").concat(B.length,") var<storage, read_write> result: array<").concat(_?"vec4<f32>":"f32",">;\\n        //@group(0) @binding(").concat(B.length+1,") var<uniform> uniforms: Uniforms;\\n\\n        const xShape : vec4<i32> = vec4<i32>(").concat(e[0].dims.join(","),");\\n        const wShape : vec4<i32> = vec4<i32>(").concat(e[1].dims.join(","),");\\n        const outShape : vec4<i32> = vec4<i32>(").concat(l.join(","),");\\n        const outShapeStrides : vec3<i32> = vec3<i32>(").concat(o.ShapeUtil.computeStrides(l).slice(0,3).join(","),");\\n        const filterDims : vec2<i32> = vec2<i32>(").concat(n.kernelShape[0],", ").concat(n.kernelShape[1],");\\n        const pad : vec2<i32> = vec2<i32>(").concat(n.pads[0],", ").concat(n.pads[1],");\\n        const stride : vec2<i32> = vec2<i32>(").concat(n.strides[0],", ").concat(n.strides[1],");\\n        const dilation : vec2<i32> = vec2<i32>(").concat(n.dilations[0],", ").concat(n.dilations[1],");\\n        const dimAOuter : i32 = ").concat(p,";\\n        const dimBOuter : i32 = ").concat(f,";\\n        const dimInner : i32 = ").concat(d,";\\n        ").concat(G,"\\n        ").concat(function(e,t,n,r,a,o,i,u,s,l){void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===u&&(u=4),void 0===s&&(s=4),void 0===l&&(l=4);var p=e?"\\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\\n    ":"\\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\\n    ",f=e?"\\n    let coords = vec4<i32>(\\n      batch,\\n      row / outWidth,\\n      row % outWidth,\\n      col);\\n    ":"\\n    let coords = vec4<i32>(\\n      batch,\\n      row,\\n      col / outWidth,\\n      col % outWidth);\\n    ",d=e?"xShape[1]":"xShape[2]",h=e?"xShape[2]":"xShape[3]",g=e?"row":"col",v=e?"col":"row",m="\\n    let inChannels = wShape[2];\\n    let outWidth = ".concat(e?"outShape[2]":"outShape[3]",";\\n    let outRow = ").concat(g," / outWidth;\\n    let outCol = ").concat(g," % outWidth;\\n\\n    let WRow = ").concat(v," / (filterDims[1] * inChannels);\\n    let WCol = ").concat(v," / inChannels % filterDims[1];\\n    let xRow = outRow * stride[0] + dilation[0] * WRow - pad[0];\\n    let xCol = outCol * stride[1] + dilation[1] * WCol - pad[1];\\n    let xCh = ").concat(v," % inChannels;\\n    var resData = ").concat((0,c.typeSnippet)(u),"(0.0);\\n    // The bounds checking is always needed since we use it to pad zero for\\n    // the \'same\' padding type.\\n    if (xRow >= 0 && xRow < ").concat(d," && xCol >= 0 && xCol < ").concat(h,") {\\n      ").concat(p,"\\n      let xIndex = getIndexFromCoords4D(coord, xShape);\\n      ").concat(function(e){switch(e){case 1:return"resData = x[xIndex];";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = x[xIndex / 4];";default:throw new Error("innerElementSize ".concat(e," is not supported."))}}(u),"\\n    }\\n    return resData;"),y=e?t&&r?"\\n    let col = colIn * ".concat(u,";\\n    ").concat(m):"\\n    let col = colIn * ".concat(u,";\\n    if (row < dimAOuter && col < dimInner) {\\n      ").concat(m,"\\n    }\\n    return ").concat((0,c.typeSnippet)(u),"(0.0);"):r&&n?"\\n    let col = colIn * ".concat(u,";\\n    ").concat(m):"\\n    let col = colIn * ".concat(u,";\\n    if (row < dimInner && col < dimBOuter) {\\n      ").concat(m,"\\n    }\\n    return ").concat((0,c.typeSnippet)(u),"(0.0);"),b="".concat(function(e){switch(e){case 1:return"return w[row * wShape[3] + colIn];";case 4:return"return w[row * wShape[3] / 4 + colIn];";default:throw new Error("innerElementSize ".concat(e," is not supported."))}}(s)),w=(0,c.typeSnippet)(l),S=e?(0,c.typeSnippet)(u):(0,c.typeSnippet)(s),_=e?(0,c.typeSnippet)(s):(0,c.typeSnippet)(u);return"\\n    ".concat((0,c.activationFnSnippet)(o,i,4===l,4),"\\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ").concat(S," {\\n      ").concat(e?y:b,"\\n    }\\n\\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ").concat(_," {\\n      ").concat(e?b:y,"\\n    }\\n\\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ").concat(w,") {\\n      let col = colIn * ").concat(l,";\\n      if (row < dimAOuter && col < dimBOuter)\\n      {\\n      var value = valueIn;\\n      let outWidth = ").concat(e?"outShape[2]":"outShape[3]",";\\n      ").concat(f,"\\n      ").concat((0,c.biasActivationSnippet)(a,o),"\\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\\n      }\\n    }")}(v,M,R,D,h,void 0,!1,z[0],z[1],z[2]),"\\n            ").concat(_?(0,s.makeMatMulPackedVec4Source)(I,O,void 0,!v,k):(0,s.makeMatMulPackedSource)(I,O,void 0,!v,k,!1,void 0,g))}})}},6514:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createConvTranspose2DProgramInfo=void 0;var i=n(4955),c=n(6952),u=n(1163),s=n(2075);t.createConvTranspose2DProgramInfo=function(e,t,n,l){var p=e.length>2,f=n.outputShape,d=c.ShapeUtil.size(f),h=[Math.ceil(d/64),1,1];return(0,i.LOG_DEBUG)("verbose",(function(){return"[conv2d_backprop_webgpu] dispatch = ".concat(h)})),r(r({},t),{outputs:[{dims:l?l(f):f,dataType:e[0].dataType,gpuDataType:u.GpuDataType.default}],dispatchGroup:function(){return{x:h[0],y:h[1],z:h[2]}},getShaderSource:function(t){return function(e,t,n,r,i,u,l){void 0===l&&(l=!1);var p="NHWC"===n.format,f=p?1:2,d=p?2:3,h=p?3:1,g=c.ShapeUtil.size(r),v=l?2:1,m=n.group,y=t[1].dims,b=y[0]/m,w=y[1],S="\\n  fn setOutputAtIndex(flatIndex : u32, value : ".concat(l?"vec4<f32>":"f32",") {\\n    result[flatIndex] = ").concat(l?"vec4<f32>":"f32","(value);\\n  }");i&&(S+="\\n    fn getBiasByOutputCoords(coords : vec4<u32>) -> ".concat(l?"vec4<f32>":"f32"," {\\n      return bias[coords.").concat(p?"w":"y").concat(l?"/ 4":"","];\\n    }"));var _=l?4:1,x=(0,s.inputVariable)("W",t[1].dataType,t[1].dims,_),T=(0,s.inputVariable)("Dy",t[0].dataType,t[0].dims,_),O=[T,x];i&&O.push((0,s.inputVariable)("bias",t[2].dataType,[r[h]],_));var I=(0,s.outputVariable)("result",t[0].dataType,r,_),A="{\\n        let batch: u32 = ".concat(u?"global_id.z":"workgroup_id.z"," / outShape[1];\\n        let r = ").concat(u?"global_id.z":"workgroup_id.z"," % outShape[1];\\n        let c = ").concat(u?"global_id.y":"workgroup_id.y"," * ").concat(v,";\\n        let d1: u32 = ").concat(u?"global_id.x":"workgroup_id.x"," * 4;\\n\\n        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(pads);\\n\\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\\n        // ? = to be determined. : = across all values in that axis.\\n        var dotProd: array<vec4<f32>, ").concat(v,">;\\n        for (var i = 0; i < ").concat(v,"; i++) {\\n          dotProd[i] = vec4<f32>(0.0);\\n        }\\n        for (var wR: u32 = 0; wR < filterDims[0]; wR = wR + 1) {\\n          var dyR = (f32(dyCorner.x) + f32(wR)) / f32(strides.x);\\n          let wRPerm = filterDims[0] - 1 - wR;\\n          if (dyR < 0.0 || dyR >= f32(outBackprop[1]) ||\\n              fract(dyR) > 0.0 || wRPerm < 0) {\\n            continue;\\n          }\\n          let idyR: u32 = u32(dyR);\\n\\n          for (var wC: u32 = 0; wC < filterDims[1]; wC = wC + 1) {\\n            let dyC = (f32(dyCorner.y) + f32(wC)) / f32(strides.y);\\n            let dyC2 = (f32(dyCorner.y) + 1.0 + f32(wC)) / f32(strides.y);\\n            let wCPerm = filterDims[1] - 1 - wC;\\n            if (wCPerm < 0) {\\n              continue;\\n            }\\n            var bDyCVal = true;\\n            var bDyCVal2 = true;\\n            if (dyC < 0.0 || dyC >= f32(outBackprop[2]) ||\\n                fract(dyC) > 0.0) {\\n              bDyCVal = false;\\n            }\\n            if (dyC2 < 0.0 || dyC2 >= f32(outBackprop[2]) ||\\n                fract(dyC2) > 0.0) {\\n              bDyCVal2 = false;\\n            }\\n\\n            let idyC: u32 = u32(dyC);\\n            let idyC2: u32 = u32(dyC2);\\n            if (bDyCVal && bDyCVal2) {\\n              let d2Length = outBackprop[3];\\n              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {\\n                let wValue0 = ").concat(x.get("u32(wRPerm)","u32(wCPerm)","d1","d2"),";\\n                let wValue1 = ").concat(x.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2"),";\\n                let wValue2 = ").concat(x.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2"),";\\n                let wValue3 = ").concat(x.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2"),";\\n\\n                var xValue = ").concat(T.get("batch","idyR","idyC","d2"),";\\n                let tmpval = vec4<f32>(dot(xValue, wValue0),\\n                                      dot(xValue, wValue1),\\n                                      dot(xValue, wValue2),\\n                                      dot(xValue, wValue3));\\n                dotProd[0] = dotProd[0] + tmpval;\\n\\n                xValue =  ").concat(T.get("batch","idyR","idyC2","d2"),";\\n\\n                dotProd[1] = dotProd[1] + vec4<f32>(dot(xValue, wValue0),\\n                                                    dot(xValue, wValue1),\\n                                                    dot(xValue, wValue2),\\n                                                    dot(xValue, wValue3));\\n              }\\n            } else if (bDyCVal) {\\n              let d2Length = outBackprop[").concat(h,"];\\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\\n                let wValue0 = ").concat(x.get("u32(wRPerm)","u32(wCPerm)","d1","d2"),";\\n                let wValue1 = ").concat(x.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2"),";\\n                let wValue2 = ").concat(x.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2"),";\\n                let wValue3 = ").concat(x.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2"),";\\n\\n                var xValue = ").concat(T.get("batch","idyR","idyC","d2"),";\\n                let tmpval = vec4<f32>(dot(xValue, wValue0),\\n                                      dot(xValue, wValue1),\\n                                      dot(xValue, wValue2),\\n                                      dot(xValue, wValue3));\\n                dotProd[0] = dotProd[0] + tmpval;\\n              }\\n            } else if (bDyCVal2) {\\n              let d2Length = outBackprop[3];\\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\\n                let wValue0 = ").concat(x.get("u32(wRPerm)","u32(wCPerm)","d1","d2"),";\\n                let wValue1 = ").concat(x.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2"),";\\n                let wValue2 = ").concat(x.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2"),";\\n                let wValue3 = ").concat(x.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2"),";\\n\\n                var xValue = ").concat(T.get("batch","idyR","idyC2","d2"),";\\n                let tmpval = vec4<f32>(dot(xValue, wValue0),\\n                                      dot(xValue, wValue1),\\n                                      dot(xValue, wValue2),\\n                                      dot(xValue, wValue3));\\n                dotProd[1] = dotProd[1] + tmpval;\\n              }\\n            }\\n          }\\n        }\\n\\n        for (var i: u32 = 0; i < ").concat(v,"; i = i + 1) {\\n          let value = dotProd[i] + ").concat(i?"bias[c+i]":"0.0",";\\n          ").concat(I.set("batch","r","c + i","d1","value"),";\\n        }\\n      }"),E="\\n          let outputIndices = ".concat(I.offsetToIndices("global_idx"),";\\n          let batch = ").concat(I.indicesGet("outputIndices",0),";\\n          let d1 = ").concat(I.indicesGet("outputIndices",h),";\\n          let r = ").concat(I.indicesGet("outputIndices",f),";\\n          let c = ").concat(I.indicesGet("outputIndices",d),";\\n          let dyCorner = vec2<i32>(i32(r), i32(c)) - pads;\\n          let dyRCorner = dyCorner.x;\\n          let dyCCorner = dyCorner.y;\\n          let groupId = d1 / ").concat(w,";\\n          let wOutChannel = d1 - groupId * ").concat(w,";\\n          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\\n          // ? = to be determined. : = across all values in that axis.\\n          var dotProd = 0.0;\\n          for (var wR: u32 = 0; wR < effectiveFilterDims.x; wR = wR + 1) {\\n            if (wR % dilations.x != 0) {\\n              continue;\\n            }\\n            let dyR = (f32(dyRCorner) + f32(wR)) / f32(strides[0]);\\n            let wRPerm = filterDims.x - 1 - wR / dilations.x;\\n            if (dyR < 0.0 || dyR >= f32(outBackprop[").concat(f,"]) || fract(dyR) > 0.0 ||\\n                wRPerm < 0) {\\n              continue;\\n            }\\n            let idyR: u32 = u32(dyR);\\n\\n            for (var wC: u32 = 0; wC < effectiveFilterDims.y; wC = wC + 1) {\\n              if (wC % dilations.y != 0) {\\n                continue;\\n              }\\n              let dyC = (f32(dyCCorner) + f32(wC)) / f32(strides.y);\\n              let wCPerm = filterDims.y - 1 - wC / dilations.y;\\n              if (dyC < 0.0 || dyC >= f32(outBackprop[").concat(d,"]) ||\\n                  fract(dyC) > 0.0 || wCPerm < 0) {\\n                continue;\\n              }\\n              let idyC: u32 = u32(dyC);\\n\\n              for (var d2: u32 = 0; d2 < ").concat(b,"; d2 = d2 + 1) {\\n                let inputChannel = groupId * ").concat(b," + d2;\\n                let xValue = ").concat(p?T.get("batch","idyR","idyC","inputChannel"):T.get("batch","inputChannel","idyR","idyC"),";\\n                let wValue = ").concat(x.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)"),";\\n                dotProd = dotProd + xValue * wValue;\\n              }\\n            }\\n          }\\n          let value = dotProd + ").concat(i?"bias[d1]":"0.0",";\\n          ").concat(I.setByOffset("global_idx","value"),";\\n        ");return"\\n  ".concat(e.declareVariables.apply(e,o(o([],a(O),!1),[I],!1)),"\\n  ").concat(S,"\\n  const outShape : vec4<u32> = vec4<u32>(").concat(r.join(","),");\\n  const outBackprop : vec4<u32> = vec4<u32>(").concat(t[0].dims.join(","),");\\n  const strides : vec2<u32> = vec2<u32>(").concat(n.strides[0],", ").concat(n.strides[1],");\\n  const filterDims : vec2<u32> = vec2<u32>(").concat(n.kernelShape[p?1:2],", ").concat(n.kernelShape[p?2:3],");\\n  const dilations : vec2<u32> = vec2<u32>(").concat(n.dilations[0],", ").concat(n.dilations[1],");\\n  const effectiveFilterDims : vec2<u32> = filterDims + vec2<u32>(\\n          ").concat(n.dilations[0]<=1?0:(n.kernelShape[p?1:2]-1)*(n.dilations[0]-1),",\\n          ").concat(n.dilations[1]<=1?0:(n.kernelShape[p?2:3]-1)*(n.dilations[1]-1),");\\n  const pads : vec2<i32> = vec2<i32>(i32(effectiveFilterDims[0]) - 1 - (").concat(n.pads[0]+n.pads[2],")/2,\\n                                     i32(effectiveFilterDims[1]) - 1 - (").concat(n.pads[1]+n.pads[3],")/2);\\n    ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(g),";\\n  ").concat(l?A:E,"}")}(t,e,n,f,p,1===h[1]&&1===h[2])}})}},4085:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utilFunctions=void 0,t.utilFunctions="\\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\\n  return dot(coords, vec4<i32>(\\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\\n}\\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\\n  return dot(coords, vec4<i32>(\\n    outShapeStrides.x, outShapeStrides.y, outShapeStrides.z, 1));\\n}\\n"},158:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createMatmulProgramInfo=t.makeMatMulPackedSource=t.makeMatMulPackedVec4Source=void 0;var i=n(6952),c=n(1163),u=n(2075),s=n(3997),l=n(1427);t.makeMatMulPackedVec4Source=function(e,t,n,r,a,o,i){void 0===r&&(r=!1),void 0===a&&(a=32),void 0===o&&(o=!1),void 0===i&&(i=32);var c=t[1]*e[1],u=t[0]*e[0],s=r?c:a,l=r?a:c,p=s/t[0],f=a/t[1];if((!r||4!==p||4!==e[1])&&(r||3!==p&&4!==p)||s%t[0]!=0||a%t[1]!=0||4!==e[0])throw new Error("If transposeA ".concat(r," is true, innerElementSize ").concat(p," and workPerThread[1] ").concat(e[1]," must be 4.\\n      Otherwise, innerElementSize ").concat(p," must be 3 or 4.\\n  tileAWidth ").concat(s," must be divisible by workgroupSize[0]").concat(t[0],". tileInner ").concat(a," must be divisible by workgroupSize[1] ").concat(t[1],". colPerThread ").concat(e[0]," must be 4."));return"\\nvar<workgroup> mm_Asub : array<array<vec".concat(p,"<f32>, ").concat(s/p,">, ").concat(l,">;\\nvar<workgroup> mm_Bsub : array<array<vec4<f32>, ").concat(u/e[0],">, ").concat(a,">;\\n\\nconst rowPerThread = ").concat(e[1],";\\nconst colPerThread = ").concat(e[0],";\\nconst innerElementSize = ").concat(p,";\\nconst tileInner = ").concat(a,";\\n\\n@compute @workgroup_size(").concat(t[0],", ").concat(t[1],", ").concat(t[2],")\\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\\n        @builtin(global_invocation_id) globalId : vec3<u32>,\\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\\n  let localRow = i32(localId.y);\\n  let tileRow = localRow * rowPerThread;\\n  let tileCol = i32(localId.x);\\n\\n  let globalRow =i32(globalId.y) * rowPerThread;\\n  let globalCol = i32(globalId.x);\\n  let batch = ").concat(o?"0":"i32(globalId.z)",";\\n  ").concat(n?"let batchIndices = ".concat(n.offsetToIndices("u32(batch)"),";"):"","\\n  let globalRowStart = i32(workgroupId.y) * ").concat(c,";\\n\\n  let numTiles = ").concat(o?"".concat(Math.ceil(i/a)):"(dimInner - 1) / tileInner + 1",";\\n  var kStart = ").concat(o?"i32(globalId.z) * ".concat(i):"0",";\\n\\n  var acc: array<vec4<f32>, rowPerThread>;\\n\\n  // Loop over shared dimension.\\n  let tileRowB = localRow * ").concat(f,";\\n  for (var t = 0; t < numTiles; t = t + 1) {\\n      // Load one tile of A into local memory.\\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n          let inputRow = tileRow + innerRow;\\n          let inputCol = tileCol;\\n          ").concat(function(e,t){return e?"\\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\\n          kStart + inputRow,\\n          globalRowStart / innerElementSize + inputCol".concat(t?", batchIndices":"",");\\n        "):"\\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\\n          globalRow + innerRow,\\n          kStart / innerElementSize + inputCol".concat(t?", batchIndices":"",");\\n        ")}(r,n),"\\n      }\\n\\n      // Load one tile of B into local memory.\\n      for (var innerRow = 0; innerRow < ").concat(f,"; innerRow = innerRow + 1) {\\n          let inputRow = tileRowB + innerRow;\\n          let inputCol = tileCol;\\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol").concat(n?", batchIndices":"",");\\n      }\\n      kStart = kStart + tileInner;\\n      workgroupBarrier();\\n\\n      // Compute acc values for a single thread.\\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\\n          ").concat(3===p?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];","\\n\\n          ").concat(function(e,t){return e?"\\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\\n        ".concat(3===t?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];","\\n        for (var i = 0; i < rowPerThread; i = i + 1) {\\n          acc[i] = BCached0 * ACached0[i] + acc[i];\\n          acc[i] = BCached1 * ACached1[i] + acc[i];\\n          acc[i] = BCached2 * ACached2[i] + acc[i];\\n          ").concat(3===t?"":"acc[i] = BCached3 * ACached3[i] + acc[i];","\\n        }"):"\\n        for (var i = 0; i < rowPerThread; i = i + 1) {\\n          let ACached = mm_Asub[tileRow + i][k];\\n          acc[i] = BCached0 * ACached.x + acc[i];\\n          acc[i] = BCached1 * ACached.y + acc[i];\\n          acc[i] = BCached2 * ACached.z + acc[i];\\n          ".concat(3===t?"":"acc[i] = BCached3 * ACached.w + acc[i];","\\n        }")}(r,p),"\\n      }\\n\\n      workgroupBarrier();\\n  }\\n\\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\\n  }\\n}")};var p=function(e,t){return e?"\\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\\n              kStart + inputRow,\\n              globalRowStart + inputCol".concat(t?", batchIndices":"",");\\n            "):"\\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\\n              globalRowStart + inputRow,\\n              kStart + inputCol".concat(t?", batchIndices":"",");\\n            ")};t.makeMatMulPackedSource=function(e,t,n,r,a,o,i,c){void 0===r&&(r=!1),void 0===a&&(a=32),void 0===o&&(o=!1),void 0===i&&(i=32),void 0===c&&(c=!1);var u=e[1]*t[1],s=e[0]*t[0],l=r?u:a,f=r?a:u;if(f%t[1]!=0||l%t[0]!=0||a%t[1]!=0)throw new Error("tileAHight ".concat(f," must be divisible by workgroupSize[1]").concat(t[1],", tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(t[0],", tileInner ").concat(a," must be divisible by workgroupSize[1]").concat(t[1]));var d=f/t[1],h=l/t[0],g=a/t[1],v=c?"\\n    let localRow = i32(localId.y);\\n    let localCol = i32(localId.x);\\n    let globalRowStart = i32(workgroupId.y) * ".concat(u,";\\n    let globalColStart = i32(workgroupId.x) * ").concat(s,";\\n\\n    // Loop over shared dimension.\\n    for (var t = 0; t < numTiles; t = t + 1) {\\n      // Load one tile of A into local memory.\\n      for (var inputRow = localRow; inputRow < ").concat(f,"; inputRow = inputRow + ").concat(t[1],") {\\n        for (var inputCol = localCol; inputCol < ").concat(l,"; inputCol = inputCol + ").concat(t[0],") {\\n          ").concat(p(r,n),"\\n        }\\n      }\\n      // Load one tile of B into local memory.\\n      for (var inputRow = localRow; inputRow < ").concat(a,"; inputRow = inputRow + ").concat(t[1],") {\\n            for (var inputCol = localCol; inputCol < ").concat(s,"; inputCol = inputCol + ").concat(t[0],") {\\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\\n            kStart + inputRow,\\n            globalColStart + inputCol").concat(n?", batchIndices":"",");\\n        }\\n      }\\n      kStart = kStart + tileInner;\\n      workgroupBarrier();\\n\\n      // Compute acc values for a single thread.\\n      var BCached : array<f32, colPerThread>;\\n      for (var k = 0; k < tileInner; k = k + 1) {\\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\\n          BCached[inner] = mm_Bsub[k][localCol + inner * ").concat(t[0],"];\\n        }\\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n          let ACached = ").concat(r?"mm_Asub[k][localRow + innerRow * ".concat(t[1],"];"):"mm_Asub[localRow + innerRow * ".concat(t[1],"][k];"),"\\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\\n                ACached * BCached[innerCol];\\n          }\\n        }\\n      }\\n      workgroupBarrier();\\n    }\\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n      let gRow = globalRowStart + localRow + innerRow * ").concat(t[1],";\\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n        let gCol = globalColStart + localCol + innerCol * ").concat(t[0],";\\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\\n      }\\n    }\\n    "):"\\nlet tileRow = i32(localId.y) * rowPerThread;\\nlet tileCol = i32(localId.x) * colPerThread;\\n\\nlet globalRow = i32(globalId.y) * rowPerThread;\\nlet globalCol = i32(globalId.x) * colPerThread;\\nlet globalRowStart = i32(workgroupId.y) * ".concat(u,";\\n\\nlet tileRowA = i32(localId.y) * ").concat(d,";\\nlet tileColA = i32(localId.x) * ").concat(h,";\\nlet tileRowB = i32(localId.y) * ").concat(g,";\\n// Loop over shared dimension.\\nfor (var t = 0; t < numTiles; t = t + 1) {\\n  // Load one tile of A into local memory.\\n  for (var innerRow = 0; innerRow < ").concat(d,"; innerRow = innerRow + 1) {\\n    for (var innerCol = 0; innerCol < ").concat(h,"; innerCol = innerCol + 1) {\\n      let inputRow = tileRowA + innerRow;\\n      let inputCol = tileColA + innerCol;\\n      ").concat(p(r,n),"\\n    }\\n  }\\n\\n  // Load one tile of B into local memory.\\n  for (var innerRow = 0; innerRow < ").concat(g,"; innerRow = innerRow + 1) {\\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n      let inputRow = tileRowB + innerRow;\\n      let inputCol = tileCol + innerCol;\\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\\n        kStart + inputRow,\\n        globalCol + innerCol").concat(n?", batchIndices":"",");\\n    }\\n  }\\n  kStart = kStart + tileInner;\\n  workgroupBarrier();\\n\\n  // Compute acc values for a single thread.\\n  var BCached : array<f32, colPerThread>;\\n  for (var k = 0; k < tileInner; k = k + 1) {\\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\\n    }\\n\\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n      ").concat(function(e){return e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];"}(r),"\\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\\n      }\\n    }\\n  }\\n\\n  workgroupBarrier();\\n}\\n\\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\\n        acc[innerRow][innerCol]);\\n  }\\n}\\n");return"\\n  var<workgroup> mm_Asub : array<array<f32, ".concat(l,">, ").concat(f,">;\\n  var<workgroup> mm_Bsub : array<array<f32, ").concat(s,">, ").concat(a,">;\\n  const rowPerThread = ").concat(e[1],";\\n  const colPerThread = ").concat(e[0],";\\n  const tileInner = ").concat(a,";\\n\\n@compute @workgroup_size(").concat(t[0],", ").concat(t[1],", ").concat(t[2],")\\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\\n        @builtin(global_invocation_id) globalId : vec3<u32>,\\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\\n    let batch = ").concat(o?"0":"i32(globalId.z)",";\\n    ").concat(n?"let batchIndices = ".concat(n.offsetToIndices("u32(batch)"),";"):"","\\n    let numTiles = ").concat(o?"".concat(Math.ceil(i/a)):"(dimInner - 1) / tileInner + 1",";\\n    var kStart = ").concat(o?"i32(globalId.z) * ".concat(i):"0",";\\n\\n    var acc : array<array<f32, colPerThread>, rowPerThread>;\\n\\n    // Without this initialization strange values show up in acc.\\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n        acc[innerRow][innerCol] = 0.0;\\n      }\\n    }\\n    ").concat(v,"\\n  }\\n")},t.createMatmulProgramInfo=function(e,n,p,f,d){var h=n[0].dims,g=n[1].dims,v=h.slice(0,-2),m=g.slice(0,-2),y=d?d.slice(0,-2):f.slice(0,-2),b=(0,u.inputVariable)("batchDims",n[0].dataType,y),w=[(0,u.inputVariable)("batchADims",n[0].dataType,v),(0,u.inputVariable)("batchBDims",n[0].dataType,m),b],S=i.ShapeUtil.size(y),_=h[h.length-2],x=h[h.length-1],T=g[g.length-1],O=x%4==0&&T%4==0,I=(0,s.getActicationSnippet)(p),A=I.activationFunction,E=I.applyActivation,C=_<=8?[4,1,1]:[4,4,1],P=[8,8,1],k=[Math.ceil(T/P[0]/C[0]),Math.ceil(_/P[1]/C[1]),Math.ceil(S/P[2]/C[2])],M=O?4:1,R=(0,u.inputVariable)("a",n[0].dataType,o(o([],a(v),!1),[_,x/M],!1),M),D=(0,u.inputVariable)("b",n[1].dataType,o(o([],a(m),!1),[x,T/M],!1),M),z=(0,u.outputVariable)("result",n[0].dataType,[S,_,T/M],M);w.push(R),w.push(D),w.push(z);var B=[R,D],G=n.length>2,j=function(e,t,n,r){var a=r[0],o=r[1],i=r[2],c=r[3],s=r[4],p=r[5],f=(0,u.getBroadcastDims)(a.shape,i.shape),d=(0,u.getBroadcastDims)(o.shape,i.shape);return"\\n    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ".concat(i.type.indices,") -> ").concat((0,l.typeSnippet)(e)," {\\n      var value = ").concat((0,l.typeSnippet)(e),"(0.0);\\n      let col = colIn * ").concat(e,";\\n      if(row < dimAOuter && col < dimInner)\\n      {\\n        ").concat(function(){for(var e=c.shape.length,t=i.shape.length,n="var aIndices: ".concat(c.type.indices,";"),r=e-2-1,a=t-1;r>=0;r--,a--)n+="\\naIndices[".concat(r,"] = ").concat(t>1?"batchIndices[".concat(a,"]"):"batchIndices",";");return f.forEach((function(e){n+="\\naIndices[".concat(e,"] = 0;")})),n+="\\naIndices[".concat(e-2,"] = u32(row);\\n                   aIndices[").concat(e-1,"] = u32(colIn);")}(),"\\n        value = ").concat(c.getByIndices("aIndices"),";\\n      }\\n      return value;\\n    }\\n\\n    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ").concat(i.type.indices,") -> ").concat((0,l.typeSnippet)(e)," {\\n      var value = ").concat((0,l.typeSnippet)(e),"(0.0);\\n      let col = colIn * ").concat(e,";\\n      if(row < dimInner && col < dimBOuter)\\n      {\\n        ").concat(function(){for(var e=s.shape.length,t=i.shape.length,n="var bIndices: ".concat(s.type.indices,";"),r=e-2-1,a=t-1;r>=0;r--,a--)n+="\\nbIndices[".concat(r,"] = ").concat(t>1?"batchIndices[".concat(a,"]"):"batchIndices",";");return d.forEach((function(e){n+="\\nbIndices[".concat(e,"] = 0;")})),n+="\\nbIndices[".concat(e-2,"] = u32(row);\\n                   bIndices[").concat(e-1,"] = u32(colIn);")}(),"\\n        value = ").concat(s.getByIndices("bIndices"),";\\n      }\\n      return value;\\n    }\\n\\n    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ").concat((0,l.typeSnippet)(e),") {\\n      let col = colIn * ").concat(e,";\\n      if (row < dimAOuter && col < dimBOuter) {\\n        var value = valueIn;\\n        let coords = vec3<i32>(batch, row, colIn);\\n        ").concat(t?"value = value + bias[colIn];":"","\\n        ").concat(n,"\\n        ").concat(p.setByIndices("vec3<u32>(coords)","value"),"\\n      }\\n    }\\n    ")}(M,G,E,w);return G&&B.push((0,u.inputVariable)("bias",n[2].dataType,[T/M],M)),r(r({},e),{outputs:[{dims:f,dataType:n[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(e){return"\\n  const dimAOuter: i32 = ".concat(_,";\\n  const dimBOuter: i32 = ").concat(T,";\\n  const dimInner: i32 = ").concat(x,";\\n  ").concat(e.declareVariables.apply(e,o(o([],a(B),!1),[z],!1)),"\\n  ").concat(j,"\\n  ").concat(A,"\\n  ").concat(O?(0,t.makeMatMulPackedVec4Source)(C,P,b):(0,t.makeMatMulPackedSource)(C,P,b),"\\n                   ").concat(b.impl())},dispatchGroup:function(){return{x:k[0],y:k[1],z:k[2]}}})}},1868:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseArgMinMaxAttributes=t.argMax=t.argMin=void 0;var a=n(387),o=n(1163),i=n(6031),c=function(e){if(!e||0===e.length||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(1!==e[0].dataType)throw new Error("Invalid input type.")},u=function(e,t,n,c){var u=1===e.length?n:function(e,t){return(0,a.createAttributeWithCacheKey)({axis:t.axis,keepDims:t.keepDims,selectLastIndex:t.selectLastIndex})}(0,n),s=u.cacheKey+e.map((function(e){return e.dims.toString()})).join("_"),l={name:t,inputTypes:[o.GpuDataType.default],cacheHint:s};return r(r({},l),{get:function(){return(0,i.createReduceProgramInfo)(l,[e[0]],c,[u.axis],7,u.keepDims)}})};t.argMin=function(e,t){c(e.inputs),e.compute(u(e.inputs,"ArgMin",t,(function(e,n,r){for(var a=[],o=0;o<e.shape.length;o++)(r.indexOf(o)>=0||0===r.length)&&a.push("inputIndices[".concat(o,"] = 0;"));return["".concat(a.join("\\n")),"var value = ".concat(e.getByOffset("inputOffset"),";\\nvar bestIndex : i32 = 0;"),"if (".concat(e.getByOffset("inputOffset")," ").concat(t.selectLastIndex>0?"<=":"<"," value) {\\n         value = ").concat(e.getByOffset("inputOffset"),";\\n         bestIndex = i32(lastIndex);\\n       }"),"",n.setByOffset("global_idx","bestIndex")]})),{inputs:[0]})},t.argMax=function(e,t){c(e.inputs),e.compute(u(e.inputs,"argMax",t,(function(e,n,r){for(var a=[],o=0;o<e.shape.length;o++)(r.indexOf(o)>=0||0===r.length)&&a.push("inputIndices[".concat(o,"] = 0;"));return["".concat(a.join("\\n")),"var value = ".concat(e.getByOffset("inputOffset"),";\\nvar bestIndex : i32 = 0;"),"if (".concat(e.getByOffset("inputOffset")," ").concat(t.selectLastIndex>0?">=":">"," value) {\\n         value = ").concat(e.getByOffset("inputOffset"),";\\n         bestIndex = i32(lastIndex);\\n       }"),"",n.setByOffset("global_idx","bestIndex")]})),{inputs:[0]})},t.parseArgMinMaxAttributes=function(e){return(0,a.createAttributeWithCacheKey)(e)}},504:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.lessOrEqual=t.greaterOrEqual=t.less=t.greater=t.sub=t.pow=t.mul=t.equal=t.div=t.add=void 0;var a=n(6952),o=n(1163),i=n(2075),c=function(e,t,n,c,u,s){var l={name:t,inputTypes:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:u};return r(r({},l),{get:function(){return function(e,t,n,c,u,s){var l,p;void 0===s&&(s=t.dataType);var f=!a.ShapeUtil.areEqual(t.dims,n.dims),d=t.dims,h=a.ShapeUtil.size(t.dims),g=!1;if(f){var v=a.BroadcastUtil.calcShape(t.dims,n.dims,!1);if(!v)throw new Error("Can\'t perform binary op on the given tensors");d=v,h=a.ShapeUtil.size(d);for(var m=1===a.ShapeUtil.size(t.dims),y=1===a.ShapeUtil.size(n.dims),b=1,w=1;w<d.length;w++){var S=null!==(l=t.dims[t.dims.length-w])&&void 0!==l?l:1;if(S!==(null!==(p=n.dims[n.dims.length-w])&&void 0!==p?p:1))break;b*=S}(b%4==0||m||y)&&(g=!0)}else g=!0;return r(r({},e),{getShaderSource:function(e){return function(e,t,n,r,o,c,u,s,l,p,f){var d,h,g=a.ShapeUtil.size(r),v=Math.ceil(g/4);"string"==typeof u?d=h=function(e,t){return"".concat(u,"((").concat(e,"),(").concat(t,"))")}:"function"==typeof u?d=h=u:(d=u.scalar,h=u.vector);var m,y="",b=(0,i.outputVariable)("outputData",p,r,4),w=(0,i.inputVariable)("aData",s,t,4),S=(0,i.inputVariable)("bData",l,n,4);if(c){var _=function(e){for(var t=a.ShapeUtil.computeStrides(e),n=[],o=e.length-1;o>=0;o--){var i=b.indicesGet("outputIndices",o+r.length-e.length);n.push("".concat(t[o],"u * (").concat(i," % ").concat(e[o],"u)"))}return n.length>0?n.join("+"):"0u"};y="\\n          fn calcOffsetA(outputIndices: ".concat(b.type.indices,") -> u32 {\\n            return ").concat(_(t),";\\n          }\\n\\n          fn calcOffsetB(outputIndices: ").concat(b.type.indices,") -> u32 {\\n            return ").concat(_(n),";\\n          }\\n        ")}if(o)if(c){var x=1===a.ShapeUtil.size(t),T=1===a.ShapeUtil.size(n);m=x||T?b.setByOffset("global_idx",h(x?"".concat(w.type.value,"(").concat(w.getByOffset("0"),".x)"):w.getByOffset("global_idx"),T?"".concat(S.type.value,"(").concat(S.getByOffset("0"),".x)"):S.getByOffset("global_idx"))):"\\n            let outputIndices = ".concat(b.offsetToIndices("global_idx * 4u"),";\\n            let offsetA = calcOffsetA(outputIndices);\\n            let offsetB = calcOffsetB(outputIndices);\\n            ").concat(b.setByOffset("global_idx",h(w.getByOffset("offsetA / 4u"),S.getByOffset("offsetB / 4u"))),"\\n          ")}else m=b.setByOffset("global_idx",h(w.getByOffset("global_idx"),S.getByOffset("global_idx")));else{if(!c)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");var O=function(e,t,n){void 0===n&&(n="");var r="aData[indexA".concat(t,"][componentA").concat(t,"]"),a="bData[indexB".concat(t,"][componentB").concat(t,"]");return"\\n            let outputIndices".concat(t," = ").concat(b.offsetToIndices("global_idx * 4u + ".concat(t,"u")),";\\n            let offsetA").concat(t," = calcOffsetA(outputIndices").concat(t,");\\n            let offsetB").concat(t," = calcOffsetB(outputIndices").concat(t,");\\n            let indexA").concat(t," = offsetA").concat(t," / 4u;\\n            let indexB").concat(t," = offsetB").concat(t," / 4u;\\n            let componentA").concat(t," = offsetA").concat(t," % 4u;\\n            let componentB").concat(t," = offsetB").concat(t," % 4u;\\n            ").concat(e,"[").concat(t,"] = ").concat(n,"(").concat(d(r,a),");\\n          ")};m=9===p?"\\n            var data = vec4<u32>(0);\\n            ".concat(O("data",0,"u32"),"\\n            ").concat(O("data",1,"u32"),"\\n            ").concat(O("data",2,"u32"),"\\n            ").concat(O("data",3,"u32"),"\\n            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));"):"\\n            ".concat(O("outputData[global_idx]",0),"\\n            ").concat(O("outputData[global_idx]",1),"\\n            ").concat(O("outputData[global_idx]",2),"\\n            ").concat(O("outputData[global_idx]",3),"\\n          ")}return"\\n        ".concat(e.declareVariables(w,S,b),"\\n\\n        ").concat(null!=f?f:"","\\n        ").concat(y,"\\n\\n        ").concat(e.mainStart(),"\\n        ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(v),"\\n        ").concat(m,"\\n      }")}(e,t.dims,n.dims,d,g,f,c,t.dataType,n.dataType,s,u)},outputs:[{dims:d,dataType:s,gpuDataType:o.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(h/64/4)}}})}(l,e[0],e[1],n,c,s)}})};t.add=function(e){e.compute(c(e.inputs,"Add",(function(e,t){return"".concat(e,"+").concat(t)})))},t.div=function(e){e.compute(c(e.inputs,"Div",(function(e,t){return"".concat(e,"/").concat(t)})))},t.equal=function(e){e.compute(c(e.inputs,"Equal",{scalar:function(e,t){return"u32(".concat(e,"==").concat(t,")")},vector:function(e,t){return"vec4<u32>(".concat(e,"==").concat(t,")")}},void 0,void 0,9))},t.mul=function(e){e.compute(c(e.inputs,"Mul",(function(e,t){return"".concat(e,"*").concat(t)})))},t.pow=function(e){var t=(0,i.inputVariable)("input",e.inputs[0].dataType,e.inputs[0].dims).type.value,n="i32"===t?"round":"";e.compute(c(e.inputs,"Pow",{scalar:function(e,t){return"pow_custom(".concat(e,",").concat(t,")")},vector:function(e,t){return"pow_vector_custom(".concat(e,",").concat(t,")")}},"\\n    fn pow_custom(a : ".concat(t,", b : ").concat(t,") -> ").concat(t," {\\n      if (b == ").concat(t,"(0.0)) {\\n        return ").concat(t,"(1.0);\\n      } else if (a < ").concat(t,"(0.0) && f32(b) != floor(f32(b))) {\\n        return ").concat(t,"(pow(f32(a), f32(b))); // NaN\\n      }\\n      return select(sign(a), ").concat(t,"(1.0), round(f32(abs(b) % ").concat(t,"(2.0))) != 1.0) * ").concat(t,"(").concat(n,"(pow(f32(abs(a)), f32(b))));\\n    }\\n    fn pow_vector_custom(a : vec4<").concat(t,">, b : vec4<").concat(t,">) -> vec4<").concat(t,"> {\\n      // TODO: implement vectorized pow\\n      return vec4<").concat(t,">(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));\\n    }\\n      ")))},t.sub=function(e){e.compute(c(e.inputs,"Sub",(function(e,t){return"".concat(e,"-").concat(t)})))},t.greater=function(e){e.compute(c(e.inputs,"Greater",{scalar:function(e,t){return"u32(".concat(e,">").concat(t,")")},vector:function(e,t){return"vec4<u32>(".concat(e,">").concat(t,")")}},void 0,void 0,9))},t.less=function(e){e.compute(c(e.inputs,"Less",{scalar:function(e,t){return"u32(".concat(e,"<").concat(t,")")},vector:function(e,t){return"vec4<u32>(".concat(e,"<").concat(t,")")}},void 0,void 0,9))},t.greaterOrEqual=function(e){e.compute(c(e.inputs,"GreaterOrEqual",{scalar:function(e,t){return"u32(".concat(e,">=").concat(t,")")},vector:function(e,t){return"vec4<u32>(".concat(e,">=").concat(t,")")}},void 0,void 0,9))},t.lessOrEqual=function(e){e.compute(c(e.inputs,"LessOrEqual",{scalar:function(e,t){return"u32(".concat(e,"<=").concat(t,")")},vector:function(e,t){return"vec4<u32>(".concat(e,"<=").concat(t,")")}},void 0,void 0,9))}},2075:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBroadcastDims=t.createShaderHelper=t.outputVariable=t.inputVariable=t.tensorTypeToWsglValueType=t.tensorTypeToWsglStorageType=t.WORKGROUP_SIZE=void 0;var r=n(6952);t.WORKGROUP_SIZE=64;var a=function(e,t){if(3===t)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(e){case 10:return t>1?"vec".concat(t,"<f16>"):"f16";case 1:return t>1?"vec".concat(t,"<f32>"):"f32";case 6:return t>1?"vec".concat(t,"<i32>"):"i32";case 12:return t>1?"vec".concat(t,"<u32>"):"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(4!==t)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error("Unknown data type: ".concat(e))}};t.tensorTypeToWsglStorageType=function(e,t){void 0===t&&(t=1);var n=a(e,t);return"string"==typeof n?n:n[0]},t.tensorTypeToWsglValueType=function(e,t){void 0===t&&(t=1);var n=a(e,t);return"string"==typeof n?n:n[1]};var o=function(e,t,n,o,i){for(var c=n.length,u=c<2?"u32":c<=4?"vec".concat(c,"<u32>"):"array<u32, ".concat(c,">"),s=a(t,i),l="string"==typeof s?s:s[1],p="string"==typeof s?s:s[0],f={indices:u,value:l,storage:p,tensor:t},d=function(e){return"string"==typeof e?e:"".concat(e,"u")},h={offsetToIndices:!1,indicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},g=r.ShapeUtil.computeStrides(n),v="",m=0;m<c-1;m++)v+="\\n    let dim".concat(m," = current / ").concat(g[m],"u;\\n    let rest").concat(m," = current % ").concat(g[m],"u;\\n    indices[").concat(m,"] = dim").concat(m,";\\n    current = rest").concat(m,";\\n    ");v+="indices[".concat(c-1,"] = current;");var y=c<2?"":"\\n  fn o2i_".concat(e,"(offset: u32) -> ").concat(f.indices," {\\n    var indices: ").concat(f.indices,";\\n    var current = offset;\\n    ").concat(v,"\\n    return indices;\\n  }"),b=[];if(c>=2)for(m=c-1;m>=0;m--)b.push("".concat(g[m],"u * (indices[").concat(m,"])"));var w,S,_=c<2?"":"\\n  fn i2o_".concat(e,"(indices: ").concat(f.indices,") -> u32 {\\n    return ").concat(b.join("+"),";\\n  }"),x=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===c?"0u":"".concat(f.indices,"(").concat(e.map(d).join(","),")")},T=function(t,n){return function(){if(f.storage===f.value)return"".concat(e,"[").concat(t,"]=").concat(n,";");if("vec2<u32>"===f.storage&&"i32"===f.value)return"".concat(e,"[").concat(t,"]=vec2<u32>(u32(").concat(n,"), select(0u, 0xFFFFFFFFu, ").concat(n," < 0));");if("vec2<u32>"===f.storage&&"u32"===f.value)return"".concat(e,"[").concat(t,"]=vec2<u32>(u32(").concat(n,"), 0u);");if("u32"===f.storage&&"vec4<bool>"===f.value)return"".concat(e,"[").concat(t,"]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(").concat(n,"));");throw new Error("not supported combination of storage type ".concat(f.storage," and value type ").concat(f.value," yet"))}()},O=function(t){return function(){if(f.storage===f.value)return"".concat(e,"[").concat(t,"]");if("vec2<u32>"===f.storage&&"i32"===f.value)return"i32(".concat(e,"[").concat(t,"].x)");if("vec2<u32>"===f.storage&&"u32"===f.value)return"u32(".concat(e,"[").concat(t,"].x)");if("u32"===f.storage&&"vec4<bool>"===f.value)return"vec4<bool>(bool(".concat(e,"[").concat(t,"] & 0xFFu), bool(").concat(e,"[").concat(t,"] & 0xFF00u), bool(").concat(e,"[").concat(t,"] & 0xFF0000u), bool(").concat(e,"[").concat(t,"] & 0xFF000000u))");throw new Error("not supported combination of storage type ".concat(f.storage," and value type ").concat(f.value," yet"))}()},I=c<2?"":"\\n  fn get_".concat(e,"ByIndices(indices: ").concat(f.indices,") -> ").concat(l," {\\n    return ").concat(O("i2o_".concat(e,"(indices)")),";\\n  }"),A=c<2?"":(w=n.map((function(e,t){return"d".concat(t,": u32")})).join(", "),S=n.map((function(e,t){return"d".concat(t)})).join(", "),"\\n  fn get_".concat(e,"(").concat(w,") -> ").concat(l," {\\n    return get_").concat(e,"ByIndices(").concat(x(S),");\\n  }")),E=c<2?"":"\\n  fn set_".concat(e,"ByIndices(indices: ").concat(f.indices,", value: ").concat(l,") {\\n    ").concat(T("i2o_".concat(e,"(indices)"),"value"),"\\n  }"),C=c<2?"":function(){var t=n.map((function(e,t){return"d".concat(t,": u32")})).join(", "),r=n.map((function(e,t){return"d".concat(t)})).join(", ");return"\\n  fn set_".concat(e,"(").concat(t,", value: ").concat(l,") {\\n    set_").concat(e,"ByIndices(").concat(x(r),", value);\\n  }")}();return{impl:function(){var e=[];return h.offsetToIndices&&e.push(y),h.indicesToOffset&&e.push(_),h.set&&e.push(C),h.setByIndices&&e.push(E),h.get&&e.push(A),h.getByIndices&&e.push(I),e.join("\\n")},type:f,offsetToIndices:function(t){return h.offsetToIndices=!0,c<2?t:"o2i_".concat(e,"(").concat(t,")")},indicesToOffset:function(t){return h.indicesToOffset=!0,c<2?t:"i2o_".concat(e,"(").concat(t,")")},indices:x,indicesGet:function(e,t){return c<2?"".concat(e):"".concat(e,"[").concat(t,"]")},indicesSet:function(e,t,n){return c<2?"".concat(e,"=").concat(n,";"):"".concat(e,"[").concat(t,"]=").concat(n,";")},set:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length!==c+1)throw new Error("indices length must be ".concat(c));var r=t[c];if("string"!=typeof r)throw new Error("value must be string");var a=t.slice(0,c).map(d).join(",");return 0===c?T("0u",r):1===c?T(a[0],r):(h.set=!0,h.setByIndices=!0,h.indicesToOffset=!0,"set_".concat(e,"(").concat(a,", ").concat(r,")"))},setByOffset:T,setByIndices:function(t,n){return c<2?T(t,n):(h.setByIndices=!0,h.indicesToOffset=!0,"set_".concat(e,"ByIndices(").concat(t,", ").concat(n,");"))},get:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length!==c)throw new Error("indices length must be ".concat(c));var r=t.map(d).join(",");return 0===c?O("0u"):1===c?O(r[0]):(h.get=!0,h.getByIndices=!0,h.indicesToOffset=!0,"get_".concat(e,"(").concat(r,")"))},getByOffset:O,getByIndices:function(t){return c<2?O(t):(h.getByIndices=!0,h.indicesToOffset=!0,"get_".concat(e,"ByIndices(").concat(t,")"))},usage:o?"input":"output",name:e,shape:n}};t.inputVariable=function(e,t,n,r){return void 0===r&&(r=1),o(e,t,n,!0,r)},t.outputVariable=function(e,t,n,r){return void 0===r&&(r=1),o(e,t,n,!1,r)};var i=function(){function e(e){this.normalizedDispatchGroup=e,this.indicesHelpers=[]}return e.prototype.guardAgainstOutOfBoundsWorkgroupSizes=function(e){var t="number"==typeof e?"".concat(e,"u"):e;return"if (global_idx >= ".concat(t,") { return; }")},e.prototype.mainStart=function(e){void 0===e&&(e=t.WORKGROUP_SIZE);var n="number"==typeof e?e:e[0],r="number"==typeof e?1:e[1],a="number"==typeof e?1:e[2],o=1===this.normalizedDispatchGroup[1]&&1===this.normalizedDispatchGroup[2],i=o?"@builtin(global_invocation_id) global_id : vec3<u32>,\\n    @builtin(local_invocation_id) local_id : vec3<u32>":"@builtin(local_invocation_index) local_index : u32,\\n    @builtin(workgroup_id) workgroup_id : vec3<u32>",c=o?"let global_idx = global_id.x;":"let global_idx = (workgroup_id.z * ".concat(this.normalizedDispatchGroup[0]*this.normalizedDispatchGroup[1],"u +\\n          workgroup_id.y * ").concat(this.normalizedDispatchGroup[0],"u + workgroup_id.x) * ").concat(n*r*a,"u + local_index;");return"@compute @workgroup_size(".concat(n,", ").concat(r,", ").concat(a,")\\n  fn main(").concat(i,") {\\n    ").concat(c,"\\n  ")},e.prototype.declareVariable=function(e,t){this.indicesHelpers.push(e);var n="input"===e.usage?"read":"read_write",r=e.type.storage;return"@group(0) @binding(".concat(t,") var<storage, ").concat(n,"> ").concat(e.name,": array<").concat(r,">;")},e.prototype.declareVariables=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=0;return t.filter((function(e){return r.ShapeUtil.size(e.shape)>0})).map((function(t){return e.declareVariable(t,a++)})).join("\\n")},Object.defineProperty(e.prototype,"additionalImplementations",{get:function(){return this.indicesHelpers.map((function(e){return e.impl()})).join("\\n")},enumerable:!1,configurable:!0}),e}();t.createShaderHelper=function(e){return new i(e)},t.getBroadcastDims=function(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}},513:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseConcatAttributes=t.concat=void 0;var c=n(6952),u=n(387),s=n(1163),l=n(2075);t.concat=function(e,t){!function(e){var t,n;if(!e||e.length<1)throw new Error("too few inputs");var r=e[0].dataType,o=e[0].dims.length;try{for(var i=a(e),c=i.next();!c.done;c=i.next()){var u=c.value;if(u.dataType!==r)throw new Error("input tensors should be one type");if(u.dims.length!==o)throw new Error("input tensors should have the same shape")}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}(e.inputs),e.compute(function(e,t){var n,a,u=(n=e.length,a=t.cacheKey,{name:"Concat",inputTypes:Array(n).fill(s.GpuDataType.default),cacheHint:a});return r(r({},u),{get:function(){return function(e,t,n){var a=t[0].dims.slice();if(n>=a.length||n<-1*a.length)throw new Error("axis specified for concat doesn\'t match input dimensionality");for(var u=n<0?a.length+n:n,p=a.slice(0),f=1;f<t.length;f++)for(var d=t[f].dims.slice(),h=0;h<a.length;h++)if(h===u)p[u]+=d[h];else if(a[h]!==d[h])throw new Error("non concat dimensions must match");var g=c.ShapeUtil.size(p),v=new Array(t.length),m=new Array(t.length),y=t[0].dataType,b=0;for(f=0;f<t.length;++f)b+=t[f].dims[u],v[f]=b,m[f]=(0,l.inputVariable)("input".concat(f),y,t[f].dims);var w=(0,l.outputVariable)("output",y,p),S=w.indicesGet("indices",u);return r(r({},e),{outputs:[{dims:p,dataType:t[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(e){return"\\n  ".concat(e.declareVariables.apply(e,i(i([],o(m),!1),[w],!1)),"\\n\\n  const sizeInConcatAxis = array<u32, ").concat(v.length,">(").concat(v.map((function(e){return"".concat(e,"u")})).join(","),");\\n  ").concat((t=v.length,"\\n  fn calculateInputIndex(index: u32) -> u32 {\\n    for (var i: u32 = 0u; i < ".concat(t,"u; i += 1u ) {\\n      if (index < sizeInConcatAxis[i]) {\\n        return i;\\n      }\\n    }\\n    return ").concat(t,"u;\\n  }")),"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(g),"\\n\\n    var indices = ").concat(w.offsetToIndices("global_idx"),";\\n\\n    let inputIndex = calculateInputIndex(").concat(S,");\\n    if (inputIndex != 0u) {\\n      ").concat(S," -= sizeInConcatAxis[inputIndex - 1u];\\n    }\\n\\n    ").concat(function(e,t){for(var n=e.length,r=[],a=0;a<n;++a){var o=t.setByOffset("global_idx",e[a].getByIndices("indices"));1===n?r.push(o):0===a?r.push("if (inputIndex == ".concat(a,"u) { ").concat(o," }")):a===n-1?r.push("else { ".concat(o," }")):r.push("else if (inputIndex == ".concat(a,") { ").concat(o," }"))}return r.join("\\n")}(m,w),"\\n  }");var t},dispatchGroup:function(){return{x:Math.ceil(g/64)}}})}(u,e,t.axis)}})}(e.inputs,t))},t.parseConcatAttributes=function(e){return(0,u.createAttributeWithCacheKey)({axis:e.axis})}},9192:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createGroupedConvProgramInfoLoader=void 0;var i=n(6952),c=n(1163),u=n(2075),s=n(9770),l=n(3997);t.createGroupedConvProgramInfoLoader=function(e,t,n){var p,f,d=(p=e.length>2,f=t.cacheKey,{name:"GroupedConv",inputTypes:p?[c.GpuDataType.default,c.GpuDataType.default,c.GpuDataType.default]:[c.GpuDataType.default,c.GpuDataType.default],cacheHint:f});return r(r({},d),{get:function(){return function(e,t,n,p){var f=e.length>2,d=f?"value += b[output_channel];":"",h=e[0].dims,g=e[1].dims,v=g[0]/n.group,m=(0,l.getActicationSnippet)(n),y=m.activationFunction,b=m.applyActivation,w="NHWC"===n.format,S=(0,s.calculateOutputShape)(h,g,n.dilations,n.pads,n.strides,w),_=i.ShapeUtil.size(S),x=(0,u.outputVariable)("output",e[0].dataType,S),T=(0,u.inputVariable)("x",e[0].dataType,h),O=(0,u.inputVariable)("w",e[1].dataType,g),I=[T,O];return f&&I.push((0,u.inputVariable)("b",e[2].dataType,e[2].dims)),r(r({},t),{outputs:[{dims:p?p(S):S,dataType:e[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(e){return"\\n  const strides: vec2<u32> = vec2(".concat(n.strides[0],"u, ").concat(n.strides[1],"u);\\n  const pads: vec2<u32> = vec2(").concat(n.pads[0],"u, ").concat(n.pads[1],"u);\\n\\n  ").concat(e.declareVariables.apply(e,o(o([],a(I),!1),[x],!1)),"\\n\\n  ").concat(y,"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(_),"\\n\\n    let outputIndices = ").concat(x.offsetToIndices("global_idx"),";\\n    let batch: u32 = outputIndices[0];\\n    let output_channel: u32 = outputIndices[").concat(w?3:1,"];\\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[").concat(w?1:2,"], outputIndices[").concat(w?2:3,"]) * strides - pads;\\n    let group_id: u32 = output_channel / ").concat(v,"u;\\n\\n    var value: ").concat(x.type.value," = ").concat(x.type.value,"(0);\\n    for (var wInChannel: u32 = 0u; wInChannel < ").concat(g[1],"u; wInChannel++) {\\n      let input_channel = group_id * ").concat(g[1],"u + wInChannel;\\n      for (var wHeight: u32 = 0u; wHeight < ").concat(g[2],"u; wHeight++) {\\n        let xHeight = xRCCorner.x + wHeight * ").concat(n.dilations[0],"u;\\n\\n        if (xHeight < 0u || xHeight >= ").concat(h[w?1:2],"u) {\\n          continue;\\n        }\\n\\n        for (var wWidth: u32 = 0u; wWidth < ").concat(g[3],"u; wWidth++) {\\n          let xWidth = xRCCorner.y + wWidth * ").concat(n.dilations[1],"u;\\n          if (xWidth < 0u || xWidth >= ").concat(h[w?2:3],"u) {\\n            continue;\\n          }\\n\\n          let xVal = ").concat(w?T.get("batch","xHeight","xWidth","input_channel"):T.get("batch","input_channel","xHeight","xWidth"),";\\n          let wVal = ").concat(O.get("output_channel","wInChannel","wHeight","wWidth"),";\\n          value += xVal*wVal;\\n        }\\n      }\\n    }\\n    ").concat(d,"\\n    ").concat(b,"\\n    ").concat(x.setByOffset("global_idx","value"),"\\n  }")},dispatchGroup:function(){return{x:Math.ceil(_/64)}}})}(e,d,t,n)}})}},7640:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.convTranspose=t.parseConvTransposeAttributes=void 0;var a=n(387),o=n(1163),i=n(6514),c=n(3997),u=function(e,t,n,r,a,o){return(e-1)*t+n+(r-1)*a+1-o},s=function(e,t,n,r,a){var o=Math.floor(e/2);"SAME_UPPER"===t?(n[r]=o,n[a]=e-o):"SAME_LOWER"===t&&(n[r]=e-o,n[a]=o)},l=function(e,t){var n=e.kernelShape.slice();if(0===e.kernelShape.length||0===e.kernelShape.reduce((function(e,t){return e*t}),0)){n.length=0;for(var r=2;r<t[1].dims.length;++r)n.push(t[1].dims[r])}var a="NHWC"===e.format;n.splice(0,0,t[1].dims[0]),n.splice(a?3:1,0,t[1].dims[1]);var o=e.pads.slice(),i=e.outputShape.slice(),c=e.outputPadding.slice(),l=t[0].dims,p=e.dilations.slice();if(0===p.reduce((function(e,t){return e+t}),0)){var f=t[0].dims.length-2;p=new Array(f).fill(1)}var d=e.strides.slice();0===d.reduce((function(e,t){return e+t}),0)&&(f=t[0].dims.length-2,d=new Array(f).fill(1)),function(e,t,n,r,a,o,i,c,l,p){var f=e.length-2,d=0===p.length;if(0===l.length)for(var h=0;h<f;++h)l.push(0);for(var g=e[0],v=t[c?3:1]*a,m=(h=0,e.length-f-(c?1:0));h<f;++h,++m){var y=e[m],b=d?y*i[h]:p[h],w=u(y,i[h],o[h],t[m],n[h],b);s(w,r,o,h,h+f),d&&p.push(i[h]*(y-1)+l[h]+(t[m]-1)*n[h]+1-o[h]-o[h+f])}p.splice(0,0,g),p.splice(c?3:1,0,v)}(l,n,p,e.autoPad,e.group,o,d,a,c,i);var h=Object.assign({},e);return Object.assign(h,{kernelShape:n,pads:o,outputPadding:c,outputShape:i,dilations:p,strides:d,cacheKey:e.cacheKey}),h};t.parseConvTransposeAttributes=function(e){var t=(0,c.parseInternalActivationAttributes)(e),n=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][void 0===e.autoPad?0:e.autoPad],i=e.dilations,u=e.group,s=e.kernelShape,l=e.pads,p=e.strides,f=e.wIsConst(),d=e.outputPadding,h=e.outputShape;return(0,a.createAttributeWithCacheKey)(r({autoPad:o,format:n,dilations:i,group:u,kernelShape:s,outputPadding:d,outputShape:h,pads:l,strides:p,wIsConst:f},t))};var p=function(e,t,n){var a,c,u=(a=3===e.length,c=t.cacheKey,{name:"ConvTranspose2D",inputTypes:a?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:c});return r(r({},u),{get:function(){return(0,i.createConvTranspose2DProgramInfo)(e,u,t,n)}})};t.convTranspose=function(e,t){!function(e,t){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length&&3!==e[0].dims.length)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");if(e[0].dims["NHWC"===t.format?e[0].dims.length-1:1]!==e[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");var n=e[1].dims[1]*t.group;if(3===e.length&&(1!==e[2].dims.length||e[2].dims[0]!==n))throw new Error("invalid bias");var r=e[0].dims.length-2;if(t.dilations.reduce((function(e,t){return e+t}),0)>0&&t.dilations.length!==r)throw new Error("dilations should be ".concat(r,"D"));if(t.strides.reduce((function(e,t){return e+t}),0)>0&&t.strides.length!==r)throw new Error("strides should be ".concat(r,"D"));if(t.pads.reduce((function(e,t){return e+t}),0)>0&&t.pads.length!==2*r)throw new Error("pads should be ".concat(2*r,"D"));if(t.outputPadding.length!==r&&0!==t.outputPadding.length)throw new Error("output_padding should be ".concat(r,"D"));if(t.kernelShape.reduce((function(e,t){return e+t}),0)>0&&0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==t.outputShape.length&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===e.length&&1!==e[2].dataType)throw new Error("ConvTranspose input(bias) should be float tensor")}(e.inputs,t),3===e.inputs[0].dims.length?function(e,t){var n="NHWC"===t.format,a=[e.inputs[0].reshape(n?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];3===a.length&&a.push(e.inputs[2]);var o=t.kernelShape;0!==o.length&&0!==o[0]||(o=[e.inputs[1].dims[2]]);var i=t.dilations;0!==i.length&&0!==i[0]||(i=[1]);var c=t.strides;0!==c.length&&0!==c[0]||(c=[1]);var u=t.pads;0===u.length&&(u=[0,0]),u=[0,u[0],0,u[1]],c=[1].concat(c),i=[1].concat(i),o=[1].concat(o);var s=l(r(r({},t),{pads:u,strides:c,dilations:i,kernelShape:o}),a);e.compute(p(a,s,(function(e){return n?[e[0],e[2],e[3]]:[e[0],e[1],e[3]]})))}(e,t):function(e,t,n){var r=l(n,t);e.compute(p(t,r))}(e,e.inputs,t)}},9770:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.conv=t.parseConvAttributes=t.calculateOutputShape=void 0;var a=n(6952),o=n(387),i=n(9192),c=n(3822),u=n(3997),s=n(1522),l=n(2625);t.calculateOutputShape=function(e,t,n,r,a,o){var i=e[0],c=e.slice(o?1:2,o?3:4),u=c.length,s=t[0],l=t.slice(2).map((function(e,t){return e+(e-1)*(n[t]-1)})),p=c.map((function(e,t){return e+r[t]+r[t+u]})).map((function(e,t){return Math.floor((e-l[t]+a[t])/a[t])}));return p.splice(0,0,i),p.splice(o?3:1,0,s),p};var p=(0,o.createAttributeWithCacheKey)({perm:[2,3,1,0]}),f=function(e,t){for(var n=e.kernelShape.slice(),r=2;r<t[1].dims.length;++r)0===n[r-2]&&(n[r-2]=t[1].dims[r]);var o=e.pads.slice();a.PoolConvUtil.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,n,o,"NHWC"===e.format,e.autoPad);var i=Object.assign({},e);return Object.assign(i,{kernelShape:n,pads:o,cacheKey:e.cacheKey}),i};t.parseConvAttributes=function(e){var t=(0,u.parseInternalActivationAttributes)(e),n=e.format,a=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,c=e.group,s=e.kernel_shape,l=e.pads,p=e.strides,f=e.w_is_const();return(0,o.createAttributeWithCacheKey)(r({autoPad:a,format:n,dilations:i,group:c,kernelShape:s,pads:l,strides:p,wIsConst:f},t))},t.conv=function(e,n){!function(e,t){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length&&3!==e[0].dims.length)throw new Error("currently only support conv 1D and 2D");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");if(e[0].dims["NHWC"===t.format?e[0].dims.length-1:1]!==e[1].dims[1]*t.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===e.length&&(1!==e[2].dims.length||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");var n=e[0].dims.length-2;if(t.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(t.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(t.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("Conv input(X,W) should be float tensor");if(3===e.length&&1!==e[2].dataType)throw new Error("Conv input(bias) should be float tensor")}(e.inputs,n),3===e.inputs[0].dims.length?function(e,t){var n="NHWC"===t.format,a=[e.inputs[0].reshape(n?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];3===e.inputs.length&&a.push(e.inputs[2]);var o=[0,t.pads[0],0,t.pads[1]],c=[1].concat(t.strides),u=[1].concat(t.dilations),s=[1].concat(t.kernelShape),l=f(r(r({},t),{pads:o,strides:c,dilations:u,kernelShape:s}),a);e.compute((0,i.createGroupedConvProgramInfoLoader)(a,l,(function(e){return n?[e[0],e[2],e[3]]:[]})))}(e,n):function(e,n,a){var o,u,d=f(a,n),h=3===n.length,g="NHWC"===a.format;if(g&&1===a.group){var v=n[0].dims[g?1:2],m=n[0].dims[g?2:3],y=n[0].dims[g?3:1],b=n[1].dims[2],w=n[1].dims[3],S=(0,t.calculateOutputShape)(n[0].dims,n[1].dims,a.dilations,d.pads,a.strides,g),_=S[g?1:2],x=S[g?2:3],T=S[g?3:1],O=S[0];if(g&&b===v&&w===m&&"VALID"===a.autoPad||1===b&&1===w&&1===a.dilations[0]&&1===a.dilations[1]&&1===a.strides[0]&&1===a.strides[1]&&0===a.pads[0]&&0===a.pads[1]){var I=null!==(o=e.kernelCustomData.wT)&&void 0!==o?o:e.compute(r(r({},l.transposeProgramMetadata),{cacheHint:p.cacheKey,get:function(){return(0,l.createTransposeProgramInfo)(n[1],p.perm)}}),{inputs:[1],outputs:[a.wIsConst?-2:-1]})[0];a.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=I);var A=[];A.push(n[0].reshape([O,v*m,y])),A.push(I.reshape([1,y,T])),h&&A.push(n[2]);var E=[O,_*x,T];e.compute((0,s.createMatmulProgramInfoLoader)(A,d,S,E),{inputs:A})}else{var C=g?_*x:T,P=g?T:_*x,k=b*w*y,M=null!==(u=e.kernelCustomData.wT)&&void 0!==u?u:e.compute(r(r({},l.transposeProgramMetadata),{cacheHint:p.cacheKey,get:function(){return(0,l.createTransposeProgramInfo)(n[1],p.perm)}}),{inputs:[1],outputs:[a.wIsConst?-2:-1]})[0];a.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=M);var R=[n[0],M];h&&(g||1!==n[2].dims.length?R.push(n[2]):R.push(n[2].reshape([n[2].dims[0],1,1]))),e.compute((0,c.createConv2DMatMulProgramInfoLoader)(R,d,S,C,P,k,h,!0),{inputs:R})}}else e.compute((0,i.createGroupedConvProgramInfoLoader)(n,d))}(e,e.inputs,n)}},3822:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConv2DMatMulProgramInfoLoader=void 0;var a=n(1163),o=n(9456);t.createConv2DMatMulProgramInfoLoader=function(e,t,n,i,c,u,s,l){var p=function(e,t){return{name:"Conv2DMatMul",inputTypes:e?[a.GpuDataType.default,a.GpuDataType.default,a.GpuDataType.default]:[a.GpuDataType.default,a.GpuDataType.default],cacheHint:t}}(s,t.cacheKey);return r(r({},p),{get:function(){return(0,o.createConv2DMatMulProgramInfo)(e,p,t,n,i,c,u,s,l)}})}},2771:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseEinsumAttributes=t.einsum=void 0;var i=n(6952),c=n(387),u=n(1163),s=n(2075),l="[a-zA-Z]|\\\\.\\\\.\\\\.",p="("+l+")+",f="^"+p+"$",d="^("+p+",)*"+p+"$",h=function(){function e(e){void 0===e&&(e=-1),this.symbolToIndices=new Map,this.inputIndex=e}return e.prototype.addSymbol=function(e,t){var n=this.symbolToIndices.get(e);void 0===n?n=[t]:n.push(t),this.symbolToIndices.set(e,n)},e}(),g=function(){function e(e,t){var n=this;this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];var r=a(t.includes("->")?t.split("->",2):[t,""],2),i=r[0],c=r[1];if(!i.match(RegExp(d)))throw new Error("Invalid LHS term");if(i.split(",").forEach((function(t,r){var a=e[r].dims.slice();if(!t.match(RegExp(f)))throw new Error("Invalid LHS term");var o=n.processTerm(t,!0,a,r);n.lhs.push(o)})),""===c)c+=o([],a(this.symbolToInfo.entries()),!1).filter((function(e){var t=a(e,2),n=t[0];return 1===t[1].count||"..."===n})).map((function(e){return a(e,1)[0]})).join("");else if(!c.match(RegExp(p)))throw new Error("Invalid RHS");var u=c.match(RegExp(l,"g"));null==u||u.forEach((function(e){if("..."===e)n.outputDims=n.outputDims.concat(n.ellipsisDims);else{var t=n.symbolToInfo.get(e);if(void 0===t)throw new Error("Invalid RHS symbol");n.outputDims.push(t.dimValue)}})),this.rhs=this.processTerm(c,!0,this.outputDims)}return e.prototype.addSymbol=function(e,t,n){var r=this.symbolToInfo.get(e);if(void 0!==r){if(r.dimValue!==t&&1!==r.count)throw new Error("Dimension mismatch");r.count++,r.inputIndices.push(n)}else r={count:1,dimValue:t,inputIndices:[n]};this.symbolToInfo.set(e,r)},e.prototype.processTerm=function(e,t,n,r){var a=this;void 0===r&&(r=-1);var o=n.length,i=!1,c=[],u=0;if(!e.match(RegExp(f))&&!t&&""!==e)throw new Error("Invalid LHS term");var s=e.match(RegExp(l,"g")),p=new h(r);return null==s||s.forEach((function(e,l){if("..."===e){if(i)throw new Error("Only one ellipsis is allowed per input term");i=!0;var f=o-s.length+1;if(f<0)throw new Error("Ellipsis out of bounds");if(c=n.slice(u,u+f),a.hasEllipsis){if(a.ellipsisDims.length!==c.length||a.ellipsisDims.toString()!==c.toString())throw new Error("Ellipsis dimensions mismatch")}else{if(!t)throw new Error("Ellipsis must be specified in the LHS");a.hasEllipsis=!0,a.ellipsisDims=c}for(var d=0;d<c.length;d++){var h=String.fromCharCode("0".charCodeAt(0)+l);p.addSymbol(h,l+d),a.addSymbol(h,n[u++],r)}}else p.addSymbol(e,l),a.addSymbol(e,n[u++],r)})),p},e}();t.einsum=function(e,t){var n=new g(e.inputs,t.equation);e.compute(function(e,t,n){var c,l,p=(c=e.length,l=n.cacheKey,{name:"Einsum",inputTypes:Array(c).fill(u.GpuDataType.default),cacheHint:l});return r(r({},p),{get:function(){return function(e,t,n){for(var c=t[0].dataType,l=new Array(t.length),p=0;p<t.length;++p)l[p]=(0,s.inputVariable)("input".concat(p),c,t[p].dims);var f=n.outputDims,d=i.ShapeUtil.size(f),h=(0,s.outputVariable)("output",c,f),g=[],v=Array.from(n.rhs.symbolToIndices.keys()),m=[],y=[],b=[],w=[],S=n.symbolToInfo.size===v.length;n.symbolToInfo.forEach((function(e,t){var r;if(v.includes(t)){var a=v.indexOf(t);n.lhs.forEach((function(n,r){if(e.inputIndices.includes(r)){var o=n.symbolToIndices.get(t);if(void 0===o)throw new Error("Invalid symbol error");o.forEach((function(e){g.push("".concat(l[r].indicesSet("input".concat(r,"Indices"),e,h.indicesGet("outputIndices",a))))}))}}))}else n.lhs.forEach((function(e,r){var a=n.symbolToInfo.get(t);if(void 0===a)throw new Error("Invalid symbol error");if(a.inputIndices.includes(r)){var o=e.symbolToIndices.get(t);if(void 0===o)throw new Error("Invalid symbol error");o.forEach((function(e){m.push("".concat(l[r].indicesSet("input".concat(r,"Indices"),e,"".concat(t))))})),w.push("prod *= ".concat(l[r].getByIndices("input".concat(r,"Indices")),";"))}})),y.push("for(var ".concat(t,": u32 = 0; ").concat(t," < ").concat(null===(r=n.symbolToInfo.get(t))||void 0===r?void 0:r.dimValue,"; ").concat(t,"++) {")),b.push("}")}));var _=S?o(o([],a(g),!1),["let sum = ".concat(l.map((function(e,t){return e.getByIndices("input".concat(t,"Indices"))})).join(" * "),";")],!1):o(o(o(o(o(o(o(o([],a(g),!1),["var sum = 0.0;"],!1),a(y),!1),a(m),!1),["var prod = 1.0;"],!1),a(w),!1),["sum += prod;"],!1),a(b),!1);return r(r({},e),{outputs:[{dims:f,dataType:t[0].dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(e){return"\\n      ".concat(e.declareVariables.apply(e,o(o([],a(l),!1),[h],!1)),"\\n\\n      ").concat(e.mainStart(),"\\n        ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(d),"\\n        var outputIndices = ").concat(h.offsetToIndices("global_idx"),";\\n        ").concat(l.map((function(e,t){return"var input".concat(t,"Indices: ").concat(l[t].type.indices,";")})).join("\\n"),"\\n        ").concat(_.join("\\n"),";\\n        ").concat(h.setByOffset("global_idx","sum"),";\\n      }")},dispatchGroup:function(){return{x:Math.ceil(d/64)}}})}(p,e,t)}})}(e.inputs,n,t))},t.parseEinsumAttributes=function(e){var t=e.equation.replace(/\\s+/g,"");return(0,c.createAttributeWithCacheKey)({equation:t})}},8856:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.expand=t.expandProgramMetadata=void 0;var i=n(6952),c=n(1163),u=n(2075);t.expandProgramMetadata={name:"Expand",inputTypes:[c.GpuDataType.default]};var s=function(e,t){for(var n=e.length-t.length,r=[],a=0;a<n;++a)r.push(e[a]);for(a=0;a<t.length;++a)r.push(1===t[a]?e[a+n]:t[a]);return r};t.expand=function(e){!function(e){if(!e||2!==e.length)throw new Error("Expand requires 2 input.");for(var t=e[0].dims,n=Array.from(e[1].getBigInt64Array(),Number),r=n.length<t.length?0:n.length-t.length,a=t.length<n.length?0:t.length-n.length;r<n.length&&a<t.length;++r,++a)if(n[r]!==t[a]&&1!==n[r]&&1!==t[a])throw new Error("Expand requires shape to be broadcastable to input")}(e.inputs);var n=Array.from(e.inputs[1].getBigInt64Array(),Number).toString();e.compute(r(r({},t.expandProgramMetadata),{cacheHint:n,get:function(){return n=t.expandProgramMetadata,l=e.inputs,p=l[0].dims,f=Array.from(l[1].getBigInt64Array(),Number),d=function(e,t){return e.length>t.length?s(e,t):s(t,e)}(p,f),h=i.ShapeUtil.size(d),g=l[0].dataType,v=(0,u.inputVariable)("input",g,p),m=(0,u.outputVariable)("output",g,d),r(r({},n),{getShaderSource:function(e){return"\\n  const inputShape = ".concat(v.indices.apply(v,o([],a(p),!1)),";\\n  ").concat(e.declareVariables(v,m),"\\n  ").concat(e.mainStart(),"\\n  ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(h),"\\n    let outputIndices = ").concat(m.offsetToIndices("global_idx"),";\\n    var inputIndices: ").concat(v.type.indices,";\\n    for (var i = 0; i < ").concat(p.length,"; i++) {\\n      if (").concat(v.indicesGet("inputShape","i")," == 1) {\\n        ").concat(v.indicesSet("inputIndices","i",0),"\\n      } else {\\n        ").concat(v.indicesSet("inputIndices","i",m.indicesGet("outputIndices","i + ".concat(d.length-p.length))),"\\n      }\\n    }\\n    ").concat(m.setByOffset("global_idx",v.getByIndices("inputIndices")),"\\n  }")},outputs:[{dims:d,dataType:l[0].dataType,gpuDataType:c.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(h/64)}}});var n,l,p,f,d,h,g,v,m}}),{inputs:[0]})}},3997:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.parseInternalActivationAttributes=t.getActicationSnippet=void 0;var a=n(6952);t.getActicationSnippet=function(e){switch(e.activation){case"Relu":return{activationFunction:"",applyActivation:"value = max(value, 0.0);"};case"Sigmoid":return{activationFunction:"",applyActivation:"value = (1.0 / (1.0 + exp(-value)));"};case"Clip":return{activationFunction:"const clip_min_=f32(".concat(e.clipMin,");const clip_max_=f32(").concat(e.clipMax,");"),applyActivation:"value = clamp(value, clip_min_, clip_max_);"};default:return{activationFunction:"",applyActivation:""}}},t.parseInternalActivationAttributes=function(e){var t=(null==e?void 0:e.activation)||"";if("Clip"===t){var n=r((null==e?void 0:e.activation_params)||[a.MIN_CLIP,a.MAX_CLIP],2),o=n[0],i=n[1];return{activation:t,clipMax:i,clipMin:o,activationCacheKey:"".concat(t,":").concat(o,",").concat(i)}}return{activation:t,activationCacheKey:t}}},9218:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.gatherElements=t.parseGatherElementsAttributes=void 0;var a=n(6952),o=n(387),i=n(1163),c=n(2075);t.parseGatherElementsAttributes=function(e){return(0,o.createAttributeWithCacheKey)({axis:e.axis})},t.gatherElements=function(e,t){!function(e){if(!e||2!==e.length)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error("GatherElements requires that the data input and\\n                     indices input tensors be of same rank.")}(e.inputs);var n={name:"GatherElements",inputTypes:[i.GpuDataType.default,i.GpuDataType.default],cacheHint:t.cacheKey};e.compute(function(e,t,n){var o=t[0].dims,u=t[0].dataType,s=o.length,l=a.ShapeUtil.computeStrides(o),p=a.ShapeUtil.size(o),f=t[1].dims,d=t[1].dataType,h=a.ShapeUtil.size(f),g=a.ShapeUtil.normalizeAxis(n.axis,s),v=o[g],m=f.slice(0),y=a.ShapeUtil.size(m),b=(0,c.inputVariable)("input",u,o),w=(0,c.inputVariable)("indices",d,[h]),S=(0,c.outputVariable)("output",u,m);return r(r({},e),{outputs:[{dims:m,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}],getShaderSource:function(e){return"\\n      const inputStrides = array<u32, ".concat(l.length,">(").concat(l.map((function(e){return"".concat(e,"u")})).join(","),");\\n      ").concat(e.declareVariables(b,w,S),"\\n      ").concat(e.mainStart(),"\\n      ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(y),"\\n\\n      let outputIndices = ").concat(S.offsetToIndices("global_idx"),";\\n\\n      var idx = ").concat(w.getByOffset("global_idx"),";\\n      if (idx < 0) {\\n        idx = idx + ").concat(v,";\\n      }\\n\\n      var srcOffset = u32(0);\\n\\n      for (var i = 0; i < ").concat(o.length,"; i++) {\\n        if (i == ").concat(g,") {\\n          srcOffset +=  u32(idx) * inputStrides[i];\\n        } else {\\n          srcOffset += ").concat(S.indicesGet("outputIndices","i")," * inputStrides[i];\\n        }\\n      }\\n\\n      // Should never hit this with valid values in indices\\n      // This is a guard against malicious data in the indices input\\n      if (srcOffset < 0 || srcOffset >= ").concat(p,") {\\n        return;\\n      }\\n\\n      output[global_idx] = input[srcOffset];\\n  }")},dispatchGroup:function(){return{x:Math.ceil(y/64)}}})}(n,e.inputs,t))}},8405:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.gather=t.parseGatherAttributes=void 0;var i=n(6952),c=n(387),u=n(1163),s=n(2075);t.parseGatherAttributes=function(e){return(0,c.createAttributeWithCacheKey)({axis:e.axis})},t.gather=function(e,t){!function(e){if(!e||2!==e.length)throw new Error("Gather requires 2 inputs.")}(e.inputs);var n={name:"Gather",inputTypes:[u.GpuDataType.default,u.GpuDataType.default],cacheHint:t.cacheKey};e.compute(function(e,t,n){var c=t[0].dims,l=t[1].dims,p=c.length,f=i.ShapeUtil.normalizeAxis(n.axis,p),d=c.slice(0);d.splice.apply(d,o([f,1],a(l),!1));var h=c[f],g=i.ShapeUtil.size(d),v=(0,s.inputVariable)("data",t[0].dataType,t[0].dims),m=(0,s.inputVariable)("inputIndices",t[1].dataType,t[1].dims),y=(0,s.outputVariable)("output",t[0].dataType,d);return r(r({},e),{outputs:[{dims:d,dataType:t[0].dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(e){return"\\n      ".concat(e.declareVariables(v,m,y),"\\n      ").concat(e.mainStart(),"\\n        ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(g),"\\n        let outputIndices = ").concat(y.offsetToIndices("global_idx"),";\\n        ").concat(function(){for(var e=l.length,t="var indicesIndices  = ".concat(m.type.indices,"(0);"),n=0;n<e;n++)t+="".concat(e>1?"indicesIndices[".concat(n,"]"):"indicesIndices"," = ").concat(d.length>1?"outputIndices[".concat(f+n,"]"):"outputIndices",";");t+="\\n        var idx = ".concat(m.getByIndices("indicesIndices"),";\\n        if (idx < 0) {\\n          idx = idx + ").concat(h,";\\n        }\\n        var dataIndices = ").concat(v.type.indices,"(0);\\n      "),n=0;for(var r=0;n<p;n++)n===f?(t+="".concat(p>1?"dataIndices[".concat(n,"]"):"dataIndices"," = u32(idx);"),r+=e):(t+="".concat(p>1?"dataIndices[".concat(n,"]"):"dataIndices"," = ").concat(d.length>1?"outputIndices[".concat(r,"]"):"outputIndices",";"),r++);return t}(),";\\n        let value = ").concat(v.getByIndices("dataIndices"),";\\n        ").concat(y.setByOffset("global_idx","value"),";\\n      }")},dispatchGroup:function(){return{x:Math.ceil(g/64)}}})}(n,e.inputs,t))}},4271:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.parseGemmAttributes=t.gemm=void 0;var o=n(6952),i=n(387),c=n(1163),u=n(2075);t.gemm=function(e,t){!function(e){if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(3===e.length&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||3===e.length&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")}(e.inputs),e.compute(function(e,t){var n={name:"Gemm",inputTypes:3===e.length?[c.GpuDataType.default,c.GpuDataType.default,c.GpuDataType.default]:[c.GpuDataType.default,c.GpuDataType.default],cacheHint:t.cacheKey};return r(r({},n),{get:function(){return function(e,t,n){var i=t[0].dims.slice(),s=t[1].dims.slice(),l=a(o.GemmUtil.getShapeOfGemmResult(i,n.transA,s,n.transB,3===t.length?t[2].dims:void 0),3),p=l[0],f=l[1],d=l[2],h=[p,f];if(!h)throw new Error("Can\'t use gemm on the given tensors");var g=o.ShapeUtil.size(h),v="";n.transA&&n.transB?v="value += a[k * M + m] * b[n * K + k];":n.transA&&!n.transB?v="value += a[k * M + m] * b[k * N + n];":!n.transA&&n.transB?v="value += a[m * K + k] * b[n * K + k];":n.transA||n.transB||(v="value += a[m * K + k] * b[k * N + n];");var m=(0,u.tensorTypeToWsglStorageType)(t[0].dataType),y=1===n.alpha?"":"value *= alpha;",b=3===t.length?"value += beta * c[".concat(function(e,t,n){if(0===n.length)return"0u";var r=1===n.length&&1!==e||2===n.length&&n[0]!==e,a=n[n.length-1]!==t,o="0u";return r||(o+="+ m * ".concat(n[n.length-1],"u")),a||(o+="+n"),o}(p,f,t[2].dims),"];"):"",w=["@group(0) @binding(0) var<storage, read> a : array<".concat(m,">;"),"@group(0) @binding(1) var<storage, read> b : array<".concat(m,">;")];return 3===t.length&&w.push("@group(0) @binding(2) var<storage, read> c : array<".concat(m,">;")),r(r({},e),{outputs:[{dims:h,dataType:t[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(e){return"\\n  const M: u32 = ".concat(p,"u;\\n  const N: u32 = ").concat(f,"u;\\n  const K: u32 = ").concat(d,"u;\\n  const alpha = ").concat(m,"(").concat(n.alpha,");\\n  const beta = ").concat(m,"(").concat(n.beta,");\\n\\n  ").concat(w.join("\\n"),"\\n  @group(0) @binding(").concat(t.length,") var<storage, read_write> output : array<").concat(m,">;\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(g),"\\n\\n    let m = global_id.x / N;\\n    let n = global_id.x % N;\\n\\n    var value = ").concat(m,"(0);\\n    for (var k: u32 = 0u; k<").concat(d,"u; k++) {\\n      ").concat(v,"\\n    }\\n\\n    ").concat(y,"\\n    ").concat(b,"\\n    output[global_id.x] = value;\\n\\n  }")},dispatchGroup:function(){return{x:Math.ceil(g/64)}}})}(n,e,t)}})}(e.inputs,t))},t.parseGemmAttributes=function(e){return(0,i.createAttributeWithCacheKey)(e)}},1798:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.instanceNorm=t.parseInstanceNormAttributes=void 0;var i=n(6952),c=n(387),u=n(1163),s=n(2075);t.parseInstanceNormAttributes=function(e){return(0,c.createAttributeWithCacheKey)({epsilon:e.epsilon,format:e.format})},t.instanceNorm=function(e,t){var n={name:"InstanceNormalization",inputTypes:[u.GpuDataType.default,u.GpuDataType.default,u.GpuDataType.default],cacheHint:t.cacheKey};"NHWC"===t.format?e.compute(function(e,t,n){var a=t[0].dims,o=a,c=i.ShapeUtil.size(o),l=a[0],p=a[a.length-1],f=i.ShapeUtil.sizeFromDimension(a,1)/p,d=(0,s.tensorTypeToWsglStorageType)(t[0].dataType),h=p*l;return r(r({},e),{outputs:[{dims:o,dataType:t[0].dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(e){return"\\n  const N: u32 = ".concat(l,";\\n  const H: u32 = ").concat(f,";\\n  const C: u32 = ").concat(p,";\\n  const normSizeTyped: ").concat(d," = ").concat(f,";\\n  const imageSize: u32 = ").concat(f*p,";\\n  const epsilon: f32 = ").concat(n.epsilon,";\\n\\n  @group(0) @binding(0) var<storage, read> x : array<").concat(d,">;\\n  @group(0) @binding(1) var<storage, read> scale : array<").concat(d,">;\\n  @group(0) @binding(2) var<storage, read> bias : array<").concat(d,">;\\n  @group(0) @binding(3) var<storage, read_write> output : array<").concat(d,">;\\n\\n  ").concat(e.mainStart(),"\\n    let currentImageNumber = global_idx / C;\\n    let currentChannelNumber = global_idx % C;\\n\\n    // offset is channel num * N\\n    let offset = currentImageNumber * imageSize;\\n    if (offset >= ").concat(c,") { return; }\\n    var mean: ").concat(d," = 0;\\n\\n    for (var i: u32 = 0u; i < H; i++) {\\n        mean = mean + x[offset + i * C + currentChannelNumber];\\n    }\\n    mean = mean / normSizeTyped;\\n\\n    var squaredNorm: ").concat(d," = 0;\\n    for (var i: u32 = 0u; i < H; i++) {\\n        let deviation: f32 = x[offset + i * C + currentChannelNumber] - mean;\\n        squaredNorm = squaredNorm + deviation * deviation;\\n    }\\n    let invStdDev = 1 / sqrt(squaredNorm / normSizeTyped + epsilon);\\n    let channelScale = invStdDev * scale[currentChannelNumber];\\n    let channelShift = bias[currentChannelNumber] - mean * channelScale;\\n    for (var i: u32 = 0u; i < H; i++) {\\n        let currentOffset = offset + i * C + currentChannelNumber;\\n        output[currentOffset] = x[currentOffset] * channelScale + channelShift;\\n    }\\n  }")},dispatchGroup:function(){return{x:Math.ceil(h/64)}}})}(n,e.inputs,t)):e.compute(function(e,t,n){var c=t[0].dims,l=c,p=i.ShapeUtil.sizeToDimension(c,2),f=i.ShapeUtil.sizeFromDimension(c,2),d=c[1],h=(0,s.inputVariable)("x",t[0].dataType,[c[0],c[1],f]),g=(0,s.inputVariable)("scale",t[1].dataType,t[1].dims),v=(0,s.inputVariable)("bias",t[2].dataType,t[2].dims),m=(0,s.outputVariable)("output",t[0].dataType,[c[0],c[1],f]),y=[h,g,v,m],b=h.type.value;return r(r({},e),{outputs:[{dims:l,dataType:t[0].dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(e){return"\\n\\n  const C: u32 = ".concat(d,";\\n  const normSize: u32 = ").concat(f,";\\n  const epsilon: f32 = ").concat(n.epsilon,";\\n  var<workgroup> meanShared : ").concat(b,";\\n  var<workgroup> squaredNormShared : ").concat(b,";\\n  var<workgroup> workgroupShared : array<").concat(b,", ").concat(64,">;\\n  const workgroupSize = ").concat(64,"u;\\n  ").concat(e.declareVariables.apply(e,o([],a(y),!1)),"\\n  ").concat(e.mainStart(64),"\\n    let norm = global_idx / workgroupSize;\\n    let batch = norm / C;\\n    let channel = norm % C;\\n    let localIndex = local_id.x;\\n\\n    // initialize workgroup memory\\n    var initial: ").concat(b," = 0;\\n    for (var h = localIndex; h < normSize; h += workgroupSize) {\\n      initial = initial + ").concat(h.get("batch","channel","h"),";\\n    }\\n    workgroupShared[localIndex] = initial;\\n    workgroupBarrier();\\n\\n    // Calculate the mean of current channel data.\\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\\n      if (localIndex < currSize) {\\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\\n      }\\n      workgroupBarrier();\\n    }\\n    if (localIndex == 0) {\\n      meanShared = workgroupShared[0] / ").concat(b,"(normSize);\\n    }\\n    workgroupBarrier();\\n\\n    // reinitialize workgroup memory.\\n    initial = 0;\\n    for (var h = localIndex; h < normSize; h += workgroupSize) {\\n      let deviation =  ").concat(h.get("batch","channel","h")," - meanShared;\\n      initial = initial + deviation * deviation;\\n    }\\n    workgroupShared[localIndex] = initial;\\n    workgroupBarrier();\\n\\n    // Calculate the sum of square of deviation of current channel data.\\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\\n      if (localIndex < currSize) {\\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\\n      }\\n      workgroupBarrier();\\n    }\\n    if (localIndex == 0) {\\n      squaredNormShared = workgroupShared[0];\\n    }\\n    workgroupBarrier();\\n\\n    let invStdDev = 1 / sqrt(squaredNormShared / ").concat(b,"(normSize) + epsilon);\\n    let channelScale = invStdDev * ").concat(g.getByOffset("channel"),";\\n    let channelShift = ").concat(v.getByOffset("channel")," - meanShared * channelScale;\\n    for (var h = localIndex; h < normSize; h += workgroupSize) {\\n      let value = ").concat(h.get("batch","channel","h")," * channelScale + channelShift;\\n      ").concat(m.set("batch","channel","h","value"),";\\n    }\\n  }")},dispatchGroup:function(){return{x:p}}})}(n,e.inputs,t))}},6145:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.layerNorm=t.parseLayerNormAttributes=void 0;var a=n(6952),o=n(387),i=n(1163),c=n(2075);t.parseLayerNormAttributes=function(e){return(0,o.createAttributeWithCacheKey)({axis:e.axis,epsilon:e.epsilon})},t.layerNorm=function(e,t){!function(e){if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("inputs should be float type")}(e.inputs);var n={name:"LayerNormalization",inputTypes:2===e.inputs.length?[i.GpuDataType.default,i.GpuDataType.default]:[i.GpuDataType.default,i.GpuDataType.default,i.GpuDataType.default],cacheHint:t.cacheKey+e.outputCount.toString(10)+e.inputs.length.toString(10)};e.compute(function(e,t,n,o){var u=t[0].dims,s=t[1],l=t[2],p=u,f=a.ShapeUtil.size(p),d=a.ShapeUtil.normalizeAxis(n.axis,u.length),h=a.ShapeUtil.sizeToDimension(u,d),g=a.ShapeUtil.sizeFromDimension(u,d),v=a.ShapeUtil.size(s.dims),m=l?a.ShapeUtil.size(l.dims):0;if(v!==g||l&&m!==g)throw new Error("Size of X.shape()[axis:] == ".concat(g,".\\n       Size of scale and bias (if provided) must match this.\\n       Got scale size of ").concat(v," and bias size of ").concat(m));for(var y=[],b=0;b<u.length;++b)b<d?y.push(u[b]):y.push(1);var w=(0,c.tensorTypeToWsglStorageType)(t[0].dataType),S=o>1,_=o>2,x=0,T=[{dims:p,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}];return S&&T.push({dims:y,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}),_&&T.push({dims:y,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}),r(r({},e),{outputs:T,getShaderSource:function(e){return"\\n  const normSize: u32 = ".concat(g,";\\n  const normSizeTyped: ").concat(w," = ").concat(g,";\\n  const epsilon: f32 = ").concat(n.epsilon,";\\n\\n  @group(0) @binding(").concat(x++,") var<storage, read> x : array<").concat(w,">;\\n  @group(0) @binding(").concat(x++,") var<storage, read> scale : array<").concat(w,">;\\n  ").concat(l?"@group(0) @binding(".concat(x++,") var<storage, read> bias : array<").concat(w,">;"):"","\\n  @group(0) @binding(").concat(x++,") var<storage, read_write> output : array<").concat(w,">;\\n  ").concat(S?"@group(0) @binding(".concat(x++,") var<storage, read_write> meanDataOutput : array<").concat(w,">"):"",";\\n  ").concat(_?"@group(0) @binding(".concat(x++,") var<storage, read_write> invStdOutput : array<").concat(w,">"):"",";\\n\\n  ").concat(e.mainStart(),"\\n    let offset = global_idx * normSize;\\n    if (offset >= ").concat(f,") { return; }\\n    var mean: ").concat(w," = 0;\\n    var meanSquare: ").concat(w," = 0;\\n\\n    for (var h: u32 = 0u; h < normSize; h++) {\\n      mean = mean + x[h + offset];\\n      meanSquare = meanSquare + x[h + offset] * x[h + offset];\\n    }\\n    mean = mean / normSizeTyped;\\n    meanSquare = sqrt(meanSquare / normSizeTyped - mean * mean + epsilon);\\n\\n    for (var j: u32 = 0; j < normSize; j++) {\\n      output[j + offset] = (x[j + offset] - mean) / meanSquare * scale[j] ").concat(l?"+ bias[j]":"",";\\n    }\\n\\n    ").concat(S?"meanDataOutput[global_idx] = mean":"",";\\n    ").concat(_?"invStdOutput[global_idx] = 1 / meanSquare":"",";\\n  }")},dispatchGroup:function(){return{x:Math.ceil(h/64)}}})}(n,e.inputs,t,e.outputCount))}},1522:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.matMul=t.createMatmulProgramInfoLoader=void 0;var a=n(6952),o=n(1163),i=n(158);t.createMatmulProgramInfoLoader=function(e,t,n,a){var c,u,s=(c=e.length>2,u=t.activationCacheKey,{name:"MatMul",inputTypes:c?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:u});return r(r({},s),{get:function(){return(0,i.createMatmulProgramInfo)(s,e,t,n,a)}})},t.matMul=function(e){!function(e){if(!e||2!==e.length)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("inputs should be float type")}(e.inputs);var n=a.BroadcastUtil.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!n)throw new Error("Can\'t use matmul on the given tensors");e.compute((0,t.createMatmulProgramInfoLoader)(e.inputs,{activation:"",activationCacheKey:""},n))}},3053:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parsePadAttributes=t.pad=void 0;var a=n(6952),o=n(387),i=n(1163),c=n(2075),u=function(e,t){var n=function(e,t){if(e.length>1){var n=e[1].getBigInt64Array(),r=e.length>=3?e[2].getFloat32Array()[0]:0,a=e[0].dims.length,i=new Int32Array(2*a).fill(0);if(e.length>=4)for(var c=e[3].getBigInt64Array(),u=0;u<c.length;u++)i[Number(c[u])]=Number(n[u]),i[Number(c[u])+a]=Number(n[u+c.length]);else n.forEach((function(e,t){return i[Number(e)]=Number(t)}));var s=[];return i.forEach((function(e){return s.push(e)})),(0,o.createAttributeWithCacheKey)({mode:t.mode,value:r,pads:s})}return t}(e,t),u={name:"Pad",inputTypes:[i.GpuDataType.default],cacheHint:n.cacheKey};return r(r({},u),{get:function(){return function(e,t,n){var o=a.ShapeUtil.padShape(e[0].dims.slice(),n.pads);return r(r({},t),{outputs:[{dims:o,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}],getShaderSource:function(t){return function(e,t,n,r){var o=t[0].dims,i=a.ShapeUtil.padShape(o.slice(),n.pads),u=a.ShapeUtil.size(i),s=a.ShapeUtil.computeStrides(o),l=(0,c.outputVariable)("output",t[0].dataType,i),p=(0,c.inputVariable)("x",t[0].dataType,o),f=function(e,t,n,r,a,o){switch(a.mode){case 0:return function(e,t,n,r,a,o,i){for(var c="",u=n.length-1;u>=0;--u)c+="\\n            k = i32(".concat(e.indicesGet("indices",u),") - ").concat(a[u],";\\n            if (k < 0) {\\n              break;\\n            }\\n            if (k >= ").concat(n[u],") {\\n              break;\\n            }\\n            offset += k * ").concat(r[u],";\\n        ");return"\\n          value = ".concat(o,"(").concat(i,");\\n          for (var i = 0; i < 1; i++) {\\n            var offset = 0;\\n            var k = 0;\\n            ").concat(c,"\\n            value = x[offset];\\n          }\\n      ")}(e,0,n,r,a.pads,o,a.value);case 1:return function(e,t,n,r,a){for(var o="",i=n.length-1;i>=0;--i)o+="\\n                k = i32(".concat(e.indicesGet("indices",i),") - ").concat(a[i],";\\n                if (k < 0) {\\n                  k = -k;\\n                }\\n                {\\n                  let _2n_1 = ").concat(2*(n[i]-1),";\\n                  k = k % _2n_1;\\n                  if(k >= ").concat(n[i],") {\\n                    k = _2n_1 - k;\\n                  }\\n                }\\n                offset += k * ").concat(r[i],";\\n            ");return"\\n              var offset = 0;\\n              var k = 0;\\n              ".concat(o,"\\n              value = x[offset];\\n          ")}(e,0,n,r,a.pads);case 2:return function(e,t,n,r,a){for(var o="",i=n.length-1;i>=0;--i)o+="\\n                k = i32(".concat(e.indicesGet("indices",i),") - ").concat(a[i],";\\n                if (k < 0) {\\n                  k = 0;\\n                }\\n                if (k >= ").concat(n[i],") {\\n                  k = ").concat(n[i]-1,";\\n                }\\n                offset += k * ").concat(r[i],";\\n            ");return"\\n              var offset = 0;\\n              var k = 0;\\n              ".concat(o,"\\n              value = x[offset];\\n          ")}(e,0,n,r,a.pads);case 3:return function(e,t,n,r,a){for(var o="",i=n.length-1;i>=0;--i)o+="\\n                k = i32(".concat(e.indicesGet("indices",i),") - ").concat(a[i],";\\n                if (k < 0)  {\\n                  k += ").concat(n[i],";\\n                }\\n                if (k >= ").concat(n[i],") {\\n                  k -= ").concat(n[i],";\\n                }\\n                offset += k * ").concat(r[i],";\\n            ");return"\\n              var offset = 0;\\n              var k = 0;\\n              ".concat(o,"\\n              value = x[offset];\\n          ")}(e,0,n,r,a.pads);default:throw new Error("Invalid mode")}}(l,0,o,s,n,r);return"\\n              ".concat(e.declareVariables(p,l),"\\n              ").concat(l.impl(),"\\n              ").concat(e.mainStart(),"\\n              ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(u),"\\n\\n              let indices = ").concat(l.offsetToIndices("global_idx"),";\\n\\n              var value = ").concat(r,"(0);\\n              ").concat(f,"\\n              output[global_idx] = value;\\n          }")}(t,e,n,"f32")},dispatchGroup:function(){return{x:Math.ceil(a.ShapeUtil.size(o)/64)}}})}(e,u,n)}})};t.pad=function(e,t){!function(e){if(!e||e.length<1)throw new Error("Too few inputs");if(1!==e[0].dataType)throw new Error("Input type must be float.");if(e.length>=2){var t=2*e[0].dims.length===e[1].dims[0];if(4===e.length&&(t=2*e[3].dims[0]===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}}(e.inputs),e.compute(u(e.inputs,t),{inputs:[0]})},t.parsePadAttributes=function(e){var t=e.mode,n=e.value,r=e.pads;return(0,o.createAttributeWithCacheKey)({mode:t,value:n,pads:r})}},5262:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.globalMaxPool=t.parseGlobalMaxPoolAttributes=t.parseMaxPoolAttributes=t.maxPool=t.globalAveragePool=t.parseGlobalAveragePoolAttributes=t.averagePool=t.parseAveragePoolAttributes=void 0;var o=n(6952),i=n(387),c=n(1163),u=n(2075),s=function(e){if(!e||1!==e.length)throw new Error("Pool ops requires 1 input.");if(4!==e[0].dims.length)throw new Error("Pool ops supports 2-D inputs only for now.")},l=function(e,t,n){var r="NHWC"===t.format,a=r?[e.dims[0],e.dims[3],e.dims[1],e.dims[2]]:e.dims.slice(),i=Object.hasOwnProperty.call(t,"dilations"),c=t.kernelShape.slice(),u=t.strides.slice(),s=i?t.dilations.slice():[],l=t.pads.slice();o.PoolConvUtil.adjustPoolAttributes(n,a,c,u,s,l);var p=o.PoolConvUtil.computePoolOutputShape(n,a,u,s,c,l,t.autoPad),f=Object.assign({},t);return i?Object.assign(f,{kernelShape:c,strides:u,pads:l,dilations:s,cacheKey:t.cacheKey}):Object.assign(f,{kernelShape:c,strides:u,pads:l,cacheKey:t.cacheKey}),[f,r?[p[0],p[2],p[3],p[1]]:p]},p=function(e,t,n,r,a,i,c){var s="NHWC"===r.format,l=t.shape,p=t.type.value,f=l.length,d=o.ShapeUtil.size(n),h=(0,u.outputVariable)("output",t.type.tensor,n);if(r.kernelShape.length<=2){var g,v=r.kernelShape[r.kernelShape.length-1],m=r.strides[r.strides.length-1],y=r.pads[r.pads.length/2-1],b=f-(s?2:1),w="",S="";if(g=y+r.pads[r.pads.length-1]!==0?"\\n              for (var i: u32 = 0u; i < ".concat(v,"u; i++) {\\n                xIndices[").concat(b,"] = indices[").concat(b,"] * ").concat(m," - ").concat(y," + i;\\n                if (xIndices[").concat(b,"] < 0 || xIndices[").concat(b,"] >= ").concat(l[b],") {\\n                  pad++;\\n                  continue;\\n                }\\n                let x_val = x[").concat(t.indicesToOffset("xIndices"),"];\\n                ").concat(a,"\\n              }"):"\\n              for (var i: u32 = 0u; i < ".concat(v,"u; i++) {\\n                xIndices[").concat(b,"] = indices[").concat(b,"] * ").concat(m," - ").concat(y," + i;\\n                let x_val = x[").concat(t.indicesToOffset("xIndices"),"];\\n                ").concat(a,"\\n              }"),2===r.kernelShape.length){var _=r.kernelShape[r.kernelShape.length-2],x=r.strides[r.strides.length-2],T=r.pads[r.pads.length/2-2],O=r.pads[r.pads.length-2],I=f-(s?3:2),A=l[I];w=T+O!==0?"\\n                for (var j: u32 = 0u; j < ".concat(_,"u; j++) {\\n                  xIndices[").concat(I,"] = indices[").concat(I,"] * ").concat(x," - ").concat(T," + j;\\n                  if (xIndices[").concat(I,"] < 0 || xIndices[").concat(I,"] >= ").concat(A,") {\\n                    pad+= ").concat(v,";\\n                    continue;\\n                  }\\n              "):"\\n                for (var j: u32 = 0u; j < ".concat(_,"u; j++) {\\n                  xIndices[").concat(I,"] = indices[").concat(I,"] * ").concat(x," - ").concat(T," + j;\\n                "),S="\\n              }\\n            "}return"\\n            ".concat(e.declareVariables(t,h),"\\n\\n            ").concat(e.mainStart(),"\\n              ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(d),"\\n\\n              let indices = ").concat(h.offsetToIndices("global_idx"),";\\n              var xIndices = ").concat(h.offsetToIndices("global_idx"),";\\n\\n              var value: ").concat(p," = ").concat(p,"(").concat(c,");\\n              var pad = 0;\\n              ").concat(w,"\\n              ").concat(g,"\\n              ").concat(S,"\\n              ").concat(i,"\\n\\n              output[global_idx] = value;\\n            }")}if(s)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");var E,C=o.ShapeUtil.size(r.kernelShape),P=o.ShapeUtil.computeStrides(r.kernelShape),k=P.length,M=r.pads.length;return E=r.pads.reduce((function(e,t){return e+t}))?"\\n                if (xIndices[j] >= inputDims[j]) {\\n                  pad++;\\n                  isPad = true;\\n                  break;\\n                }\\n              }\\n              if (!isPad) {\\n                let x_val = x[".concat(t.indicesToOffset("xIndices"),"];\\n                ").concat(a,"\\n              }"):"\\n              }\\n              let x_val = x[".concat(t.indicesToOffset("xIndices"),"];\\n              ").concat(a,"\\n            "),"\\n            ".concat(e.declareVariables(t,h),"\\n\\n            const pads = array<u32, ").concat(M,">(").concat(r.pads.map((function(e){return"".concat(e,"u")})).join(","),");\\n            const inputDims = array<u32, ").concat(f,">(").concat(l.map((function(e){return"".concat(e,"u")})).join(","),");\\n            const kernelStrides = array<u32, ").concat(k,">(").concat(P.map((function(e){return"".concat(e,"u")})).join(","),");\\n            const strides = array<u32, ").concat(k,">(").concat(r.strides.map((function(e){return"".concat(e,"u")})).join(","),");\\n\\n            ").concat(e.mainStart(),"\\n              ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(d),"\\n\\n              let indices = ").concat(h.offsetToIndices("global_idx"),";\\n              let xIndices = ").concat(h.offsetToIndices("global_idx"),";\\n\\n              var offsets: array<u32, ").concat(k,">;\\n\\n              var value = ").concat(h.type.value,"(").concat(c,");\\n              var pad = 0;\\n              var isPad = false;\\n\\n              for (var i: u32 = 0u; i < ").concat(C,"u; i++) {\\n                var offset = i;\\n                for (var j = 0u; j < ").concat(k-1,"u; j++) {\\n                  offsets[j] = offset / kernelStrides[j];\\n                  offset -= offsets[j] * kernelStrides[j];\\n                }\\n                offsets[").concat(k-1,"] = offset;\\n\\n                isPad = false;\\n                for (var j = ").concat(f-k,"u; j < ").concat(f,"u; j++) {\\n                  xIndices[j] = indices[j] * strides[j - ").concat(f-k,"u]\\n                    + offsets[j - ").concat(f-k,"u] - pads[j - 2u];\\n                  ").concat(E,"\\n              }\\n              ").concat(i,"\\n\\n              output[global_idx] = value;\\n            }")},f=function(e){return{format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}},d=function(e,t,n,i){var s=a(l(e,i,n),2),f=s[0],d=s[1],h=o.ShapeUtil.size(f.kernelShape),g=(0,u.inputVariable)("x",e.dataType,e.dims),v=g.type.value,m="";return f.countIncludePad?m+="value /= ".concat(v,"(").concat(h,");"):m+="value /= ".concat(v,"(").concat(h," - pad);"),r(r({},t),{outputs:[{dims:d,dataType:e.dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(e){return p(e,g,d,f,"value += x_val;",m,"0.0")},dispatchGroup:function(){return{x:Math.ceil(o.ShapeUtil.size(d)/64)}}})};t.parseAveragePoolAttributes=function(e){var t=0!==e.count_include_pad,n=f(e);if(0!==n.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,i.createAttributeWithCacheKey)(r({countIncludePad:t},n))},t.averagePool=function(e,t){s(e.inputs);var n={name:"AveragePool",inputTypes:[c.GpuDataType.default],cacheHint:t.cacheKey};e.compute(r(r({},n),{get:function(){return d(e.inputs[0],n,!1,t)}}))};var h={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""};t.parseGlobalAveragePoolAttributes=function(e){var t=e.format;return r(r({format:t},h),{cacheKey:t})},t.globalAveragePool=function(e,t){s(e.inputs);var n={name:"GlobalAveragePool",inputTypes:[c.GpuDataType.default],cacheHint:t.cacheKey};e.compute(r(r({},n),{get:function(){return d(e.inputs[0],n,!0,t)}}))};var g=function(e,t,n,i){var s=a(l(e,i,n),2),f=s[0],d=s[1],h=(0,u.inputVariable)("x",e.dataType,e.dims);return r(r({},t),{outputs:[{dims:d,dataType:e.dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(e){return p(e,h,d,f,"\\n      value = max(x_val, value);\\n    ","","-1e5")},dispatchGroup:function(){return{x:Math.ceil(o.ShapeUtil.size(d)/64)}}})};t.maxPool=function(e,t){s(e.inputs);var n={name:"MaxPool",inputTypes:[c.GpuDataType.default],cacheHint:t.cacheKey};e.compute(r(r({},n),{get:function(){return g(e.inputs[0],n,!1,t)}}))},t.parseMaxPoolAttributes=function(e){var t=e.storage_order,n=e.dilations,a=f(e);if(0!==t)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==a.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,i.createAttributeWithCacheKey)(r({storageOrder:t,dilations:n},a))},t.parseGlobalMaxPoolAttributes=function(e){var t=e.format;return r(r({format:t},h),{cacheKey:t})},t.globalMaxPool=function(e,t){s(e.inputs);var n={name:"GlobalMaxPool",inputTypes:[c.GpuDataType.default],cacheHint:t.cacheKey};e.compute(r(r({},n),{get:function(){return g(e.inputs[0],n,!0,t)}}))}},6031:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseReduceAttributes=t.reduceSumSquare=t.reduceSum=t.reduceProd=t.reduceMin=t.reduceMean=t.reduceMax=t.reduceLogSumExp=t.reduceL2=t.reduceL1=t.reduceLogSum=t.createReduceProgramInfo=void 0;var a=n(6952),o=n(387),i=n(1163),c=n(2075),u=function(e){if(!e||0===e.length||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(2===e.length&&1!==e[1].dims.length)throw new Error("Invalid axes input dims.")},s=function(e){return["","","var value = ".concat(e.getByOffset("inputOffset"),";"),""]};t.createReduceProgramInfo=function(e,t,n,o,u,s,l){void 0===s&&(s=!1),void 0===l&&(l=!1);var p=[],f=t[0].dims,d=a.ShapeUtil.normalizeAxes(o,t[0].dims.length),h=!l&&0===d.length;f.forEach((function(e,t){h||d.indexOf(t)>=0?s&&p.push(1):p.push(e)}));for(var g=[],v=(0,c.inputVariable)("_A",t[0].dataType,f),m=(0,c.outputVariable)("output",u,p),y=n(v,m,d),b="inputOffset = ".concat(v.indicesToOffset("inputIndices"),";"),w="let ".concat(b,";"),S="var ".concat(b,";"),_=""===y[1]?"":S,x=(""===y[1]?w:b)+"\\n"+y[2],T=0,O=0;T<t[0].dims.length;T++)h||d.indexOf(T)>=0?(s&&O++,x="for(var j".concat(T,": u32 = 0; j").concat(T," < ").concat(t[0].dims[T],"; j").concat(T,"++) {\\n                ").concat(y[2].includes("lastIndex")?"let lastIndex = j".concat(T,";"):"","\\n                ").concat(v.indicesSet("inputIndices",T,"j".concat(T)),"\\n                ").concat(x,"\\n              }")):(g.push("".concat(v.indicesSet("inputIndices",T,m.indicesGet("outputIndices",O)),";")),O++);var I=a.ShapeUtil.size(p);return r(r({},e),{getShaderSource:function(e){return"\\n        ".concat(e.declareVariables(v,m),"\\n\\n        ").concat(e.mainStart(),"\\n          ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(I),"\\n          var inputIndices: ").concat(v.type.indices,";\\n          let outputIndices = ").concat(m.offsetToIndices("global_idx"),";\\n\\n          ").concat(g.join("\\n"),"\\n          ").concat(y[0],"       // init ops for reduce max/min\\n          ").concat(_,"\\n          ").concat(y[1],"\\n          ").concat(x,"\\n          ").concat(y[3],"\\n          ").concat(4===y.length?m.setByOffset("global_idx","value"):y.slice(4).join("\\n"),"\\n        }")},outputs:[{dims:p,dataType:u,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(I/64)}}})};var l=function(e,n,a,c){var u=1===e.length?a:function(e,t){var n=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach((function(e){return n.push(Number(e))})),(0,o.createAttributeWithCacheKey)({axes:n,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})}(e,a),l={name:n,inputTypes:[i.GpuDataType.default],cacheHint:u.cacheKey+"_"+e[0].dims.map((function(e){return e.toString()})).join(",")};return r(r({},l),{get:function(){return(0,t.createReduceProgramInfo)(l,[e[0]],u.noopWithEmptyAxes&&0===u.axes.length?s:c,u.axes,e[0].dataType,u.keepDims,u.noopWithEmptyAxes)}})};t.reduceLogSum=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceLogSum",t,(function(e,t){return["var value = ".concat(t.type.storage,"(0);"),"","value += ".concat(e.getByOffset("inputOffset"),";"),"value = log(value);"]})),{inputs:[0]})},t.reduceL1=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceL1",t,(function(e,t){return["var value = ".concat(t.type.storage,"(0);"),"","value += abs(".concat(e.getByOffset("inputOffset"),");"),""]})),{inputs:[0]})},t.reduceL2=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceL2",t,(function(e,t){return["var t = ".concat(t.type.value,"(0); var value = ").concat(t.type.value,"(0);"),"","t = ".concat(e.getByOffset("inputOffset"),"; value += (t * t);"),"value = sqrt(value);"]})),{inputs:[0]})},t.reduceLogSumExp=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceLogSumExp",t,(function(e,t){return["var value = ".concat(t.type.storage,"(0);"),"","value += exp(".concat(e.getByOffset("inputOffset"),");"),"value = log(value);"]})),{inputs:[0]})},t.reduceMax=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceMax",t,(function(e,t,n){for(var r=[],a=0;a<e.shape.length;a++)(n.indexOf(a)>=0||0===n.length)&&r.push(e.indicesSet("inputIndices",a,0));return["".concat(r.join("\\n")),"var value = ".concat(e.getByOffset("inputOffset"),";"),"value = max(value, ".concat(e.getByOffset("inputOffset"),");"),""]})),{inputs:[0]})},t.reduceMean=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceMean",t,(function(e,t,n){for(var r=1,a=0;a<e.shape.length;a++)(n.indexOf(a)>=0||0===n.length)&&(r*=e.shape[a]);return["var sum = f32(0);","","sum += f32(".concat(e.getByOffset("inputOffset"),");"),"let value = ".concat(t.type.value,"(sum / ").concat(r,");")]})),{inputs:[0]})},t.reduceMin=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceMin",t,(function(e,t,n){for(var r=[],a=0;a<e.shape.length;a++)(n.indexOf(a)>=0||0===n.length)&&r.push("inputIndices[".concat(a,"] = 0;"));return["".concat(r.join("\\n")),"var value = ".concat(e.getByOffset("inputOffset"),";"),"value = min(value, ".concat(e.getByOffset("inputOffset"),");"),""]})),{inputs:[0]})},t.reduceProd=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceProd",t,(function(e,t){return["var value = ".concat(t.type.storage,"(1);"),"","value *= ".concat(e.getByOffset("inputOffset"),";"),""]})),{inputs:[0]})},t.reduceSum=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceSum",t,(function(e,t){return["var value = ".concat(t.type.storage,"(0);"),"","value += ".concat(e.getByOffset("inputOffset"),";"),""]})),{inputs:[0]})},t.reduceSumSquare=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceSumSquare",t,(function(e,t){return["var t = ".concat(t.type.value,"(0); var value = ").concat(t.type.value,"(0);"),"","t = ".concat(e.getByOffset("inputOffset"),"; value += t * t;"),""]})),{inputs:[0]})},t.parseReduceAttributes=function(e){return(0,o.createAttributeWithCacheKey)(e)}},4566:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseResizeAttributes=t.resize=t.createResizeProgramInfoLoader=void 0;var i=n(6952),c=n(387),u=n(1163),s=n(2075);t.createResizeProgramInfoLoader=function(e,t,n,c,l,p){var f={name:"Resize",inputTypes:[u.GpuDataType.default],cacheHint:t.cacheKey+n.toString()+(c.length>0?"_scales_"+c.toString():"")+(l.length>0?"_sizes_"+l.toString():"")};return r(r({},f),{get:function(){return function(e,t,n,c,l,p,f){var d=t.dims,h=function(e,t,n){var r=new Array(n).fill(0).concat(new Array(n).fill(1)),a=0===e.length?r:e.slice();return t.length>0?(t.forEach((function(e,o){r[e]=a[o],r[o+n]=a[t.length+o]})),r):a}(f,n.axes,d.length),g=function(e,t,n,r){var i=[];if(n.length>0)if(r.length>0){if(e.forEach((function(e){return i.push(e)})),Math.max.apply(Math,o([],a(r),!1))>e.length)throw new Error("axes is out of bound");r.forEach((function(e,t){return i[e]=n[t]}))}else n.forEach((function(e){return i.push(e)}));else{if(0===t.length)throw new Error("Resize requires either scales or sizes.");i=e.map((function(e,n){return Math.round(e*t[n])}))}return i}(d,l,p,n.axes),v=l.slice();0===l.length&&(v=d.map((function(e,t){return 0===e?1:g[t]/e})),"stretch"!==n.keepAspectRatioPolicy&&(g=function(e,t,n,r){var i=function(){switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min.apply(Math,o(o([],a(r.axes.map((function(e){return n[e]}))),!1),[Number.MAX_VALUE],!1)):Math.min.apply(Math,o(o([],a(n),!1),[Number.MAX_VALUE],!1));case"not_smaller":return r.axes.length>0?Math.max.apply(Math,o(o([],a(r.axes.map((function(e){return n[e]}))),!1),[Number.MIN_VALUE],!1)):Math.max.apply(Math,o(o([],a(n),!1),[Number.MIN_VALUE],!1));default:throw new Error("Keep aspect ratio policy ".concat(r.keepAspectRatioPolicy," is not supported"))}}();n.fill(1,0,n.length);var c=e.slice();return r.axes.length>0?(r.axes.forEach((function(e){return n[e]=i})),r.axes.forEach((function(t){return c[t]=Math.round(e[t]*n[t])}))):(n.fill(i,0,n.length),c.forEach((function(e,t){return c[t]=Math.round(e*n[t])}))),c}(d,0,v,n)));var m=(0,s.outputVariable)("output",t.dataType,g),y=(0,s.inputVariable)("input",t.dataType,d),b=i.ShapeUtil.size(g),w=d.length===g.length&&d.every((function(e,t){return e===g[t]})),S="tf_crop_and_resize"===n.coordinateTransformMode;return r(r({},e),{getShaderSource:function(e){return"\\n      ".concat((t=n.coordinateTransformMode,"fn getOriginalCoordinateFromResizedCoordinate(xResized: f32, xScale: f32, lengthResized: f32,    lengthOriginal: f32, roiStart: f32, roiEnd: f32) -> f32 { "+function(){switch(t){case"asymmetric":return"return xResized / xScale;";case"pytorch_half_pixel":return"if (lengthResized > 1) {                     return (xResized + 0.5) / xScale - 0.5;                   } else {                     return 0.0;                   }";case"tf_half_pixel_for_nn":return"return (xResized + 0.5) / xScale;";case"align_corners":return"if (lengthResized == 1) {                     return 0.0;                   } else {                     return xResized * (lengthOriginal - 1) / (lengthResized - 1);                   }";case"tf_crop_and_resize":return"if (lengthResized > 1) {                     return roiStart * (lengthOriginal - 1) +                           (xResized * (roiEnd - roiStart) * (lengthOriginal - 1)) / (lengthResized - 1);                   } else {                     return 0.5 * (roiStart + roiEnd) * f32(lengthOriginal - 1);                   }";case"half_pixel_symmetric":return["const outputWidth = xScale * lengthResized;","const adjustment = lengthResized / outputWidth;","const center = lengthOriginal / 2;","const offset = center * (1 - adjustment);","return offset + ((xResized + 0.5) / xScale) - 0.5;"].join("\\n");case"half_pixel":return"return ((xResized + 0.5) / xScale) - 0.5;";default:throw new Error("Coordinate transform mode ".concat(t," is not supported"))}}()+"}"),";\\n      ").concat(function(){switch(n.mode){case"nearest":return"\\n              ".concat(function(e,t){return"\\n    fn checkInputIndices(inputIndices: ".concat(e.type.indices,") -> bool {\\n      const inputShape = array<u32, ").concat(t.length,">(").concat(t.map((function(e){return"".concat(e,"u")})).join(","),");\\n      for (var i:u32 = 0; i < ").concat(t.length,"; i++) {\\n        var inputIndex = ").concat(1===t.length?"inputIndices":"inputIndices[i]",";\\n        if (inputIndex < 0 || inputIndex >= inputShape[i]) {\\n          return false;\\n        }\\n      }\\n      return true;\\n    }")}(y,d),";\\n              ").concat(function(e,t){return"fn getNearestPixelFromOriginal(xOriginal: f32, isDownSample: bool) -> f32 {"+function(){switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error("Nearest mode ".concat(e," is not supported"))}}()+"}"}(n.nearestMode,c),";\\n              ").concat(function(e,t,n,r,a,o,i){return"\\n    fn calculateInputIndicesFromOutputIndices(outputIndices: ".concat(t.type.indices,") -> ").concat(e.type.indices," {\\n        const inputShape = array<u32, ").concat(n.length,">(").concat(n.map((function(e){return"".concat(e,"u")})).join(","),");\\n        const outputShape = array<u32, ").concat(r.length,">(").concat(r.map((function(e){return"".concat(e,"u")})).join(","),");\\n        const scales = array<f32, ").concat(a.length,">(").concat(a.map((function(e){return"".concat(e,"f")})).join(","),");\\n        const roi = array<f32, ").concat(o.length,">(").concat(o.map((function(e){return"".concat(e,"f")})).join(","),");\\n        var inputIndices: ").concat(e.type.indices,";\\n        for (var i:u32 = 0; i < ").concat(r.length,"; i++) {\\n          var outputIndex = ").concat(1===r.length?"outputIndices":"outputIndices[i]",";\\n          var inputIndex: u32;\\n          if (scales[i] == 1.0) {\\n            inputIndex = outputIndex;\\n          } else {\\n            var original_idx = getOriginalCoordinateFromResizedCoordinate(f32(outputIndex), scales[i],\\n                    f32(outputShape[i]), f32(inputShape[i]), roi[i], roi[i + ").concat(n.length,"]);\\n            if (!").concat(i," || (original_idx >= 0 && original_idx < f32(inputShape[i]))) {\\n              if (original_idx < 0) {\\n                inputIndex = 0;\\n              } else if (original_idx > (f32(inputShape[i]) - 1)) {\\n                inputIndex = inputShape[i] - 1;\\n              } else {\\n                inputIndex = u32(getNearestPixelFromOriginal(original_idx, scales[i] < 1));\\n              }\\n            } else {\\n              inputIndex = u32(original_idx);\\n            }\\n          }\\n          ").concat(e.indicesSet("inputIndices","i","inputIndex"),"\\n        }\\n        return inputIndices;\\n    }")}(y,m,d,g,v,h,S),";\\n              ");case"linear":return"\\n              ".concat(function(e,t,n,r,a){return"\\n    fn calculateOriginalIndicesFromOutputIndices(outputIndices: ".concat(e.type.indices,") -> array<f32, ").concat(n.length,"> {\\n      const inputShape = array<u32, ").concat(t.length,">(").concat(t.map((function(e){return"".concat(e,"u")})).join(","),");\\n      const outputShape = array<u32, ").concat(n.length,">(").concat(n.map((function(e){return"".concat(e,"u")})).join(","),");\\n      const scales = array<f32, ").concat(r.length,">(").concat(r.map((function(e){return"".concat(e,"f")})).join(","),");\\n      const roi = array<f32, ").concat(a.length,">(").concat(a.map((function(e){return"".concat(e,"f")})).join(","),");\\n      var originalIndices: array<f32, ").concat(n.length,">;\\n      for (var i:u32 = 0; i < ").concat(n.length,"; i++) {\\n        var outputIndex = ").concat(1===n.length?"outputIndices":"outputIndices[i]",";\\n        if (scales[i] == 1.0) {\\n          originalIndices[i] = f32(outputIndex);\\n        } else {\\n          originalIndices[i] = getOriginalCoordinateFromResizedCoordinate(f32(outputIndex), scales[i],\\n                f32(outputShape[i]), f32(inputShape[i]), roi[i], roi[i + ").concat(t.length,"]);\\n        }\\n      }\\n      return originalIndices;\\n    }")}(m,d,g,v,h),";\\n              ").concat(function(e,t,n,r,o,i,c){var u=a(2===n.length?[-1,0,1,-1]:1===o[1]?[0,2,3,1]:[0,1,2,3],4),s=u[0],l=u[1],p=u[2],f=u[3];return"\\n    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> f32 {\\n      var inputIndices: ".concat(e.type.indices,";\\n      inputIndices[").concat(l,"] = max(0, min(row, ").concat(n[l]," - 1));\\n      inputIndices[").concat(p,"] = max(0, min(col, ").concat(n[p]," - 1));\\n      if (").concat(n.length," > 2) {\\n        inputIndices[").concat(f,"] = channel;\\n        inputIndices[").concat(s,"] = batch;\\n      };\\n      return input[").concat(e.indicesToOffset("inputIndices"),"];\\n    }\\n\\n    fn bilinearInterpolation(outputIndices: ").concat(t.type.indices,") -> f32 {\\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(outputIndices);\\n      var row:f32 = originalIndices[").concat(l,"];\\n      var col:f32 = originalIndices[").concat(p,"];\\n      if (").concat(i," && (row < 0 || row > (").concat(n[l]," - 1) || col < 0 || col > ").concat(n[p]," - 1)) {\\n        return ").concat(c,";\\n      }\\n      row = max(0, min(row, ").concat(n[l]," - 1));\\n      col = max(0, min(col, ").concat(n[p]," - 1));\\n      var row1: u32 = u32(row);\\n      var col1: u32 = u32(col);\\n      var row2: u32 = u32(row + 1);\\n      var col2: u32 = u32(col + 1);\\n      var channel: u32 = 0;\\n      var batch: u32 = 0;\\n      if (").concat(n.length>2,") {\\n        channel = u32(originalIndices[").concat(f,"]);\\n        batch = u32(originalIndices[").concat(s,"]);\\n      }\\n      var x11: f32 = getInputValue(batch, channel, row1, col1);\\n      var x12: f32 = getInputValue(batch, channel, row1, col2);\\n      var x21: f32 = getInputValue(batch, channel, row2, col1);\\n      var x22: f32 = getInputValue(batch, channel, row2, col2);\\n      var dx1: f32 = row - f32(row1);\\n      var dx2: f32 = f32(row2 ) - row;\\n      var dy1 = col - f32(col1);\\n      var dy2 = f32(col2) - col;\\n      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);\\n    }")}(y,m,d,0,v,S,n.extrapolationValue),";\\n              ");case"cubic":return"\\n            ".concat(function(e,t,n,r,o,i,c,u,s,l){var p=a(2===n.length?[0,1]:1===o[1]?[2,3]:[1,2],2),f=p[0],d=p[1],h=function(a){var c=a===f?"row":"col";return"\\n      fn ".concat(c,"CubicInterpolation(inputIndices: ").concat(e.type.indices,", outputIndices: ").concat(t.type.indices,") -> f32 {\\n        var outputIndex = ").concat(1===r.length?"outputIndices":"outputIndices[".concat(a,"]"),";\\n        var originalIdx: f32 = getOriginalCoordinateFromResizedCoordinate(f32(outputIndex), ").concat(o[a],",\\n        f32(").concat(r[a],"), f32(").concat(n[a],"), ").concat(i[a],", ").concat(i[a]," + ").concat(n.length,");\\n        var fractOriginalIdx: f32 = originalIdx - floor(originalIdx);\\n        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);\\n\\n        if (").concat(u," && (originalIdx < 0 || originalIdx > (").concat(n[a]," - 1))) {\\n          return ").concat(s,";\\n        }\\n        var data: array<f32, 4> = array<f32, 4>(0.0, 0.0, 0.0, 0.0);\\n        for (var i: i32 = -1; i < 3; i++) {\\n          var ").concat(c,": f32 = originalIdx + f32(i);\\n          if (").concat(c," < 0 || ").concat(c," >= ").concat(n[a],") {\\n            if (").concat(l,") {\\n              coefs[i + 1] = 0.0;\\n              continue;\\n            } else if (").concat(u,") {\\n              return ").concat(s,";\\n            } else {\\n              ").concat(c," = max(0, min(").concat(c,", ").concat(n[a]," - 1));\\n            }\\n          }\\n          var inputIndicesCopy: ").concat(e.type.indices," = inputIndices;\\n          inputIndicesCopy[").concat(a,"] = u32(").concat(c,");\\n          data[i + 1] = ").concat(a===f?"input[".concat(e.indicesToOffset("inputIndicesCopy"),"];"):"\\n                                               rowCubicInterpolation(inputIndicesCopy, outputIndices);","\\n        }\\n        return cubicInterpolation1D(data, coefs);\\n      }")};return"\\n    ".concat(h(f),";\\n    ").concat(h(d),";\\n  fn getCubicInterpolationCoefs(s: f32) -> array<f32, 4> {\\n    var absS = abs(s);\\n    var coeffs: array<f32, 4> = array<f32, 4>(0.0, 0.0, 0.0, 0.0);\\n    var oneMinusAbsS: f32 = 1.0 - absS;\\n    var twoMinusAbsS: f32 = 2.0 - absS;\\n    var onePlusAbsS: f32 = 1.0 + absS;\\n    coeffs[0] = ((").concat(c," * onePlusAbsS - 5 * ").concat(c,") * onePlusAbsS + 8 * ").concat(c,") * onePlusAbsS - 4 * ").concat(c,";\\n    coeffs[1] = ((").concat(c," + 2) * absS - (").concat(c," + 3)) * absS * absS + 1;\\n    coeffs[2] = ((").concat(c," + 2) * oneMinusAbsS - (").concat(c," + 3)) * oneMinusAbsS * oneMinusAbsS + 1;\\n    coeffs[3] = ((").concat(c," * twoMinusAbsS - 5 * ").concat(c,") * twoMinusAbsS + 8 * ").concat(c,") * twoMinusAbsS - 4 * ").concat(c,";\\n    return coeffs;\\n  }\\n\\n  fn cubicInterpolation1D(x: array<f32, 4>, coefs: array<f32, 4>) -> f32 {\\n    var coefsSum: f32 = coefs[0] + coefs[1] + coefs[2] + coefs[3];\\n    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;\\n  }\\n\\n  fn bicubicInterpolation(outputIndices: ").concat(t.type.indices,") -> f32 {\\n    var inputIndices: ").concat(e.type.indices," = outputIndices;\\n    return colCubicInterpolation(inputIndices, outputIndices);\\n  }\\n    ")}(y,m,d,g,v,h,n.cubicCoeffA,S,n.extrapolationValue,n.excludeOutside),";\\n            ");default:throw Error("Invalid resize mode")}}(),";\\n      ").concat(e.declareVariables(y,m),"\\n      ").concat(e.mainStart(),"\\n        ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(b),"\\n        if (").concat(w,") {\\n          output[global_idx] = input[global_idx];\\n        } else {\\n          let outputIndices = ").concat(m.offsetToIndices("global_idx"),";\\n          var inputIndices: ").concat(y.type.indices,";\\n          ").concat(function(){switch(n.mode){case"nearest":return"inputIndices = calculateInputIndicesFromOutputIndices(outputIndices);\\n                  if (checkInputIndices(inputIndices)) {\\n                    output[global_idx] = input[".concat(y.indicesToOffset("inputIndices"),"];\\n                  } else {\\n                    output[global_idx] = ").concat(n.extrapolationValue,";\\n                  }");case"linear":return"output[global_idx] = bilinearInterpolation(outputIndices);";case"cubic":return"output[global_idx] = bicubicInterpolation(outputIndices);";default:throw Error("Unsupported resize mode: ".concat(n.mode))}}(),";\\n        }\\n      }");var t},outputs:[{dims:g,dataType:t.dataType,gpuDataType:u.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(b/64)}}})}(f,e,t,n,c,l,p)}})},t.resize=function(e,n){var r=[],o=[],i=[],c=function(e){var t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]}(e);(function(e,t,n,r,o,i){var c=a(n>10?[1,2,3]:[-1,e.length>1?1:-1,-1],3),u=c[0],s=c[1],l=c[2],p=e[0].dims.length;if(u>0&&e.length>u&&e[u].dims.length>0)e[u].getFloat32Array().forEach((function(e){return i.push(e)}));else if("tf_crop_and_resize"===t.coordinateTransformMode)throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(s>0&&e.length>s&&e[s].dims.length>0){if(e[s].getFloat32Array().forEach((function(e){return r.push(e)})),0!==r.length&&r.length!==p&&n>=18&&r.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");!function(e,t){if(e.every((function(e){return e>0||function(){throw new Error("Resize requires scales input values to be positive")}})),e.length>0)if("linear"===t.mode){if(!(2===e.length||4===e.length&&1===e[0]&&1===e[1]||4===e.length&&1===e[0]&&1===e[3]))throw new Error("Resize requires scales input size to be 2 or 4 for linear mode")}else if("cubic"===t.mode&&!(2===e.length||4===e.length&&1===e[0]&&1===e[1]||4===e.length&&1===e[0]&&1===e[3]))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}(r,t),t.axes.length>0&&function(e,t,n){t.every((function(e){return e>=0&&e<n||function(){throw new Error("Resize requires axes input values to be positive and less than rank")}}));var r=new Array(n).fill(1);return t.forEach((function(t,n){return r[t]=e[n]})),r}(r,t.axes,p).forEach((function(e,t){return r[t]=e}))}if(l>0&&e.length>l&&(e[l].getBigInt64Array().forEach((function(e){return o.push(Number(e))})),o.length!==p||n>=18&&o.length===t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(r.length!==t.axes.length)throw new Error(\'Resize requires "scales" input size to be of axes rank when axes attributes is specified\');if(o.length!==t.axes.length)throw new Error(\'Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified\')}if(void 0!==r&&void 0!==o&&r.length>0&&o.length>p)throw new Error("Resize requires only of scales or sizes to be specified")})(e.inputs,n,c,r,o,i),e.compute((0,t.createResizeProgramInfoLoader)(e.inputs[0],n,c,r,o,i),{inputs:[0]})},t.parseResizeAttributes=function(e){var t=e.antialias,n=e.axes,r=e.coordinateTransformMode,a=e.cubicCoeffA,o=0!==e.excludeOutside,i=e.extrapolationValue,u=e.keepAspectRatioPolicy,s=e.mode,l=""===e.nearestMode?"simple":e.nearestMode;return(0,c.createAttributeWithCacheKey)({antialias:t,axes:n,coordinateTransformMode:r,cubicCoeffA:a,excludeOutside:o,extrapolationValue:i,keepAspectRatioPolicy:u,mode:s,nearestMode:l})}},8906:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSkipLayerNormAttributes=t.skipLayerNorm=void 0;var a=n(6952),o=n(387),i=n(1163),c=n(2075);t.skipLayerNorm=function(e,t){!function(e){if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("inputs should be float type");var t=e[0],n=e[1],r=e[2];if(t.dataType!==n.dataType||t.dataType!==r.dataType)throw new Error("All inputs must have the same data type");if(3!==t.dims.length&&2!==t.dims.length)throw new Error("Input must be 2D or 3D");if(3!==n.dims.length&&2!==n.dims.length)throw new Error("Skip must be 2D or 3D");var a=t.dims[t.dims.length-1],o=t.dims[t.dims.length-2];if(n.dims[n.dims.length-1]!==a)throw new Error("Skip must have the same hidden size as input");if(n.dims[n.dims.length-2]!==o)throw new Error("Skip must have the same sequence length as input");if(1!==r.dims.length)throw new Error("Gamma must be 1D");if(r.dims[r.dims.length-1]!==a)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){var i=e[3];if(1!==i.dims.length)throw new Error("Beta must be 1D");if(i.dims[i.dims.length-1]!==a)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){var c=e[4];if(1!==c.dims.length)throw new Error("Bias must be 1D");if(c.dims[c.dims.length-1]!==a)throw new Error("Bias must have the same hidden size as input")}}(e.inputs);var n=[0];e.outputCount>1&&n.push(-3),e.outputCount>2&&n.push(-3),e.outputCount>3&&n.push(3),e.compute(function(e,t,n,o){var u={name:"SkipLayerNormalization",inputTypes:new Array(e.length).fill(i.GpuDataType.default),cacheHint:t.cacheKey};return r(r({},u),{get:function(){return function(e,t,n,o,u){var s=t[0].dims,l=s,p=a.ShapeUtil.size(s),f=s.slice(-1)[0],d=u?s.slice(0,-1).concat(1):[],h=t.length>3,g=t.length>4,v=(0,c.tensorTypeToWsglStorageType)(t[0].dataType),m=u&&o>1,y=u&&o>2,b=o>3,w=0,S=[{dims:l,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}];return o>1&&S.push({dims:d,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}),o>2&&S.push({dims:d,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}),o>3&&S.push({dims:s,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}),r(r({},e),{getShaderSource:function(e){return"\\n      const hiddenSize: u32 = ".concat(f,";\\n      const epsilon: f32 = ").concat(n.epsilon,";\\n\\n      @group(0) @binding(").concat(w++,") var<storage, read> x : array<").concat(v,">;\\n      @group(0) @binding(").concat(w++,") var<storage, read> skip : array<").concat(v,">;\\n      @group(0) @binding(").concat(w++,") var<storage, read> gamma : array<").concat(v,">;\\n      ").concat(h?"@group(0) @binding(".concat(w++,") var<storage, read> beta : array<").concat(v,">;"):"","\\n      ").concat(g?"@group(0) @binding(".concat(w++,") var<storage, read> bias : array<").concat(v,">;"):"","\\n      @group(0) @binding(").concat(w++,") var<storage, read_write> output : array<").concat(v,">;\\n      ").concat(m?"@group(0) @binding(".concat(w++,") var<storage, read_write> meanOutput : array<").concat(v,">;"):"","\\n      ").concat(y?"@group(0) @binding(".concat(w++,") var<storage, read_write> invStdOutput : array<").concat(v,">;"):"","\\n      ").concat(b?"@group(0) @binding(".concat(w++,") var<storage, read_write> inputSkipBiasSum : array<").concat(v,">;"):"","\\n\\n      ").concat(e.mainStart(),"\\n        ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(p/f),"\\n        let offset = global_idx * hiddenSize;\\n        var sum: f32 = 0.0;\\n        var squareSum: f32 = 0.0;\\n        for (var i: u32 = 0; i < hiddenSize; i++) {\\n          let skipValue = skip[offset + i];\\n          let biasValue = ").concat(g?"bias[i]":"0.0",";\\n          let inputValue = x[offset + i];\\n          let value = inputValue + skipValue + biasValue;\\n          ").concat(b?"inputSkipBiasSum[offset + i] = value;":"","\\n          output[offset + i] = value;\\n          sum += value;\\n          squareSum += value * value;\\n        }\\n        let mean: f32 = sum / f32(hiddenSize);\\n        let variance: f32 = sqrt(squareSum / f32(hiddenSize) - mean * mean + epsilon);\\n        ").concat(m?"meanOutput[global_idx] = mean;":"","\\n        ").concat(y?"invStdOutput[global_idx] = 1.0 / variance;":"","\\n        for (var i: u32 = 0; i < hiddenSize; i++) {\\n          output[offset + i] = (output[offset + i] - mean) / variance * gamma[i] + ").concat(h?"beta[i]":"0.0",";\\n        }\\n      }")},outputs:S,dispatchGroup:function(){return{x:Math.ceil(p/f/64)}}})}(u,e,t,n,o)}})}(e.inputs,t,e.outputCount,!1),{outputs:n})},t.parseSkipLayerNormAttributes=function(e){var t=e.epsilon;return(0,o.createAttributeWithCacheKey)({epsilon:t})}},5101:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSliceAttributes=t.slice=void 0;var i=n(6952),c=n(387),u=n(1163),s=n(2075),l=function(e,t){var n=[];if(e.length>t)if(7===e[t].dataType)e[t].getBigInt64Array().forEach((function(e){return n.push(Number(e))}));else{if(6!==e[t].dataType)throw new Error("Input ".concat(t," must be an array of int32 or int64"));e[t].getInt32Array().forEach((function(e){return n.push(Number(e))}))}return n},p=function(e,t,n,r,a){var o=e;return e<0&&(o+=n[r[t]]),a[t]<0?Math.max(0,Math.min(o,n[r[t]]-1)):Math.max(0,Math.min(o,n[r[t]]))};t.slice=function(e,t){!function(e,t){if(!e||e.length<1)throw new Error("too few inputs");if(0!==t.axes.length){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((function(t,n){if(6!==e[n+1].dataType&&7!==e[n+1].dataType)throw new Error("Input ".concat(n," must be an array of int32 or int64"))}))}(e.inputs,t);var n=function(e,t){var n=function(e,t){if(e.length>1){var n=l(e,1),r=l(e,2),i=l(e,3);return 0===i.length&&(i=o([],a(Array(e[0].dims.length).keys()),!1)),(0,c.createAttributeWithCacheKey)({starts:n,ends:r,axes:i})}return t}(e,t),f={name:"Slice",inputTypes:[u.GpuDataType.default],cacheHint:n.cacheKey+(e.length>4?"steps_"+e[4].dims.toString():"")};return r(r({},f),{get:function(){return function(e,t,n){var c=t[0].dims,f=i.ShapeUtil.size(c),d=n.axes.length>0?i.ShapeUtil.normalizeAxes(n.axes,c.length):o([],a(Array(c.length).keys()),!1),h=l(t,4);h.forEach((function(e){return 0!==e||function(){throw new Error("step cannot be 0")}})),0===h.length&&(h=Array(d.length).fill(1));var g=n.starts.map((function(e,t){return p(e,t,c,d,h)})),v=n.ends.map((function(e,t){return p(e,t,c,d,h)}));if(d.length!==c.length)for(var m=0;m<c.length;++m)d.includes(m)||(g.splice(m,0,0),v.splice(m,0,c[m]),h.splice(m,0,1));var y=h.map((function(e){return Math.sign(e)}));h.forEach((function(e,t,n){if(e<0){var r=(v[t]-g[t])/e,a=g[t],o=a+r*h[t];g[t]=o,v[t]=a,n[t]=-e}}));var b=c.slice(0);d.forEach((function(e,t){b[e]=Math.ceil((v[e]-g[e])/h[e])}));var w={dims:b,dataType:t[0].dataType,gpuDataType:u.GpuDataType.default},S=(0,s.outputVariable)("output",t[0].dataType,b),_=(0,s.inputVariable)("input",t[0].dataType,c),x=i.ShapeUtil.size(b);return r(r({},e),{getShaderSource:function(e){return"\\n      ".concat(e.declareVariables(_,S),"\\n        const signs = array<i32, ").concat(y.length,">(").concat(y.map((function(e){return"".concat(e,"i")})).join(","),");\\n        const starts = array<u32, ").concat(g.length,">(").concat(g.map((function(e){return"".concat(e,"u")})).join(","),");\\n        const ends = array<u32, ").concat(v.length,">(").concat(v.map((function(e){return"".concat(e,"u")})).join(","),");\\n        const steps = array<u32, ").concat(h.length,">(").concat(h.map((function(e){return"".concat(e,"u")})).join(","),");\\n        const inputShape = array<u32, ").concat(c.length,">(").concat(c.map((function(e){return"".concat(e,"u")})).join(","),");\\n\\n        ").concat(function(e,t,n,r){return"fn calculateInputIndices(outputIndices: ".concat(t.type.indices,") -> ").concat(e.type.indices," {\\n          var inputIndices: ").concat(e.type.indices,";\\n          var carry = 0u;\\n          for (var i = ").concat(n.length,"; i >= 0; i--) {\\n            var outputIndex = ").concat(1===r.length?"outputIndices":"outputIndices[i]",";\\n            var inputIndex = outputIndex * steps[i] + starts[i] + carry;\\n            carry = inputIndex / inputShape[i];\\n            inputIndex = inputIndex % inputShape[i];\\n            if (signs[i] < 0) {\\n              inputIndex = inputShape[i] - inputIndex - 1u + starts[i];\\n            }\\n            ").concat(1===n.length?"inputIndices":"inputIndices[i]"," = inputIndex;\\n          }\\n          return inputIndices;\\n      }")}(_,S,c,b),"\\n        ").concat(e.mainStart(),"\\n          ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(x),"\\n          let outputIndices = ").concat(S.offsetToIndices("global_idx"),";\\n          let inputIndices = calculateInputIndices(outputIndices);\\n          ").concat(S.setByOffset("global_idx",_.getByIndices("inputIndices")),"\\n      }")},outputs:[w],dispatchGroup:function(){return{x:Math.ceil(f/64)}}})}(f,e,n)}})}(e.inputs,t),f=n.get();if(!(i.ShapeUtil.size(f.outputs[0].dims)>0))throw new Error("slice: output size is 0");e.compute(n,{inputs:[0]})},t.parseSliceAttributes=function(e){var t=e.starts,n=e.ends,r=e.axes;return(0,c.createAttributeWithCacheKey)({starts:t,ends:n,axes:r})}},6198:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSoftmaxAttributes=t.softmax=t.softmaxProgramMetadata=void 0;var a=n(6952),o=n(387),i=n(1163),c=n(2075);t.softmaxProgramMetadata={name:"Softmax",inputTypes:[i.GpuDataType.default]},t.softmax=function(e,n){!function(e){if(!e||1!==e.length)throw new Error("Softmax op requires 1 input.")}(e.inputs),e.compute(r(r({},t.softmaxProgramMetadata),{cacheHint:n.cacheKey,get:function(){return function(e,n){var o=(0,c.tensorTypeToWsglStorageType)(e.dataType),u=e.dims,s=a.ShapeUtil.size(u),l=n.axis;if(l<0&&(l=u.length+l),l<u.length-1)throw new Error("softmax only supports last axis for now.");var p=u[l],f=s/p,d="f32"===o?"var threadMax: f32 = -3.402823e+38f;":"var threadMax: f16 = -65504.0h;";return r(r({},t.softmaxProgramMetadata),{outputs:[{dims:u,dataType:e.dataType,gpuDataType:i.GpuDataType.default}],getShaderSource:function(e){return"\\n      var<workgroup> rowMaxShared : ".concat(o,";\\n      var<workgroup> rowSumShared : ").concat(o,";\\n      var<workgroup> threadShared : array<").concat(o,", ").concat(64,">;\\n\\n      @group(0) @binding(0) var<storage, read> x : array<").concat(o,">;\\n      @group(0) @binding(1) var<storage, read_write> result : array<").concat(o,">;\\n\\n      fn getValue(row: i32, col: i32, row_stride: i32) -> ").concat(o," {\\n        let index = row * row_stride + col;\\n        return x[index];\\n      }\\n\\n      fn setValue(row: i32, col: i32, row_stride: i32, value: ").concat(o,") {\\n        let index = row * row_stride + col;\\n        result[index] = value;\\n      }\\n\\n      @compute @workgroup_size(").concat(64,", 1, 1)\\n      fn main(@builtin(local_invocation_id) local_id : vec3<u32>, @builtin(global_invocation_id) global_id : vec3u) {\\n        let gindex = i32(global_id.x);\\n        let lindex = i32(local_id.x);\\n        const wg = ").concat(64,";\\n        let row = gindex / wg;\\n        let cols = ").concat(p,";\\n        let row_stride : i32 = ").concat(p,";\\n\\n        // find the rows max\\n        ").concat(d,"\\n        for (var col = lindex; col < cols; col += wg) {\\n          let value = getValue(row, col, row_stride);\\n          threadMax = max(threadMax, value);\\n        }\\n        if (lindex < cols) {\\n          threadShared[lindex] = threadMax;\\n        }\\n        workgroupBarrier();\\n\\n        var reduceSize = min(cols, wg);\\n        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\\n          reduceSize = currSize + (reduceSize & 1);\\n          if (lindex < currSize) {\\n            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);\\n          }\\n          workgroupBarrier();\\n        }\\n        if (lindex == 0) {\\n          rowMaxShared = threadShared[0];\\n        }\\n        workgroupBarrier();\\n\\n        // find the rows sum\\n        var threadSum: ").concat(o," = 0.0;\\n        for (var col = lindex; col < cols; col += wg) {\\n          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);\\n          threadSum += subExp;\\n        }\\n        threadShared[lindex] = threadSum;\\n        workgroupBarrier();\\n\\n        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {\\n          if (lindex < currSize) {\\n            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];\\n          }\\n          workgroupBarrier();\\n        }\\n        if (lindex == 0) {\\n          rowSumShared = threadShared[0];\\n        }\\n        workgroupBarrier();\\n\\n        // calculate final value for each element in the row\\n        for (var col = lindex; col < cols; col += wg) {\\n          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;\\n          setValue(row, col, row_stride, value);\\n        }\\n      }")},dispatchGroup:function(){return{x:f}}})}(e.inputs[0],n)}}))},t.parseSoftmaxAttributes=function(e){return(0,o.createAttributeWithCacheKey)({axis:e.axis})}},2067:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSplitAttributes=t.split=void 0;var i=n(6952),c=n(387),u=n(1163),s=n(2075);t.split=function(e,t){!function(e){if(!e||e.length<1)throw new Error("too few inputs")}(e.inputs),e.compute(function(e,t){var n=1===e.length?t:function(e,t){var n=[],r=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach((function(e){return n.push(Number(e))})),r=n.length),(0,c.createAttributeWithCacheKey)({numOutputs:r,axis:t.axis,splitSizes:n})}(e,t),l={name:"Split",inputTypes:[u.GpuDataType.default],cacheHint:n.cacheKey};return r(r({},l),{get:function(){return function(e,t,n){for(var c=t[0].dims,l=i.ShapeUtil.size(c),p=t[0].dataType,f=c.length,d=n.axis,h=d<0?c.length+d:d,g=new Array(n.numOutputs),v=(0,s.inputVariable)("input",p,c),m=new Array(n.numOutputs),y=[],b=[],w=0,S=0;S<n.numOutputs;S++){w+=n.splitSizes[S],m[S]=w;var _=c.slice();_[n.axis]=n.splitSizes[S],b.push(_),g[S]=(0,s.outputVariable)("output".concat(S),p,b[S]),y.push({dims:b[S],dataType:t[0].dataType,gpuDataType:u.GpuDataType.default})}var x=f<2?"indices":"indices[".concat(h,"]");return r(r({},e),{getShaderSource:function(e){return"\\n  ".concat(e.declareVariables.apply(e,o([v],a(g),!1)),"\\n  const sizeInConcatAxis = array<u32, ").concat(m.length,">(").concat(m.map((function(e){return"".concat(e,"u")})).join(","),");\\n  ").concat((t=m.length,"\\nfn calculateOutputIndex(index: u32) -> u32 {\\n    for (var i: u32 = 0u; i < ".concat(t,"u; i += 1u ) {\\n    if (index < sizeInConcatAxis[i]) {\\n        return i;\\n    }\\n    }\\n    return ").concat(t,"u;\\n}")),"\\n  ").concat(function(e){for(var t=e.length,n=[],r=0;r<t;++r){var a=e[r].setByIndices("indices","input[global_idx]");1===t?n.push(a):0===r?n.push("if (outputNumber == ".concat(r,"u) { ").concat(a," }")):r===t-1?n.push("else { ".concat(a," }")):n.push("else if (outputNumber == ".concat(r,") { ").concat(a," }"))}return"\\n      fn writeBufferData(outputNumber: u32, indices: ".concat(e[0].type.indices,", global_idx: u32) {\\n        ").concat(n.join("\\n"),"\\n      }")}(g),"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(l),"\\n\\n    var indices = ").concat(v.offsetToIndices("global_idx"),";\\n    let outputNumber = calculateOutputIndex(").concat(x,");\\n    if (outputNumber != 0) {\\n        ").concat(x," -= sizeInConcatAxis[outputNumber - 1u];\\n    }\\n    writeBufferData(outputNumber, indices, global_idx);\\n  }");var t},outputs:y,dispatchGroup:function(){return{x:Math.ceil(l/64)}}})}(l,[e[0]],n)}})}(e.inputs,t),{inputs:[0]})},t.parseSplitAttributes=function(e){var t=e.axis,n=e.splitSizes,r=e.numOutputs<0?n.length:e.numOutputs;if(r!==n.length)throw new Error("numOutputs and splitSizes lengh must be equal");return(0,c.createAttributeWithCacheKey)({axis:t,numOutputs:r,splitSizes:n})}},8699:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.tile=t.createTileProgramInfo=t.tileProgramMetadata=void 0;var i=n(6952),c=n(1163),u=n(2075);t.tileProgramMetadata={name:"Tile",inputTypes:[c.GpuDataType.default]};var s=function(e){return Array.from(e.getBigInt64Array(),Number)};t.createTileProgramInfo=function(e,t){var n=t[0].dims,l=s(t[1]),p=function(e,t){for(var n=[],r=0;r<e.length;++r)n.push(e[r]*t[r]);return n}(n,l),f=i.ShapeUtil.size(p),d=t[0].dataType,h=(0,u.inputVariable)("input",d,n),g=(0,u.outputVariable)("output",d,p);return r(r({},e),{outputs:[{dims:p,dataType:t[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(e){return"\\n      const inputShape = ".concat(h.indices.apply(h,o([],a(n),!1)),";\\n      ").concat(e.declareVariables(h,g),"\\n      ").concat(e.mainStart(),"\\n      ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(f),"\\n      let outputIndices = ").concat(g.offsetToIndices("global_idx"),";\\n      var inputIndices: ").concat(h.type.indices,";\\n      for (var i = 0; i < ").concat(n.length,"; i++) {\\n        let inputDimValue = ").concat(g.indicesGet("outputIndices","i"),"  % ").concat(h.indicesGet("inputShape","i"),";\\n\\n        ").concat(h.indicesSet("inputIndices","i","inputDimValue"),"\\n      }\\n      ").concat(g.setByOffset("global_idx",h.getByIndices("inputIndices")),"\\n    }")},dispatchGroup:function(){return{x:Math.ceil(f/64)}}})},t.tile=function(e){!function(e){if(!e||2!==e.length)throw new Error("Tile requires 2 inputs.");if(1!==e[0].dataType&&6!==e[0].dataType&&12!==e[0].dataType)throw new Error("Tile only support float, int32, and uint32 data types");if(7!==e[1].dataType)throw new Error("Tile `repeats` input should be of int64 data type");if(1!==e[1].dims.length)throw new Error("Tile `repeats` input should be 1-D");if(s(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")}(e.inputs);var n=s(e.inputs[1]).toString();e.compute(r(r({},t.tileProgramMetadata),{cacheHint:n,get:function(){return(0,t.createTileProgramInfo)(t.tileProgramMetadata,e.inputs)}}),{inputs:[0]})}},2625:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransposeAttributes=t.transpose=t.createTransposeProgramInfo=t.transposeProgramMetadata=void 0;var i=n(6952),c=n(387),u=n(1163),s=n(2075);t.transposeProgramMetadata={name:"Transpose",inputTypes:[u.GpuDataType.default]};var l=function(e,t){return t&&t.length!==e.length?o([],a(e.keys()),!1).reverse():t};t.createTransposeProgramInfo=function(e,n){var a=e.dataType,o=e.dims,c=l(o,n),p=function(e,t){return i.ShapeUtil.sortBasedOnPerm(e,l(e,t))}(o,c),f=o.length,d=i.ShapeUtil.size(p),h=(0,s.outputVariable)("output",a,p),g=(0,s.inputVariable)("a",a,o);return r(r({},t.transposeProgramMetadata),{outputs:[{dims:p,dataType:e.dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(e){return"\\n  ".concat(e.declareVariables(g,h),"\\n\\n  ").concat(function(e,t,n,r){var a=[];a.push("fn perm(i: ".concat(r.type.indices,") -> ").concat(n.type.indices," {\\n    var a: ").concat(n.type.indices,";"));for(var o=0;o<t;++o)a.push(n.indicesSet("a",e[o],"i[".concat(o,"]")));return a.push("return a;}"),a.join("\\n")}(c,f,g,h),"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(d),"\\n\\n    let indices = ").concat(h.offsetToIndices("global_idx"),";\\n    let aIndices = perm(indices);\\n\\n    ").concat(h.setByOffset("global_idx",g.getByIndices("aIndices")),"\\n  }")},dispatchGroup:function(){return{x:Math.ceil(d/64)}}})},t.transpose=function(e,n){!function(e){if(!e||1!==e.length)throw new Error("Transpose requires 1 input.")}(e.inputs),e.compute(r(r({},t.transposeProgramMetadata),{cacheHint:n.cacheKey,get:function(){return(0,t.createTransposeProgramInfo)(e.inputs[0],n.perm)}}))},t.parseTransposeAttributes=function(e){return(0,c.createAttributeWithCacheKey)({perm:e.perm})}},9302:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.thresholdedRelu=t.tanh=t.tan=t.sqrt=t.sinh=t.sin=t.sigmoid=t.relu=t.reciprocal=t.neg=t.not=t.leakyRelu=t.gelu=t.floor=t.exp=t.erf=t.erfImpl=t.elu=t.parseAlphaAttributes=t.cosh=t.cos=t.ceil=t.clip=t.clipV10=t.cast=t.parseCastAttributes=t.atanh=t.atan=t.asinh=t.asin=t.acosh=t.acos=t.abs=void 0;var a=n(6952),o=n(387),i=n(1163),c=n(2075),u=function(e,t,n,o,u,s){void 0===s&&(s=e.dataType);var l={name:t,inputTypes:[i.GpuDataType.default],cacheHint:u};return r(r({},l),{get:function(){return function(e,t,n,o,u){return r(r({},e),{getShaderSource:function(e){return function(e,t,n,r,a,o){var i,u=Math.ceil(t/4);i="string"==typeof a?"".concat(a,"(a)"):a("a");var s=(0,c.inputVariable)("inputData",n,[u],4),l=(0,c.outputVariable)("outputData",r,[u],4);return"\\n  ".concat(e.declareVariables(s,l),"\\n\\n  ").concat(null!=o?o:"","\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(u),"\\n\\n    let a = ").concat(s.getByOffset("global_idx"),";\\n    ").concat(l.setByOffset("global_idx",i),"\\n  }")}(e,a.ShapeUtil.size(t.dims),t.dataType,n,o,u)},outputs:[{dims:t.dims,dataType:n,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(e){return{x:Math.ceil(a.ShapeUtil.size(e[0].dims)/64/4)}}})}(l,e,s,n,o)}})};t.abs=function(e){e.compute(u(e.inputs[0],"Abs","abs"))},t.acos=function(e){e.compute(u(e.inputs[0],"Acos","acos"))},t.acosh=function(e){e.compute(u(e.inputs[0],"Acosh","acosh"))},t.asin=function(e){e.compute(u(e.inputs[0],"Asin","asin"))},t.asinh=function(e){e.compute(u(e.inputs[0],"Asinh","asinh"))},t.atan=function(e){e.compute(u(e.inputs[0],"Atan","atan"))},t.atanh=function(e){e.compute(u(e.inputs[0],"Atanh","atanh"))},t.parseCastAttributes=function(e){return(0,o.createAttributeWithCacheKey)(e)},t.cast=function(e,t){var n;switch(t.to){case 10:n="vec4<f16>";break;case 1:n="vec4<f32>";break;case 12:n="vec4<u32>";break;case 6:n="vec4<i32>";break;case 9:n="vec4<bool>";break;default:throw new RangeError("not supported type (specified in attribute \'to\' from \'Cast\' operator): ".concat(t.to))}e.compute(u(e.inputs[0],"Cast",n,void 0,t.cacheKey,t.to))},t.clipV10=function(e,t){var n=(0,c.tensorTypeToWsglStorageType)(e.inputs[0].dataType);e.compute(u(e.inputs[0],"Clip",(function(e){return"clamp(".concat(e,", clip_min_, clip_max_)")}),"\\n    const clip_min_: vec4<".concat(n,"> = vec4(").concat(n,"(").concat(t.min,"));\\n    const clip_max_: vec4<").concat(n,"> = vec4(").concat(n,"(").concat(t.max,"));\\n"),t.cacheKey),{inputs:[0]})},t.clip=function(e){var n,r,i,c=(r=(n=e.inputs).length>=2?n[1].getFloat32Array()[0]:a.MIN_CLIP,i=n.length>=3?n[2].getFloat32Array()[0]:a.MAX_CLIP,(0,o.createAttributeWithCacheKey)({min:r,max:i}));(0,t.clipV10)(e,c)},t.ceil=function(e){e.compute(u(e.inputs[0],"Ceil","ceil"))},t.cos=function(e){e.compute(u(e.inputs[0],"Cos","cos"))},t.cosh=function(e){e.compute(u(e.inputs[0],"Cosh","cosh"))},t.parseAlphaAttributes=function(e){return(0,o.createAttributeWithCacheKey)(e)},t.elu=function(e,t){e.compute(u(e.inputs[0],"Elu",(function(e){return"elu_vf32(".concat(e,")")}),"\\n  const elu_alpha_: f32 = f32(".concat(t.alpha,");\\n\\n  fn elu_f32(a: f32) -> f32 {\\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\\n  }\\n\\n  fn elu_vf32(v: vec4<f32>) -> vec4<f32> {\\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\\n  }"),t.cacheKey))},t.erfImpl=function(e,t){return void 0===t&&(t="f32"),"\\nconst r0: ".concat(t," = 0.3275911;\\nconst r1: ").concat(t," = 0.254829592;\\nconst r2: ").concat(t," = -0.284496736;\\nconst r3: ").concat(t," = 1.421413741;\\nconst r4: ").concat(t," = -1.453152027;\\nconst r5: ").concat(t," = 1.061405429;\\n\\nfn erf_vf32(v: ").concat(e,") -> ").concat(e," {\\n  let absv = abs(v);\\n  let x = 1.0 / (1.0 + r0 * absv);\\n  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\\n}")},t.erf=function(e){var n=(0,c.tensorTypeToWsglStorageType)(e.inputs[0].dataType);e.compute(u(e.inputs[0],"Erf",(function(e){return"erf_vf32(".concat(e,")")}),(0,t.erfImpl)("vec4<".concat(n,">"),n)))},t.exp=function(e){e.compute(u(e.inputs[0],"Exp","exp"))},t.floor=function(e){e.compute(u(e.inputs[0],"Floor","floor"))},t.gelu=function(e){var n=(0,c.tensorTypeToWsglStorageType)(e.inputs[0].dataType);e.compute(u(e.inputs[0],"Gelu",(function(e){return"0.5 * ".concat(e," * (1.0 + erf_vf32(").concat(e," * 0.7071067811865475))")}),(0,t.erfImpl)("vec4<".concat(n,">"),n)))},t.leakyRelu=function(e,t){e.compute(u(e.inputs[0],"LeakyRelu",(function(e){return"select(leaky_relu_alpha_ * ".concat(e,", ").concat(e,", ").concat(e," >= vec4<f32>(0.0))")}),"const leaky_relu_alpha_: f32 = f32(".concat(t.alpha,");"),t.cacheKey))},t.not=function(e){e.compute(u(e.inputs[0],"Not",(function(e){return"!".concat(e)})))},t.neg=function(e){e.compute(u(e.inputs[0],"Neg",(function(e){return"-".concat(e)})))},t.reciprocal=function(e){e.compute(u(e.inputs[0],"Reciprocal",(function(e){return"1.0/".concat(e)})))},t.relu=function(e){e.compute(u(e.inputs[0],"Relu",(function(e){return"select(vec4<f32>(0.0), ".concat(e,", ").concat(e," > vec4<f32>(0.0))")})))},t.sigmoid=function(e){e.compute(u(e.inputs[0],"Sigmoid",(function(e){return"(1.0 / (1.0 + exp(-".concat(e,")))")})))},t.sin=function(e){e.compute(u(e.inputs[0],"Sin","sin"))},t.sinh=function(e){e.compute(u(e.inputs[0],"Sinh","sinh"))},t.sqrt=function(e){e.compute(u(e.inputs[0],"Sqrt","sqrt"))},t.tan=function(e){e.compute(u(e.inputs[0],"Tan","tan"))},t.tanh=function(e){e.compute(u(e.inputs[0],"Tanh","tanh"))},t.thresholdedRelu=function(e,t){return e.compute(u(e.inputs[0],"ThresholdedRelu",(function(e){return"select(vec4<f32>(0.0), ".concat(e,", ").concat(e," > thresholded_relu_alpha_)")}),"const thresholded_relu_alpha_: vec4<f32> = vec4<f32>(".concat(t.alpha,");"),t.cacheKey)),0},t.log=function(e){e.compute(u(e.inputs[0],"Log","log"))}},8305:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramManager=void 0;var i=n(7917),c=n(4955),u=n(2075),s=function(){function e(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}return e.prototype.getArtifact=function(e){return this.repo.get(e)},e.prototype.setArtifact=function(e,t){this.repo.set(e,t)},e.prototype.run=function(e,t,n,c,u){var s,l,p,f,d=this,h=this.backend.device,g=this.backend.getComputePassEncoder(),v=this.backend.supportTimestampQuery&&"default"===this.backend.env.webgpu.profilingMode;v&&g.writeTimestamp(this.backend.profilingQuerySet,0),g.setPipeline(e.computePipeline);var m=[];try{for(var y=r(n),b=y.next();!b.done;b=y.next()){var w=b.value;m.push({binding:m.length,resource:{buffer:w.buffer}})}}catch(e){s={error:e}}finally{try{b&&!b.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}try{for(var S=r(c),_=S.next();!_.done;_=S.next()){var x=_.value;m.push({binding:m.length,resource:{buffer:x.buffer}})}}catch(e){p={error:e}}finally{try{_&&!_.done&&(f=S.return)&&f.call(S)}finally{if(p)throw p.error}}var T=h.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:m,label:e.programInfo.name});if(g.setBindGroup(0,T),g.dispatchWorkgroups.apply(g,o([],a(u),!1)),this.backend.pendingDispatchNumber++,v){g.writeTimestamp(this.backend.profilingQuerySet,1),null==this.backend.profilingQueryData&&(this.backend.profilingQueryData=this.backend.gpuDataManager.create(16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE));var O=this.backend.gpuDataManager.create(16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.backend.endComputePass(),this.backend.getCommandEncoder().resolveQuerySet(this.backend.profilingQuerySet,0,2,this.backend.profilingQueryData.buffer,0),this.backend.getCommandEncoder().copyBufferToBuffer(this.backend.profilingQueryData.buffer,0,O.buffer,0,16),this.backend.flush();var I=this.backend.currentKernelId,A=this.backend.kernels.get(I),E="[".concat(A[0],"] ").concat(A[1]);O.buffer.mapAsync(GPUMapMode.READ).then((function(){var n=new BigUint64Array(O.buffer.getMappedRange()),r=n[0],a=n[1];O.buffer.unmap(),void 0===d.backend.profilingTimeBase&&(d.backend.profilingTimeBase=r);var o=Number(r-d.backend.profilingTimeBase),c=Number(a-d.backend.profilingTimeBase);if(!Number.isSafeInteger(o)||!Number.isSafeInteger(c))throw new RangeError("incorrect timestamp range");d.backend.gpuDataManager.release(O.id);var u="";t.forEach((function(e,t){u+="input[".concat(t,"]: [").concat(e.dims,"] | ").concat((0,i.tensorDataTypeEnumToString)(e.dataType),", ")}));var s="";e.programInfo.outputs.forEach((function(e,t){s+="output[".concat(t,"]: [").concat(e.dims,"] | ").concat((0,i.tensorDataTypeEnumToString)(e.dataType),", ")})),console.log(\'[profiling] kernel "\'.concat(I,"|").concat(E,\'" \').concat(u).concat(s,"execution time: ").concat(c-o," ns"))}))}this.backend.pendingDispatchNumber>=16&&this.backend.flush()},e.prototype.dispose=function(){},e.prototype.build=function(e,t){var n=this.backend.device,r=[];n.features.has("shader-f16")&&r.push("enable f16;");var a=(0,u.createShaderHelper)(t),o=e.getShaderSource(a),i="".concat(r.join("\\n"),"\\n").concat(a.additionalImplementations,"\\n").concat(o),s=n.createShaderModule({code:i,label:e.name});return(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] shader code: ".concat(i)})),{programInfo:e,computePipeline:n.createComputePipeline({compute:{module:s,entryPoint:"main"},layout:"auto",label:e.name})}},e.prototype.normalizeDispatchGroupSize=function(e){var t="number"==typeof e?e:e.x,n="number"==typeof e?1:e.y||1,r="number"==typeof e?1:e.z||1,a=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(t<=a&&n<=a&&r<=a)return[t,n,r];var o=t*n*r,i=Math.ceil(Math.sqrt(o));if(i>a){if((i=Math.ceil(Math.cbrt(o)))>a)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[i,i,i]}return[i,i,1]},e}();t.ProgramManager=s},1163:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.GpuDataType=void 0,(n=t.GpuDataType||(t.GpuDataType={}))[n.default=0]="default",n[n.upload=1]="upload",n[n.profile=2]="profile"},7918:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;var r=n(263),a=n(1497);t.setRunOptions=function(e){var t=(0,r.getInstance)(),n=0,o=[],i=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))i.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error("log serverity level is not valid: ".concat(e.logSeverityLevel));if(void 0===(null==e?void 0:e.logVerbosityLevel))i.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error("log verbosity level is not valid: ".concat(e.logVerbosityLevel));void 0===(null==e?void 0:e.terminate)&&(i.terminate=!1);var c=0;return void 0!==(null==e?void 0:e.tag)&&(c=(0,a.allocWasmString)(e.tag,o)),0===(n=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,c))&&(0,a.checkLastError)("Can\'t create run options."),void 0!==(null==e?void 0:e.extra)&&(0,a.iterateExtraOptions)(e.extra,"",new WeakSet,(function(e,r){var i=(0,a.allocWasmString)(e,o),c=(0,a.allocWasmString)(r,o);0!==t._OrtAddRunConfigEntry(n,i,c)&&(0,a.checkLastError)("Can\'t set a run config entry: ".concat(e," - ").concat(r,"."))})),[n,o]}catch(e){throw 0!==n&&t._OrtReleaseRunOptions(n),o.forEach((function(e){return t._free(e)})),e}}},7622:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;var o=n(263),i=n(1497);t.setSessionOptions=function(e){var t,n,c,u,s,l,p=(0,o.getInstance)(),f=0,d=[],h=e||{};!function(e){e.extra||(e.extra={}),e.extra.session||(e.extra.session={});var t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((function(e){return"webgpu"===("string"==typeof e?e:e.name)}))&&(e.enableMemPattern=!1)}(h);try{var g=function(e){switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error("unsupported graph optimization level: ".concat(e))}}(null!==(c=h.graphOptimizationLevel)&&void 0!==c?c:"all"),v=function(e){switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error("unsupported execution mode: ".concat(e))}}(null!==(u=h.executionMode)&&void 0!==u?u:"sequential"),m="string"==typeof h.logId?(0,i.allocWasmString)(h.logId,d):0,y=null!==(s=h.logSeverityLevel)&&void 0!==s?s:2;if(!Number.isInteger(y)||y<0||y>4)throw new Error("log serverity level is not valid: ".concat(y));var b=null!==(l=h.logVerbosityLevel)&&void 0!==l?l:0;if(!Number.isInteger(b)||b<0||b>4)throw new Error("log verbosity level is not valid: ".concat(b));var w="string"==typeof h.optimizedModelFilePath?(0,i.allocWasmString)(h.optimizedModelFilePath,d):0;if(0===(f=p._OrtCreateSessionOptions(g,!!h.enableCpuMemArena,!!h.enableMemPattern,v,!!h.enableProfiling,0,m,y,b,w))&&(0,i.checkLastError)("Can\'t create session options."),h.executionProviders&&function(e,t,n){var a,c;try{for(var u=r(t),s=u.next();!s.done;s=u.next()){var l=s.value,p="string"==typeof l?l:l.name;switch(p){case"xnnpack":p="XNNPACK";break;case"webnn":if(p="WEBNN","string"!=typeof l){var f=l;if(null==f?void 0:f.deviceType){var d=(0,i.allocWasmString)("deviceType",n),h=(0,i.allocWasmString)(f.deviceType,n);0!==(0,o.getInstance)()._OrtAddSessionConfigEntry(e,d,h)&&(0,i.checkLastError)("Can\'t set a session config entry: \'deviceType\' - ".concat(f.deviceType,"."))}(null==f?void 0:f.powerPreference)&&(d=(0,i.allocWasmString)("powerPreference",n),h=(0,i.allocWasmString)(f.powerPreference,n),0!==(0,o.getInstance)()._OrtAddSessionConfigEntry(e,d,h)&&(0,i.checkLastError)("Can\'t set a session config entry: \'powerPreference\' - ".concat(f.powerPreference,".")))}break;case"webgpu":p="JS";break;case"wasm":case"cpu":continue;default:throw new Error("not supported execution provider: ".concat(p))}var g=(0,i.allocWasmString)(p,n);0!==(0,o.getInstance)()._OrtAppendExecutionProvider(e,g)&&(0,i.checkLastError)("Can\'t append execution provider: ".concat(p,"."))}}catch(e){a={error:e}}finally{try{s&&!s.done&&(c=u.return)&&c.call(u)}finally{if(a)throw a.error}}}(f,h.executionProviders,d),h.freeDimensionOverrides)try{for(var S=r(Object.entries(h.freeDimensionOverrides)),_=S.next();!_.done;_=S.next()){var x=a(_.value,2),T=x[0],O=x[1];if("string"!=typeof T)throw new Error("free dimension override name must be a string: ".concat(T));if("number"!=typeof O||!Number.isInteger(O)||O<0)throw new Error("free dimension override value must be a non-negative integer: ".concat(O));var I=(0,i.allocWasmString)(T,d);0!==p._OrtAddFreeDimensionOverride(f,I,O)&&(0,i.checkLastError)("Can\'t set a free dimension override: ".concat(T," - ").concat(O,"."))}}catch(e){t={error:e}}finally{try{_&&!_.done&&(n=S.return)&&n.call(S)}finally{if(t)throw t.error}}return void 0!==h.extra&&(0,i.iterateExtraOptions)(h.extra,"",new WeakSet,(function(e,t){var n=(0,i.allocWasmString)(e,d),r=(0,i.allocWasmString)(t,d);0!==p._OrtAddSessionConfigEntry(f,n,r)&&(0,i.checkLastError)("Can\'t set a session config entry: ".concat(e," - ").concat(t,"."))})),[f,d]}catch(e){throw 0!==f&&p._OrtReleaseSessionOptions(f),d.forEach((function(e){return p._free(e)})),e}}},7917:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelStringToEnum=t.tensorTypeToTypedArrayConstructor=t.getTensorElementSize=t.tensorDataTypeEnumToString=t.tensorDataTypeStringToEnum=void 0,t.tensorDataTypeStringToEnum=function(e){switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error("unsupported data type: ".concat(e))}},t.tensorDataTypeEnumToString=function(e){switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error("unsupported data type: ".concat(e))}},t.getTensorElementSize=function(e){return[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e]},t.tensorTypeToTypedArrayConstructor=function(e){switch(e){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("unsupported type: ".concat(e))}},t.logLevelStringToEnum=function(e){switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error("unsupported logging level: ".concat(e))}}},1259:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initRuntime=void 0;var c=n(7918),u=n(7622),s=n(7917),l=n(263),p=n(1497);t.initRuntime=function(e){return r(void 0,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return n=e.wasm.numThreads,r=(0,s.logLevelStringToEnum)(e.logLevel),0!==(0,l.getInstance)()._OrtInit(n,r)&&(0,p.checkLastError)("Can\'t initialize onnxruntime."),[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}var n,r}))}))};var f=new Map;t.createSessionAllocate=function(e){var t=(0,l.getInstance)(),n=t._malloc(e.byteLength);if(0===n)throw new Error("Can\'t create a session. failed to allocate a buffer of size ".concat(e.byteLength,"."));return t.HEAPU8.set(e,n),[n,e.byteLength]},t.createSessionFinalize=function(e,t){var n,r=(0,l.getInstance)(),a=0,i=0,c=[],s=[],d=[];try{i=(n=o((0,u.setSessionOptions)(t),2))[0],c=n[1],0===(a=r._OrtCreateSession(e[0],e[1],i))&&(0,p.checkLastError)("Can\'t create a session.");for(var h=o(function(e){var t=(0,l.getInstance)(),n=t.stackSave();try{var r=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,r,r+4)&&(0,p.checkLastError)("Can\'t get session input/output count."),[t.HEAP32[r/4],t.HEAP32[r/4+1]]}finally{t.stackRestore(n)}}(a),2),g=h[0],v=h[1],m=[],y=[],b=0;b<g;b++){var w=r._OrtGetInputName(a,b);0===w&&(0,p.checkLastError)("Can\'t get an input name."),s.push(w),m.push(r.UTF8ToString(w))}for(b=0;b<v;b++){var S=r._OrtGetOutputName(a,b);0===S&&(0,p.checkLastError)("Can\'t get an output name."),d.push(S),y.push(r.UTF8ToString(S))}return f.set(a,[a,s,d]),[a,m,y]}catch(e){throw s.forEach((function(e){return r._OrtFree(e)})),d.forEach((function(e){return r._OrtFree(e)})),0!==a&&r._OrtReleaseSession(a),e}finally{r._free(e[0]),0!==i&&r._OrtReleaseSessionOptions(i),c.forEach((function(e){return r._free(e)}))}},t.createSession=function(e,n){var r=(0,t.createSessionAllocate)(e);return(0,t.createSessionFinalize)(r,n)},t.releaseSession=function(e){var t=(0,l.getInstance)(),n=f.get(e);if(!n)throw new Error("cannot release session. invalid session id: ".concat(e));var r=o(n,3),a=r[0],i=r[1],c=r[2];i.forEach((function(e){return t._OrtFree(e)})),c.forEach((function(e){return t._OrtFree(e)})),t._OrtReleaseSession(a),f.delete(e)},t.run=function(e,t,n,i,u){return r(void 0,void 0,void 0,(function(){var r,d,h,g,v,m,y,b,w,S,_,x,T,O,I,A,E,C,P,k,M,R,D,z,B,G,j,U,W,V,L,F,N,H,K,q,Y,X,$,Q,J,Z,ee,te,ne,re,ae,oe;return a(this,(function(a){switch(a.label){case 0:if(r=(0,l.getInstance)(),!(d=f.get(e)))throw new Error("cannot run inference. invalid session id: ".concat(e));h=o(d,3),g=h[0],v=h[1],m=h[2],y=t.length,b=i.length,w=0,S=[],_=[],x=[],a.label=1;case 1:for(a.trys.push([1,,9,10]),ae=o((0,c.setRunOptions)(u),2),w=ae[0],S=ae[1],T=function(e){var t=n[e][0],a=n[e][1],o=n[e][2],i=void 0,c=void 0;if(Array.isArray(o)){c=4*o.length,i=r._malloc(c),x.push(i);for(var u=i/4,l=0;l<o.length;l++){if("string"!=typeof o[l])throw new TypeError("tensor data at index ".concat(l," is not a string"));r.HEAPU32[u++]=(0,p.allocWasmString)(o[l],x)}}else c=o.byteLength,i=r._malloc(c),x.push(i),r.HEAPU8.set(new Uint8Array(o.buffer,o.byteOffset,c),i);var f=r.stackSave(),d=r.stackAlloc(4*a.length);try{var h=d/4;a.forEach((function(e){return r.HEAP32[h++]=e}));var g=r._OrtCreateTensor((0,s.tensorDataTypeStringToEnum)(t),i,c,d,a.length);0===g&&(0,p.checkLastError)("Can\'t create tensor for input[".concat(e,"].")),_.push(g)}finally{r.stackRestore(f)}},j=0;j<y;j++)T(j);O=r.stackSave(),I=r.stackAlloc(4*y),A=r.stackAlloc(4*y),E=r.stackAlloc(4*b),C=r.stackAlloc(4*b),a.label=2;case 2:for(a.trys.push([2,,7,8]),P=I/4,k=A/4,M=E/4,R=C/4,j=0;j<y;j++)r.HEAPU32[P++]=_[j],r.HEAPU32[k++]=v[t[j]];for(j=0;j<b;j++)r.HEAPU32[M++]=0,r.HEAPU32[R++]=m[i[j]];return null===(oe=r.jsepOnRunStart)||void 0===oe||oe.call(r,e),D=r._OrtRun(g,A,I,y,C,b,E,w),(z=r.jsepRunPromise)?[4,z]:[3,4];case 3:D=a.sent(),a.label=4;case 4:return(B=r.jsepOnRunEnd)?[4,B(e)]:[3,6];case 5:a.sent(),a.label=6;case 6:for(G=[],0!==D&&(0,p.checkLastError)("failed to call OrtRun()."),j=0;j<b;j++){U=r.HEAPU32[E/4+j],W=r.stackSave(),V=r.stackAlloc(16),L=void 0,F=0;try{for(0!==(D=r._OrtGetTensorData(U,V,V+4,V+8,V+12))&&(0,p.checkLastError)("Can\'t access output tensor data on index ".concat(j,".")),N=V/4,H=r.HEAPU32[N++],F=r.HEAPU32[N++],K=r.HEAPU32[N++],q=r.HEAPU32[N++],Y=[],X=0;X<q;X++)Y.push(r.HEAPU32[K/4+X]);if(r._OrtFree(K),$=0===Y.length?1:Y.reduce((function(e,t){return e*t})),"string"===(L=(0,s.tensorDataTypeEnumToString)(H))){for(Q=[],J=F/4,Z=0;Z<$;Z++)ee=r.HEAPU32[J++],te=Z===$-1?void 0:r.HEAPU32[J]-ee,Q.push(r.UTF8ToString(ee,te));G.push([L,Y,Q])}else ne=(0,s.tensorTypeToTypedArrayConstructor)(L),re=new ne($),new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(r.HEAPU8.subarray(F,F+re.byteLength)),G.push([L,Y,re])}finally{r.stackRestore(W),"string"===L&&F&&r._free(F),r._OrtReleaseTensor(U)}}return[2,G];case 7:return r.stackRestore(O),[7];case 8:return[3,10];case 9:return _.forEach((function(e){return r._OrtReleaseTensor(e)})),x.forEach((function(e){return r._free(e)})),0!==w&&r._OrtReleaseRunOptions(w),S.forEach((function(e){return r._free(e)})),[7];case 10:return[2]}}))}))},t.endProfiling=function(e){var t=(0,l.getInstance)(),n=f.get(e);if(!n)throw new Error("invalid session id");var r=n[0],a=t._OrtEndProfiling(r);0===a&&(0,p.checkLastError)("Can\'t get an profile file name."),t._OrtFree(a)},t.extractTransferableBuffers=function(e){var t,n,r=[];try{for(var a=i(e),o=a.next();!o.done;o=a.next()){var c=o.value[2];!Array.isArray(c)&&c.buffer&&r.push(c.buffer)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r}},263:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0;var u,s=o(n(6449)),l=n(932),p=n(3474),f=!1,d=!1,h=!1;t.initializeWebAssembly=function(e){return i(void 0,void 0,void 0,(function(){var t,r,a,o,i,g,v,m,y,b,w;return c(this,(function(c){switch(c.label){case 0:if(f)return[2,Promise.resolve()];if(d)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");return d=!0,t=e.initTimeout,r=e.numThreads,a=e.simd,o=r>1&&function(){try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}}(),i=a&&function(){try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}}(),g=e.wasmPaths,v="string"==typeof g?g:void 0,m=function(e,t){return t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm"}(i,o),y="object"==typeof g?g[m]:void 0,b=!1,w=[],t>0&&w.push(new Promise((function(e){setTimeout((function(){b=!0,e()}),t)}))),w.push(new Promise((function(e,t){var r=o?p:l,a={locateFile:function(e,t){return o&&e.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(4154)],{type:"text/javascript"})):e.endsWith(".wasm")?y||(null!=v?v:t)+m:t+e}};if(o)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=s.join(__dirname,"ort-wasm-threaded.js");else{var i="var ortWasmThreaded=(function(){var _scriptDir;return ".concat(r.toString(),"})();");a.mainScriptUrlOrBlob=new Blob([i],{type:"text/javascript"})}r(a).then((function(t){d=!1,f=!0,u=t,e()}),(function(e){d=!1,h=!0,t(e)}))}))),[4,Promise.race(w)];case 1:if(c.sent(),b)throw new Error("WebAssembly backend initializing failed due to timeout: ".concat(t,"ms"));return[2]}}))}))},t.getInstance=function(){if(f&&u)return u;throw new Error("WebAssembly is not initialized yet.")},t.dispose=function(){var e;!f||d||h||(d=!0,null===(e=u.PThread)||void 0===e||e.terminateAllThreads(),u=void 0,d=!1,f=!1,h=!0)}},1497:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.checkLastError=t.iterateExtraOptions=t.allocWasmString=void 0;var a=n(263);t.allocWasmString=function(e,t){var n=(0,a.getInstance)(),r=n.lengthBytesUTF8(e)+1,o=n._malloc(r);return n.stringToUTF8(e,o,r),t.push(o),o},t.iterateExtraOptions=function(e,n,a,o){if("object"==typeof e&&null!==e){if(a.has(e))throw new Error("Circular reference in options");a.add(e)}Object.entries(e).forEach((function(e){var i=r(e,2),c=i[0],u=i[1],s=n?n+c:c;if("object"==typeof u)(0,t.iterateExtraOptions)(u,s+".",a,o);else if("string"==typeof u||"number"==typeof u)o(s,u.toString());else{if("boolean"!=typeof u)throw new Error("Can\'t handle extra config type: ".concat(typeof u));o(s,u?"1":"0")}}))},t.checkLastError=function(e){var t=(0,a.getInstance)(),n=t.stackSave();try{var r=t.stackAlloc(8);t._OrtGetLastError(r,r+4);var o=t.HEAP32[r/4],i=t.HEAPU32[r/4+1],c=i?t.UTF8ToString(i):"";throw new Error("".concat(e," ERROR_CODE: ").concat(o,", ERROR_MESSAGE: ").concat(c))}finally{t.stackRestore(n)}}},3474:function(e,t,n){var _scriptDir,r=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){function t(){return P.buffer!=D.buffer&&W(),D}function r(){return P.buffer!=D.buffer&&W(),z}function a(){return P.buffer!=D.buffer&&W(),B}function o(){return P.buffer!=D.buffer&&W(),G}function i(){return P.buffer!=D.buffer&&W(),j}var c,u,s=e;s.ready=new Promise(((e,t)=>{c=e,u=t}));var l,p,f,d=Object.assign({},s),h="./this.program",g=(e,t)=>{throw t},v="object"==typeof window,m="function"==typeof importScripts,y="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,b=s.ENVIRONMENT_IS_PTHREAD||!1,w="";function S(e){return s.locateFile?s.locateFile(e,w):w+e}if(y){var _=n(1384),x=n(908);let t;w=m?x.dirname(w)+"/":__dirname+"/",l=(e,t)=>(e=e.startsWith("file://")?new URL(e):x.normalize(e),_.readFileSync(e,t?void 0:"utf8")),f=e=>((e=l(e,!0)).buffer||(e=new Uint8Array(e)),e),p=(e,t,n,r=!0)=>{e=e.startsWith("file://")?new URL(e):x.normalize(e),_.readFile(e,r?void 0:"utf8",((e,a)=>{e?n(e):t(r?a.buffer:a)}))},!s.thisProgram&&1<process.argv.length&&(h=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),g=(e,t)=>{throw process.exitCode=e,t},s.inspect=()=>"[Emscripten Module object]";try{t=n(9925)}catch(e){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),e}global.Worker=t.Worker}else(v||m)&&(m?w=self.location.href:"undefined"!=typeof document&&document.currentScript&&(w=document.currentScript.src),_scriptDir&&(w=_scriptDir),w=0!==w.indexOf("blob:")?w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):"",y||(l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(f=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));y&&"undefined"==typeof performance&&(global.performance=n(6953).performance);var T=console.log.bind(console),O=console.error.bind(console);y&&(T=(...e)=>_.writeSync(1,e.join(" ")+"\\n"),O=(...e)=>_.writeSync(2,e.join(" ")+"\\n"));var I,A=s.print||T,E=s.printErr||O;Object.assign(s,d),d=null,s.thisProgram&&(h=s.thisProgram),s.quit&&(g=s.quit),s.wasmBinary&&(I=s.wasmBinary);var C=s.noExitRuntime||!0;"object"!=typeof WebAssembly&&te("no native wasm support detected");var P,k,M,R,D,z,B,G,j,U=!1;function W(){var e=P.buffer;s.HEAP8=D=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAP32=B=new Int32Array(e),s.HEAPU8=z=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAPU32=G=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=j=new Float64Array(e)}var V=s.INITIAL_MEMORY||16777216;if(5242880<=V||te("INITIAL_MEMORY should be larger than STACK_SIZE, was "+V+"! (STACK_SIZE=5242880)"),b)P=s.wasmMemory;else if(s.wasmMemory)P=s.wasmMemory;else if(!((P=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw E("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&E("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");W(),V=P.buffer.byteLength;var L,F=[],N=[],H=[],K=0;function q(){return C||0<K}var Y,X,$=0,Q=null,J=null;function Z(){$++,s.monitorRunDependencies&&s.monitorRunDependencies($)}function ee(){if($--,s.monitorRunDependencies&&s.monitorRunDependencies($),0==$&&(null!==Q&&(clearInterval(Q),Q=null),J)){var e=J;J=null,e()}}function te(e){throw s.onAbort&&s.onAbort(e),E(e="Aborted("+e+")"),U=!0,R=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),u(e),e}function ne(e){return e.startsWith("data:application/octet-stream;base64,")}function re(e){if(e==Y&&I)return new Uint8Array(I);if(f)return f(e);throw"both async and sync fetching of the wasm failed"}function ae(e,t,n){return function(e){if(!I&&(v||m)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()})).catch((()=>re(e)));if(p)return new Promise(((t,n)=>{p(e,(e=>t(new Uint8Array(e))),n)}))}return Promise.resolve().then((()=>re(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(n,(e=>{E("failed to asynchronously prepare wasm: "+e),te(e)}))}function oe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}function ie(e){e.terminate(),e.onmessage=()=>{}}function ce(e){(e=he.Fa[e])||te(),he.fb(e)}function ue(e){var t=he.Za();if(!t)return 6;he.Ia.push(t),he.Fa[e.Ha]=t,t.Ha=e.Ha;var n={cmd:"run",start_routine:e.gb,arg:e.Ya,pthread_ptr:e.Ha};return y&&t.unref(),t.postMessage(n,e.mb),0}ne(Y="ort-wasm-threaded.wasm")||(Y=S(Y));var se="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,le=(e,t,n)=>{var r=(t>>>=0)+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&se)return se.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r},pe=(e,t)=>(e>>>=0)?le(r(),e,t):"";function fe(e){if(b)return qe(1,1,e);R=e,q()||(he.hb(),s.onExit&&s.onExit(e),U=!0),g(e,new oe(e))}var de=e=>{if(R=e,b)throw ve(e),"unwind";fe(e)},he={La:[],Ia:[],Ta:[],Fa:{},Pa:function(){b?he.ab():he.$a()},$a:function(){F.unshift((()=>{Z(),he.bb((()=>ee()))}))},ab:function(){he.receiveObjectTransfer=he.eb,he.threadInitTLS=he.Sa,he.setExitStatus=he.Ra,C=!1},Ra:function(e){R=e},rb:["$terminateWorker"],hb:function(){for(var e of he.Ia)ie(e);for(e of he.La)ie(e);he.La=[],he.Ia=[],he.Fa=[]},fb:function(e){var t=e.Ha;delete he.Fa[t],he.La.push(e),he.Ia.splice(he.Ia.indexOf(e),1),e.Ha=0,vt(t)},eb:function(){},Sa:function(){he.Ta.forEach((e=>e()))},cb:e=>new Promise((t=>{e.onmessage=n=>{var r=(n=n.data).cmd;if(n.targetThread&&n.targetThread!=pt()){var a=he.Fa[n.qb];a?a.postMessage(n,n.transferList):E(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"checkMailbox"===r?Ue():"spawnThread"===r?ue(n):"cleanupThread"===r?ce(n.thread):"killThread"===r?(n=n.thread,r=he.Fa[n],delete he.Fa[n],ie(r),vt(n),he.Ia.splice(he.Ia.indexOf(r),1),r.Ha=0):"cancelThread"===r?he.Fa[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(e.loaded=!0,t(e)):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?e.postMessage(n):"callHandler"===r?s[n.handler](...n.args):r&&E("worker sent an unknown command "+r)},e.onerror=e=>{throw E("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},y&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})));var n,r=[];for(n of["onExit","onAbort","print","printErr"])s.hasOwnProperty(n)&&r.push(n);e.postMessage({cmd:"load",handlers:r,urlOrBlob:s.mainScriptUrlOrBlob||_scriptDir,wasmMemory:P,wasmModule:M})})),bb:function(e){e()},Xa:function(){var e=S("ort-wasm-threaded.worker.js");e=new Worker(e),he.La.push(e)},Za:function(){return 0==he.La.length&&(he.Xa(),he.cb(he.La[0])),he.La.pop()}};s.PThread=he;var ge=e=>{for(;0<e.length;)e.shift()(s)};function ve(e){if(b)return qe(2,0,e);de(e)}s.establishStackSpace=function(){var e=pt(),t=a()[e+52>>2>>>0];e=a()[e+56>>2>>>0],wt(t,t-e),_t(t)};var me=[];function ye(e){this.Oa=e-24,this.Wa=function(e){o()[this.Oa+4>>2>>>0]=e},this.Va=function(e){o()[this.Oa+8>>2>>>0]=e},this.Pa=function(e,t){this.Ua(),this.Wa(e),this.Va(t)},this.Ua=function(){o()[this.Oa+16>>2>>>0]=0}}function be(e,t,n,r){return b?qe(3,1,e,t,n,r):we(e,t,n,r)}function we(e,t,n,r){if(e>>>=0,t>>>=0,n>>>=0,r>>>=0,"undefined"==typeof SharedArrayBuffer)return E("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return b&&0===a.length?be(e,t,n,r):(e={gb:n,Ha:e,Ya:r,mb:a},b?(e.ob="spawnThread",postMessage(e,a),0):ue(e))}function Se(e,t,n){return b?qe(4,1,e,t,n):0}function _e(e,t){if(b)return qe(5,1,e,t)}s.invokeEntryPoint=function(e,t){var n=me[e];n||(e>=me.length&&(me.length=e+1),me[e]=n=L.get(e)),e=n(t),q()?he.Ra(e):mt(e)};var xe=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t},Te=(e,t,n,r)=>{if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(n>=r)break;t[n++>>>0]=i}else{if(2047>=i){if(n+1>=r)break;t[n++>>>0]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;t[n++>>>0]=224|i>>12}else{if(n+3>=r)break;t[n++>>>0]=240|i>>18,t[n++>>>0]=128|i>>12&63}t[n++>>>0]=128|i>>6&63}t[n++>>>0]=128|63&i}}return t[n>>>0]=0,n-a},Oe=(e,t,n)=>Te(e,r(),t,n);function Ie(e,t){if(b)return qe(6,1,e,t)}function Ae(e,t,n){if(b)return qe(7,1,e,t,n)}function Ee(e,t,n){return b?qe(8,1,e,t,n):0}function Ce(e,t){if(b)return qe(9,1,e,t)}function Pe(e,t,n){if(b)return qe(10,1,e,t,n)}function ke(e,t,n,r){if(b)return qe(11,1,e,t,n,r)}function Me(e,t,n,r){if(b)return qe(12,1,e,t,n,r)}function Re(e,t,n,r){if(b)return qe(13,1,e,t,n,r)}function De(e){if(b)return qe(14,1,e)}function ze(e,t){if(b)return qe(15,1,e,t)}function Be(e,t,n){if(b)return qe(16,1,e,t,n)}var Ge=e=>{if(!U)try{if(e(),!q())try{b?mt(R):de(R)}catch(e){e instanceof oe||"unwind"==e||g(1,e)}}catch(e){e instanceof oe||"unwind"==e||g(1,e)}};function je(e){e>>>=0,"function"==typeof Atomics.nb&&(Atomics.nb(a(),e>>2,e).value.then(Ue),e+=128,Atomics.store(a(),e>>2,1))}function Ue(){var e=pt();e&&(je(e),Ge((()=>yt())))}s.__emscripten_thread_mailbox_await=je,s.checkMailbox=Ue;var We=e=>0==e%4&&(0!=e%100||0==e%400),Ve=[0,31,60,91,121,152,182,213,244,274,305,335],Le=[0,31,59,90,120,151,181,212,243,273,304,334];function Fe(e,t,n,r,a,o,i,c){return b?qe(17,1,e,t,n,r,a,o,i,c):-52}function Ne(e,t,n,r,a,o,i){if(b)return qe(18,1,e,t,n,r,a,o,i)}var He=e=>{var t=xe(e)+1,n=ft(t);return n&&Oe(e,n,t),n},Ke=e=>{var t=St();return e=e(),_t(t),e};function qe(e,t){var n=arguments.length-2,r=arguments;return Ke((()=>{for(var a=xt(8*n),o=a>>3,c=0;c<n;c++){var u=r[2+c];i()[o+c>>>0]=u}return gt(e,n,a,t)}))}var Ye,Xe=[],$e={},Qe=()=>{if(!Ye){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:h||"./this.program"};for(e in $e)void 0===$e[e]?delete t[e]:t[e]=$e[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);Ye=n}return Ye};function Je(e,n){if(b)return qe(19,1,e,n);e>>>=0,n>>>=0;var r=0;return Qe().forEach((function(a,i){var c=n+r;for(i=o()[e+4*i>>2>>>0]=c,c=0;c<a.length;++c)t()[i++>>0>>>0]=a.charCodeAt(c);t()[i>>0>>>0]=0,r+=a.length+1})),0}function Ze(e,t){if(b)return qe(20,1,e,t);e>>>=0,t>>>=0;var n=Qe();o()[e>>2>>>0]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),o()[t>>2>>>0]=r,0}function et(e){return b?qe(21,1,e):52}function tt(e,t,n,r){return b?qe(22,1,e,t,n,r):52}function nt(e,t,n,r,a){return b?qe(23,1,e,t,n,r,a):70}var rt=[null,[],[]];function at(e,t,n,a){if(b)return qe(24,1,e,t,n,a);t>>>=0,n>>>=0,a>>>=0;for(var i=0,c=0;c<n;c++){var u=o()[t>>2>>>0],s=o()[t+4>>2>>>0];t+=8;for(var l=0;l<s;l++){var p=r()[u+l>>>0],f=rt[e];0===p||10===p?((1===e?A:E)(le(f,0)),f.length=0):f.push(p)}i+=s}return o()[a>>2>>>0]=i,0}var ot=[31,29,31,30,31,30,31,31,30,31,30,31],it=[31,28,31,30,31,30,31,31,30,31,30,31],ct=(e,n)=>{t().set(e,n>>>0)};function ut(e,t,n,r){function o(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function i(e,t){return o(e,t,"0")}function c(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function u(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function s(e){var t=e.Ja;for(e=new Date(new Date(e.Ka+1900,0,1).getTime());0<t;){var n=e.getMonth(),r=(We(e.getFullYear())?ot:it)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=u(new Date(e.getFullYear(),0,4)),n=u(n),0>=c(t,e)?0>=c(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,n>>>=0,r>>>=0;var l=a()[r+40>>2>>>0];for(var p in r={kb:a()[r>>2>>>0],jb:a()[r+4>>2>>>0],Ma:a()[r+8>>2>>>0],Qa:a()[r+12>>2>>>0],Na:a()[r+16>>2>>>0],Ka:a()[r+20>>2>>>0],Ga:a()[r+24>>2>>>0],Ja:a()[r+28>>2>>>0],sb:a()[r+32>>2>>>0],ib:a()[r+36>>2>>>0],lb:l?pe(l):""},n=pe(n),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(p,"g"),l[p]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in l={"%a":e=>f[e.Ga].substring(0,3),"%A":e=>f[e.Ga],"%b":e=>d[e.Na].substring(0,3),"%B":e=>d[e.Na],"%C":e=>i((e.Ka+1900)/100|0,2),"%d":e=>i(e.Qa,2),"%e":e=>o(e.Qa,2," "),"%g":e=>s(e).toString().substring(2),"%G":e=>s(e),"%H":e=>i(e.Ma,2),"%I":e=>(0==(e=e.Ma)?e=12:12<e&&(e-=12),i(e,2)),"%j":e=>{for(var t=0,n=0;n<=e.Na-1;t+=(We(e.Ka+1900)?ot:it)[n++]);return i(e.Qa+t,3)},"%m":e=>i(e.Na+1,2),"%M":e=>i(e.jb,2),"%n":()=>"\\n","%p":e=>0<=e.Ma&&12>e.Ma?"AM":"PM","%S":e=>i(e.kb,2),"%t":()=>"\\t","%u":e=>e.Ga||7,"%U":e=>i(Math.floor((e.Ja+7-e.Ga)/7),2),"%V":e=>{var t=Math.floor((e.Ja+7-(e.Ga+6)%7)/7);if(2>=(e.Ga+371-e.Ja-2)%7&&t++,t)53==t&&(4==(n=(e.Ga+371-e.Ja)%7)||3==n&&We(e.Ka)||(t=1));else{t=52;var n=(e.Ga+7-e.Ja-1)%7;(4==n||5==n&&We(e.Ka%400-1))&&t++}return i(t,2)},"%w":e=>e.Ga,"%W":e=>i(Math.floor((e.Ja+7-(e.Ga+6)%7)/7),2),"%y":e=>(e.Ka+1900).toString().substring(2),"%Y":e=>e.Ka+1900,"%z":e=>{var t=0<=(e=e.ib);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.lb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0"),l)n.includes(p)&&(n=n.replace(new RegExp(p,"g"),l[p](r)));return p=function(e){var t=Array(xe(e)+1);return Te(e,t,0,t.length),t}(n=n.replace(/\\0\\0/g,"%")),p.length>t?0:(ct(p,e),p.length-1)}he.Pa();var st=[null,fe,ve,be,Se,_e,Ie,Ae,Ee,Ce,Pe,ke,Me,Re,De,ze,Be,Fe,Ne,Je,Ze,et,tt,nt,at],lt={b:function(e,t,n){throw new ye(e>>>=0).Pa(t>>>0,n>>>0),e},N:function(e){dt(e>>>0,!m,1,!v,131072,!1),he.Sa()},j:function(e){e>>>=0,b?postMessage({cmd:"cleanupThread",thread:e}):ce(e)},I:we,h:Se,T:_e,D:Ie,F:Ae,U:Ee,R:Ce,J:Pe,Q:ke,n:Me,E:Re,B:De,S:ze,C:Be,q:()=>!0,z:function(e,t){(e>>>=0)==t>>>0?setTimeout((()=>Ue())):b?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=he.Fa[e])&&e.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:je,p:function(e){y&&he.Fa[e>>>0].ref()},t:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),a()[n>>2>>>0]=e.getUTCSeconds(),a()[n+4>>2>>>0]=e.getUTCMinutes(),a()[n+8>>2>>>0]=e.getUTCHours(),a()[n+12>>2>>>0]=e.getUTCDate(),a()[n+16>>2>>>0]=e.getUTCMonth(),a()[n+20>>2>>>0]=e.getUTCFullYear()-1900,a()[n+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[n+28>>2>>>0]=e},u:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),a()[n>>2>>>0]=e.getSeconds(),a()[n+4>>2>>>0]=e.getMinutes(),a()[n+8>>2>>>0]=e.getHours(),a()[n+12>>2>>>0]=e.getDate(),a()[n+16>>2>>>0]=e.getMonth(),a()[n+20>>2>>>0]=e.getFullYear()-1900,a()[n+24>>2>>>0]=e.getDay(),t=(We(e.getFullYear())?Ve:Le)[e.getMonth()]+e.getDate()-1|0,a()[n+28>>2>>>0]=t,a()[n+36>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var r=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(t!=r&&e.getTimezoneOffset()==Math.min(r,t)),a()[n+32>>2>>>0]=e},v:function(e){e>>>=0;var t=new Date(a()[e+20>>2>>>0]+1900,a()[e+16>>2>>>0],a()[e+12>>2>>>0],a()[e+8>>2>>>0],a()[e+4>>2>>>0],a()[e>>2>>>0],0),n=a()[e+32>>2>>>0],r=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=new Date(t.getFullYear(),0,1).getTimezoneOffset(),c=Math.min(i,o);return 0>n?a()[e+32>>2>>>0]=Number(o!=i&&c==r):0<n!=(c==r)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<n?c:o)-r))),a()[e+24>>2>>>0]=t.getDay(),n=(We(t.getFullYear())?Ve:Le)[t.getMonth()]+t.getDate()-1|0,a()[e+28>>2>>>0]=n,a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getYear(),e=t.getTime()/1e3,bt((X=e,1<=+Math.abs(X)?0<X?+Math.floor(X/4294967296)>>>0:~~+Math.ceil((X-+(~~X>>>0))/4294967296)>>>0:0)),e>>>0},r:Fe,s:Ne,y:function(e,t,n){function r(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}e>>>=0,t>>>=0,n>>>=0;var i=(new Date).getFullYear(),c=new Date(i,0,1),u=new Date(i,6,1);i=c.getTimezoneOffset();var s=u.getTimezoneOffset(),l=Math.max(i,s);o()[e>>2>>>0]=60*l,a()[t>>2>>>0]=Number(i!=s),e=r(c),t=r(u),e=He(e),t=He(t),s<i?(o()[n>>2>>>0]=e,o()[n+4>>2>>>0]=t):(o()[n>>2>>>0]=t,o()[n+4>>2>>>0]=e)},c:()=>{te("")},k:function(){},i:function(){return Date.now()},o:()=>{throw K+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return y?n(3993).cpus().length:navigator.hardwareConcurrency},K:function(e,t,n,r){for(he.pb=t>>>0,Xe.length=n,t=r>>>0>>3,r=0;r<n;r++)Xe[r]=i()[t+r>>>0];return st[e].apply(null,Xe)},x:function(e){e>>>=0;var t=r().length;if(e<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var a=t*(1+.2/n);a=Math.min(a,e+100663296);var o=Math;a=Math.max(e,a);e:{o=o.min.call(o,4294901760,a+(65536-a%65536)%65536)-P.buffer.byteLength+65535>>>16;try{P.grow(o),W();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},O:Je,P:Ze,H:de,g:et,m:tt,w:nt,l:at,a:P||s.wasmMemory,G:ut,d:function(e,t,n,r){return ut(e>>>0,t>>>0,n>>>0,r>>>0)}};!function(){function e(e,t){return e=e.exports,k=e=function(e){var t=e=>()=>e()>>>0,n=e=>t=>e(t)>>>0;return(e=Object.assign({},e)).__errno_location=t(e.__errno_location),e.pthread_self=t(e.pthread_self),e.malloc=n(e.malloc),e.stackSave=t(e.stackSave),e.stackAlloc=n(e.stackAlloc),e}(e),he.Ta.push(k.sa),L=k.ta,N.unshift(k.V),M=t,ee(),e}var t={a:lt};if(Z(),s.instantiateWasm)try{return s.instantiateWasm(t,e)}catch(e){E("Module.instantiateWasm callback failed with error: "+e),u(e)}(function(e,t){var n=Y;return I||"function"!=typeof WebAssembly.instantiateStreaming||ne(n)||n.startsWith("file://")||y||"function"!=typeof fetch?ae(n,e,t):fetch(n,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,e).then(t,(function(r){return E("wasm streaming compile failed: "+r),E("falling back to ArrayBuffer instantiation"),ae(n,e,t)}))))})(t,(function(t){e(t.instance,t.module)})).catch(u)}(),s._OrtInit=(e,t)=>(s._OrtInit=k.W)(e,t),s._OrtGetLastError=(e,t)=>(s._OrtGetLastError=k.X)(e,t),s._OrtCreateSessionOptions=(e,t,n,r,a,o,i,c,u,l)=>(s._OrtCreateSessionOptions=k.Y)(e,t,n,r,a,o,i,c,u,l),s._OrtAppendExecutionProvider=(e,t)=>(s._OrtAppendExecutionProvider=k.Z)(e,t),s._OrtAddFreeDimensionOverride=(e,t,n)=>(s._OrtAddFreeDimensionOverride=k._)(e,t,n),s._OrtAddSessionConfigEntry=(e,t,n)=>(s._OrtAddSessionConfigEntry=k.$)(e,t,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=k.aa)(e),s._OrtCreateSession=(e,t,n)=>(s._OrtCreateSession=k.ba)(e,t,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=k.ca)(e),s._OrtGetInputOutputCount=(e,t,n)=>(s._OrtGetInputOutputCount=k.da)(e,t,n),s._OrtGetInputName=(e,t)=>(s._OrtGetInputName=k.ea)(e,t),s._OrtGetOutputName=(e,t)=>(s._OrtGetOutputName=k.fa)(e,t),s._OrtFree=e=>(s._OrtFree=k.ga)(e),s._OrtCreateTensor=(e,t,n,r,a)=>(s._OrtCreateTensor=k.ha)(e,t,n,r,a),s._OrtGetTensorData=(e,t,n,r,a)=>(s._OrtGetTensorData=k.ia)(e,t,n,r,a),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=k.ja)(e),s._OrtCreateRunOptions=(e,t,n,r)=>(s._OrtCreateRunOptions=k.ka)(e,t,n,r),s._OrtAddRunConfigEntry=(e,t,n)=>(s._OrtAddRunConfigEntry=k.la)(e,t,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=k.ma)(e),s._OrtRun=(e,t,n,r,a,o,i,c)=>(s._OrtRun=k.na)(e,t,n,r,a,o,i,c),s._OrtEndProfiling=e=>(s._OrtEndProfiling=k.oa)(e);var pt=s._pthread_self=()=>(pt=s._pthread_self=k.pa)(),ft=s._malloc=e=>(ft=s._malloc=k.qa)(e);s._free=e=>(s._free=k.ra)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=k.sa)();var dt=s.__emscripten_thread_init=(e,t,n,r,a,o)=>(dt=s.__emscripten_thread_init=k.ua)(e,t,n,r,a,o);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=k.va)();var ht,gt=(e,t,n,r)=>(gt=k.wa)(e,t,n,r),vt=e=>(vt=k.xa)(e),mt=s.__emscripten_thread_exit=e=>(mt=s.__emscripten_thread_exit=k.ya)(e),yt=s.__emscripten_check_mailbox=()=>(yt=s.__emscripten_check_mailbox=k.za)(),bt=e=>(bt=k.Aa)(e),wt=(e,t)=>(wt=k.Ba)(e,t),St=()=>(St=k.Ca)(),_t=e=>(_t=k.Da)(e),xt=e=>(xt=k.Ea)(e);function Tt(){function e(){if(!ht&&(ht=!0,s.calledRun=!0,!U)&&(b||ge(N),c(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),!b)){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;){var e=s.postRun.shift();H.unshift(e)}ge(H)}}if(!(0<$))if(b)c(s),b||ge(N),startWorker(s);else{if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)F.unshift(s.preRun.shift());ge(F),0<$||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),e()}),1)):e())}}if(s.keepRuntimeAlive=q,s.wasmMemory=P,s.stackAlloc=xt,s.stackSave=St,s.stackRestore=_t,s.UTF8ToString=pe,s.stringToUTF8=Oe,s.lengthBytesUTF8=xe,s.ExitStatus=oe,s.PThread=he,J=function e(){ht||Tt(),ht||(J=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return Tt(),e.ready});e.exports=r},932:function(e,t,n){var _scriptDir,r=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){var t,r,a=e;a.ready=new Promise(((e,n)=>{t=e,r=n}));var o,i,c,u=Object.assign({},a),s="./this.program",l="object"==typeof window,p="function"==typeof importScripts,f="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,d="";if(f){var h=n(1384),g=n(908);d=p?g.dirname(d)+"/":__dirname+"/",o=(e,t)=>(e=e.startsWith("file://")?new URL(e):g.normalize(e),h.readFileSync(e,t?void 0:"utf8")),c=e=>((e=o(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,t,n,r=!0)=>{e=e.startsWith("file://")?new URL(e):g.normalize(e),h.readFile(e,r?void 0:"utf8",((e,a)=>{e?n(e):t(r?a.buffer:a)}))},!a.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(l||p)&&(p?d=self.location.href:"undefined"!=typeof document&&document.currentScript&&(d=document.currentScript.src),_scriptDir&&(d=_scriptDir),d=0!==d.indexOf("blob:")?d.substr(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},p&&(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),i=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var v,m=a.print||console.log.bind(console),y=a.printErr||console.error.bind(console);Object.assign(a,u),u=null,a.thisProgram&&(s=a.thisProgram),a.wasmBinary&&(v=a.wasmBinary),a.noExitRuntime,"object"!=typeof WebAssembly&&V("no native wasm support detected");var b,w,S,_,x,T,O,I,A,E,C,P,k=!1;function M(){var e=b.buffer;a.HEAP8=S=new Int8Array(e),a.HEAP16=x=new Int16Array(e),a.HEAP32=O=new Int32Array(e),a.HEAPU8=_=new Uint8Array(e),a.HEAPU16=T=new Uint16Array(e),a.HEAPU32=I=new Uint32Array(e),a.HEAPF32=A=new Float32Array(e),a.HEAPF64=P=new Float64Array(e),a.HEAP64=E=new BigInt64Array(e),a.HEAPU64=C=new BigUint64Array(e)}var R=[],D=[],z=[];function B(){var e=a.preRun.shift();R.unshift(e)}var G,j=0,U=null,W=null;function V(e){throw a.onAbort&&a.onAbort(e),y(e="Aborted("+e+")"),k=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),r(e),e}function L(e){return e.startsWith("data:application/octet-stream;base64,")}if(!L(G="ort-wasm.wasm")){var F=G;G=a.locateFile?a.locateFile(F,d):d+F}function N(e){if(e==G&&v)return new Uint8Array(v);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}function H(e,t,n){return function(e){if(!v&&(l||p)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()})).catch((()=>N(e)));if(i)return new Promise(((t,n)=>{i(e,(e=>t(new Uint8Array(e))),n)}))}return Promise.resolve().then((()=>N(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(n,(e=>{y("failed to asynchronously prepare wasm: "+e),V(e)}))}var K=e=>{for(;0<e.length;)e.shift()(a)};function q(e){this.Pa=e-24,this.Za=function(e){I[this.Pa+4>>2]=e},this.Ya=function(e){I[this.Pa+8>>2]=e},this.Ta=function(e,t){this.Ua(),this.Za(e),this.Ya(t)},this.Ua=function(){I[this.Pa+16>>2]=0}}var Y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,X=(e,t,n)=>{var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&Y)return Y.decode(e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r},$=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t},Q=(e,t,n,r)=>{if(!(0<r))return 0;var a=n;r=n+r-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(n>=r)break;t[n++]=i}else{if(2047>=i){if(n+1>=r)break;t[n++]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;t[n++]=224|i>>12}else{if(n+3>=r)break;t[n++]=240|i>>18,t[n++]=128|i>>12&63}t[n++]=128|i>>6&63}t[n++]=128|63&i}}return t[n]=0,n-a};function J(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}var Z=void 0;function ee(e){for(var t="";_[e];)t+=Z[_[e++]];return t}var te={},ne={},re={},ae=void 0;function oe(e){throw new ae(e)}function ie(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");!function(e,t,n={}){var r=t.name;if(e||oe(`type "${r}" must have a positive integer typeid pointer`),ne.hasOwnProperty(e)){if(n.$a)return;oe(`Cannot register type \'${r}\' twice`)}ne[e]=t,delete re[e],te.hasOwnProperty(e)&&(t=te[e],delete te[e],t.forEach((e=>e())))}(e,t,n)}function ce(e,t,n){switch(t){case 0:return n?function(e){return S[e]}:function(e){return _[e]};case 1:return n?function(e){return x[e>>1]}:function(e){return T[e>>1]};case 2:return n?function(e){return O[e>>2]}:function(e){return I[e>>2]};case 3:return n?function(e){return E[e>>3]}:function(e){return C[e>>3]};default:throw new TypeError("Unknown integer type: "+e)}}function ue(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function se(){this.Ma=[void 0],this.Wa=[]}var le=new se;function pe(e){e>=le.Pa&&0==--le.get(e).Xa&&le.Ua(e)}var fe=e=>(e||oe("Cannot use deleted val. handle = "+e),le.get(e).value),de=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return le.Ta({Xa:1,value:e})}};function he(e){return this.fromWireType(O[e>>2])}function ge(e,t){switch(t){case 2:return function(e){return this.fromWireType(A[e>>2])};case 3:return function(e){return this.fromWireType(P[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}var ve="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,me=(e,t)=>{for(var n=e>>1,r=n+t/2;!(n>=r)&&T[n];)++n;if(32<(n<<=1)-e&&ve)return ve.decode(_.subarray(e,n));for(n="",r=0;!(r>=t/2);++r){var a=x[e+2*r>>1];if(0==a)break;n+=String.fromCharCode(a)}return n},ye=(e,t,n)=>{if(void 0===n&&(n=2147483647),2>n)return 0;var r=t;n=(n-=2)<2*e.length?n/2:e.length;for(var a=0;a<n;++a)x[t>>1]=e.charCodeAt(a),t+=2;return x[t>>1]=0,t-r},be=e=>2*e.length,we=(e,t)=>{for(var n=0,r="";!(n>=t/4);){var a=O[e+4*n>>2];if(0==a)break;++n,65536<=a?(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a)):r+=String.fromCharCode(a)}return r},Se=(e,t,n)=>{if(void 0===n&&(n=2147483647),4>n)return 0;var r=t;n=r+n-4;for(var a=0;a<e.length;++a){var o=e.charCodeAt(a);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++a)),O[t>>2]=o,(t+=4)+4>n)break}return O[t>>2]=0,t-r},_e=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&++n,t+=4}return t};function xe(e,t){var n=ne[e];if(void 0===n){var r=ee(e=Ye(e));qe(e),oe(t+" has unknown type "+r)}return n}var Te={};function Oe(e){var t=Te[e];return void 0===t?ee(e):t}var Ie=[];function Ae(){return"object"==typeof globalThis?globalThis:Function("return this")()}function Ee(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e}var Ce=[];var Pe={};function ke(e){return-9007199254740992>e||9007199254740992<e?NaN:Number(e)}for(var Me,Re=e=>0==e%4&&(0!=e%100||0==e%400),De=[0,31,60,91,121,152,182,213,244,274,305,335],ze=[0,31,59,90,120,151,181,212,243,273,304,334],Be=e=>{var t=$(e)+1,n=Ke(t);return n&&Q(e,_,n,t),n},Ge={},je=()=>{if(!Me){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"};for(e in Ge)void 0===Ge[e]?delete t[e]:t[e]=Ge[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);Me=n}return Me},Ue=[null,[],[]],We=[31,29,31,30,31,30,31,31,30,31,30,31],Ve=[31,28,31,30,31,30,31,31,30,31,30,31],Le=(e,t,n,r)=>{function a(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function o(e,t){return a(e,t,"0")}function i(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function c(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.Na;for(e=new Date(new Date(e.Oa+1900,0,1).getTime());0<t;){var n=e.getMonth(),r=(Re(e.getFullYear())?We:Ve)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=c(new Date(e.getFullYear(),0,4)),n=c(n),0>=i(t,e)?0>=i(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var s=O[r+40>>2];for(var l in r={eb:O[r>>2],cb:O[r+4>>2],Ra:O[r+8>>2],Va:O[r+12>>2],Sa:O[r+16>>2],Oa:O[r+20>>2],Ia:O[r+24>>2],Na:O[r+28>>2],gb:O[r+32>>2],bb:O[r+36>>2],fb:s&&s?X(_,s):""},n=n?X(_,n):"",s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var p="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),f="January February March April May June July August September October November December".split(" ");for(l in s={"%a":e=>p[e.Ia].substring(0,3),"%A":e=>p[e.Ia],"%b":e=>f[e.Sa].substring(0,3),"%B":e=>f[e.Sa],"%C":e=>o((e.Oa+1900)/100|0,2),"%d":e=>o(e.Va,2),"%e":e=>a(e.Va,2," "),"%g":e=>u(e).toString().substring(2),"%G":e=>u(e),"%H":e=>o(e.Ra,2),"%I":e=>(0==(e=e.Ra)?e=12:12<e&&(e-=12),o(e,2)),"%j":e=>{for(var t=0,n=0;n<=e.Sa-1;t+=(Re(e.Oa+1900)?We:Ve)[n++]);return o(e.Va+t,3)},"%m":e=>o(e.Sa+1,2),"%M":e=>o(e.cb,2),"%n":()=>"\\n","%p":e=>0<=e.Ra&&12>e.Ra?"AM":"PM","%S":e=>o(e.eb,2),"%t":()=>"\\t","%u":e=>e.Ia||7,"%U":e=>o(Math.floor((e.Na+7-e.Ia)/7),2),"%V":e=>{var t=Math.floor((e.Na+7-(e.Ia+6)%7)/7);if(2>=(e.Ia+371-e.Na-2)%7&&t++,t)53==t&&(4==(n=(e.Ia+371-e.Na)%7)||3==n&&Re(e.Oa)||(t=1));else{t=52;var n=(e.Ia+7-e.Na-1)%7;(4==n||5==n&&Re(e.Oa%400-1))&&t++}return o(t,2)},"%w":e=>e.Ia,"%W":e=>o(Math.floor((e.Na+7-(e.Ia+6)%7)/7),2),"%y":e=>(e.Oa+1900).toString().substring(2),"%Y":e=>e.Oa+1900,"%z":e=>{var t=0<=(e=e.bb);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.fb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(e){var t=Array($(e)+1);return Q(e,t,0,t.length),t}(n=n.replace(/\\0\\0/g,"%")),l.length>t?0:(S.set(l,e),l.length-1)},Fe=Array(256),Ne=0;256>Ne;++Ne)Fe[Ne]=String.fromCharCode(Ne);Z=Fe,ae=a.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},a.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(se.prototype,{get(e){return this.Ma[e]},has(e){return void 0!==this.Ma[e]},Ta(e){var t=this.Wa.pop()||this.Ma.length;return this.Ma[t]=e,t},Ua(e){this.Ma[e]=void 0,this.Wa.push(e)}}),le.Ma.push({value:void 0},{value:null},{value:!0},{value:!1}),le.Pa=le.Ma.length,a.count_emval_handles=function(){for(var e=0,t=le.Pa;t<le.Ma.length;++t)void 0!==le.Ma[t]&&++e;return e};var He={a:function(e,t,n){throw new q(e).Ta(t,n),e},v:function(){return 0},ba:()=>{},N:()=>{},P:()=>{},H:function(){return 0},$:()=>{},V:()=>{},_:()=>{},A:function(){},O:()=>{},L:()=>{},aa:()=>{},M:()=>{},D:function(e,t,n,r,a){t=ee(t),n=ue(n);var o=-1!=t.indexOf("u");o&&(a=(1n<<64n)-1n),ie(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,n){if("bigint"!=typeof n&&"number"!=typeof n)throw new TypeError(`Cannot convert "${J(n)}" to ${this.name}`);if(n<r||n>a)throw new TypeError(`Passing a number "${J(n)}" from JS side to C/C++ side to an argument of type "${t}", which is outside the valid range [${r}, ${a}]!`);return n},argPackAdvance:8,readValueFromPointer:ce(t,n,!o),Qa:null})},ea:function(e,t,n,r,a){var o=ue(n);ie(e,{name:t=ee(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:a},argPackAdvance:8,readValueFromPointer:function(e){if(1===n)var r=S;else if(2===n)r=x;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=O}return this.fromWireType(r[e>>o])},Qa:null})},da:function(e,t){ie(e,{name:t=ee(t),fromWireType:function(e){var t=fe(e);return pe(e),t},toWireType:function(e,t){return de(t)},argPackAdvance:8,readValueFromPointer:he,Qa:null})},C:function(e,t,n){n=ue(n),ie(e,{name:t=ee(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:ge(t,n),Qa:null})},p:function(e,t,n,r,a){t=ee(t),-1===a&&(a=4294967295),a=ue(n);var o=e=>e;if(0===r){var i=32-8*n;o=e=>e<<i>>>i}n=t.includes("unsigned")?function(e,t){return t>>>0}:function(e,t){return t},ie(e,{name:t,fromWireType:o,toWireType:n,argPackAdvance:8,readValueFromPointer:ce(t,a,0!==r),Qa:null})},l:function(e,t,n){function r(e){e>>=2;var t=I;return new a(t.buffer,t[e+1],t[e])}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];ie(e,{name:n=ee(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{$a:!0})},E:function(e,t){var n="std::string"===(t=ee(t));ie(e,{name:t,fromWireType:function(e){var t=I[e>>2],r=e+4;if(n)for(var a=r,o=0;o<=t;++o){var i=r+o;if(o==t||0==_[i]){if(a=a?X(_,a,i-a):"",void 0===c)var c=a;else c+=String.fromCharCode(0),c+=a;a=i+1}}else{for(c=Array(t),o=0;o<t;++o)c[o]=String.fromCharCode(_[r+o]);c=c.join("")}return qe(e),c},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||oe("Cannot pass non-string to std::string");var a=n&&r?$(t):t.length,o=Ke(4+a+1),i=o+4;if(I[o>>2]=a,n&&r)Q(t,_,i,a+1);else if(r)for(r=0;r<a;++r){var c=t.charCodeAt(r);255<c&&(qe(i),oe("String has UTF-16 code units that do not fit in 8 bits")),_[i+r]=c}else for(r=0;r<a;++r)_[i+r]=t[r];return null!==e&&e.push(qe,o),o},argPackAdvance:8,readValueFromPointer:he,Qa:function(e){qe(e)}})},x:function(e,t,n){if(n=ee(n),2===t)var r=me,a=ye,o=be,i=()=>T,c=1;else 4===t&&(r=we,a=Se,o=_e,i=()=>I,c=2);ie(e,{name:n,fromWireType:function(e){for(var n,a=I[e>>2],o=i(),u=e+4,s=0;s<=a;++s){var l=e+4+s*t;s!=a&&0!=o[l>>c]||(u=r(u,l-u),void 0===n?n=u:(n+=String.fromCharCode(0),n+=u),u=l+t)}return qe(e),n},toWireType:function(e,r){"string"!=typeof r&&oe(`Cannot pass non-string to C++ string type ${n}`);var i=o(r),u=Ke(4+i+t);return I[u>>2]=i>>c,a(r,u+4,i+t),null!==e&&e.push(qe,u),u},argPackAdvance:8,readValueFromPointer:he,Qa:function(e){qe(e)}})},fa:function(e,t){ie(e,{ab:!0,name:t=ee(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},ca:()=>!0,o:function(e,t,n){e=fe(e),t=xe(t,"emval::as");var r=[],a=de(r);return I[n>>2]=a,t.toWireType(r,e)},h:function(e,t,n,r,a){e=Ie[e],t=fe(t),n=Oe(n);var o=[];return I[r>>2]=de(o),e(t,n,o,a)},q:function(e,t,n,r){(e=Ie[e])(t=fe(t),n=Oe(n),null,r)},b:pe,F:function(e,t){return(e=fe(e))==fe(t)},u:function(e){return 0===e?de(Ae()):(e=Oe(e),de(Ae()[e]))},g:function(e,t){var n=function(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=xe(I[t+4*r>>2],"parameter "+r);return n}(e,t),r=n[0];t=r.name+"_$"+n.slice(1).map((function(e){return e.name})).join("_")+"$";var a=Ce[t];if(void 0!==a)return a;a=["retType"];for(var o=[r],i="",c=0;c<e-1;++c)i+=(0!==c?", ":"")+"arg"+c,a.push("argType"+c),o.push(n[1+c]);var u="return function "+Ee("methodCaller_"+t)+"(handle, name, destructors, args) {\\n",s=0;for(c=0;c<e-1;++c)u+="    var arg"+c+" = argType"+c+".readValueFromPointer(args"+(s?"+"+s:"")+");\\n",s+=n[c+1].argPackAdvance;for(u+="    var rv = handle[name]("+i+");\\n",c=0;c<e-1;++c)n[c+1].deleteObject&&(u+="    argType"+c+".deleteObject(arg"+c+");\\n");return r.ab||(u+="    return retType.toWireType(destructors, rv);\\n"),a.push(u+"};\\n"),a=function(e){var t=Ie.length;return Ie.push(e),t}(e=function(e){var t=Function;if(!(t instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof t} which is not a function`);var n=function(e,t){return{[e=Ee(e)]:function(){return t.apply(this,arguments)}}[e]}(t.name||"unknownFunctionName",(function(){}));return n.prototype=t.prototype,n=new n,(e=t.apply(n,e))instanceof Object?e:n}(a).apply(null,o)),Ce[t]=a},r:function(e,t){return e=fe(e),t=fe(t),de(e[t])},c:function(e){4<e&&(le.get(e).Xa+=1)},G:function(e,t,n,r){e=fe(e);var o=Pe[t];return o||(o=function(e){for(var t="",n=0;n<e;++n)t+=(0!==n?", ":"")+"arg"+n;var r="return function emval_allocator_"+e+"(constructor, argTypes, args) {\\n  var HEAPU32 = getMemory();\\n";for(n=0;n<e;++n)r+="var argType"+n+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], \'parameter "+n+"\');\\nvar arg"+n+" = argType"+n+".readValueFromPointer(args);\\nargs += argType"+n+"[\'argPackAdvance\'];\\nargTypes += 4;\\n";return new Function("requireRegisteredType","Module","valueToHandle","getMemory",r+"var obj = new constructor("+t+");\\nreturn valueToHandle(obj);\\n}\\n")(xe,a,de,(()=>I))}(t),Pe[t]=o),o(e,n,r)},s:function(){return de([])},k:function(e){e=fe(e);for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return de(t)},d:function(e){return de(Oe(e))},j:function(){return de({})},f:function(e){for(var t=fe(e);t.length;){var n=t.pop();t.pop()(n)}pe(e)},i:function(e,t,n){e=fe(e),t=fe(t),n=fe(n),e[t]=n},e:function(e,t){return e=(e=xe(e,"_emval_take_value")).readValueFromPointer(t),de(e)},S:function(e,t){e=ke(e),t=ke(t),e=new Date(1e3*e),O[t>>2]=e.getUTCSeconds(),O[t+4>>2]=e.getUTCMinutes(),O[t+8>>2]=e.getUTCHours(),O[t+12>>2]=e.getUTCDate(),O[t+16>>2]=e.getUTCMonth(),O[t+20>>2]=e.getUTCFullYear()-1900,O[t+24>>2]=e.getUTCDay(),O[t+28>>2]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},T:function(e,t){e=ke(e),t=ke(t),e=new Date(1e3*e),O[t>>2]=e.getSeconds(),O[t+4>>2]=e.getMinutes(),O[t+8>>2]=e.getHours(),O[t+12>>2]=e.getDate(),O[t+16>>2]=e.getMonth(),O[t+20>>2]=e.getFullYear()-1900,O[t+24>>2]=e.getDay(),O[t+28>>2]=(Re(e.getFullYear())?De:ze)[e.getMonth()]+e.getDate()-1|0,O[t+36>>2]=-60*e.getTimezoneOffset();var n=new Date(e.getFullYear(),6,1).getTimezoneOffset(),r=new Date(e.getFullYear(),0,1).getTimezoneOffset();O[t+32>>2]=0|(n!=r&&e.getTimezoneOffset()==Math.min(r,n))},U:function(e){e=ke(e);var t=new Date(O[e+20>>2]+1900,O[e+16>>2],O[e+12>>2],O[e+8>>2],O[e+4>>2],O[e>>2],0),n=O[e+32>>2],r=t.getTimezoneOffset(),a=new Date(t.getFullYear(),6,1).getTimezoneOffset(),o=new Date(t.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(o,a);return 0>n?O[e+32>>2]=Number(a!=o&&i==r):0<n!=(i==r)&&(a=Math.max(o,a),t.setTime(t.getTime()+6e4*((0<n?i:a)-r))),O[e+24>>2]=t.getDay(),O[e+28>>2]=(Re(t.getFullYear())?De:ze)[t.getMonth()]+t.getDate()-1|0,O[e>>2]=t.getSeconds(),O[e+4>>2]=t.getMinutes(),O[e+8>>2]=t.getHours(),O[e+12>>2]=t.getDate(),O[e+16>>2]=t.getMonth(),O[e+20>>2]=t.getYear(),BigInt(t.getTime()/1e3)},Q:function(){return-52},R:function(){},J:(e,t,n)=>{function r(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}var a=(new Date).getFullYear(),o=new Date(a,0,1),i=new Date(a,6,1);a=o.getTimezoneOffset();var c=i.getTimezoneOffset();I[e>>2]=60*Math.max(a,c),O[t>>2]=Number(a!=c),e=r(o),t=r(i),e=Be(e),t=Be(t),c<a?(I[n>>2]=e,I[n+4>>2]=t):(I[n>>2]=t,I[n+4>>2]=e)},t:()=>{V("")},B:function(){return Date.now()},K:()=>2147483648,n:()=>performance.now(),Z:(e,t,n)=>_.copyWithin(e,t,t+n),I:e=>{var t=_.length;if(2147483648<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var a=Math;r=Math.max(e,r);e:{a=a.min.call(a,2147483648,r+(65536-r%65536)%65536)-b.buffer.byteLength+65535>>>16;try{b.grow(a),M();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1},X:(e,t)=>{var n=0;return je().forEach((function(r,a){var o=t+n;for(a=I[e+4*a>>2]=o,o=0;o<r.length;++o)S[a++>>0]=r.charCodeAt(o);S[a>>0]=0,n+=r.length+1})),0},Y:(e,t)=>{var n=je();I[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),I[t>>2]=r,0},w:()=>52,z:()=>52,W:function(){return 70},y:(e,t,n,r)=>{for(var a=0,o=0;o<n;o++){var i=I[t>>2],c=I[t+4>>2];t+=8;for(var u=0;u<c;u++){var s=_[i+u],l=Ue[e];0===s||10===s?((1===e?m:y)(X(l,0)),l.length=0):l.push(s)}a+=c}return I[r>>2]=a,0},ga:Le,m:(e,t,n,r)=>Le(e,t,n,r)};!function(){function e(e){if(w=e=e.exports,b=w.ha,M(),D.unshift(w.ia),j--,a.monitorRunDependencies&&a.monitorRunDependencies(j),0==j&&(null!==U&&(clearInterval(U),U=null),W)){var t=W;W=null,t()}return e}var t={a:He};if(j++,a.monitorRunDependencies&&a.monitorRunDependencies(j),a.instantiateWasm)try{return a.instantiateWasm(t,e)}catch(e){y("Module.instantiateWasm callback failed with error: "+e),r(e)}(function(e,t){var n=G;return v||"function"!=typeof WebAssembly.instantiateStreaming||L(n)||n.startsWith("file://")||f||"function"!=typeof fetch?H(n,e,t):fetch(n,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,e).then(t,(function(r){return y("wasm streaming compile failed: "+r),y("falling back to ArrayBuffer instantiation"),H(n,e,t)}))))})(t,(function(t){e(t.instance)})).catch(r)}(),a._OrtInit=(e,t)=>(a._OrtInit=w.ja)(e,t),a._OrtGetLastError=(e,t)=>(a._OrtGetLastError=w.ka)(e,t),a._OrtCreateSessionOptions=(e,t,n,r,o,i,c,u,s,l)=>(a._OrtCreateSessionOptions=w.la)(e,t,n,r,o,i,c,u,s,l),a._OrtAppendExecutionProvider=(e,t)=>(a._OrtAppendExecutionProvider=w.ma)(e,t),a._OrtAddFreeDimensionOverride=(e,t,n)=>(a._OrtAddFreeDimensionOverride=w.na)(e,t,n),a._OrtAddSessionConfigEntry=(e,t,n)=>(a._OrtAddSessionConfigEntry=w.oa)(e,t,n),a._OrtReleaseSessionOptions=e=>(a._OrtReleaseSessionOptions=w.pa)(e),a._OrtCreateSession=(e,t,n)=>(a._OrtCreateSession=w.qa)(e,t,n),a._OrtReleaseSession=e=>(a._OrtReleaseSession=w.ra)(e),a._OrtGetInputOutputCount=(e,t,n)=>(a._OrtGetInputOutputCount=w.sa)(e,t,n),a._OrtGetInputName=(e,t)=>(a._OrtGetInputName=w.ta)(e,t),a._OrtGetOutputName=(e,t)=>(a._OrtGetOutputName=w.ua)(e,t),a._OrtFree=e=>(a._OrtFree=w.va)(e),a._OrtCreateTensor=(e,t,n,r,o)=>(a._OrtCreateTensor=w.wa)(e,t,n,r,o),a._OrtGetTensorData=(e,t,n,r,o)=>(a._OrtGetTensorData=w.xa)(e,t,n,r,o),a._OrtReleaseTensor=e=>(a._OrtReleaseTensor=w.ya)(e),a._OrtCreateRunOptions=(e,t,n,r)=>(a._OrtCreateRunOptions=w.za)(e,t,n,r),a._OrtAddRunConfigEntry=(e,t,n)=>(a._OrtAddRunConfigEntry=w.Aa)(e,t,n),a._OrtReleaseRunOptions=e=>(a._OrtReleaseRunOptions=w.Ba)(e),a._OrtRun=(e,t,n,r,o,i,c,u)=>(a._OrtRun=w.Ca)(e,t,n,r,o,i,c,u),a._OrtEndProfiling=e=>(a._OrtEndProfiling=w.Da)(e);var Ke=a._malloc=e=>(Ke=a._malloc=w.Ea)(e),qe=a._free=e=>(qe=a._free=w.Fa)(e),Ye=e=>(Ye=w.Ga)(e);a.__embind_initialize_bindings=()=>(a.__embind_initialize_bindings=w.Ha)();var Xe,$e=()=>($e=w.Ja)(),Qe=e=>(Qe=w.Ka)(e),Je=e=>(Je=w.La)(e);function Ze(){function e(){if(!Xe&&(Xe=!0,a.calledRun=!0,!k)){if(K(D),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;){var e=a.postRun.shift();z.unshift(e)}K(z)}}if(!(0<j)){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)B();K(R),0<j||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),e()}),1)):e())}}if(a.stackAlloc=Je,a.stackSave=$e,a.stackRestore=Qe,a.UTF8ToString=(e,t)=>e?X(_,e,t):"",a.stringToUTF8=(e,t,n)=>Q(e,_,t,n),a.lengthBytesUTF8=$,W=function e(){Xe||Ze(),Xe||(W=e)},a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();return Ze(),e.ready});e.exports=r},4154:function(e){"use strict";e.exports=\'"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:e=>(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>t.postMessage(e),performance:global.performance||{now:Date.now}})}var o=!1,d=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=(...e)=>{postMessage({cmd:"callHandler",handler:a,args:e})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(d("worker.js received unknown command "+r.data.cmd),d(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};\\n\'},1384:function(){},3993:function(){},908:function(){},6953:function(){},9925:function(){},6449:function(){}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}!function(){"use strict";var e=n(1259),t=n(263);self.onmessage=function(n){switch(n.data.type){case"init-wasm":try{(0,t.initializeWebAssembly)(n.data.in).then((function(){return postMessage({type:"init-wasm"})}),(function(e){return postMessage({type:"init-wasm",err:e})}))}catch(e){postMessage({type:"init-wasm",err:e})}break;case"init-ort":try{(0,e.initRuntime)(n.data.in).then((function(){return postMessage({type:"init-ort"})}),(function(e){return postMessage({type:"init-ort",err:e})})),postMessage({type:"init-ort"})}catch(e){postMessage({type:"init-ort",err:e})}break;case"create_allocate":try{var r=n.data.in.model,a=(0,e.createSessionAllocate)(r);postMessage({type:"create_allocate",out:a})}catch(e){postMessage({type:"create_allocate",err:e})}break;case"create_finalize":try{var o=n.data.in,i=(a=o.modeldata,o.options),c=(0,e.createSessionFinalize)(a,i);postMessage({type:"create_finalize",out:c})}catch(e){postMessage({type:"create_finalize",err:e})}break;case"create":try{var u=n.data.in;r=u.model,i=u.options,c=(0,e.createSession)(r,i),postMessage({type:"create",out:c})}catch(e){postMessage({type:"create",err:e})}break;case"release":try{var s=n.data.in;(0,e.releaseSession)(s),postMessage({type:"release"})}catch(e){postMessage({type:"release",err:e})}break;case"run":try{var l=n.data.in,p=l.sessionId,f=l.inputIndices,d=l.inputs,h=l.outputIndices;i=l.options,(0,e.run)(p,f,d,h,i).then((function(t){postMessage({type:"run",out:t},(0,e.extractTransferableBuffers)(t))}),(function(e){postMessage({type:"run",err:e})}))}catch(e){postMessage({type:"run",err:e})}break;case"end-profiling":try{s=n.data.in,(0,e.endProfiling)(s),postMessage({type:"end-profiling"})}catch(e){postMessage({type:"end-profiling",err:e})}}}}()}();\n',"Worker",void 0,void 0)}},6614:function(t){"use strict";t.exports=function(t,e,n,r){var o=self||window;try{try{var a;try{a=new o.Blob([t])}catch(e){(a=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(t),a=a.getBlob()}var i=o.URL||o.webkitURL,c=i.createObjectURL(a),s=new o[e](c,n);return i.revokeObjectURL(c),s}catch(r){return new o[e]("data:application/javascript,".concat(encodeURIComponent(t)),n)}}catch(t){if(!r)throw Error("Inline worker is not supported");return new o[e](r,n)}}},2446:function(t,e,n){"use strict";var r,o,a,i=n(2100),c=i.Reader,s=i.Writer,u=i.util,l=i.roots.default||(i.roots.default={});l.onnx=((a={}).Version=(r={},(o=Object.create(r))[r[0]="_START_VERSION"]=0,o[r[1]="IR_VERSION_2017_10_10"]=1,o[r[2]="IR_VERSION_2017_10_30"]=2,o[r[3]="IR_VERSION_2017_11_3"]=3,o[r[4]="IR_VERSION_2019_1_22"]=4,o[r[5]="IR_VERSION_2019_3_18"]=5,o[r[6]="IR_VERSION_2019_9_19"]=6,o[r[7]="IR_VERSION_2020_5_8"]=7,o[r[8]="IR_VERSION_2021_7_30"]=8,o[r[9]="IR_VERSION"]=9,o),a.AttributeProto=function(){function t(t){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.refAttrName="",t.prototype.docString="",t.prototype.type=0,t.prototype.f=0,t.prototype.i=u.Long?u.Long.fromBits(0,0,!1):0,t.prototype.s=u.newBuffer([]),t.prototype.t=null,t.prototype.g=null,t.prototype.sparseTensor=null,t.prototype.tp=null,t.prototype.floats=u.emptyArray,t.prototype.ints=u.emptyArray,t.prototype.strings=u.emptyArray,t.prototype.tensors=u.emptyArray,t.prototype.graphs=u.emptyArray,t.prototype.sparseTensors=u.emptyArray,t.prototype.typeProtos=u.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(10).string(t.name),null!=t.f&&Object.hasOwnProperty.call(t,"f")&&e.uint32(21).float(t.f),null!=t.i&&Object.hasOwnProperty.call(t,"i")&&e.uint32(24).int64(t.i),null!=t.s&&Object.hasOwnProperty.call(t,"s")&&e.uint32(34).bytes(t.s),null!=t.t&&Object.hasOwnProperty.call(t,"t")&&l.onnx.TensorProto.encode(t.t,e.uint32(42).fork()).ldelim(),null!=t.g&&Object.hasOwnProperty.call(t,"g")&&l.onnx.GraphProto.encode(t.g,e.uint32(50).fork()).ldelim(),null!=t.floats&&t.floats.length){e.uint32(58).fork();for(var n=0;n<t.floats.length;++n)e.float(t.floats[n]);e.ldelim()}if(null!=t.ints&&t.ints.length){for(e.uint32(66).fork(),n=0;n<t.ints.length;++n)e.int64(t.ints[n]);e.ldelim()}if(null!=t.strings&&t.strings.length)for(n=0;n<t.strings.length;++n)e.uint32(74).bytes(t.strings[n]);if(null!=t.tensors&&t.tensors.length)for(n=0;n<t.tensors.length;++n)l.onnx.TensorProto.encode(t.tensors[n],e.uint32(82).fork()).ldelim();if(null!=t.graphs&&t.graphs.length)for(n=0;n<t.graphs.length;++n)l.onnx.GraphProto.encode(t.graphs[n],e.uint32(90).fork()).ldelim();if(null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(106).string(t.docString),null!=t.tp&&Object.hasOwnProperty.call(t,"tp")&&l.onnx.TypeProto.encode(t.tp,e.uint32(114).fork()).ldelim(),null!=t.typeProtos&&t.typeProtos.length)for(n=0;n<t.typeProtos.length;++n)l.onnx.TypeProto.encode(t.typeProtos[n],e.uint32(122).fork()).ldelim();if(null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(160).int32(t.type),null!=t.refAttrName&&Object.hasOwnProperty.call(t,"refAttrName")&&e.uint32(170).string(t.refAttrName),null!=t.sparseTensor&&Object.hasOwnProperty.call(t,"sparseTensor")&&l.onnx.SparseTensorProto.encode(t.sparseTensor,e.uint32(178).fork()).ldelim(),null!=t.sparseTensors&&t.sparseTensors.length)for(n=0;n<t.sparseTensors.length;++n)l.onnx.SparseTensorProto.encode(t.sparseTensors[n],e.uint32(186).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.AttributeProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 21:r.refAttrName=t.string();break;case 13:r.docString=t.string();break;case 20:r.type=t.int32();break;case 2:r.f=t.float();break;case 3:r.i=t.int64();break;case 4:r.s=t.bytes();break;case 5:r.t=l.onnx.TensorProto.decode(t,t.uint32());break;case 6:r.g=l.onnx.GraphProto.decode(t,t.uint32());break;case 22:r.sparseTensor=l.onnx.SparseTensorProto.decode(t,t.uint32());break;case 14:r.tp=l.onnx.TypeProto.decode(t,t.uint32());break;case 7:if(r.floats&&r.floats.length||(r.floats=[]),2==(7&o))for(var a=t.uint32()+t.pos;t.pos<a;)r.floats.push(t.float());else r.floats.push(t.float());break;case 8:if(r.ints&&r.ints.length||(r.ints=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.ints.push(t.int64());else r.ints.push(t.int64());break;case 9:r.strings&&r.strings.length||(r.strings=[]),r.strings.push(t.bytes());break;case 10:r.tensors&&r.tensors.length||(r.tensors=[]),r.tensors.push(l.onnx.TensorProto.decode(t,t.uint32()));break;case 11:r.graphs&&r.graphs.length||(r.graphs=[]),r.graphs.push(l.onnx.GraphProto.decode(t,t.uint32()));break;case 23:r.sparseTensors&&r.sparseTensors.length||(r.sparseTensors=[]),r.sparseTensors.push(l.onnx.SparseTensorProto.decode(t,t.uint32()));break;case 15:r.typeProtos&&r.typeProtos.length||(r.typeProtos=[]),r.typeProtos.push(l.onnx.TypeProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!u.isString(t.name))return"name: string expected";if(null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&!u.isString(t.refAttrName))return"refAttrName: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!u.isString(t.docString))return"docString: string expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:}if(null!=t.f&&t.hasOwnProperty("f")&&"number"!=typeof t.f)return"f: number expected";if(null!=t.i&&t.hasOwnProperty("i")&&!(u.isInteger(t.i)||t.i&&u.isInteger(t.i.low)&&u.isInteger(t.i.high)))return"i: integer|Long expected";if(null!=t.s&&t.hasOwnProperty("s")&&!(t.s&&"number"==typeof t.s.length||u.isString(t.s)))return"s: buffer expected";if(null!=t.t&&t.hasOwnProperty("t")&&(n=l.onnx.TensorProto.verify(t.t)))return"t."+n;if(null!=t.g&&t.hasOwnProperty("g")&&(n=l.onnx.GraphProto.verify(t.g)))return"g."+n;if(null!=t.sparseTensor&&t.hasOwnProperty("sparseTensor")&&(n=l.onnx.SparseTensorProto.verify(t.sparseTensor)))return"sparseTensor."+n;if(null!=t.tp&&t.hasOwnProperty("tp")&&(n=l.onnx.TypeProto.verify(t.tp)))return"tp."+n;if(null!=t.floats&&t.hasOwnProperty("floats")){if(!Array.isArray(t.floats))return"floats: array expected";for(var e=0;e<t.floats.length;++e)if("number"!=typeof t.floats[e])return"floats: number[] expected"}if(null!=t.ints&&t.hasOwnProperty("ints")){if(!Array.isArray(t.ints))return"ints: array expected";for(e=0;e<t.ints.length;++e)if(!(u.isInteger(t.ints[e])||t.ints[e]&&u.isInteger(t.ints[e].low)&&u.isInteger(t.ints[e].high)))return"ints: integer|Long[] expected"}if(null!=t.strings&&t.hasOwnProperty("strings")){if(!Array.isArray(t.strings))return"strings: array expected";for(e=0;e<t.strings.length;++e)if(!(t.strings[e]&&"number"==typeof t.strings[e].length||u.isString(t.strings[e])))return"strings: buffer[] expected"}if(null!=t.tensors&&t.hasOwnProperty("tensors")){if(!Array.isArray(t.tensors))return"tensors: array expected";for(e=0;e<t.tensors.length;++e)if(n=l.onnx.TensorProto.verify(t.tensors[e]))return"tensors."+n}if(null!=t.graphs&&t.hasOwnProperty("graphs")){if(!Array.isArray(t.graphs))return"graphs: array expected";for(e=0;e<t.graphs.length;++e)if(n=l.onnx.GraphProto.verify(t.graphs[e]))return"graphs."+n}if(null!=t.sparseTensors&&t.hasOwnProperty("sparseTensors")){if(!Array.isArray(t.sparseTensors))return"sparseTensors: array expected";for(e=0;e<t.sparseTensors.length;++e)if(n=l.onnx.SparseTensorProto.verify(t.sparseTensors[e]))return"sparseTensors."+n}if(null!=t.typeProtos&&t.hasOwnProperty("typeProtos")){if(!Array.isArray(t.typeProtos))return"typeProtos: array expected";for(e=0;e<t.typeProtos.length;++e){var n;if(n=l.onnx.TypeProto.verify(t.typeProtos[e]))return"typeProtos."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.AttributeProto)return t;var e=new l.onnx.AttributeProto;switch(null!=t.name&&(e.name=String(t.name)),null!=t.refAttrName&&(e.refAttrName=String(t.refAttrName)),null!=t.docString&&(e.docString=String(t.docString)),t.type){default:if("number"==typeof t.type){e.type=t.type;break}break;case"UNDEFINED":case 0:e.type=0;break;case"FLOAT":case 1:e.type=1;break;case"INT":case 2:e.type=2;break;case"STRING":case 3:e.type=3;break;case"TENSOR":case 4:e.type=4;break;case"GRAPH":case 5:e.type=5;break;case"SPARSE_TENSOR":case 11:e.type=11;break;case"TYPE_PROTO":case 13:e.type=13;break;case"FLOATS":case 6:e.type=6;break;case"INTS":case 7:e.type=7;break;case"STRINGS":case 8:e.type=8;break;case"TENSORS":case 9:e.type=9;break;case"GRAPHS":case 10:e.type=10;break;case"SPARSE_TENSORS":case 12:e.type=12;break;case"TYPE_PROTOS":case 14:e.type=14}if(null!=t.f&&(e.f=Number(t.f)),null!=t.i&&(u.Long?(e.i=u.Long.fromValue(t.i)).unsigned=!1:"string"==typeof t.i?e.i=parseInt(t.i,10):"number"==typeof t.i?e.i=t.i:"object"==typeof t.i&&(e.i=new u.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber())),null!=t.s&&("string"==typeof t.s?u.base64.decode(t.s,e.s=u.newBuffer(u.base64.length(t.s)),0):t.s.length>=0&&(e.s=t.s)),null!=t.t){if("object"!=typeof t.t)throw TypeError(".onnx.AttributeProto.t: object expected");e.t=l.onnx.TensorProto.fromObject(t.t)}if(null!=t.g){if("object"!=typeof t.g)throw TypeError(".onnx.AttributeProto.g: object expected");e.g=l.onnx.GraphProto.fromObject(t.g)}if(null!=t.sparseTensor){if("object"!=typeof t.sparseTensor)throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");e.sparseTensor=l.onnx.SparseTensorProto.fromObject(t.sparseTensor)}if(null!=t.tp){if("object"!=typeof t.tp)throw TypeError(".onnx.AttributeProto.tp: object expected");e.tp=l.onnx.TypeProto.fromObject(t.tp)}if(t.floats){if(!Array.isArray(t.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");e.floats=[];for(var n=0;n<t.floats.length;++n)e.floats[n]=Number(t.floats[n])}if(t.ints){if(!Array.isArray(t.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(e.ints=[],n=0;n<t.ints.length;++n)u.Long?(e.ints[n]=u.Long.fromValue(t.ints[n])).unsigned=!1:"string"==typeof t.ints[n]?e.ints[n]=parseInt(t.ints[n],10):"number"==typeof t.ints[n]?e.ints[n]=t.ints[n]:"object"==typeof t.ints[n]&&(e.ints[n]=new u.LongBits(t.ints[n].low>>>0,t.ints[n].high>>>0).toNumber())}if(t.strings){if(!Array.isArray(t.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(e.strings=[],n=0;n<t.strings.length;++n)"string"==typeof t.strings[n]?u.base64.decode(t.strings[n],e.strings[n]=u.newBuffer(u.base64.length(t.strings[n])),0):t.strings[n].length>=0&&(e.strings[n]=t.strings[n])}if(t.tensors){if(!Array.isArray(t.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(e.tensors=[],n=0;n<t.tensors.length;++n){if("object"!=typeof t.tensors[n])throw TypeError(".onnx.AttributeProto.tensors: object expected");e.tensors[n]=l.onnx.TensorProto.fromObject(t.tensors[n])}}if(t.graphs){if(!Array.isArray(t.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(e.graphs=[],n=0;n<t.graphs.length;++n){if("object"!=typeof t.graphs[n])throw TypeError(".onnx.AttributeProto.graphs: object expected");e.graphs[n]=l.onnx.GraphProto.fromObject(t.graphs[n])}}if(t.sparseTensors){if(!Array.isArray(t.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");for(e.sparseTensors=[],n=0;n<t.sparseTensors.length;++n){if("object"!=typeof t.sparseTensors[n])throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");e.sparseTensors[n]=l.onnx.SparseTensorProto.fromObject(t.sparseTensors[n])}}if(t.typeProtos){if(!Array.isArray(t.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");for(e.typeProtos=[],n=0;n<t.typeProtos.length;++n){if("object"!=typeof t.typeProtos[n])throw TypeError(".onnx.AttributeProto.typeProtos: object expected");e.typeProtos[n]=l.onnx.TypeProto.fromObject(t.typeProtos[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.floats=[],n.ints=[],n.strings=[],n.tensors=[],n.graphs=[],n.typeProtos=[],n.sparseTensors=[]),e.defaults){if(n.name="",n.f=0,u.Long){var r=new u.Long(0,0,!1);n.i=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.i=e.longs===String?"0":0;e.bytes===String?n.s="":(n.s=[],e.bytes!==Array&&(n.s=u.newBuffer(n.s))),n.t=null,n.g=null,n.docString="",n.tp=null,n.type=e.enums===String?"UNDEFINED":0,n.refAttrName="",n.sparseTensor=null}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.f&&t.hasOwnProperty("f")&&(n.f=e.json&&!isFinite(t.f)?String(t.f):t.f),null!=t.i&&t.hasOwnProperty("i")&&("number"==typeof t.i?n.i=e.longs===String?String(t.i):t.i:n.i=e.longs===String?u.Long.prototype.toString.call(t.i):e.longs===Number?new u.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber():t.i),null!=t.s&&t.hasOwnProperty("s")&&(n.s=e.bytes===String?u.base64.encode(t.s,0,t.s.length):e.bytes===Array?Array.prototype.slice.call(t.s):t.s),null!=t.t&&t.hasOwnProperty("t")&&(n.t=l.onnx.TensorProto.toObject(t.t,e)),null!=t.g&&t.hasOwnProperty("g")&&(n.g=l.onnx.GraphProto.toObject(t.g,e)),t.floats&&t.floats.length){n.floats=[];for(var o=0;o<t.floats.length;++o)n.floats[o]=e.json&&!isFinite(t.floats[o])?String(t.floats[o]):t.floats[o]}if(t.ints&&t.ints.length)for(n.ints=[],o=0;o<t.ints.length;++o)"number"==typeof t.ints[o]?n.ints[o]=e.longs===String?String(t.ints[o]):t.ints[o]:n.ints[o]=e.longs===String?u.Long.prototype.toString.call(t.ints[o]):e.longs===Number?new u.LongBits(t.ints[o].low>>>0,t.ints[o].high>>>0).toNumber():t.ints[o];if(t.strings&&t.strings.length)for(n.strings=[],o=0;o<t.strings.length;++o)n.strings[o]=e.bytes===String?u.base64.encode(t.strings[o],0,t.strings[o].length):e.bytes===Array?Array.prototype.slice.call(t.strings[o]):t.strings[o];if(t.tensors&&t.tensors.length)for(n.tensors=[],o=0;o<t.tensors.length;++o)n.tensors[o]=l.onnx.TensorProto.toObject(t.tensors[o],e);if(t.graphs&&t.graphs.length)for(n.graphs=[],o=0;o<t.graphs.length;++o)n.graphs[o]=l.onnx.GraphProto.toObject(t.graphs[o],e);if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.tp&&t.hasOwnProperty("tp")&&(n.tp=l.onnx.TypeProto.toObject(t.tp,e)),t.typeProtos&&t.typeProtos.length)for(n.typeProtos=[],o=0;o<t.typeProtos.length;++o)n.typeProtos[o]=l.onnx.TypeProto.toObject(t.typeProtos[o],e);if(null!=t.type&&t.hasOwnProperty("type")&&(n.type=e.enums===String?void 0===l.onnx.AttributeProto.AttributeType[t.type]?t.type:l.onnx.AttributeProto.AttributeType[t.type]:t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&(n.refAttrName=t.refAttrName),null!=t.sparseTensor&&t.hasOwnProperty("sparseTensor")&&(n.sparseTensor=l.onnx.SparseTensorProto.toObject(t.sparseTensor,e)),t.sparseTensors&&t.sparseTensors.length)for(n.sparseTensors=[],o=0;o<t.sparseTensors.length;++o)n.sparseTensors[o]=l.onnx.SparseTensorProto.toObject(t.sparseTensors[o],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.AttributeProto"},t.AttributeType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="INT"]=2,e[t[3]="STRING"]=3,e[t[4]="TENSOR"]=4,e[t[5]="GRAPH"]=5,e[t[11]="SPARSE_TENSOR"]=11,e[t[13]="TYPE_PROTO"]=13,e[t[6]="FLOATS"]=6,e[t[7]="INTS"]=7,e[t[8]="STRINGS"]=8,e[t[9]="TENSORS"]=9,e[t[10]="GRAPHS"]=10,e[t[12]="SPARSE_TENSORS"]=12,e[t[14]="TYPE_PROTOS"]=14,e}(),t}(),a.ValueInfoProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.type=null,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(10).string(t.name),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&l.onnx.TypeProto.encode(t.type,e.uint32(18).fork()).ldelim(),null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(26).string(t.docString),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.ValueInfoProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 2:r.type=l.onnx.TypeProto.decode(t,t.uint32());break;case 3:r.docString=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!u.isString(t.name))return"name: string expected";if(null!=t.type&&t.hasOwnProperty("type")){var e=l.onnx.TypeProto.verify(t.type);if(e)return"type."+e}return null!=t.docString&&t.hasOwnProperty("docString")&&!u.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.ValueInfoProto)return t;var e=new l.onnx.ValueInfoProto;if(null!=t.name&&(e.name=String(t.name)),null!=t.type){if("object"!=typeof t.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");e.type=l.onnx.TypeProto.fromObject(t.type)}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.name="",n.type=null,n.docString=""),null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.type&&t.hasOwnProperty("type")&&(n.type=l.onnx.TypeProto.toObject(t.type,e)),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.ValueInfoProto"},t}(),a.NodeProto=function(){function t(t){if(this.input=[],this.output=[],this.attribute=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.input=u.emptyArray,t.prototype.output=u.emptyArray,t.prototype.name="",t.prototype.opType="",t.prototype.domain="",t.prototype.attribute=u.emptyArray,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.input&&t.input.length)for(var n=0;n<t.input.length;++n)e.uint32(10).string(t.input[n]);if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)e.uint32(18).string(t.output[n]);if(null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(26).string(t.name),null!=t.opType&&Object.hasOwnProperty.call(t,"opType")&&e.uint32(34).string(t.opType),null!=t.attribute&&t.attribute.length)for(n=0;n<t.attribute.length;++n)l.onnx.AttributeProto.encode(t.attribute[n],e.uint32(42).fork()).ldelim();return null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(50).string(t.docString),null!=t.domain&&Object.hasOwnProperty.call(t,"domain")&&e.uint32(58).string(t.domain),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.NodeProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.input&&r.input.length||(r.input=[]),r.input.push(t.string());break;case 2:r.output&&r.output.length||(r.output=[]),r.output.push(t.string());break;case 3:r.name=t.string();break;case 4:r.opType=t.string();break;case 7:r.domain=t.string();break;case 5:r.attribute&&r.attribute.length||(r.attribute=[]),r.attribute.push(l.onnx.AttributeProto.decode(t,t.uint32()));break;case 6:r.docString=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(var e=0;e<t.input.length;++e)if(!u.isString(t.input[e]))return"input: string[] expected"}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(!u.isString(t.output[e]))return"output: string[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!u.isString(t.name))return"name: string expected";if(null!=t.opType&&t.hasOwnProperty("opType")&&!u.isString(t.opType))return"opType: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!u.isString(t.domain))return"domain: string expected";if(null!=t.attribute&&t.hasOwnProperty("attribute")){if(!Array.isArray(t.attribute))return"attribute: array expected";for(e=0;e<t.attribute.length;++e){var n=l.onnx.AttributeProto.verify(t.attribute[e]);if(n)return"attribute."+n}}return null!=t.docString&&t.hasOwnProperty("docString")&&!u.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.NodeProto)return t;var e=new l.onnx.NodeProto;if(t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.NodeProto.input: array expected");e.input=[];for(var n=0;n<t.input.length;++n)e.input[n]=String(t.input[n])}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.NodeProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n)e.output[n]=String(t.output[n])}if(null!=t.name&&(e.name=String(t.name)),null!=t.opType&&(e.opType=String(t.opType)),null!=t.domain&&(e.domain=String(t.domain)),t.attribute){if(!Array.isArray(t.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(e.attribute=[],n=0;n<t.attribute.length;++n){if("object"!=typeof t.attribute[n])throw TypeError(".onnx.NodeProto.attribute: object expected");e.attribute[n]=l.onnx.AttributeProto.fromObject(t.attribute[n])}}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.input=[],n.output=[],n.attribute=[]),e.defaults&&(n.name="",n.opType="",n.docString="",n.domain=""),t.input&&t.input.length){n.input=[];for(var r=0;r<t.input.length;++r)n.input[r]=t.input[r]}if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=t.output[r];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.opType&&t.hasOwnProperty("opType")&&(n.opType=t.opType),t.attribute&&t.attribute.length)for(n.attribute=[],r=0;r<t.attribute.length;++r)n.attribute[r]=l.onnx.AttributeProto.toObject(t.attribute[r],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.NodeProto"},t}(),a.TrainingInfoProto=function(){function t(t){if(this.initializationBinding=[],this.updateBinding=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.initialization=null,t.prototype.algorithm=null,t.prototype.initializationBinding=u.emptyArray,t.prototype.updateBinding=u.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.initialization&&Object.hasOwnProperty.call(t,"initialization")&&l.onnx.GraphProto.encode(t.initialization,e.uint32(10).fork()).ldelim(),null!=t.algorithm&&Object.hasOwnProperty.call(t,"algorithm")&&l.onnx.GraphProto.encode(t.algorithm,e.uint32(18).fork()).ldelim(),null!=t.initializationBinding&&t.initializationBinding.length)for(var n=0;n<t.initializationBinding.length;++n)l.onnx.StringStringEntryProto.encode(t.initializationBinding[n],e.uint32(26).fork()).ldelim();if(null!=t.updateBinding&&t.updateBinding.length)for(n=0;n<t.updateBinding.length;++n)l.onnx.StringStringEntryProto.encode(t.updateBinding[n],e.uint32(34).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TrainingInfoProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.initialization=l.onnx.GraphProto.decode(t,t.uint32());break;case 2:r.algorithm=l.onnx.GraphProto.decode(t,t.uint32());break;case 3:r.initializationBinding&&r.initializationBinding.length||(r.initializationBinding=[]),r.initializationBinding.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;case 4:r.updateBinding&&r.updateBinding.length||(r.updateBinding=[]),r.updateBinding.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.initialization&&t.hasOwnProperty("initialization")&&(n=l.onnx.GraphProto.verify(t.initialization)))return"initialization."+n;if(null!=t.algorithm&&t.hasOwnProperty("algorithm")&&(n=l.onnx.GraphProto.verify(t.algorithm)))return"algorithm."+n;if(null!=t.initializationBinding&&t.hasOwnProperty("initializationBinding")){if(!Array.isArray(t.initializationBinding))return"initializationBinding: array expected";for(var e=0;e<t.initializationBinding.length;++e)if(n=l.onnx.StringStringEntryProto.verify(t.initializationBinding[e]))return"initializationBinding."+n}if(null!=t.updateBinding&&t.hasOwnProperty("updateBinding")){if(!Array.isArray(t.updateBinding))return"updateBinding: array expected";for(e=0;e<t.updateBinding.length;++e){var n;if(n=l.onnx.StringStringEntryProto.verify(t.updateBinding[e]))return"updateBinding."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.TrainingInfoProto)return t;var e=new l.onnx.TrainingInfoProto;if(null!=t.initialization){if("object"!=typeof t.initialization)throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");e.initialization=l.onnx.GraphProto.fromObject(t.initialization)}if(null!=t.algorithm){if("object"!=typeof t.algorithm)throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");e.algorithm=l.onnx.GraphProto.fromObject(t.algorithm)}if(t.initializationBinding){if(!Array.isArray(t.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");e.initializationBinding=[];for(var n=0;n<t.initializationBinding.length;++n){if("object"!=typeof t.initializationBinding[n])throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");e.initializationBinding[n]=l.onnx.StringStringEntryProto.fromObject(t.initializationBinding[n])}}if(t.updateBinding){if(!Array.isArray(t.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");for(e.updateBinding=[],n=0;n<t.updateBinding.length;++n){if("object"!=typeof t.updateBinding[n])throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");e.updateBinding[n]=l.onnx.StringStringEntryProto.fromObject(t.updateBinding[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.initializationBinding=[],n.updateBinding=[]),e.defaults&&(n.initialization=null,n.algorithm=null),null!=t.initialization&&t.hasOwnProperty("initialization")&&(n.initialization=l.onnx.GraphProto.toObject(t.initialization,e)),null!=t.algorithm&&t.hasOwnProperty("algorithm")&&(n.algorithm=l.onnx.GraphProto.toObject(t.algorithm,e)),t.initializationBinding&&t.initializationBinding.length){n.initializationBinding=[];for(var r=0;r<t.initializationBinding.length;++r)n.initializationBinding[r]=l.onnx.StringStringEntryProto.toObject(t.initializationBinding[r],e)}if(t.updateBinding&&t.updateBinding.length)for(n.updateBinding=[],r=0;r<t.updateBinding.length;++r)n.updateBinding[r]=l.onnx.StringStringEntryProto.toObject(t.updateBinding[r],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TrainingInfoProto"},t}(),a.ModelProto=function(){function t(t){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.irVersion=u.Long?u.Long.fromBits(0,0,!1):0,t.prototype.opsetImport=u.emptyArray,t.prototype.producerName="",t.prototype.producerVersion="",t.prototype.domain="",t.prototype.modelVersion=u.Long?u.Long.fromBits(0,0,!1):0,t.prototype.docString="",t.prototype.graph=null,t.prototype.metadataProps=u.emptyArray,t.prototype.trainingInfo=u.emptyArray,t.prototype.functions=u.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.irVersion&&Object.hasOwnProperty.call(t,"irVersion")&&e.uint32(8).int64(t.irVersion),null!=t.producerName&&Object.hasOwnProperty.call(t,"producerName")&&e.uint32(18).string(t.producerName),null!=t.producerVersion&&Object.hasOwnProperty.call(t,"producerVersion")&&e.uint32(26).string(t.producerVersion),null!=t.domain&&Object.hasOwnProperty.call(t,"domain")&&e.uint32(34).string(t.domain),null!=t.modelVersion&&Object.hasOwnProperty.call(t,"modelVersion")&&e.uint32(40).int64(t.modelVersion),null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(50).string(t.docString),null!=t.graph&&Object.hasOwnProperty.call(t,"graph")&&l.onnx.GraphProto.encode(t.graph,e.uint32(58).fork()).ldelim(),null!=t.opsetImport&&t.opsetImport.length)for(var n=0;n<t.opsetImport.length;++n)l.onnx.OperatorSetIdProto.encode(t.opsetImport[n],e.uint32(66).fork()).ldelim();if(null!=t.metadataProps&&t.metadataProps.length)for(n=0;n<t.metadataProps.length;++n)l.onnx.StringStringEntryProto.encode(t.metadataProps[n],e.uint32(114).fork()).ldelim();if(null!=t.trainingInfo&&t.trainingInfo.length)for(n=0;n<t.trainingInfo.length;++n)l.onnx.TrainingInfoProto.encode(t.trainingInfo[n],e.uint32(162).fork()).ldelim();if(null!=t.functions&&t.functions.length)for(n=0;n<t.functions.length;++n)l.onnx.FunctionProto.encode(t.functions[n],e.uint32(202).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.ModelProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.irVersion=t.int64();break;case 8:r.opsetImport&&r.opsetImport.length||(r.opsetImport=[]),r.opsetImport.push(l.onnx.OperatorSetIdProto.decode(t,t.uint32()));break;case 2:r.producerName=t.string();break;case 3:r.producerVersion=t.string();break;case 4:r.domain=t.string();break;case 5:r.modelVersion=t.int64();break;case 6:r.docString=t.string();break;case 7:r.graph=l.onnx.GraphProto.decode(t,t.uint32());break;case 14:r.metadataProps&&r.metadataProps.length||(r.metadataProps=[]),r.metadataProps.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;case 20:r.trainingInfo&&r.trainingInfo.length||(r.trainingInfo=[]),r.trainingInfo.push(l.onnx.TrainingInfoProto.decode(t,t.uint32()));break;case 25:r.functions&&r.functions.length||(r.functions=[]),r.functions.push(l.onnx.FunctionProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&!(u.isInteger(t.irVersion)||t.irVersion&&u.isInteger(t.irVersion.low)&&u.isInteger(t.irVersion.high)))return"irVersion: integer|Long expected";if(null!=t.opsetImport&&t.hasOwnProperty("opsetImport")){if(!Array.isArray(t.opsetImport))return"opsetImport: array expected";for(var e=0;e<t.opsetImport.length;++e)if(n=l.onnx.OperatorSetIdProto.verify(t.opsetImport[e]))return"opsetImport."+n}if(null!=t.producerName&&t.hasOwnProperty("producerName")&&!u.isString(t.producerName))return"producerName: string expected";if(null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&!u.isString(t.producerVersion))return"producerVersion: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!u.isString(t.domain))return"domain: string expected";if(null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&!(u.isInteger(t.modelVersion)||t.modelVersion&&u.isInteger(t.modelVersion.low)&&u.isInteger(t.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!u.isString(t.docString))return"docString: string expected";if(null!=t.graph&&t.hasOwnProperty("graph")&&(n=l.onnx.GraphProto.verify(t.graph)))return"graph."+n;if(null!=t.metadataProps&&t.hasOwnProperty("metadataProps")){if(!Array.isArray(t.metadataProps))return"metadataProps: array expected";for(e=0;e<t.metadataProps.length;++e)if(n=l.onnx.StringStringEntryProto.verify(t.metadataProps[e]))return"metadataProps."+n}if(null!=t.trainingInfo&&t.hasOwnProperty("trainingInfo")){if(!Array.isArray(t.trainingInfo))return"trainingInfo: array expected";for(e=0;e<t.trainingInfo.length;++e)if(n=l.onnx.TrainingInfoProto.verify(t.trainingInfo[e]))return"trainingInfo."+n}if(null!=t.functions&&t.hasOwnProperty("functions")){if(!Array.isArray(t.functions))return"functions: array expected";for(e=0;e<t.functions.length;++e){var n;if(n=l.onnx.FunctionProto.verify(t.functions[e]))return"functions."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.ModelProto)return t;var e=new l.onnx.ModelProto;if(null!=t.irVersion&&(u.Long?(e.irVersion=u.Long.fromValue(t.irVersion)).unsigned=!1:"string"==typeof t.irVersion?e.irVersion=parseInt(t.irVersion,10):"number"==typeof t.irVersion?e.irVersion=t.irVersion:"object"==typeof t.irVersion&&(e.irVersion=new u.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber())),t.opsetImport){if(!Array.isArray(t.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");e.opsetImport=[];for(var n=0;n<t.opsetImport.length;++n){if("object"!=typeof t.opsetImport[n])throw TypeError(".onnx.ModelProto.opsetImport: object expected");e.opsetImport[n]=l.onnx.OperatorSetIdProto.fromObject(t.opsetImport[n])}}if(null!=t.producerName&&(e.producerName=String(t.producerName)),null!=t.producerVersion&&(e.producerVersion=String(t.producerVersion)),null!=t.domain&&(e.domain=String(t.domain)),null!=t.modelVersion&&(u.Long?(e.modelVersion=u.Long.fromValue(t.modelVersion)).unsigned=!1:"string"==typeof t.modelVersion?e.modelVersion=parseInt(t.modelVersion,10):"number"==typeof t.modelVersion?e.modelVersion=t.modelVersion:"object"==typeof t.modelVersion&&(e.modelVersion=new u.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber())),null!=t.docString&&(e.docString=String(t.docString)),null!=t.graph){if("object"!=typeof t.graph)throw TypeError(".onnx.ModelProto.graph: object expected");e.graph=l.onnx.GraphProto.fromObject(t.graph)}if(t.metadataProps){if(!Array.isArray(t.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(e.metadataProps=[],n=0;n<t.metadataProps.length;++n){if("object"!=typeof t.metadataProps[n])throw TypeError(".onnx.ModelProto.metadataProps: object expected");e.metadataProps[n]=l.onnx.StringStringEntryProto.fromObject(t.metadataProps[n])}}if(t.trainingInfo){if(!Array.isArray(t.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");for(e.trainingInfo=[],n=0;n<t.trainingInfo.length;++n){if("object"!=typeof t.trainingInfo[n])throw TypeError(".onnx.ModelProto.trainingInfo: object expected");e.trainingInfo[n]=l.onnx.TrainingInfoProto.fromObject(t.trainingInfo[n])}}if(t.functions){if(!Array.isArray(t.functions))throw TypeError(".onnx.ModelProto.functions: array expected");for(e.functions=[],n=0;n<t.functions.length;++n){if("object"!=typeof t.functions[n])throw TypeError(".onnx.ModelProto.functions: object expected");e.functions[n]=l.onnx.FunctionProto.fromObject(t.functions[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.opsetImport=[],n.metadataProps=[],n.trainingInfo=[],n.functions=[]),e.defaults){if(u.Long){var r=new u.Long(0,0,!1);n.irVersion=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.irVersion=e.longs===String?"0":0;n.producerName="",n.producerVersion="",n.domain="",u.Long?(r=new u.Long(0,0,!1),n.modelVersion=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.modelVersion=e.longs===String?"0":0,n.docString="",n.graph=null}if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&("number"==typeof t.irVersion?n.irVersion=e.longs===String?String(t.irVersion):t.irVersion:n.irVersion=e.longs===String?u.Long.prototype.toString.call(t.irVersion):e.longs===Number?new u.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber():t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&(n.producerName=t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&(n.producerVersion=t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&("number"==typeof t.modelVersion?n.modelVersion=e.longs===String?String(t.modelVersion):t.modelVersion:n.modelVersion=e.longs===String?u.Long.prototype.toString.call(t.modelVersion):e.longs===Number?new u.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber():t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&(n.graph=l.onnx.GraphProto.toObject(t.graph,e)),t.opsetImport&&t.opsetImport.length){n.opsetImport=[];for(var o=0;o<t.opsetImport.length;++o)n.opsetImport[o]=l.onnx.OperatorSetIdProto.toObject(t.opsetImport[o],e)}if(t.metadataProps&&t.metadataProps.length)for(n.metadataProps=[],o=0;o<t.metadataProps.length;++o)n.metadataProps[o]=l.onnx.StringStringEntryProto.toObject(t.metadataProps[o],e);if(t.trainingInfo&&t.trainingInfo.length)for(n.trainingInfo=[],o=0;o<t.trainingInfo.length;++o)n.trainingInfo[o]=l.onnx.TrainingInfoProto.toObject(t.trainingInfo[o],e);if(t.functions&&t.functions.length)for(n.functions=[],o=0;o<t.functions.length;++o)n.functions[o]=l.onnx.FunctionProto.toObject(t.functions[o],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.ModelProto"},t}(),a.StringStringEntryProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.key="",t.prototype.value="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(10).string(t.key),null!=t.value&&Object.hasOwnProperty.call(t,"value")&&e.uint32(18).string(t.value),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.StringStringEntryProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.key=t.string();break;case 2:r.value=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.key&&t.hasOwnProperty("key")&&!u.isString(t.key)?"key: string expected":null!=t.value&&t.hasOwnProperty("value")&&!u.isString(t.value)?"value: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.StringStringEntryProto)return t;var e=new l.onnx.StringStringEntryProto;return null!=t.key&&(e.key=String(t.key)),null!=t.value&&(e.value=String(t.value)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.key="",n.value=""),null!=t.key&&t.hasOwnProperty("key")&&(n.key=t.key),null!=t.value&&t.hasOwnProperty("value")&&(n.value=t.value),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.StringStringEntryProto"},t}(),a.TensorAnnotation=function(){function t(t){if(this.quantParameterTensorNames=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tensorName="",t.prototype.quantParameterTensorNames=u.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.tensorName&&Object.hasOwnProperty.call(t,"tensorName")&&e.uint32(10).string(t.tensorName),null!=t.quantParameterTensorNames&&t.quantParameterTensorNames.length)for(var n=0;n<t.quantParameterTensorNames.length;++n)l.onnx.StringStringEntryProto.encode(t.quantParameterTensorNames[n],e.uint32(18).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorAnnotation;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.tensorName=t.string();break;case 2:r.quantParameterTensorNames&&r.quantParameterTensorNames.length||(r.quantParameterTensorNames=[]),r.quantParameterTensorNames.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorName&&t.hasOwnProperty("tensorName")&&!u.isString(t.tensorName))return"tensorName: string expected";if(null!=t.quantParameterTensorNames&&t.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(t.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var e=0;e<t.quantParameterTensorNames.length;++e){var n=l.onnx.StringStringEntryProto.verify(t.quantParameterTensorNames[e]);if(n)return"quantParameterTensorNames."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorAnnotation)return t;var e=new l.onnx.TensorAnnotation;if(null!=t.tensorName&&(e.tensorName=String(t.tensorName)),t.quantParameterTensorNames){if(!Array.isArray(t.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");e.quantParameterTensorNames=[];for(var n=0;n<t.quantParameterTensorNames.length;++n){if("object"!=typeof t.quantParameterTensorNames[n])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");e.quantParameterTensorNames[n]=l.onnx.StringStringEntryProto.fromObject(t.quantParameterTensorNames[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.quantParameterTensorNames=[]),e.defaults&&(n.tensorName=""),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&(n.tensorName=t.tensorName),t.quantParameterTensorNames&&t.quantParameterTensorNames.length){n.quantParameterTensorNames=[];for(var r=0;r<t.quantParameterTensorNames.length;++r)n.quantParameterTensorNames[r]=l.onnx.StringStringEntryProto.toObject(t.quantParameterTensorNames[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TensorAnnotation"},t}(),a.GraphProto=function(){function t(t){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.node=u.emptyArray,t.prototype.name="",t.prototype.initializer=u.emptyArray,t.prototype.sparseInitializer=u.emptyArray,t.prototype.docString="",t.prototype.input=u.emptyArray,t.prototype.output=u.emptyArray,t.prototype.valueInfo=u.emptyArray,t.prototype.quantizationAnnotation=u.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.node&&t.node.length)for(var n=0;n<t.node.length;++n)l.onnx.NodeProto.encode(t.node[n],e.uint32(10).fork()).ldelim();if(null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(18).string(t.name),null!=t.initializer&&t.initializer.length)for(n=0;n<t.initializer.length;++n)l.onnx.TensorProto.encode(t.initializer[n],e.uint32(42).fork()).ldelim();if(null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(82).string(t.docString),null!=t.input&&t.input.length)for(n=0;n<t.input.length;++n)l.onnx.ValueInfoProto.encode(t.input[n],e.uint32(90).fork()).ldelim();if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)l.onnx.ValueInfoProto.encode(t.output[n],e.uint32(98).fork()).ldelim();if(null!=t.valueInfo&&t.valueInfo.length)for(n=0;n<t.valueInfo.length;++n)l.onnx.ValueInfoProto.encode(t.valueInfo[n],e.uint32(106).fork()).ldelim();if(null!=t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n=0;n<t.quantizationAnnotation.length;++n)l.onnx.TensorAnnotation.encode(t.quantizationAnnotation[n],e.uint32(114).fork()).ldelim();if(null!=t.sparseInitializer&&t.sparseInitializer.length)for(n=0;n<t.sparseInitializer.length;++n)l.onnx.SparseTensorProto.encode(t.sparseInitializer[n],e.uint32(122).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.GraphProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push(l.onnx.NodeProto.decode(t,t.uint32()));break;case 2:r.name=t.string();break;case 5:r.initializer&&r.initializer.length||(r.initializer=[]),r.initializer.push(l.onnx.TensorProto.decode(t,t.uint32()));break;case 15:r.sparseInitializer&&r.sparseInitializer.length||(r.sparseInitializer=[]),r.sparseInitializer.push(l.onnx.SparseTensorProto.decode(t,t.uint32()));break;case 10:r.docString=t.string();break;case 11:r.input&&r.input.length||(r.input=[]),r.input.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 12:r.output&&r.output.length||(r.output=[]),r.output.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 13:r.valueInfo&&r.valueInfo.length||(r.valueInfo=[]),r.valueInfo.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 14:r.quantizationAnnotation&&r.quantizationAnnotation.length||(r.quantizationAnnotation=[]),r.quantizationAnnotation.push(l.onnx.TensorAnnotation.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.node&&t.hasOwnProperty("node")){if(!Array.isArray(t.node))return"node: array expected";for(var e=0;e<t.node.length;++e)if(n=l.onnx.NodeProto.verify(t.node[e]))return"node."+n}if(null!=t.name&&t.hasOwnProperty("name")&&!u.isString(t.name))return"name: string expected";if(null!=t.initializer&&t.hasOwnProperty("initializer")){if(!Array.isArray(t.initializer))return"initializer: array expected";for(e=0;e<t.initializer.length;++e)if(n=l.onnx.TensorProto.verify(t.initializer[e]))return"initializer."+n}if(null!=t.sparseInitializer&&t.hasOwnProperty("sparseInitializer")){if(!Array.isArray(t.sparseInitializer))return"sparseInitializer: array expected";for(e=0;e<t.sparseInitializer.length;++e)if(n=l.onnx.SparseTensorProto.verify(t.sparseInitializer[e]))return"sparseInitializer."+n}if(null!=t.docString&&t.hasOwnProperty("docString")&&!u.isString(t.docString))return"docString: string expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(e=0;e<t.input.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.input[e]))return"input."+n}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.output[e]))return"output."+n}if(null!=t.valueInfo&&t.hasOwnProperty("valueInfo")){if(!Array.isArray(t.valueInfo))return"valueInfo: array expected";for(e=0;e<t.valueInfo.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.valueInfo[e]))return"valueInfo."+n}if(null!=t.quantizationAnnotation&&t.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(t.quantizationAnnotation))return"quantizationAnnotation: array expected";for(e=0;e<t.quantizationAnnotation.length;++e){var n;if(n=l.onnx.TensorAnnotation.verify(t.quantizationAnnotation[e]))return"quantizationAnnotation."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.GraphProto)return t;var e=new l.onnx.GraphProto;if(t.node){if(!Array.isArray(t.node))throw TypeError(".onnx.GraphProto.node: array expected");e.node=[];for(var n=0;n<t.node.length;++n){if("object"!=typeof t.node[n])throw TypeError(".onnx.GraphProto.node: object expected");e.node[n]=l.onnx.NodeProto.fromObject(t.node[n])}}if(null!=t.name&&(e.name=String(t.name)),t.initializer){if(!Array.isArray(t.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(e.initializer=[],n=0;n<t.initializer.length;++n){if("object"!=typeof t.initializer[n])throw TypeError(".onnx.GraphProto.initializer: object expected");e.initializer[n]=l.onnx.TensorProto.fromObject(t.initializer[n])}}if(t.sparseInitializer){if(!Array.isArray(t.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");for(e.sparseInitializer=[],n=0;n<t.sparseInitializer.length;++n){if("object"!=typeof t.sparseInitializer[n])throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");e.sparseInitializer[n]=l.onnx.SparseTensorProto.fromObject(t.sparseInitializer[n])}}if(null!=t.docString&&(e.docString=String(t.docString)),t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.GraphProto.input: array expected");for(e.input=[],n=0;n<t.input.length;++n){if("object"!=typeof t.input[n])throw TypeError(".onnx.GraphProto.input: object expected");e.input[n]=l.onnx.ValueInfoProto.fromObject(t.input[n])}}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.GraphProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n){if("object"!=typeof t.output[n])throw TypeError(".onnx.GraphProto.output: object expected");e.output[n]=l.onnx.ValueInfoProto.fromObject(t.output[n])}}if(t.valueInfo){if(!Array.isArray(t.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(e.valueInfo=[],n=0;n<t.valueInfo.length;++n){if("object"!=typeof t.valueInfo[n])throw TypeError(".onnx.GraphProto.valueInfo: object expected");e.valueInfo[n]=l.onnx.ValueInfoProto.fromObject(t.valueInfo[n])}}if(t.quantizationAnnotation){if(!Array.isArray(t.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(e.quantizationAnnotation=[],n=0;n<t.quantizationAnnotation.length;++n){if("object"!=typeof t.quantizationAnnotation[n])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");e.quantizationAnnotation[n]=l.onnx.TensorAnnotation.fromObject(t.quantizationAnnotation[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.node=[],n.initializer=[],n.input=[],n.output=[],n.valueInfo=[],n.quantizationAnnotation=[],n.sparseInitializer=[]),e.defaults&&(n.name="",n.docString=""),t.node&&t.node.length){n.node=[];for(var r=0;r<t.node.length;++r)n.node[r]=l.onnx.NodeProto.toObject(t.node[r],e)}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),t.initializer&&t.initializer.length)for(n.initializer=[],r=0;r<t.initializer.length;++r)n.initializer[r]=l.onnx.TensorProto.toObject(t.initializer[r],e);if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.input&&t.input.length)for(n.input=[],r=0;r<t.input.length;++r)n.input[r]=l.onnx.ValueInfoProto.toObject(t.input[r],e);if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=l.onnx.ValueInfoProto.toObject(t.output[r],e);if(t.valueInfo&&t.valueInfo.length)for(n.valueInfo=[],r=0;r<t.valueInfo.length;++r)n.valueInfo[r]=l.onnx.ValueInfoProto.toObject(t.valueInfo[r],e);if(t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n.quantizationAnnotation=[],r=0;r<t.quantizationAnnotation.length;++r)n.quantizationAnnotation[r]=l.onnx.TensorAnnotation.toObject(t.quantizationAnnotation[r],e);if(t.sparseInitializer&&t.sparseInitializer.length)for(n.sparseInitializer=[],r=0;r<t.sparseInitializer.length;++r)n.sparseInitializer[r]=l.onnx.SparseTensorProto.toObject(t.sparseInitializer[r],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.GraphProto"},t}(),a.TensorProto=function(){function t(t){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dims=u.emptyArray,t.prototype.dataType=0,t.prototype.segment=null,t.prototype.floatData=u.emptyArray,t.prototype.int32Data=u.emptyArray,t.prototype.stringData=u.emptyArray,t.prototype.int64Data=u.emptyArray,t.prototype.name="",t.prototype.docString="",t.prototype.rawData=u.newBuffer([]),t.prototype.externalData=u.emptyArray,t.prototype.dataLocation=0,t.prototype.doubleData=u.emptyArray,t.prototype.uint64Data=u.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.dims&&t.dims.length){e.uint32(10).fork();for(var n=0;n<t.dims.length;++n)e.int64(t.dims[n]);e.ldelim()}if(null!=t.dataType&&Object.hasOwnProperty.call(t,"dataType")&&e.uint32(16).int32(t.dataType),null!=t.segment&&Object.hasOwnProperty.call(t,"segment")&&l.onnx.TensorProto.Segment.encode(t.segment,e.uint32(26).fork()).ldelim(),null!=t.floatData&&t.floatData.length){for(e.uint32(34).fork(),n=0;n<t.floatData.length;++n)e.float(t.floatData[n]);e.ldelim()}if(null!=t.int32Data&&t.int32Data.length){for(e.uint32(42).fork(),n=0;n<t.int32Data.length;++n)e.int32(t.int32Data[n]);e.ldelim()}if(null!=t.stringData&&t.stringData.length)for(n=0;n<t.stringData.length;++n)e.uint32(50).bytes(t.stringData[n]);if(null!=t.int64Data&&t.int64Data.length){for(e.uint32(58).fork(),n=0;n<t.int64Data.length;++n)e.int64(t.int64Data[n]);e.ldelim()}if(null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(66).string(t.name),null!=t.rawData&&Object.hasOwnProperty.call(t,"rawData")&&e.uint32(74).bytes(t.rawData),null!=t.doubleData&&t.doubleData.length){for(e.uint32(82).fork(),n=0;n<t.doubleData.length;++n)e.double(t.doubleData[n]);e.ldelim()}if(null!=t.uint64Data&&t.uint64Data.length){for(e.uint32(90).fork(),n=0;n<t.uint64Data.length;++n)e.uint64(t.uint64Data[n]);e.ldelim()}if(null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(98).string(t.docString),null!=t.externalData&&t.externalData.length)for(n=0;n<t.externalData.length;++n)l.onnx.StringStringEntryProto.encode(t.externalData[n],e.uint32(106).fork()).ldelim();return null!=t.dataLocation&&Object.hasOwnProperty.call(t,"dataLocation")&&e.uint32(112).int32(t.dataLocation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:if(r.dims&&r.dims.length||(r.dims=[]),2==(7&o))for(var a=t.uint32()+t.pos;t.pos<a;)r.dims.push(t.int64());else r.dims.push(t.int64());break;case 2:r.dataType=t.int32();break;case 3:r.segment=l.onnx.TensorProto.Segment.decode(t,t.uint32());break;case 4:if(r.floatData&&r.floatData.length||(r.floatData=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.floatData.push(t.float());else r.floatData.push(t.float());break;case 5:if(r.int32Data&&r.int32Data.length||(r.int32Data=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.int32Data.push(t.int32());else r.int32Data.push(t.int32());break;case 6:r.stringData&&r.stringData.length||(r.stringData=[]),r.stringData.push(t.bytes());break;case 7:if(r.int64Data&&r.int64Data.length||(r.int64Data=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.int64Data.push(t.int64());else r.int64Data.push(t.int64());break;case 8:r.name=t.string();break;case 12:r.docString=t.string();break;case 9:r.rawData=t.bytes();break;case 13:r.externalData&&r.externalData.length||(r.externalData=[]),r.externalData.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;case 14:r.dataLocation=t.int32();break;case 10:if(r.doubleData&&r.doubleData.length||(r.doubleData=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.doubleData.push(t.double());else r.doubleData.push(t.double());break;case 11:if(r.uint64Data&&r.uint64Data.length||(r.uint64Data=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.uint64Data.push(t.uint64());else r.uint64Data.push(t.uint64());break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dims&&t.hasOwnProperty("dims")){if(!Array.isArray(t.dims))return"dims: array expected";for(var e=0;e<t.dims.length;++e)if(!(u.isInteger(t.dims[e])||t.dims[e]&&u.isInteger(t.dims[e].low)&&u.isInteger(t.dims[e].high)))return"dims: integer|Long[] expected"}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&!u.isInteger(t.dataType))return"dataType: integer expected";if(null!=t.segment&&t.hasOwnProperty("segment")&&(n=l.onnx.TensorProto.Segment.verify(t.segment)))return"segment."+n;if(null!=t.floatData&&t.hasOwnProperty("floatData")){if(!Array.isArray(t.floatData))return"floatData: array expected";for(e=0;e<t.floatData.length;++e)if("number"!=typeof t.floatData[e])return"floatData: number[] expected"}if(null!=t.int32Data&&t.hasOwnProperty("int32Data")){if(!Array.isArray(t.int32Data))return"int32Data: array expected";for(e=0;e<t.int32Data.length;++e)if(!u.isInteger(t.int32Data[e]))return"int32Data: integer[] expected"}if(null!=t.stringData&&t.hasOwnProperty("stringData")){if(!Array.isArray(t.stringData))return"stringData: array expected";for(e=0;e<t.stringData.length;++e)if(!(t.stringData[e]&&"number"==typeof t.stringData[e].length||u.isString(t.stringData[e])))return"stringData: buffer[] expected"}if(null!=t.int64Data&&t.hasOwnProperty("int64Data")){if(!Array.isArray(t.int64Data))return"int64Data: array expected";for(e=0;e<t.int64Data.length;++e)if(!(u.isInteger(t.int64Data[e])||t.int64Data[e]&&u.isInteger(t.int64Data[e].low)&&u.isInteger(t.int64Data[e].high)))return"int64Data: integer|Long[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!u.isString(t.name))return"name: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!u.isString(t.docString))return"docString: string expected";if(null!=t.rawData&&t.hasOwnProperty("rawData")&&!(t.rawData&&"number"==typeof t.rawData.length||u.isString(t.rawData)))return"rawData: buffer expected";if(null!=t.externalData&&t.hasOwnProperty("externalData")){if(!Array.isArray(t.externalData))return"externalData: array expected";for(e=0;e<t.externalData.length;++e){var n;if(n=l.onnx.StringStringEntryProto.verify(t.externalData[e]))return"externalData."+n}}if(null!=t.dataLocation&&t.hasOwnProperty("dataLocation"))switch(t.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=t.doubleData&&t.hasOwnProperty("doubleData")){if(!Array.isArray(t.doubleData))return"doubleData: array expected";for(e=0;e<t.doubleData.length;++e)if("number"!=typeof t.doubleData[e])return"doubleData: number[] expected"}if(null!=t.uint64Data&&t.hasOwnProperty("uint64Data")){if(!Array.isArray(t.uint64Data))return"uint64Data: array expected";for(e=0;e<t.uint64Data.length;++e)if(!(u.isInteger(t.uint64Data[e])||t.uint64Data[e]&&u.isInteger(t.uint64Data[e].low)&&u.isInteger(t.uint64Data[e].high)))return"uint64Data: integer|Long[] expected"}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorProto)return t;var e=new l.onnx.TensorProto;if(t.dims){if(!Array.isArray(t.dims))throw TypeError(".onnx.TensorProto.dims: array expected");e.dims=[];for(var n=0;n<t.dims.length;++n)u.Long?(e.dims[n]=u.Long.fromValue(t.dims[n])).unsigned=!1:"string"==typeof t.dims[n]?e.dims[n]=parseInt(t.dims[n],10):"number"==typeof t.dims[n]?e.dims[n]=t.dims[n]:"object"==typeof t.dims[n]&&(e.dims[n]=new u.LongBits(t.dims[n].low>>>0,t.dims[n].high>>>0).toNumber())}if(null!=t.dataType&&(e.dataType=0|t.dataType),null!=t.segment){if("object"!=typeof t.segment)throw TypeError(".onnx.TensorProto.segment: object expected");e.segment=l.onnx.TensorProto.Segment.fromObject(t.segment)}if(t.floatData){if(!Array.isArray(t.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(e.floatData=[],n=0;n<t.floatData.length;++n)e.floatData[n]=Number(t.floatData[n])}if(t.int32Data){if(!Array.isArray(t.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(e.int32Data=[],n=0;n<t.int32Data.length;++n)e.int32Data[n]=0|t.int32Data[n]}if(t.stringData){if(!Array.isArray(t.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(e.stringData=[],n=0;n<t.stringData.length;++n)"string"==typeof t.stringData[n]?u.base64.decode(t.stringData[n],e.stringData[n]=u.newBuffer(u.base64.length(t.stringData[n])),0):t.stringData[n].length>=0&&(e.stringData[n]=t.stringData[n])}if(t.int64Data){if(!Array.isArray(t.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(e.int64Data=[],n=0;n<t.int64Data.length;++n)u.Long?(e.int64Data[n]=u.Long.fromValue(t.int64Data[n])).unsigned=!1:"string"==typeof t.int64Data[n]?e.int64Data[n]=parseInt(t.int64Data[n],10):"number"==typeof t.int64Data[n]?e.int64Data[n]=t.int64Data[n]:"object"==typeof t.int64Data[n]&&(e.int64Data[n]=new u.LongBits(t.int64Data[n].low>>>0,t.int64Data[n].high>>>0).toNumber())}if(null!=t.name&&(e.name=String(t.name)),null!=t.docString&&(e.docString=String(t.docString)),null!=t.rawData&&("string"==typeof t.rawData?u.base64.decode(t.rawData,e.rawData=u.newBuffer(u.base64.length(t.rawData)),0):t.rawData.length>=0&&(e.rawData=t.rawData)),t.externalData){if(!Array.isArray(t.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(e.externalData=[],n=0;n<t.externalData.length;++n){if("object"!=typeof t.externalData[n])throw TypeError(".onnx.TensorProto.externalData: object expected");e.externalData[n]=l.onnx.StringStringEntryProto.fromObject(t.externalData[n])}}switch(t.dataLocation){default:if("number"==typeof t.dataLocation){e.dataLocation=t.dataLocation;break}break;case"DEFAULT":case 0:e.dataLocation=0;break;case"EXTERNAL":case 1:e.dataLocation=1}if(t.doubleData){if(!Array.isArray(t.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(e.doubleData=[],n=0;n<t.doubleData.length;++n)e.doubleData[n]=Number(t.doubleData[n])}if(t.uint64Data){if(!Array.isArray(t.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(e.uint64Data=[],n=0;n<t.uint64Data.length;++n)u.Long?(e.uint64Data[n]=u.Long.fromValue(t.uint64Data[n])).unsigned=!0:"string"==typeof t.uint64Data[n]?e.uint64Data[n]=parseInt(t.uint64Data[n],10):"number"==typeof t.uint64Data[n]?e.uint64Data[n]=t.uint64Data[n]:"object"==typeof t.uint64Data[n]&&(e.uint64Data[n]=new u.LongBits(t.uint64Data[n].low>>>0,t.uint64Data[n].high>>>0).toNumber(!0))}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dims=[],n.floatData=[],n.int32Data=[],n.stringData=[],n.int64Data=[],n.doubleData=[],n.uint64Data=[],n.externalData=[]),e.defaults&&(n.dataType=0,n.segment=null,n.name="",e.bytes===String?n.rawData="":(n.rawData=[],e.bytes!==Array&&(n.rawData=u.newBuffer(n.rawData))),n.docString="",n.dataLocation=e.enums===String?"DEFAULT":0),t.dims&&t.dims.length){n.dims=[];for(var r=0;r<t.dims.length;++r)"number"==typeof t.dims[r]?n.dims[r]=e.longs===String?String(t.dims[r]):t.dims[r]:n.dims[r]=e.longs===String?u.Long.prototype.toString.call(t.dims[r]):e.longs===Number?new u.LongBits(t.dims[r].low>>>0,t.dims[r].high>>>0).toNumber():t.dims[r]}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&(n.dataType=t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&(n.segment=l.onnx.TensorProto.Segment.toObject(t.segment,e)),t.floatData&&t.floatData.length)for(n.floatData=[],r=0;r<t.floatData.length;++r)n.floatData[r]=e.json&&!isFinite(t.floatData[r])?String(t.floatData[r]):t.floatData[r];if(t.int32Data&&t.int32Data.length)for(n.int32Data=[],r=0;r<t.int32Data.length;++r)n.int32Data[r]=t.int32Data[r];if(t.stringData&&t.stringData.length)for(n.stringData=[],r=0;r<t.stringData.length;++r)n.stringData[r]=e.bytes===String?u.base64.encode(t.stringData[r],0,t.stringData[r].length):e.bytes===Array?Array.prototype.slice.call(t.stringData[r]):t.stringData[r];if(t.int64Data&&t.int64Data.length)for(n.int64Data=[],r=0;r<t.int64Data.length;++r)"number"==typeof t.int64Data[r]?n.int64Data[r]=e.longs===String?String(t.int64Data[r]):t.int64Data[r]:n.int64Data[r]=e.longs===String?u.Long.prototype.toString.call(t.int64Data[r]):e.longs===Number?new u.LongBits(t.int64Data[r].low>>>0,t.int64Data[r].high>>>0).toNumber():t.int64Data[r];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&(n.rawData=e.bytes===String?u.base64.encode(t.rawData,0,t.rawData.length):e.bytes===Array?Array.prototype.slice.call(t.rawData):t.rawData),t.doubleData&&t.doubleData.length)for(n.doubleData=[],r=0;r<t.doubleData.length;++r)n.doubleData[r]=e.json&&!isFinite(t.doubleData[r])?String(t.doubleData[r]):t.doubleData[r];if(t.uint64Data&&t.uint64Data.length)for(n.uint64Data=[],r=0;r<t.uint64Data.length;++r)"number"==typeof t.uint64Data[r]?n.uint64Data[r]=e.longs===String?String(t.uint64Data[r]):t.uint64Data[r]:n.uint64Data[r]=e.longs===String?u.Long.prototype.toString.call(t.uint64Data[r]):e.longs===Number?new u.LongBits(t.uint64Data[r].low>>>0,t.uint64Data[r].high>>>0).toNumber(!0):t.uint64Data[r];if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.externalData&&t.externalData.length)for(n.externalData=[],r=0;r<t.externalData.length;++r)n.externalData[r]=l.onnx.StringStringEntryProto.toObject(t.externalData[r],e);return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&(n.dataLocation=e.enums===String?void 0===l.onnx.TensorProto.DataLocation[t.dataLocation]?t.dataLocation:l.onnx.TensorProto.DataLocation[t.dataLocation]:t.dataLocation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TensorProto"},t.DataType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="UINT8"]=2,e[t[3]="INT8"]=3,e[t[4]="UINT16"]=4,e[t[5]="INT16"]=5,e[t[6]="INT32"]=6,e[t[7]="INT64"]=7,e[t[8]="STRING"]=8,e[t[9]="BOOL"]=9,e[t[10]="FLOAT16"]=10,e[t[11]="DOUBLE"]=11,e[t[12]="UINT32"]=12,e[t[13]="UINT64"]=13,e[t[14]="COMPLEX64"]=14,e[t[15]="COMPLEX128"]=15,e[t[16]="BFLOAT16"]=16,e[t[17]="FLOAT8E4M3FN"]=17,e[t[18]="FLOAT8E4M3FNUZ"]=18,e[t[19]="FLOAT8E5M2"]=19,e[t[20]="FLOAT8E5M2FNUZ"]=20,e}(),t.Segment=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.begin=u.Long?u.Long.fromBits(0,0,!1):0,t.prototype.end=u.Long?u.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.begin&&Object.hasOwnProperty.call(t,"begin")&&e.uint32(8).int64(t.begin),null!=t.end&&Object.hasOwnProperty.call(t,"end")&&e.uint32(16).int64(t.end),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorProto.Segment;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.begin=t.int64();break;case 2:r.end=t.int64();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.begin&&t.hasOwnProperty("begin")&&!(u.isInteger(t.begin)||t.begin&&u.isInteger(t.begin.low)&&u.isInteger(t.begin.high))?"begin: integer|Long expected":null!=t.end&&t.hasOwnProperty("end")&&!(u.isInteger(t.end)||t.end&&u.isInteger(t.end.low)&&u.isInteger(t.end.high))?"end: integer|Long expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TensorProto.Segment)return t;var e=new l.onnx.TensorProto.Segment;return null!=t.begin&&(u.Long?(e.begin=u.Long.fromValue(t.begin)).unsigned=!1:"string"==typeof t.begin?e.begin=parseInt(t.begin,10):"number"==typeof t.begin?e.begin=t.begin:"object"==typeof t.begin&&(e.begin=new u.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber())),null!=t.end&&(u.Long?(e.end=u.Long.fromValue(t.end)).unsigned=!1:"string"==typeof t.end?e.end=parseInt(t.end,10):"number"==typeof t.end?e.end=t.end:"object"==typeof t.end&&(e.end=new u.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(u.Long){var r=new u.Long(0,0,!1);n.begin=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.begin=e.longs===String?"0":0;u.Long?(r=new u.Long(0,0,!1),n.end=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.end=e.longs===String?"0":0}return null!=t.begin&&t.hasOwnProperty("begin")&&("number"==typeof t.begin?n.begin=e.longs===String?String(t.begin):t.begin:n.begin=e.longs===String?u.Long.prototype.toString.call(t.begin):e.longs===Number?new u.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber():t.begin),null!=t.end&&t.hasOwnProperty("end")&&("number"==typeof t.end?n.end=e.longs===String?String(t.end):t.end:n.end=e.longs===String?u.Long.prototype.toString.call(t.end):e.longs===Number?new u.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber():t.end),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TensorProto.Segment"},t}(),t.DataLocation=function(){var t={},e=Object.create(t);return e[t[0]="DEFAULT"]=0,e[t[1]="EXTERNAL"]=1,e}(),t}(),a.SparseTensorProto=function(){function t(t){if(this.dims=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.values=null,t.prototype.indices=null,t.prototype.dims=u.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.values&&Object.hasOwnProperty.call(t,"values")&&l.onnx.TensorProto.encode(t.values,e.uint32(10).fork()).ldelim(),null!=t.indices&&Object.hasOwnProperty.call(t,"indices")&&l.onnx.TensorProto.encode(t.indices,e.uint32(18).fork()).ldelim(),null!=t.dims&&t.dims.length){e.uint32(26).fork();for(var n=0;n<t.dims.length;++n)e.int64(t.dims[n]);e.ldelim()}return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.SparseTensorProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.values=l.onnx.TensorProto.decode(t,t.uint32());break;case 2:r.indices=l.onnx.TensorProto.decode(t,t.uint32());break;case 3:if(r.dims&&r.dims.length||(r.dims=[]),2==(7&o))for(var a=t.uint32()+t.pos;t.pos<a;)r.dims.push(t.int64());else r.dims.push(t.int64());break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e;if(null!=t.values&&t.hasOwnProperty("values")&&(e=l.onnx.TensorProto.verify(t.values)))return"values."+e;if(null!=t.indices&&t.hasOwnProperty("indices")&&(e=l.onnx.TensorProto.verify(t.indices)))return"indices."+e;if(null!=t.dims&&t.hasOwnProperty("dims")){if(!Array.isArray(t.dims))return"dims: array expected";for(var n=0;n<t.dims.length;++n)if(!(u.isInteger(t.dims[n])||t.dims[n]&&u.isInteger(t.dims[n].low)&&u.isInteger(t.dims[n].high)))return"dims: integer|Long[] expected"}return null},t.fromObject=function(t){if(t instanceof l.onnx.SparseTensorProto)return t;var e=new l.onnx.SparseTensorProto;if(null!=t.values){if("object"!=typeof t.values)throw TypeError(".onnx.SparseTensorProto.values: object expected");e.values=l.onnx.TensorProto.fromObject(t.values)}if(null!=t.indices){if("object"!=typeof t.indices)throw TypeError(".onnx.SparseTensorProto.indices: object expected");e.indices=l.onnx.TensorProto.fromObject(t.indices)}if(t.dims){if(!Array.isArray(t.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");e.dims=[];for(var n=0;n<t.dims.length;++n)u.Long?(e.dims[n]=u.Long.fromValue(t.dims[n])).unsigned=!1:"string"==typeof t.dims[n]?e.dims[n]=parseInt(t.dims[n],10):"number"==typeof t.dims[n]?e.dims[n]=t.dims[n]:"object"==typeof t.dims[n]&&(e.dims[n]=new u.LongBits(t.dims[n].low>>>0,t.dims[n].high>>>0).toNumber())}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dims=[]),e.defaults&&(n.values=null,n.indices=null),null!=t.values&&t.hasOwnProperty("values")&&(n.values=l.onnx.TensorProto.toObject(t.values,e)),null!=t.indices&&t.hasOwnProperty("indices")&&(n.indices=l.onnx.TensorProto.toObject(t.indices,e)),t.dims&&t.dims.length){n.dims=[];for(var r=0;r<t.dims.length;++r)"number"==typeof t.dims[r]?n.dims[r]=e.longs===String?String(t.dims[r]):t.dims[r]:n.dims[r]=e.longs===String?u.Long.prototype.toString.call(t.dims[r]):e.longs===Number?new u.LongBits(t.dims[r].low>>>0,t.dims[r].high>>>0).toNumber():t.dims[r]}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.SparseTensorProto"},t}(),a.TensorShapeProto=function(){function t(t){if(this.dim=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dim=u.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.dim&&t.dim.length)for(var n=0;n<t.dim.length;++n)l.onnx.TensorShapeProto.Dimension.encode(t.dim[n],e.uint32(10).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorShapeProto;t.pos<n;){var o=t.uint32();o>>>3==1?(r.dim&&r.dim.length||(r.dim=[]),r.dim.push(l.onnx.TensorShapeProto.Dimension.decode(t,t.uint32()))):t.skipType(7&o)}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dim&&t.hasOwnProperty("dim")){if(!Array.isArray(t.dim))return"dim: array expected";for(var e=0;e<t.dim.length;++e){var n=l.onnx.TensorShapeProto.Dimension.verify(t.dim[e]);if(n)return"dim."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorShapeProto)return t;var e=new l.onnx.TensorShapeProto;if(t.dim){if(!Array.isArray(t.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");e.dim=[];for(var n=0;n<t.dim.length;++n){if("object"!=typeof t.dim[n])throw TypeError(".onnx.TensorShapeProto.dim: object expected");e.dim[n]=l.onnx.TensorShapeProto.Dimension.fromObject(t.dim[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dim=[]),t.dim&&t.dim.length){n.dim=[];for(var r=0;r<t.dim.length;++r)n.dim[r]=l.onnx.TensorShapeProto.Dimension.toObject(t.dim[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TensorShapeProto"},t.Dimension=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.dimValue=null,t.prototype.dimParam=null,t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:u.oneOfGetter(e=["dimValue","dimParam"]),set:u.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.dimValue&&Object.hasOwnProperty.call(t,"dimValue")&&e.uint32(8).int64(t.dimValue),null!=t.dimParam&&Object.hasOwnProperty.call(t,"dimParam")&&e.uint32(18).string(t.dimParam),null!=t.denotation&&Object.hasOwnProperty.call(t,"denotation")&&e.uint32(26).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorShapeProto.Dimension;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.dimValue=t.int64();break;case 2:r.dimParam=t.string();break;case 3:r.denotation=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e={};if(null!=t.dimValue&&t.hasOwnProperty("dimValue")&&(e.value=1,!(u.isInteger(t.dimValue)||t.dimValue&&u.isInteger(t.dimValue.low)&&u.isInteger(t.dimValue.high))))return"dimValue: integer|Long expected";if(null!=t.dimParam&&t.hasOwnProperty("dimParam")){if(1===e.value)return"value: multiple values";if(e.value=1,!u.isString(t.dimParam))return"dimParam: string expected"}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!u.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TensorShapeProto.Dimension)return t;var e=new l.onnx.TensorShapeProto.Dimension;return null!=t.dimValue&&(u.Long?(e.dimValue=u.Long.fromValue(t.dimValue)).unsigned=!1:"string"==typeof t.dimValue?e.dimValue=parseInt(t.dimValue,10):"number"==typeof t.dimValue?e.dimValue=t.dimValue:"object"==typeof t.dimValue&&(e.dimValue=new u.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber())),null!=t.dimParam&&(e.dimParam=String(t.dimParam)),null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&("number"==typeof t.dimValue?n.dimValue=e.longs===String?String(t.dimValue):t.dimValue:n.dimValue=e.longs===String?u.Long.prototype.toString.call(t.dimValue):e.longs===Number?new u.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber():t.dimValue,e.oneofs&&(n.value="dimValue")),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&(n.dimParam=t.dimParam,e.oneofs&&(n.value="dimParam")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TensorShapeProto.Dimension"},t}(),t}(),a.TypeProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.tensorType=null,t.prototype.sequenceType=null,t.prototype.mapType=null,t.prototype.optionalType=null,t.prototype.sparseTensorType=null,t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:u.oneOfGetter(e=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:u.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.tensorType&&Object.hasOwnProperty.call(t,"tensorType")&&l.onnx.TypeProto.Tensor.encode(t.tensorType,e.uint32(10).fork()).ldelim(),null!=t.sequenceType&&Object.hasOwnProperty.call(t,"sequenceType")&&l.onnx.TypeProto.Sequence.encode(t.sequenceType,e.uint32(34).fork()).ldelim(),null!=t.mapType&&Object.hasOwnProperty.call(t,"mapType")&&l.onnx.TypeProto.Map.encode(t.mapType,e.uint32(42).fork()).ldelim(),null!=t.denotation&&Object.hasOwnProperty.call(t,"denotation")&&e.uint32(50).string(t.denotation),null!=t.sparseTensorType&&Object.hasOwnProperty.call(t,"sparseTensorType")&&l.onnx.TypeProto.SparseTensor.encode(t.sparseTensorType,e.uint32(66).fork()).ldelim(),null!=t.optionalType&&Object.hasOwnProperty.call(t,"optionalType")&&l.onnx.TypeProto.Optional.encode(t.optionalType,e.uint32(74).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TypeProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.tensorType=l.onnx.TypeProto.Tensor.decode(t,t.uint32());break;case 4:r.sequenceType=l.onnx.TypeProto.Sequence.decode(t,t.uint32());break;case 5:r.mapType=l.onnx.TypeProto.Map.decode(t,t.uint32());break;case 9:r.optionalType=l.onnx.TypeProto.Optional.decode(t,t.uint32());break;case 8:r.sparseTensorType=l.onnx.TypeProto.SparseTensor.decode(t,t.uint32());break;case 6:r.denotation=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e={};if(null!=t.tensorType&&t.hasOwnProperty("tensorType")&&(e.value=1,n=l.onnx.TypeProto.Tensor.verify(t.tensorType)))return"tensorType."+n;if(null!=t.sequenceType&&t.hasOwnProperty("sequenceType")){if(1===e.value)return"value: multiple values";if(e.value=1,n=l.onnx.TypeProto.Sequence.verify(t.sequenceType))return"sequenceType."+n}if(null!=t.mapType&&t.hasOwnProperty("mapType")){if(1===e.value)return"value: multiple values";if(e.value=1,n=l.onnx.TypeProto.Map.verify(t.mapType))return"mapType."+n}if(null!=t.optionalType&&t.hasOwnProperty("optionalType")){if(1===e.value)return"value: multiple values";if(e.value=1,n=l.onnx.TypeProto.Optional.verify(t.optionalType))return"optionalType."+n}if(null!=t.sparseTensorType&&t.hasOwnProperty("sparseTensorType")){if(1===e.value)return"value: multiple values";var n;if(e.value=1,n=l.onnx.TypeProto.SparseTensor.verify(t.sparseTensorType))return"sparseTensorType."+n}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!u.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto)return t;var e=new l.onnx.TypeProto;if(null!=t.tensorType){if("object"!=typeof t.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");e.tensorType=l.onnx.TypeProto.Tensor.fromObject(t.tensorType)}if(null!=t.sequenceType){if("object"!=typeof t.sequenceType)throw TypeError(".onnx.TypeProto.sequenceType: object expected");e.sequenceType=l.onnx.TypeProto.Sequence.fromObject(t.sequenceType)}if(null!=t.mapType){if("object"!=typeof t.mapType)throw TypeError(".onnx.TypeProto.mapType: object expected");e.mapType=l.onnx.TypeProto.Map.fromObject(t.mapType)}if(null!=t.optionalType){if("object"!=typeof t.optionalType)throw TypeError(".onnx.TypeProto.optionalType: object expected");e.optionalType=l.onnx.TypeProto.Optional.fromObject(t.optionalType)}if(null!=t.sparseTensorType){if("object"!=typeof t.sparseTensorType)throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");e.sparseTensorType=l.onnx.TypeProto.SparseTensor.fromObject(t.sparseTensorType)}return null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&(n.tensorType=l.onnx.TypeProto.Tensor.toObject(t.tensorType,e),e.oneofs&&(n.value="tensorType")),null!=t.sequenceType&&t.hasOwnProperty("sequenceType")&&(n.sequenceType=l.onnx.TypeProto.Sequence.toObject(t.sequenceType,e),e.oneofs&&(n.value="sequenceType")),null!=t.mapType&&t.hasOwnProperty("mapType")&&(n.mapType=l.onnx.TypeProto.Map.toObject(t.mapType,e),e.oneofs&&(n.value="mapType")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),null!=t.sparseTensorType&&t.hasOwnProperty("sparseTensorType")&&(n.sparseTensorType=l.onnx.TypeProto.SparseTensor.toObject(t.sparseTensorType,e),e.oneofs&&(n.value="sparseTensorType")),null!=t.optionalType&&t.hasOwnProperty("optionalType")&&(n.optionalType=l.onnx.TypeProto.Optional.toObject(t.optionalType,e),e.oneofs&&(n.value="optionalType")),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TypeProto"},t.Tensor=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.elemType&&Object.hasOwnProperty.call(t,"elemType")&&e.uint32(8).int32(t.elemType),null!=t.shape&&Object.hasOwnProperty.call(t,"shape")&&l.onnx.TensorShapeProto.encode(t.shape,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TypeProto.Tensor;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.elemType=t.int32();break;case 2:r.shape=l.onnx.TensorShapeProto.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")&&!u.isInteger(t.elemType))return"elemType: integer expected";if(null!=t.shape&&t.hasOwnProperty("shape")){var e=l.onnx.TensorShapeProto.verify(t.shape);if(e)return"shape."+e}return null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto.Tensor)return t;var e=new l.onnx.TypeProto.Tensor;if(null!=t.elemType&&(e.elemType=0|t.elemType),null!=t.shape){if("object"!=typeof t.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");e.shape=l.onnx.TensorShapeProto.fromObject(t.shape)}return e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.elemType=0,n.shape=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(n.elemType=t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&(n.shape=l.onnx.TensorShapeProto.toObject(t.shape,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TypeProto.Tensor"},t}(),t.Sequence=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.elemType=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.elemType&&Object.hasOwnProperty.call(t,"elemType")&&l.onnx.TypeProto.encode(t.elemType,e.uint32(10).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TypeProto.Sequence;t.pos<n;){var o=t.uint32();o>>>3==1?r.elemType=l.onnx.TypeProto.decode(t,t.uint32()):t.skipType(7&o)}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")){var e=l.onnx.TypeProto.verify(t.elemType);if(e)return"elemType."+e}return null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto.Sequence)return t;var e=new l.onnx.TypeProto.Sequence;if(null!=t.elemType){if("object"!=typeof t.elemType)throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");e.elemType=l.onnx.TypeProto.fromObject(t.elemType)}return e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.elemType=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(n.elemType=l.onnx.TypeProto.toObject(t.elemType,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TypeProto.Sequence"},t}(),t.Map=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.keyType=0,t.prototype.valueType=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.keyType&&Object.hasOwnProperty.call(t,"keyType")&&e.uint32(8).int32(t.keyType),null!=t.valueType&&Object.hasOwnProperty.call(t,"valueType")&&l.onnx.TypeProto.encode(t.valueType,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TypeProto.Map;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.keyType=t.int32();break;case 2:r.valueType=l.onnx.TypeProto.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.keyType&&t.hasOwnProperty("keyType")&&!u.isInteger(t.keyType))return"keyType: integer expected";if(null!=t.valueType&&t.hasOwnProperty("valueType")){var e=l.onnx.TypeProto.verify(t.valueType);if(e)return"valueType."+e}return null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto.Map)return t;var e=new l.onnx.TypeProto.Map;if(null!=t.keyType&&(e.keyType=0|t.keyType),null!=t.valueType){if("object"!=typeof t.valueType)throw TypeError(".onnx.TypeProto.Map.valueType: object expected");e.valueType=l.onnx.TypeProto.fromObject(t.valueType)}return e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.keyType=0,n.valueType=null),null!=t.keyType&&t.hasOwnProperty("keyType")&&(n.keyType=t.keyType),null!=t.valueType&&t.hasOwnProperty("valueType")&&(n.valueType=l.onnx.TypeProto.toObject(t.valueType,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TypeProto.Map"},t}(),t.Optional=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.elemType=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.elemType&&Object.hasOwnProperty.call(t,"elemType")&&l.onnx.TypeProto.encode(t.elemType,e.uint32(10).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TypeProto.Optional;t.pos<n;){var o=t.uint32();o>>>3==1?r.elemType=l.onnx.TypeProto.decode(t,t.uint32()):t.skipType(7&o)}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")){var e=l.onnx.TypeProto.verify(t.elemType);if(e)return"elemType."+e}return null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto.Optional)return t;var e=new l.onnx.TypeProto.Optional;if(null!=t.elemType){if("object"!=typeof t.elemType)throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");e.elemType=l.onnx.TypeProto.fromObject(t.elemType)}return e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.elemType=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(n.elemType=l.onnx.TypeProto.toObject(t.elemType,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TypeProto.Optional"},t}(),t.SparseTensor=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.elemType&&Object.hasOwnProperty.call(t,"elemType")&&e.uint32(8).int32(t.elemType),null!=t.shape&&Object.hasOwnProperty.call(t,"shape")&&l.onnx.TensorShapeProto.encode(t.shape,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TypeProto.SparseTensor;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.elemType=t.int32();break;case 2:r.shape=l.onnx.TensorShapeProto.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")&&!u.isInteger(t.elemType))return"elemType: integer expected";if(null!=t.shape&&t.hasOwnProperty("shape")){var e=l.onnx.TensorShapeProto.verify(t.shape);if(e)return"shape."+e}return null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto.SparseTensor)return t;var e=new l.onnx.TypeProto.SparseTensor;if(null!=t.elemType&&(e.elemType=0|t.elemType),null!=t.shape){if("object"!=typeof t.shape)throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");e.shape=l.onnx.TensorShapeProto.fromObject(t.shape)}return e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.elemType=0,n.shape=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(n.elemType=t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&(n.shape=l.onnx.TensorShapeProto.toObject(t.shape,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TypeProto.SparseTensor"},t}(),t}(),a.OperatorSetIdProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.domain="",t.prototype.version=u.Long?u.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.domain&&Object.hasOwnProperty.call(t,"domain")&&e.uint32(10).string(t.domain),null!=t.version&&Object.hasOwnProperty.call(t,"version")&&e.uint32(16).int64(t.version),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.OperatorSetIdProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.domain=t.string();break;case 2:r.version=t.int64();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.domain&&t.hasOwnProperty("domain")&&!u.isString(t.domain)?"domain: string expected":null!=t.version&&t.hasOwnProperty("version")&&!(u.isInteger(t.version)||t.version&&u.isInteger(t.version.low)&&u.isInteger(t.version.high))?"version: integer|Long expected":null},t.fromObject=function(t){if(t instanceof l.onnx.OperatorSetIdProto)return t;var e=new l.onnx.OperatorSetIdProto;return null!=t.domain&&(e.domain=String(t.domain)),null!=t.version&&(u.Long?(e.version=u.Long.fromValue(t.version)).unsigned=!1:"string"==typeof t.version?e.version=parseInt(t.version,10):"number"==typeof t.version?e.version=t.version:"object"==typeof t.version&&(e.version=new u.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults)if(n.domain="",u.Long){var r=new u.Long(0,0,!1);n.version=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.version=e.longs===String?"0":0;return null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.version&&t.hasOwnProperty("version")&&("number"==typeof t.version?n.version=e.longs===String?String(t.version):t.version:n.version=e.longs===String?u.Long.prototype.toString.call(t.version):e.longs===Number?new u.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber():t.version),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.OperatorSetIdProto"},t}(),a.OperatorStatus=function(){var t={},e=Object.create(t);return e[t[0]="EXPERIMENTAL"]=0,e[t[1]="STABLE"]=1,e}(),a.FunctionProto=function(){function t(t){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.input=u.emptyArray,t.prototype.output=u.emptyArray,t.prototype.attribute=u.emptyArray,t.prototype.attributeProto=u.emptyArray,t.prototype.node=u.emptyArray,t.prototype.docString="",t.prototype.opsetImport=u.emptyArray,t.prototype.domain="",t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(10).string(t.name),null!=t.input&&t.input.length)for(var n=0;n<t.input.length;++n)e.uint32(34).string(t.input[n]);if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)e.uint32(42).string(t.output[n]);if(null!=t.attribute&&t.attribute.length)for(n=0;n<t.attribute.length;++n)e.uint32(50).string(t.attribute[n]);if(null!=t.node&&t.node.length)for(n=0;n<t.node.length;++n)l.onnx.NodeProto.encode(t.node[n],e.uint32(58).fork()).ldelim();if(null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(66).string(t.docString),null!=t.opsetImport&&t.opsetImport.length)for(n=0;n<t.opsetImport.length;++n)l.onnx.OperatorSetIdProto.encode(t.opsetImport[n],e.uint32(74).fork()).ldelim();if(null!=t.domain&&Object.hasOwnProperty.call(t,"domain")&&e.uint32(82).string(t.domain),null!=t.attributeProto&&t.attributeProto.length)for(n=0;n<t.attributeProto.length;++n)l.onnx.AttributeProto.encode(t.attributeProto[n],e.uint32(90).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.FunctionProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 4:r.input&&r.input.length||(r.input=[]),r.input.push(t.string());break;case 5:r.output&&r.output.length||(r.output=[]),r.output.push(t.string());break;case 6:r.attribute&&r.attribute.length||(r.attribute=[]),r.attribute.push(t.string());break;case 11:r.attributeProto&&r.attributeProto.length||(r.attributeProto=[]),r.attributeProto.push(l.onnx.AttributeProto.decode(t,t.uint32()));break;case 7:r.node&&r.node.length||(r.node=[]),r.node.push(l.onnx.NodeProto.decode(t,t.uint32()));break;case 8:r.docString=t.string();break;case 9:r.opsetImport&&r.opsetImport.length||(r.opsetImport=[]),r.opsetImport.push(l.onnx.OperatorSetIdProto.decode(t,t.uint32()));break;case 10:r.domain=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof c||(t=new c(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!u.isString(t.name))return"name: string expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(var e=0;e<t.input.length;++e)if(!u.isString(t.input[e]))return"input: string[] expected"}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(!u.isString(t.output[e]))return"output: string[] expected"}if(null!=t.attribute&&t.hasOwnProperty("attribute")){if(!Array.isArray(t.attribute))return"attribute: array expected";for(e=0;e<t.attribute.length;++e)if(!u.isString(t.attribute[e]))return"attribute: string[] expected"}if(null!=t.attributeProto&&t.hasOwnProperty("attributeProto")){if(!Array.isArray(t.attributeProto))return"attributeProto: array expected";for(e=0;e<t.attributeProto.length;++e)if(n=l.onnx.AttributeProto.verify(t.attributeProto[e]))return"attributeProto."+n}if(null!=t.node&&t.hasOwnProperty("node")){if(!Array.isArray(t.node))return"node: array expected";for(e=0;e<t.node.length;++e)if(n=l.onnx.NodeProto.verify(t.node[e]))return"node."+n}if(null!=t.docString&&t.hasOwnProperty("docString")&&!u.isString(t.docString))return"docString: string expected";if(null!=t.opsetImport&&t.hasOwnProperty("opsetImport")){if(!Array.isArray(t.opsetImport))return"opsetImport: array expected";for(e=0;e<t.opsetImport.length;++e){var n;if(n=l.onnx.OperatorSetIdProto.verify(t.opsetImport[e]))return"opsetImport."+n}}return null!=t.domain&&t.hasOwnProperty("domain")&&!u.isString(t.domain)?"domain: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.FunctionProto)return t;var e=new l.onnx.FunctionProto;if(null!=t.name&&(e.name=String(t.name)),t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.FunctionProto.input: array expected");e.input=[];for(var n=0;n<t.input.length;++n)e.input[n]=String(t.input[n])}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.FunctionProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n)e.output[n]=String(t.output[n])}if(t.attribute){if(!Array.isArray(t.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");for(e.attribute=[],n=0;n<t.attribute.length;++n)e.attribute[n]=String(t.attribute[n])}if(t.attributeProto){if(!Array.isArray(t.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");for(e.attributeProto=[],n=0;n<t.attributeProto.length;++n){if("object"!=typeof t.attributeProto[n])throw TypeError(".onnx.FunctionProto.attributeProto: object expected");e.attributeProto[n]=l.onnx.AttributeProto.fromObject(t.attributeProto[n])}}if(t.node){if(!Array.isArray(t.node))throw TypeError(".onnx.FunctionProto.node: array expected");for(e.node=[],n=0;n<t.node.length;++n){if("object"!=typeof t.node[n])throw TypeError(".onnx.FunctionProto.node: object expected");e.node[n]=l.onnx.NodeProto.fromObject(t.node[n])}}if(null!=t.docString&&(e.docString=String(t.docString)),t.opsetImport){if(!Array.isArray(t.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");for(e.opsetImport=[],n=0;n<t.opsetImport.length;++n){if("object"!=typeof t.opsetImport[n])throw TypeError(".onnx.FunctionProto.opsetImport: object expected");e.opsetImport[n]=l.onnx.OperatorSetIdProto.fromObject(t.opsetImport[n])}}return null!=t.domain&&(e.domain=String(t.domain)),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.input=[],n.output=[],n.attribute=[],n.node=[],n.opsetImport=[],n.attributeProto=[]),e.defaults&&(n.name="",n.docString="",n.domain=""),null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),t.input&&t.input.length){n.input=[];for(var r=0;r<t.input.length;++r)n.input[r]=t.input[r]}if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=t.output[r];if(t.attribute&&t.attribute.length)for(n.attribute=[],r=0;r<t.attribute.length;++r)n.attribute[r]=t.attribute[r];if(t.node&&t.node.length)for(n.node=[],r=0;r<t.node.length;++r)n.node[r]=l.onnx.NodeProto.toObject(t.node[r],e);if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.opsetImport&&t.opsetImport.length)for(n.opsetImport=[],r=0;r<t.opsetImport.length;++r)n.opsetImport[r]=l.onnx.OperatorSetIdProto.toObject(t.opsetImport[r],e);if(null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),t.attributeProto&&t.attributeProto.length)for(n.attributeProto=[],r=0;r<t.attributeProto.length;++r)n.attributeProto[r]=l.onnx.AttributeProto.toObject(t.attributeProto[r],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.FunctionProto"},t}(),a),t.exports=l},3474:function(t,e,n){var _scriptDir,r=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(t={}){function e(){return k.buffer!=M.buffer&&F(),M}function r(){return k.buffer!=M.buffer&&F(),j}function o(){return k.buffer!=M.buffer&&F(),B}function a(){return k.buffer!=M.buffer&&F(),z}function i(){return k.buffer!=M.buffer&&F(),N}var c,s,u=t;u.ready=new Promise(((t,e)=>{c=t,s=e}));var l,p,f,d=Object.assign({},u),h="./this.program",g=(t,e)=>{throw e},y="object"==typeof window,m="function"==typeof importScripts,v="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,b=u.ENVIRONMENT_IS_PTHREAD||!1,w="";function _(t){return u.locateFile?u.locateFile(t,w):w+t}if(v){var x=n(1384),T=n(908);let e;w=m?T.dirname(w)+"/":__dirname+"/",l=(t,e)=>(t=t.startsWith("file://")?new URL(t):T.normalize(t),x.readFileSync(t,e?void 0:"utf8")),f=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),p=(t,e,n,r=!0)=>{t=t.startsWith("file://")?new URL(t):T.normalize(t),x.readFile(t,r?void 0:"utf8",((t,o)=>{t?n(t):e(r?o.buffer:o)}))},!u.thisProgram&&1<process.argv.length&&(h=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),g=(t,e)=>{throw process.exitCode=t,e},u.inspect=()=>"[Emscripten Module object]";try{e=n(9925)}catch(t){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),t}global.Worker=e.Worker}else(y||m)&&(m?w=self.location.href:"undefined"!=typeof document&&document.currentScript&&(w=document.currentScript.src),_scriptDir&&(w=_scriptDir),w=0!==w.indexOf("blob:")?w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):"",v||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},m&&(f=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),p=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));v&&"undefined"==typeof performance&&(global.performance=n(6953).performance);var S=console.log.bind(console),O=console.error.bind(console);v&&(S=(...t)=>x.writeSync(1,t.join(" ")+"\n"),O=(...t)=>x.writeSync(2,t.join(" ")+"\n"));var I,A=u.print||S,P=u.printErr||O;Object.assign(u,d),d=null,u.thisProgram&&(h=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(I=u.wasmBinary);var E=u.noExitRuntime||!0;"object"!=typeof WebAssembly&&et("no native wasm support detected");var k,D,C,R,M,j,B,z,N,L=!1;function F(){var t=k.buffer;u.HEAP8=M=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=B=new Int32Array(t),u.HEAPU8=j=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=z=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=N=new Float64Array(t)}var G=u.INITIAL_MEMORY||16777216;if(5242880<=G||et("INITIAL_MEMORY should be larger than STACK_SIZE, was "+G+"! (STACK_SIZE=5242880)"),b)k=u.wasmMemory;else if(u.wasmMemory)k=u.wasmMemory;else if(!((k=new WebAssembly.Memory({initial:G/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw P("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),v&&P("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");F(),G=k.buffer.byteLength;var U,V=[],W=[],H=[],q=0;function K(){return E||0<q}var Y,X,Z=0,$=null,J=null;function Q(){Z++,u.monitorRunDependencies&&u.monitorRunDependencies(Z)}function tt(){if(Z--,u.monitorRunDependencies&&u.monitorRunDependencies(Z),0==Z&&(null!==$&&(clearInterval($),$=null),J)){var t=J;J=null,t()}}function et(t){throw u.onAbort&&u.onAbort(t),P(t="Aborted("+t+")"),L=!0,R=1,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function nt(t){return t.startsWith("data:application/octet-stream;base64,")}function rt(t){if(t==Y&&I)return new Uint8Array(I);if(f)return f(t);throw"both async and sync fetching of the wasm failed"}function ot(t,e,n){return function(t){if(!I&&(y||m)){if("function"==typeof fetch&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((()=>rt(t)));if(p)return new Promise(((e,n)=>{p(t,(t=>e(new Uint8Array(t))),n)}))}return Promise.resolve().then((()=>rt(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then((t=>t)).then(n,(t=>{P("failed to asynchronously prepare wasm: "+t),et(t)}))}function at(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}function it(t){t.terminate(),t.onmessage=()=>{}}function ct(t){(t=ht.Fa[t])||et(),ht.fb(t)}function st(t){var e=ht.Za();if(!e)return 6;ht.Ia.push(e),ht.Fa[t.Ha]=e,e.Ha=t.Ha;var n={cmd:"run",start_routine:t.gb,arg:t.Ya,pthread_ptr:t.Ha};return v&&e.unref(),e.postMessage(n,t.mb),0}nt(Y="ort-wasm-threaded.wasm")||(Y=_(Y));var ut="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,lt=(t,e,n)=>{var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&ut)return ut.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var o=t[e++];if(128&o){var a=63&t[e++];if(192==(224&o))r+=String.fromCharCode((31&o)<<6|a);else{var i=63&t[e++];65536>(o=224==(240&o)?(15&o)<<12|a<<6|i:(7&o)<<18|a<<12|i<<6|63&t[e++])?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else r+=String.fromCharCode(o)}return r},pt=(t,e)=>(t>>>=0)?lt(r(),t,e):"";function ft(t){if(b)return Kt(1,1,t);R=t,K()||(ht.hb(),u.onExit&&u.onExit(t),L=!0),g(t,new at(t))}var dt=t=>{if(R=t,b)throw yt(t),"unwind";ft(t)},ht={La:[],Ia:[],Ta:[],Fa:{},Pa:function(){b?ht.ab():ht.$a()},$a:function(){V.unshift((()=>{Q(),ht.bb((()=>tt()))}))},ab:function(){ht.receiveObjectTransfer=ht.eb,ht.threadInitTLS=ht.Sa,ht.setExitStatus=ht.Ra,E=!1},Ra:function(t){R=t},rb:["$terminateWorker"],hb:function(){for(var t of ht.Ia)it(t);for(t of ht.La)it(t);ht.La=[],ht.Ia=[],ht.Fa=[]},fb:function(t){var e=t.Ha;delete ht.Fa[e],ht.La.push(t),ht.Ia.splice(ht.Ia.indexOf(t),1),t.Ha=0,ye(e)},eb:function(){},Sa:function(){ht.Ta.forEach((t=>t()))},cb:t=>new Promise((e=>{t.onmessage=n=>{var r=(n=n.data).cmd;if(n.targetThread&&n.targetThread!=pe()){var o=ht.Fa[n.qb];o?o.postMessage(n,n.transferList):P('Internal error! Worker sent a message "'+r+'" to target pthread '+n.targetThread+", but that thread no longer exists!")}else"checkMailbox"===r?Lt():"spawnThread"===r?st(n):"cleanupThread"===r?ct(n.thread):"killThread"===r?(n=n.thread,r=ht.Fa[n],delete ht.Fa[n],it(r),ye(n),ht.Ia.splice(ht.Ia.indexOf(r),1),r.Ha=0):"cancelThread"===r?ht.Fa[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e(t)):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"callHandler"===r?u[n.handler](...n.args):r&&P("worker sent an unknown command "+r)},t.onerror=t=>{throw P("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},v&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})));var n,r=[];for(n of["onExit","onAbort","print","printErr"])u.hasOwnProperty(n)&&r.push(n);t.postMessage({cmd:"load",handlers:r,urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:k,wasmModule:C})})),bb:function(t){t()},Xa:function(){var t=_("ort-wasm-threaded.worker.js");t=new Worker(t),ht.La.push(t)},Za:function(){return 0==ht.La.length&&(ht.Xa(),ht.cb(ht.La[0])),ht.La.pop()}};u.PThread=ht;var gt=t=>{for(;0<t.length;)t.shift()(u)};function yt(t){if(b)return Kt(2,0,t);dt(t)}u.establishStackSpace=function(){var t=pe(),e=o()[t+52>>2>>>0];t=o()[t+56>>2>>>0],we(e,e-t),xe(e)};var mt=[];function vt(t){this.Oa=t-24,this.Wa=function(t){a()[this.Oa+4>>2>>>0]=t},this.Va=function(t){a()[this.Oa+8>>2>>>0]=t},this.Pa=function(t,e){this.Ua(),this.Wa(t),this.Va(e)},this.Ua=function(){a()[this.Oa+16>>2>>>0]=0}}function bt(t,e,n,r){return b?Kt(3,1,t,e,n,r):wt(t,e,n,r)}function wt(t,e,n,r){if(t>>>=0,e>>>=0,n>>>=0,r>>>=0,"undefined"==typeof SharedArrayBuffer)return P("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var o=[];return b&&0===o.length?bt(t,e,n,r):(t={gb:n,Ha:t,Ya:r,mb:o},b?(t.ob="spawnThread",postMessage(t,o),0):st(t))}function _t(t,e,n){return b?Kt(4,1,t,e,n):0}function xt(t,e){if(b)return Kt(5,1,t,e)}u.invokeEntryPoint=function(t,e){var n=mt[t];n||(t>=mt.length&&(mt.length=t+1),mt[t]=n=U.get(t)),t=n(e),K()?ht.Ra(t):me(t)};var Tt=t=>{for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e},St=(t,e,n,r)=>{if(!(0<r))return 0;var o=n>>>=0;r=n+r-1;for(var a=0;a<t.length;++a){var i=t.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++a)),127>=i){if(n>=r)break;e[n++>>>0]=i}else{if(2047>=i){if(n+1>=r)break;e[n++>>>0]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;e[n++>>>0]=224|i>>12}else{if(n+3>=r)break;e[n++>>>0]=240|i>>18,e[n++>>>0]=128|i>>12&63}e[n++>>>0]=128|i>>6&63}e[n++>>>0]=128|63&i}}return e[n>>>0]=0,n-o},Ot=(t,e,n)=>St(t,r(),e,n);function It(t,e){if(b)return Kt(6,1,t,e)}function At(t,e,n){if(b)return Kt(7,1,t,e,n)}function Pt(t,e,n){return b?Kt(8,1,t,e,n):0}function Et(t,e){if(b)return Kt(9,1,t,e)}function kt(t,e,n){if(b)return Kt(10,1,t,e,n)}function Dt(t,e,n,r){if(b)return Kt(11,1,t,e,n,r)}function Ct(t,e,n,r){if(b)return Kt(12,1,t,e,n,r)}function Rt(t,e,n,r){if(b)return Kt(13,1,t,e,n,r)}function Mt(t){if(b)return Kt(14,1,t)}function jt(t,e){if(b)return Kt(15,1,t,e)}function Bt(t,e,n){if(b)return Kt(16,1,t,e,n)}var zt=t=>{if(!L)try{if(t(),!K())try{b?me(R):dt(R)}catch(t){t instanceof at||"unwind"==t||g(1,t)}}catch(t){t instanceof at||"unwind"==t||g(1,t)}};function Nt(t){t>>>=0,"function"==typeof Atomics.nb&&(Atomics.nb(o(),t>>2,t).value.then(Lt),t+=128,Atomics.store(o(),t>>2,1))}function Lt(){var t=pe();t&&(Nt(t),zt((()=>ve())))}u.__emscripten_thread_mailbox_await=Nt,u.checkMailbox=Lt;var Ft=t=>0==t%4&&(0!=t%100||0==t%400),Gt=[0,31,60,91,121,152,182,213,244,274,305,335],Ut=[0,31,59,90,120,151,181,212,243,273,304,334];function Vt(t,e,n,r,o,a,i,c){return b?Kt(17,1,t,e,n,r,o,a,i,c):-52}function Wt(t,e,n,r,o,a,i){if(b)return Kt(18,1,t,e,n,r,o,a,i)}var Ht=t=>{var e=Tt(t)+1,n=fe(e);return n&&Ot(t,n,e),n},qt=t=>{var e=_e();return t=t(),xe(e),t};function Kt(t,e){var n=arguments.length-2,r=arguments;return qt((()=>{for(var o=Te(8*n),a=o>>3,c=0;c<n;c++){var s=r[2+c];i()[a+c>>>0]=s}return ge(t,n,o,e)}))}var Yt,Xt=[],Zt={},$t=()=>{if(!Yt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:h||"./this.program"};for(t in Zt)void 0===Zt[t]?delete e[t]:e[t]=Zt[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);Yt=n}return Yt};function Jt(t,n){if(b)return Kt(19,1,t,n);t>>>=0,n>>>=0;var r=0;return $t().forEach((function(o,i){var c=n+r;for(i=a()[t+4*i>>2>>>0]=c,c=0;c<o.length;++c)e()[i++>>0>>>0]=o.charCodeAt(c);e()[i>>0>>>0]=0,r+=o.length+1})),0}function Qt(t,e){if(b)return Kt(20,1,t,e);t>>>=0,e>>>=0;var n=$t();a()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),a()[e>>2>>>0]=r,0}function te(t){return b?Kt(21,1,t):52}function ee(t,e,n,r){return b?Kt(22,1,t,e,n,r):52}function ne(t,e,n,r,o){return b?Kt(23,1,t,e,n,r,o):70}var re=[null,[],[]];function oe(t,e,n,o){if(b)return Kt(24,1,t,e,n,o);e>>>=0,n>>>=0,o>>>=0;for(var i=0,c=0;c<n;c++){var s=a()[e>>2>>>0],u=a()[e+4>>2>>>0];e+=8;for(var l=0;l<u;l++){var p=r()[s+l>>>0],f=re[t];0===p||10===p?((1===t?A:P)(lt(f,0)),f.length=0):f.push(p)}i+=u}return a()[o>>2>>>0]=i,0}var ae=[31,29,31,30,31,30,31,31,30,31,30,31],ie=[31,28,31,30,31,30,31,31,30,31,30,31],ce=(t,n)=>{e().set(t,n>>>0)};function se(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function u(t){var e=t.Ja;for(t=new Date(new Date(t.Ka+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(Ft(t.getFullYear())?ae:ie)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}t>>>=0,e>>>=0,n>>>=0,r>>>=0;var l=o()[r+40>>2>>>0];for(var p in r={kb:o()[r>>2>>>0],jb:o()[r+4>>2>>>0],Ma:o()[r+8>>2>>>0],Qa:o()[r+12>>2>>>0],Na:o()[r+16>>2>>>0],Ka:o()[r+20>>2>>>0],Ga:o()[r+24>>2>>>0],Ja:o()[r+28>>2>>>0],sb:o()[r+32>>2>>>0],ib:o()[r+36>>2>>>0],lb:l?pt(l):""},n=pt(n),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(p,"g"),l[p]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in l={"%a":t=>f[t.Ga].substring(0,3),"%A":t=>f[t.Ga],"%b":t=>d[t.Na].substring(0,3),"%B":t=>d[t.Na],"%C":t=>i((t.Ka+1900)/100|0,2),"%d":t=>i(t.Qa,2),"%e":t=>a(t.Qa,2," "),"%g":t=>u(t).toString().substring(2),"%G":t=>u(t),"%H":t=>i(t.Ma,2),"%I":t=>(0==(t=t.Ma)?t=12:12<t&&(t-=12),i(t,2)),"%j":t=>{for(var e=0,n=0;n<=t.Na-1;e+=(Ft(t.Ka+1900)?ae:ie)[n++]);return i(t.Qa+e,3)},"%m":t=>i(t.Na+1,2),"%M":t=>i(t.jb,2),"%n":()=>"\n","%p":t=>0<=t.Ma&&12>t.Ma?"AM":"PM","%S":t=>i(t.kb,2),"%t":()=>"\t","%u":t=>t.Ga||7,"%U":t=>i(Math.floor((t.Ja+7-t.Ga)/7),2),"%V":t=>{var e=Math.floor((t.Ja+7-(t.Ga+6)%7)/7);if(2>=(t.Ga+371-t.Ja-2)%7&&e++,e)53==e&&(4==(n=(t.Ga+371-t.Ja)%7)||3==n&&Ft(t.Ka)||(e=1));else{e=52;var n=(t.Ga+7-t.Ja-1)%7;(4==n||5==n&&Ft(t.Ka%400-1))&&e++}return i(e,2)},"%w":t=>t.Ga,"%W":t=>i(Math.floor((t.Ja+7-(t.Ga+6)%7)/7),2),"%y":t=>(t.Ka+1900).toString().substring(2),"%Y":t=>t.Ka+1900,"%z":t=>{var e=0<=(t=t.ib);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":t=>t.lb,"%%":()=>"%"},n=n.replace(/%%/g,"\0\0"),l)n.includes(p)&&(n=n.replace(new RegExp(p,"g"),l[p](r)));return p=function(t){var e=Array(Tt(t)+1);return St(t,e,0,e.length),e}(n=n.replace(/\0\0/g,"%")),p.length>e?0:(ce(p,t),p.length-1)}ht.Pa();var ue=[null,ft,yt,bt,_t,xt,It,At,Pt,Et,kt,Dt,Ct,Rt,Mt,jt,Bt,Vt,Wt,Jt,Qt,te,ee,ne,oe],le={b:function(t,e,n){throw new vt(t>>>=0).Pa(e>>>0,n>>>0),t},N:function(t){de(t>>>0,!m,1,!y,131072,!1),ht.Sa()},j:function(t){t>>>=0,b?postMessage({cmd:"cleanupThread",thread:t}):ct(t)},I:wt,h:_t,T:xt,D:It,F:At,U:Pt,R:Et,J:kt,Q:Dt,n:Ct,E:Rt,B:Mt,S:jt,C:Bt,q:()=>!0,z:function(t,e){(t>>>=0)==e>>>0?setTimeout((()=>Lt())):b?postMessage({targetThread:t,cmd:"checkMailbox"}):(t=ht.Fa[t])&&t.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:Nt,p:function(t){v&&ht.Fa[t>>>0].ref()},t:function(t,e,n){t=e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN,n>>>=0,t=new Date(1e3*t),o()[n>>2>>>0]=t.getUTCSeconds(),o()[n+4>>2>>>0]=t.getUTCMinutes(),o()[n+8>>2>>>0]=t.getUTCHours(),o()[n+12>>2>>>0]=t.getUTCDate(),o()[n+16>>2>>>0]=t.getUTCMonth(),o()[n+20>>2>>>0]=t.getUTCFullYear()-1900,o()[n+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,o()[n+28>>2>>>0]=t},u:function(t,e,n){t=e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN,n>>>=0,t=new Date(1e3*t),o()[n>>2>>>0]=t.getSeconds(),o()[n+4>>2>>>0]=t.getMinutes(),o()[n+8>>2>>>0]=t.getHours(),o()[n+12>>2>>>0]=t.getDate(),o()[n+16>>2>>>0]=t.getMonth(),o()[n+20>>2>>>0]=t.getFullYear()-1900,o()[n+24>>2>>>0]=t.getDay(),e=(Ft(t.getFullYear())?Gt:Ut)[t.getMonth()]+t.getDate()-1|0,o()[n+28>>2>>>0]=e,o()[n+36>>2>>>0]=-60*t.getTimezoneOffset(),e=new Date(t.getFullYear(),6,1).getTimezoneOffset();var r=new Date(t.getFullYear(),0,1).getTimezoneOffset();t=0|(e!=r&&t.getTimezoneOffset()==Math.min(r,e)),o()[n+32>>2>>>0]=t},v:function(t){t>>>=0;var e=new Date(o()[t+20>>2>>>0]+1900,o()[t+16>>2>>>0],o()[t+12>>2>>>0],o()[t+8>>2>>>0],o()[t+4>>2>>>0],o()[t>>2>>>0],0),n=o()[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),6,1).getTimezoneOffset(),i=new Date(e.getFullYear(),0,1).getTimezoneOffset(),c=Math.min(i,a);return 0>n?o()[t+32>>2>>>0]=Number(a!=i&&c==r):0<n!=(c==r)&&(a=Math.max(i,a),e.setTime(e.getTime()+6e4*((0<n?c:a)-r))),o()[t+24>>2>>>0]=e.getDay(),n=(Ft(e.getFullYear())?Gt:Ut)[e.getMonth()]+e.getDate()-1|0,o()[t+28>>2>>>0]=n,o()[t>>2>>>0]=e.getSeconds(),o()[t+4>>2>>>0]=e.getMinutes(),o()[t+8>>2>>>0]=e.getHours(),o()[t+12>>2>>>0]=e.getDate(),o()[t+16>>2>>>0]=e.getMonth(),o()[t+20>>2>>>0]=e.getYear(),t=e.getTime()/1e3,be((X=t,1<=+Math.abs(X)?0<X?+Math.floor(X/4294967296)>>>0:~~+Math.ceil((X-+(~~X>>>0))/4294967296)>>>0:0)),t>>>0},r:Vt,s:Wt,y:function(t,e,n){function r(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}t>>>=0,e>>>=0,n>>>=0;var i=(new Date).getFullYear(),c=new Date(i,0,1),s=new Date(i,6,1);i=c.getTimezoneOffset();var u=s.getTimezoneOffset(),l=Math.max(i,u);a()[t>>2>>>0]=60*l,o()[e>>2>>>0]=Number(i!=u),t=r(c),e=r(s),t=Ht(t),e=Ht(e),u<i?(a()[n>>2>>>0]=t,a()[n+4>>2>>>0]=e):(a()[n>>2>>>0]=e,a()[n+4>>2>>>0]=t)},c:()=>{et("")},k:function(){},i:function(){return Date.now()},o:()=>{throw q+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return v?n(3993).cpus().length:navigator.hardwareConcurrency},K:function(t,e,n,r){for(ht.pb=e>>>0,Xt.length=n,e=r>>>0>>3,r=0;r<n;r++)Xt[r]=i()[e+r>>>0];return ue[t].apply(null,Xt)},x:function(t){t>>>=0;var e=r().length;if(t<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var o=e*(1+.2/n);o=Math.min(o,t+100663296);var a=Math;o=Math.max(t,o);t:{a=a.min.call(a,4294901760,o+(65536-o%65536)%65536)-k.buffer.byteLength+65535>>>16;try{k.grow(a),F();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},O:Jt,P:Qt,H:dt,g:te,m:ee,w:ne,l:oe,a:k||u.wasmMemory,G:se,d:function(t,e,n,r){return se(t>>>0,e>>>0,n>>>0,r>>>0)}};!function(){function t(t,e){return t=t.exports,D=t=function(t){var e=t=>()=>t()>>>0,n=t=>e=>t(e)>>>0;return(t=Object.assign({},t)).__errno_location=e(t.__errno_location),t.pthread_self=e(t.pthread_self),t.malloc=n(t.malloc),t.stackSave=e(t.stackSave),t.stackAlloc=n(t.stackAlloc),t}(t),ht.Ta.push(D.sa),U=D.ta,W.unshift(D.V),C=e,tt(),t}var e={a:le};if(Q(),u.instantiateWasm)try{return u.instantiateWasm(e,t)}catch(t){P("Module.instantiateWasm callback failed with error: "+t),s(t)}(function(t,e){var n=Y;return I||"function"!=typeof WebAssembly.instantiateStreaming||nt(n)||n.startsWith("file://")||v||"function"!=typeof fetch?ot(n,t,e):fetch(n,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,t).then(e,(function(r){return P("wasm streaming compile failed: "+r),P("falling back to ArrayBuffer instantiation"),ot(n,t,e)}))))})(e,(function(e){t(e.instance,e.module)})).catch(s)}(),u._OrtInit=(t,e)=>(u._OrtInit=D.W)(t,e),u._OrtGetLastError=(t,e)=>(u._OrtGetLastError=D.X)(t,e),u._OrtCreateSessionOptions=(t,e,n,r,o,a,i,c,s,l)=>(u._OrtCreateSessionOptions=D.Y)(t,e,n,r,o,a,i,c,s,l),u._OrtAppendExecutionProvider=(t,e)=>(u._OrtAppendExecutionProvider=D.Z)(t,e),u._OrtAddFreeDimensionOverride=(t,e,n)=>(u._OrtAddFreeDimensionOverride=D._)(t,e,n),u._OrtAddSessionConfigEntry=(t,e,n)=>(u._OrtAddSessionConfigEntry=D.$)(t,e,n),u._OrtReleaseSessionOptions=t=>(u._OrtReleaseSessionOptions=D.aa)(t),u._OrtCreateSession=(t,e,n)=>(u._OrtCreateSession=D.ba)(t,e,n),u._OrtReleaseSession=t=>(u._OrtReleaseSession=D.ca)(t),u._OrtGetInputOutputCount=(t,e,n)=>(u._OrtGetInputOutputCount=D.da)(t,e,n),u._OrtGetInputName=(t,e)=>(u._OrtGetInputName=D.ea)(t,e),u._OrtGetOutputName=(t,e)=>(u._OrtGetOutputName=D.fa)(t,e),u._OrtFree=t=>(u._OrtFree=D.ga)(t),u._OrtCreateTensor=(t,e,n,r,o)=>(u._OrtCreateTensor=D.ha)(t,e,n,r,o),u._OrtGetTensorData=(t,e,n,r,o)=>(u._OrtGetTensorData=D.ia)(t,e,n,r,o),u._OrtReleaseTensor=t=>(u._OrtReleaseTensor=D.ja)(t),u._OrtCreateRunOptions=(t,e,n,r)=>(u._OrtCreateRunOptions=D.ka)(t,e,n,r),u._OrtAddRunConfigEntry=(t,e,n)=>(u._OrtAddRunConfigEntry=D.la)(t,e,n),u._OrtReleaseRunOptions=t=>(u._OrtReleaseRunOptions=D.ma)(t),u._OrtRun=(t,e,n,r,o,a,i,c)=>(u._OrtRun=D.na)(t,e,n,r,o,a,i,c),u._OrtEndProfiling=t=>(u._OrtEndProfiling=D.oa)(t);var pe=u._pthread_self=()=>(pe=u._pthread_self=D.pa)(),fe=u._malloc=t=>(fe=u._malloc=D.qa)(t);u._free=t=>(u._free=D.ra)(t),u.__emscripten_tls_init=()=>(u.__emscripten_tls_init=D.sa)();var de=u.__emscripten_thread_init=(t,e,n,r,o,a)=>(de=u.__emscripten_thread_init=D.ua)(t,e,n,r,o,a);u.__emscripten_thread_crashed=()=>(u.__emscripten_thread_crashed=D.va)();var he,ge=(t,e,n,r)=>(ge=D.wa)(t,e,n,r),ye=t=>(ye=D.xa)(t),me=u.__emscripten_thread_exit=t=>(me=u.__emscripten_thread_exit=D.ya)(t),ve=u.__emscripten_check_mailbox=()=>(ve=u.__emscripten_check_mailbox=D.za)(),be=t=>(be=D.Aa)(t),we=(t,e)=>(we=D.Ba)(t,e),_e=()=>(_e=D.Ca)(),xe=t=>(xe=D.Da)(t),Te=t=>(Te=D.Ea)(t);function Se(){function t(){if(!he&&(he=!0,u.calledRun=!0,!L)&&(b||gt(W),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!b)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();H.unshift(t)}gt(H)}}if(!(0<Z))if(b)c(u),b||gt(W),startWorker(u);else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)V.unshift(u.preRun.shift());gt(V),0<Z||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.keepRuntimeAlive=K,u.wasmMemory=k,u.stackAlloc=Te,u.stackSave=_e,u.stackRestore=xe,u.UTF8ToString=pt,u.stringToUTF8=Ot,u.lengthBytesUTF8=Tt,u.ExitStatus=at,u.PThread=ht,J=function t(){he||Se(),he||(J=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return Se(),t.ready});t.exports=r},932:function(t,e,n){var _scriptDir,r=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(t={}){var e,r,o=t;o.ready=new Promise(((t,n)=>{e=t,r=n}));var a,i,c,s=Object.assign({},o),u="./this.program",l="object"==typeof window,p="function"==typeof importScripts,f="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,d="";if(f){var h=n(1384),g=n(908);d=p?g.dirname(d)+"/":__dirname+"/",a=(t,e)=>(t=t.startsWith("file://")?new URL(t):g.normalize(t),h.readFileSync(t,e?void 0:"utf8")),c=t=>((t=a(t,!0)).buffer||(t=new Uint8Array(t)),t),i=(t,e,n,r=!0)=>{t=t.startsWith("file://")?new URL(t):g.normalize(t),h.readFile(t,r?void 0:"utf8",((t,o)=>{t?n(t):e(r?o.buffer:o)}))},!o.thisProgram&&1<process.argv.length&&(u=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),o.inspect=()=>"[Emscripten Module object]"}else(l||p)&&(p?d=self.location.href:"undefined"!=typeof document&&document.currentScript&&(d=document.currentScript.src),_scriptDir&&(d=_scriptDir),d=0!==d.indexOf("blob:")?d.substr(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1):"",a=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},p&&(c=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),i=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var y,m=o.print||console.log.bind(console),v=o.printErr||console.error.bind(console);Object.assign(o,s),s=null,o.thisProgram&&(u=o.thisProgram),o.wasmBinary&&(y=o.wasmBinary),o.noExitRuntime,"object"!=typeof WebAssembly&&G("no native wasm support detected");var b,w,_,x,T,S,O,I,A,P,E,k,D=!1;function C(){var t=b.buffer;o.HEAP8=_=new Int8Array(t),o.HEAP16=T=new Int16Array(t),o.HEAP32=O=new Int32Array(t),o.HEAPU8=x=new Uint8Array(t),o.HEAPU16=S=new Uint16Array(t),o.HEAPU32=I=new Uint32Array(t),o.HEAPF32=A=new Float32Array(t),o.HEAPF64=k=new Float64Array(t),o.HEAP64=P=new BigInt64Array(t),o.HEAPU64=E=new BigUint64Array(t)}var R=[],M=[],j=[];function B(){var t=o.preRun.shift();R.unshift(t)}var z,N=0,L=null,F=null;function G(t){throw o.onAbort&&o.onAbort(t),v(t="Aborted("+t+")"),D=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),r(t),t}function U(t){return t.startsWith("data:application/octet-stream;base64,")}if(!U(z="ort-wasm.wasm")){var V=z;z=o.locateFile?o.locateFile(V,d):d+V}function W(t){if(t==z&&y)return new Uint8Array(y);if(c)return c(t);throw"both async and sync fetching of the wasm failed"}function H(t,e,n){return function(t){if(!y&&(l||p)){if("function"==typeof fetch&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((()=>W(t)));if(i)return new Promise(((e,n)=>{i(t,(t=>e(new Uint8Array(t))),n)}))}return Promise.resolve().then((()=>W(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then((t=>t)).then(n,(t=>{v("failed to asynchronously prepare wasm: "+t),G(t)}))}var q=t=>{for(;0<t.length;)t.shift()(o)};function K(t){this.Pa=t-24,this.Za=function(t){I[this.Pa+4>>2]=t},this.Ya=function(t){I[this.Pa+8>>2]=t},this.Ta=function(t,e){this.Ua(),this.Za(t),this.Ya(e)},this.Ua=function(){I[this.Pa+16>>2]=0}}var Y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,X=(t,e,n)=>{var r=e+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&Y)return Y.decode(t.subarray(e,n));for(r="";e<n;){var o=t[e++];if(128&o){var a=63&t[e++];if(192==(224&o))r+=String.fromCharCode((31&o)<<6|a);else{var i=63&t[e++];65536>(o=224==(240&o)?(15&o)<<12|a<<6|i:(7&o)<<18|a<<12|i<<6|63&t[e++])?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else r+=String.fromCharCode(o)}return r},Z=t=>{for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e},$=(t,e,n,r)=>{if(!(0<r))return 0;var o=n;r=n+r-1;for(var a=0;a<t.length;++a){var i=t.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++a)),127>=i){if(n>=r)break;e[n++]=i}else{if(2047>=i){if(n+1>=r)break;e[n++]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;e[n++]=224|i>>12}else{if(n+3>=r)break;e[n++]=240|i>>18,e[n++]=128|i>>12&63}e[n++]=128|i>>6&63}e[n++]=128|63&i}}return e[n]=0,n-o};function J(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}var Q=void 0;function tt(t){for(var e="";x[t];)e+=Q[x[t++]];return e}var et={},nt={},rt={},ot=void 0;function at(t){throw new ot(t)}function it(t,e,n={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");!function(t,e,n={}){var r=e.name;if(t||at(`type "${r}" must have a positive integer typeid pointer`),nt.hasOwnProperty(t)){if(n.$a)return;at(`Cannot register type '${r}' twice`)}nt[t]=e,delete rt[t],et.hasOwnProperty(t)&&(e=et[t],delete et[t],e.forEach((t=>t())))}(t,e,n)}function ct(t,e,n){switch(e){case 0:return n?function(t){return _[t]}:function(t){return x[t]};case 1:return n?function(t){return T[t>>1]}:function(t){return S[t>>1]};case 2:return n?function(t){return O[t>>2]}:function(t){return I[t>>2]};case 3:return n?function(t){return P[t>>3]}:function(t){return E[t>>3]};default:throw new TypeError("Unknown integer type: "+t)}}function st(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${t}`)}}function ut(){this.Ma=[void 0],this.Wa=[]}var lt=new ut;function pt(t){t>=lt.Pa&&0==--lt.get(t).Xa&&lt.Ua(t)}var ft=t=>(t||at("Cannot use deleted val. handle = "+t),lt.get(t).value),dt=t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return lt.Ta({Xa:1,value:t})}};function ht(t){return this.fromWireType(O[t>>2])}function gt(t,e){switch(e){case 2:return function(t){return this.fromWireType(A[t>>2])};case 3:return function(t){return this.fromWireType(k[t>>3])};default:throw new TypeError("Unknown float type: "+t)}}var yt="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,mt=(t,e)=>{for(var n=t>>1,r=n+e/2;!(n>=r)&&S[n];)++n;if(32<(n<<=1)-t&&yt)return yt.decode(x.subarray(t,n));for(n="",r=0;!(r>=e/2);++r){var o=T[t+2*r>>1];if(0==o)break;n+=String.fromCharCode(o)}return n},vt=(t,e,n)=>{if(void 0===n&&(n=2147483647),2>n)return 0;var r=e;n=(n-=2)<2*t.length?n/2:t.length;for(var o=0;o<n;++o)T[e>>1]=t.charCodeAt(o),e+=2;return T[e>>1]=0,e-r},bt=t=>2*t.length,wt=(t,e)=>{for(var n=0,r="";!(n>=e/4);){var o=O[t+4*n>>2];if(0==o)break;++n,65536<=o?(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o)):r+=String.fromCharCode(o)}return r},_t=(t,e,n)=>{if(void 0===n&&(n=2147483647),4>n)return 0;var r=e;n=r+n-4;for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o)),O[e>>2]=a,(e+=4)+4>n)break}return O[e>>2]=0,e-r},xt=t=>{for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);55296<=r&&57343>=r&&++n,e+=4}return e};function Tt(t,e){var n=nt[t];if(void 0===n){var r=tt(t=Yt(t));Kt(t),at(e+" has unknown type "+r)}return n}var St={};function Ot(t){var e=St[t];return void 0===e?tt(t):e}var It=[];function At(){return"object"==typeof globalThis?globalThis:Function("return this")()}function Pt(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=e&&57>=e?`_${t}`:t}var Et=[];var kt={};function Dt(t){return-9007199254740992>t||9007199254740992<t?NaN:Number(t)}for(var Ct,Rt=t=>0==t%4&&(0!=t%100||0==t%400),Mt=[0,31,60,91,121,152,182,213,244,274,305,335],jt=[0,31,59,90,120,151,181,212,243,273,304,334],Bt=t=>{var e=Z(t)+1,n=qt(e);return n&&$(t,x,n,e),n},zt={},Nt=()=>{if(!Ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"};for(t in zt)void 0===zt[t]?delete e[t]:e[t]=zt[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);Ct=n}return Ct},Lt=[null,[],[]],Ft=[31,29,31,30,31,30,31,31,30,31,30,31],Gt=[31,28,31,30,31,30,31,31,30,31,30,31],Ut=(t,e,n,r)=>{function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function a(t,e){return o(t,e,"0")}function i(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function c(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function s(t){var e=t.Na;for(t=new Date(new Date(t.Oa+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(Rt(t.getFullYear())?Ft:Gt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=c(new Date(t.getFullYear(),0,4)),n=c(n),0>=i(e,t)?0>=i(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var u=O[r+40>>2];for(var l in r={eb:O[r>>2],cb:O[r+4>>2],Ra:O[r+8>>2],Va:O[r+12>>2],Sa:O[r+16>>2],Oa:O[r+20>>2],Ia:O[r+24>>2],Na:O[r+28>>2],gb:O[r+32>>2],bb:O[r+36>>2],fb:u&&u?X(x,u):""},n=n?X(x,n):"",u={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),u[l]);var p="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),f="January February March April May June July August September October November December".split(" ");for(l in u={"%a":t=>p[t.Ia].substring(0,3),"%A":t=>p[t.Ia],"%b":t=>f[t.Sa].substring(0,3),"%B":t=>f[t.Sa],"%C":t=>a((t.Oa+1900)/100|0,2),"%d":t=>a(t.Va,2),"%e":t=>o(t.Va,2," "),"%g":t=>s(t).toString().substring(2),"%G":t=>s(t),"%H":t=>a(t.Ra,2),"%I":t=>(0==(t=t.Ra)?t=12:12<t&&(t-=12),a(t,2)),"%j":t=>{for(var e=0,n=0;n<=t.Sa-1;e+=(Rt(t.Oa+1900)?Ft:Gt)[n++]);return a(t.Va+e,3)},"%m":t=>a(t.Sa+1,2),"%M":t=>a(t.cb,2),"%n":()=>"\n","%p":t=>0<=t.Ra&&12>t.Ra?"AM":"PM","%S":t=>a(t.eb,2),"%t":()=>"\t","%u":t=>t.Ia||7,"%U":t=>a(Math.floor((t.Na+7-t.Ia)/7),2),"%V":t=>{var e=Math.floor((t.Na+7-(t.Ia+6)%7)/7);if(2>=(t.Ia+371-t.Na-2)%7&&e++,e)53==e&&(4==(n=(t.Ia+371-t.Na)%7)||3==n&&Rt(t.Oa)||(e=1));else{e=52;var n=(t.Ia+7-t.Na-1)%7;(4==n||5==n&&Rt(t.Oa%400-1))&&e++}return a(e,2)},"%w":t=>t.Ia,"%W":t=>a(Math.floor((t.Na+7-(t.Ia+6)%7)/7),2),"%y":t=>(t.Oa+1900).toString().substring(2),"%Y":t=>t.Oa+1900,"%z":t=>{var e=0<=(t=t.bb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":t=>t.fb,"%%":()=>"%"},n=n.replace(/%%/g,"\0\0"),u)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),u[l](r)));return l=function(t){var e=Array(Z(t)+1);return $(t,e,0,e.length),e}(n=n.replace(/\0\0/g,"%")),l.length>e?0:(_.set(l,t),l.length-1)},Vt=Array(256),Wt=0;256>Wt;++Wt)Vt[Wt]=String.fromCharCode(Wt);Q=Vt,ot=o.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},o.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Object.assign(ut.prototype,{get(t){return this.Ma[t]},has(t){return void 0!==this.Ma[t]},Ta(t){var e=this.Wa.pop()||this.Ma.length;return this.Ma[e]=t,e},Ua(t){this.Ma[t]=void 0,this.Wa.push(t)}}),lt.Ma.push({value:void 0},{value:null},{value:!0},{value:!1}),lt.Pa=lt.Ma.length,o.count_emval_handles=function(){for(var t=0,e=lt.Pa;e<lt.Ma.length;++e)void 0!==lt.Ma[e]&&++t;return t};var Ht={a:function(t,e,n){throw new K(t).Ta(e,n),t},v:function(){return 0},ba:()=>{},N:()=>{},P:()=>{},H:function(){return 0},$:()=>{},V:()=>{},_:()=>{},A:function(){},O:()=>{},L:()=>{},aa:()=>{},M:()=>{},D:function(t,e,n,r,o){e=tt(e),n=st(n);var a=-1!=e.indexOf("u");a&&(o=(1n<<64n)-1n),it(t,{name:e,fromWireType:function(t){return t},toWireType:function(t,n){if("bigint"!=typeof n&&"number"!=typeof n)throw new TypeError(`Cannot convert "${J(n)}" to ${this.name}`);if(n<r||n>o)throw new TypeError(`Passing a number "${J(n)}" from JS side to C/C++ side to an argument of type "${e}", which is outside the valid range [${r}, ${o}]!`);return n},argPackAdvance:8,readValueFromPointer:ct(e,n,!a),Qa:null})},ea:function(t,e,n,r,o){var a=st(n);it(t,{name:e=tt(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?r:o},argPackAdvance:8,readValueFromPointer:function(t){if(1===n)var r=_;else if(2===n)r=T;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+e);r=O}return this.fromWireType(r[t>>a])},Qa:null})},da:function(t,e){it(t,{name:e=tt(e),fromWireType:function(t){var e=ft(t);return pt(t),e},toWireType:function(t,e){return dt(e)},argPackAdvance:8,readValueFromPointer:ht,Qa:null})},C:function(t,e,n){n=st(n),it(t,{name:e=tt(e),fromWireType:function(t){return t},toWireType:function(t,e){return e},argPackAdvance:8,readValueFromPointer:gt(e,n),Qa:null})},p:function(t,e,n,r,o){e=tt(e),-1===o&&(o=4294967295),o=st(n);var a=t=>t;if(0===r){var i=32-8*n;a=t=>t<<i>>>i}n=e.includes("unsigned")?function(t,e){return e>>>0}:function(t,e){return e},it(t,{name:e,fromWireType:a,toWireType:n,argPackAdvance:8,readValueFromPointer:ct(e,o,0!==r),Qa:null})},l:function(t,e,n){function r(t){t>>=2;var e=I;return new o(e.buffer,e[t+1],e[t])}var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][e];it(t,{name:n=tt(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{$a:!0})},E:function(t,e){var n="std::string"===(e=tt(e));it(t,{name:e,fromWireType:function(t){var e=I[t>>2],r=t+4;if(n)for(var o=r,a=0;a<=e;++a){var i=r+a;if(a==e||0==x[i]){if(o=o?X(x,o,i-o):"",void 0===c)var c=o;else c+=String.fromCharCode(0),c+=o;o=i+1}}else{for(c=Array(e),a=0;a<e;++a)c[a]=String.fromCharCode(x[r+a]);c=c.join("")}return Kt(t),c},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var r="string"==typeof e;r||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||at("Cannot pass non-string to std::string");var o=n&&r?Z(e):e.length,a=qt(4+o+1),i=a+4;if(I[a>>2]=o,n&&r)$(e,x,i,o+1);else if(r)for(r=0;r<o;++r){var c=e.charCodeAt(r);255<c&&(Kt(i),at("String has UTF-16 code units that do not fit in 8 bits")),x[i+r]=c}else for(r=0;r<o;++r)x[i+r]=e[r];return null!==t&&t.push(Kt,a),a},argPackAdvance:8,readValueFromPointer:ht,Qa:function(t){Kt(t)}})},x:function(t,e,n){if(n=tt(n),2===e)var r=mt,o=vt,a=bt,i=()=>S,c=1;else 4===e&&(r=wt,o=_t,a=xt,i=()=>I,c=2);it(t,{name:n,fromWireType:function(t){for(var n,o=I[t>>2],a=i(),s=t+4,u=0;u<=o;++u){var l=t+4+u*e;u!=o&&0!=a[l>>c]||(s=r(s,l-s),void 0===n?n=s:(n+=String.fromCharCode(0),n+=s),s=l+e)}return Kt(t),n},toWireType:function(t,r){"string"!=typeof r&&at(`Cannot pass non-string to C++ string type ${n}`);var i=a(r),s=qt(4+i+e);return I[s>>2]=i>>c,o(r,s+4,i+e),null!==t&&t.push(Kt,s),s},argPackAdvance:8,readValueFromPointer:ht,Qa:function(t){Kt(t)}})},fa:function(t,e){it(t,{ab:!0,name:e=tt(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},ca:()=>!0,o:function(t,e,n){t=ft(t),e=Tt(e,"emval::as");var r=[],o=dt(r);return I[n>>2]=o,e.toWireType(r,t)},h:function(t,e,n,r,o){t=It[t],e=ft(e),n=Ot(n);var a=[];return I[r>>2]=dt(a),t(e,n,a,o)},q:function(t,e,n,r){(t=It[t])(e=ft(e),n=Ot(n),null,r)},b:pt,F:function(t,e){return(t=ft(t))==ft(e)},u:function(t){return 0===t?dt(At()):(t=Ot(t),dt(At()[t]))},g:function(t,e){var n=function(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=Tt(I[e+4*r>>2],"parameter "+r);return n}(t,e),r=n[0];e=r.name+"_$"+n.slice(1).map((function(t){return t.name})).join("_")+"$";var o=Et[e];if(void 0!==o)return o;o=["retType"];for(var a=[r],i="",c=0;c<t-1;++c)i+=(0!==c?", ":"")+"arg"+c,o.push("argType"+c),a.push(n[1+c]);var s="return function "+Pt("methodCaller_"+e)+"(handle, name, destructors, args) {\n",u=0;for(c=0;c<t-1;++c)s+="    var arg"+c+" = argType"+c+".readValueFromPointer(args"+(u?"+"+u:"")+");\n",u+=n[c+1].argPackAdvance;for(s+="    var rv = handle[name]("+i+");\n",c=0;c<t-1;++c)n[c+1].deleteObject&&(s+="    argType"+c+".deleteObject(arg"+c+");\n");return r.ab||(s+="    return retType.toWireType(destructors, rv);\n"),o.push(s+"};\n"),o=function(t){var e=It.length;return It.push(t),e}(t=function(t){var e=Function;if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var n=function(t,e){return{[t=Pt(t)]:function(){return e.apply(this,arguments)}}[t]}(e.name||"unknownFunctionName",(function(){}));return n.prototype=e.prototype,n=new n,(t=e.apply(n,t))instanceof Object?t:n}(o).apply(null,a)),Et[e]=o},r:function(t,e){return t=ft(t),e=ft(e),dt(t[e])},c:function(t){4<t&&(lt.get(t).Xa+=1)},G:function(t,e,n,r){t=ft(t);var a=kt[e];return a||(a=function(t){for(var e="",n=0;n<t;++n)e+=(0!==n?", ":"")+"arg"+n;var r="return function emval_allocator_"+t+"(constructor, argTypes, args) {\n  var HEAPU32 = getMemory();\n";for(n=0;n<t;++n)r+="var argType"+n+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+n+"');\nvar arg"+n+" = argType"+n+".readValueFromPointer(args);\nargs += argType"+n+"['argPackAdvance'];\nargTypes += 4;\n";return new Function("requireRegisteredType","Module","valueToHandle","getMemory",r+"var obj = new constructor("+e+");\nreturn valueToHandle(obj);\n}\n")(Tt,o,dt,(()=>I))}(e),kt[e]=a),a(t,n,r)},s:function(){return dt([])},k:function(t){t=ft(t);for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=t[n];return dt(e)},d:function(t){return dt(Ot(t))},j:function(){return dt({})},f:function(t){for(var e=ft(t);e.length;){var n=e.pop();e.pop()(n)}pt(t)},i:function(t,e,n){t=ft(t),e=ft(e),n=ft(n),t[e]=n},e:function(t,e){return t=(t=Tt(t,"_emval_take_value")).readValueFromPointer(e),dt(t)},S:function(t,e){t=Dt(t),e=Dt(e),t=new Date(1e3*t),O[e>>2]=t.getUTCSeconds(),O[e+4>>2]=t.getUTCMinutes(),O[e+8>>2]=t.getUTCHours(),O[e+12>>2]=t.getUTCDate(),O[e+16>>2]=t.getUTCMonth(),O[e+20>>2]=t.getUTCFullYear()-1900,O[e+24>>2]=t.getUTCDay(),O[e+28>>2]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},T:function(t,e){t=Dt(t),e=Dt(e),t=new Date(1e3*t),O[e>>2]=t.getSeconds(),O[e+4>>2]=t.getMinutes(),O[e+8>>2]=t.getHours(),O[e+12>>2]=t.getDate(),O[e+16>>2]=t.getMonth(),O[e+20>>2]=t.getFullYear()-1900,O[e+24>>2]=t.getDay(),O[e+28>>2]=(Rt(t.getFullYear())?Mt:jt)[t.getMonth()]+t.getDate()-1|0,O[e+36>>2]=-60*t.getTimezoneOffset();var n=new Date(t.getFullYear(),6,1).getTimezoneOffset(),r=new Date(t.getFullYear(),0,1).getTimezoneOffset();O[e+32>>2]=0|(n!=r&&t.getTimezoneOffset()==Math.min(r,n))},U:function(t){t=Dt(t);var e=new Date(O[t+20>>2]+1900,O[t+16>>2],O[t+12>>2],O[t+8>>2],O[t+4>>2],O[t>>2],0),n=O[t+32>>2],r=e.getTimezoneOffset(),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),a=new Date(e.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(a,o);return 0>n?O[t+32>>2]=Number(o!=a&&i==r):0<n!=(i==r)&&(o=Math.max(a,o),e.setTime(e.getTime()+6e4*((0<n?i:o)-r))),O[t+24>>2]=e.getDay(),O[t+28>>2]=(Rt(e.getFullYear())?Mt:jt)[e.getMonth()]+e.getDate()-1|0,O[t>>2]=e.getSeconds(),O[t+4>>2]=e.getMinutes(),O[t+8>>2]=e.getHours(),O[t+12>>2]=e.getDate(),O[t+16>>2]=e.getMonth(),O[t+20>>2]=e.getYear(),BigInt(e.getTime()/1e3)},Q:function(){return-52},R:function(){},J:(t,e,n)=>{function r(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var o=(new Date).getFullYear(),a=new Date(o,0,1),i=new Date(o,6,1);o=a.getTimezoneOffset();var c=i.getTimezoneOffset();I[t>>2]=60*Math.max(o,c),O[e>>2]=Number(o!=c),t=r(a),e=r(i),t=Bt(t),e=Bt(e),c<o?(I[n>>2]=t,I[n+4>>2]=e):(I[n>>2]=e,I[n+4>>2]=t)},t:()=>{G("")},B:function(){return Date.now()},K:()=>2147483648,n:()=>performance.now(),Z:(t,e,n)=>x.copyWithin(t,e,e+n),I:t=>{var e=x.length;if(2147483648<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var o=Math;r=Math.max(t,r);t:{o=o.min.call(o,2147483648,r+(65536-r%65536)%65536)-b.buffer.byteLength+65535>>>16;try{b.grow(o),C();var a=1;break t}catch(t){}a=void 0}if(a)return!0}return!1},X:(t,e)=>{var n=0;return Nt().forEach((function(r,o){var a=e+n;for(o=I[t+4*o>>2]=a,a=0;a<r.length;++a)_[o++>>0]=r.charCodeAt(a);_[o>>0]=0,n+=r.length+1})),0},Y:(t,e)=>{var n=Nt();I[t>>2]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),I[e>>2]=r,0},w:()=>52,z:()=>52,W:function(){return 70},y:(t,e,n,r)=>{for(var o=0,a=0;a<n;a++){var i=I[e>>2],c=I[e+4>>2];e+=8;for(var s=0;s<c;s++){var u=x[i+s],l=Lt[t];0===u||10===u?((1===t?m:v)(X(l,0)),l.length=0):l.push(u)}o+=c}return I[r>>2]=o,0},ga:Ut,m:(t,e,n,r)=>Ut(t,e,n,r)};!function(){function t(t){if(w=t=t.exports,b=w.ha,C(),M.unshift(w.ia),N--,o.monitorRunDependencies&&o.monitorRunDependencies(N),0==N&&(null!==L&&(clearInterval(L),L=null),F)){var e=F;F=null,e()}return t}var e={a:Ht};if(N++,o.monitorRunDependencies&&o.monitorRunDependencies(N),o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(t){v("Module.instantiateWasm callback failed with error: "+t),r(t)}(function(t,e){var n=z;return y||"function"!=typeof WebAssembly.instantiateStreaming||U(n)||n.startsWith("file://")||f||"function"!=typeof fetch?H(n,t,e):fetch(n,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,t).then(e,(function(r){return v("wasm streaming compile failed: "+r),v("falling back to ArrayBuffer instantiation"),H(n,t,e)}))))})(e,(function(e){t(e.instance)})).catch(r)}(),o._OrtInit=(t,e)=>(o._OrtInit=w.ja)(t,e),o._OrtGetLastError=(t,e)=>(o._OrtGetLastError=w.ka)(t,e),o._OrtCreateSessionOptions=(t,e,n,r,a,i,c,s,u,l)=>(o._OrtCreateSessionOptions=w.la)(t,e,n,r,a,i,c,s,u,l),o._OrtAppendExecutionProvider=(t,e)=>(o._OrtAppendExecutionProvider=w.ma)(t,e),o._OrtAddFreeDimensionOverride=(t,e,n)=>(o._OrtAddFreeDimensionOverride=w.na)(t,e,n),o._OrtAddSessionConfigEntry=(t,e,n)=>(o._OrtAddSessionConfigEntry=w.oa)(t,e,n),o._OrtReleaseSessionOptions=t=>(o._OrtReleaseSessionOptions=w.pa)(t),o._OrtCreateSession=(t,e,n)=>(o._OrtCreateSession=w.qa)(t,e,n),o._OrtReleaseSession=t=>(o._OrtReleaseSession=w.ra)(t),o._OrtGetInputOutputCount=(t,e,n)=>(o._OrtGetInputOutputCount=w.sa)(t,e,n),o._OrtGetInputName=(t,e)=>(o._OrtGetInputName=w.ta)(t,e),o._OrtGetOutputName=(t,e)=>(o._OrtGetOutputName=w.ua)(t,e),o._OrtFree=t=>(o._OrtFree=w.va)(t),o._OrtCreateTensor=(t,e,n,r,a)=>(o._OrtCreateTensor=w.wa)(t,e,n,r,a),o._OrtGetTensorData=(t,e,n,r,a)=>(o._OrtGetTensorData=w.xa)(t,e,n,r,a),o._OrtReleaseTensor=t=>(o._OrtReleaseTensor=w.ya)(t),o._OrtCreateRunOptions=(t,e,n,r)=>(o._OrtCreateRunOptions=w.za)(t,e,n,r),o._OrtAddRunConfigEntry=(t,e,n)=>(o._OrtAddRunConfigEntry=w.Aa)(t,e,n),o._OrtReleaseRunOptions=t=>(o._OrtReleaseRunOptions=w.Ba)(t),o._OrtRun=(t,e,n,r,a,i,c,s)=>(o._OrtRun=w.Ca)(t,e,n,r,a,i,c,s),o._OrtEndProfiling=t=>(o._OrtEndProfiling=w.Da)(t);var qt=o._malloc=t=>(qt=o._malloc=w.Ea)(t),Kt=o._free=t=>(Kt=o._free=w.Fa)(t),Yt=t=>(Yt=w.Ga)(t);o.__embind_initialize_bindings=()=>(o.__embind_initialize_bindings=w.Ha)();var Xt,Zt=()=>(Zt=w.Ja)(),$t=t=>($t=w.Ka)(t),Jt=t=>(Jt=w.La)(t);function Qt(){function t(){if(!Xt&&(Xt=!0,o.calledRun=!0,!D)){if(q(M),e(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;){var t=o.postRun.shift();j.unshift(t)}q(j)}}if(!(0<N)){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)B();q(R),0<N||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),t()}),1)):t())}}if(o.stackAlloc=Jt,o.stackSave=Zt,o.stackRestore=$t,o.UTF8ToString=(t,e)=>t?X(x,t,e):"",o.stringToUTF8=(t,e,n)=>$(t,x,e,n),o.lengthBytesUTF8=Z,F=function t(){Xt||Qt(),Xt||(F=t)},o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return Qt(),t.ready});t.exports=r},4537:function(t){"use strict";t.exports=function(t,e){for(var n=new Array(arguments.length-1),r=0,o=2,a=!0;o<arguments.length;)n[r++]=arguments[o++];return new Promise((function(o,i){n[r]=function(t){if(a)if(a=!1,t)i(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];o.apply(null,e)}};try{t.apply(e||null,n)}catch(t){a&&(a=!1,i(t))}}))}},7419:function(t,e){"use strict";var n=e;n.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var r=new Array(64),o=new Array(123),a=0;a<64;)o[r[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;n.encode=function(t,e,n){for(var o,a=null,i=[],c=0,s=0;e<n;){var u=t[e++];switch(s){case 0:i[c++]=r[u>>2],o=(3&u)<<4,s=1;break;case 1:i[c++]=r[o|u>>4],o=(15&u)<<2,s=2;break;case 2:i[c++]=r[o|u>>6],i[c++]=r[63&u],s=0}c>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,i)),c=0)}return s&&(i[c++]=r[o],i[c++]=61,1===s&&(i[c++]=61)),a?(c&&a.push(String.fromCharCode.apply(String,i.slice(0,c))),a.join("")):String.fromCharCode.apply(String,i.slice(0,c))};var i="invalid encoding";n.decode=function(t,e,n){for(var r,a=n,c=0,s=0;s<t.length;){var u=t.charCodeAt(s++);if(61===u&&c>1)break;if(void 0===(u=o[u]))throw Error(i);switch(c){case 0:r=u,c=1;break;case 1:e[n++]=r<<2|(48&u)>>4,r=u,c=2;break;case 2:e[n++]=(15&r)<<4|(60&u)>>2,r=u,c=3;break;case 3:e[n++]=(3&r)<<6|u,c=0}}if(1===c)throw Error(i);return n-a},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},9211:function(t){"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}},945:function(t){"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function o(t,r,o){e[0]=t,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]}function a(t,r,o){e[0]=t,r[o]=n[3],r[o+1]=n[2],r[o+2]=n[1],r[o+3]=n[0]}function i(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function c(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?o:a,t.writeFloatBE=r?a:o,t.readFloatLE=r?i:c,t.readFloatBE=r?c:i}():function(){function e(t,e,n,r){var o=e<0?1:0;if(o&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>34028234663852886e22)t((o<<31|2139095040)>>>0,n,r);else if(e<11754943508222875e-54)t((o<<31|Math.round(e/1401298464324817e-60))>>>0,n,r);else{var a=Math.floor(Math.log(e)/Math.LN2);t((o<<31|a+127<<23|8388607&Math.round(e*Math.pow(2,-a)*8388608))>>>0,n,r)}}function i(t,e,n){var r=t(e,n),o=2*(r>>31)+1,a=r>>>23&255,i=8388607&r;return 255===a?i?NaN:o*(1/0):0===a?1401298464324817e-60*o*i:o*Math.pow(2,a-150)*(i+8388608)}t.writeFloatLE=e.bind(null,n),t.writeFloatBE=e.bind(null,r),t.readFloatLE=i.bind(null,o),t.readFloatBE=i.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function o(t,r,o){e[0]=t,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3],r[o+4]=n[4],r[o+5]=n[5],r[o+6]=n[6],r[o+7]=n[7]}function a(t,r,o){e[0]=t,r[o]=n[7],r[o+1]=n[6],r[o+2]=n[5],r[o+3]=n[4],r[o+4]=n[3],r[o+5]=n[2],r[o+6]=n[1],r[o+7]=n[0]}function i(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function c(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?o:a,t.writeDoubleBE=r?a:o,t.readDoubleLE=r?i:c,t.readDoubleBE=r?c:i}():function(){function e(t,e,n,r,o,a){var i=r<0?1:0;if(i&&(r=-r),0===r)t(0,o,a+e),t(1/r>0?0:2147483648,o,a+n);else if(isNaN(r))t(0,o,a+e),t(2146959360,o,a+n);else if(r>17976931348623157e292)t(0,o,a+e),t((i<<31|2146435072)>>>0,o,a+n);else{var c;if(r<22250738585072014e-324)t((c=r/5e-324)>>>0,o,a+e),t((i<<31|c/4294967296)>>>0,o,a+n);else{var s=Math.floor(Math.log(r)/Math.LN2);1024===s&&(s=1023),t(4503599627370496*(c=r*Math.pow(2,-s))>>>0,o,a+e),t((i<<31|s+1023<<20|1048576*c&1048575)>>>0,o,a+n)}}}function i(t,e,n,r,o){var a=t(r,o+e),i=t(r,o+n),c=2*(i>>31)+1,s=i>>>20&2047,u=4294967296*(1048575&i)+a;return 2047===s?u?NaN:c*(1/0):0===s?5e-324*c*u:c*Math.pow(2,s-1075)*(u+4503599627370496)}t.writeDoubleLE=e.bind(null,n,0,4),t.writeDoubleBE=e.bind(null,r,4,0),t.readDoubleLE=i.bind(null,o,0,4),t.readDoubleBE=i.bind(null,a,4,0)}(),t}function n(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function r(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function o(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function a(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},7199:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},6662:function(t){"use strict";t.exports=function(t,e,n){var r=n||8192,o=r>>>1,a=null,i=r;return function(n){if(n<1||n>o)return t(n);i+n>r&&(a=t(r),i=0);var c=e.call(a,i,i+=n);return 7&i&&(i=1+(7|i)),c}}},4997:function(t,e){"use strict";var n=e;n.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)(n=t.charCodeAt(r))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},n.read=function(t,e,n){if(n-e<1)return"";for(var r,o=null,a=[],i=0;e<n;)(r=t[e++])<128?a[i++]=r:r>191&&r<224?a[i++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,a[i++]=55296+(r>>10),a[i++]=56320+(1023&r)):a[i++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),i=0);return o?(i&&o.push(String.fromCharCode.apply(String,a.slice(0,i))),o.join("")):String.fromCharCode.apply(String,a.slice(0,i))},n.write=function(t,e,n){for(var r,o,a=n,i=0;i<t.length;++i)(r=t.charCodeAt(i))<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(o=t.charCodeAt(i+1)))?(r=65536+((1023&r)<<10)+(1023&o),++i,e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-a}},3442:function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(e){if(!e)throw new TypeError("Invalid argument; `value` has no value.");this.value=t.EMPTY,e&&t.isGuid(e)&&(this.value=e)}return t.isGuid=function(e){var n=e.toString();return e&&(e instanceof t||t.validator.test(n))},t.create=function(){return new t([t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-"))},t.createEmpty=function(){return new t("emptyguid")},t.parse=function(e){return new t(e)},t.raw=function(){return[t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-")},t.gen=function(t){for(var e="",n=0;n<t;n++)e+=(65536*(1+Math.random())|0).toString(16).substring(1);return e},t.prototype.equals=function(e){return t.isGuid(e)&&this.value===e.toString()},t.prototype.isEmpty=function(){return this.value===t.EMPTY},t.prototype.toString=function(){return this.value},t.prototype.toJSON=function(){return{value:this.value}},t.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),t.EMPTY="00000000-0000-0000-0000-000000000000",t}();e.Guid=n},2100:function(t,e,n){"use strict";t.exports=n(9482)},9482:function(t,e,n){"use strict";var r=e;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(1173),r.BufferWriter=n(3155),r.Reader=n(1408),r.BufferReader=n(593),r.util=n(9693),r.rpc=n(5994),r.roots=n(5054),r.configure=o,o()},1408:function(t,e,n){"use strict";t.exports=s;var r,o=n(9693),a=o.LongBits,i=o.utf8;function c(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function s(t){this.buf=t,this.pos=0,this.len=t.length}var u,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new s(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new s(t);throw Error("illegal buffer")},p=function(){return o.Buffer?function(t){return(s.create=function(t){return o.Buffer.isBuffer(t)?new r(t):l(t)})(t)}:l};function f(){var t=new a(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw c(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw c(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function d(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw c(this,8);return new a(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}s.create=p(),s.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,s.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,c(this,10);return u}),s.prototype.int32=function(){return 0|this.uint32()},s.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},s.prototype.bool=function(){return 0!==this.uint32()},s.prototype.fixed32=function(){if(this.pos+4>this.len)throw c(this,4);return d(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw c(this,4);return 0|d(this.buf,this.pos+=4)},s.prototype.float=function(){if(this.pos+4>this.len)throw c(this,4);var t=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},s.prototype.double=function(){if(this.pos+8>this.len)throw c(this,4);var t=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},s.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw c(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},s.prototype.string=function(){var t=this.bytes();return i.read(t,0,t.length)},s.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw c(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw c(this)}while(128&this.buf[this.pos++]);return this},s.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},s._configure=function(t){r=t,s.create=p(),r._configure();var e=o.Long?"toLong":"toNumber";o.merge(s.prototype,{int64:function(){return f.call(this)[e](!1)},uint64:function(){return f.call(this)[e](!0)},sint64:function(){return f.call(this).zzDecode()[e](!1)},fixed64:function(){return h.call(this)[e](!0)},sfixed64:function(){return h.call(this)[e](!1)}})}},593:function(t,e,n){"use strict";t.exports=a;var r=n(1408);(a.prototype=Object.create(r.prototype)).constructor=a;var o=n(9693);function a(t){r.call(this,t)}a._configure=function(){o.Buffer&&(a.prototype._slice=o.Buffer.prototype.slice)},a.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},a._configure()},5054:function(t){"use strict";t.exports={}},5994:function(t,e,n){"use strict";e.Service=n(7948)},7948:function(t,e,n){"use strict";t.exports=o;var r=n(9693);function o(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function t(e,n,o,a,i){if(!a)throw TypeError("request must be specified");var c=this;if(!i)return r.asPromise(t,c,e,n,o,a);if(c.rpcImpl)try{return c.rpcImpl(e,n[c.requestDelimited?"encodeDelimited":"encode"](a).finish(),(function(t,n){if(t)return c.emit("error",t,e),i(t);if(null!==n){if(!(n instanceof o))try{n=o[c.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return c.emit("error",t,e),i(t)}return c.emit("data",n,e),i(null,n)}c.end(!0)}))}catch(t){return c.emit("error",t,e),void setTimeout((function(){i(t)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},o.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:function(t,e,n){"use strict";t.exports=o;var r=n(9693);function o(t,e){this.lo=t>>>0,this.hi=e>>>0}var a=o.zero=new o(0,0);a.toNumber=function(){return 0},a.zzEncode=a.zzDecode=function(){return this},a.length=function(){return 1};var i=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(t){if(0===t)return a;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new o(n,r)},o.from=function(t){if("number"==typeof t)return o.fromNumber(t);if(r.isString(t)){if(!r.Long)return o.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new o(t.low>>>0,t.high>>>0):a},o.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var c=String.prototype.charCodeAt;o.fromHash=function(t){return t===i?a:new o((c.call(t,0)|c.call(t,1)<<8|c.call(t,2)<<16|c.call(t,3)<<24)>>>0,(c.call(t,4)|c.call(t,5)<<8|c.call(t,6)<<16|c.call(t,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},o.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},o.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},9693:function(t,e,n){"use strict";var r=e;function o(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;++o)void 0!==t[r[o]]&&n||(t[r[o]]=e[r[o]]);return t}function a(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}r.asPromise=n(4537),r.base64=n(7419),r.EventEmitter=n(9211),r.float=n(945),r.inquire=n(7199),r.utf8=n(4997),r.pool=n(6662),r.LongBits=n(1945),r.isNode=Boolean("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),r.global=r.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var n=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},r.merge=o,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=a,r.ProtocolError=a("ProtocolError"),r.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},r.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},1173:function(t,e,n){"use strict";t.exports=p;var r,o=n(9693),a=o.LongBits,i=o.base64,c=o.utf8;function s(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function u(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function p(){this.len=0,this.head=new s(u,0,0),this.tail=this.head,this.states=null}var f=function(){return o.Buffer?function(){return(p.create=function(){return new r})()}:function(){return new p}};function d(t,e,n){e[n]=255&t}function h(t,e){this.len=t,this.next=void 0,this.val=e}function g(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function y(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}p.create=f(),p.alloc=function(t){return new o.Array(t)},o.Array!==Array&&(p.alloc=o.pool(p.alloc,o.Array.prototype.subarray)),p.prototype._push=function(t,e,n){return this.tail=this.tail.next=new s(t,e,n),this.len+=e,this},h.prototype=Object.create(s.prototype),h.prototype.fn=function(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t},p.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new h((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},p.prototype.int32=function(t){return t<0?this._push(g,10,a.fromNumber(t)):this.uint32(t)},p.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},p.prototype.uint64=function(t){var e=a.from(t);return this._push(g,e.length(),e)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(t){var e=a.from(t).zzEncode();return this._push(g,e.length(),e)},p.prototype.bool=function(t){return this._push(d,1,t?1:0)},p.prototype.fixed32=function(t){return this._push(y,4,t>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(t){var e=a.from(t);return this._push(y,4,e.lo)._push(y,4,e.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(t){return this._push(o.float.writeFloatLE,4,t)},p.prototype.double=function(t){return this._push(o.float.writeDoubleLE,8,t)};var m=o.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};p.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(d,1,0);if(o.isString(t)){var n=p.alloc(e=i.length(t));i.decode(t,n,0),t=n}return this.uint32(e)._push(m,e,t)},p.prototype.string=function(t){var e=c.length(t);return e?this.uint32(e)._push(c.write,e,t):this._push(d,1,0)},p.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new s(u,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(u,0,0),this.len=0),this},p.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},p.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},p._configure=function(t){r=t,p.create=f(),r._configure()}},3155:function(t,e,n){"use strict";t.exports=a;var r=n(1173);(a.prototype=Object.create(r.prototype)).constructor=a;var o=n(9693);function a(){r.call(this)}function i(t,e,n){t.length<40?o.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}a._configure=function(){a.alloc=o._Buffer_allocUnsafe,a.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}},a.prototype.bytes=function(t){o.isString(t)&&(t=o._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(a.writeBytesBuffer,e,t),this},a.prototype.string=function(t){var e=o.Buffer.byteLength(t);return this.uint32(e),e&&this._push(i,e,t),this},a._configure()},4154:function(t){"use strict";t.exports='"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:e=>(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>t.postMessage(e),performance:global.performance||{now:Date.now}})}var o=!1,d=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=(...e)=>{postMessage({cmd:"callHandler",handler:a,args:e})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(d("worker.js received unknown command "+r.data.cmd),d(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};\n'},7067:function(){},1296:function(){},1384:function(){},3993:function(){},908:function(){},6953:function(){},9925:function(){},2806:function(){},6449:function(){},2850:function(){},5381:function(){},685:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.registerBackend=void 0;const n=new Map,r=[];e.registerBackend=(t,e,o)=>{if(!e||"function"!=typeof e.init||"function"!=typeof e.createSessionHandler)throw new TypeError("not a valid backend");{const a=n.get(t);if(void 0===a)n.set(t,{backend:e,priority:o});else{if(a.priority>o)return;if(a.priority===o&&a.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${o}`)}if(o>=0){const e=r.indexOf(t);-1!==e&&r.splice(e,1);for(let e=0;e<r.length;e++)if(n.get(r[e]).priority<=o)return void r.splice(e,0,t);r.push(t)}}},e.resolveBackend=async t=>{const e=0===t.length?r:t,o=[];for(const t of e){const e=n.get(t);if(e){if(e.initialized)return e.backend;if(e.aborted)continue;const n=!!e.initPromise;try{return n||(e.initPromise=e.backend.init()),await e.initPromise,e.initialized=!0,e.backend}catch(r){n||o.push({name:t,err:r}),e.aborted=!0}finally{delete e.initPromise}}}throw new Error(`no available backend found. ERR: ${o.map((t=>`[${t.name}] ${t.err}`)).join(", ")}`)}},4798:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerBackend=void 0;var r=n(685);Object.defineProperty(e,"registerBackend",{enumerable:!0,get:function(){return r.registerBackend}})},3121:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.env=void 0;const r=n(9104);let o="warning";e.env={wasm:{},webgl:{},webgpu:{},versions:{common:r.version},set logLevel(t){if(void 0!==t){if("string"!=typeof t||-1===["verbose","info","warning","error","fatal"].indexOf(t))throw new Error(`Unsupported logging level: ${t}`);o=t}},get logLevel(){return o}},Object.defineProperty(e.env,"logLevel",{enumerable:!0})},2457:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.env=void 0;const r=n(3121);e.env=r.env},2235:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(4798),e),o(n(2457),e),o(n(3974),e),o(n(963),e),o(n(7852),e)},8036:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InferenceSession=void 0;const r=n(685),o=n(963);class a{constructor(t){this.handler=t}async run(t,e,n){const r={};let a={};if("object"!=typeof t||null===t||t instanceof o.Tensor||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let i=!0;if("object"==typeof e){if(null===e)throw new TypeError("Unexpected argument[1]: cannot be null.");if(e instanceof o.Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(e)){if(0===e.length)throw new TypeError("'fetches' cannot be an empty array.");i=!1;for(const t of e){if("string"!=typeof t)throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(t))throw new RangeError(`'fetches' contains invalid output name: ${t}.`);r[t]=null}if("object"==typeof n&&null!==n)a=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else{let t=!1;const c=Object.getOwnPropertyNames(e);for(const n of this.outputNames)if(-1!==c.indexOf(n)){const a=e[n];(null===a||a instanceof o.Tensor)&&(t=!0,i=!1,r[n]=a)}if(t){if("object"==typeof n&&null!==n)a=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else a=e}}else if(void 0!==e)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const e of this.inputNames)if(void 0===t[e])throw new Error(`input '${e}' is missing in 'feeds'.`);if(i)for(const t of this.outputNames)r[t]=null;const c=await this.handler.run(t,r,a),s={};for(const t in c)if(Object.hasOwnProperty.call(c,t)){const e=c[t];e instanceof o.Tensor?s[t]=e:s[t]=new o.Tensor(e.type,e.data,e.dims)}return s}async release(){return this.handler.dispose()}static async create(t,e,n,o){let i,c={};if("string"==typeof t){if(i=t,"object"==typeof e&&null!==e)c=e;else if(void 0!==e)throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(i=t,"object"==typeof e&&null!==e)c=e;else if(void 0!==e)throw new TypeError("'options' must be an object.")}else{if(!(t instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const r=t;let a=0,s=t.byteLength;if("object"==typeof e&&null!==e)c=e;else if("number"==typeof e){if(a=e,!Number.isSafeInteger(a))throw new RangeError("'byteOffset' must be an integer.");if(a<0||a>=r.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${r.byteLength}).`);if(s=t.byteLength-a,"number"==typeof n){if(s=n,!Number.isSafeInteger(s))throw new RangeError("'byteLength' must be an integer.");if(s<=0||a+s>r.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${r.byteLength-a}].`);if("object"==typeof o&&null!==o)c=o;else if(void 0!==o)throw new TypeError("'options' must be an object.")}else if(void 0!==n)throw new TypeError("'byteLength' must be a number.")}else if(void 0!==e)throw new TypeError("'options' must be an object.");i=new Uint8Array(r,a,s)}}const s=(c.executionProviders||[]).map((t=>"string"==typeof t?t:t.name)),u=await(0,r.resolveBackend)(s),l=await u.createSessionHandler(i,c);return new a(l)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}e.InferenceSession=a},3974:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InferenceSession=void 0;const r=n(8036);e.InferenceSession=r.InferenceSession},7852:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2350:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tensorToImageData=e.tensorToDataURL=void 0,e.tensorToDataURL=(t,e)=>{const n=document.createElement("canvas");n.width=t.dims[3],n.height=t.dims[2];const r=n.getContext("2d");if(null!=r){let o,a;void 0!==e?.tensorLayout&&"NHWC"===e.tensorLayout?(o=t.dims[2],a=t.dims[3]):(o=t.dims[3],a=t.dims[2]);const i=void 0!==e?.format?e.format:"RGB",c=e?.norm;let s,u;void 0===c||void 0===c.mean?s=[255,255,255,255]:"number"==typeof c.mean?s=[c.mean,c.mean,c.mean,c.mean]:(s=[c.mean[0],c.mean[1],c.mean[2],0],void 0!==c.mean[3]&&(s[3]=c.mean[3])),void 0===c||void 0===c.bias?u=[0,0,0,0]:"number"==typeof c.bias?u=[c.bias,c.bias,c.bias,c.bias]:(u=[c.bias[0],c.bias[1],c.bias[2],0],void 0!==c.bias[3]&&(u[3]=c.bias[3]));const l=a*o;let p=0,f=l,d=2*l,h=-1;"RGBA"===i?(p=0,f=l,d=2*l,h=3*l):"RGB"===i?(p=0,f=l,d=2*l):"RBG"===i&&(p=0,d=l,f=2*l);for(let e=0;e<a;e++)for(let n=0;n<o;n++){const o=(t.data[p++]-u[0])*s[0],a=(t.data[f++]-u[1])*s[1],i=(t.data[d++]-u[2])*s[2],c=-1===h?255:(t.data[h++]-u[3])*s[3];r.fillStyle="rgba("+o+","+a+","+i+","+c+")",r.fillRect(n,e,1,1)}return n.toDataURL()}throw new Error("Can not access image data")},e.tensorToImageData=(t,e)=>{const n=document.createElement("canvas").getContext("2d");let r;if(null==n)throw new Error("Can not access image data");{let o,a,i;void 0!==e?.tensorLayout&&"NHWC"===e.tensorLayout?(o=t.dims[2],a=t.dims[1],i=t.dims[3]):(o=t.dims[3],a=t.dims[2],i=t.dims[1]);const c=void 0!==e&&void 0!==e.format?e.format:"RGB",s=e?.norm;let u,l;void 0===s||void 0===s.mean?u=[255,255,255,255]:"number"==typeof s.mean?u=[s.mean,s.mean,s.mean,s.mean]:(u=[s.mean[0],s.mean[1],s.mean[2],255],void 0!==s.mean[3]&&(u[3]=s.mean[3])),void 0===s||void 0===s.bias?l=[0,0,0,0]:"number"==typeof s.bias?l=[s.bias,s.bias,s.bias,s.bias]:(l=[s.bias[0],s.bias[1],s.bias[2],0],void 0!==s.bias[3]&&(l[3]=s.bias[3]));const p=a*o;if(void 0!==e&&(void 0!==e.format&&4===i&&"RGBA"!==e.format||3===i&&"RGB"!==e.format&&"BGR"!==e.format))throw new Error("Tensor format doesn't match input tensor dims");const f=4;let d=0,h=1,g=2,y=3,m=0,v=p,b=2*p,w=-1;"RGBA"===c?(m=0,v=p,b=2*p,w=3*p):"RGB"===c?(m=0,v=p,b=2*p):"RBG"===c&&(m=0,b=p,v=2*p),r=n.createImageData(o,a);for(let e=0;e<a*o;d+=f,h+=f,g+=f,y+=f,e++)r.data[d]=(t.data[m++]-l[0])*u[0],r.data[h]=(t.data[v++]-l[1])*u[1],r.data[g]=(t.data[b++]-l[2])*u[2],r.data[y]=-1===w?255:(t.data[w++]-l[3])*u[3]}return r}},4866:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tensorFromPinnedBuffer=e.tensorFromGpuBuffer=e.tensorFromTexture=e.tensorFromImage=e.bufferToTensor=void 0;const r=n(5957);e.bufferToTensor=(t,e)=>{if(void 0===t)throw new Error("Image buffer must be defined");if(void 0===e.height||void 0===e.width)throw new Error("Image height and width must be defined");if("NHWC"===e.tensorLayout)throw new Error("NHWC Tensor layout is not supported yet");const{height:n,width:o}=e,a=e.norm??{mean:255,bias:0};let i,c;i="number"==typeof a.mean?[a.mean,a.mean,a.mean,a.mean]:[a.mean[0],a.mean[1],a.mean[2],a.mean[3]??255],c="number"==typeof a.bias?[a.bias,a.bias,a.bias,a.bias]:[a.bias[0],a.bias[1],a.bias[2],a.bias[3]??0];const s=void 0!==e.format?e.format:"RGBA",u=void 0!==e.tensorFormat&&void 0!==e.tensorFormat?e.tensorFormat:"RGB",l=n*o,p="RGBA"===u?new Float32Array(4*l):new Float32Array(3*l);let f=4,d=0,h=1,g=2,y=3,m=0,v=l,b=2*l,w=-1;"RGB"===s&&(f=3,d=0,h=1,g=2,y=-1),"RGBA"===u?w=3*l:"RBG"===u?(m=0,b=l,v=2*l):"BGR"===u&&(b=0,v=l,m=2*l);for(let e=0;e<l;e++,d+=f,g+=f,h+=f,y+=f)p[m++]=(t[d]+c[0])/i[0],p[v++]=(t[h]+c[1])/i[1],p[b++]=(t[g]+c[2])/i[2],-1!==w&&-1!==y&&(p[w++]=(t[y]+c[3])/i[3]);return"RGBA"===u?new r.Tensor("float32",p,[1,4,n,o]):new r.Tensor("float32",p,[1,3,n,o])},e.tensorFromImage=async(t,n)=>{const r="undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement,o="undefined"!=typeof ImageData&&t instanceof ImageData,a="undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap,i="string"==typeof t;let c,s=n??{};if(r){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const r=e.getContext("2d");if(null==r)throw new Error("Can not access image data");{let e=t.height,o=t.width;if(void 0!==n&&void 0!==n.resizedHeight&&void 0!==n.resizedWidth&&(e=n.resizedHeight,o=n.resizedWidth),void 0!==n){if(s=n,void 0!==n.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");s.tensorFormat="RGBA",s.height=e,s.width=o}else s.tensorFormat="RGBA",s.height=e,s.width=o;r.drawImage(t,0,0),c=r.getImageData(0,0,o,e).data}}else{if(!o){if(a){if(void 0===n)throw new Error("Please provide image config with format for Imagebitmap");const r=document.createElement("canvas");r.width=t.width,r.height=t.height;const o=r.getContext("2d");if(null!=o){const n=t.height,r=t.width;return o.drawImage(t,0,0,r,n),c=o.getImageData(0,0,r,n).data,s.height=n,s.width=r,(0,e.bufferToTensor)(c,s)}throw new Error("Can not access image data")}if(i)return new Promise(((n,r)=>{const o=document.createElement("canvas"),a=o.getContext("2d");if(!t||!a)return r();const i=new Image;i.crossOrigin="Anonymous",i.src=t,i.onload=()=>{o.width=i.width,o.height=i.height,a.drawImage(i,0,0,o.width,o.height);const t=a.getImageData(0,0,o.width,o.height);s.height=o.height,s.width=o.width,n((0,e.bufferToTensor)(t.data,s))}}));throw new Error("Input data provided is not supported - aborted tensor creation")}{let e,r;if(void 0!==n&&void 0!==n.resizedWidth&&void 0!==n.resizedHeight?(e=n.resizedHeight,r=n.resizedWidth):(e=t.height,r=t.width),void 0!==n&&(s=n),s.format="RGBA",s.height=e,s.width=r,void 0!==n){const n=document.createElement("canvas");n.width=r,n.height=e;const o=n.getContext("2d");if(null==o)throw new Error("Can not access image data");o.putImageData(t,0,0),c=o.getImageData(0,0,r,e).data}else c=t.data}}if(void 0!==c)return(0,e.bufferToTensor)(c,s);throw new Error("Input data provided is not supported - aborted tensor creation")},e.tensorFromTexture=(t,e)=>{const{width:n,height:o,download:a,dispose:i}=e,c=[1,o,n,4];return new r.Tensor({location:"texture",type:"float32",texture:t,dims:c,download:a,dispose:i})},e.tensorFromGpuBuffer=(t,e)=>{const{dataType:n,dims:o,download:a,dispose:i}=e;return new r.Tensor({location:"gpu-buffer",type:n??"float32",gpuBuffer:t,dims:o,download:a,dispose:i})},e.tensorFromPinnedBuffer=(t,e,n)=>new r.Tensor({location:"cpu-pinned",type:t,data:e,dims:n??[e.length]})},3990:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkBigInt=e.NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=e.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=void 0,e.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),e.NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let n=!1;e.checkBigInt=()=>{if(!n){n=!0;const t="undefined"!=typeof BigInt64Array&&"function"==typeof BigInt64Array.from,r="undefined"!=typeof BigUint64Array&&"function"==typeof BigUint64Array.from;t&&(e.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),e.NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64")),r&&(e.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),e.NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"))}}},5957:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const r=n(2350),o=n(4866),a=n(3990),i=n(106);e.Tensor=class{constructor(t,e,n){let r,o;if((0,a.checkBigInt)(),"object"==typeof t&&"location"in t)switch(this.dataLocation=t.location,r=t.type,o=t.dims,t.location){case"cpu-pinned":{const e=a.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(r);if(!e)throw new TypeError(`unsupported type "${r}" to create tensor from pinned buffer`);if(!(t.data instanceof e))throw new TypeError(`buffer should be of type ${e.name}`);this.cpuData=t.data;break}case"texture":if("float32"!==r)throw new TypeError(`unsupported type "${r}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break;case"gpu-buffer":if("float32"!==r&&"float16"!==r&&"int32"!==r&&"int64"!==r&&"uint32"!==r&&"bool"!==r)throw new TypeError(`unsupported type "${r}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break;default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let i,c;if("string"==typeof t)if(r=t,c=n,"string"===t){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");i=e}else{const n=a.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(t);if(void 0===n)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e)){if("float16"===t)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");i="uint64"===t||"int64"===t?n.from(e,BigInt):n.from(e)}else{if(!(e instanceof n))throw new TypeError(`A ${r} tensor's data must be type of ${n}`);i=e}}else if(c=e,Array.isArray(t)){if(0===t.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");const e=typeof t[0];if("string"===e)r="string",i=t;else{if("boolean"!==e)throw new TypeError(`Invalid element type of data array: ${e}.`);r="bool",i=Uint8Array.from(t)}}else{const e=a.NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(t.constructor);if(void 0===e)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);r=e,i=t}if(void 0===c)c=[i.length];else if(!Array.isArray(c))throw new TypeError("A tensor's dims must be a number array");o=c,this.cpuData=i,this.dataLocation="cpu"}const c=(0,i.calculateSize)(o);if(this.cpuData&&c!==this.cpuData.length)throw new Error(`Tensor's size(${c}) does not match data length(${this.cpuData.length}).`);this.type=r,this.dims=o,this.size=c}static async fromImage(t,e){return(0,o.tensorFromImage)(t,e)}static fromTexture(t,e){return(0,o.tensorFromTexture)(t,e)}static fromGpuBuffer(t,e){return(0,o.tensorFromGpuBuffer)(t,e)}static fromPinnedBuffer(t,e,n){return(0,o.tensorFromPinnedBuffer)(t,e,n)}toDataURL(t){return(0,r.tensorToDataURL)(this,t)}toImageData(t){return(0,r.tensorToImageData)(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;const e=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,t&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if("none"===this.dataLocation)throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return(0,i.tensorReshape)(this,t)}}},106:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tensorReshape=e.calculateSize=void 0;const r=n(5957);e.calculateSize=t=>{let e=1;for(let n=0;n<t.length;n++){const r=t[n];if("number"!=typeof r||!Number.isSafeInteger(r))throw new TypeError(`dims[${n}] must be an integer, got: ${r}`);if(r<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${r}`);e*=r}return e},e.tensorReshape=(t,e)=>{switch(t.location){case"cpu":return new r.Tensor(t.type,t.data,e);case"cpu-pinned":return new r.Tensor({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new r.Tensor({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new r.Tensor({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});default:throw new Error(`tensorReshape: tensor location ${t.location} is not supported`)}}},963:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const r=n(5957);e.Tensor=r.Tensor},9104:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version=void 0,e.version="1.17.0"},1583:function(t,e){var n,r=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function r(t){return!0===(t&&t.__isLong__)}function o(t){var e=Math.clz32(t&-t);return t?31-e:e}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function c(t,e){var n,r,o;return e?(o=0<=(t>>>=0)&&t<256)&&(r=i[t])?r:(n=u(t,0,!0),o&&(i[t]=n),n):(o=-128<=(t|=0)&&t<128)&&(r=a[t])?r:(n=u(t,t<0?-1:0,!1),o&&(a[t]=n),n)}function s(t,e){if(isNaN(t))return e?v:m;if(e){if(t<0)return v;if(t>=h)return T}else{if(t<=-g)return S;if(t+1>=g)return x}return t<0?s(-t,e).neg():u(t%d|0,t/d|0,e)}function u(t,e,r){return new n(t,e,r)}n.fromInt=c,n.fromNumber=s,n.fromBits=u;var l=Math.pow;function p(t,e,n){if(0===t.length)throw Error("empty string");if("number"==typeof e?(n=e,e=!1):e=!!e,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e?v:m;if((n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return p(t.substring(1),e,n).neg();for(var o=s(l(n,8)),a=m,i=0;i<t.length;i+=8){var c=Math.min(8,t.length-i),u=parseInt(t.substring(i,i+c),n);if(c<8){var f=s(l(n,c));a=a.mul(f).add(s(u))}else a=(a=a.mul(o)).add(s(u))}return a.unsigned=e,a}function f(t,e){return"number"==typeof t?s(t,e):"string"==typeof t?p(t,e):u(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=p,n.fromValue=f;var d=4294967296,h=d*d,g=h/2,y=c(1<<24),m=c(0);n.ZERO=m;var v=c(0,!0);n.UZERO=v;var b=c(1);n.ONE=b;var w=c(1,!0);n.UONE=w;var _=c(-1);n.NEG_ONE=_;var x=u(-1,2147483647,!1);n.MAX_VALUE=x;var T=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=T;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var O=n.prototype;O.toInt=function(){return this.unsigned?this.low>>>0:this.low},O.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},O.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var e=s(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var o=s(l(t,6),this.unsigned),a=this,i="";;){var c=a.div(o),u=(a.sub(c.mul(o)).toInt()>>>0).toString(t);if((a=c).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},O.getHighBits=function(){return this.high},O.getHighBitsUnsigned=function(){return this.high>>>0},O.getLowBits=function(){return this.low},O.getLowBitsUnsigned=function(){return this.low>>>0},O.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},O.isZero=function(){return 0===this.high&&0===this.low},O.eqz=O.isZero,O.isNegative=function(){return!this.unsigned&&this.high<0},O.isPositive=function(){return this.unsigned||this.high>=0},O.isOdd=function(){return 1==(1&this.low)},O.isEven=function(){return 0==(1&this.low)},O.equals=function(t){return r(t)||(t=f(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},O.eq=O.equals,O.notEquals=function(t){return!this.eq(t)},O.neq=O.notEquals,O.ne=O.notEquals,O.lessThan=function(t){return this.comp(t)<0},O.lt=O.lessThan,O.lessThanOrEqual=function(t){return this.comp(t)<=0},O.lte=O.lessThanOrEqual,O.le=O.lessThanOrEqual,O.greaterThan=function(t){return this.comp(t)>0},O.gt=O.greaterThan,O.greaterThanOrEqual=function(t){return this.comp(t)>=0},O.gte=O.greaterThanOrEqual,O.ge=O.greaterThanOrEqual,O.compare=function(t){if(r(t)||(t=f(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},O.comp=O.compare,O.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(b)},O.neg=O.negate,O.add=function(t){r(t)||(t=f(t));var e=this.high>>>16,n=65535&this.high,o=this.low>>>16,a=65535&this.low,i=t.high>>>16,c=65535&t.high,s=t.low>>>16,l=0,p=0,d=0,h=0;return d+=(h+=a+(65535&t.low))>>>16,p+=(d+=o+s)>>>16,l+=(p+=n+c)>>>16,l+=e+i,u((d&=65535)<<16|(h&=65535),(l&=65535)<<16|(p&=65535),this.unsigned)},O.subtract=function(t){return r(t)||(t=f(t)),this.add(t.neg())},O.sub=O.subtract,O.multiply=function(t){if(this.isZero())return this;if(r(t)||(t=f(t)),e)return u(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return this.unsigned?v:m;if(this.eq(S))return t.isOdd()?S:m;if(t.eq(S))return this.isOdd()?S:m;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(y)&&t.lt(y))return s(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,a=this.low>>>16,i=65535&this.low,c=t.high>>>16,l=65535&t.high,p=t.low>>>16,d=65535&t.low,h=0,g=0,b=0,w=0;return b+=(w+=i*d)>>>16,g+=(b+=a*d)>>>16,b&=65535,g+=(b+=i*p)>>>16,h+=(g+=o*d)>>>16,g&=65535,h+=(g+=a*p)>>>16,g&=65535,h+=(g+=i*l)>>>16,h+=n*d+o*p+a*l+i*c,u((b&=65535)<<16|(w&=65535),(h&=65535)<<16|(g&=65535),this.unsigned)},O.mul=O.multiply,O.divide=function(t){if(r(t)||(t=f(t)),t.isZero())throw Error("division by zero");var n,o,a;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return v;if(t.gt(this.shru(1)))return w;a=v}else{if(this.eq(S))return t.eq(b)||t.eq(_)?S:t.eq(S)?b:(n=this.shr(1).div(t).shl(1)).eq(m)?t.isNegative()?b:_:(o=this.sub(t.mul(n)),a=n.add(o.div(t)));if(t.eq(S))return this.unsigned?v:m;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=m}for(o=this;o.gte(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),c=i<=48?1:l(2,i-48),p=s(n),d=p.mul(t);d.isNegative()||d.gt(o);)d=(p=s(n-=c,this.unsigned)).mul(t);p.isZero()&&(p=b),a=a.add(p),o=o.sub(d)}return a},O.div=O.divide,O.modulo=function(t){return r(t)||(t=f(t)),e?u((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},O.mod=O.modulo,O.rem=O.modulo,O.not=function(){return u(~this.low,~this.high,this.unsigned)},O.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},O.clz=O.countLeadingZeros,O.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},O.ctz=O.countTrailingZeros,O.and=function(t){return r(t)||(t=f(t)),u(this.low&t.low,this.high&t.high,this.unsigned)},O.or=function(t){return r(t)||(t=f(t)),u(this.low|t.low,this.high|t.high,this.unsigned)},O.xor=function(t){return r(t)||(t=f(t)),u(this.low^t.low,this.high^t.high,this.unsigned)},O.shiftLeft=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):u(0,this.low<<t-32,this.unsigned)},O.shl=O.shiftLeft,O.shiftRight=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):u(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},O.shr=O.shiftRight,O.shiftRightUnsigned=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):u(32===t?this.high:this.high>>>t-32,0,this.unsigned)},O.shru=O.shiftRightUnsigned,O.shr_u=O.shiftRightUnsigned,O.rotateLeft=function(t){var e;return r(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?u(this.high,this.low,this.unsigned):t<32?(e=32-t,u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(e=32-(t-=32),u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},O.rotl=O.rotateLeft,O.rotateRight=function(t){var e;return r(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?u(this.high,this.low,this.unsigned):t<32?(e=32-t,u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(e=32-(t-=32),u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},O.rotr=O.rotateRight,O.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},O.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},O.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},O.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},O.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};var I=n;return t.default=I,"default"in t?t.default:t}({});void 0===(n=function(){return r}.apply(e,[]))||(t.exports=n)},5686:function(t,e,n){"use strict";n.r(e),n.d(e,{flatbuffers:function(){return r}});var r={};r.Offset,r.Table,r.SIZEOF_SHORT=2,r.SIZEOF_INT=4,r.FILE_IDENTIFIER_LENGTH=4,r.SIZE_PREFIX_LENGTH=4,r.Encoding={UTF8_BYTES:1,UTF16_STRING:2},r.int32=new Int32Array(2),r.float32=new Float32Array(r.int32.buffer),r.float64=new Float64Array(r.int32.buffer),r.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],r.Long=function(t,e){this.low=0|t,this.high=0|e},r.Long.create=function(t,e){return 0==t&&0==e?r.Long.ZERO:new r.Long(t,e)},r.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},r.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},r.Long.ZERO=new r.Long(0,0),r.Builder=function(t){if(t)e=t;else var e=1024;this.bb=r.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},r.Builder.prototype.dataBuffer=function(){return this.bb},r.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},r.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<n+t+e;){var o=this.bb.capacity();this.bb=r.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(n)},r.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},r.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},r.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},r.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},r.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},r.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},r.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},r.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},r.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},r.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},r.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},r.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},r.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},r.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},r.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},r.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},r.Builder.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},r.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},r.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},r.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},r.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},r.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},r.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},r.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},r.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},r.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,o=r.ByteBuffer.allocate(n);return o.setPosition(n-e),o.bytes().set(t.bytes(),n-e),o},r.Builder.prototype.addOffset=function(t){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-t+r.SIZEOF_INT)},r.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},r.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var o=(n+2)*r.SIZEOF_SHORT;this.addInt16(o);var a=0,i=this.space;t:for(e=0;e<this.vtables.length;e++){var c=this.bb.capacity()-this.vtables[e];if(o==this.bb.readInt16(c)){for(var s=r.SIZEOF_SHORT;s<o;s+=r.SIZEOF_SHORT)if(this.bb.readInt16(i+s)!=this.bb.readInt16(c+s))continue t;a=this.vtables[e];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},r.Builder.prototype.finish=function(t,e,n){var o=n?r.SIZE_PREFIX_LENGTH:0;if(e){var a=e;if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH+o),a.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var i=r.FILE_IDENTIFIER_LENGTH-1;i>=0;i--)this.writeInt8(a.charCodeAt(i))}this.prep(this.minalign,r.SIZEOF_INT+o),this.addOffset(t),o&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},r.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},r.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(0==this.bb.readInt16(r+e))throw new Error("FlatBuffers: field "+e+" must be set")},r.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(r.SIZEOF_INT,t*e),this.prep(n,t*e)},r.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},r.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var n=0;n<t.length;){var r,o=t.charCodeAt(n++);(r=o<55296||o>=56320?o:(o<<10)+t.charCodeAt(n++)+-56613888)<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(63&r|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),n=0;for(var a=this.space,i=this.bb.bytes();n<e.length;n++)i[a++]=e[n];return this.endVector()},r.Builder.prototype.createLong=function(t,e){return r.Long.create(t,e)},r.ByteBuffer=function(t){this.bytes_=t,this.position_=0},r.ByteBuffer.allocate=function(t){return new r.ByteBuffer(new Uint8Array(t))},r.ByteBuffer.prototype.clear=function(){this.position_=0},r.ByteBuffer.prototype.bytes=function(){return this.bytes_},r.ByteBuffer.prototype.position=function(){return this.position_},r.ByteBuffer.prototype.setPosition=function(t){this.position_=t},r.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},r.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},r.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},r.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},r.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},r.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},r.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},r.ByteBuffer.prototype.readInt64=function(t){return new r.Long(this.readInt32(t),this.readInt32(t+4))},r.ByteBuffer.prototype.readUint64=function(t){return new r.Long(this.readUint32(t),this.readUint32(t+4))},r.ByteBuffer.prototype.readFloat32=function(t){return r.int32[0]=this.readInt32(t),r.float32[0]},r.ByteBuffer.prototype.readFloat64=function(t){return r.int32[r.isLittleEndian?0:1]=this.readInt32(t),r.int32[r.isLittleEndian?1:0]=this.readInt32(t+4),r.float64[0]},r.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},r.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},r.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},r.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},r.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},r.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},r.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},r.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},r.ByteBuffer.prototype.writeFloat32=function(t,e){r.float32[0]=e,this.writeInt32(t,r.int32[0])},r.ByteBuffer.prototype.writeFloat64=function(t,e){r.float64[0]=e,this.writeInt32(t,r.int32[r.isLittleEndian?0:1]),this.writeInt32(t+4,r.int32[r.isLittleEndian?1:0])},r.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<r.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+r.SIZEOF_INT+e));return t},r.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},r.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},r.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),o="",a=0;if(t+=r.SIZEOF_INT,e===r.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;a<n;){var i,c=this.readUint8(t+a++);if(c<192)i=c;else{var s=this.readUint8(t+a++);if(c<224)i=(31&c)<<6|63&s;else{var u=this.readUint8(t+a++);i=c<240?(15&c)<<12|(63&s)<<6|63&u:(7&c)<<18|(63&s)<<12|(63&u)<<6|63&this.readUint8(t+a++)}}i<65536?o+=String.fromCharCode(i):(i-=65536,o+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return o},r.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},r.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+r.SIZEOF_INT},r.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},r.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var e=0;e<r.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+r.SIZEOF_INT+e))return!1;return!0},r.ByteBuffer.prototype.createLong=function(t,e){return r.Long.create(t,e)}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(t,e){for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(1057);return __webpack_exports__}()}));
//# sourceMappingURL=ort.es5.min.js.map
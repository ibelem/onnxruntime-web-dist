/*!
 * ONNX Runtime Common v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ort=t():e.ort=t()}(self,(function(){return function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{InferenceSession:function(){return I},Tensor:function(){return A},TrainingSession:function(){return D},env:function(){return s},registerBackend:function(){return o}});var n=new Map,r=[],o=function(e,t,o){if(!t||"function"!=typeof t.init||"function"!=typeof t.createInferenceSessionHandler)throw new TypeError("not a valid backend");var i=n.get(e);if(void 0===i)n.set(e,{backend:t,priority:o});else{if(i.priority>o)return;if(i.priority===o&&i.backend!==t)throw new Error('cannot register backend "'.concat(e,'" using priority ').concat(o))}if(o>=0){var a=r.indexOf(e);-1!==a&&r.splice(a,1);for(var u=0;u<r.length;u++)if(n.get(r[u]).priority<=o)return void r.splice(u,0,e);r.push(e)}},i=function(e){return t=void 0,o=void 0,a=function(){var t,o,i,a,u,s,f,c;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(d){switch(d.label){case 0:t=0===e.length?r:e,o=[],i=0,a=t,d.label=1;case 1:if(!(i<a.length))return[3,7];if(u=a[i],!(s=n.get(u)))return[3,6];if(s.initialized)return[2,s.backend];if(s.aborted)return[3,6];f=!!s.initPromise,d.label=2;case 2:return d.trys.push([2,4,5,6]),f||(s.initPromise=s.backend.init()),[4,s.initPromise];case 3:return d.sent(),s.initialized=!0,[2,s.backend];case 4:return c=d.sent(),f||o.push({name:u,err:c}),s.aborted=!0,[3,6];case 5:return delete s.initPromise,[7];case 6:return i++,[3,1];case 7:throw new Error("no available backend found. ERR: ".concat(o.map((function(e){return"[".concat(e.name,"] ").concat(e.err)})).join(", ")))}}))},new((i=void 0)||(i=Promise))((function(e,n){function r(e){try{s(a.next(e))}catch(e){n(e)}}function u(e){try{s(a.throw(e))}catch(e){n(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,u)}s((a=a.apply(t,o||[])).next())}));var t,o,i,a},a="warning",u={wasm:{},webgl:{},webgpu:{},versions:{common:"1.17.0"},set logLevel(e){if(void 0!==e){if("string"!=typeof e||-1===["verbose","info","warning","error","fatal"].indexOf(e))throw new Error("Unsupported logging level: ".concat(e));a=e}},get logLevel(){return a}};Object.defineProperty(u,"logLevel",{enumerable:!0});var s=u,f=function(e,t){var n,r,o;if(void 0===e)throw new Error("Image buffer must be defined");if(void 0===t.height||void 0===t.width)throw new Error("Image height and width must be defined");if("NHWC"===t.tensorLayout)throw new Error("NHWC Tensor layout is not supported yet");var i,a,u=t.height,s=t.width,f=null!==(n=t.norm)&&void 0!==n?n:{mean:255,bias:0};i="number"==typeof f.mean?[f.mean,f.mean,f.mean,f.mean]:[f.mean[0],f.mean[1],f.mean[2],null!==(r=f.mean[3])&&void 0!==r?r:255],a="number"==typeof f.bias?[f.bias,f.bias,f.bias,f.bias]:[f.bias[0],f.bias[1],f.bias[2],null!==(o=f.bias[3])&&void 0!==o?o:0];var c=void 0!==t.format?t.format:"RGBA",d=void 0!==t.tensorFormat&&void 0!==t.tensorFormat?t.tensorFormat:"RGB",l=u*s,p="RGBA"===d?new Float32Array(4*l):new Float32Array(3*l),h=4,y=0,w=1,m=2,b=3,g=0,v=l,E=2*l,A=-1;"RGB"===c&&(h=3,y=0,w=1,m=2,b=-1),"RGBA"===d?A=3*l:"RBG"===d?(g=0,E=l,v=2*l):"BGR"===d&&(E=0,v=l,g=2*l);for(var T=0;T<l;T++,y+=h,m+=h,w+=h,b+=h)p[g++]=(e[y]+a[0])/i[0],p[v++]=(e[w]+a[1])/i[1],p[E++]=(e[m]+a[2])/i[2],-1!==A&&-1!==b&&(p[A++]=(e[b]+a[3])/i[3]);return new x("float32",p,"RGBA"===d?[1,4,u,s]:[1,3,u,s])},c=function(e,t){return n=void 0,r=void 0,i=function(){var n,r,o,i,a,u,s,c,d,l,p;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(h){if(n="undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement,r="undefined"!=typeof ImageData&&e instanceof ImageData,o="undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap,i="string"==typeof e,u=null!=t?t:{},n){if((c=document.createElement("canvas")).width=e.width,c.height=e.height,null==(d=c.getContext("2d")))throw new Error("Can not access image data");if(l=e.height,p=e.width,void 0!==t&&void 0!==t.resizedHeight&&void 0!==t.resizedWidth&&(l=t.resizedHeight,p=t.resizedWidth),void 0!==t){if(u=t,void 0!==t.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");u.tensorFormat="RGBA",u.height=l,u.width=p}else u.tensorFormat="RGBA",u.height=l,u.width=p;d.drawImage(e,0,0),a=d.getImageData(0,0,p,l).data}else{if(!r){if(o){if(void 0===t)throw new Error("Please provide image config with format for Imagebitmap");if((c=document.createElement("canvas")).width=e.width,c.height=e.height,null!=(d=c.getContext("2d")))return l=e.height,p=e.width,d.drawImage(e,0,0,p,l),a=d.getImageData(0,0,p,l).data,u.height=l,u.width=p,[2,f(a,u)];throw new Error("Can not access image data")}if(i)return[2,new Promise((function(t,n){var r=document.createElement("canvas"),o=r.getContext("2d");if(!e||!o)return n();var i=new Image;i.crossOrigin="Anonymous",i.src=e,i.onload=function(){r.width=i.width,r.height=i.height,o.drawImage(i,0,0,r.width,r.height);var e=o.getImageData(0,0,r.width,r.height);u.height=r.height,u.width=r.width,t(f(e.data,u))}}))];throw new Error("Input data provided is not supported - aborted tensor creation")}if(l=void 0,p=void 0,void 0!==t&&void 0!==t.resizedWidth&&void 0!==t.resizedHeight?(l=t.resizedHeight,p=t.resizedWidth):(l=e.height,p=e.width),void 0!==t&&(u=t),u.format="RGBA",u.height=l,u.width=p,void 0!==t){if((s=document.createElement("canvas")).width=p,s.height=l,null==(d=s.getContext("2d")))throw new Error("Can not access image data");d.putImageData(e,0,0),a=d.getImageData(0,0,p,l).data}else a=e.data}if(void 0!==a)return[2,f(a,u)];throw new Error("Input data provided is not supported - aborted tensor creation")}))},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{s(i.next(e))}catch(e){t(e)}}function u(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,u)}s((i=i.apply(n,r||[])).next())}));var n,r,o,i},d=function(e,t){var n=t.width,r=t.height,o=t.download,i=t.dispose;return new x({location:"texture",type:"float32",texture:e,dims:[1,r,n,4],download:o,dispose:i})},l=function(e,t){var n=t.dataType,r=t.dims,o=t.download,i=t.dispose;return new x({location:"gpu-buffer",type:null!=n?n:"float32",gpuBuffer:e,dims:r,download:o,dispose:i})},p=function(e,t,n){return new x({location:"cpu-pinned",type:e,data:t,dims:null!=n?n:[t.length]})},h=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),y=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),w=!1,m=function(){if(!w){w=!0;var e="undefined"!=typeof BigInt64Array&&"function"==typeof BigInt64Array.from,t="undefined"!=typeof BigUint64Array&&"function"==typeof BigUint64Array.from;e&&(h.set("int64",BigInt64Array),y.set(BigInt64Array,"int64")),t&&(h.set("uint64",BigUint64Array),y.set(BigUint64Array,"uint64"))}},b=function(e){for(var t=1,n=0;n<e.length;n++){var r=e[n];if("number"!=typeof r||!Number.isSafeInteger(r))throw new TypeError("dims[".concat(n,"] must be an integer, got: ").concat(r));if(r<0)throw new RangeError("dims[".concat(n,"] must be a non-negative integer, got: ").concat(r));t*=r}return t},g=function(e,t){switch(e.location){case"cpu":return new x(e.type,e.data,t);case"cpu-pinned":return new x({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new x({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new x({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});default:throw new Error("tensorReshape: tensor location ".concat(e.location," is not supported"))}},v=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},E=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},x=function(){function e(e,t,n){var r,o;if(m(),"object"==typeof e&&"location"in e)switch(this.dataLocation=e.location,r=e.type,o=e.dims,e.location){case"cpu-pinned":var i=h.get(r);if(!i)throw new TypeError('unsupported type "'.concat(r,'" to create tensor from pinned buffer'));if(!(e.data instanceof i))throw new TypeError("buffer should be of type ".concat(i.name));this.cpuData=e.data;break;case"texture":if("float32"!==r)throw new TypeError('unsupported type "'.concat(r,'" to create tensor from texture'));this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break;case"gpu-buffer":if("float32"!==r&&"float16"!==r&&"int32"!==r&&"int64"!==r&&"uint32"!==r&&"bool"!==r)throw new TypeError('unsupported type "'.concat(r,'" to create tensor from gpu buffer'));this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break;default:throw new Error("Tensor constructor: unsupported location '".concat(this.dataLocation,"'"))}else{var a=void 0,u=void 0;if("string"==typeof e)if(r=e,u=n,"string"===e){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");a=t}else{var s=h.get(e);if(void 0===s)throw new TypeError("Unsupported tensor type: ".concat(e,"."));if(Array.isArray(t)){if("float16"===e)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");a="uint64"===e||"int64"===e?s.from(t,BigInt):s.from(t)}else{if(!(t instanceof s))throw new TypeError("A ".concat(r," tensor's data must be type of ").concat(s));a=t}}else if(u=t,Array.isArray(e)){if(0===e.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");var f=typeof e[0];if("string"===f)r="string",a=e;else{if("boolean"!==f)throw new TypeError("Invalid element type of data array: ".concat(f,"."));r="bool",a=Uint8Array.from(e)}}else{var c=y.get(e.constructor);if(void 0===c)throw new TypeError("Unsupported type for tensor data: ".concat(e.constructor,"."));r=c,a=e}if(void 0===u)u=[a.length];else if(!Array.isArray(u))throw new TypeError("A tensor's dims must be a number array");o=u,this.cpuData=a,this.dataLocation="cpu"}var d=b(o);if(this.cpuData&&d!==this.cpuData.length)throw new Error("Tensor's size(".concat(d,") does not match data length(").concat(this.cpuData.length,")."));this.type=r,this.dims=o,this.size=d}return e.fromImage=function(e,t){return v(this,void 0,void 0,(function(){return E(this,(function(n){return[2,c(e,t)]}))}))},e.fromTexture=function(e,t){return d(e,t)},e.fromGpuBuffer=function(e,t){return l(e,t)},e.fromPinnedBuffer=function(e,t,n){return p(e,t,n)},e.prototype.toDataURL=function(e){return function(e,t){var n=document.createElement("canvas");n.width=e.dims[3],n.height=e.dims[2];var r=n.getContext("2d");if(null!=r){var o=void 0,i=void 0;void 0!==(null==t?void 0:t.tensorLayout)&&"NHWC"===t.tensorLayout?(o=e.dims[2],i=e.dims[3]):(o=e.dims[3],i=e.dims[2]);var a=void 0!==(null==t?void 0:t.format)?t.format:"RGB",u=null==t?void 0:t.norm,s=void 0,f=void 0;void 0===u||void 0===u.mean?s=[255,255,255,255]:"number"==typeof u.mean?s=[u.mean,u.mean,u.mean,u.mean]:(s=[u.mean[0],u.mean[1],u.mean[2],0],void 0!==u.mean[3]&&(s[3]=u.mean[3])),void 0===u||void 0===u.bias?f=[0,0,0,0]:"number"==typeof u.bias?f=[u.bias,u.bias,u.bias,u.bias]:(f=[u.bias[0],u.bias[1],u.bias[2],0],void 0!==u.bias[3]&&(f[3]=u.bias[3]));var c=i*o,d=0,l=c,p=2*c,h=-1;"RGBA"===a?(d=0,l=c,p=2*c,h=3*c):"RGB"===a?(d=0,l=c,p=2*c):"RBG"===a&&(d=0,p=c,l=2*c);for(var y=0;y<i;y++)for(var w=0;w<o;w++){var m=(e.data[d++]-f[0])*s[0],b=(e.data[l++]-f[1])*s[1],g=(e.data[p++]-f[2])*s[2],v=-1===h?255:(e.data[h++]-f[3])*s[3];r.fillStyle="rgba("+m+","+b+","+g+","+v+")",r.fillRect(w,y,1,1)}return n.toDataURL()}throw new Error("Can not access image data")}(this,e)},e.prototype.toImageData=function(e){return function(e,t){var n,r=document.createElement("canvas").getContext("2d");if(null==r)throw new Error("Can not access image data");var o=void 0,i=void 0,a=void 0;void 0!==(null==t?void 0:t.tensorLayout)&&"NHWC"===t.tensorLayout?(o=e.dims[2],i=e.dims[1],a=e.dims[3]):(o=e.dims[3],i=e.dims[2],a=e.dims[1]);var u=void 0!==t&&void 0!==t.format?t.format:"RGB",s=null==t?void 0:t.norm,f=void 0,c=void 0;void 0===s||void 0===s.mean?f=[255,255,255,255]:"number"==typeof s.mean?f=[s.mean,s.mean,s.mean,s.mean]:(f=[s.mean[0],s.mean[1],s.mean[2],255],void 0!==s.mean[3]&&(f[3]=s.mean[3])),void 0===s||void 0===s.bias?c=[0,0,0,0]:"number"==typeof s.bias?c=[s.bias,s.bias,s.bias,s.bias]:(c=[s.bias[0],s.bias[1],s.bias[2],0],void 0!==s.bias[3]&&(c[3]=s.bias[3]));var d=i*o;if(void 0!==t&&(void 0!==t.format&&4===a&&"RGBA"!==t.format||3===a&&"RGB"!==t.format&&"BGR"!==t.format))throw new Error("Tensor format doesn't match input tensor dims");var l=0,p=1,h=2,y=3,w=0,m=d,b=2*d,g=-1;"RGBA"===u?(w=0,m=d,b=2*d,g=3*d):"RGB"===u?(w=0,m=d,b=2*d):"RBG"===u&&(w=0,b=d,m=2*d),n=r.createImageData(o,i);for(var v=0;v<i*o;l+=4,p+=4,h+=4,y+=4,v++)n.data[l]=(e.data[w++]-c[0])*f[0],n.data[p]=(e.data[m++]-c[1])*f[1],n.data[h]=(e.data[b++]-c[2])*f[2],n.data[y]=-1===g?255:(e.data[g++]-c[3])*f[3];return n}(this,e)},Object.defineProperty(e.prototype,"data",{get:function(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return this.dataLocation},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gpuBuffer",{get:function(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData},enumerable:!1,configurable:!0}),e.prototype.getData=function(e){return v(this,void 0,void 0,(function(){var t;return E(this,(function(n){switch(n.label){case 0:switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return[3,1];case"texture":case"gpu-buffer":return[3,2]}return[3,6];case 1:return[2,this.data];case 2:if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");n.label=3;case 3:return n.trys.push([3,,5,6]),this.isDownloading=!0,[4,this.downloader()];case 4:return t=n.sent(),this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),[2,t];case 5:return this.isDownloading=!1,[7];case 6:throw new Error("cannot get data from location: ".concat(this.dataLocation))}}))}))},e.prototype.dispose=function(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"},e.prototype.ensureValid=function(){if("none"===this.dataLocation)throw new Error("The tensor is disposed.")},e.prototype.reshape=function(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return g(this,e)},e}(),A=x,T=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},B=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},I=function(){function e(e){this.handler=e}return e.prototype.run=function(e,t,n){return T(this,void 0,void 0,(function(){var r,o,i,a,u,s,f,c,d,l,p,h,y,w,m,b,g,v,E,x,T,I;return B(this,(function(B){switch(B.label){case 0:if(r={},o={},"object"!=typeof e||null===e||e instanceof A||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");if(i=!0,"object"==typeof t){if(null===t)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof A)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(0===t.length)throw new TypeError("'fetches' cannot be an empty array.");for(i=!1,a=0,u=t;a<u.length;a++){if("string"!=typeof(s=u[a]))throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(s))throw new RangeError("'fetches' contains invalid output name: ".concat(s,"."));r[s]=null}if("object"==typeof n&&null!==n)o=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else{for(f=!1,c=Object.getOwnPropertyNames(t),d=0,l=this.outputNames;d<l.length;d++)p=l[d],-1!==c.indexOf(p)&&(null===(h=t[p])||h instanceof A)&&(f=!0,i=!1,r[p]=h);if(f){if("object"==typeof n&&null!==n)o=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else o=t}}else if(void 0!==t)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(y=0,w=this.inputNames;y<w.length;y++)if(m=w[y],void 0===e[m])throw new Error("input '".concat(m,"' is missing in 'feeds'."));if(i)for(b=0,g=this.outputNames;b<g.length;b++)v=g[b],r[v]=null;return[4,this.handler.run(e,r,o)];case 1:for(T in E=B.sent(),x={},E)Object.hasOwnProperty.call(E,T)&&(I=E[T],x[T]=I instanceof A?I:new A(I.type,I.data,I.dims));return[2,x]}}))}))},e.prototype.release=function(){return T(this,void 0,void 0,(function(){return B(this,(function(e){return[2,this.handler.dispose()]}))}))},e.create=function(t,n,r,o){return T(this,void 0,void 0,(function(){var a,u,s,f,c,d,l;return B(this,(function(p){switch(p.label){case 0:if(u={},"string"==typeof t){if(a=t,"object"==typeof n&&null!==n)u=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(a=t,"object"==typeof n&&null!==n)u=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else{if(!(t instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");if(s=t,f=0,c=t.byteLength,"object"==typeof n&&null!==n)u=n;else if("number"==typeof n){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteOffset' must be an integer.");if(f<0||f>=s.byteLength)throw new RangeError("'byteOffset' is out of range [0, ".concat(s.byteLength,")."));if(c=t.byteLength-f,"number"==typeof r){if(c=r,!Number.isSafeInteger(c))throw new RangeError("'byteLength' must be an integer.");if(c<=0||f+c>s.byteLength)throw new RangeError("'byteLength' is out of range (0, ".concat(s.byteLength-f,"]."));if("object"==typeof o&&null!==o)u=o;else if(void 0!==o)throw new TypeError("'options' must be an object.")}else if(void 0!==r)throw new TypeError("'byteLength' must be a number.")}else if(void 0!==n)throw new TypeError("'options' must be an object.");a=new Uint8Array(s,f,c)}return d=u.executionProviders||[],l=d.map((function(e){return"string"==typeof e?e:e.name})),[4,i(l)];case 1:return[4,p.sent().createInferenceSessionHandler(a,u)];case 2:return[2,new e(p.sent())]}}))}))},e.prototype.startProfiling=function(){this.handler.startProfiling()},e.prototype.endProfiling=function(){this.handler.endProfiling()},Object.defineProperty(e.prototype,"inputNames",{get:function(){return this.handler.inputNames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outputNames",{get:function(){return this.handler.outputNames},enumerable:!1,configurable:!0}),e}(),P=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},j=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},D=function(){function e(e){this.handler=e}return Object.defineProperty(e.prototype,"inputNames",{get:function(){return this.handler.inputNames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outputNames",{get:function(){return this.handler.outputNames},enumerable:!1,configurable:!0}),e.create=function(e,t){return P(this,void 0,void 0,(function(){return j(this,(function(e){throw new Error("Method not implemented")}))}))},e.prototype.loadParametersBuffer=function(e,t){return P(this,void 0,void 0,(function(){return j(this,(function(e){throw new Error("Method not implemented.")}))}))},e.prototype.getContiguousParameters=function(e){return P(this,void 0,void 0,(function(){return j(this,(function(e){throw new Error("Method not implemented.")}))}))},e.prototype.runTrainStep=function(e,t,n){return P(this,void 0,void 0,(function(){return j(this,(function(e){throw new Error("Method not implemented.")}))}))},e.prototype.release=function(){return P(this,void 0,void 0,(function(){return j(this,(function(e){return[2,this.handler.dispose()]}))}))},e}();return t}()}));
//# sourceMappingURL=ort-common.es5.min.js.map